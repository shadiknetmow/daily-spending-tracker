(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var rR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var i0={exports:{}},Md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function lb(){if(Dx)return Md;Dx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,i){var c=null;if(i!==void 0&&(c=""+i),r.key!==void 0&&(c=""+r.key),"key"in r){i={};for(var d in r)d!=="key"&&(i[d]=r[d])}else i=r;return r=i.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:i}}return Md.Fragment=e,Md.jsx=t,Md.jsxs=t,Md}var Rx;function cb(){return Rx||(Rx=1,i0.exports=lb()),i0.exports}var l=cb(),o0={exports:{}},es={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function ub(){if(Ox)return es;Ox=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,L={};function R(V,ce,M){this.props=V,this.context=ce,this.refs=L,this.updater=M||T}R.prototype.isReactComponent={},R.prototype.setState=function(V,ce){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ce,"setState")},R.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function I(){}I.prototype=R.prototype;function j(V,ce,M){this.props=V,this.context=ce,this.refs=L,this.updater=M||T}var O=j.prototype=new I;O.constructor=j,C(O,R.prototype),O.isPureReactComponent=!0;var U=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function ee(V,ce,M,k,Y,Q){return M=Q.ref,{$$typeof:n,type:V,key:ce,ref:M!==void 0?M:null,props:Q}}function J(V,ce){return ee(V.type,ce,void 0,void 0,void 0,V.props)}function oe(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function xe(V){var ce={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(M){return ce[M]})}var F=/\/+/g;function H(V,ce){return typeof V=="object"&&V!==null&&V.key!=null?xe(""+V.key):ce.toString(36)}function re(){}function K(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(re,re):(V.status="pending",V.then(function(ce){V.status==="pending"&&(V.status="fulfilled",V.value=ce)},function(ce){V.status==="pending"&&(V.status="rejected",V.reason=ce)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Te(V,ce,M,k,Y){var Q=typeof V;(Q==="undefined"||Q==="boolean")&&(V=null);var fe=!1;if(V===null)fe=!0;else switch(Q){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(V.$$typeof){case n:case e:fe=!0;break;case _:return fe=V._init,Te(fe(V._payload),ce,M,k,Y)}}if(fe)return Y=Y(V),fe=k===""?"."+H(V,0):k,U(Y)?(M="",fe!=null&&(M=fe.replace(F,"$&/")+"/"),Te(Y,ce,M,"",function(Ne){return Ne})):Y!=null&&(oe(Y)&&(Y=J(Y,M+(Y.key==null||V&&V.key===Y.key?"":(""+Y.key).replace(F,"$&/")+"/")+fe)),ce.push(Y)),1;fe=0;var ve=k===""?".":k+":";if(U(V))for(var de=0;de<V.length;de++)k=V[de],Q=ve+H(k,de),fe+=Te(k,ce,M,Q,Y);else if(de=v(V),typeof de=="function")for(V=de.call(V),de=0;!(k=V.next()).done;)k=k.value,Q=ve+H(k,de++),fe+=Te(k,ce,M,Q,Y);else if(Q==="object"){if(typeof V.then=="function")return Te(K(V),ce,M,k,Y);throw ce=String(V),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return fe}function G(V,ce,M){if(V==null)return V;var k=[],Y=0;return Te(V,k,"","",function(Q){return ce.call(M,Q,Y++)}),k}function he(V){if(V._status===-1){var ce=V._result;ce=ce(),ce.then(function(M){(V._status===0||V._status===-1)&&(V._status=1,V._result=M)},function(M){(V._status===0||V._status===-1)&&(V._status=2,V._result=M)}),V._status===-1&&(V._status=0,V._result=ce)}if(V._status===1)return V._result.default;throw V._result}var ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ae(){}return es.Children={map:G,forEach:function(V,ce,M){G(V,function(){ce.apply(this,arguments)},M)},count:function(V){var ce=0;return G(V,function(){ce++}),ce},toArray:function(V){return G(V,function(ce){return ce})||[]},only:function(V){if(!oe(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},es.Component=R,es.Fragment=t,es.Profiler=r,es.PureComponent=j,es.StrictMode=s,es.Suspense=f,es.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,es.__COMPILER_RUNTIME={__proto__:null,c:function(V){return se.H.useMemoCache(V)}},es.cache=function(V){return function(){return V.apply(null,arguments)}},es.cloneElement=function(V,ce,M){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var k=C({},V.props),Y=V.key,Q=void 0;if(ce!=null)for(fe in ce.ref!==void 0&&(Q=void 0),ce.key!==void 0&&(Y=""+ce.key),ce)!Z.call(ce,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ce.ref===void 0||(k[fe]=ce[fe]);var fe=arguments.length-2;if(fe===1)k.children=M;else if(1<fe){for(var ve=Array(fe),de=0;de<fe;de++)ve[de]=arguments[de+2];k.children=ve}return ee(V.type,Y,void 0,void 0,Q,k)},es.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:i,_context:V},V},es.createElement=function(V,ce,M){var k,Y={},Q=null;if(ce!=null)for(k in ce.key!==void 0&&(Q=""+ce.key),ce)Z.call(ce,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(Y[k]=ce[k]);var fe=arguments.length-2;if(fe===1)Y.children=M;else if(1<fe){for(var ve=Array(fe),de=0;de<fe;de++)ve[de]=arguments[de+2];Y.children=ve}if(V&&V.defaultProps)for(k in fe=V.defaultProps,fe)Y[k]===void 0&&(Y[k]=fe[k]);return ee(V,Q,void 0,void 0,null,Y)},es.createRef=function(){return{current:null}},es.forwardRef=function(V){return{$$typeof:d,render:V}},es.isValidElement=oe,es.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:he}},es.memo=function(V,ce){return{$$typeof:h,type:V,compare:ce===void 0?null:ce}},es.startTransition=function(V){var ce=se.T,M={};se.T=M;try{var k=V(),Y=se.S;Y!==null&&Y(M,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(ae,ue)}catch(Q){ue(Q)}finally{se.T=ce}},es.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},es.use=function(V){return se.H.use(V)},es.useActionState=function(V,ce,M){return se.H.useActionState(V,ce,M)},es.useCallback=function(V,ce){return se.H.useCallback(V,ce)},es.useContext=function(V){return se.H.useContext(V)},es.useDebugValue=function(){},es.useDeferredValue=function(V,ce){return se.H.useDeferredValue(V,ce)},es.useEffect=function(V,ce,M){var k=se.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return k.useEffect(V,ce)},es.useId=function(){return se.H.useId()},es.useImperativeHandle=function(V,ce,M){return se.H.useImperativeHandle(V,ce,M)},es.useInsertionEffect=function(V,ce){return se.H.useInsertionEffect(V,ce)},es.useLayoutEffect=function(V,ce){return se.H.useLayoutEffect(V,ce)},es.useMemo=function(V,ce){return se.H.useMemo(V,ce)},es.useOptimistic=function(V,ce){return se.H.useOptimistic(V,ce)},es.useReducer=function(V,ce,M){return se.H.useReducer(V,ce,M)},es.useRef=function(V){return se.H.useRef(V)},es.useState=function(V){return se.H.useState(V)},es.useSyncExternalStore=function(V,ce,M){return se.H.useSyncExternalStore(V,ce,M)},es.useTransition=function(){return se.H.useTransition()},es.version="19.1.0",es}var Px;function Ep(){return Px||(Px=1,o0.exports=ub()),o0.exports}var D=Ep();const _p=E2(D);var l0={exports:{}},kd={},c0={exports:{}},u0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function db(){return Mx||(Mx=1,function(n){function e(G,he){var ue=G.length;G.push(he);e:for(;0<ue;){var ae=ue-1>>>1,V=G[ae];if(0<r(V,he))G[ae]=he,G[ue]=V,ue=ae;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var he=G[0],ue=G.pop();if(ue!==he){G[0]=ue;e:for(var ae=0,V=G.length,ce=V>>>1;ae<ce;){var M=2*(ae+1)-1,k=G[M],Y=M+1,Q=G[Y];if(0>r(k,ue))Y<V&&0>r(Q,k)?(G[ae]=Q,G[Y]=ue,ae=Y):(G[ae]=k,G[M]=ue,ae=M);else if(Y<V&&0>r(Q,ue))G[ae]=Q,G[Y]=ue,ae=Y;else break e}}return he}function r(G,he){var ue=G.sortIndex-he.sortIndex;return ue!==0?ue:G.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],h=[],_=1,b=null,v=3,T=!1,C=!1,L=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function U(G){for(var he=t(h);he!==null;){if(he.callback===null)s(h);else if(he.startTime<=G)s(h),he.sortIndex=he.expirationTime,e(f,he);else break;he=t(h)}}function se(G){if(L=!1,U(G),!C)if(t(f)!==null)C=!0,Z||(Z=!0,H());else{var he=t(h);he!==null&&Te(se,he.startTime-G)}}var Z=!1,ee=-1,J=5,oe=-1;function xe(){return R?!0:!(n.unstable_now()-oe<J)}function F(){if(R=!1,Z){var G=n.unstable_now();oe=G;var he=!0;try{e:{C=!1,L&&(L=!1,j(ee),ee=-1),T=!0;var ue=v;try{t:{for(U(G),b=t(f);b!==null&&!(b.expirationTime>G&&xe());){var ae=b.callback;if(typeof ae=="function"){b.callback=null,v=b.priorityLevel;var V=ae(b.expirationTime<=G);if(G=n.unstable_now(),typeof V=="function"){b.callback=V,U(G),he=!0;break t}b===t(f)&&s(f),U(G)}else s(f);b=t(f)}if(b!==null)he=!0;else{var ce=t(h);ce!==null&&Te(se,ce.startTime-G),he=!1}}break e}finally{b=null,v=ue,T=!1}he=void 0}}finally{he?H():Z=!1}}}var H;if(typeof O=="function")H=function(){O(F)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,K=re.port2;re.port1.onmessage=F,H=function(){K.postMessage(null)}}else H=function(){I(F,0)};function Te(G,he){ee=I(function(){G(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(G){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var ue=v;v=he;try{return G()}finally{v=ue}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=v;v=G;try{return he()}finally{v=ue}},n.unstable_scheduleCallback=function(G,he,ue){var ae=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ae+ue:ae):ue=ae,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ue+V,G={id:_++,callback:he,priorityLevel:G,startTime:ue,expirationTime:V,sortIndex:-1},ue>ae?(G.sortIndex=ue,e(h,G),t(f)===null&&G===t(h)&&(L?(j(ee),ee=-1):L=!0,Te(se,ue-ae))):(G.sortIndex=V,e(f,G),C||T||(C=!0,Z||(Z=!0,H()))),G},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(G){var he=v;return function(){var ue=v;v=he;try{return G.apply(this,arguments)}finally{v=ue}}}}(u0)),u0}var kx;function fb(){return kx||(kx=1,c0.exports=db()),c0.exports}var d0={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function hb(){if(jx)return ei;jx=1;var n=Ep();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(f,h,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:f,containerInfo:h,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ei.createPortal=function(f,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(f,h,null,_)},ei.flushSync=function(f){var h=c.T,_=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=h,s.p=_,s.d.f()}},ei.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(f,h))},ei.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ei.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var _=h.as,b=d(_,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,T=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?s.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:T}):_==="script"&&s.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:T,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ei.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);s.d.M(f,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(f)},ei.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,b=d(_,h.crossOrigin);s.d.L(f,_,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ei.preloadModule=function(f,h){if(typeof f=="string")if(h){var _=d(h.as,h.crossOrigin);s.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(f)},ei.requestFormReset=function(f){s.d.r(f)},ei.unstable_batchedUpdates=function(f,h){return f(h)},ei.useFormState=function(f,h,_){return c.H.useFormState(f,h,_)},ei.useFormStatus=function(){return c.H.useHostTransitionStatus()},ei.version="19.1.0",ei}var Bx;function mb(){if(Bx)return d0.exports;Bx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),d0.exports=hb(),d0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function pb(){if(Ux)return kd;Ux=1;var n=fb(),e=Ep(),t=mb();function s(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(i(a)!==a)throw Error(s(188))}function f(a){var o=a.alternate;if(!o){if(o=i(a),o===null)throw Error(s(188));return o!==a?null:a}for(var u=a,m=o;;){var N=u.return;if(N===null)break;var A=N.alternate;if(A===null){if(m=N.return,m!==null){u=m;continue}break}if(N.child===A.child){for(A=N.child;A;){if(A===u)return d(N),a;if(A===m)return d(N),o;A=A.sibling}throw Error(s(188))}if(u.return!==m.return)u=N,m=A;else{for(var B=!1,ne=N.child;ne;){if(ne===u){B=!0,u=N,m=A;break}if(ne===m){B=!0,m=N,u=A;break}ne=ne.sibling}if(!B){for(ne=A.child;ne;){if(ne===u){B=!0,u=A,m=N;break}if(ne===m){B=!0,m=A,u=N;break}ne=ne.sibling}if(!B)throw Error(s(189))}}if(u.alternate!==m)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var re=Symbol.for("react.client.reference");function K(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===re?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case R:return"Profiler";case L:return"StrictMode";case se:return"Suspense";case Z:return"SuspenseList";case oe:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case T:return"Portal";case O:return(a.displayName||"Context")+".Provider";case j:return(a._context.displayName||"Context")+".Consumer";case U:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ee:return o=a.displayName||null,o!==null?o:K(a.type)||"Memo";case J:o=a._payload,a=a._init;try{return K(a(o))}catch{}}return null}var Te=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ae=[],V=-1;function ce(a){return{current:a}}function M(a){0>V||(a.current=ae[V],ae[V]=null,V--)}function k(a,o){V++,ae[V]=a.current,a.current=o}var Y=ce(null),Q=ce(null),fe=ce(null),ve=ce(null);function de(a,o){switch(k(fe,o),k(Q,a),k(Y,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?rx(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=rx(o),a=ix(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}M(Y),k(Y,a)}function Ne(){M(Y),M(Q),M(fe)}function Ue(a){a.memoizedState!==null&&k(ve,a);var o=Y.current,u=ix(o,a.type);o!==u&&(k(Q,a),k(Y,u))}function we(a){Q.current===a&&(M(Y),M(Q)),ve.current===a&&(M(ve),Id._currentValue=ue)}var Je=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,Qe=n.unstable_cancelCallback,je=n.unstable_shouldYield,ge=n.unstable_requestPaint,Fe=n.unstable_now,ut=n.unstable_getCurrentPriorityLevel,Pe=n.unstable_ImmediatePriority,nt=n.unstable_UserBlockingPriority,it=n.unstable_NormalPriority,st=n.unstable_LowPriority,Nt=n.unstable_IdlePriority,Pt=n.log,Rt=n.unstable_setDisableYieldValue,Ft=null,Yt=null;function Be(a){if(typeof Pt=="function"&&Rt(a),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Ft,a)}catch{}}var We=Math.clz32?Math.clz32:yt,Lt=Math.log,pe=Math.LN2;function yt(a){return a>>>=0,a===0?32:31-(Lt(a)/pe|0)|0}var At=256,Kt=4194304;function Gt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xn(a,o,u){var m=a.pendingLanes;if(m===0)return 0;var N=0,A=a.suspendedLanes,B=a.pingedLanes;a=a.warmLanes;var ne=m&134217727;return ne!==0?(m=ne&~A,m!==0?N=Gt(m):(B&=ne,B!==0?N=Gt(B):u||(u=ne&~a,u!==0&&(N=Gt(u))))):(ne=m&~A,ne!==0?N=Gt(ne):B!==0?N=Gt(B):u||(u=m&~a,u!==0&&(N=Gt(u)))),N===0?0:o!==0&&o!==N&&(o&A)===0&&(A=N&-N,u=o&-o,A>=u||A===32&&(u&4194048)!==0)?o:N}function rs(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Cn(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(){var a=At;return At<<=1,(At&4194048)===0&&(At=256),a}function Un(){var a=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),a}function js(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function ln(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ls(a,o,u,m,N,A){var B=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var ne=a.entanglements,ye=a.expirationTimes,Ye=a.hiddenUpdates;for(u=B&~u;0<u;){var ct=31-We(u),Et=1<<ct;ne[ct]=0,ye[ct]=-1;var qe=Ye[ct];if(qe!==null)for(Ye[ct]=null,ct=0;ct<qe.length;ct++){var $e=qe[ct];$e!==null&&($e.lane&=-536870913)}u&=~Et}m!==0&&un(a,m,0),A!==0&&N===0&&a.tag!==0&&(a.suspendedLanes|=A&~(B&~o))}function un(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-We(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|u&4194090}function Mn(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var m=31-We(u),N=1<<m;N&o|a[m]&o&&(a[m]|=o),u&=~N}}function qa(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function gs(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ca(){var a=he.p;return a!==0?a:(a=window.event,a===void 0?32:Ax(a.type))}function vn(a,o){var u=he.p;try{return he.p=a,o()}finally{he.p=u}}var Xt=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Xt,kn="__reactProps$"+Xt,Fn="__reactContainer$"+Xt,Rn="__reactEvents$"+Xt,_s="__reactListeners$"+Xt,hs="__reactHandles$"+Xt,er="__reactResources$"+Xt,Ca="__reactMarker$"+Xt;function En(a){delete a[Ln],delete a[kn],delete a[Rn],delete a[_s],delete a[hs]}function bs(a){var o=a[Ln];if(o)return o;for(var u=a.parentNode;u;){if(o=u[Fn]||u[Ln]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=ux(a);a!==null;){if(u=a[Ln])return u;a=ux(a)}return o}a=u,u=a.parentNode}return null}function Qt(a){if(a=a[Ln]||a[Fn]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Ls(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(s(33))}function Ts(a){var o=a[er];return o||(o=a[er]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function $n(a){a[Ca]=!0}var La=new Set,ua={};function Bs(a,o){ms(a,o),ms(a+"Capture",o)}function ms(a,o){for(ua[a]=o,a=0;a<o.length;a++)La.add(o[a])}var wa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Is={},ka={};function Wn(a){return Je.call(ka,a)?!0:Je.call(Is,a)?!1:wa.test(a)?ka[a]=!0:(Is[a]=!0,!1)}function Ns(a,o,u){if(Wn(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function da(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function ws(a,o,u,m){if(m===null)a.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+m)}}var tr,Ta;function sa(a){if(tr===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);tr=o&&o[1]||"",Ta=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tr+a+Ta}var Gr=!1;function mn(a,o){if(!a||Gr)return"";Gr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch($e){var qe=$e}Reflect.construct(a,[],Et)}else{try{Et.call()}catch($e){qe=$e}a.call(Et.prototype)}}else{try{throw Error()}catch($e){qe=$e}(Et=a())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch($e){if($e&&qe&&typeof $e.stack=="string")return[$e.stack,qe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),B=A[0],ne=A[1];if(B&&ne){var ye=B.split(`
`),Ye=ne.split(`
`);for(N=m=0;m<ye.length&&!ye[m].includes("DetermineComponentFrameRoot");)m++;for(;N<Ye.length&&!Ye[N].includes("DetermineComponentFrameRoot");)N++;if(m===ye.length||N===Ye.length)for(m=ye.length-1,N=Ye.length-1;1<=m&&0<=N&&ye[m]!==Ye[N];)N--;for(;1<=m&&0<=N;m--,N--)if(ye[m]!==Ye[N]){if(m!==1||N!==1)do if(m--,N--,0>N||ye[m]!==Ye[N]){var ct=`
`+ye[m].replace(" at new "," at ");return a.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",a.displayName)),ct}while(1<=m&&0<=N);break}}}finally{Gr=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?sa(u):""}function Hr(a){switch(a.tag){case 26:case 27:case 5:return sa(a.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 15:return mn(a.type,!1);case 11:return mn(a.type.render,!1);case 1:return mn(a.type,!0);case 31:return sa("Activity");default:return""}}function Ds(a){try{var o="";do o+=Hr(a),a=a.return;while(a);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function ea(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Yr(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wr(a){var o=Yr(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),m=""+a[o];if(!a.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var N=u.get,A=u.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return N.call(this)},set:function(B){m=""+B,A.call(this,B)}}),Object.defineProperty(a,o,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(B){m=""+B},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function dr(a){a._valueTracker||(a._valueTracker=wr(a))}function vs(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return a&&(m=Yr(a)?a.checked?"true":"false":a.value),a=m,a!==u?(o.setValue(a),!0):!1}function Ia(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var li=/[\n"\\]/g;function cs(a){return a.replace(li,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qr(a,o,u,m,N,A,B,ne){a.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.type=B:a.removeAttribute("type"),o!=null?B==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+ea(o)):a.value!==""+ea(o)&&(a.value=""+ea(o)):B!=="submit"&&B!=="reset"||a.removeAttribute("value"),o!=null?bi(a,B,ea(o)):u!=null?bi(a,B,ea(u)):m!=null&&a.removeAttribute("value"),N==null&&A!=null&&(a.defaultChecked=!!A),N!=null&&(a.checked=N&&typeof N!="function"&&typeof N!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?a.name=""+ea(ne):a.removeAttribute("name")}function _i(a,o,u,m,N,A,B,ne){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.type=A),o!=null||u!=null){if(!(A!=="submit"&&A!=="reset"||o!=null))return;u=u!=null?""+ea(u):"",o=o!=null?""+ea(o):u,ne||o===a.value||(a.value=o),a.defaultValue=o}m=m??N,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=ne?a.checked:!!m,a.defaultChecked=!!m,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(a.name=B)}function bi(a,o,u){o==="number"&&Ia(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Er(a,o,u,m){if(a=a.options,o){o={};for(var N=0;N<u.length;N++)o["$"+u[N]]=!0;for(u=0;u<a.length;u++)N=o.hasOwnProperty("$"+a[u].value),a[u].selected!==N&&(a[u].selected=N),N&&m&&(a[u].defaultSelected=!0)}else{for(u=""+ea(u),o=null,N=0;N<a.length;N++){if(a[N].value===u){a[N].selected=!0,m&&(a[N].defaultSelected=!0);return}o!==null||a[N].disabled||(o=a[N])}o!==null&&(o.selected=!0)}}function ci(a,o,u){if(o!=null&&(o=""+ea(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+ea(u):""}function Ti(a,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(s(92));if(Te(m)){if(1<m.length)throw Error(s(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=ea(o),a.defaultValue=u,m=a.textContent,m===u&&m!==""&&m!==null&&(a.value=m)}function za(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var ui=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ir(a,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,u):typeof u!="number"||u===0||ui.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function Da(a,o,u){if(o!=null&&typeof o!="object")throw Error(s(62));if(a=a.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var N in o)m=o[N],o.hasOwnProperty(N)&&u[N]!==m&&Ir(a,N,m)}else for(var A in o)o.hasOwnProperty(A)&&Ir(a,A,o[A])}function Ni(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Re=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ze(a){return Re.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var dt=null;function bt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Dt=null,wt=null;function xt(a){var o=Qt(a);if(o&&(a=o.stateNode)){var u=a[kn]||null;e:switch(a=o.stateNode,o.type){case"input":if(qr(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+cs(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==a&&m.form===a.form){var N=m[kn]||null;if(!N)throw Error(s(90));qr(m,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===a.form&&vs(m)}break e;case"textarea":ci(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Er(a,!!u.multiple,o,!1)}}}var Zt=!1;function _n(a,o,u){if(Zt)return a(o,u);Zt=!0;try{var m=a(o);return m}finally{if(Zt=!1,(Dt!==null||wt!==null)&&(jf(),Dt&&(o=Dt,a=wt,wt=Dt=null,xt(o),a)))for(o=0;o<a.length;o++)xt(a[o])}}function on(a,o){var u=a.stateNode;if(u===null)return null;var m=u[kn]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(s(231,o,typeof u));return u}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(ts)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Yn=!1}var yn=null,Dr=null,zr=null;function fr(){if(zr)return zr;var a,o=Dr,u=o.length,m,N="value"in yn?yn.value:yn.textContent,A=N.length;for(a=0;a<u&&o[a]===N[a];a++);var B=u-a;for(m=1;m<=B&&o[u-m]===N[A-m];m++);return zr=N.slice(a,1<m?1-m:void 0)}function di(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function nr(){return!0}function fi(){return!1}function fa(a){function o(u,m,N,A,B){this._reactName=u,this._targetInst=N,this.type=m,this.nativeEvent=A,this.target=B,this.currentTarget=null;for(var ne in a)a.hasOwnProperty(ne)&&(u=a[ne],this[ne]=u?u(A):A[ne]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?nr:fi,this.isPropagationStopped=fi,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),o}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_r=fa(sr),br=_({},sr,{view:0,detail:0}),Pi=fa(br),Zi,le,_e,tt=_({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==_e&&(_e&&a.type==="mousemove"?(Zi=a.screenX-_e.screenX,le=a.screenY-_e.screenY):le=Zi=0,_e=a),Zi)},movementY:function(a){return"movementY"in a?a.movementY:le}}),Xe=fa(tt),rt=_({},tt,{dataTransfer:0}),_t=fa(rt),mt=_({},br,{relatedTarget:0}),Bt=fa(mt),kt=_({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ct=fa(kt),$t=_({},sr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Bn=fa($t),Kn=_({},sr,{data:0}),Xn=fa(Kn),zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gs(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=bn[a])?!!o[a]:!1}function aa(){return Gs}var dn=_({},br,{key:function(a){if(a.key){var o=zn[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=di(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ha[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(a){return a.type==="keypress"?di(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?di(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ys=fa(dn),Tr=_({},tt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=fa(Tr),Mi=_({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),_o=fa(Mi),S=_({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=fa(S),Ee=_({},tt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ae=fa(Ee),Me=_({},sr,{newState:0,oldState:0}),et=fa(Me),vt=[9,13,27,32],Vt=ts&&"CompositionEvent"in window,Jt=null;ts&&"documentMode"in document&&(Jt=document.documentMode);var pn=ts&&"TextEvent"in window&&!Jt,wn=ts&&(!Vt||Jt&&8<Jt&&11>=Jt),as=" ",Ks=!1;function Xs(a,o){switch(a){case"keyup":return vt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ma(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Hs=!1;function ja(a,o){switch(a){case"compositionend":return ma(o);case"keypress":return o.which!==32?null:(Ks=!0,as);case"textInput":return a=o.data,a===as&&Ks?null:a;default:return null}}function Rr(a,o){if(Hs)return a==="compositionend"||!Vt&&Xs(a,o)?(a=fr(),zr=Dr=yn=null,Hs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return wn&&o.locale!=="ko"?null:o.data;default:return null}}var hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!hr[a.type]:o==="textarea"}function qo(a,o,u,m){Dt?wt?wt.push(m):wt=[m]:Dt=m,o=Hf(o,"onChange"),0<o.length&&(u=new _r("onChange","change",null,u,m),a.push({event:u,listeners:o}))}var hi=null,mi=null;function Ji(a){ex(a,0)}function $r(a){var o=Ls(a);if(vs(o))return a}function zo(a,o){if(a==="change")return o}var Qi=!1;if(ts){var Na;if(ts){var ki="oninput"in document;if(!ki){var ji=document.createElement("div");ji.setAttribute("oninput","return;"),ki=typeof ji.oninput=="function"}Na=ki}else Na=!1;Qi=Na&&(!document.documentMode||9<document.documentMode)}function bo(){hi&&(hi.detachEvent("onpropertychange",$o),mi=hi=null)}function $o(a){if(a.propertyName==="value"&&$r(mi)){var o=[];qo(o,mi,a,bt(a)),_n(Ji,o)}}function mr(a,o,u){a==="focusin"?(bo(),hi=o,mi=u,hi.attachEvent("onpropertychange",$o)):a==="focusout"&&bo()}function Ac(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $r(mi)}function gl(a,o){if(a==="click")return $r(o)}function Fl(a,o){if(a==="input"||a==="change")return $r(o)}function Wr(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Ba=typeof Object.is=="function"?Object.is:Wr;function eo(a,o){if(Ba(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var N=u[m];if(!Je.call(o,N)||!Ba(a[N],o[N]))return!1}return!0}function xl(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vi(a,o){var u=xl(a);a=0;for(var m;u;){if(u.nodeType===3){if(m=a+u.textContent.length,a<=o&&m>=o)return{node:u,offset:o-a};a=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xl(u)}}function to(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?to(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function pr(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Ia(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=Ia(a.document)}return o}function va(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Kr=ts&&"documentMode"in document&&11>=document.documentMode,Ua=null,Nr=null,Xr=null,Pr=!1;function Us(a,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Pr||Ua==null||Ua!==Ia(m)||(m=Ua,"selectionStart"in m&&va(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Xr&&eo(Xr,m)||(Xr=m,m=Hf(Nr,"onSelect"),0<m.length&&(o=new _r("onSelect","select",null,o,u),a.push({event:o,listeners:m}),o.target=Ua)))}function ar(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var ya={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionrun:ar("Transition","TransitionRun"),transitionstart:ar("Transition","TransitionStart"),transitioncancel:ar("Transition","TransitionCancel"),transitionend:ar("Transition","TransitionEnd")},vr={},To={};ts&&(To=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function yi(a){if(vr[a])return vr[a];if(!ya[a])return a;var o=ya[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in To)return vr[a]=o[u];return a}var Wo=yi("animationend"),no=yi("animationiteration"),so=yi("animationstart"),ao=yi("transitionrun"),No=yi("transitionstart"),Ko=yi("transitioncancel"),ro=yi("transitionend"),Bi=new Map,vo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vo.push("scrollEnd");function ra(a,o){Bi.set(a,o),Bs(o,[a])}var Mr=new WeakMap;function Zn(a,o){if(typeof a=="object"&&a!==null){var u=Mr.get(a);return u!==void 0?u:(o={value:a,source:o,stack:Ds(o)},Mr.set(a,o),o)}return{value:a,source:o,stack:Ds(o)}}var Jn=[],Fs=0,pa=0;function Zr(){for(var a=Fs,o=pa=Fs=0;o<a;){var u=Jn[o];Jn[o++]=null;var m=Jn[o];Jn[o++]=null;var N=Jn[o];Jn[o++]=null;var A=Jn[o];if(Jn[o++]=null,m!==null&&N!==null){var B=m.pending;B===null?N.next=N:(N.next=B.next,B.next=N),m.pending=N}A!==0&&Vl(u,N,A)}}function io(a,o,u,m){Jn[Fs++]=a,Jn[Fs++]=o,Jn[Fs++]=u,Jn[Fs++]=m,pa|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function oo(a,o,u,m){return io(a,o,u,m),yo(a)}function Ui(a,o){return io(a,null,null,o),yo(a)}function Vl(a,o,u){a.lanes|=u;var m=a.alternate;m!==null&&(m.lanes|=u);for(var N=!1,A=a.return;A!==null;)A.childLanes|=u,m=A.alternate,m!==null&&(m.childLanes|=u),A.tag===22&&(a=A.stateNode,a===null||a._visibility&1||(N=!0)),a=A,A=A.return;return a.tag===3?(A=a.stateNode,N&&o!==null&&(N=31-We(u),a=A.hiddenUpdates,m=a[N],m===null?a[N]=[o]:m.push(o),o.lane=u|536870912),A):null}function yo(a){if(50<Nd)throw Nd=0,Im=null,Error(s(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Ra={};function yr(a,o,u,m){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(a,o,u,m){return new yr(a,o,u,m)}function Xo(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ai(a,o){var u=a.alternate;return u===null?(u=rr(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function lo(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Ao(a,o,u,m,N,A){var B=0;if(m=a,typeof a=="function")Xo(a)&&(B=1);else if(typeof a=="string")B=K5(a,u,Y.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case oe:return a=rr(31,u,o,N),a.elementType=oe,a.lanes=A,a;case C:return Fi(u.children,N,A,o);case L:B=8,N|=24;break;case R:return a=rr(12,u,o,N|2),a.elementType=R,a.lanes=A,a;case se:return a=rr(13,u,o,N),a.elementType=se,a.lanes=A,a;case Z:return a=rr(19,u,o,N),a.elementType=Z,a.lanes=A,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:case O:B=10;break e;case j:B=9;break e;case U:B=11;break e;case ee:B=14;break e;case J:B=16,m=null;break e}B=29,u=Error(s(130,a===null?"null":typeof a,"")),m=null}return o=rr(B,u,o,N),o.elementType=a,o.type=m,o.lanes=A,o}function Fi(a,o,u,m){return a=rr(7,a,m,o),a.lanes=u,a}function El(a,o,u){return a=rr(6,a,null,o),a.lanes=u,a}function _l(a,o,u){return o=rr(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Si=[],Ci=0,So=null,bl=0,kr=[],$=0,Se=null,ot=1,at="";function St(a,o){Si[Ci++]=bl,Si[Ci++]=So,So=a,bl=o}function Mt(a,o,u){kr[$++]=ot,kr[$++]=at,kr[$++]=Se,Se=a;var m=ot;a=at;var N=32-We(m)-1;m&=~(1<<N),u+=1;var A=32-We(o)+N;if(30<A){var B=N-N%5;A=(m&(1<<B)-1).toString(32),m>>=B,N-=B,ot=1<<32-We(o)+N|u<<N|m,at=A+a}else ot=1<<A|u<<N|m,at=a}function It(a){a.return!==null&&(St(a,1),Mt(a,1,0))}function sn(a){for(;a===So;)So=Si[--Ci],Si[Ci]=null,bl=Si[--Ci],Si[Ci]=null;for(;a===Se;)Se=kr[--$],kr[$]=null,at=kr[--$],kr[$]=null,ot=kr[--$],kr[$]=null}var Wt=null,an=null,rn=!1,is=null,ga=!1,Gl=Error(s(519));function Tl(a){var o=Error(s(418,""));throw Hl(Zn(o,a)),Gl}function lf(a){var o=a.stateNode,u=a.type,m=a.memoizedProps;switch(o[Ln]=a,o[kn]=m,u){case"dialog":ds("cancel",o),ds("close",o);break;case"iframe":case"object":case"embed":ds("load",o);break;case"video":case"audio":for(u=0;u<yd.length;u++)ds(yd[u],o);break;case"source":ds("error",o);break;case"img":case"image":case"link":ds("error",o),ds("load",o);break;case"details":ds("toggle",o);break;case"input":ds("invalid",o),_i(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),dr(o);break;case"select":ds("invalid",o);break;case"textarea":ds("invalid",o),Ti(o,m.value,m.defaultValue,m.children),dr(o)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||ax(o.textContent,u)?(m.popover!=null&&(ds("beforetoggle",o),ds("toggle",o)),m.onScroll!=null&&ds("scroll",o),m.onScrollEnd!=null&&ds("scrollend",o),m.onClick!=null&&(o.onclick=Yf),o=!0):o=!1,o||Tl(a)}function Co(a){for(Wt=a.return;Wt;)switch(Wt.tag){case 5:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:Wt=Wt.return}}function jr(a){if(a!==Wt)return!1;if(!rn)return Co(a),rn=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||zm(a.type,a.memoizedProps)),u=!u),u&&an&&Tl(a),Co(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(o===0){an=Mo(a.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;a=a.nextSibling}an=null}}else o===27?(o=an,ic(a.type)?(a=Xm,Xm=null,an=a):an=o):an=Wt?Mo(a.stateNode.nextSibling):null;return!0}function pi(){an=Wt=null,rn=!1}function cf(){var a=is;return a!==null&&(Ii===null?Ii=a:Ii.push.apply(Ii,a),is=null),a}function Hl(a){is===null?is=[a]:is.push(a)}var co=ce(null),ir=null,Lo=null;function Zo(a,o,u){k(co,o._currentValue),o._currentValue=u}function uo(a){a._currentValue=co.current,M(co)}function eu(a,o,u){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===u)break;a=a.return}}function tu(a,o,u,m){var N=a.child;for(N!==null&&(N.return=a);N!==null;){var A=N.dependencies;if(A!==null){var B=N.child;A=A.firstContext;e:for(;A!==null;){var ne=A;A=N;for(var ye=0;ye<o.length;ye++)if(ne.context===o[ye]){A.lanes|=u,ne=A.alternate,ne!==null&&(ne.lanes|=u),eu(A.return,u,a),m||(B=null);break e}A=ne.next}}else if(N.tag===18){if(B=N.return,B===null)throw Error(s(341));B.lanes|=u,A=B.alternate,A!==null&&(A.lanes|=u),eu(B,u,a),B=null}else B=N.child;if(B!==null)B.return=N;else for(B=N;B!==null;){if(B===a){B=null;break}if(N=B.sibling,N!==null){N.return=B.return,B=N;break}B=B.return}N=B}}function Yl(a,o,u,m){a=null;for(var N=o,A=!1;N!==null;){if(!A){if((N.flags&524288)!==0)A=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var B=N.alternate;if(B===null)throw Error(s(387));if(B=B.memoizedProps,B!==null){var ne=N.type;Ba(N.pendingProps.value,B.value)||(a!==null?a.push(ne):a=[ne])}}else if(N===ve.current){if(B=N.alternate,B===null)throw Error(s(387));B.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(a!==null?a.push(Id):a=[Id])}N=N.return}a!==null&&tu(o,a,u,m),o.flags|=262144}function nu(a){for(a=a.firstContext;a!==null;){if(!Ba(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fo(a){ir=a,Lo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function $a(a){return su(ir,a)}function Jo(a,o){return ir===null&&fo(a),su(a,o)}function su(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Lo===null){if(a===null)throw Error(s(308));Lo=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Lo=Lo.next=o;return u}var tm=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},uf=n.unstable_scheduleCallback,nm=n.unstable_NormalPriority,Wa={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qu(){return{controller:new tm,data:new Map,refCount:0}}function Sc(a){a.refCount--,a.refCount===0&&uf(nm,function(){a.controller.abort()})}var Cc=null,ed=0,Nl=0,wo=null;function sm(a,o){if(Cc===null){var u=Cc=[];ed=0,Nl=jm(),wo={status:"pending",value:void 0,then:function(m){u.push(m)}}}return ed++,o.then(df,df),o}function df(){if(--ed===0&&Cc!==null){wo!==null&&(wo.status="fulfilled");var a=Cc;Cc=null,Nl=0,wo=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ff(a,o){var u=[],m={status:"pending",value:null,reason:null,then:function(N){u.push(N)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var N=0;N<u.length;N++)(0,u[N])(o)},function(N){for(m.status="rejected",m.reason=N,N=0;N<u.length;N++)(0,u[N])(void 0)}),m}var E=G.S;G.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&sm(a,o),E!==null&&E(a,o)};var y=ce(null);function w(){var a=y.current;return a!==null?a:oa.pooledCache}function P(a,o){o===null?k(y,y.current):k(y,o.pool)}function z(){var a=w();return a===null?null:{parent:Wa._currentValue,pool:a}}var W=Error(s(460)),X=Error(s(474)),te=Error(s(542)),ie={then:function(){}};function me(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ce(){}function He(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(Ce,Ce),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,pt(a),a;default:if(typeof o.status=="string")o.then(Ce,Ce);else{if(a=oa,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var N=o;N.status="fulfilled",N.value=m}},function(m){if(o.status==="pending"){var N=o;N.status="rejected",N.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,pt(a),a}throw Ve=o,W}}var Ve=null;function Oe(){if(Ve===null)throw Error(s(459));var a=Ve;return Ve=null,a}function pt(a){if(a===W||a===te)throw Error(s(483))}var Ke=!1;function Le(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function De(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function lt(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function gt(a,o,u){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(qs&2)!==0){var N=m.pending;return N===null?o.next=o:(o.next=N.next,N.next=o),m.pending=o,o=yo(a),Vl(a,null,u),o}return io(a,m,o,u),yo(a)}function ft(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,u|=m,o.lanes=u,Mn(a,u)}}function qt(a,o){var u=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var N=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var B={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};A===null?N=A=B:A=A.next=B,u=u.next}while(u!==null);A===null?N=A=o:A=A.next=o}else N=A=o;u={baseState:m.baseState,firstBaseUpdate:N,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var jt=!1;function fn(){if(jt){var a=wo;if(a!==null)throw a}}function Ut(a,o,u,m){jt=!1;var N=a.updateQueue;Ke=!1;var A=N.firstBaseUpdate,B=N.lastBaseUpdate,ne=N.shared.pending;if(ne!==null){N.shared.pending=null;var ye=ne,Ye=ye.next;ye.next=null,B===null?A=Ye:B.next=Ye,B=ye;var ct=a.alternate;ct!==null&&(ct=ct.updateQueue,ne=ct.lastBaseUpdate,ne!==B&&(ne===null?ct.firstBaseUpdate=Ye:ne.next=Ye,ct.lastBaseUpdate=ye))}if(A!==null){var Et=N.baseState;B=0,ct=Ye=ye=null,ne=A;do{var qe=ne.lane&-536870913,$e=qe!==ne.lane;if($e?(Cs&qe)===qe:(m&qe)===qe){qe!==0&&qe===Nl&&(jt=!0),ct!==null&&(ct=ct.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var On=a,Tn=ne;qe=o;var Js=u;switch(Tn.tag){case 1:if(On=Tn.payload,typeof On=="function"){Et=On.call(Js,Et,qe);break e}Et=On;break e;case 3:On.flags=On.flags&-65537|128;case 0:if(On=Tn.payload,qe=typeof On=="function"?On.call(Js,Et,qe):On,qe==null)break e;Et=_({},Et,qe);break e;case 2:Ke=!0}}qe=ne.callback,qe!==null&&(a.flags|=64,$e&&(a.flags|=8192),$e=N.callbacks,$e===null?N.callbacks=[qe]:$e.push(qe))}else $e={lane:qe,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},ct===null?(Ye=ct=$e,ye=Et):ct=ct.next=$e,B|=qe;if(ne=ne.next,ne===null){if(ne=N.shared.pending,ne===null)break;$e=ne,ne=$e.next,$e.next=null,N.lastBaseUpdate=$e,N.shared.pending=null}}while(!0);ct===null&&(ye=Et),N.baseState=ye,N.firstBaseUpdate=Ye,N.lastBaseUpdate=ct,A===null&&(N.shared.lanes=0),nc|=B,a.lanes=B,a.memoizedState=Et}}function As(a,o){if(typeof a!="function")throw Error(s(191,a));a.call(o)}function Rs(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)As(u[a],o)}var ns=ce(null),Qn=ce(0);function Vs(a,o){a=Rl,k(Qn,a),k(ns,o),Rl=a|o.baseLanes}function Os(){k(Qn,Rl),k(ns,ns.current)}function Vn(){Rl=Qn.current,M(ns),M(Qn)}var Ys=0,gn=null,In=null,xs=null,Ss=!1,or=!1,Ka=!1,Oa=0,Pa=0,Fa=null,Li=0;function Ps(){throw Error(s(321))}function Va(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!Ba(a[u],o[u]))return!1;return!0}function Vi(a,o,u,m,N,A){return Ys=A,gn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=a===null||a.memoizedState===null?Bp:Up,Ka=!1,A=u(m,N),Ka=!1,or&&(A=vl(o,u,m,N)),Qo(a),A}function Qo(a){G.H=yf;var o=In!==null&&In.next!==null;if(Ys=0,xs=In=gn=null,Ss=!1,Pa=0,Fa=null,o)throw Error(s(300));a===null||Ar||(a=a.dependencies,a!==null&&nu(a)&&(Ar=!0))}function vl(a,o,u,m){gn=a;var N=0;do{if(or&&(Fa=null),Pa=0,or=!1,25<=N)throw Error(s(301));if(N+=1,xs=In=null,a.updateQueue!=null){var A=a.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}G.H=i5,A=o(u,m)}while(or);return A}function el(){var a=G.H,o=a.useState()[0];return o=typeof o.then=="function"?tl(o):o,a=a.useState()[0],(In!==null?In.memoizedState:null)!==a&&(gn.flags|=1024),o}function ia(){var a=Oa!==0;return Oa=0,a}function Lc(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function au(a){if(Ss){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ss=!1}Ys=0,xs=In=gn=null,or=!1,Pa=Oa=0,Fa=null}function Br(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xs===null?gn.memoizedState=xs=a:xs=xs.next=a,xs}function xa(){if(In===null){var a=gn.alternate;a=a!==null?a.memoizedState:null}else a=In.next;var o=xs===null?gn.memoizedState:xs.next;if(o!==null)xs=o,In=a;else{if(a===null)throw gn.alternate===null?Error(s(467)):Error(s(310));In=a,a={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},xs===null?gn.memoizedState=xs=a:xs=xs.next=a}return xs}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(a){var o=Pa;return Pa+=1,Fa===null&&(Fa=[]),a=He(Fa,a,o),o=gn,(xs===null?o.memoizedState:xs.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?Bp:Up),a}function Jr(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return tl(a);if(a.$$typeof===O)return $a(a)}throw Error(s(438,String(a)))}function nl(a){var o=null,u=gn.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=gn.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(N){return N.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=yl(),gn.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),m=0;m<a;m++)u[m]=xe;return o.index++,u}function Qr(a,o){return typeof o=="function"?o(a):o}function wc(a){var o=xa();return ql(o,In,a)}function ql(a,o,u){var m=a.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=u;var N=a.baseQueue,A=m.pending;if(A!==null){if(N!==null){var B=N.next;N.next=A.next,A.next=B}o.baseQueue=N=A,m.pending=null}if(A=a.baseState,N===null)a.memoizedState=A;else{o=N.next;var ne=B=null,ye=null,Ye=o,ct=!1;do{var Et=Ye.lane&-536870913;if(Et!==Ye.lane?(Cs&Et)===Et:(Ys&Et)===Et){var qe=Ye.revertLane;if(qe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),Et===Nl&&(ct=!0);else if((Ys&qe)===qe){Ye=Ye.next,qe===Nl&&(ct=!0);continue}else Et={lane:0,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ye===null?(ne=ye=Et,B=A):ye=ye.next=Et,gn.lanes|=qe,nc|=qe;Et=Ye.action,Ka&&u(A,Et),A=Ye.hasEagerState?Ye.eagerState:u(A,Et)}else qe={lane:Et,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ye===null?(ne=ye=qe,B=A):ye=ye.next=qe,gn.lanes|=Et,nc|=Et;Ye=Ye.next}while(Ye!==null&&Ye!==o);if(ye===null?B=A:ye.next=ne,!Ba(A,a.memoizedState)&&(Ar=!0,ct&&(u=wo,u!==null)))throw u;a.memoizedState=A,a.baseState=B,a.baseQueue=ye,m.lastRenderedState=A}return N===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function ru(a){var o=xa(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var m=u.dispatch,N=u.pending,A=o.memoizedState;if(N!==null){u.pending=null;var B=N=N.next;do A=a(A,B.action),B=B.next;while(B!==N);Ba(A,o.memoizedState)||(Ar=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),u.lastRenderedState=A}return[A,m]}function Ic(a,o,u){var m=gn,N=xa(),A=rn;if(A){if(u===void 0)throw Error(s(407));u=u()}else u=o();var B=!Ba((In||N).memoizedState,u);B&&(N.memoizedState=u,Ar=!0),N=N.queue;var ne=zl.bind(null,m,N,a);if(Kl(2048,8,ne,[a]),N.getSnapshot!==o||B||xs!==null&&xs.memoizedState.tag&1){if(m.flags|=2048,Do(9,Pc(),Dc.bind(null,m,N,u,o),null),oa===null)throw Error(s(349));A||(Ys&124)!==0||iu(m,o,u)}return u}function iu(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=gn.updateQueue,o===null?(o=yl(),gn.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function Dc(a,o,u,m){o.value=u,o.getSnapshot=m,hf(o)&&mf(a)}function zl(a,o,u){return u(function(){hf(o)&&mf(a)})}function hf(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!Ba(a,u)}catch{return!0}}function mf(a){var o=Ui(a,2);o!==null&&$i(o,a,2)}function Rc(a){var o=Br();if(typeof a=="function"){var u=a;if(a=u(),Ka){Be(!0);try{u()}finally{Be(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:a},o}function Io(a,o,u,m){return a.baseState=u,ql(a,In,typeof m=="function"?m:Qr)}function am(a,o,u,m,N){if(vf(a))throw Error(s(485));if(a=o.action,a!==null){var A={payload:N,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){A.listeners.push(B)}};G.T!==null?u(!0):A.isTransition=!1,m(A),u=o.pending,u===null?(A.next=o.pending=A,pf(o,A)):(A.next=u.next,o.pending=u.next=A)}}function pf(a,o){var u=o.action,m=o.payload,N=a.state;if(o.isTransition){var A=G.T,B={};G.T=B;try{var ne=u(N,m),ye=G.S;ye!==null&&ye(B,ne),gf(a,o,ne)}catch(Ye){$l(a,o,Ye)}finally{G.T=A}}else try{A=u(N,m),gf(a,o,A)}catch(Ye){$l(a,o,Ye)}}function gf(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){td(a,o,m)},function(m){return $l(a,o,m)}):td(a,o,u)}function td(a,o,u){o.status="fulfilled",o.value=u,nd(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,pf(a,u)))}function $l(a,o,u){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,nd(o),o=o.next;while(o!==m)}a.action=null}function nd(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function sd(a,o){return o}function Oc(a,o){if(rn){var u=oa.formState;if(u!==null){e:{var m=gn;if(rn){if(an){t:{for(var N=an,A=ga;N.nodeType!==8;){if(!A){N=null;break t}if(N=Mo(N.nextSibling),N===null){N=null;break t}}A=N.data,N=A==="F!"||A==="F"?N:null}if(N){an=Mo(N.nextSibling),m=N.data==="F!";break e}}Tl(m)}m=!1}m&&(o=u[0])}}return u=Br(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:o},u.queue=m,u=Mp.bind(null,gn,m),m.dispatch=u,m=Rc(!1),A=rm.bind(null,gn,!1,m.queue),m=Br(),N={state:o,dispatch:null,action:a,pending:null},m.queue=N,u=am.bind(null,gn,N,A,u),N.dispatch=u,m.memoizedState=a,[o,u,!1]}function ou(a){var o=xa();return Wl(o,In,a)}function Wl(a,o,u){if(o=ql(a,o,sd)[0],a=wc(Qr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=tl(o)}catch(B){throw B===W?te:B}else m=o;o=xa();var N=o.queue,A=N.dispatch;return u!==o.memoizedState&&(gn.flags|=2048,Do(9,Pc(),xf.bind(null,N,u),null)),[m,A,a]}function xf(a,o){a.action=o}function Ef(a){var o=xa(),u=In;if(u!==null)return Wl(o,u,a);xa(),o=o.memoizedState,u=xa();var m=u.queue.dispatch;return u.memoizedState=a,[o,m,!1]}function Do(a,o,u,m){return a={tag:a,create:u,deps:m,inst:o,next:null},o=gn.updateQueue,o===null&&(o=yl(),gn.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(m=u.next,u.next=a,a.next=m,o.lastEffect=a),a}function Pc(){return{destroy:void 0,resource:void 0}}function lu(){return xa().memoizedState}function Gi(a,o,u,m){var N=Br();m=m===void 0?null:m,gn.flags|=a,N.memoizedState=Do(1|o,Pc(),u,m)}function Kl(a,o,u,m){var N=xa();m=m===void 0?null:m;var A=N.memoizedState.inst;In!==null&&m!==null&&Va(m,In.memoizedState.deps)?N.memoizedState=Do(o,A,u,m):(gn.flags|=a,N.memoizedState=Do(1|o,A,u,m))}function ad(a,o){Gi(8390656,8,a,o)}function _f(a,o){Kl(2048,8,a,o)}function rd(a,o){return Kl(4,2,a,o)}function Al(a,o){return Kl(4,4,a,o)}function bf(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function id(a,o,u){u=u!=null?u.concat([a]):null,Kl(4,4,bf.bind(null,o,a),u)}function od(){}function ld(a,o){var u=xa();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&Va(o,m[1])?m[0]:(u.memoizedState=[a,o],a)}function Tf(a,o){var u=xa();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&Va(o,m[1]))return m[0];if(m=a(),Ka){Be(!0);try{a()}finally{Be(!1)}}return u.memoizedState=[m,o],m}function Sl(a,o,u){return u===void 0||(Ys&1073741824)!==0?a.memoizedState=o:(a.memoizedState=u,a=Dg(),gn.lanes|=a,nc|=a,u)}function cu(a,o,u,m){return Ba(u,o)?u:ns.current!==null?(a=Sl(a,u,m),Ba(a,o)||(Ar=!0),a):(Ys&42)===0?(Ar=!0,a.memoizedState=u):(a=Dg(),gn.lanes|=a,nc|=a,o)}function Mc(a,o,u,m,N){var A=he.p;he.p=A!==0&&8>A?A:8;var B=G.T,ne={};G.T=ne,rm(a,!1,o,u);try{var ye=N(),Ye=G.S;if(Ye!==null&&Ye(ne,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var ct=ff(ye,m);fd(a,o,ct,zi(a))}else fd(a,o,m,zi(a))}catch(Et){fd(a,o,{then:function(){},status:"rejected",reason:Et},zi())}finally{he.p=A,G.T=B}}function Ro(){}function ho(a,o,u,m){if(a.tag!==5)throw Error(s(476));var N=Oo(a).queue;Mc(a,N,o,ue,u===null?Ro:function(){return kc(a),u(m)})}function Oo(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:ue},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function kc(a){var o=Oo(a).next.queue;fd(a,o,{},zi())}function jc(){return $a(Id)}function cd(){return xa().memoizedState}function Nf(){return xa().memoizedState}function ud(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=zi();a=lt(u);var m=gt(o,a,u);m!==null&&($i(m,o,u),ft(m,o,u)),o={cache:Qu()},a.payload=o;return}o=o.return}}function dd(a,o,u){var m=zi();u={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},vf(a)?kp(o,u):(u=oo(a,o,u,m),u!==null&&($i(u,a,m),jp(u,o,m)))}function Mp(a,o,u){var m=zi();fd(a,o,u,m)}function fd(a,o,u,m){var N={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(vf(a))kp(o,N);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var B=o.lastRenderedState,ne=A(B,u);if(N.hasEagerState=!0,N.eagerState=ne,Ba(ne,B))return io(a,o,N,0),oa===null&&Zr(),!1}catch{}finally{}if(u=oo(a,o,N,m),u!==null)return $i(u,a,m),jp(u,o,m),!0}return!1}function rm(a,o,u,m){if(m={lane:2,revertLane:jm(),action:m,hasEagerState:!1,eagerState:null,next:null},vf(a)){if(o)throw Error(s(479))}else o=oo(a,u,m,2),o!==null&&$i(o,a,2)}function vf(a){var o=a.alternate;return a===gn||o!==null&&o===gn}function kp(a,o){or=Ss=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function jp(a,o,u){if((u&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,u|=m,o.lanes=u,Mn(a,u)}}var yf={readContext:$a,use:Jr,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps},Bp={readContext:$a,use:Jr,useCallback:function(a,o){return Br().memoizedState=[a,o===void 0?null:o],a},useContext:$a,useEffect:ad,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,Gi(4194308,4,bf.bind(null,o,a),u)},useLayoutEffect:function(a,o){return Gi(4194308,4,a,o)},useInsertionEffect:function(a,o){Gi(4,2,a,o)},useMemo:function(a,o){var u=Br();o=o===void 0?null:o;var m=a();if(Ka){Be(!0);try{a()}finally{Be(!1)}}return u.memoizedState=[m,o],m},useReducer:function(a,o,u){var m=Br();if(u!==void 0){var N=u(o);if(Ka){Be(!0);try{u(o)}finally{Be(!1)}}}else N=o;return m.memoizedState=m.baseState=N,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:N},m.queue=a,a=a.dispatch=dd.bind(null,gn,a),[m.memoizedState,a]},useRef:function(a){var o=Br();return a={current:a},o.memoizedState=a},useState:function(a){a=Rc(a);var o=a.queue,u=Mp.bind(null,gn,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:od,useDeferredValue:function(a,o){var u=Br();return Sl(u,a,o)},useTransition:function(){var a=Rc(!1);return a=Mc.bind(null,gn,a.queue,!0,!1),Br().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var m=gn,N=Br();if(rn){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),oa===null)throw Error(s(349));(Cs&124)!==0||iu(m,o,u)}N.memoizedState=u;var A={value:u,getSnapshot:o};return N.queue=A,ad(zl.bind(null,m,A,a),[a]),m.flags|=2048,Do(9,Pc(),Dc.bind(null,m,A,u,o),null),u},useId:function(){var a=Br(),o=oa.identifierPrefix;if(rn){var u=at,m=ot;u=(m&~(1<<32-We(m)-1)).toString(32)+u,o=""+o+"R"+u,u=Oa++,0<u&&(o+="H"+u.toString(32)),o+=""}else u=Li++,o=""+o+"r"+u.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:jc,useFormState:Oc,useActionState:Oc,useOptimistic:function(a){var o=Br();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=rm.bind(null,gn,!0,u),u.dispatch=o,[a,o]},useMemoCache:nl,useCacheRefresh:function(){return Br().memoizedState=ud.bind(null,gn)}},Up={readContext:$a,use:Jr,useCallback:ld,useContext:$a,useEffect:_f,useImperativeHandle:id,useInsertionEffect:rd,useLayoutEffect:Al,useMemo:Tf,useReducer:wc,useRef:lu,useState:function(){return wc(Qr)},useDebugValue:od,useDeferredValue:function(a,o){var u=xa();return cu(u,In.memoizedState,a,o)},useTransition:function(){var a=wc(Qr)[0],o=xa().memoizedState;return[typeof a=="boolean"?a:tl(a),o]},useSyncExternalStore:Ic,useId:cd,useHostTransitionStatus:jc,useFormState:ou,useActionState:ou,useOptimistic:function(a,o){var u=xa();return Io(u,In,a,o)},useMemoCache:nl,useCacheRefresh:Nf},i5={readContext:$a,use:Jr,useCallback:ld,useContext:$a,useEffect:_f,useImperativeHandle:id,useInsertionEffect:rd,useLayoutEffect:Al,useMemo:Tf,useReducer:ru,useRef:lu,useState:function(){return ru(Qr)},useDebugValue:od,useDeferredValue:function(a,o){var u=xa();return In===null?Sl(u,a,o):cu(u,In.memoizedState,a,o)},useTransition:function(){var a=ru(Qr)[0],o=xa().memoizedState;return[typeof a=="boolean"?a:tl(a),o]},useSyncExternalStore:Ic,useId:cd,useHostTransitionStatus:jc,useFormState:Ef,useActionState:Ef,useOptimistic:function(a,o){var u=xa();return In!==null?Io(u,In,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:nl,useCacheRefresh:Nf},uu=null,hd=0;function Af(a){var o=hd;return hd+=1,uu===null&&(uu=[]),He(uu,a,o)}function md(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Sf(a,o){throw o.$$typeof===b?Error(s(525)):(a=Object.prototype.toString.call(o),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Fp(a){var o=a._init;return o(a._payload)}function Vp(a){function o(ke,Ie){if(a){var Ge=ke.deletions;Ge===null?(ke.deletions=[Ie],ke.flags|=16):Ge.push(Ie)}}function u(ke,Ie){if(!a)return null;for(;Ie!==null;)o(ke,Ie),Ie=Ie.sibling;return null}function m(ke){for(var Ie=new Map;ke!==null;)ke.key!==null?Ie.set(ke.key,ke):Ie.set(ke.index,ke),ke=ke.sibling;return Ie}function N(ke,Ie){return ke=Ai(ke,Ie),ke.index=0,ke.sibling=null,ke}function A(ke,Ie,Ge){return ke.index=Ge,a?(Ge=ke.alternate,Ge!==null?(Ge=Ge.index,Ge<Ie?(ke.flags|=67108866,Ie):Ge):(ke.flags|=67108866,Ie)):(ke.flags|=1048576,Ie)}function B(ke){return a&&ke.alternate===null&&(ke.flags|=67108866),ke}function ne(ke,Ie,Ge,ht){return Ie===null||Ie.tag!==6?(Ie=El(Ge,ke.mode,ht),Ie.return=ke,Ie):(Ie=N(Ie,Ge),Ie.return=ke,Ie)}function ye(ke,Ie,Ge,ht){var en=Ge.type;return en===C?ct(ke,Ie,Ge.props.children,ht,Ge.key):Ie!==null&&(Ie.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===J&&Fp(en)===Ie.type)?(Ie=N(Ie,Ge.props),md(Ie,Ge),Ie.return=ke,Ie):(Ie=Ao(Ge.type,Ge.key,Ge.props,null,ke.mode,ht),md(Ie,Ge),Ie.return=ke,Ie)}function Ye(ke,Ie,Ge,ht){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ge.containerInfo||Ie.stateNode.implementation!==Ge.implementation?(Ie=_l(Ge,ke.mode,ht),Ie.return=ke,Ie):(Ie=N(Ie,Ge.children||[]),Ie.return=ke,Ie)}function ct(ke,Ie,Ge,ht,en){return Ie===null||Ie.tag!==7?(Ie=Fi(Ge,ke.mode,ht,en),Ie.return=ke,Ie):(Ie=N(Ie,Ge),Ie.return=ke,Ie)}function Et(ke,Ie,Ge){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=El(""+Ie,ke.mode,Ge),Ie.return=ke,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case v:return Ge=Ao(Ie.type,Ie.key,Ie.props,null,ke.mode,Ge),md(Ge,Ie),Ge.return=ke,Ge;case T:return Ie=_l(Ie,ke.mode,Ge),Ie.return=ke,Ie;case J:var ht=Ie._init;return Ie=ht(Ie._payload),Et(ke,Ie,Ge)}if(Te(Ie)||H(Ie))return Ie=Fi(Ie,ke.mode,Ge,null),Ie.return=ke,Ie;if(typeof Ie.then=="function")return Et(ke,Af(Ie),Ge);if(Ie.$$typeof===O)return Et(ke,Jo(ke,Ie),Ge);Sf(ke,Ie)}return null}function qe(ke,Ie,Ge,ht){var en=Ie!==null?Ie.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return en!==null?null:ne(ke,Ie,""+Ge,ht);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case v:return Ge.key===en?ye(ke,Ie,Ge,ht):null;case T:return Ge.key===en?Ye(ke,Ie,Ge,ht):null;case J:return en=Ge._init,Ge=en(Ge._payload),qe(ke,Ie,Ge,ht)}if(Te(Ge)||H(Ge))return en!==null?null:ct(ke,Ie,Ge,ht,null);if(typeof Ge.then=="function")return qe(ke,Ie,Af(Ge),ht);if(Ge.$$typeof===O)return qe(ke,Ie,Jo(ke,Ge),ht);Sf(ke,Ge)}return null}function $e(ke,Ie,Ge,ht,en){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ke=ke.get(Ge)||null,ne(Ie,ke,""+ht,en);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case v:return ke=ke.get(ht.key===null?Ge:ht.key)||null,ye(Ie,ke,ht,en);case T:return ke=ke.get(ht.key===null?Ge:ht.key)||null,Ye(Ie,ke,ht,en);case J:var os=ht._init;return ht=os(ht._payload),$e(ke,Ie,Ge,ht,en)}if(Te(ht)||H(ht))return ke=ke.get(Ge)||null,ct(Ie,ke,ht,en,null);if(typeof ht.then=="function")return $e(ke,Ie,Ge,Af(ht),en);if(ht.$$typeof===O)return $e(ke,Ie,Ge,Jo(Ie,ht),en);Sf(Ie,ht)}return null}function On(ke,Ie,Ge,ht){for(var en=null,os=null,hn=Ie,An=Ie=0,Cr=null;hn!==null&&An<Ge.length;An++){hn.index>An?(Cr=hn,hn=null):Cr=hn.sibling;var Ms=qe(ke,hn,Ge[An],ht);if(Ms===null){hn===null&&(hn=Cr);break}a&&hn&&Ms.alternate===null&&o(ke,hn),Ie=A(Ms,Ie,An),os===null?en=Ms:os.sibling=Ms,os=Ms,hn=Cr}if(An===Ge.length)return u(ke,hn),rn&&St(ke,An),en;if(hn===null){for(;An<Ge.length;An++)hn=Et(ke,Ge[An],ht),hn!==null&&(Ie=A(hn,Ie,An),os===null?en=hn:os.sibling=hn,os=hn);return rn&&St(ke,An),en}for(hn=m(hn);An<Ge.length;An++)Cr=$e(hn,ke,An,Ge[An],ht),Cr!==null&&(a&&Cr.alternate!==null&&hn.delete(Cr.key===null?An:Cr.key),Ie=A(Cr,Ie,An),os===null?en=Cr:os.sibling=Cr,os=Cr);return a&&hn.forEach(function(dc){return o(ke,dc)}),rn&&St(ke,An),en}function Tn(ke,Ie,Ge,ht){if(Ge==null)throw Error(s(151));for(var en=null,os=null,hn=Ie,An=Ie=0,Cr=null,Ms=Ge.next();hn!==null&&!Ms.done;An++,Ms=Ge.next()){hn.index>An?(Cr=hn,hn=null):Cr=hn.sibling;var dc=qe(ke,hn,Ms.value,ht);if(dc===null){hn===null&&(hn=Cr);break}a&&hn&&dc.alternate===null&&o(ke,hn),Ie=A(dc,Ie,An),os===null?en=dc:os.sibling=dc,os=dc,hn=Cr}if(Ms.done)return u(ke,hn),rn&&St(ke,An),en;if(hn===null){for(;!Ms.done;An++,Ms=Ge.next())Ms=Et(ke,Ms.value,ht),Ms!==null&&(Ie=A(Ms,Ie,An),os===null?en=Ms:os.sibling=Ms,os=Ms);return rn&&St(ke,An),en}for(hn=m(hn);!Ms.done;An++,Ms=Ge.next())Ms=$e(hn,ke,An,Ms.value,ht),Ms!==null&&(a&&Ms.alternate!==null&&hn.delete(Ms.key===null?An:Ms.key),Ie=A(Ms,Ie,An),os===null?en=Ms:os.sibling=Ms,os=Ms);return a&&hn.forEach(function(ob){return o(ke,ob)}),rn&&St(ke,An),en}function Js(ke,Ie,Ge,ht){if(typeof Ge=="object"&&Ge!==null&&Ge.type===C&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case v:e:{for(var en=Ge.key;Ie!==null;){if(Ie.key===en){if(en=Ge.type,en===C){if(Ie.tag===7){u(ke,Ie.sibling),ht=N(Ie,Ge.props.children),ht.return=ke,ke=ht;break e}}else if(Ie.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===J&&Fp(en)===Ie.type){u(ke,Ie.sibling),ht=N(Ie,Ge.props),md(ht,Ge),ht.return=ke,ke=ht;break e}u(ke,Ie);break}else o(ke,Ie);Ie=Ie.sibling}Ge.type===C?(ht=Fi(Ge.props.children,ke.mode,ht,Ge.key),ht.return=ke,ke=ht):(ht=Ao(Ge.type,Ge.key,Ge.props,null,ke.mode,ht),md(ht,Ge),ht.return=ke,ke=ht)}return B(ke);case T:e:{for(en=Ge.key;Ie!==null;){if(Ie.key===en)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ge.containerInfo&&Ie.stateNode.implementation===Ge.implementation){u(ke,Ie.sibling),ht=N(Ie,Ge.children||[]),ht.return=ke,ke=ht;break e}else{u(ke,Ie);break}else o(ke,Ie);Ie=Ie.sibling}ht=_l(Ge,ke.mode,ht),ht.return=ke,ke=ht}return B(ke);case J:return en=Ge._init,Ge=en(Ge._payload),Js(ke,Ie,Ge,ht)}if(Te(Ge))return On(ke,Ie,Ge,ht);if(H(Ge)){if(en=H(Ge),typeof en!="function")throw Error(s(150));return Ge=en.call(Ge),Tn(ke,Ie,Ge,ht)}if(typeof Ge.then=="function")return Js(ke,Ie,Af(Ge),ht);if(Ge.$$typeof===O)return Js(ke,Ie,Jo(ke,Ge),ht);Sf(ke,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Ie!==null&&Ie.tag===6?(u(ke,Ie.sibling),ht=N(Ie,Ge),ht.return=ke,ke=ht):(u(ke,Ie),ht=El(Ge,ke.mode,ht),ht.return=ke,ke=ht),B(ke)):u(ke,Ie)}return function(ke,Ie,Ge,ht){try{hd=0;var en=Js(ke,Ie,Ge,ht);return uu=null,en}catch(hn){if(hn===W||hn===te)throw hn;var os=rr(29,hn,null,ke.mode);return os.lanes=ht,os.return=ke,os}finally{}}}var du=Vp(!0),Gp=Vp(!1),mo=ce(null),sl=null;function Xl(a){var o=a.alternate;k(gr,gr.current&1),k(mo,a),sl===null&&(o===null||ns.current!==null||o.memoizedState!==null)&&(sl=a)}function Hp(a){if(a.tag===22){if(k(gr,gr.current),k(mo,a),sl===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(sl=a)}}else Zl()}function Zl(){k(gr,gr.current),k(mo,mo.current)}function Cl(a){M(mo),sl===a&&(sl=null),M(gr)}var gr=ce(0);function Cf(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Km(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function im(a,o,u,m){o=a.memoizedState,u=u(m,o),u=u==null?o:_({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var om={enqueueSetState:function(a,o,u){a=a._reactInternals;var m=zi(),N=lt(m);N.payload=o,u!=null&&(N.callback=u),o=gt(a,N,m),o!==null&&($i(o,a,m),ft(o,a,m))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var m=zi(),N=lt(m);N.tag=1,N.payload=o,u!=null&&(N.callback=u),o=gt(a,N,m),o!==null&&($i(o,a,m),ft(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=zi(),m=lt(u);m.tag=2,o!=null&&(m.callback=o),o=gt(a,m,u),o!==null&&($i(o,a,u),ft(o,a,u))}};function Yp(a,o,u,m,N,A,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,A,B):o.prototype&&o.prototype.isPureReactComponent?!eo(u,m)||!eo(N,A):!0}function qp(a,o,u,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==a&&om.enqueueReplaceState(o,o.state,null)}function Bc(a,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(a=a.defaultProps){u===o&&(u=_({},u));for(var N in a)u[N]===void 0&&(u[N]=a[N])}return u}var Lf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function zp(a){Lf(a)}function $p(a){console.error(a)}function Wp(a){Lf(a)}function wf(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Kp(a,o,u){try{var m=a.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function lm(a,o,u){return u=lt(u),u.tag=3,u.payload={element:null},u.callback=function(){wf(a,o)},u}function Xp(a){return a=lt(a),a.tag=3,a}function Zp(a,o,u,m){var N=u.type.getDerivedStateFromError;if(typeof N=="function"){var A=m.value;a.payload=function(){return N(A)},a.callback=function(){Kp(o,u,m)}}var B=u.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(a.callback=function(){Kp(o,u,m),typeof N!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var ne=m.stack;this.componentDidCatch(m.value,{componentStack:ne!==null?ne:""})})}function o5(a,o,u,m,N){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&Yl(o,u,N,!0),u=mo.current,u!==null){switch(u.tag){case 13:return sl===null?Rm():u.alternate===null&&Ga===0&&(Ga=3),u.flags&=-257,u.flags|=65536,u.lanes=N,m===ie?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),Pm(a,m,N)),!1;case 22:return u.flags|=65536,m===ie?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),Pm(a,m,N)),!1}throw Error(s(435,u.tag))}return Pm(a,m,N),Rm(),!1}if(rn)return o=mo.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=N,m!==Gl&&(a=Error(s(422),{cause:m}),Hl(Zn(a,u)))):(m!==Gl&&(o=Error(s(423),{cause:m}),Hl(Zn(o,u))),a=a.current.alternate,a.flags|=65536,N&=-N,a.lanes|=N,m=Zn(m,u),N=lm(a.stateNode,m,N),qt(a,N),Ga!==4&&(Ga=2)),!1;var A=Error(s(520),{cause:m});if(A=Zn(A,u),Td===null?Td=[A]:Td.push(A),Ga!==4&&(Ga=2),o===null)return!0;m=Zn(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=N&-N,u.lanes|=a,a=lm(u.stateNode,m,a),qt(u,a),!1;case 1:if(o=u.type,A=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(sc===null||!sc.has(A))))return u.flags|=65536,N&=-N,u.lanes|=N,N=Xp(N),Zp(N,a,u,m),qt(u,N),!1}u=u.return}while(u!==null);return!1}var Jp=Error(s(461)),Ar=!1;function Ur(a,o,u,m){o.child=a===null?Gp(o,null,u,m):du(o,a.child,u,m)}function Qp(a,o,u,m,N){u=u.render;var A=o.ref;if("ref"in m){var B={};for(var ne in m)ne!=="ref"&&(B[ne]=m[ne])}else B=m;return fo(o),m=Vi(a,o,u,B,A,N),ne=ia(),a!==null&&!Ar?(Lc(a,o,N),Ll(a,o,N)):(rn&&ne&&It(o),o.flags|=1,Ur(a,o,m,N),o.child)}function eg(a,o,u,m,N){if(a===null){var A=u.type;return typeof A=="function"&&!Xo(A)&&A.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=A,tg(a,o,A,m,N)):(a=Ao(u.type,null,m,o,o.mode,N),a.ref=o.ref,a.return=o,o.child=a)}if(A=a.child,!gm(a,N)){var B=A.memoizedProps;if(u=u.compare,u=u!==null?u:eo,u(B,m)&&a.ref===o.ref)return Ll(a,o,N)}return o.flags|=1,a=Ai(A,m),a.ref=o.ref,a.return=o,o.child=a}function tg(a,o,u,m,N){if(a!==null){var A=a.memoizedProps;if(eo(A,m)&&a.ref===o.ref)if(Ar=!1,o.pendingProps=m=A,gm(a,N))(a.flags&131072)!==0&&(Ar=!0);else return o.lanes=a.lanes,Ll(a,o,N)}return cm(a,o,u,m,N)}function ng(a,o,u){var m=o.pendingProps,N=m.children,A=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=A!==null?A.baseLanes|u:u,a!==null){for(N=o.child=a.child,A=0;N!==null;)A=A|N.lanes|N.childLanes,N=N.sibling;o.childLanes=A&~m}else o.childLanes=0,o.child=null;return sg(a,o,m,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&P(o,A!==null?A.cachePool:null),A!==null?Vs(o,A):Os(),Hp(o);else return o.lanes=o.childLanes=536870912,sg(a,o,A!==null?A.baseLanes|u:u,u)}else A!==null?(P(o,A.cachePool),Vs(o,A),Zl(),o.memoizedState=null):(a!==null&&P(o,null),Os(),Zl());return Ur(a,o,N,u),o.child}function sg(a,o,u,m){var N=w();return N=N===null?null:{parent:Wa._currentValue,pool:N},o.memoizedState={baseLanes:u,cachePool:N},a!==null&&P(o,null),Os(),Hp(o),a!==null&&Yl(a,o,m,!0),null}function If(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function cm(a,o,u,m,N){return fo(o),u=Vi(a,o,u,m,void 0,N),m=ia(),a!==null&&!Ar?(Lc(a,o,N),Ll(a,o,N)):(rn&&m&&It(o),o.flags|=1,Ur(a,o,u,N),o.child)}function ag(a,o,u,m,N,A){return fo(o),o.updateQueue=null,u=vl(o,m,u,N),Qo(a),m=ia(),a!==null&&!Ar?(Lc(a,o,A),Ll(a,o,A)):(rn&&m&&It(o),o.flags|=1,Ur(a,o,u,A),o.child)}function rg(a,o,u,m,N){if(fo(o),o.stateNode===null){var A=Ra,B=u.contextType;typeof B=="object"&&B!==null&&(A=$a(B)),A=new u(m,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=om,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=m,A.state=o.memoizedState,A.refs={},Le(o),B=u.contextType,A.context=typeof B=="object"&&B!==null?$a(B):Ra,A.state=o.memoizedState,B=u.getDerivedStateFromProps,typeof B=="function"&&(im(o,u,B,m),A.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(B=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),B!==A.state&&om.enqueueReplaceState(A,A.state,null),Ut(o,m,A,N),fn(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){A=o.stateNode;var ne=o.memoizedProps,ye=Bc(u,ne);A.props=ye;var Ye=A.context,ct=u.contextType;B=Ra,typeof ct=="object"&&ct!==null&&(B=$a(ct));var Et=u.getDerivedStateFromProps;ct=typeof Et=="function"||typeof A.getSnapshotBeforeUpdate=="function",ne=o.pendingProps!==ne,ct||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(ne||Ye!==B)&&qp(o,A,m,B),Ke=!1;var qe=o.memoizedState;A.state=qe,Ut(o,m,A,N),fn(),Ye=o.memoizedState,ne||qe!==Ye||Ke?(typeof Et=="function"&&(im(o,u,Et,m),Ye=o.memoizedState),(ye=Ke||Yp(o,u,ye,m,qe,Ye,B))?(ct||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Ye),A.props=m,A.state=Ye,A.context=B,m=ye):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{A=o.stateNode,De(a,o),B=o.memoizedProps,ct=Bc(u,B),A.props=ct,Et=o.pendingProps,qe=A.context,Ye=u.contextType,ye=Ra,typeof Ye=="object"&&Ye!==null&&(ye=$a(Ye)),ne=u.getDerivedStateFromProps,(Ye=typeof ne=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B!==Et||qe!==ye)&&qp(o,A,m,ye),Ke=!1,qe=o.memoizedState,A.state=qe,Ut(o,m,A,N),fn();var $e=o.memoizedState;B!==Et||qe!==$e||Ke||a!==null&&a.dependencies!==null&&nu(a.dependencies)?(typeof ne=="function"&&(im(o,u,ne,m),$e=o.memoizedState),(ct=Ke||Yp(o,u,ct,m,qe,$e,ye)||a!==null&&a.dependencies!==null&&nu(a.dependencies))?(Ye||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,$e,ye),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,$e,ye)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=$e),A.props=m,A.state=$e,A.context=ye,m=ct):(typeof A.componentDidUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(o.flags|=1024),m=!1)}return A=m,If(a,o),m=(o.flags&128)!==0,A||m?(A=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,a!==null&&m?(o.child=du(o,a.child,null,N),o.child=du(o,null,u,N)):Ur(a,o,u,N),o.memoizedState=A.state,a=o.child):a=Ll(a,o,N),a}function ig(a,o,u,m){return pi(),o.flags|=256,Ur(a,o,u,m),o.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(a){return{baseLanes:a,cachePool:z()}}function fm(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=po),a}function og(a,o,u){var m=o.pendingProps,N=!1,A=(o.flags&128)!==0,B;if((B=A)||(B=a!==null&&a.memoizedState===null?!1:(gr.current&2)!==0),B&&(N=!0,o.flags&=-129),B=(o.flags&32)!==0,o.flags&=-33,a===null){if(rn){if(N?Xl(o):Zl(),rn){var ne=an,ye;if(ye=ne){e:{for(ye=ne,ne=ga;ye.nodeType!==8;){if(!ne){ne=null;break e}if(ye=Mo(ye.nextSibling),ye===null){ne=null;break e}}ne=ye}ne!==null?(o.memoizedState={dehydrated:ne,treeContext:Se!==null?{id:ot,overflow:at}:null,retryLane:536870912,hydrationErrors:null},ye=rr(18,null,null,0),ye.stateNode=ne,ye.return=o,o.child=ye,Wt=o,an=null,ye=!0):ye=!1}ye||Tl(o)}if(ne=o.memoizedState,ne!==null&&(ne=ne.dehydrated,ne!==null))return Km(ne)?o.lanes=32:o.lanes=536870912,null;Cl(o)}return ne=m.children,m=m.fallback,N?(Zl(),N=o.mode,ne=Df({mode:"hidden",children:ne},N),m=Fi(m,N,u,null),ne.return=o,m.return=o,ne.sibling=m,o.child=ne,N=o.child,N.memoizedState=dm(u),N.childLanes=fm(a,B,u),o.memoizedState=um,m):(Xl(o),hm(o,ne))}if(ye=a.memoizedState,ye!==null&&(ne=ye.dehydrated,ne!==null)){if(A)o.flags&256?(Xl(o),o.flags&=-257,o=mm(a,o,u)):o.memoizedState!==null?(Zl(),o.child=a.child,o.flags|=128,o=null):(Zl(),N=m.fallback,ne=o.mode,m=Df({mode:"visible",children:m.children},ne),N=Fi(N,ne,u,null),N.flags|=2,m.return=o,N.return=o,m.sibling=N,o.child=m,du(o,a.child,null,u),m=o.child,m.memoizedState=dm(u),m.childLanes=fm(a,B,u),o.memoizedState=um,o=N);else if(Xl(o),Km(ne)){if(B=ne.nextSibling&&ne.nextSibling.dataset,B)var Ye=B.dgst;B=Ye,m=Error(s(419)),m.stack="",m.digest=B,Hl({value:m,source:null,stack:null}),o=mm(a,o,u)}else if(Ar||Yl(a,o,u,!1),B=(u&a.childLanes)!==0,Ar||B){if(B=oa,B!==null&&(m=u&-u,m=(m&42)!==0?1:qa(m),m=(m&(B.suspendedLanes|u))!==0?0:m,m!==0&&m!==ye.retryLane))throw ye.retryLane=m,Ui(a,m),$i(B,a,m),Jp;ne.data==="$?"||Rm(),o=mm(a,o,u)}else ne.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=ye.treeContext,an=Mo(ne.nextSibling),Wt=o,rn=!0,is=null,ga=!1,a!==null&&(kr[$++]=ot,kr[$++]=at,kr[$++]=Se,ot=a.id,at=a.overflow,Se=o),o=hm(o,m.children),o.flags|=4096);return o}return N?(Zl(),N=m.fallback,ne=o.mode,ye=a.child,Ye=ye.sibling,m=Ai(ye,{mode:"hidden",children:m.children}),m.subtreeFlags=ye.subtreeFlags&65011712,Ye!==null?N=Ai(Ye,N):(N=Fi(N,ne,u,null),N.flags|=2),N.return=o,m.return=o,m.sibling=N,o.child=m,m=N,N=o.child,ne=a.child.memoizedState,ne===null?ne=dm(u):(ye=ne.cachePool,ye!==null?(Ye=Wa._currentValue,ye=ye.parent!==Ye?{parent:Ye,pool:Ye}:ye):ye=z(),ne={baseLanes:ne.baseLanes|u,cachePool:ye}),N.memoizedState=ne,N.childLanes=fm(a,B,u),o.memoizedState=um,m):(Xl(o),u=a.child,a=u.sibling,u=Ai(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,a!==null&&(B=o.deletions,B===null?(o.deletions=[a],o.flags|=16):B.push(a)),o.child=u,o.memoizedState=null,u)}function hm(a,o){return o=Df({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Df(a,o){return a=rr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function mm(a,o,u){return du(o,a.child,null,u),a=hm(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function lg(a,o,u){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),eu(a.return,o,u)}function pm(a,o,u,m,N){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:N}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=u,A.tailMode=N)}function cg(a,o,u){var m=o.pendingProps,N=m.revealOrder,A=m.tail;if(Ur(a,o,m.children,u),m=gr.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&lg(a,u,o);else if(a.tag===19)lg(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(k(gr,m),N){case"forwards":for(u=o.child,N=null;u!==null;)a=u.alternate,a!==null&&Cf(a)===null&&(N=u),u=u.sibling;u=N,u===null?(N=o.child,o.child=null):(N=u.sibling,u.sibling=null),pm(o,!1,N,u,A);break;case"backwards":for(u=null,N=o.child,o.child=null;N!==null;){if(a=N.alternate,a!==null&&Cf(a)===null){o.child=N;break}a=N.sibling,N.sibling=u,u=N,N=a}pm(o,!0,u,null,A);break;case"together":pm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ll(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),nc|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(Yl(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(s(153));if(o.child!==null){for(a=o.child,u=Ai(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=Ai(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function gm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&nu(a)))}function l5(a,o,u){switch(o.tag){case 3:de(o,o.stateNode.containerInfo),Zo(o,Wa,a.memoizedState.cache),pi();break;case 27:case 5:Ue(o);break;case 4:de(o,o.stateNode.containerInfo);break;case 10:Zo(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Xl(o),o.flags|=128,null):(u&o.child.childLanes)!==0?og(a,o,u):(Xl(o),a=Ll(a,o,u),a!==null?a.sibling:null);Xl(o);break;case 19:var N=(a.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(Yl(a,o,u,!1),m=(u&o.childLanes)!==0),N){if(m)return cg(a,o,u);o.flags|=128}if(N=o.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),k(gr,gr.current),m)break;return null;case 22:case 23:return o.lanes=0,ng(a,o,u);case 24:Zo(o,Wa,a.memoizedState.cache)}return Ll(a,o,u)}function ug(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)Ar=!0;else{if(!gm(a,u)&&(o.flags&128)===0)return Ar=!1,l5(a,o,u);Ar=(a.flags&131072)!==0}else Ar=!1,rn&&(o.flags&1048576)!==0&&Mt(o,bl,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var m=o.elementType,N=m._init;if(m=N(m._payload),o.type=m,typeof m=="function")Xo(m)?(a=Bc(m,a),o.tag=1,o=rg(null,o,m,a,u)):(o.tag=0,o=cm(null,o,m,a,u));else{if(m!=null){if(N=m.$$typeof,N===U){o.tag=11,o=Qp(null,o,m,a,u);break e}else if(N===ee){o.tag=14,o=eg(null,o,m,a,u);break e}}throw o=K(m)||m,Error(s(306,o,""))}}return o;case 0:return cm(a,o,o.type,o.pendingProps,u);case 1:return m=o.type,N=Bc(m,o.pendingProps),rg(a,o,m,N,u);case 3:e:{if(de(o,o.stateNode.containerInfo),a===null)throw Error(s(387));m=o.pendingProps;var A=o.memoizedState;N=A.element,De(a,o),Ut(o,m,null,u);var B=o.memoizedState;if(m=B.cache,Zo(o,Wa,m),m!==A.cache&&tu(o,[Wa],u,!0),fn(),m=B.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:B.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=ig(a,o,m,u);break e}else if(m!==N){N=Zn(Error(s(424)),o),Hl(N),o=ig(a,o,m,u);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(an=Mo(a.firstChild),Wt=o,rn=!0,is=null,ga=!0,u=Gp(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(pi(),m===N){o=Ll(a,o,u);break e}Ur(a,o,m,u)}o=o.child}return o;case 26:return If(a,o),a===null?(u=mx(o.type,null,o.pendingProps,null))?o.memoizedState=u:rn||(u=o.type,a=o.pendingProps,m=qf(fe.current).createElement(u),m[Ln]=o,m[kn]=a,Vr(m,u,a),$n(m),o.stateNode=m):o.memoizedState=mx(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ue(o),a===null&&rn&&(m=o.stateNode=dx(o.type,o.pendingProps,fe.current),Wt=o,ga=!0,N=an,ic(o.type)?(Xm=N,an=Mo(m.firstChild)):an=N),Ur(a,o,o.pendingProps.children,u),If(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&rn&&((N=m=an)&&(m=k5(m,o.type,o.pendingProps,ga),m!==null?(o.stateNode=m,Wt=o,an=Mo(m.firstChild),ga=!1,N=!0):N=!1),N||Tl(o)),Ue(o),N=o.type,A=o.pendingProps,B=a!==null?a.memoizedProps:null,m=A.children,zm(N,A)?m=null:B!==null&&zm(N,B)&&(o.flags|=32),o.memoizedState!==null&&(N=Vi(a,o,el,null,null,u),Id._currentValue=N),If(a,o),Ur(a,o,m,u),o.child;case 6:return a===null&&rn&&((a=u=an)&&(u=j5(u,o.pendingProps,ga),u!==null?(o.stateNode=u,Wt=o,an=null,a=!0):a=!1),a||Tl(o)),null;case 13:return og(a,o,u);case 4:return de(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=du(o,null,m,u):Ur(a,o,m,u),o.child;case 11:return Qp(a,o,o.type,o.pendingProps,u);case 7:return Ur(a,o,o.pendingProps,u),o.child;case 8:return Ur(a,o,o.pendingProps.children,u),o.child;case 12:return Ur(a,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,Zo(o,o.type,m.value),Ur(a,o,m.children,u),o.child;case 9:return N=o.type._context,m=o.pendingProps.children,fo(o),N=$a(N),m=m(N),o.flags|=1,Ur(a,o,m,u),o.child;case 14:return eg(a,o,o.type,o.pendingProps,u);case 15:return tg(a,o,o.type,o.pendingProps,u);case 19:return cg(a,o,u);case 31:return m=o.pendingProps,u=o.mode,m={mode:m.mode,children:m.children},a===null?(u=Df(m,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=Ai(a.child,m),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return ng(a,o,u);case 24:return fo(o),m=$a(Wa),a===null?(N=w(),N===null&&(N=oa,A=Qu(),N.pooledCache=A,A.refCount++,A!==null&&(N.pooledCacheLanes|=u),N=A),o.memoizedState={parent:m,cache:N},Le(o),Zo(o,Wa,N)):((a.lanes&u)!==0&&(De(a,o),Ut(o,null,null,u),fn()),N=a.memoizedState,A=o.memoizedState,N.parent!==m?(N={parent:m,cache:m},o.memoizedState=N,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=N),Zo(o,Wa,m)):(m=A.cache,Zo(o,Wa,m),m!==N.cache&&tu(o,[Wa],u,!0))),Ur(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function wl(a){a.flags|=4}function dg(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!_x(o)){if(o=mo.current,o!==null&&((Cs&4194048)===Cs?sl!==null:(Cs&62914560)!==Cs&&(Cs&536870912)===0||o!==sl))throw Ve=ie,X;a.flags|=8192}}function Rf(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Un():536870912,a.lanes|=o,pu|=o)}function pd(a,o){if(!rn)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Ma(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,m=0;if(o)for(var N=a.child;N!==null;)u|=N.lanes|N.childLanes,m|=N.subtreeFlags&65011712,m|=N.flags&65011712,N.return=a,N=N.sibling;else for(N=a.child;N!==null;)u|=N.lanes|N.childLanes,m|=N.subtreeFlags,m|=N.flags,N.return=a,N=N.sibling;return a.subtreeFlags|=m,a.childLanes=u,o}function c5(a,o,u){var m=o.pendingProps;switch(sn(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ma(o),null;case 1:return Ma(o),null;case 3:return u=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),uo(Wa),Ne(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(jr(o)?wl(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,cf())),Ma(o),null;case 26:return u=o.memoizedState,a===null?(wl(o),u!==null?(Ma(o),dg(o,u)):(Ma(o),o.flags&=-16777217)):u?u!==a.memoizedState?(wl(o),Ma(o),dg(o,u)):(Ma(o),o.flags&=-16777217):(a.memoizedProps!==m&&wl(o),Ma(o),o.flags&=-16777217),null;case 27:we(o),u=fe.current;var N=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==m&&wl(o);else{if(!m){if(o.stateNode===null)throw Error(s(166));return Ma(o),null}a=Y.current,jr(o)?lf(o):(a=dx(N,m,u),o.stateNode=a,wl(o))}return Ma(o),null;case 5:if(we(o),u=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&wl(o);else{if(!m){if(o.stateNode===null)throw Error(s(166));return Ma(o),null}if(a=Y.current,jr(o))lf(o);else{switch(N=qf(fe.current),a){case 1:a=N.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=N.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=N.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=N.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=N.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?N.createElement("select",{is:m.is}):N.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?N.createElement(u,{is:m.is}):N.createElement(u)}}a[Ln]=o,a[kn]=m;e:for(N=o.child;N!==null;){if(N.tag===5||N.tag===6)a.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===o)break e;for(;N.sibling===null;){if(N.return===null||N.return===o)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}o.stateNode=a;e:switch(Vr(a,u,m),u){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&wl(o)}}return Ma(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&wl(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(s(166));if(a=fe.current,jr(o)){if(a=o.stateNode,u=o.memoizedProps,m=null,N=Wt,N!==null)switch(N.tag){case 27:case 5:m=N.memoizedProps}a[Ln]=o,a=!!(a.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||ax(a.nodeValue,u)),a||Tl(o)}else a=qf(a).createTextNode(m),a[Ln]=o,o.stateNode=a}return Ma(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(N=jr(o),m!==null&&m.dehydrated!==null){if(a===null){if(!N)throw Error(s(318));if(N=o.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(s(317));N[Ln]=o}else pi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ma(o),N=!1}else N=cf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=N),N=!0;if(!N)return o.flags&256?(Cl(o),o):(Cl(o),null)}if(Cl(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=m!==null,a=a!==null&&a.memoizedState!==null,u){m=o.child,N=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(N=m.alternate.memoizedState.cachePool.pool);var A=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==N&&(m.flags|=2048)}return u!==a&&u&&(o.child.flags|=8192),Rf(o,o.updateQueue),Ma(o),null;case 4:return Ne(),a===null&&Vm(o.stateNode.containerInfo),Ma(o),null;case 10:return uo(o.type),Ma(o),null;case 19:if(M(gr),N=o.memoizedState,N===null)return Ma(o),null;if(m=(o.flags&128)!==0,A=N.rendering,A===null)if(m)pd(N,!1);else{if(Ga!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(A=Cf(a),A!==null){for(o.flags|=128,pd(N,!1),a=A.updateQueue,o.updateQueue=a,Rf(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)lo(u,a),u=u.sibling;return k(gr,gr.current&1|2),o.child}a=a.sibling}N.tail!==null&&Fe()>Mf&&(o.flags|=128,m=!0,pd(N,!1),o.lanes=4194304)}else{if(!m)if(a=Cf(A),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,Rf(o,a),pd(N,!0),N.tail===null&&N.tailMode==="hidden"&&!A.alternate&&!rn)return Ma(o),null}else 2*Fe()-N.renderingStartTime>Mf&&u!==536870912&&(o.flags|=128,m=!0,pd(N,!1),o.lanes=4194304);N.isBackwards?(A.sibling=o.child,o.child=A):(a=N.last,a!==null?a.sibling=A:o.child=A,N.last=A)}return N.tail!==null?(o=N.tail,N.rendering=o,N.tail=o.sibling,N.renderingStartTime=Fe(),o.sibling=null,a=gr.current,k(gr,m?a&1|2:a&1),o):(Ma(o),null);case 22:case 23:return Cl(o),Vn(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Ma(o),o.subtreeFlags&6&&(o.flags|=8192)):Ma(o),u=o.updateQueue,u!==null&&Rf(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),a!==null&&M(y),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),uo(Wa),Ma(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function u5(a,o){switch(sn(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return uo(Wa),Ne(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return we(o),null;case 13:if(Cl(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(s(340));pi()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return M(gr),null;case 4:return Ne(),null;case 10:return uo(o.type),null;case 22:case 23:return Cl(o),Vn(),a!==null&&M(y),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return uo(Wa),null;case 25:return null;default:return null}}function fg(a,o){switch(sn(o),o.tag){case 3:uo(Wa),Ne();break;case 26:case 27:case 5:we(o);break;case 4:Ne();break;case 13:Cl(o);break;case 19:M(gr);break;case 10:uo(o.type);break;case 22:case 23:Cl(o),Vn(),a!==null&&M(y);break;case 24:uo(Wa)}}function gd(a,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var N=m.next;u=N;do{if((u.tag&a)===a){m=void 0;var A=u.create,B=u.inst;m=A(),B.destroy=m}u=u.next}while(u!==N)}}catch(ne){ta(o,o.return,ne)}}function Jl(a,o,u){try{var m=o.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var A=N.next;m=A;do{if((m.tag&a)===a){var B=m.inst,ne=B.destroy;if(ne!==void 0){B.destroy=void 0,N=o;var ye=u,Ye=ne;try{Ye()}catch(ct){ta(N,ye,ct)}}}m=m.next}while(m!==A)}}catch(ct){ta(o,o.return,ct)}}function hg(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{Rs(o,u)}catch(m){ta(a,a.return,m)}}}function mg(a,o,u){u.props=Bc(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(m){ta(a,o,m)}}function xd(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof u=="function"?a.refCleanup=u(m):u.current=m}}catch(N){ta(a,o,N)}}function al(a,o){var u=a.ref,m=a.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(N){ta(a,o,N)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(N){ta(a,o,N)}else u.current=null}function pg(a){var o=a.type,u=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(N){ta(a,a.return,N)}}function xm(a,o,u){try{var m=a.stateNode;D5(m,a.type,u,o),m[kn]=o}catch(N){ta(a,a.return,N)}}function gg(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ic(a.type)||a.tag===4}function Em(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||gg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ic(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function _m(a,o,u){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Yf));else if(m!==4&&(m===27&&ic(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(_m(a,o,u),a=a.sibling;a!==null;)_m(a,o,u),a=a.sibling}function Of(a,o,u){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(m!==4&&(m===27&&ic(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Of(a,o,u),a=a.sibling;a!==null;)Of(a,o,u),a=a.sibling}function xg(a){var o=a.stateNode,u=a.memoizedProps;try{for(var m=a.type,N=o.attributes;N.length;)o.removeAttributeNode(N[0]);Vr(o,m,u),o[Ln]=a,o[kn]=u}catch(A){ta(a,a.return,A)}}var Il=!1,Xa=!1,bm=!1,Eg=typeof WeakSet=="function"?WeakSet:Set,Sr=null;function d5(a,o){if(a=a.containerInfo,Ym=Zf,a=pr(a),va(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var N=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{u.nodeType,A.nodeType}catch{u=null;break e}var B=0,ne=-1,ye=-1,Ye=0,ct=0,Et=a,qe=null;t:for(;;){for(var $e;Et!==u||N!==0&&Et.nodeType!==3||(ne=B+N),Et!==A||m!==0&&Et.nodeType!==3||(ye=B+m),Et.nodeType===3&&(B+=Et.nodeValue.length),($e=Et.firstChild)!==null;)qe=Et,Et=$e;for(;;){if(Et===a)break t;if(qe===u&&++Ye===N&&(ne=B),qe===A&&++ct===m&&(ye=B),($e=Et.nextSibling)!==null)break;Et=qe,qe=Et.parentNode}Et=$e}u=ne===-1||ye===-1?null:{start:ne,end:ye}}else u=null}u=u||{start:0,end:0}}else u=null;for(qm={focusedElem:a,selectionRange:u},Zf=!1,Sr=o;Sr!==null;)if(o=Sr,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Sr=a;else for(;Sr!==null;){switch(o=Sr,A=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&A!==null){a=void 0,u=o,N=A.memoizedProps,A=A.memoizedState,m=u.stateNode;try{var On=Bc(u.type,N,u.elementType===u.type);a=m.getSnapshotBeforeUpdate(On,A),m.__reactInternalSnapshotBeforeUpdate=a}catch(Tn){ta(u,u.return,Tn)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)Wm(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Wm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=o.sibling,a!==null){a.return=o.return,Sr=a;break}Sr=o.return}}function _g(a,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Ql(a,u),m&4&&gd(5,u);break;case 1:if(Ql(a,u),m&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(B){ta(u,u.return,B)}else{var N=Bc(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(N,o,a.__reactInternalSnapshotBeforeUpdate)}catch(B){ta(u,u.return,B)}}m&64&&hg(u),m&512&&xd(u,u.return);break;case 3:if(Ql(a,u),m&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Rs(a,o)}catch(B){ta(u,u.return,B)}}break;case 27:o===null&&m&4&&xg(u);case 26:case 5:Ql(a,u),o===null&&m&4&&pg(u),m&512&&xd(u,u.return);break;case 12:Ql(a,u);break;case 13:Ql(a,u),m&4&&Ng(a,u),m&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=b5.bind(null,u),B5(a,u))));break;case 22:if(m=u.memoizedState!==null||Il,!m){o=o!==null&&o.memoizedState!==null||Xa,N=Il;var A=Xa;Il=m,(Xa=o)&&!A?ec(a,u,(u.subtreeFlags&8772)!==0):Ql(a,u),Il=N,Xa=A}break;case 30:break;default:Ql(a,u)}}function bg(a){var o=a.alternate;o!==null&&(a.alternate=null,bg(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&En(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Aa=null,wi=!1;function Dl(a,o,u){for(u=u.child;u!==null;)Tg(a,o,u),u=u.sibling}function Tg(a,o,u){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Ft,u)}catch{}switch(u.tag){case 26:Xa||al(u,o),Dl(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Xa||al(u,o);var m=Aa,N=wi;ic(u.type)&&(Aa=u.stateNode,wi=!1),Dl(a,o,u),Sd(u.stateNode),Aa=m,wi=N;break;case 5:Xa||al(u,o);case 6:if(m=Aa,N=wi,Aa=null,Dl(a,o,u),Aa=m,wi=N,Aa!==null)if(wi)try{(Aa.nodeType===9?Aa.body:Aa.nodeName==="HTML"?Aa.ownerDocument.body:Aa).removeChild(u.stateNode)}catch(A){ta(u,o,A)}else try{Aa.removeChild(u.stateNode)}catch(A){ta(u,o,A)}break;case 18:Aa!==null&&(wi?(a=Aa,cx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Pd(a)):cx(Aa,u.stateNode));break;case 4:m=Aa,N=wi,Aa=u.stateNode.containerInfo,wi=!0,Dl(a,o,u),Aa=m,wi=N;break;case 0:case 11:case 14:case 15:Xa||Jl(2,u,o),Xa||Jl(4,u,o),Dl(a,o,u);break;case 1:Xa||(al(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&mg(u,o,m)),Dl(a,o,u);break;case 21:Dl(a,o,u);break;case 22:Xa=(m=Xa)||u.memoizedState!==null,Dl(a,o,u),Xa=m;break;default:Dl(a,o,u)}}function Ng(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Pd(a)}catch(u){ta(o,o.return,u)}}function f5(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Eg),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Eg),o;default:throw Error(s(435,a.tag))}}function Tm(a,o){var u=f5(a);o.forEach(function(m){var N=T5.bind(null,a,m);u.has(m)||(u.add(m),m.then(N,N))})}function Hi(a,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var N=u[m],A=a,B=o,ne=B;e:for(;ne!==null;){switch(ne.tag){case 27:if(ic(ne.type)){Aa=ne.stateNode,wi=!1;break e}break;case 5:Aa=ne.stateNode,wi=!1;break e;case 3:case 4:Aa=ne.stateNode.containerInfo,wi=!0;break e}ne=ne.return}if(Aa===null)throw Error(s(160));Tg(A,B,N),Aa=null,wi=!1,A=N.alternate,A!==null&&(A.return=null),N.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)vg(o,a),o=o.sibling}var Po=null;function vg(a,o){var u=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Hi(o,a),Yi(a),m&4&&(Jl(3,a,a.return),gd(3,a),Jl(5,a,a.return));break;case 1:Hi(o,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),m&64&&Il&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var N=Po;if(Hi(o,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),m&4){var A=u!==null?u.memoizedState:null;if(m=a.memoizedState,u===null)if(m===null)if(a.stateNode===null){e:{m=a.type,u=a.memoizedProps,N=N.ownerDocument||N;t:switch(m){case"title":A=N.getElementsByTagName("title")[0],(!A||A[Ca]||A[Ln]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=N.createElement(m),N.head.insertBefore(A,N.querySelector("head > title"))),Vr(A,m,u),A[Ln]=a,$n(A),m=A;break e;case"link":var B=xx("link","href",N).get(m+(u.href||""));if(B){for(var ne=0;ne<B.length;ne++)if(A=B[ne],A.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&A.getAttribute("rel")===(u.rel==null?null:u.rel)&&A.getAttribute("title")===(u.title==null?null:u.title)&&A.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){B.splice(ne,1);break t}}A=N.createElement(m),Vr(A,m,u),N.head.appendChild(A);break;case"meta":if(B=xx("meta","content",N).get(m+(u.content||""))){for(ne=0;ne<B.length;ne++)if(A=B[ne],A.getAttribute("content")===(u.content==null?null:""+u.content)&&A.getAttribute("name")===(u.name==null?null:u.name)&&A.getAttribute("property")===(u.property==null?null:u.property)&&A.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&A.getAttribute("charset")===(u.charSet==null?null:u.charSet)){B.splice(ne,1);break t}}A=N.createElement(m),Vr(A,m,u),N.head.appendChild(A);break;default:throw Error(s(468,m))}A[Ln]=a,$n(A),m=A}a.stateNode=m}else Ex(N,a.type,a.stateNode);else a.stateNode=gx(N,m,a.memoizedProps);else A!==m?(A===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):A.count--,m===null?Ex(N,a.type,a.stateNode):gx(N,m,a.memoizedProps)):m===null&&a.stateNode!==null&&xm(a,a.memoizedProps,u.memoizedProps)}break;case 27:Hi(o,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),u!==null&&m&4&&xm(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Hi(o,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),a.flags&32){N=a.stateNode;try{za(N,"")}catch($e){ta(a,a.return,$e)}}m&4&&a.stateNode!=null&&(N=a.memoizedProps,xm(a,N,u!==null?u.memoizedProps:N)),m&1024&&(bm=!0);break;case 6:if(Hi(o,a),Yi(a),m&4){if(a.stateNode===null)throw Error(s(162));m=a.memoizedProps,u=a.stateNode;try{u.nodeValue=m}catch($e){ta(a,a.return,$e)}}break;case 3:if(Wf=null,N=Po,Po=zf(o.containerInfo),Hi(o,a),Po=N,Yi(a),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Pd(o.containerInfo)}catch($e){ta(a,a.return,$e)}bm&&(bm=!1,yg(a));break;case 4:m=Po,Po=zf(a.stateNode.containerInfo),Hi(o,a),Yi(a),Po=m;break;case 12:Hi(o,a),Yi(a);break;case 13:Hi(o,a),Yi(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Cm=Fe()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Tm(a,m)));break;case 22:N=a.memoizedState!==null;var ye=u!==null&&u.memoizedState!==null,Ye=Il,ct=Xa;if(Il=Ye||N,Xa=ct||ye,Hi(o,a),Xa=ct,Il=Ye,Yi(a),m&8192)e:for(o=a.stateNode,o._visibility=N?o._visibility&-2:o._visibility|1,N&&(u===null||ye||Il||Xa||Uc(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){ye=u=o;try{if(A=ye.stateNode,N)B=A.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{ne=ye.stateNode;var Et=ye.memoizedProps.style,qe=Et!=null&&Et.hasOwnProperty("display")?Et.display:null;ne.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch($e){ta(ye,ye.return,$e)}}}else if(o.tag===6){if(u===null){ye=o;try{ye.stateNode.nodeValue=N?"":ye.memoizedProps}catch($e){ta(ye,ye.return,$e)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,Tm(a,u))));break;case 19:Hi(o,a),Yi(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Tm(a,m)));break;case 30:break;case 21:break;default:Hi(o,a),Yi(a)}}function Yi(a){var o=a.flags;if(o&2){try{for(var u,m=a.return;m!==null;){if(gg(m)){u=m;break}m=m.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var N=u.stateNode,A=Em(a);Of(a,A,N);break;case 5:var B=u.stateNode;u.flags&32&&(za(B,""),u.flags&=-33);var ne=Em(a);Of(a,ne,B);break;case 3:case 4:var ye=u.stateNode.containerInfo,Ye=Em(a);_m(a,Ye,ye);break;default:throw Error(s(161))}}catch(ct){ta(a,a.return,ct)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function yg(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;yg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ql(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)_g(a,o.alternate,o),o=o.sibling}function Uc(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Jl(4,o,o.return),Uc(o);break;case 1:al(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&mg(o,o.return,u),Uc(o);break;case 27:Sd(o.stateNode);case 26:case 5:al(o,o.return),Uc(o);break;case 22:o.memoizedState===null&&Uc(o);break;case 30:Uc(o);break;default:Uc(o)}a=a.sibling}}function ec(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,N=a,A=o,B=A.flags;switch(A.tag){case 0:case 11:case 15:ec(N,A,u),gd(4,A);break;case 1:if(ec(N,A,u),m=A,N=m.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Ye){ta(m,m.return,Ye)}if(m=A,N=m.updateQueue,N!==null){var ne=m.stateNode;try{var ye=N.shared.hiddenCallbacks;if(ye!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ye.length;N++)As(ye[N],ne)}catch(Ye){ta(m,m.return,Ye)}}u&&B&64&&hg(A),xd(A,A.return);break;case 27:xg(A);case 26:case 5:ec(N,A,u),u&&m===null&&B&4&&pg(A),xd(A,A.return);break;case 12:ec(N,A,u);break;case 13:ec(N,A,u),u&&B&4&&Ng(N,A);break;case 22:A.memoizedState===null&&ec(N,A,u),xd(A,A.return);break;case 30:break;default:ec(N,A,u)}o=o.sibling}}function Nm(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Sc(u))}function vm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Sc(a))}function rl(a,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ag(a,o,u,m),o=o.sibling}function Ag(a,o,u,m){var N=o.flags;switch(o.tag){case 0:case 11:case 15:rl(a,o,u,m),N&2048&&gd(9,o);break;case 1:rl(a,o,u,m);break;case 3:rl(a,o,u,m),N&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Sc(a)));break;case 12:if(N&2048){rl(a,o,u,m),a=o.stateNode;try{var A=o.memoizedProps,B=A.id,ne=A.onPostCommit;typeof ne=="function"&&ne(B,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ye){ta(o,o.return,ye)}}else rl(a,o,u,m);break;case 13:rl(a,o,u,m);break;case 23:break;case 22:A=o.stateNode,B=o.alternate,o.memoizedState!==null?A._visibility&2?rl(a,o,u,m):Ed(a,o):A._visibility&2?rl(a,o,u,m):(A._visibility|=2,fu(a,o,u,m,(o.subtreeFlags&10256)!==0)),N&2048&&Nm(B,o);break;case 24:rl(a,o,u,m),N&2048&&vm(o.alternate,o);break;default:rl(a,o,u,m)}}function fu(a,o,u,m,N){for(N=N&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var A=a,B=o,ne=u,ye=m,Ye=B.flags;switch(B.tag){case 0:case 11:case 15:fu(A,B,ne,ye,N),gd(8,B);break;case 23:break;case 22:var ct=B.stateNode;B.memoizedState!==null?ct._visibility&2?fu(A,B,ne,ye,N):Ed(A,B):(ct._visibility|=2,fu(A,B,ne,ye,N)),N&&Ye&2048&&Nm(B.alternate,B);break;case 24:fu(A,B,ne,ye,N),N&&Ye&2048&&vm(B.alternate,B);break;default:fu(A,B,ne,ye,N)}o=o.sibling}}function Ed(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,m=o,N=m.flags;switch(m.tag){case 22:Ed(u,m),N&2048&&Nm(m.alternate,m);break;case 24:Ed(u,m),N&2048&&vm(m.alternate,m);break;default:Ed(u,m)}o=o.sibling}}var _d=8192;function hu(a){if(a.subtreeFlags&_d)for(a=a.child;a!==null;)Sg(a),a=a.sibling}function Sg(a){switch(a.tag){case 26:hu(a),a.flags&_d&&a.memoizedState!==null&&Z5(Po,a.memoizedState,a.memoizedProps);break;case 5:hu(a);break;case 3:case 4:var o=Po;Po=zf(a.stateNode.containerInfo),hu(a),Po=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=_d,_d=16777216,hu(a),_d=o):hu(a));break;default:hu(a)}}function Cg(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function bd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Sr=m,wg(m,a)}Cg(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lg(a),a=a.sibling}function Lg(a){switch(a.tag){case 0:case 11:case 15:bd(a),a.flags&2048&&Jl(9,a,a.return);break;case 3:bd(a);break;case 12:bd(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Pf(a)):bd(a);break;default:bd(a)}}function Pf(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Sr=m,wg(m,a)}Cg(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Jl(8,o,o.return),Pf(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Pf(o));break;default:Pf(o)}a=a.sibling}}function wg(a,o){for(;Sr!==null;){var u=Sr;switch(u.tag){case 0:case 11:case 15:Jl(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Sc(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Sr=m;else e:for(u=a;Sr!==null;){m=Sr;var N=m.sibling,A=m.return;if(bg(m),m===u){Sr=null;break e}if(N!==null){N.return=A,Sr=N;break e}Sr=A}}}var h5={getCacheForType:function(a){var o=$a(Wa),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u}},m5=typeof WeakMap=="function"?WeakMap:Map,qs=0,oa=null,us=null,Cs=0,zs=0,qi=null,tc=!1,mu=!1,ym=!1,Rl=0,Ga=0,nc=0,Fc=0,Am=0,po=0,pu=0,Td=null,Ii=null,Sm=!1,Cm=0,Mf=1/0,kf=null,sc=null,Fr=0,ac=null,gu=null,xu=0,Lm=0,wm=null,Ig=null,Nd=0,Im=null;function zi(){if((qs&2)!==0&&Cs!==0)return Cs&-Cs;if(G.T!==null){var a=Nl;return a!==0?a:jm()}return ca()}function Dg(){po===0&&(po=(Cs&536870912)===0||rn?Ws():536870912);var a=mo.current;return a!==null&&(a.flags|=32),po}function $i(a,o,u){(a===oa&&(zs===2||zs===9)||a.cancelPendingCommit!==null)&&(Eu(a,0),rc(a,Cs,po,!1)),ln(a,u),((qs&2)===0||a!==oa)&&(a===oa&&((qs&2)===0&&(Fc|=u),Ga===4&&rc(a,Cs,po,!1)),il(a))}function Rg(a,o,u){if((qs&6)!==0)throw Error(s(327));var m=!u&&(o&124)===0&&(o&a.expiredLanes)===0||rs(a,o),N=m?x5(a,o):Om(a,o,!0),A=m;do{if(N===0){mu&&!m&&rc(a,o,0,!1);break}else{if(u=a.current.alternate,A&&!p5(u)){N=Om(a,o,!1),A=!1;continue}if(N===2){if(A=o,a.errorRecoveryDisabledLanes&A)var B=0;else B=a.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){o=B;e:{var ne=a;N=Td;var ye=ne.current.memoizedState.isDehydrated;if(ye&&(Eu(ne,B).flags|=256),B=Om(ne,B,!1),B!==2){if(ym&&!ye){ne.errorRecoveryDisabledLanes|=A,Fc|=A,N=4;break e}A=Ii,Ii=N,A!==null&&(Ii===null?Ii=A:Ii.push.apply(Ii,A))}N=B}if(A=!1,N!==2)continue}}if(N===1){Eu(a,0),rc(a,o,0,!0);break}e:{switch(m=a,A=N,A){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:rc(m,o,po,!tc);break e;case 2:Ii=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(N=Cm+300-Fe(),10<N)){if(rc(m,o,po,!tc),xn(m,0,!0)!==0)break e;m.timeoutHandle=ox(Og.bind(null,m,u,Ii,kf,Sm,o,po,Fc,pu,tc,A,2,-0,0),N);break e}Og(m,u,Ii,kf,Sm,o,po,Fc,pu,tc,A,0,-0,0)}}break}while(!0);il(a)}function Og(a,o,u,m,N,A,B,ne,ye,Ye,ct,Et,qe,$e){if(a.timeoutHandle=-1,Et=o.subtreeFlags,(Et&8192||(Et&16785408)===16785408)&&(wd={stylesheets:null,count:0,unsuspend:X5},Sg(o),Et=J5(),Et!==null)){a.cancelPendingCommit=Et(Fg.bind(null,a,o,A,u,m,N,B,ne,ye,ct,1,qe,$e)),rc(a,A,B,!Ye);return}Fg(a,o,A,u,m,N,B,ne,ye)}function p5(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var N=u[m],A=N.getSnapshot;N=N.value;try{if(!Ba(A(),N))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rc(a,o,u,m){o&=~Am,o&=~Fc,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var N=o;0<N;){var A=31-We(N),B=1<<A;m[A]=-1,N&=~B}u!==0&&un(a,u,o)}function jf(){return(qs&6)===0?(vd(0),!1):!0}function Dm(){if(us!==null){if(zs===0)var a=us.return;else a=us,Lo=ir=null,au(a),uu=null,hd=0,a=us;for(;a!==null;)fg(a.alternate,a),a=a.return;us=null}}function Eu(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,O5(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Dm(),oa=a,us=u=Ai(a.current,null),Cs=o,zs=0,qi=null,tc=!1,mu=rs(a,o),ym=!1,pu=po=Am=Fc=nc=Ga=0,Ii=Td=null,Sm=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var N=31-We(m),A=1<<N;o|=a[N],m&=~A}return Rl=o,Zr(),u}function Pg(a,o){gn=null,G.H=yf,o===W||o===te?(o=Oe(),zs=3):o===X?(o=Oe(),zs=4):zs=o===Jp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,qi=o,us===null&&(Ga=1,wf(a,Zn(o,a.current)))}function Mg(){var a=G.H;return G.H=yf,a===null?yf:a}function kg(){var a=G.A;return G.A=h5,a}function Rm(){Ga=4,tc||(Cs&4194048)!==Cs&&mo.current!==null||(mu=!0),(nc&134217727)===0&&(Fc&134217727)===0||oa===null||rc(oa,Cs,po,!1)}function Om(a,o,u){var m=qs;qs|=2;var N=Mg(),A=kg();(oa!==a||Cs!==o)&&(kf=null,Eu(a,o)),o=!1;var B=Ga;e:do try{if(zs!==0&&us!==null){var ne=us,ye=qi;switch(zs){case 8:Dm(),B=6;break e;case 3:case 2:case 9:case 6:mo.current===null&&(o=!0);var Ye=zs;if(zs=0,qi=null,_u(a,ne,ye,Ye),u&&mu){B=0;break e}break;default:Ye=zs,zs=0,qi=null,_u(a,ne,ye,Ye)}}g5(),B=Ga;break}catch(ct){Pg(a,ct)}while(!0);return o&&a.shellSuspendCounter++,Lo=ir=null,qs=m,G.H=N,G.A=A,us===null&&(oa=null,Cs=0,Zr()),B}function g5(){for(;us!==null;)jg(us)}function x5(a,o){var u=qs;qs|=2;var m=Mg(),N=kg();oa!==a||Cs!==o?(kf=null,Mf=Fe()+500,Eu(a,o)):mu=rs(a,o);e:do try{if(zs!==0&&us!==null){o=us;var A=qi;t:switch(zs){case 1:zs=0,qi=null,_u(a,o,A,1);break;case 2:case 9:if(me(A)){zs=0,qi=null,Bg(o);break}o=function(){zs!==2&&zs!==9||oa!==a||(zs=7),il(a)},A.then(o,o);break e;case 3:zs=7;break e;case 4:zs=5;break e;case 7:me(A)?(zs=0,qi=null,Bg(o)):(zs=0,qi=null,_u(a,o,A,7));break;case 5:var B=null;switch(us.tag){case 26:B=us.memoizedState;case 5:case 27:var ne=us;if(!B||_x(B)){zs=0,qi=null;var ye=ne.sibling;if(ye!==null)us=ye;else{var Ye=ne.return;Ye!==null?(us=Ye,Bf(Ye)):us=null}break t}}zs=0,qi=null,_u(a,o,A,5);break;case 6:zs=0,qi=null,_u(a,o,A,6);break;case 8:Dm(),Ga=6;break e;default:throw Error(s(462))}}E5();break}catch(ct){Pg(a,ct)}while(!0);return Lo=ir=null,G.H=m,G.A=N,qs=u,us!==null?0:(oa=null,Cs=0,Zr(),Ga)}function E5(){for(;us!==null&&!je();)jg(us)}function jg(a){var o=ug(a.alternate,a,Rl);a.memoizedProps=a.pendingProps,o===null?Bf(a):us=o}function Bg(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=ag(u,o,o.pendingProps,o.type,void 0,Cs);break;case 11:o=ag(u,o,o.pendingProps,o.type.render,o.ref,Cs);break;case 5:au(o);default:fg(u,o),o=us=lo(o,Rl),o=ug(u,o,Rl)}a.memoizedProps=a.pendingProps,o===null?Bf(a):us=o}function _u(a,o,u,m){Lo=ir=null,au(o),uu=null,hd=0;var N=o.return;try{if(o5(a,N,o,u,Cs)){Ga=1,wf(a,Zn(u,a.current)),us=null;return}}catch(A){if(N!==null)throw us=N,A;Ga=1,wf(a,Zn(u,a.current)),us=null;return}o.flags&32768?(rn||m===1?a=!0:mu||(Cs&536870912)!==0?a=!1:(tc=a=!0,(m===2||m===9||m===3||m===6)&&(m=mo.current,m!==null&&m.tag===13&&(m.flags|=16384))),Ug(o,a)):Bf(o)}function Bf(a){var o=a;do{if((o.flags&32768)!==0){Ug(o,tc);return}a=o.return;var u=c5(o.alternate,o,Rl);if(u!==null){us=u;return}if(o=o.sibling,o!==null){us=o;return}us=o=a}while(o!==null);Ga===0&&(Ga=5)}function Ug(a,o){do{var u=u5(a.alternate,a);if(u!==null){u.flags&=32767,us=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){us=a;return}us=a=u}while(a!==null);Ga=6,us=null}function Fg(a,o,u,m,N,A,B,ne,ye){a.cancelPendingCommit=null;do Uf();while(Fr!==0);if((qs&6)!==0)throw Error(s(327));if(o!==null){if(o===a.current)throw Error(s(177));if(A=o.lanes|o.childLanes,A|=pa,ls(a,u,A,B,ne,ye),a===oa&&(us=oa=null,Cs=0),gu=o,ac=a,xu=u,Lm=A,wm=N,Ig=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,N5(it,function(){return qg(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,N=he.p,he.p=2,B=qs,qs|=4;try{d5(a,o,u)}finally{qs=B,he.p=N,G.T=m}}Fr=1,Vg(),Gg(),Hg()}}function Vg(){if(Fr===1){Fr=0;var a=ac,o=gu,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var m=he.p;he.p=2;var N=qs;qs|=4;try{vg(o,a);var A=qm,B=pr(a.containerInfo),ne=A.focusedElem,ye=A.selectionRange;if(B!==ne&&ne&&ne.ownerDocument&&to(ne.ownerDocument.documentElement,ne)){if(ye!==null&&va(ne)){var Ye=ye.start,ct=ye.end;if(ct===void 0&&(ct=Ye),"selectionStart"in ne)ne.selectionStart=Ye,ne.selectionEnd=Math.min(ct,ne.value.length);else{var Et=ne.ownerDocument||document,qe=Et&&Et.defaultView||window;if(qe.getSelection){var $e=qe.getSelection(),On=ne.textContent.length,Tn=Math.min(ye.start,On),Js=ye.end===void 0?Tn:Math.min(ye.end,On);!$e.extend&&Tn>Js&&(B=Js,Js=Tn,Tn=B);var ke=vi(ne,Tn),Ie=vi(ne,Js);if(ke&&Ie&&($e.rangeCount!==1||$e.anchorNode!==ke.node||$e.anchorOffset!==ke.offset||$e.focusNode!==Ie.node||$e.focusOffset!==Ie.offset)){var Ge=Et.createRange();Ge.setStart(ke.node,ke.offset),$e.removeAllRanges(),Tn>Js?($e.addRange(Ge),$e.extend(Ie.node,Ie.offset)):(Ge.setEnd(Ie.node,Ie.offset),$e.addRange(Ge))}}}}for(Et=[],$e=ne;$e=$e.parentNode;)$e.nodeType===1&&Et.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<Et.length;ne++){var ht=Et[ne];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Zf=!!Ym,qm=Ym=null}finally{qs=N,he.p=m,G.T=u}}a.current=o,Fr=2}}function Gg(){if(Fr===2){Fr=0;var a=ac,o=gu,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var m=he.p;he.p=2;var N=qs;qs|=4;try{_g(a,o.alternate,o)}finally{qs=N,he.p=m,G.T=u}}Fr=3}}function Hg(){if(Fr===4||Fr===3){Fr=0,ge();var a=ac,o=gu,u=xu,m=Ig;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Fr=5:(Fr=0,gu=ac=null,Yg(a,a.pendingLanes));var N=a.pendingLanes;if(N===0&&(sc=null),gs(u),o=o.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Ft,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=G.T,N=he.p,he.p=2,G.T=null;try{for(var A=a.onRecoverableError,B=0;B<m.length;B++){var ne=m[B];A(ne.value,{componentStack:ne.stack})}}finally{G.T=o,he.p=N}}(xu&3)!==0&&Uf(),il(a),N=a.pendingLanes,(u&4194090)!==0&&(N&42)!==0?a===Im?Nd++:(Nd=0,Im=a):Nd=0,vd(0)}}function Yg(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Sc(o)))}function Uf(a){return Vg(),Gg(),Hg(),qg()}function qg(){if(Fr!==5)return!1;var a=ac,o=Lm;Lm=0;var u=gs(xu),m=G.T,N=he.p;try{he.p=32>u?32:u,G.T=null,u=wm,wm=null;var A=ac,B=xu;if(Fr=0,gu=ac=null,xu=0,(qs&6)!==0)throw Error(s(331));var ne=qs;if(qs|=4,Lg(A.current),Ag(A,A.current,B,u),qs=ne,vd(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Ft,A)}catch{}return!0}finally{he.p=N,G.T=m,Yg(a,o)}}function zg(a,o,u){o=Zn(u,o),o=lm(a.stateNode,o,2),a=gt(a,o,2),a!==null&&(ln(a,2),il(a))}function ta(a,o,u){if(a.tag===3)zg(a,a,u);else for(;o!==null;){if(o.tag===3){zg(o,a,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(sc===null||!sc.has(m))){a=Zn(u,a),u=Xp(2),m=gt(o,u,2),m!==null&&(Zp(u,m,o,a),ln(m,2),il(m));break}}o=o.return}}function Pm(a,o,u){var m=a.pingCache;if(m===null){m=a.pingCache=new m5;var N=new Set;m.set(o,N)}else N=m.get(o),N===void 0&&(N=new Set,m.set(o,N));N.has(u)||(ym=!0,N.add(u),a=_5.bind(null,a,o,u),o.then(a,a))}function _5(a,o,u){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,oa===a&&(Cs&u)===u&&(Ga===4||Ga===3&&(Cs&62914560)===Cs&&300>Fe()-Cm?(qs&2)===0&&Eu(a,0):Am|=u,pu===Cs&&(pu=0)),il(a)}function $g(a,o){o===0&&(o=Un()),a=Ui(a,o),a!==null&&(ln(a,o),il(a))}function b5(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),$g(a,u)}function T5(a,o){var u=0;switch(a.tag){case 13:var m=a.stateNode,N=a.memoizedState;N!==null&&(u=N.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(o),$g(a,u)}function N5(a,o){return Ze(a,o)}var Ff=null,bu=null,Mm=!1,Vf=!1,km=!1,Vc=0;function il(a){a!==bu&&a.next===null&&(bu===null?Ff=bu=a:bu=bu.next=a),Vf=!0,Mm||(Mm=!0,y5())}function vd(a,o){if(!km&&Vf){km=!0;do for(var u=!1,m=Ff;m!==null;){if(a!==0){var N=m.pendingLanes;if(N===0)var A=0;else{var B=m.suspendedLanes,ne=m.pingedLanes;A=(1<<31-We(42|a)+1)-1,A&=N&~(B&~ne),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(u=!0,Zg(m,A))}else A=Cs,A=xn(m,m===oa?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||rs(m,A)||(u=!0,Zg(m,A));m=m.next}while(u);km=!1}}function v5(){Wg()}function Wg(){Vf=Mm=!1;var a=0;Vc!==0&&(R5()&&(a=Vc),Vc=0);for(var o=Fe(),u=null,m=Ff;m!==null;){var N=m.next,A=Kg(m,o);A===0?(m.next=null,u===null?Ff=N:u.next=N,N===null&&(bu=u)):(u=m,(a!==0||(A&3)!==0)&&(Vf=!0)),m=N}vd(a)}function Kg(a,o){for(var u=a.suspendedLanes,m=a.pingedLanes,N=a.expirationTimes,A=a.pendingLanes&-62914561;0<A;){var B=31-We(A),ne=1<<B,ye=N[B];ye===-1?((ne&u)===0||(ne&m)!==0)&&(N[B]=Cn(ne,o)):ye<=o&&(a.expiredLanes|=ne),A&=~ne}if(o=oa,u=Cs,u=xn(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,u===0||a===o&&(zs===2||zs===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Qe(m),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||rs(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(m!==null&&Qe(m),gs(u)){case 2:case 8:u=nt;break;case 32:u=it;break;case 268435456:u=Nt;break;default:u=it}return m=Xg.bind(null,a),u=Ze(u,m),a.callbackPriority=o,a.callbackNode=u,o}return m!==null&&m!==null&&Qe(m),a.callbackPriority=2,a.callbackNode=null,2}function Xg(a,o){if(Fr!==0&&Fr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Uf()&&a.callbackNode!==u)return null;var m=Cs;return m=xn(a,a===oa?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(Rg(a,m,o),Kg(a,Fe()),a.callbackNode!=null&&a.callbackNode===u?Xg.bind(null,a):null)}function Zg(a,o){if(Uf())return null;Rg(a,o,!0)}function y5(){P5(function(){(qs&6)!==0?Ze(Pe,v5):Wg()})}function jm(){return Vc===0&&(Vc=Ws()),Vc}function Jg(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ze(""+a)}function Qg(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function A5(a,o,u,m,N){if(o==="submit"&&u&&u.stateNode===N){var A=Jg((N[kn]||null).action),B=m.submitter;B&&(o=(o=B[kn]||null)?Jg(o.formAction):B.getAttribute("formAction"),o!==null&&(A=o,B=null));var ne=new _r("action","action",null,m,N);a.push({event:ne,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Vc!==0){var ye=B?Qg(N,B):new FormData(N);ho(u,{pending:!0,data:ye,method:N.method,action:A},null,ye)}}else typeof A=="function"&&(ne.preventDefault(),ye=B?Qg(N,B):new FormData(N),ho(u,{pending:!0,data:ye,method:N.method,action:A},A,ye))},currentTarget:N}]})}}for(var Bm=0;Bm<vo.length;Bm++){var Um=vo[Bm],S5=Um.toLowerCase(),C5=Um[0].toUpperCase()+Um.slice(1);ra(S5,"on"+C5)}ra(Wo,"onAnimationEnd"),ra(no,"onAnimationIteration"),ra(so,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(ao,"onTransitionRun"),ra(No,"onTransitionStart"),ra(Ko,"onTransitionCancel"),ra(ro,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd));function ex(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var m=a[u],N=m.event;m=m.listeners;e:{var A=void 0;if(o)for(var B=m.length-1;0<=B;B--){var ne=m[B],ye=ne.instance,Ye=ne.currentTarget;if(ne=ne.listener,ye!==A&&N.isPropagationStopped())break e;A=ne,N.currentTarget=Ye;try{A(N)}catch(ct){Lf(ct)}N.currentTarget=null,A=ye}else for(B=0;B<m.length;B++){if(ne=m[B],ye=ne.instance,Ye=ne.currentTarget,ne=ne.listener,ye!==A&&N.isPropagationStopped())break e;A=ne,N.currentTarget=Ye;try{A(N)}catch(ct){Lf(ct)}N.currentTarget=null,A=ye}}}}function ds(a,o){var u=o[Rn];u===void 0&&(u=o[Rn]=new Set);var m=a+"__bubble";u.has(m)||(tx(o,a,2,!1),u.add(m))}function Fm(a,o,u){var m=0;o&&(m|=4),tx(u,a,m,o)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function Vm(a){if(!a[Gf]){a[Gf]=!0,La.forEach(function(u){u!=="selectionchange"&&(L5.has(u)||Fm(u,!1,a),Fm(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Gf]||(o[Gf]=!0,Fm("selectionchange",!1,o))}}function tx(a,o,u,m){switch(Ax(o)){case 2:var N=tb;break;case 8:N=nb;break;default:N=t0}u=N.bind(null,o,u,a),N=void 0,!Yn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(N=!0),m?N!==void 0?a.addEventListener(o,u,{capture:!0,passive:N}):a.addEventListener(o,u,!0):N!==void 0?a.addEventListener(o,u,{passive:N}):a.addEventListener(o,u,!1)}function Gm(a,o,u,m,N){var A=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var B=m.tag;if(B===3||B===4){var ne=m.stateNode.containerInfo;if(ne===N)break;if(B===4)for(B=m.return;B!==null;){var ye=B.tag;if((ye===3||ye===4)&&B.stateNode.containerInfo===N)return;B=B.return}for(;ne!==null;){if(B=bs(ne),B===null)return;if(ye=B.tag,ye===5||ye===6||ye===26||ye===27){m=A=B;continue e}ne=ne.parentNode}}m=m.return}_n(function(){var Ye=A,ct=bt(u),Et=[];e:{var qe=Bi.get(a);if(qe!==void 0){var $e=_r,On=a;switch(a){case"keypress":if(di(u)===0)break e;case"keydown":case"keyup":$e=ys;break;case"focusin":On="focus",$e=Bt;break;case"focusout":On="blur",$e=Bt;break;case"beforeblur":case"afterblur":$e=Bt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=Xe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=_t;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=_o;break;case Wo:case no:case so:$e=Ct;break;case ro:$e=q;break;case"scroll":case"scrollend":$e=Pi;break;case"wheel":$e=Ae;break;case"copy":case"cut":case"paste":$e=Bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Yo;break;case"toggle":case"beforetoggle":$e=et}var Tn=(o&4)!==0,Js=!Tn&&(a==="scroll"||a==="scrollend"),ke=Tn?qe!==null?qe+"Capture":null:qe;Tn=[];for(var Ie=Ye,Ge;Ie!==null;){var ht=Ie;if(Ge=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Ge===null||ke===null||(ht=on(Ie,ke),ht!=null&&Tn.push(Ad(Ie,ht,Ge))),Js)break;Ie=Ie.return}0<Tn.length&&(qe=new $e(qe,On,null,u,ct),Et.push({event:qe,listeners:Tn}))}}if((o&7)===0){e:{if(qe=a==="mouseover"||a==="pointerover",$e=a==="mouseout"||a==="pointerout",qe&&u!==dt&&(On=u.relatedTarget||u.fromElement)&&(bs(On)||On[Fn]))break e;if(($e||qe)&&(qe=ct.window===ct?ct:(qe=ct.ownerDocument)?qe.defaultView||qe.parentWindow:window,$e?(On=u.relatedTarget||u.toElement,$e=Ye,On=On?bs(On):null,On!==null&&(Js=i(On),Tn=On.tag,On!==Js||Tn!==5&&Tn!==27&&Tn!==6)&&(On=null)):($e=null,On=Ye),$e!==On)){if(Tn=Xe,ht="onMouseLeave",ke="onMouseEnter",Ie="mouse",(a==="pointerout"||a==="pointerover")&&(Tn=Yo,ht="onPointerLeave",ke="onPointerEnter",Ie="pointer"),Js=$e==null?qe:Ls($e),Ge=On==null?qe:Ls(On),qe=new Tn(ht,Ie+"leave",$e,u,ct),qe.target=Js,qe.relatedTarget=Ge,ht=null,bs(ct)===Ye&&(Tn=new Tn(ke,Ie+"enter",On,u,ct),Tn.target=Ge,Tn.relatedTarget=Js,ht=Tn),Js=ht,$e&&On)t:{for(Tn=$e,ke=On,Ie=0,Ge=Tn;Ge;Ge=Tu(Ge))Ie++;for(Ge=0,ht=ke;ht;ht=Tu(ht))Ge++;for(;0<Ie-Ge;)Tn=Tu(Tn),Ie--;for(;0<Ge-Ie;)ke=Tu(ke),Ge--;for(;Ie--;){if(Tn===ke||ke!==null&&Tn===ke.alternate)break t;Tn=Tu(Tn),ke=Tu(ke)}Tn=null}else Tn=null;$e!==null&&nx(Et,qe,$e,Tn,!1),On!==null&&Js!==null&&nx(Et,Js,On,Tn,!0)}}e:{if(qe=Ye?Ls(Ye):window,$e=qe.nodeName&&qe.nodeName.toLowerCase(),$e==="select"||$e==="input"&&qe.type==="file")var en=zo;else if(Or(qe))if(Qi)en=Fl;else{en=Ac;var os=mr}else $e=qe.nodeName,!$e||$e.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Ye&&Ni(Ye.elementType)&&(en=zo):en=gl;if(en&&(en=en(a,Ye))){qo(Et,en,u,ct);break e}os&&os(a,qe,Ye),a==="focusout"&&Ye&&qe.type==="number"&&Ye.memoizedProps.value!=null&&bi(qe,"number",qe.value)}switch(os=Ye?Ls(Ye):window,a){case"focusin":(Or(os)||os.contentEditable==="true")&&(Ua=os,Nr=Ye,Xr=null);break;case"focusout":Xr=Nr=Ua=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,Us(Et,u,ct);break;case"selectionchange":if(Kr)break;case"keydown":case"keyup":Us(Et,u,ct)}var hn;if(Vt)e:{switch(a){case"compositionstart":var An="onCompositionStart";break e;case"compositionend":An="onCompositionEnd";break e;case"compositionupdate":An="onCompositionUpdate";break e}An=void 0}else Hs?Xs(a,u)&&(An="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(An="onCompositionStart");An&&(wn&&u.locale!=="ko"&&(Hs||An!=="onCompositionStart"?An==="onCompositionEnd"&&Hs&&(hn=fr()):(yn=ct,Dr="value"in yn?yn.value:yn.textContent,Hs=!0)),os=Hf(Ye,An),0<os.length&&(An=new Xn(An,a,null,u,ct),Et.push({event:An,listeners:os}),hn?An.data=hn:(hn=ma(u),hn!==null&&(An.data=hn)))),(hn=pn?ja(a,u):Rr(a,u))&&(An=Hf(Ye,"onBeforeInput"),0<An.length&&(os=new Xn("onBeforeInput","beforeinput",null,u,ct),Et.push({event:os,listeners:An}),os.data=hn)),A5(Et,a,Ye,u,ct)}ex(Et,o)})}function Ad(a,o,u){return{instance:a,listener:o,currentTarget:u}}function Hf(a,o){for(var u=o+"Capture",m=[];a!==null;){var N=a,A=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||A===null||(N=on(a,u),N!=null&&m.unshift(Ad(a,N,A)),N=on(a,o),N!=null&&m.push(Ad(a,N,A))),a.tag===3)return m;a=a.return}return[]}function Tu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function nx(a,o,u,m,N){for(var A=o._reactName,B=[];u!==null&&u!==m;){var ne=u,ye=ne.alternate,Ye=ne.stateNode;if(ne=ne.tag,ye!==null&&ye===m)break;ne!==5&&ne!==26&&ne!==27||Ye===null||(ye=Ye,N?(Ye=on(u,A),Ye!=null&&B.unshift(Ad(u,Ye,ye))):N||(Ye=on(u,A),Ye!=null&&B.push(Ad(u,Ye,ye)))),u=u.return}B.length!==0&&a.push({event:o,listeners:B})}var w5=/\r\n?/g,I5=/\u0000|\uFFFD/g;function sx(a){return(typeof a=="string"?a:""+a).replace(w5,`
`).replace(I5,"")}function ax(a,o){return o=sx(o),sx(a)===o}function Yf(){}function Zs(a,o,u,m,N,A){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||za(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&za(a,""+m);break;case"className":da(a,"class",m);break;case"tabIndex":da(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":da(a,u,m);break;case"style":Da(a,m,A);break;case"data":if(o!=="object"){da(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(u);break}m=ze(""+m),a.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(u==="formAction"?(o!=="input"&&Zs(a,o,"name",N.name,N,null),Zs(a,o,"formEncType",N.formEncType,N,null),Zs(a,o,"formMethod",N.formMethod,N,null),Zs(a,o,"formTarget",N.formTarget,N,null)):(Zs(a,o,"encType",N.encType,N,null),Zs(a,o,"method",N.method,N,null),Zs(a,o,"target",N.target,N,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(u);break}m=ze(""+m),a.setAttribute(u,m);break;case"onClick":m!=null&&(a.onclick=Yf);break;case"onScroll":m!=null&&ds("scroll",a);break;case"onScrollEnd":m!=null&&ds("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(N.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}u=ze(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,""+m):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":m===!0?a.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,m):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(u,m):a.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(u):a.setAttribute(u,m);break;case"popover":ds("beforetoggle",a),ds("toggle",a),Ns(a,"popover",m);break;case"xlinkActuate":ws(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ws(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ws(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ws(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ws(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ws(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ws(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ws(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ws(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ns(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=be.get(u)||u,Ns(a,u,m))}}function Hm(a,o,u,m,N,A){switch(u){case"style":Da(a,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(N.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"children":typeof m=="string"?za(a,m):(typeof m=="number"||typeof m=="bigint")&&za(a,""+m);break;case"onScroll":m!=null&&ds("scroll",a);break;case"onScrollEnd":m!=null&&ds("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Yf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(N=u.endsWith("Capture"),o=u.slice(2,N?u.length-7:void 0),A=a[kn]||null,A=A!=null?A[u]:null,typeof A=="function"&&a.removeEventListener(o,A,N),typeof m=="function")){typeof A!="function"&&A!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,m,N);break e}u in a?a[u]=m:m===!0?a.setAttribute(u,""):Ns(a,u,m)}}}function Vr(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ds("error",a),ds("load",a);var m=!1,N=!1,A;for(A in u)if(u.hasOwnProperty(A)){var B=u[A];if(B!=null)switch(A){case"src":m=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Zs(a,o,A,B,u,null)}}N&&Zs(a,o,"srcSet",u.srcSet,u,null),m&&Zs(a,o,"src",u.src,u,null);return;case"input":ds("invalid",a);var ne=A=B=N=null,ye=null,Ye=null;for(m in u)if(u.hasOwnProperty(m)){var ct=u[m];if(ct!=null)switch(m){case"name":N=ct;break;case"type":B=ct;break;case"checked":ye=ct;break;case"defaultChecked":Ye=ct;break;case"value":A=ct;break;case"defaultValue":ne=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,o));break;default:Zs(a,o,m,ct,u,null)}}_i(a,A,ne,ye,Ye,B,N,!1),dr(a);return;case"select":ds("invalid",a),m=B=A=null;for(N in u)if(u.hasOwnProperty(N)&&(ne=u[N],ne!=null))switch(N){case"value":A=ne;break;case"defaultValue":B=ne;break;case"multiple":m=ne;default:Zs(a,o,N,ne,u,null)}o=A,u=B,a.multiple=!!m,o!=null?Er(a,!!m,o,!1):u!=null&&Er(a,!!m,u,!0);return;case"textarea":ds("invalid",a),A=N=m=null;for(B in u)if(u.hasOwnProperty(B)&&(ne=u[B],ne!=null))switch(B){case"value":m=ne;break;case"defaultValue":N=ne;break;case"children":A=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(91));break;default:Zs(a,o,B,ne,u,null)}Ti(a,m,N,A),dr(a);return;case"option":for(ye in u)if(u.hasOwnProperty(ye)&&(m=u[ye],m!=null))switch(ye){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Zs(a,o,ye,m,u,null)}return;case"dialog":ds("beforetoggle",a),ds("toggle",a),ds("cancel",a),ds("close",a);break;case"iframe":case"object":ds("load",a);break;case"video":case"audio":for(m=0;m<yd.length;m++)ds(yd[m],a);break;case"image":ds("error",a),ds("load",a);break;case"details":ds("toggle",a);break;case"embed":case"source":case"link":ds("error",a),ds("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in u)if(u.hasOwnProperty(Ye)&&(m=u[Ye],m!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Zs(a,o,Ye,m,u,null)}return;default:if(Ni(o)){for(ct in u)u.hasOwnProperty(ct)&&(m=u[ct],m!==void 0&&Hm(a,o,ct,m,u,void 0));return}}for(ne in u)u.hasOwnProperty(ne)&&(m=u[ne],m!=null&&Zs(a,o,ne,m,u,null))}function D5(a,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,A=null,B=null,ne=null,ye=null,Ye=null,ct=null;for($e in u){var Et=u[$e];if(u.hasOwnProperty($e)&&Et!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":ye=Et;default:m.hasOwnProperty($e)||Zs(a,o,$e,null,m,Et)}}for(var qe in m){var $e=m[qe];if(Et=u[qe],m.hasOwnProperty(qe)&&($e!=null||Et!=null))switch(qe){case"type":A=$e;break;case"name":N=$e;break;case"checked":Ye=$e;break;case"defaultChecked":ct=$e;break;case"value":B=$e;break;case"defaultValue":ne=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(s(137,o));break;default:$e!==Et&&Zs(a,o,qe,$e,m,Et)}}qr(a,B,ne,ye,Ye,ct,A,N);return;case"select":$e=B=ne=qe=null;for(A in u)if(ye=u[A],u.hasOwnProperty(A)&&ye!=null)switch(A){case"value":break;case"multiple":$e=ye;default:m.hasOwnProperty(A)||Zs(a,o,A,null,m,ye)}for(N in m)if(A=m[N],ye=u[N],m.hasOwnProperty(N)&&(A!=null||ye!=null))switch(N){case"value":qe=A;break;case"defaultValue":ne=A;break;case"multiple":B=A;default:A!==ye&&Zs(a,o,N,A,m,ye)}o=ne,u=B,m=$e,qe!=null?Er(a,!!u,qe,!1):!!m!=!!u&&(o!=null?Er(a,!!u,o,!0):Er(a,!!u,u?[]:"",!1));return;case"textarea":$e=qe=null;for(ne in u)if(N=u[ne],u.hasOwnProperty(ne)&&N!=null&&!m.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:Zs(a,o,ne,null,m,N)}for(B in m)if(N=m[B],A=u[B],m.hasOwnProperty(B)&&(N!=null||A!=null))switch(B){case"value":qe=N;break;case"defaultValue":$e=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:N!==A&&Zs(a,o,B,N,m,A)}ci(a,qe,$e);return;case"option":for(var On in u)if(qe=u[On],u.hasOwnProperty(On)&&qe!=null&&!m.hasOwnProperty(On))switch(On){case"selected":a.selected=!1;break;default:Zs(a,o,On,null,m,qe)}for(ye in m)if(qe=m[ye],$e=u[ye],m.hasOwnProperty(ye)&&qe!==$e&&(qe!=null||$e!=null))switch(ye){case"selected":a.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Zs(a,o,ye,qe,m,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tn in u)qe=u[Tn],u.hasOwnProperty(Tn)&&qe!=null&&!m.hasOwnProperty(Tn)&&Zs(a,o,Tn,null,m,qe);for(Ye in m)if(qe=m[Ye],$e=u[Ye],m.hasOwnProperty(Ye)&&qe!==$e&&(qe!=null||$e!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(s(137,o));break;default:Zs(a,o,Ye,qe,m,$e)}return;default:if(Ni(o)){for(var Js in u)qe=u[Js],u.hasOwnProperty(Js)&&qe!==void 0&&!m.hasOwnProperty(Js)&&Hm(a,o,Js,void 0,m,qe);for(ct in m)qe=m[ct],$e=u[ct],!m.hasOwnProperty(ct)||qe===$e||qe===void 0&&$e===void 0||Hm(a,o,ct,qe,m,$e);return}}for(var ke in u)qe=u[ke],u.hasOwnProperty(ke)&&qe!=null&&!m.hasOwnProperty(ke)&&Zs(a,o,ke,null,m,qe);for(Et in m)qe=m[Et],$e=u[Et],!m.hasOwnProperty(Et)||qe===$e||qe==null&&$e==null||Zs(a,o,Et,qe,m,$e)}var Ym=null,qm=null;function qf(a){return a.nodeType===9?a:a.ownerDocument}function rx(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ix(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function zm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $m=null;function R5(){var a=window.event;return a&&a.type==="popstate"?a===$m?!1:($m=a,!0):($m=null,!1)}var ox=typeof setTimeout=="function"?setTimeout:void 0,O5=typeof clearTimeout=="function"?clearTimeout:void 0,lx=typeof Promise=="function"?Promise:void 0,P5=typeof queueMicrotask=="function"?queueMicrotask:typeof lx<"u"?function(a){return lx.resolve(null).then(a).catch(M5)}:ox;function M5(a){setTimeout(function(){throw a})}function ic(a){return a==="head"}function cx(a,o){var u=o,m=0,N=0;do{var A=u.nextSibling;if(a.removeChild(u),A&&A.nodeType===8)if(u=A.data,u==="/$"){if(0<m&&8>m){u=m;var B=a.ownerDocument;if(u&1&&Sd(B.documentElement),u&2&&Sd(B.body),u&4)for(u=B.head,Sd(u),B=u.firstChild;B;){var ne=B.nextSibling,ye=B.nodeName;B[Ca]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&B.rel.toLowerCase()==="stylesheet"||u.removeChild(B),B=ne}}if(N===0){a.removeChild(A),Pd(o);return}N--}else u==="$"||u==="$?"||u==="$!"?N++:m=u.charCodeAt(0)-48;else m=0;u=A}while(u);Pd(o)}function Wm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Wm(u),En(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function k5(a,o,u,m){for(;a.nodeType===1;){var N=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Ca])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(A=a.getAttribute("rel"),A==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(A!==N.rel||a.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||a.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||a.getAttribute("title")!==(N.title==null?null:N.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(A=a.getAttribute("src"),(A!==(N.src==null?null:N.src)||a.getAttribute("type")!==(N.type==null?null:N.type)||a.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&A&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var A=N.name==null?null:""+N.name;if(N.type==="hidden"&&a.getAttribute("name")===A)return a}else return a;if(a=Mo(a.nextSibling),a===null)break}return null}function j5(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Mo(a.nextSibling),a===null))return null;return a}function Km(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function B5(a,o){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Mo(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Xm=null;function ux(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return a;o--}else u==="/$"&&o++}a=a.previousSibling}return null}function dx(a,o,u){switch(o=qf(u),a){case"html":if(a=o.documentElement,!a)throw Error(s(452));return a;case"head":if(a=o.head,!a)throw Error(s(453));return a;case"body":if(a=o.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function Sd(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);En(a)}var go=new Map,fx=new Set;function zf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ol=he.d;he.d={f:U5,r:F5,D:V5,C:G5,L:H5,m:Y5,X:z5,S:q5,M:$5};function U5(){var a=Ol.f(),o=jf();return a||o}function F5(a){var o=Qt(a);o!==null&&o.tag===5&&o.type==="form"?kc(o):Ol.r(a)}var Nu=typeof document>"u"?null:document;function hx(a,o,u){var m=Nu;if(m&&typeof o=="string"&&o){var N=cs(o);N='link[rel="'+a+'"][href="'+N+'"]',typeof u=="string"&&(N+='[crossorigin="'+u+'"]'),fx.has(N)||(fx.add(N),a={rel:a,crossOrigin:u,href:o},m.querySelector(N)===null&&(o=m.createElement("link"),Vr(o,"link",a),$n(o),m.head.appendChild(o)))}}function V5(a){Ol.D(a),hx("dns-prefetch",a,null)}function G5(a,o){Ol.C(a,o),hx("preconnect",a,o)}function H5(a,o,u){Ol.L(a,o,u);var m=Nu;if(m&&a&&o){var N='link[rel="preload"][as="'+cs(o)+'"]';o==="image"&&u&&u.imageSrcSet?(N+='[imagesrcset="'+cs(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(N+='[imagesizes="'+cs(u.imageSizes)+'"]')):N+='[href="'+cs(a)+'"]';var A=N;switch(o){case"style":A=vu(a);break;case"script":A=yu(a)}go.has(A)||(a=_({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),go.set(A,a),m.querySelector(N)!==null||o==="style"&&m.querySelector(Cd(A))||o==="script"&&m.querySelector(Ld(A))||(o=m.createElement("link"),Vr(o,"link",a),$n(o),m.head.appendChild(o)))}}function Y5(a,o){Ol.m(a,o);var u=Nu;if(u&&a){var m=o&&typeof o.as=="string"?o.as:"script",N='link[rel="modulepreload"][as="'+cs(m)+'"][href="'+cs(a)+'"]',A=N;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=yu(a)}if(!go.has(A)&&(a=_({rel:"modulepreload",href:a},o),go.set(A,a),u.querySelector(N)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ld(A)))return}m=u.createElement("link"),Vr(m,"link",a),$n(m),u.head.appendChild(m)}}}function q5(a,o,u){Ol.S(a,o,u);var m=Nu;if(m&&a){var N=Ts(m).hoistableStyles,A=vu(a);o=o||"default";var B=N.get(A);if(!B){var ne={loading:0,preload:null};if(B=m.querySelector(Cd(A)))ne.loading=5;else{a=_({rel:"stylesheet",href:a,"data-precedence":o},u),(u=go.get(A))&&Zm(a,u);var ye=B=m.createElement("link");$n(ye),Vr(ye,"link",a),ye._p=new Promise(function(Ye,ct){ye.onload=Ye,ye.onerror=ct}),ye.addEventListener("load",function(){ne.loading|=1}),ye.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,$f(B,o,m)}B={type:"stylesheet",instance:B,count:1,state:ne},N.set(A,B)}}}function z5(a,o){Ol.X(a,o);var u=Nu;if(u&&a){var m=Ts(u).hoistableScripts,N=yu(a),A=m.get(N);A||(A=u.querySelector(Ld(N)),A||(a=_({src:a,async:!0},o),(o=go.get(N))&&Jm(a,o),A=u.createElement("script"),$n(A),Vr(A,"link",a),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(N,A))}}function $5(a,o){Ol.M(a,o);var u=Nu;if(u&&a){var m=Ts(u).hoistableScripts,N=yu(a),A=m.get(N);A||(A=u.querySelector(Ld(N)),A||(a=_({src:a,async:!0,type:"module"},o),(o=go.get(N))&&Jm(a,o),A=u.createElement("script"),$n(A),Vr(A,"link",a),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(N,A))}}function mx(a,o,u,m){var N=(N=fe.current)?zf(N):null;if(!N)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=vu(u.href),u=Ts(N).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=vu(u.href);var A=Ts(N).hoistableStyles,B=A.get(a);if(B||(N=N.ownerDocument||N,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(a,B),(A=N.querySelector(Cd(a)))&&!A._p&&(B.instance=A,B.state.loading=5),go.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},go.set(a,u),A||W5(N,a,u,B.state))),o&&m===null)throw Error(s(528,""));return B}if(o&&m!==null)throw Error(s(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=yu(u),u=Ts(N).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function vu(a){return'href="'+cs(a)+'"'}function Cd(a){return'link[rel="stylesheet"]['+a+"]"}function px(a){return _({},a,{"data-precedence":a.precedence,precedence:null})}function W5(a,o,u,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Vr(o,"link",u),$n(o),a.head.appendChild(o))}function yu(a){return'[src="'+cs(a)+'"]'}function Ld(a){return"script[async]"+a}function gx(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+cs(u.href)+'"]');if(m)return o.instance=m,$n(m),m;var N=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),$n(m),Vr(m,"style",N),$f(m,u.precedence,a),o.instance=m;case"stylesheet":N=vu(u.href);var A=a.querySelector(Cd(N));if(A)return o.state.loading|=4,o.instance=A,$n(A),A;m=px(u),(N=go.get(N))&&Zm(m,N),A=(a.ownerDocument||a).createElement("link"),$n(A);var B=A;return B._p=new Promise(function(ne,ye){B.onload=ne,B.onerror=ye}),Vr(A,"link",m),o.state.loading|=4,$f(A,u.precedence,a),o.instance=A;case"script":return A=yu(u.src),(N=a.querySelector(Ld(A)))?(o.instance=N,$n(N),N):(m=u,(N=go.get(A))&&(m=_({},u),Jm(m,N)),a=a.ownerDocument||a,N=a.createElement("script"),$n(N),Vr(N,"link",m),a.head.appendChild(N),o.instance=N);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,$f(m,u.precedence,a));return o.instance}function $f(a,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=m.length?m[m.length-1]:null,A=N,B=0;B<m.length;B++){var ne=m[B];if(ne.dataset.precedence===o)A=ne;else if(A!==N)break}A?A.parentNode.insertBefore(a,A.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function Zm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Jm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Wf=null;function xx(a,o,u){if(Wf===null){var m=new Map,N=Wf=new Map;N.set(u,m)}else N=Wf,m=N.get(u),m||(m=new Map,N.set(u,m));if(m.has(a))return m;for(m.set(a,null),u=u.getElementsByTagName(a),N=0;N<u.length;N++){var A=u[N];if(!(A[Ca]||A[Ln]||a==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var B=A.getAttribute(o)||"";B=a+B;var ne=m.get(B);ne?ne.push(A):m.set(B,[A])}}return m}function Ex(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function K5(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function _x(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var wd=null;function X5(){}function Z5(a,o,u){if(wd===null)throw Error(s(475));var m=wd;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var N=vu(u.href),A=a.querySelector(Cd(N));if(A){a=A._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Kf.bind(m),a.then(m,m)),o.state.loading|=4,o.instance=A,$n(A);return}A=a.ownerDocument||a,u=px(u),(N=go.get(N))&&Zm(u,N),A=A.createElement("link"),$n(A);var B=A;B._p=new Promise(function(ne,ye){B.onload=ne,B.onerror=ye}),Vr(A,"link",u),o.instance=A}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=Kf.bind(m),a.addEventListener("load",o),a.addEventListener("error",o))}}function J5(){if(wd===null)throw Error(s(475));var a=wd;return a.stylesheets&&a.count===0&&Qm(a,a.stylesheets),0<a.count?function(o){var u=setTimeout(function(){if(a.stylesheets&&Qm(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(u)}}:null}function Kf(){if(this.count--,this.count===0){if(this.stylesheets)Qm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Xf=null;function Qm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Xf=new Map,o.forEach(Q5,a),Xf=null,Kf.call(a))}function Q5(a,o){if(!(o.state.loading&4)){var u=Xf.get(a);if(u)var m=u.get(null);else{u=new Map,Xf.set(a,u);for(var N=a.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<N.length;A++){var B=N[A];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(u.set(B.dataset.precedence,B),m=B)}m&&u.set(null,m)}N=o.instance,B=N.getAttribute("data-precedence"),A=u.get(B)||m,A===m&&u.set(null,N),u.set(B,N),this.count++,m=Kf.bind(this),N.addEventListener("load",m),N.addEventListener("error",m),A?A.parentNode.insertBefore(N,A.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(N,a.firstChild)),o.state.loading|=4}}var Id={$$typeof:O,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function eb(a,o,u,m,N,A,B,ne){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.hiddenUpdates=js(null),this.identifierPrefix=m,this.onUncaughtError=N,this.onCaughtError=A,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function bx(a,o,u,m,N,A,B,ne,ye,Ye,ct,Et){return a=new eb(a,o,u,B,ne,ye,Ye,Et),o=1,A===!0&&(o|=24),A=rr(3,null,null,o),a.current=A,A.stateNode=a,o=Qu(),o.refCount++,a.pooledCache=o,o.refCount++,A.memoizedState={element:m,isDehydrated:u,cache:o},Le(A),a}function Tx(a){return a?(a=Ra,a):Ra}function Nx(a,o,u,m,N,A){N=Tx(N),m.context===null?m.context=N:m.pendingContext=N,m=lt(o),m.payload={element:u},A=A===void 0?null:A,A!==null&&(m.callback=A),u=gt(a,m,o),u!==null&&($i(u,a,o),ft(u,a,o))}function vx(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function e0(a,o){vx(a,o),(a=a.alternate)&&vx(a,o)}function yx(a){if(a.tag===13){var o=Ui(a,67108864);o!==null&&$i(o,a,67108864),e0(a,67108864)}}var Zf=!0;function tb(a,o,u,m){var N=G.T;G.T=null;var A=he.p;try{he.p=2,t0(a,o,u,m)}finally{he.p=A,G.T=N}}function nb(a,o,u,m){var N=G.T;G.T=null;var A=he.p;try{he.p=8,t0(a,o,u,m)}finally{he.p=A,G.T=N}}function t0(a,o,u,m){if(Zf){var N=n0(m);if(N===null)Gm(a,o,m,Jf,u),Sx(a,m);else if(ab(N,a,o,u,m))m.stopPropagation();else if(Sx(a,m),o&4&&-1<sb.indexOf(a)){for(;N!==null;){var A=Qt(N);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var B=Gt(A.pendingLanes);if(B!==0){var ne=A;for(ne.pendingLanes|=2,ne.entangledLanes|=2;B;){var ye=1<<31-We(B);ne.entanglements[1]|=ye,B&=~ye}il(A),(qs&6)===0&&(Mf=Fe()+500,vd(0))}}break;case 13:ne=Ui(A,2),ne!==null&&$i(ne,A,2),jf(),e0(A,2)}if(A=n0(m),A===null&&Gm(a,o,m,Jf,u),A===N)break;N=A}N!==null&&m.stopPropagation()}else Gm(a,o,m,null,u)}}function n0(a){return a=bt(a),s0(a)}var Jf=null;function s0(a){if(Jf=null,a=bs(a),a!==null){var o=i(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=c(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Jf=a,null}function Ax(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case Pe:return 2;case nt:return 8;case it:case st:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var a0=!1,oc=null,lc=null,cc=null,Dd=new Map,Rd=new Map,uc=[],sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sx(a,o){switch(a){case"focusin":case"focusout":oc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Dd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(o.pointerId)}}function Od(a,o,u,m,N,A){return a===null||a.nativeEvent!==A?(a={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:A,targetContainers:[N]},o!==null&&(o=Qt(o),o!==null&&yx(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,N!==null&&o.indexOf(N)===-1&&o.push(N),a)}function ab(a,o,u,m,N){switch(o){case"focusin":return oc=Od(oc,a,o,u,m,N),!0;case"dragenter":return lc=Od(lc,a,o,u,m,N),!0;case"mouseover":return cc=Od(cc,a,o,u,m,N),!0;case"pointerover":var A=N.pointerId;return Dd.set(A,Od(Dd.get(A)||null,a,o,u,m,N)),!0;case"gotpointercapture":return A=N.pointerId,Rd.set(A,Od(Rd.get(A)||null,a,o,u,m,N)),!0}return!1}function Cx(a){var o=bs(a.target);if(o!==null){var u=i(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){a.blockedOn=o,vn(a.priority,function(){if(u.tag===13){var m=zi();m=qa(m);var N=Ui(u,m);N!==null&&$i(N,u,m),e0(u,m)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Qf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=n0(a.nativeEvent);if(u===null){u=a.nativeEvent;var m=new u.constructor(u.type,u);dt=m,u.target.dispatchEvent(m),dt=null}else return o=Qt(u),o!==null&&yx(o),a.blockedOn=u,!1;o.shift()}return!0}function Lx(a,o,u){Qf(a)&&u.delete(o)}function rb(){a0=!1,oc!==null&&Qf(oc)&&(oc=null),lc!==null&&Qf(lc)&&(lc=null),cc!==null&&Qf(cc)&&(cc=null),Dd.forEach(Lx),Rd.forEach(Lx)}function eh(a,o){a.blockedOn===o&&(a.blockedOn=null,a0||(a0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rb)))}var th=null;function wx(a){th!==a&&(th=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){th===a&&(th=null);for(var o=0;o<a.length;o+=3){var u=a[o],m=a[o+1],N=a[o+2];if(typeof m!="function"){if(s0(m||u)===null)continue;break}var A=Qt(u);A!==null&&(a.splice(o,3),o-=3,ho(A,{pending:!0,data:N,method:u.method,action:m},m,N))}}))}function Pd(a){function o(ye){return eh(ye,a)}oc!==null&&eh(oc,a),lc!==null&&eh(lc,a),cc!==null&&eh(cc,a),Dd.forEach(o),Rd.forEach(o);for(var u=0;u<uc.length;u++){var m=uc[u];m.blockedOn===a&&(m.blockedOn=null)}for(;0<uc.length&&(u=uc[0],u.blockedOn===null);)Cx(u),u.blockedOn===null&&uc.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var N=u[m],A=u[m+1],B=N[kn]||null;if(typeof A=="function")B||wx(u);else if(B){var ne=null;if(A&&A.hasAttribute("formAction")){if(N=A,B=A[kn]||null)ne=B.formAction;else if(s0(N)!==null)continue}else ne=B.action;typeof ne=="function"?u[m+1]=ne:(u.splice(m,3),m-=3),wx(u)}}}function r0(a){this._internalRoot=a}nh.prototype.render=r0.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(s(409));var u=o.current,m=zi();Nx(u,m,a,o,null,null)},nh.prototype.unmount=r0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Nx(a.current,2,null,a,null,null),jf(),o[Fn]=null}};function nh(a){this._internalRoot=a}nh.prototype.unstable_scheduleHydration=function(a){if(a){var o=ca();a={blockedOn:null,target:a,priority:o};for(var u=0;u<uc.length&&o!==0&&o<uc[u].priority;u++);uc.splice(u,0,a),u===0&&Cx(a)}};var Ix=e.version;if(Ix!=="19.1.0")throw Error(s(527,Ix,"19.1.0"));he.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=f(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var ib={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{Ft=sh.inject(ib),Yt=sh}catch{}}return kd.createRoot=function(a,o){if(!r(a))throw Error(s(299));var u=!1,m="",N=zp,A=$p,B=Wp,ne=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(N=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(B=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(ne=o.unstable_transitionCallbacks)),o=bx(a,1,!1,null,null,u,m,N,A,B,ne,null),a[Fn]=o.current,Vm(a),new r0(o)},kd.hydrateRoot=function(a,o,u){if(!r(a))throw Error(s(299));var m=!1,N="",A=zp,B=$p,ne=Wp,ye=null,Ye=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(N=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(B=u.onCaughtError),u.onRecoverableError!==void 0&&(ne=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ye=u.unstable_transitionCallbacks),u.formState!==void 0&&(Ye=u.formState)),o=bx(a,1,!0,o,u??null,m,N,A,B,ne,ye,Ye),o.context=Tx(null),u=o.current,m=zi(),m=qa(m),N=lt(m),N.callback=null,gt(u,N,m),u=m,o.current.lanes=u,ln(o,u),il(o),a[Fn]=o.current,Vm(a),new nh(o)},kd.version="19.1.0",kd}var Fx;function gb(){if(Fx)return l0.exports;Fx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),l0.exports=pb(),l0.exports}var xb=gb();const Eb=E2(xb);var fs=(n=>(n.INCOME="INCOME",n.EXPENSE="EXPENSE",n))(fs||{}),_a=(n=>(n.PAYABLE="PAYABLE",n.RECEIVABLE="RECEIVABLE",n))(_a||{}),ps=(n=>(n.CREATE_PAYABLE="createPayable",n.CREATE_RECEIVABLE="createReceivable",n.RECORD_PERSON_PAYMENT="recordPersonPayment",n.RECORD_USER_PAYMENT_TO_PERSON="recordUserPaymentToPerson",n))(ps||{}),xo=(n=>(n.DEBIT="DEBIT",n.CREDIT="CREDIT",n))(xo||{}),Qs=(n=>(n.MONTHLY="MONTHLY",n.WEEKLY="WEEKLY",n.QUARTERLY="QUARTERLY",n.YEARLY="YEARLY",n.CUSTOM="CUSTOM",n))(Qs||{}),Sa=(n=>(n.SALES="SALES",n.PURCHASE="PURCHASE",n))(Sa||{}),Ht=(n=>(n.PENDING="PENDING",n.PARTIALLY_PAID="PARTIALLY_PAID",n.PAID="PAID",n.OVERDUE="OVERDUE",n.CANCELLED="CANCELLED",n))(Ht||{});const P0=[{code:"bn-BD",label:" (Experimental)",geminiLang:"Bengali"},{code:"en-US",label:"English",geminiLang:"English"}],_b=n=>{const e=P0.find(t=>t.code===n);return e?e.geminiLang:"English"},bb={APP_TITLE:" - ",LOADING:" ...",SAVE_CHANGES:"  ",CANCEL:"",CLOSE_BTN:" ",BDT_SYMBOL:"",AMOUNT_PLACEHOLDER:"1000",DATE:"",VIEW_HISTORY_TOOLTIP:"  ",HISTORY_TITLE_PREFIX:" :",HISTORY_LOG_FOR_ITEM:"'{itemName}'    :",NO_HISTORY:"     ",VERSION_AT_TIMESTAMP:", :",ACTION_CREATED:" ",ACTION_UPDATED:" ",ACTION_DELETED:" ",ACTION_RESTORED:"  ",FIELD_CHANGES_FROM_TO:"'{field}'   '{oldValue}'  '{newValue}'",EDITED_BY_ON:"{userId}    {timestamp} ",INITIAL_STATE:" ",UNKNOWN_PERSON:" ",NO_SUGGESTIONS_FOUND:"   ",FORM_VALIDATION_ERROR:"    ",PHONETIC_TYPING_TOGGLE_TOOLTIP:" /   ",PHONETIC_BANGLA_ACTIVE:"  ",PHONETIC_ENGLISH_ACTIVE:"  ",LAST_MODIFIED_ON:" :",CREATED_ON:" :",FIELD_IS_REQUIRED:"",DELETED_ON:" :",MODAL_TITLE_CONFIRM_DELETE:"   ",CONFIRM_BTN_YES_DELETE:", ",CONFIRM_BTN_YES_RESTORE:",  ",CONFIRM_CREATE_INVOICE_TITLE:"   ",CONFIRM_CREATE_INVOICE_MSG:"      ?",CONFIRM_BTN_YES_CREATE:",  ",CONFIRM_BTN_COLOR_CREATE:"bg-teal-600 hover:bg-teal-700 focus:ring-teal-500",ID_LABEL:"",LOGO_TEXT:"",DEFAULT_UNIT_PIECE:"",PAGE_LABEL:"",OF_LABEL:"",TOTAL_ITEMS_LABEL:"",PREVIOUS_PAGE_BTN:"",NEXT_PAGE_BTN:"",EXPAND_MODAL_FULL_SCREEN:"  ",RESTORE_MODAL_DEFAULT_SIZE:"  ",WELCOME_TO_APP_MAIN_TITLE:" - ",WELCOME_TO_APP_SUBTITLE:"              ",KEY_FEATURES_TITLE:"  :",FEATURE_TRANSACTION_TRACKING_TITLE:" - ",FEATURE_TRANSACTION_TRACKING_DESC:"           ",FEATURE_DEBT_MANAGEMENT_TITLE:"- ",FEATURE_DEBT_MANAGEMENT_DESC:"        ,    ",FEATURE_BUDGETING_TITLE:"   ",FEATURE_BUDGETING_DESC:"            ",FEATURE_AI_ADVICE_TITLE:"AI  ",FEATURE_AI_ADVICE_DESC:"       AI    ",AI_ASSISTANT_BUTTON_LABEL:"",AI_ASSISTANT_LISTENING:"...",AI_ASSISTANT_PROCESSING:"...",AI_ASSISTANT_TRANSCRIPT_LABEL:" :",AI_ASSISTANT_ERROR_PERMISSION:"   ",AI_ASSISTANT_ERROR_NO_SPEECH:"        ",AI_ASSISTANT_ERROR_NETWORK:"       ",AI_ASSISTANT_ERROR_SERVICE_UNAVAILABLE:"     ",AI_ASSISTANT_ERROR_UNKNOWN:"       ",AI_COMMAND_INVOICE_EXTRACTED_SUCCESS:"    Modal  ...",AI_COMMAND_INVOICE_EXTRACT_FAILED:",        ",AI_ACTION_PERFORMED:"     ...",AI_INFO_PROVIDED:"  :",AI_FALLBACK_RESPONSE:",            ",AI_ACTION_ADD_INCOME:"     ...",AI_ACTION_ADD_EXPENSE:"     ...",AI_LOG_MODAL_TITLE:"AI  ",AI_LOG_CLEAR_BTN:" ",AI_LOG_TYPE_COMMAND:" ",AI_LOG_TYPE_RESPONSE:"AI  ",AI_LOG_TYPE_ERROR:"",AI_LOG_USER_COMMAND_LABEL:" ",AI_LOG_AI_RESPONSE_LABEL:"AI ",AI_LOG_INTENT_LABEL:"",AI_LOG_ACTION_DETAILS_LABEL:" ",AI_LOG_RAW_RESPONSE_LABEL:"  (Raw)",AI_LOG_NO_LOGS:"  AI    ",AI_LOG_CLEARED_SUCCESS:"AI    ",AI_VOICE_REPLAY_ENABLE_LABEL:"AI    ",AI_ASSISTANT_SCOPE_LABEL:"AI  ",AI_ASSISTANT_SCOPE_APP_SPECIFIC:"  ",AI_ASSISTANT_SCOPE_GLOBAL:"   ()",SPEECH_SYNTHESIS_NOT_SUPPORTED:"      ",SPEECH_SYNTHESIS_NOT_INITIALIZED:"    ",SPEECH_SYNTHESIS_ERROR:"   ",AI_SPEAKING_NOTIFICATION:"AI   ...",AI_SPEAKING_ERROR_NOTIFICATION:"AI    ",AI_REPLY_INVOICE_PREFILL_CONFIRM:"        ",AI_REPLY_COMMAND_UNDERSTOOD_PROCESSING:"   ,  ",AI_REPLY_CANNOT_UNDERSTAND:",        ?",AI_REPLY_GENERAL_ERROR:",      ",APP_FEATURE_TRANSACTION_TRACKING:"- ",APP_FEATURE_DEBT_MANAGEMENT:"- ",APP_FEATURE_PERSON_MANAGEMENT:" ",APP_FEATURE_BUDGETING:" ",APP_FEATURE_INVOICING:"/  (  )",APP_FEATURE_PRODUCT_MANAGEMENT:"   ",APP_FEATURE_AI_FINANCIAL_TIPS:"AI  ",APP_FEATURE_CHAT_WITH_CONTACTS:"   ",APP_FEATURE_DATA_REPORTS:" ",APP_FEATURE_USER_PROFILE_SETTINGS:"   ",APP_FEATURE_DATA_QUERY_AI:"  (  ,   /)"},Tb={ADD_NEW_TRANSACTION:"   ",DESCRIPTION:"",AMOUNT:" ",TRANSACTION_TYPE:" ",INCOME:"",EXPENSE:"",ADD_TRANSACTION_BTN:"  ",TRANSACTION_HISTORY:" ",NO_TRANSACTIONS:"     ",DELETE_TRANSACTION_TOOLTIP:" ",CONFIRM_DELETE_MSG:"       ?",DESCRIPTION_PLACEHOLDER:":  , ",ITEM_DELETED:"   ",EDIT_TRANSACTION:"  ",EDIT_TRANSACTION_TOOLTIP:"  ",TRANSACTION_UPDATED:"    ",TRANSACTION_ADDED_SUCCESS:"   !",TRANSACTION_HISTORY_MODAL_TITLE:"  ",FIELD_NAME_DESCRIPTION:"",FIELD_NAME_AMOUNT:" ",FIELD_NAME_TYPE:"",FIELD_NAME_DATE:"",FIELD_NAME_IS_DELETED:"  ?",FIELD_NAME_DELETED_AT:" ",FIELD_VALUE_TRUE:"",FIELD_VALUE_FALSE:"",MODAL_TITLE_ADD_TRANSACTION:"   ",MODAL_TITLE_ADD_INCOME:"   ",MODAL_TITLE_ADD_EXPENSE:"   ",ADD_INCOME_BTN_TEXT:"  ",ADD_EXPENSE_BTN_TEXT:"  ",HEADER_ADD_INCOME_BTN:" ",HEADER_ADD_EXPENSE_BTN:" ",MODAL_TITLE_TRANSACTION_HISTORY:" ",TRANSACTION_DESCRIPTION_NO_SUGGESTIONS:"  ",CONFIRM_RESTORE_TRANSACTION_MSG:"      ?",NO_DELETED_TRANSACTIONS:"   ",DELETED_TRANSACTIONS_TAB:" ",QUANTITY_LABEL:" ()",UNIT_LABEL:"",ADDITIONAL_NOTES_LABEL:"  ()",UNIT_PLACEHOLDER:": , ",ADDITIONAL_NOTES_PLACEHOLDER:"  ...",FIELD_REQUIRED_TOGGLE:"",SUMMARY_TOTAL_INCOME:" ",SUMMARY_TOTAL_EXPENSE:" ",SUMMARY_CURRENT_BALANCE:" ",TOTAL_TRANSACTIONS_LABEL:" ",SELECT_BANK_ACCOUNT_TRANSACTION_LABEL:"  ()",SELECT_BANK_ACCOUNT_PLACEHOLDER:"--     --",TRANSACTION_LINKED_TO_BANK_ACCOUNT:": {bankAccountName}"},Nb={DEBT_MANAGEMENT_TITLE:"- ",ADD_NEW_DEBT:" /  ",DEBT_TYPE:"/ ",PAYABLE:"   ()",RECEIVABLE:"  ()",DUE_DATE:"   ()",ADD_DEBT_BTN:"/  ",DEBT_LIST_TITLE:"/ ",RECEIVABLES_SUBTITLE:"  (  )",PAYABLES_SUBTITLE:"  (    )",NO_DEBTS_PAYABLE:"   ",NO_DEBTS_RECEIVABLE:"   ",MARK_AS_SETTLED:"   ",MARK_AS_UNSETTLED:"   ",SETTLED_ON:" :",DUE_ON:" :",STATUS:"",SETTLED_STATUS:"",UNSETTLED_STATUS:"",DELETE_DEBT_TOOLTIP:"/ ",CONFIRM_DELETE_DEBT_MSG:"   /    ?      ",DEBT_ADDED:"/   ",DEBT_UPDATED:"/    ",DEBT_DELETED:"/   ",DEBT_SETTLED_INCOME_DESC:"{personName}      ({description})  ",DEBT_SETTLED_EXPENSE_DESC:"{personName}    ({description})    ",DEBT_DESCRIPTION_PLACEHOLDER:": , ",EDIT_DEBT_MODAL_TITLE:"/  ",EDIT_DEBT_TOOLTIP:"/  ",DEBT_HISTORY_MODAL_TITLE:"/  ",FIELD_NAME_ORIGINAL_AMOUNT:" ",FIELD_NAME_REMAINING_AMOUNT:" ",FIELD_NAME_DUE_DATE:" ",FIELD_NAME_IS_SETTLED:" ",FIELD_NAME_CREATION_DATE:" ",FIELD_NAME_SETTLED_DATE:" ",MODAL_TITLE_ADD_DEBT:" /  ",DEBTS_SECTION_TITLE:"- ",TOTAL_PAYABLE:"  ()",TOTAL_RECEIVABLE:"  ()",ENTRY_NATURE_LABEL:" ",DEBT_PAYABLE_USER_OWES:"   ( )",DEBT_RECEIVABLE_USER_IS_OWED:"  ( )",PAYMENT_DATE:" ",ADD_ENTRY_BTN:"  ",DEBT_FORM_ALERT_PAYMENT_DATE_REQUIRED:"     ",PERSON_OWES_YOU_NET_DEBT_LABEL:"     ( ):",YOU_OWE_PERSON_NET_DEBT_LABEL:"     ( ):",NET_DEBT_BALANCE_ZERO_LABEL:"      ",DEBT_HISTORY_PAID_BY_LEDGER_CREDIT:"(  ()  {amount} )",DEBT_HISTORY_PAID_BY_LEDGER_DEBIT:"(  ()  {amount} )"},vb={PERSON_NAME:" ",PERSON_NAME_PLACEHOLDER:":  ",PERSON_LIST_TITLE:" ",ADD_NEW_PERSON_BTN:"   ",EDIT_PERSON_BTN_LABEL:"  ",DELETE_PERSON_BTN_LABEL:" ",PERSON_MOBILE_NUMBER:" ",PERSON_ADDRESS:"",PERSON_SHOP_NAME:"  ( )",PERSON_EMAIL_LABEL:" ()",PERSON_EMAIL_PLACEHOLDER:"person@example.com",PERSON_PROFILE_IMAGE:" ",UPLOAD_IMAGE_BTN:"  ",CHANGE_IMAGE_BTN:"  ",REMOVE_IMAGE_BTN:" ",IMAGE_PREVIEW_ALT:"  ",IMAGE_SIZE_TOO_LARGE_ERROR:"   1MB     ",FIELD_NAME_PERSON_PROFILE_IMAGE:" ",PROFILE_IMAGE_UPDATED:"    ",PROFILE_IMAGE_REMOVED:"   ",PROFILE_IMAGE_ADDED:"    ",PERSON_MOBILE_PLACEHOLDER:"01XXXXXXXXX",PERSON_ADDRESS_PLACEHOLDER:" ",PERSON_SHOP_NAME_PLACEHOLDER:" ",SAVE_PERSON_BTN:"  ",NO_PERSONS_FOUND:"     ",CONFIRM_DELETE_PERSON_MSG:"        ?          /    ",PERSON_ADDED_SUCCESS:"     ",PERSON_UPDATED_SUCCESS:"     ",PERSON_DELETED_SUCCESS:"     ",SEARCH_PERSON_PLACEHOLDER:"     ...",MANAGE_PERSONS_MODAL_TITLE:" ",ADD_PERSON_MODAL_TITLE:"   ",EDIT_PERSON_MODAL_TITLE:"  ",PERSON_HISTORY_MODAL_TITLE:"   ",SELECT_PERSON_MODAL_TITLE:"  ",SELECT_PERSON_BTN_TITLE:"  ",PERSON_NOT_SELECTED_PLACEHOLDER:"    ",FIELD_NAME_PERSON_ID:" ",FIELD_NAME_PERSON_NAME:" ",FIELD_NAME_PERSON_MOBILE:" ",FIELD_NAME_PERSON_EMAIL:"",FIELD_NAME_PERSON_ADDRESS:"",FIELD_NAME_PERSON_SHOP_NAME:" ",FIELD_NAME_CUSTOM_ALIAS:"  ()",CUSTOM_ALIAS_PLACEHOLDER:"      ",SYSTEM_LINKED_NAME_LABEL:"-   ( )",SYSTEM_NAME_INDICATOR:"( )",SYSTEM_USER_UNLINKED_FORM_EDITABLE:"        ",PERSON_DETAILS:" ",PERSON_NAME_REQUIRED:"            ",PERSON_ADDED_IMPLICITLY_DEBT:'"{personName}"        /    ',PERSON_ADDED_IMPLICITLY_FOR_ENTRY:'"{personName}"            ',PERSON_SAVED_AFTER_IMPORT:"      ",PERSON_DEBTS_HISTORY_MODAL_TITLE:"{personName}  - ",VIEW_PERSON_DEBTS_HISTORY_TOOLTIP:" -  ",NO_DEBTS_FOR_PERSON:"    /   ",MOBILE_NUMBER_DUPLICATE:"   ({mobileNumber})  {personNamesString}          ",PERSON_EMAIL_DUPLICATE:"   ({email})   {personNamesString}                ",INVALID_EMAIL_FORMAT:"      ",INVALID_MOBILE_NUMBER_FORMAT:"        (: 01XXXXXXXXX)",IMPORT_SYSTEM_USER_PROMPT:"         ?",CONFIRM_SAVE_IMPORTED_PERSON:"  ({USER_NAME}, {USER_EMAIL})         ?",IMPORT_USER_DETAILS_BTN:"  ",USER_DETAILS_IMPORTED:"     ",PERSON_RESTORED_SUCCESS:"    ",CONFIRM_RESTORE_PERSON_MSG:"      ?",NO_DELETED_PERSONS:"   ",DELETED_PERSONS_TAB:" ",PERSON_PAYMENT_RECEIVED_LEDGER_CREDIT:"   (  )",PERSON_PAYMENT_MADE_BY_USER_LEDGER_DEBIT:"   (  )",LEDGER_ENTRY_FROM_DEBT_FORM_SUCCESS:"      ",LEDGER_ENTRY_USER_PAYMENT_SUCCESS:"       ",VIEW_PERSON_LEDGER_TOOLTIP:"   ()",ADD_LEDGER_ENTRY_MODAL_TITLE:"     ",PERSON_LEDGER_HISTORY_MODAL_TITLE:"{personName}    ()",LEDGER_ENTRY_TYPE_LABEL:"  ()",LEDGER_TYPE_CREDIT_PERSON:" (     )",LEDGER_TYPE_DEBIT_PERSON:" (        )",LEDGER_BALANCE_AFTER_ENTRY:"   ",CURRENT_NET_LEDGER_BALANCE_LABEL:"  ",LEDGER_BALANCE_STATUS_DEBIT:"{amount}  ( )",LEDGER_BALANCE_STATUS_CREDIT:"{amount}  ( )",LEDGER_BALANCE_STATUS_ZERO:" ",ADD_LEDGER_ENTRY_BTN:"   ",NO_LEDGER_ENTRIES_FOUND:"       ",CONFIRM_DELETE_LEDGER_ENTRY_MSG:"       ?             ",LEDGER_ENTRY_DELETED_SUCCESS:"    ",LEDGER_ENTRY_ADDED_SUCCESS:"      ",LEDGER_ENTRY_DESCRIPTION_PLACEHOLDER:":  ,   ",LEDGER_ENTRIES_SECTION_TITLE:"  ()",LEDGER_CREDIT_INCOME_DESC:"{personName}     : {description}",LEDGER_DEBIT_EXPENSE_DESC:"{personName}    : {description}",PERSON_FINANCIAL_OVERVIEW_MODAL_TITLE:"{personName}    ",VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP:"    ",UNIFIED_FINANCIAL_HISTORY_TITLE:"   - ",NO_FINANCIAL_ACTIVITY:"       ",RECEIVABLE_PERSONS_MODAL_TITLE:"    ",TOTAL_RECEIVABLE_FROM_PERSON_LABEL:" :",NO_PERSONS_WITH_RECEIVABLES:"       ",VIEW_DETAILS_FOR_PERSON_RECEIVABLE_TOOLTIP:"{personName}   ",PAYABLE_PERSONS_MODAL_TITLE:"     ",TOTAL_PAYABLE_TO_PERSON_LABEL:" :",NO_PERSONS_WITH_PAYABLES:"         ",VIEW_DETAILS_FOR_PERSON_PAYABLE_TOOLTIP:"{personName}   ",FEATURE_PERSON_LEDGER_TITLE:" ",FEATURE_PERSON_LEDGER_DESC:"     -      "},yb={LOGIN:"",SIGNUP:"",LOGOUT:"",EMAIL:"",EMAIL_OR_MOBILE:"   ",PASSWORD:"",NAME:"",NAME_PLACEHOLDER:" ",EMAIL_PLACEHOLDER:"user@example.com  01XXXXXXXXX",PASSWORD_PLACEHOLDER:"********",DONT_HAVE_ACCOUNT:" ?",ALREADY_HAVE_ACCOUNT:"  ?",LOGIN_SUCCESS:"  ",SIGNUP_SUCCESS:"  ",LOGOUT_SUCCESS:"  ",AUTH_ERROR_GENERAL:"       ",AUTH_ERROR_INVALID_CREDENTIALS:"/    ",AUTH_ERROR_EMAIL_EXISTS:"       ",WELCOME_EMAIL_SUBJECT:"-  !",MOCKED_AUTH_WARNING_TITLE:" :",MOCKED_AUTH_WARNING_DESC:"    /          ",PLEASE_CONFIGURE_APIS:"   API  ",USER_NOT_LOGGED_IN_DATA:"  -        ",WELCOME_TO_APP:" ",PLEASE_LOGIN_SIGNUP_TO_PROCEED:"       ",PLEASE_CONFIGURE_APIS_FIRST_IF_PROBLEM:"   ,    API   ",FORGOT_PASSWORD_LINK:"  ?",FORGOT_PASSWORD_TITLE:" ",FORGOT_PASSWORD_INSTRUCTIONS:"               ",SEND_RESET_CODE_BTN:"  ",RESET_CODE_SENT_SUCCESS:"     ,          ",RESET_CODE_SENT_FAIL:"         ",RESET_CODE_LABEL:" ",RESET_CODE_PLACEHOLDER:"   ",NEW_PASSWORD_LABEL:"  (  )",CONFIRM_NEW_PASSWORD_LABEL:"   ",RESET_PASSWORD_BTN:"  ",PASSWORD_RESET_SUCCESS_AUTO_LOGIN:"           ",PASSWORDS_DONT_MATCH:"     ",INVALID_RESET_CODE:"        ",EMAIL_NOT_FOUND_ALERT:"       ",RESET_CODE_EMAIL_SUBJECT:"  ",RESET_CODE_EMAIL_MESSAGE_HTML:`
    <div style="font-family: Arial, sans-serif; color: #333;">
      <p> ,</p>
      <p>            :</p>
      <p style="font-size: 24px; font-weight: bold; color: #007bff; letter-spacing: 2px; border: 1px dashed #007bff; padding: 10px; display: inline-block;">
        {CODE}
      </p>
      <p>             ,     </p>
      <p>,<br/>{APP_TITLE} </p>
    </div>
  `.trim(),PASSWORD_CHANGED_EMAIL_SUBJECT:"    ",PASSWORD_CHANGED_EMAIL_MESSAGE_HTML:`
    <div style="font-family: Arial, sans-serif; color: #333;">
      <p> {USER_NAME},</p>
      <p> {APP_TITLE}      </p>
      <p>      ,       </p>
      <p>,<br/>{APP_TITLE} </p>
    </div>
  `.trim(),RESET_CODE_EMAIL_BODY_INTRO:" {userName},",RESET_CODE_EMAIL_BODY_REQUEST_INFO:"  {appName}       ",RESET_CODE_EMAIL_BODY_CODE_INFO:"    : ",RESET_CODE_EMAIL_BODY_EXPIRY_INFO:"      ",RESET_CODE_EMAIL_BODY_IGNORE_INFO:"      ,     ",RESET_CODE_EMAIL_BODY_THANKS:",",RESET_CODE_EMAIL_BODY_TEAM_NAME:"{appName} ",BACK_TO_LOGIN_LINK:"  ",REMEMBER_ME:"  ",CHANGE_PASSWORD_MODAL_TITLE:"  ",CURRENT_PASSWORD_LABEL:" ",ERROR_CURRENT_PASSWORD_INCORRECT:"    ",PASSWORD_CHANGE_SUCCESS:"     ",EDIT_PROFILE_MODAL_TITLE:"  ",EDIT_PROFILE_NAV_BTN_TEXT:"",EMAIL_NOT_EDITABLE:" ( )",PROFILE_UPDATE_SUCCESS:"     ",MOBILE_NUMBER_ALREADY_IN_USE:"   ({mobileNumber})            ",FACEBOOK_PROFILE_URL:"   ()",FACEBOOK_PROFILE_URL_PLACEHOLDER:"https://facebook.com/yourprofile",INVALID_FACEBOOK_URL:"       ",WELCOME_TO_APP_MAIN_TITLE:" !",WELCOME_TO_APP_SUBTITLE:"              !",KEY_FEATURES_TITLE:"  :",FEATURE_TRANSACTION_TRACKING_TITLE:" - ",FEATURE_TRANSACTION_TRACKING_DESC:"       ",FEATURE_DEBT_MANAGEMENT_TITLE:"- ",FEATURE_DEBT_MANAGEMENT_DESC:"        ,   ",FEATURE_PERSON_LEDGER_TITLE:" ",FEATURE_PERSON_LEDGER_DESC:"       ",FEATURE_BUDGETING_TITLE:"   ",FEATURE_BUDGETING_DESC:"         ",FEATURE_REPORTS_TITLE:" ",FEATURE_REPORTS_DESC:"   -  ",FEATURE_AI_ADVICE_TITLE:"AI  ",FEATURE_AI_ADVICE_DESC:"      Gemini AI   "},Ab={FINANCIAL_ADVICE_SECTION_TITLE:"  (Gemini AI)",GET_ADVICE_BTN:" ",ADVICE_ERROR:"      API        ",API_KEY_INFO:"AI    Gemini API  ",API_KEY_NOT_CONFIGURED:"Gemini API     AI   ",ADVICE_FROM_GEMINI:"Gemini AI  :"},Sb={ARCHIVE_MODAL_TITLE:" ( )",ARCHIVE_NAV_BTN:"",ITEM_ARCHIVED:"   ",STATUS_ARCHIVED:"  ",SHOW_DELETED_ITEMS_BTN:"  ",HIDE_DELETED_ITEMS_BTN:"  ",RESTORE_ITEM_TOOLTIP:"  ",ITEM_RESTORED_SUCCESS:"    "},Cb={BUDGET_MANAGEMENT_TITLE:" ",BUDGET_SETUP_MODAL_TITLE:"   ",BUDGET_CATEGORIES_SECTION_TITLE:"  ",ADD_NEW_BUDGET_CATEGORY_BTN:"   ",EDIT_BUDGET_CATEGORY_BTN:"  ",DELETE_BUDGET_CATEGORY_BTN:" ",BUDGET_CATEGORY_NAME_LABEL:" ",BUDGET_CATEGORY_NAME_PLACEHOLDER:":  , ",SAVE_BUDGET_CATEGORY_BTN:"  ",NO_BUDGET_CATEGORIES_FOUND:"      ",CONFIRM_DELETE_BUDGET_CATEGORY_MSG:"       ?       ",BUDGET_CATEGORY_ADDED_SUCCESS:"     ",BUDGET_CATEGORY_UPDATED_SUCCESS:"     ",BUDGET_CATEGORY_DELETED_SUCCESS:"     ",BUDGET_CATEGORY_NAME_REQUIRED:"  ",BUDGET_CATEGORY_EXISTS_ERROR:"     ",BUDGET_CATEGORY_HAS_BUDGETS_ERROR:"            ",BUDGETS_SECTION_TITLE:" ",ADD_NEW_BUDGET_BTN:"   ",EDIT_BUDGET_BTN:"  ",DELETE_BUDGET_BTN:" ",SELECT_BUDGET_CATEGORY_LABEL:"   ",BUDGET_AMOUNT_LABEL:" ",BUDGET_PERIOD_LABEL:"",BUDGET_START_MONTH_LABEL:" ",BUDGET_START_WEEK_LABEL:"  (,  )",BUDGET_START_QUARTER_LABEL:"  (, )",BUDGET_START_YEAR_LABEL:"",BUDGET_CUSTOM_START_DATE_LABEL:"  ()",BUDGET_CUSTOM_END_DATE_LABEL:"  ()",BUDGET_MONTHLY_PERIOD:"",BUDGET_WEEKLY_PERIOD:"",BUDGET_QUARTERLY_PERIOD:"",BUDGET_YEARLY_PERIOD:"",BUDGET_CUSTOM_PERIOD_LABEL:" ",QUARTER_1:"  (-)",QUARTER_2:"  (-)",QUARTER_3:"  (-)",QUARTER_4:"  (-)",SAVE_BUDGET_BTN:"  ",NO_BUDGETS_FOUND:"     ",CONFIRM_DELETE_BUDGET_MSG:"      ?",BUDGET_ADDED_SUCCESS:"    ",BUDGET_UPDATED_SUCCESS:"    ",BUDGET_DELETED_SUCCESS:"    ",BUDGET_SELECT_CATEGORY_PLACEHOLDER:"--    --",BUDGET_FOR_PERIOD_LABEL:"{periodDisplay}   ",BUDGET_SPENT_LABEL:" ",BUDGET_REMAINING_LABEL:"",BUDGET_PERCENTAGE_USED_LABEL:"{percentage}% ",BUDGET_OVERSPENT_LABEL:" ",BUDGET_TARGET_LABEL:"",BUDGET_EXISTS_FOR_CATEGORY_MONTH_ERROR:"        ",BUDGET_INVALID_START_DATE:"       ",BUDGET_INVALID_CUSTOM_DATE_RANGE:"         ",BUDGET_INVALID_AMOUNT:"      ",BUDGET_CATEGORY_NOT_SELECTED:"      ",MANAGE_BUDGETS_NAV_BTN:""},Lb={CHAT_WITH_PERSON_TITLE:"{personName}   ",TYPE_YOUR_MESSAGE:"  ...",SEND_MESSAGE_BTN:" ",NO_MESSAGES_YET:"{personName}      - ",MESSAGE_SENT_SUCCESS:"   ",MESSAGE_SEND_ERROR:"   ",MESSAGE_FROM_YOU:"",OPEN_CHAT_TOOLTIP:"{personName}    ",CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON:"{personName}    ,       ",INBOX_MODAL_TITLE:" ",NO_INCOMING_MESSAGES:"     ",VIEW_CHAT_HISTORY_WITH_PERSON:"{personName}    ",UNREAD_MESSAGES_FROM_PERSON:"{personName}     ",LAST_MESSAGE_FROM:"  ({personName} ):",LAST_MESSAGE_TO:"  ({personName}  ):",MESSAGES_NAV_BTN:"",MESSAGE_FAILED_TO_MARK_AS_READ:"      ",ATTACH_IMAGE_TOOLTIP:"  ",EMOJI_PICKER_TOOLTIP:"  ",IMAGE_PREVIEW_CHAT_ALT:"  ",IMAGE_SEND_ERROR:"   ",INVALID_IMAGE_FILE:"    PNG, JPG, GIF ",IMAGE_TOO_LARGE_CHAT:"  2MB     ",ADD_REACTION_TOOLTIP:"  ",MESSAGE_REACTION_ERROR:"    ",IMAGE_VIEWER_TITLE:" ",DOWNLOAD_IMAGE_BTN:"  ",CONFIRM_DELETE_MESSAGE_MSG:"      ?     ",MESSAGE_DELETED_SUCCESS:"   ",MESSAGE_DELETE_ERROR:"   ",DELETE_MESSAGE_TOOLTIP:" ",YOU_DELETED_A_MESSAGE:"    ",MESSAGE_WAS_DELETED:"   ",DELETE_CHAT_HISTORY_TOOLTIP:"  ",CONFIRM_DELETE_CHAT_HISTORY_MSG:"     {personName}        ?             ",MESSAGE_ACTION_HISTORY_DELETED:"  ",CHAT_HISTORY_DELETED_SUCCESS:"    ",RECORD_VOICE_TOOLTIP:"  ",STOP_RECORDING_TOOLTIP:"  ",AUDIO_PREVIEW_LABEL:" ",REMOVE_AUDIO_PREVIEW_TOOLTIP:" ",AUDIO_MESSAGE_LABEL:"[ ]",MAX_RECORDING_DURATION_REACHED:"    ",ERROR_AUDIO_RECORDING:"    ",RECORDING_LABEL:":",AUDIO_SEND_ERROR:"   ",VIDEO_CALL_WITH_PERSON_TITLE:"{personName}    ",LOCAL_VIDEO_PREVIEW_ARIA:"   ",REMOTE_VIDEO_ARIA:" ",MUTE_MIC_BTN:"  ",UNMUTE_MIC_BTN:"  ",START_VIDEO_BTN:"  ",STOP_VIDEO_BTN:"  ",END_CALL_BTN:"  ",VIDEO_CALL_PERMISSION_ERROR:"           ",VIDEO_CALL_DEVICE_ERROR:"            ",WAITING_FOR_PERSON_VIDEO:"{personName}     ...",OPEN_VIDEO_CALL_TOOLTIP:"{personName}     ",VIDEO_CALL_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON:"{personName}    ,        ",CONNECTING_VIDEO_CALL:"  ..."},wb={REPORT_MODAL_TITLE:"- ",MODAL_TITLE_REPORTS:" ",SELECT_DATE_RANGE:"  :",START_DATE:" ",END_DATE:" ",GENERATE_REPORT_BTN:"  ",REPORT_FOR_PERIOD:" :",TO_DATE:"",NET_BALANCE_FOR_PERIOD:"   :",NO_TRANSACTIONS_IN_RANGE:"      ",REPORT_SUMMARY_TITLE:"",SELECT_DESCRIPTIONS_BTN_TEXT:"   ()",DESCRIPTIONS_SELECTED_COUNT_TEXT:"{count}   ",SEARCH_DESCRIPTIONS_PLACEHOLDER:" ...",CLEAR_SELECTION_BTN_TEXT:"  ",REPORT_FOR_DESCRIPTIONS:"  :",NO_DESCRIPTIONS_AVAILABLE:"   ",SELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL:"   ",DESELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL:"   ",DOWNLOAD_CSV_BTN_TEXT:"CSV  ",DOWNLOAD_PDF_BTN_TEXT:"PDF  ",BANK_REPORT_MODAL_TITLE:" ",SELECT_BANK_ACCOUNT_LABEL:"   ",ALL_BANK_ACCOUNTS_OPTION:"  ",FILTER_BY_ENTRY_TYPE_LABEL:"    :",INCLUDE_DIRECT_TRANSACTIONS_LABEL:" ",INCLUDE_SALES_INVOICE_PAYMENTS_LABEL:"   ",INCLUDE_PURCHASE_BILL_PAYMENTS_LABEL:"  ",INCLUDE_DEBT_SETTLEMENTS_LABEL:"/ ",OPENING_BALANCE_LABEL:" ",CLOSING_BALANCE_LABEL:" ",TOTAL_DEBITS_LABEL:"  ()",TOTAL_CREDITS_LABEL:"  ()",REPORT_TABLE_DATE_HEADER:"",REPORT_TABLE_DESCRIPTION_HEADER:"",REPORT_TABLE_TYPE_HEADER:"",REPORT_TABLE_DEBIT_HEADER:" ()",REPORT_TABLE_CREDIT_HEADER:" ()",REPORT_TABLE_BALANCE_HEADER:"  ()",ENTRY_TYPE_INCOME:"",ENTRY_TYPE_EXPENSE:"",ENTRY_TYPE_SALES_PAYMENT:"  ",ENTRY_TYPE_PURCHASE_PAYMENT:"  ",ENTRY_TYPE_DEBT_PAID_FROM_BANK:"  ()",ENTRY_TYPE_DEBT_RECEIVED_TO_BANK:"  ()",NO_BANK_ACTIVITIES_FOR_PERIOD:"        ",BANK_ACCOUNT_INITIAL_BALANCE_DESC:"  ({date})"},Ib={RESET_APP_DATA_BTN:"   ",CONFIRM_RESET_APP_DATA_MSG:"          ?         , -    ",APP_DATA_RESET_SUCCESS:"        ...",MANAGE_SUGGESTIONS_MODAL_TITLE:"    ",MANAGE_SUGGESTIONS_BTN_TEXT:"   ",SUGGESTIONS_INCOME_TAB:" ",SUGGESTIONS_EXPENSE_TAB:" ",ADD_NEW_SUGGESTION_LABEL:"   :",ADD_SUGGESTION_BTN:"  ",SUGGESTION_PLACEHOLDER:":  ",USER_SUGGESTIONS_TITLE_INCOME:"   :",USER_SUGGESTIONS_TITLE_EXPENSE:"   :",PREDEFINED_SUGGESTIONS_TITLE_INCOME:"   (  ):",PREDEFINED_SUGGESTIONS_TITLE_EXPENSE:"   (  ):",NO_USER_SUGGESTIONS_FOR_TYPE:"         ",EDIT_SUGGESTION_TOOLTIP:"  ",DELETE_SUGGESTION_TOOLTIP:" ",CONFIRM_DELETE_SUGGESTION_MSG:"     ?",SUGGESTION_ADDED_SUCCESS:"    ",SUGGESTION_UPDATED_SUCCESS:"    ",SUGGESTION_DELETED_SUCCESS:"   ",SUGGESTION_EXISTS_ERROR:"     ",SUGGESTION_CANNOT_BE_EMPTY:"    ",SUGGESTION_ALREADY_EXISTS:"     ",EDIT_SUGGESTION_MODAL_TITLE:"  ",SELECT_ALL_SUGGESTIONS_LABEL:"  ",DESELECT_ALL_SUGGESTIONS_LABEL:"  ",MANAGE_COMPANY_PROFILES_BTN:"  ",MANAGE_COMPANY_PROFILES_MODAL_TITLE:"   ",SETTINGS_NAV_ITEM_GEMINI:"Gemini AI ",GEMINI_AI_SETTINGS_MODAL_TITLE:"Gemini AI ",GEMINI_MODEL_LABEL:" ",GEMINI_TEMPERATURE_LABEL:" ()",GEMINI_TOP_K_LABEL:"-",GEMINI_TOP_P_LABEL:"-",SAVE_GEMINI_SETTINGS_BTN:"  ",RESET_GEMINI_SETTINGS_BTN:"  ",GEMINI_SETTINGS_SAVED_SUCCESS:"Gemini    ",GEMINI_SETTINGS_RESET_SUCCESS:"Gemini         ",APP_ADMIN_SETTINGS_MODAL_TITLE:"  ",APP_ADMIN_SETTINGS_NAV_ITEM:"  ",ENABLE_SCHEMA_CHECK_LABEL:"     ",ENABLE_SCHEMA_CHECK_DESCRIPTION:" ,             /        ,           ",ENABLE_DATA_FETCH_LABEL:"     ",ENABLE_DATA_FETCH_DESCRIPTION:" ,      , -         ,           ",ADMIN_SETTINGS_SAVED_SUCCESS:"    "},Db={CREATE_SALES_INVOICE_MODAL_TITLE:"    ",CREATE_PURCHASE_BILL_MODAL_TITLE:"    ",EDIT_INVOICE_MODAL_TITLE:"  ",VIEW_INVOICE_MODAL_TITLE:"/ ",INVOICE_LIST_MODAL_TITLE:"   ",CREATE_SALES_INVOICE_NAV_BTN:"  ",CREATE_PURCHASE_BILL_NAV_BTN:"   ",VIEW_INVOICES_NAV_BTN:"/ ",INVOICE_NUMBER_LABEL:"/ ",INVOICE_DATE_LABEL:"/ ",DUE_DATE_INVOICE_LABEL:"  ",BILLED_TO_LABEL:" ()",SUPPLIER_LABEL:"",SELECT_CUSTOMER_BTN_LABEL:"  ",SELECT_SUPPLIER_BTN_LABEL:"  ",ADD_NEW_CUSTOMER_BTN_LABEL:"   ",ADD_NEW_SUPPLIER_BTN_LABEL:"   ",CUSTOMER_DETAILS_LABEL:" ",SUPPLIER_DETAILS_LABEL:" ",INVOICE_ITEMS_LABEL:" ",ADD_ITEM_BTN_LABEL:" /  ",PRODUCT_SERVICE_NAME_LABEL:" / ",PRODUCT_NAME_PLACEHOLDER:": ,  ",ITEM_DESCRIPTION_LABEL:"  ()",ITEM_DESCRIPTION_PLACEHOLDER:" ",QUANTITY_INVOICE_LABEL:"",UNIT_PRICE_LABEL:" ",ITEM_TOTAL_LABEL:" ",REMOVE_ITEM_BTN_LABEL:"",SUBTOTAL_LABEL:"",DISCOUNT_LABEL:" ()",DISCOUNT_TYPE_LABEL:" ",DISCOUNT_PERCENTAGE_LABEL:" (%)",DISCOUNT_FIXED_AMOUNT_LABEL:"  ()",DISCOUNT_VALUE_PLACEHOLDER:":   ",TAX_LABEL:"/ ()",TAX_TYPE_LABEL:" ",TAX_PERCENTAGE_LABEL:" (%)",TAX_FIXED_AMOUNT_LABEL:"  ()",TAX_VALUE_PLACEHOLDER:":   ",GRAND_TOTAL_LABEL:" ",NOTES_TERMS_LABEL:"   ()",NOTES_TERMS_PLACEHOLDER:"     ...",PAYMENT_STATUS_LABEL:" ",PAYMENT_STATUS_PENDING:"",PAYMENT_STATUS_PARTIALLY_PAID:" ",PAYMENT_STATUS_PAID:"",PAYMENT_STATUS_OVERDUE:"",PAYMENT_STATUS_CANCELLED:"",CREATE_INVOICE_BTN_LABEL:"/  ",SAVE_INVOICE_BTN_LABEL:"  ",INVOICE_CREATED_SUCCESS:"/    ",INVOICE_UPDATED_SUCCESS:"    ",INVOICE_DELETED_SUCCESS:"/   ",INVOICE_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}      : {amount}",BILL_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}      : {amount}",INVOICE_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}    : {amount}",BILL_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}    : {amount}",INVOICE_TYPE_SALES_TRANSACTION:" ",INVOICE_TYPE_PURCHASE_TRANSACTION:" ",INVOICE_CREATION_ERROR:"/    : {error}",PAYMENT_RECORDED_SUCCESS:"    ",PAYMENT_RECORDING_ERROR:"    : {error}",INVOICE_NO_ITEMS_ERROR:"/   /   ",INVOICE_ITEM_VALIDATION_ERROR:"             ",PERSON_ADDED_IMPLICITLY_INVOICE:'"{personName}"   {personType}     /   ',PERSON_TYPE_CUSTOMER:"",PERSON_TYPE_SUPPLIER:"",INVOICE_CUSTOMER_CREATION_ERROR:"/    ",INVOICE_CUSTOMER_REQUIRED_ERROR:"   /      ",INVOICE_DATE_REQUIRED_ERROR:"/  ",PAYMENT_METHOD_CASH:"",PAYMENT_METHOD_BANK_TRANSFER:" ",PAYMENT_METHOD_BKASH:"",PAYMENT_METHOD_NAGAD:" ()",PAYMENT_METHOD_ROCKET:"",PAYMENT_METHOD_CARD:"",PAYMENT_METHOD_CHEQUE:"",PAYMENT_METHOD_OTHER:"",CUSTOMER_SEARCH_PLACEHOLDER:"     ...",SUPPLIER_SEARCH_PLACEHOLDER:"     ...",NO_CUSTOMER_SUGGESTIONS:"           ",NO_SUPPLIER_SUGGESTIONS:"           ",INITIAL_PAID_AMOUNT_LABEL:"  ",PAYMENT_METHOD_LABEL:" ",PAYMENT_NOTES_LABEL:"  ()",PAYMENT_NOTES_PLACEHOLDER:":  ",REMAINING_AMOUNT_LABEL:" ",INVOICE_VIEW_DETAILS:"/  ",SEARCH_INVOICE_PLACEHOLDER:"  /   ...",NO_INVOICES_FOUND:"  /   ",INVOICE_TITLE_FOR_PRINT:"",BILL_TITLE_FOR_PRINT:" ",PAYMENT_AMOUNT_EXCEEDS_REMAINING_ERROR:"        ",PAYMENT_DATE_REQUIRED_ERROR:"  ",PAYMENT_DATE_LABEL:" ",INVOICE_STATUS_PENDING_TOOLTIP:" /    ",INVOICE_STATUS_PARTIALLY_PAID_TOOLTIP:" /     ",INVOICE_STATUS_PAID_TOOLTIP:" /  ",INVOICE_STATUS_OVERDUE_TOOLTIP:" /    ",INVOICE_STATUS_CANCELLED_TOOLTIP:" /   ",INVOICE_FROM_LABEL:"",PURCHASE_FROM_LABEL:" ",CUSTOMER_MOBILE_LABEL:" ",CUSTOMER_ADDRESS_LABEL:" ",SUPPLIER_MOBILE_LABEL:" ",SUPPLIER_ADDRESS_LABEL:" ",INVOICE_ITEMS_TABLE_HEADER_PRODUCT:"/",INVOICE_ITEMS_TABLE_HEADER_QTY:"",INVOICE_ITEMS_TABLE_HEADER_UNIT_PRICE:" ",INVOICE_ITEMS_TABLE_HEADER_TOTAL:"",PAID_AMOUNT_LABEL:" ",PAYMENT_HISTORY_LABEL:" ",RECORD_PAYMENT_BTN_LABEL:"  ",RECORD_PAYMENT_RECEIVED_BTN_LABEL:"   ",RECORD_PAYMENT_MADE_BTN_LABEL:"   ",INVOICE_ALREADY_PAID_INFO:" /   ",INVOICE_CANCELLED_NO_PAYMENT:" /      ",PAYMENT_RECORD_FOR_INVOICE_TITLE:"{invoiceNumber}  /   ",PAYMENT_AMOUNT_LABEL:" ",ADD_PAYMENT_BTN_LABEL:"  ",PRINT_INVOICE_BTN:" ",INVOICE_HOME_CARD_SUBTITLE:"        ",TOTAL_INVOICES_COUNT_LABEL:" /",NOTES_LABEL:"",ID_LABEL:"",LOGO_TEXT:"",INVOICE_TYPE_LABEL:" ",INVOICE_TYPE_SALES_LABEL:" ",INVOICE_TYPE_PURCHASE_LABEL:" ",INVOICE_TYPE_SALES_SHORT:"",INVOICE_TYPE_PURCHASE_SHORT:"",PRICE_TYPE_LABEL:" ",PRICE_TYPE_SALES:" ",PRICE_TYPE_MRP:"MRP",PRICE_TYPE_WHOLESALE:" ",PRICE_TYPE_CUSTOM:" ",PRICE_NOT_AVAILABLE:"",INVOICE_NOT_FOUND_ERROR:"   ",FILTER_ALL_INVOICES:" /",FILTER_SALES_INVOICES:" ",FILTER_PURCHASE_BILLS:" ",TOTAL_ITEMS_LABEL:" ",NO_ITEMS_FOR_FILTER:"    /  ",FILTER_ALL_STATUSES:" ",AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE:"  ()",PAYMENT_AMOUNT_INVALID_FOR_PARTIAL:"     ",PARTIAL_PAYMENT_CANT_BE_FULL:"          ",PIN_TO_REMEMBER_AS_DEFAULT:"   ",UNPIN_DEFAULT:" ",DEFAULT_VALUE_PINNED_SUCCESS:"     ",DEFAULT_VALUE_UNPINNED_SUCCESS:"    ",PIN_INVOICE_DATE_DEFAULT:"     ",UNPIN_INVOICE_DATE_DEFAULT:"   ",PIN_DUE_DATE_DEFAULT:"      ",UNPIN_DUE_DATE_DEFAULT:"    ",PIN_COMPANY_PROFILE_DEFAULT:"     ",UNPIN_COMPANY_PROFILE_DEFAULT:"   ",PIN_DISCOUNT_TYPE_DEFAULT:"     ",UNPIN_DISCOUNT_TYPE_DEFAULT:"   ",PIN_TAX_TYPE_DEFAULT:"     ",UNPIN_TAX_TYPE_DEFAULT:"   ",INVOICE_TOTAL_MUST_BE_POSITIVE_ERROR:"       "},Rb={MANAGE_PRODUCTS_MODAL_TITLE:"   ",ADD_NEW_PRODUCT_BTN:"   ",EDIT_PRODUCT_BTN:"  ",DELETE_PRODUCT_BTN:" ",PRODUCT_NAME_LABEL:" ",PRODUCT_DESCRIPTION_LABEL:"  ()",PRODUCT_UNIT_PRICE_LABEL:"  ()",SALES_PRICE_LABEL:"  /   ()",MRP_LABEL:"   (MRP) ()",WHOLESALE_PRICE_LABEL:"  ()",PRODUCT_IMAGE_LABEL:"  ()",UPLOAD_PRODUCT_IMAGE_BTN:"   ",CHANGE_PRODUCT_IMAGE_BTN:"  ",REMOVE_PRODUCT_IMAGE_BTN:" ",PRODUCT_IMAGE_PREVIEW_ALT:"  ",PRODUCT_IMAGE_SIZE_TOO_LARGE:"   512KB     ",PRODUCT_UNIT_LABEL:"",PRODUCT_UNIT_PLACEHOLDER:": , , ",NO_PRODUCTS_FOUND:"     ",CONFIRM_DELETE_PRODUCT_MSG:"      ?      ",PRODUCT_ADDED_SUCCESS:"    ",PRODUCT_UPDATED_SUCCESS:"     ",PRODUCT_DELETED_SUCCESS:"   ",PRODUCT_NAME_REQUIRED:"  ",PRODUCT_EXISTS_ERROR:"     ",SEARCH_PRODUCT_PLACEHOLDER:"   ...",CURRENT_STOCK_LABEL:" ",STOCK_UNIT_LABEL:" ",LOW_STOCK_THRESHOLD_LABEL:"  ",STOCK_HISTORY_LABEL:"  ",INITIAL_STOCK_LABEL:" ",STOCK_ADJUSTMENT_TYPE_INITIAL:" ",STOCK_ADJUSTMENT_TYPE_SALE:"",STOCK_ADJUSTMENT_TYPE_PURCHASE_RECEIVED:" ",STOCK_ADJUSTMENT_TYPE_MANUAL_IN:" ",STOCK_ADJUSTMENT_TYPE_MANUAL_OUT:" ",STOCK_ADJUSTMENT_TYPE_RETURN_CUSTOMER:" ",STOCK_ADJUSTMENT_TYPE_RETURN_SUPPLIER:" ",ADJUST_STOCK_BTN:"  ",LOW_STOCK_ALERT:" !",STOCK_QUANTITY_CHANGE_LABEL:" ",STOCK_ADJUSTMENT_NOTES_LABEL:"  ",STOCK_ADJUSTMENT_SUCCESS:"    ",MANAGE_PRODUCTS_STOCK_NAV_BTN:"  ",PRODUCT_FORM_MODAL_TITLE_ADD:"   ",PRODUCT_FORM_MODAL_TITLE_EDIT:"  ",SAVE_PRODUCT_BTN:"  ",INVALID_UNIT_PRICE_ERROR:"       (   )",INVALID_MRP_ERROR:"    MRP  (   )",INVALID_WHOLESALE_PRICE_ERROR:"       (   )",INVALID_INITIAL_STOCK_ERROR:"        (   )",INVALID_LOW_STOCK_THRESHOLD_ERROR:"         (   )",DEFAULT_UNIT_PIECE:"",STOCK_REPORT_MODAL_TITLE:" ",STOCK_REPORT_NAV_BTN:" ",COLUMN_PRODUCT_NAME:" ",COLUMN_CURRENT_STOCK:" ",COLUMN_STOCK_UNIT:"",COLUMN_LOW_STOCK_THRESHOLD:"  ",COLUMN_STOCK_STATUS:"",STOCK_STATUS_IN_STOCK:" ",STOCK_STATUS_LOW_STOCK:" ",STOCK_STATUS_OUT_OF_STOCK:" ",FILTER_BY_STOCK_STATUS:" ",ALL_PRODUCTS_FILTER:" ",SEARCH_PRODUCTS_PLACEHOLDER:"   ...",NO_PRODUCTS_FOR_REPORT:"     ",SERIAL_NO_COLUMN:" ",COLUMN_COMMITTED_FOR_SALES:" ( )",COLUMN_AVAILABLE_FOR_SALE:"  "},Ob={MANAGE_BANK_ACCOUNTS_MODAL_TITLE:"  ",MANAGE_BANK_ACCOUNTS_NAV_BTN:" ",ADD_NEW_BANK_ACCOUNT_BTN:"    ",EDIT_BANK_ACCOUNT_BTN:"   ",DELETE_BANK_ACCOUNT_BTN:"  ",BANK_ACCOUNT_FORM_MODAL_TITLE_ADD:"  ",BANK_ACCOUNT_FORM_MODAL_TITLE_EDIT:"  ",ACCOUNT_NAME_LABEL:" ",ACCOUNT_NAME_PLACEHOLDER:":  ,  ",ACCOUNT_NUMBER_LABEL:"  ()",ACCOUNT_NUMBER_PLACEHOLDER:" ",BANK_NAME_LABEL:"  ()",BANK_NAME_PLACEHOLDER:":    ",BRANCH_NAME_LABEL:"  ()",BRANCH_NAME_PLACEHOLDER:":  ",ACCOUNT_TYPE_LABEL:" ",INITIAL_BALANCE_LABEL:" ",BALANCE_EFFECTIVE_DATE_LABEL:"   ",CURRENCY_LABEL:"",ACCOUNT_NOTES_LABEL:" ()",ACCOUNT_NOTES_PLACEHOLDER:"   ...",SET_AS_DEFAULT_ACCOUNT_LABEL:"     ",SAVE_BANK_ACCOUNT_BTN:"  ",NO_BANK_ACCOUNTS_FOUND:"      ",CONFIRM_DELETE_BANK_ACCOUNT_MSG:"       ?             ",BANK_ACCOUNT_ADDED_SUCCESS:"     ",BANK_ACCOUNT_UPDATED_SUCCESS:"     ",BANK_ACCOUNT_DELETED_SUCCESS:"    ",BANK_ACCOUNT_SET_AS_DEFAULT_SUCCESS:"{accountName}       ",BANK_ACCOUNT_REMOVED_AS_DEFAULT_SUCCESS:"{accountName}    ",ACCOUNT_TYPE_SAVINGS:" ",ACCOUNT_TYPE_CURRENT:" ",ACCOUNT_TYPE_MOBILE_BANKING:" ",ACCOUNT_TYPE_CARD:" (/)",ACCOUNT_TYPE_CASH_IN_HAND:" ",ACCOUNT_TYPE_OTHER:"",BANK_ACCOUNT_NAME_REQUIRED:"  ",INITIAL_BALANCE_REQUIRED:"  ",BALANCE_EFFECTIVE_DATE_REQUIRED:"    ",SELECT_ACCOUNT_TYPE_PLACEHOLDER:"--     --",SELECT_BANK_ACCOUNT_TRANSACTION_LABEL:"  ()",SELECT_BANK_ACCOUNT_PLACEHOLDER:"--     --",TRANSACTION_LINKED_TO_BANK_ACCOUNT:": {bankAccountName}"},Pb={...bb,...Tb,...Nb,...vb,...yb,...Ab,...Sb,...Cb,...Lb,...wb,...Ib,...Db,...Rb,...Ob},p=Pb,_2="Bengali",Vx=p.APP_TITLE,Mb="shadik.netmow@gmail.com",Bo={model:"gemini-2.5-flash-preview-04-17",temperature:1,topK:64,topP:.95},Tt={TRANSACTIONS:"transactions_v5_api_backed",DEBTS:"debts_v6_api_backed",PERSONS:"persons_v1_api_backed",USER:"currentUser_v3_api_backed",PERSON_LEDGER_ENTRIES:"person_ledger_entries_v1_api_backed",USER_TRANSACTION_SUGGESTIONS:"user_transaction_suggestions_v2_api_backed",BUDGET_CATEGORIES:"budget_categories_v1_api_backed",BUDGETS:"budgets_v1_api_backed",MESSAGES:"messages_v2_api_backed",INVOICES:"invoices_v1_api_backed",PRODUCTS:"products_v1_api_backed",COMPANY_PROFILES:"company_profiles_v1_api_backed",BANK_ACCOUNTS:"bank_accounts_v1_api_backed",REMEMBER_USER:"rememberUserPreference_v1",REMEMBERED_EMAIL_OR_MOBILE:"rememberedEmailOrMobile_v1",REMEMBERED_PASSWORD:"rememberedPassword_v1",EXPENSE_FIELD_REQUIREMENTS:"expense_field_requirements_v1",GLOBAL_PHONETIC_MODE:"global_phonetic_mode_v1",INVOICE_GLOBAL_PRICE_TYPE:"invoice_global_price_type_v1",GEMINI_SETTINGS:"gemini_settings_v1",AI_ASSISTANT_LOGS:"aiAssistantLogs_v1",AI_VOICE_REPLAY_ENABLED:"aiVoiceReplayEnabled_v1",AI_ASSISTANT_SCOPE:"aiAssistantScope_v1",DEFAULT_BANK_ACCOUNT_ID:"defaultBankAccountId_v1",PIN_SALES_INVOICE_PAYMENT_STATUS:"pin_sales_invoice_payment_status_v1",PIN_SALES_INVOICE_DATE:"pin_sales_invoice_date_v1",PIN_SALES_DUE_DATE:"pin_sales_due_date_v1",PIN_SALES_COMPANY_PROFILE:"pin_sales_company_profile_v1",PIN_SALES_DISCOUNT_TYPE:"pin_sales_discount_type_v1",PIN_SALES_TAX_TYPE:"pin_sales_tax_type_v1",PIN_SALES_PAYMENT_METHOD:"pin_sales_payment_method_v1",PIN_SALES_PAYMENT_NOTES:"pin_sales_payment_notes_v1",PIN_SALES_INVOICE_NOTES:"pin_sales_invoice_notes_v1",PIN_PURCHASE_BILL_DATE:"pin_purchase_bill_date_v1",PIN_PURCHASE_DUE_DATE:"pin_purchase_due_date_v1",PIN_PURCHASE_COMPANY_PROFILE:"pin_purchase_company_profile_v1",PIN_PURCHASE_DISCOUNT_TYPE:"pin_purchase_discount_type_v1",PIN_PURCHASE_TAX_TYPE:"pin_purchase_tax_type_v1",INVOICE_COLUMN_VISIBILITY_SALES_V1:"invoiceColumnVisibility_sales_v1",INVOICE_COLUMN_VISIBILITY_PURCHASE_V1:"invoiceColumnVisibility_purchase_v1",INVOICE_ITEM_FONT_SIZE_SALES_V1:"invoiceItemFontSize_sales_v1",INVOICE_ITEM_FONT_SIZE_PURCHASE_V1:"invoiceItemFontSize_purchase_v1"},fh=["  | Salary Received","   | Business Income","  | Freelancing Income","   | Rent Received","  | Bonus Received","  | Commission Received","  () | Gift Received (Money)","  | Award/Prize Money","    | Stock Market Profit","   | Sale of Old Items","//  | bKash/Nagad/Rocket Cash In","   | Bank Withdrawal","   | Dues Recovered","   | Investment Profit"," | Scholarship","  | Consultancy Fee"," | Dividend","  | Government Grant","    | Savings Withdrawal","  | Other Income"],hh=["  | Groceries"," | Rice"," | Lentils","/ | Flour/Wheat"," (/) | Oil (Soybean/Mustard)"," | Salt"," | Sugar"," | Onion"," | Garlic"," | Ginger"," | Potato"," | Tomato"," | Eggplant/Brinjal"," | Bottle Gourd"," | Pumpkin"," | Green Chili","  | Coriander Leaves","  | Other Vegetables"," | Fish","  | Chicken","  | Beef","  | Mutton"," | Eggs"," | Milk"," | Yogurt"," | Cheese"," | Ghee","  | Turmeric Powder","  | Chili Powder","  | Cumin Powder","  | Coriander Powder","  | Garam Masala","  | Other Spices"," (/) | Sauce (Tomato/Chili)"," | Pickle"," | Biscuits"," | Chanachur/Bombay Mix","/ | Cake/Pastry"," | Bread","/ | Noodles/Pasta"," | Chips"," / | Tea Leaves/Coffee","/ | Coca-Cola/Pepsi"," | Juice","  | Mineral Water"," | Baby Food","  | House Rent","  | Electricity Bill","  | Gas Bill","  | Water Bill","  | Internet Bill","/   | Dish/Cable TV Bill","  | Trash/Waste Bill","   | Domestic Help Salary","  | Security Guard Bill","  | House Repair","  | Plumbing Cost","  | Electrical Work","  | Painting","  | Furniture Purchase"," | Refrigerator"," | Television","  | Washing Machine"," | Air Conditioner","/ | Blender/Mixer","/ | Oven/Microwave","   | Other Home Appliances"," () | Beddings (Bed Sheet, Pillow)","  | Curtains","- | Kitchenware/Utensils","   | House Cleaning Supplies (Detergent, Soap)","  | Air Freshener","  / | Mosquito Repellent Coil/Spray","  | Gardening Expense"," (/) | Soap (Body/Face)"," | Shampoo"," | Conditioner"," | Toothpaste"," | Toothbrush","/  | Deodorant/Body Spray","/ | Perfume","  | Makeup Items","  | Skin Care Products"," / | Hair Oil/Serum","  | Shaving Kit"," / | Sanitary Napkin/Tampon","/  | Salon/Beauty Parlor","  | Barber Shop"," | Shirt","/ | Pants/Trousers","- | T-Shirt"," | Panjabi"," | Saree","  | Salwar Kameez"," | Shoes","/ | Sandals/Slippers"," | Socks"," | Underwear"," | Watch","/ | Bag/Purse"," | Jewelry","/  | Eyeglasses/Contact Lens","  | Tailoring Cost","/ | Laundry/Ironing","  | Rickshaw Fare","  | Bus Fare","/  | CNG/Auto Rickshaw Fare","  | Train Ticket","/  | Launch/Steamer Ticket","  | Air Ticket"," // | Car Fuel (Petrol/Diesel)"," / | Car CNG/LPG","  | Motorcycle Fuel","  | Car Servicing","  | Car Repair"," / | Tire Change/Repair","   | Engine Oil Change","  | Car Insurance","  | Parking Fee","  | Toll Payment","  | Driver's Salary","/  | Uber/Pathao Fare","/  | Bicycle/Motorcycle Repair","  | Doctor's Fee","  | Medicine Purchase","/  | Hospital/Clinic Bill","  | Diagnostic Test (Blood Test, X-Ray, Ultrasound)","  | Pathology Test","   | Health Insurance Premium","  | Dentist Fee","  | Eye Specialist Fee"," / | Eyeglasses Purchase/Repair","/  | Vitamins/Supplements","   | First Aid Kit"," | Physiotherapy","  | Ambulance Fare","/  | School/College Fees","  | University Fees","/  | Tuition/Coaching Fees"," | Books","- | Notebooks & Pens","/  | Pencils/Color Pencils","   | Other Stationery","  | School Uniform"," () | Shoes (School)","  | School Bag"," /  | Tiffin Box/Water Bottle","  | Children's Clothing","  | Children's Toys"," | Diapers","   | Baby Wipes","   | School Tiffin Cost","   | Excursion/Study Tour Cost","   | Online Course Fee","  | Library Fee","  | Exam Fee","/  | Hostel/Residential Fee","/  | Movie Ticket","/  | Concert/Drama Ticket","  | Sports Event Ticket"," /  | Theme Park/Amusement Center","  (, ) | Streaming Service (Netflix, Hoichoi)","  () | Book Purchase (Recreational)","/ | Magazine/Comics","/   | Music/Music App Subscription","  | Video Game Purchase/Subscription","  ( , ) | Hobby Supplies (Painting, Music)","  ( /) | Travel/Vacation Cost (Local/International)","/  | Hotel/Resort Bill","   | Tourist Spot Ticket","/   | Gym/Fitness Center Membership","  | Sports Equipment","   | Club Membership Fee","  / | Outing/Food with Friends","  | Family Outing","/  | Cafe/Coffee Shop"," / | Bank Charges/Fees","   | ATM Withdrawal Charge","   | Personal Loan EMI","   | Car Loan EMI","    | Credit Card Bill Payment","   | Life Insurance Premium","   | General Insurance Premium","/  | DPS/Sanchayapatra Installment","   | Stock Market Investment","   | Mutual Fund Investment","  | Income Tax Payment","  | VAT Payment","  | Passport Fee","   | Driving License Fee","   | Trade License Fee","   | Other Government Fees","  | Lawyer Fee","   | Document Preparation Cost","  | Social Contribution/Subscription","//  | Donation to Mosque/Temple/Church","   | Charity Donation","  | Other Donations","//  /  | bKash/Nagad/Rocket Send Money/Cash Out","   | Mobile Banking Charge","  | Birthday Gift","  | Wedding Gift","  | Anniversary Gift","  | Other Gifts"," / | Eid Salami/Gift"," / | Puja Expense/Gift"," / | Christmas Expense/Gift","   | Pohela Boishakh Expense","   | Family Event Hosting","   | Party for Friends","  (/) | Flower Purchase (Gift/Decoration)","  | Greeting Card","  () | Sweets Purchase (Occasional)","   | Pet Food","   | Pet Toys","  / | Pet Grooming","  | Vet Fees","   | Pet Medicine","  / | Pet Bed/Cage","   | Pet Vaccination","  | Mobile Recharge","   () | Mobile Phone Bill (Postpaid)","  (/) | Stationery Items (Office/Home)"," / | Newspaper/Magazine","   | Electronic Gadget Repair","/  | Shoe/Bag Repair","/ / | Software/App Purchase/Subscription","  () | Online Shopping (General)","/  | Courier/Postage Fee","/ | Tips","/ | Fines/Penalties","   | Compensation for Lost Items","/  | Emergency/Unexpected Expense","/ | Photocopy/Print","  | Battery Purchase","   | SIM Card Purchase","/  | Pendrive/Memory Card"," / | Website Domain/Hosting"," () | Subscription (Other)","  () | Membership Fee (Other)"," / | Miscellaneous Taxi/Fare","  | Other Repairs","  | Miscellaneous Drinks","  | Miscellaneous Food","   | Other Personal Expenses","   | Other Transportation Costs","   | Other Household Costs","   | Other Educational Costs","   | Other Office Expenses","   | Miscellaneous Official Expenses","  | Miscellaneous Electronics","  | Miscellaneous Gifts"," | Others"];[...fh,...hh].filter((n,e,t)=>t.indexOf(n)===e).sort((n,e)=>n.localeCompare(e,"bn-BD"));const kb=2*1024*1024,Gx=["image/png","image/jpeg","image/gif"],jb=60*1e3,f0="audio/webm",Bb=["","","","","","","","","","","","","","","","","","","",""],Ub=["","","","","","",""],Fb=512*1024,Wi=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].sort((n,e)=>n.localeCompare(e,"bn-BD")),Hx={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""," ":"","":"",:""},Gc={k:"",kh:"",g:"",gh:"",ng:"",c:"",ch:"",Ch:"",chh:"",j:"",jh:"",z:"",NG:"",T:"",Th:"",D:"",Dh:"",N:"",t:"",th:"",d:"",dh:"",n:"",p:"",f:"",ph:"",b:"",bh:"",v:"",m:"",y:"",Y:"",J:"",r:"",R:"",l:"",s:"",S:"",sh:"",Sh:"",h:"",DD:"",DH:"",tt:"",NN:"",HH:"",CN:"",rN:"",o:"",a:"",aa:"",A:"",i:"",ee:"",I:"",u:"",oo:"",U:"",rri:"",e:"",E:"",oi:"",OI:"",O:"",ou:"",OU:"",amar:"",bangla:"",desh:"",taka:"",kemon:"",acchen:"",bhalo:"",dhonnobad:"",groceries:" ",salary:"",bajar:"",khoroch:"",barir:"",bhara:"",pani:"",bill:"",internet:"",mobile:"",recharge:"",jatayat:"",shikkha:"",khabar:"",oshudh:"",biddut:"",poriman:"",electric:"",".":"","?":"?","!":"!"},b2={SAVINGS:" ",CURRENT:" ",MOBILE_BANKING:" ",CARD:" (/)",CASH_IN_HAND:" ",OTHER:""},Vb={BDT:"BDT -  "},Gb={};var M0=null;function Hb(n){try{return crypto.getRandomValues(new Uint8Array(n))}catch{}try{return Gb.randomBytes(n)}catch{}if(!M0)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return M0(n)}function Yb(n){M0=n}function bp(n,e){if(n=n||Tp,typeof n!="number")throw Error("Illegal arguments: "+typeof n+", "+typeof e);n<4?n=4:n>31&&(n=31);var t=[];return t.push("$2b$"),n<10&&t.push("0"),t.push(n.toString()),t.push("$"),t.push(Ah(Hb(Jd),Jd)),t.join("")}function T2(n,e,t){if(typeof e=="function"&&(t=e,e=void 0),typeof n=="function"&&(t=n,n=void 0),typeof n>"u")n=Tp;else if(typeof n!="number")throw Error("illegal arguments: "+typeof n);function s(r){Fo(function(){try{r(null,bp(n))}catch(i){r(i)}})}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(r,i){s(function(c,d){if(c){i(c);return}r(d)})})}function N2(n,e){if(typeof e>"u"&&(e=Tp),typeof e=="number"&&(e=bp(e)),typeof n!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof n+", "+typeof e);return k0(n,e)}function v2(n,e,t,s){function r(i){typeof n=="string"&&typeof e=="number"?T2(e,function(c,d){k0(n,d,i,s)}):typeof n=="string"&&typeof e=="string"?k0(n,e,i,s):Fo(i.bind(this,Error("Illegal arguments: "+typeof n+", "+typeof e)))}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);r(t)}else return new Promise(function(i,c){r(function(d,f){if(d){c(d);return}i(f)})})}function y2(n,e){for(var t=n.length^e.length,s=0;s<n.length;++s)t|=n.charCodeAt(s)^e.charCodeAt(s);return t===0}function qb(n,e){if(typeof n!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof n+", "+typeof e);return e.length!==60?!1:y2(N2(n,e.substring(0,e.length-31)),e)}function zb(n,e,t,s){function r(i){if(typeof n!="string"||typeof e!="string"){Fo(i.bind(this,Error("Illegal arguments: "+typeof n+", "+typeof e)));return}if(e.length!==60){Fo(i.bind(this,null,!1));return}v2(n,e.substring(0,29),function(c,d){c?i(c):i(null,y2(d,e))},s)}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);r(t)}else return new Promise(function(i,c){r(function(d,f){if(d){c(d);return}i(f)})})}function $b(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);return parseInt(n.split("$")[2],10)}function Wb(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);if(n.length!==60)throw Error("Illegal hash length: "+n.length+" != 60");return n.substring(0,29)}function Kb(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);return A2(n)>72}var Fo=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function A2(n){for(var e=0,t=0,s=0;s<n.length;++s)t=n.charCodeAt(s),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(n.charCodeAt(s+1)&64512)===56320?(++s,e+=4):e+=3;return e}function Xb(n){for(var e=0,t,s,r=new Array(A2(n)),i=0,c=n.length;i<c;++i)t=n.charCodeAt(i),t<128?r[e++]=t:t<2048?(r[e++]=t>>6|192,r[e++]=t&63|128):(t&64512)===55296&&((s=n.charCodeAt(i+1))&64512)===56320?(t=65536+((t&1023)<<10)+(s&1023),++i,r[e++]=t>>18|240,r[e++]=t>>12&63|128,r[e++]=t>>6&63|128,r[e++]=t&63|128):(r[e++]=t>>12|224,r[e++]=t>>6&63|128,r[e++]=t&63|128);return r}var Au="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),fc=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Ah(n,e){var t=0,s=[],r,i;if(e<=0||e>n.length)throw Error("Illegal len: "+e);for(;t<e;){if(r=n[t++]&255,s.push(Au[r>>2&63]),r=(r&3)<<4,t>=e){s.push(Au[r&63]);break}if(i=n[t++]&255,r|=i>>4&15,s.push(Au[r&63]),r=(i&15)<<2,t>=e){s.push(Au[r&63]);break}i=n[t++]&255,r|=i>>6&3,s.push(Au[r&63]),s.push(Au[i&63])}return s.join("")}function S2(n,e){var t=0,s=n.length,r=0,i=[],c,d,f,h,_,b;if(e<=0)throw Error("Illegal len: "+e);for(;t<s-1&&r<e&&(b=n.charCodeAt(t++),c=b<fc.length?fc[b]:-1,b=n.charCodeAt(t++),d=b<fc.length?fc[b]:-1,!(c==-1||d==-1||(_=c<<2>>>0,_|=(d&48)>>4,i.push(String.fromCharCode(_)),++r>=e||t>=s)||(b=n.charCodeAt(t++),f=b<fc.length?fc[b]:-1,f==-1)||(_=(d&15)<<4>>>0,_|=(f&60)>>2,i.push(String.fromCharCode(_)),++r>=e||t>=s)));)b=n.charCodeAt(t++),h=b<fc.length?fc[b]:-1,_=(f&3)<<6>>>0,_|=h,i.push(String.fromCharCode(_)),++r;var v=[];for(t=0;t<r;t++)v.push(i[t].charCodeAt(0));return v}var Jd=16,Tp=10,Zb=16,Jb=100,Yx=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],qx=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],C2=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Qd(n,e,t,s){var r,i=n[e],c=n[e+1];return i^=t[0],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[1],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[2],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[3],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[4],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[5],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[6],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[7],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[8],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[9],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[10],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[11],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[12],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[13],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[14],r=s[i>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r+=s[768|i&255],c^=r^t[15],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],i^=r^t[16],n[e]=c^t[Zb+1],n[e+1]=i,n}function Iu(n,e){for(var t=0,s=0;t<4;++t)s=s<<8|n[e]&255,e=(e+1)%n.length;return{key:s,offp:e}}function zx(n,e,t){for(var s=0,r=[0,0],i=e.length,c=t.length,d,f=0;f<i;f++)d=Iu(n,s),s=d.offp,e[f]=e[f]^d.key;for(f=0;f<i;f+=2)r=Qd(r,0,e,t),e[f]=r[0],e[f+1]=r[1];for(f=0;f<c;f+=2)r=Qd(r,0,e,t),t[f]=r[0],t[f+1]=r[1]}function Qb(n,e,t,s){for(var r=0,i=[0,0],c=t.length,d=s.length,f,h=0;h<c;h++)f=Iu(e,r),r=f.offp,t[h]=t[h]^f.key;for(r=0,h=0;h<c;h+=2)f=Iu(n,r),r=f.offp,i[0]^=f.key,f=Iu(n,r),r=f.offp,i[1]^=f.key,i=Qd(i,0,t,s),t[h]=i[0],t[h+1]=i[1];for(h=0;h<d;h+=2)f=Iu(n,r),r=f.offp,i[0]^=f.key,f=Iu(n,r),r=f.offp,i[1]^=f.key,i=Qd(i,0,t,s),s[h]=i[0],s[h+1]=i[1]}function $x(n,e,t,s,r){var i=C2.slice(),c=i.length,d;if(t<4||t>31)if(d=Error("Illegal number of rounds (4-31): "+t),s){Fo(s.bind(this,d));return}else throw d;if(e.length!==Jd)if(d=Error("Illegal salt length: "+e.length+" != "+Jd),s){Fo(s.bind(this,d));return}else throw d;t=1<<t>>>0;var f,h,_=0,b;typeof Int32Array=="function"?(f=new Int32Array(Yx),h=new Int32Array(qx)):(f=Yx.slice(),h=qx.slice()),Qb(e,n,f,h);function v(){if(r&&r(_/t),_<t)for(var C=Date.now();_<t&&(_=_+1,zx(n,f,h),zx(e,f,h),!(Date.now()-C>Jb)););else{for(_=0;_<64;_++)for(b=0;b<c>>1;b++)Qd(i,b<<1,f,h);var L=[];for(_=0;_<c;_++)L.push((i[_]>>24&255)>>>0),L.push((i[_]>>16&255)>>>0),L.push((i[_]>>8&255)>>>0),L.push((i[_]&255)>>>0);if(s){s(null,L);return}else return L}s&&Fo(v)}if(typeof s<"u")v();else for(var T;;)if(typeof(T=v())<"u")return T||[]}function k0(n,e,t,s){var r;if(typeof n!="string"||typeof e!="string")if(r=Error("Invalid string / salt: Not a string"),t){Fo(t.bind(this,r));return}else throw r;var i,c;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(r=Error("Invalid salt version: "+e.substring(0,2)),t){Fo(t.bind(this,r));return}else throw r;if(e.charAt(2)==="$")i="\0",c=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(r=Error("Invalid salt revision: "+e.substring(2,4)),t){Fo(t.bind(this,r));return}else throw r;c=4}if(e.charAt(c+2)>"$")if(r=Error("Missing salt rounds"),t){Fo(t.bind(this,r));return}else throw r;var d=parseInt(e.substring(c,c+1),10)*10,f=parseInt(e.substring(c+1,c+2),10),h=d+f,_=e.substring(c+3,c+25);n+=i>="a"?"\0":"";var b=Xb(n),v=S2(_,Jd);function T(C){var L=[];return L.push("$2"),i>="a"&&L.push(i),L.push("$"),h<10&&L.push("0"),L.push(h.toString()),L.push("$"),L.push(Ah(v,v.length)),L.push(Ah(C,C2.length*4-1)),L.join("")}if(typeof t>"u")return T($x(b,v,h));$x(b,v,h,function(C,L){C?t(C,null):t(null,T(L))},s)}function eT(n,e){return Ah(n,e)}function tT(n,e){return S2(n,e)}const ef={setRandomFallback:Yb,genSaltSync:bp,genSalt:T2,hashSync:N2,hash:v2,compareSync:qb,compare:zb,getRounds:$b,getSalt:Wb,truncates:Kb,encodeBase64:eT,decodeBase64:tT},Wx="https://live.medha4u.com/",nT="DzhIpz0ALDkOKCx6Bqvg4RYNgrwQWpyk";async function Xi(n){var e;try{const t=await fetch(Wx,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${nT}`},body:JSON.stringify(n)}),s=await t.json();if(!t.ok||s.success===!1){console.error("API Request Failed. Status:",t.status,t.statusText,`
Backend Response:`,JSON.stringify(s,null,2),`
Original Payload:`,JSON.stringify(n,null,2));let r=s.error||`API request failed with status ${t.status}.`;throw s.success===!1&&!s.error&&(r+=" The backend indicated failure but did not provide a specific error message. Check backend logs and ensure the backend's JSON response includes an 'error' field on failure."),n.method==="tableCreate"&&s.sql&&(r+=` Attempted SQL: ${s.sql||"N/A"}`),n.method==="requestPasswordReset"&&((e=s.error)!=null&&e.includes("User not found")),new Error(r)}return s}catch(t){throw console.error("Exception during API Request. Error:",t,`
Original Payload:`,JSON.stringify(n,null,2)),t instanceof TypeError&&t.message==="Failed to fetch"?new Error(`Network error: Failed to fetch from API (${Wx}). Check API server status and CORS configuration.`):t}}async function sT(n,e,t="utf8mb4"){return Xi({method:"tableCreate",table:n,columns:e,charset:t})}const Sh={users:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"name",type:"VARCHAR(255)",options:"NOT NULL"},{name:"email",type:"VARCHAR(255)",options:"NOT NULL UNIQUE"},{name:"mobileNumber",type:"VARCHAR(255)",options:"NULL UNIQUE"},{name:"facebookProfileUrl",type:"TEXT",options:"NULL"},{name:"hashed_password",type:"VARCHAR(255)",options:"NOT NULL"},{name:"created_at",type:"TIMESTAMP",options:"DEFAULT CURRENT_TIMESTAMP"},{name:"reset_code",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"reset_token_expiry",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"enableSchemaCheckOnStartup",type:"INTEGER",options:"DEFAULT 1"},{name:"enableDataFetchOnStartup",type:"INTEGER",options:"DEFAULT 1"},{name:"defaultSalesPaymentStatus",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesInvoiceDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultSalesDueDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultSalesCompanyProfileId",type:"VARCHAR(255)",options:"NULL DEFAULT NULL"},{name:"defaultSalesDiscountType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesDiscountValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultSalesTaxType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesTaxValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultSalesPaymentMethod",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesPaymentNotes",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesInvoiceNotes",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseBillDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseDueDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseCompanyProfileId",type:"VARCHAR(255)",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseDiscountType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseDiscountValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseTaxType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseTaxValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultBankAccountId",type:"VARCHAR(255)",options:"NULL DEFAULT NULL"}],company_profiles:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"companyName",type:"TEXT",options:"NOT NULL"},{name:"address",type:"TEXT",options:"NULL"},{name:"phone",type:"TEXT",options:"NULL"},{name:"email",type:"TEXT",options:"NULL"},{name:"logoBase64",type:"MEDIUMTEXT",options:"NULL"},{name:"taxId",type:"TEXT",options:"NULL"},{name:"isDefault",type:"INTEGER",options:"DEFAULT 0"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"}],transactions:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"date",type:"TEXT"},{name:"description",type:"TEXT"},{name:"amount",type:"REAL"},{name:"type",type:"TEXT"},{name:"originalDate",type:"TEXT"},{name:"lastModified",type:"TEXT"},{name:"editHistory",type:"MEDIUMTEXT"},{name:"linkedLedgerEntryId",type:"TEXT"},{name:"bankAccountId",type:"TEXT",options:"NULL"},{name:"bankAccountName",type:"TEXT",options:"NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"}],persons:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"name",type:"TEXT"},{name:"customAlias",type:"TEXT",options:"NULL"},{name:"mobileNumber",type:"TEXT"},{name:"address",type:"TEXT"},{name:"shopName",type:"TEXT"},{name:"email",type:"TEXT",options:"NULL"},{name:"profileImage",type:"MEDIUMTEXT",options:"NULL"},{name:"systemUserId",type:"VARCHAR(255)",options:"NULL"},{name:"createdAt",type:"TEXT"},{name:"lastModified",type:"TEXT"},{name:"editHistory",type:"MEDIUMTEXT"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"}],debts:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"personId",type:"TEXT"},{name:"originalAmount",type:"REAL"},{name:"remainingAmount",type:"REAL"},{name:"description",type:"TEXT"},{name:"type",type:"TEXT"},{name:"dueDate",type:"TEXT"},{name:"isSettled",type:"INTEGER"},{name:"creationDate",type:"TEXT"},{name:"settledDate",type:"TEXT"},{name:"lastModified",type:"TEXT"},{name:"editHistory",type:"MEDIUMTEXT"}],person_ledger_entries:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"personId",type:"TEXT"},{name:"date",type:"TEXT"},{name:"type",type:"TEXT"},{name:"amount",type:"REAL"},{name:"description",type:"TEXT"},{name:"balanceAfterEntry",type:"REAL"}],user_transaction_suggestions:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"text",type:"TEXT",options:"NOT NULL"},{name:"type",type:"TEXT",options:"NOT NULL"}],budgetCategories:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"name",type:"TEXT",options:"NOT NULL"},{name:"associatedSuggestions",type:"TEXT"},{name:"createdAt",type:"TEXT"},{name:"lastModified",type:"TEXT"}],budgets:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"categoryId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"amount",type:"REAL",options:"NOT NULL"},{name:"period",type:"TEXT",options:"NOT NULL"},{name:"startDate",type:"TEXT",options:"NOT NULL"},{name:"endDate",type:"TEXT",options:"NOT NULL"},{name:"createdAt",type:"TEXT"},{name:"lastModified",type:"TEXT"}],messages:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"threadId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"actualSenderId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"actualReceiverId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"content",type:"TEXT",options:"NOT NULL"},{name:"imageContent",type:"MEDIUMTEXT",options:"NULL"},{name:"audioContent",type:"MEDIUMTEXT",options:"NULL"},{name:"timestamp",type:"TEXT",options:"NOT NULL"},{name:"isRead",type:"INTEGER",options:"NOT NULL DEFAULT 0"},{name:"reactions",type:"TEXT",options:"NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"},{name:"editHistory",type:"MEDIUMTEXT",options:"NULL"}],invoices:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"invoiceNumber",type:"VARCHAR(255)",options:"NOT NULL"},{name:"invoiceType",type:"TEXT",options:"NOT NULL"},{name:"invoiceDate",type:"TEXT",options:"NOT NULL"},{name:"dueDate",type:"TEXT"},{name:"personId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"companyProfileId",type:"VARCHAR(255)",options:"NULL"},{name:"items",type:"MEDIUMTEXT",options:"NOT NULL"},{name:"subtotal",type:"REAL",options:"NOT NULL"},{name:"discountType",type:"TEXT"},{name:"discountValue",type:"REAL"},{name:"discountAmount",type:"REAL"},{name:"taxType",type:"TEXT"},{name:"taxValue",type:"REAL"},{name:"taxAmount",type:"REAL"},{name:"totalAmount",type:"REAL",options:"NOT NULL"},{name:"notes",type:"TEXT"},{name:"paymentStatus",type:"TEXT",options:"NOT NULL"},{name:"paymentsReceived",type:"MEDIUMTEXT",options:"NULL"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"editHistory",type:"MEDIUMTEXT"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT"}],products:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"name",type:"TEXT",options:"NOT NULL"},{name:"description",type:"TEXT",options:"NULL"},{name:"unitPrice",type:"REAL",options:"NULL"},{name:"unit",type:"TEXT",options:"NULL"},{name:"productImage",type:"MEDIUMTEXT",options:"NULL"},{name:"mrp",type:"REAL",options:"NULL"},{name:"wholesalePrice",type:"REAL",options:"NULL"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"},{name:"currentStock",type:"REAL",options:"DEFAULT 0"},{name:"stockUnit",type:"TEXT",options:"NULL"},{name:"lowStockThreshold",type:"REAL",options:"DEFAULT 0"},{name:"stockHistory",type:"MEDIUMTEXT",options:"NULL"}],bank_accounts:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"accountName",type:"TEXT",options:"NOT NULL"},{name:"accountNumber",type:"TEXT",options:"NULL"},{name:"bankName",type:"TEXT",options:"NULL"},{name:"branchName",type:"TEXT",options:"NULL"},{name:"accountType",type:"TEXT",options:"NOT NULL"},{name:"initialBalance",type:"REAL",options:"NOT NULL DEFAULT 0"},{name:"balanceEffectiveDate",type:"TEXT",options:"NOT NULL"},{name:"currency",type:"TEXT",options:"NOT NULL"},{name:"notes",type:"TEXT",options:"NULL"},{name:"isDefault",type:"INTEGER",options:"DEFAULT 0"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"},{name:"editHistory",type:"MEDIUMTEXT",options:"NULL"}]};function aT(n,e){const{userId:t,...s}=n;return{...s,user_id:e}}function L2(n,e){return`user_id = '${e.replace(/'/g,"''")}' AND (${n})`}function w2(n){const e={...n};return e.hasOwnProperty("userId")&&delete e.userId,["editHistory","associatedSuggestions","imageContent","audioContent","reactions","items","paymentsReceived","logoBase64","stockHistory","productImage"].forEach(c=>{e[c]&&(Array.isArray(e[c])||typeof e[c]=="object")?e[c]=JSON.stringify(e[c]):e[c]===void 0&&(c==="items"||c==="paymentsReceived"||c==="editHistory"||c==="associatedSuggestions"||c==="stockHistory")&&(e[c]=JSON.stringify([]))}),["isSettled","isDeleted","isRead","isDefault","enableSchemaCheckOnStartup","enableDataFetchOnStartup"].forEach(c=>{typeof e[c]=="boolean"?e[c]=e[c]?1:0:e[c]===void 0&&(c==="enableSchemaCheckOnStartup"||c==="enableDataFetchOnStartup")&&(e[c]=1)}),["customAlias","systemUserId","profileImage","productImage","email","facebookProfileUrl","deletedAt","linkedLedgerEntryId","originalDate","dueDate","settledDate","reset_code","reset_token_expiry","defaultSalesPaymentStatus","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesCompanyProfileId","defaultSalesDiscountType","defaultSalesDiscountValue","defaultSalesTaxType","defaultSalesTaxValue","defaultSalesPaymentMethod","defaultSalesPaymentNotes","defaultSalesInvoiceNotes","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseCompanyProfileId","defaultPurchaseDiscountType","defaultPurchaseDiscountValue","defaultPurchaseTaxType","defaultPurchaseTaxValue","defaultBankAccountId","imageContent","audioContent","reactions","editHistory","discountType","discountValue","discountAmount","taxType","taxValue","taxAmount","notes","paymentsReceived","description","unitPrice","unit","address","phone","logoBase64","taxId","companyProfileId","stockUnit","lowStockThreshold","stockHistory","mrp","wholesalePrice","accountNumber","bankName","branchName","bankAccountId","bankAccountName"].forEach(c=>{e.hasOwnProperty(c)&&e[c]===void 0&&(c==="paymentsReceived"||c==="items"||c==="editHistory"||c==="associatedSuggestions"||c==="stockHistory"?e[c]=JSON.stringify([]):(typeof c=="string"&&(String(c).endsWith("Value")||String(c).endsWith("Offset")||c==="defaultSalesPaymentMethod"||c==="defaultSalesPaymentNotes"||c==="defaultSalesInvoiceNotes")&&e[c],e[c]=null))}),["currentStock","lowStockThreshold","initialBalance"].forEach(c=>{e[c]===void 0&&(e[c]=0)}),e}function I2(n){const e={...n};return e.user_id&&!e.userId&&(e.userId=e.user_id,delete e.user_id),["editHistory","associatedSuggestions","imageContent","audioContent","reactions","items","paymentsReceived","logoBase64","stockHistory","productImage"].forEach(c=>{if(e[c]&&typeof e[c]=="string")try{e[c]=JSON.parse(e[c])}catch(d){console.error(`Failed to parse ${c} for item:`,n,d.message),c==="imageContent"||c==="reactions"||c==="audioContent"||c==="logoBase64"||c==="productImage"?e[c]=void 0:e[c]=[]}else(e[c]===null||e[c]===void 0)&&(c==="editHistory"||c==="associatedSuggestions"||c==="items"||c==="paymentsReceived"||c==="stockHistory"?e[c]=[]:(c==="imageContent"||c==="reactions"||c==="audioContent"||c==="logoBase64"||c==="productImage")&&(e[c]=void 0))}),["isSettled","isDeleted","isRead","isDefault","enableSchemaCheckOnStartup","enableDataFetchOnStartup"].forEach(c=>{e[c]!==void 0&&e[c]!==null?e[c]=!!Number(e[c]):(c==="enableSchemaCheckOnStartup"||c==="enableDataFetchOnStartup")&&(e[c]=!0)}),e.paymentsReceived&&Array.isArray(e.paymentsReceived)&&(e.paymentsReceived=e.paymentsReceived.map(c=>{const d=parseFloat(c.amount);return{...c,amount:isNaN(d)?0:d}})),e.items&&Array.isArray(e.items)&&(e.items=e.items.map(c=>{const d=parseFloat(c.quantity),f=parseFloat(c.unitPrice),h=parseFloat(c.total);return{...c,quantity:isNaN(d)?0:d,unitPrice:isNaN(f)?0:f,total:isNaN(h)?0:h}})),["amount","originalAmount","remainingAmount","balanceAfterEntry","subtotal","discountValue","discountAmount","taxValue","taxAmount","totalAmount","unitPrice","mrp","wholesalePrice","currentStock","lowStockThreshold","initialBalance","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesDiscountValue","defaultSalesTaxValue","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseDiscountValue","defaultPurchaseTaxValue"].forEach(c=>{if(e[c]!==void 0&&e[c]!==null){const d=parseFloat(e[c]);isNaN(d)?["unitPrice","mrp","wholesalePrice","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesDiscountValue","defaultSalesTaxValue","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseDiscountValue","defaultPurchaseTaxValue"].includes(c)?e[c]=void 0:e[c]=0:e[c]=d}else["currentStock","lowStockThreshold","initialBalance"].includes(c)?e[c]=0:["unitPrice","mrp","wholesalePrice","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesDiscountValue","defaultSalesTaxValue","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseDiscountValue","defaultPurchaseTaxValue"].includes(c)?e[c]=void 0:e[c]=0}),["customAlias","systemUserId","profileImage","productImage","email","facebookProfileUrl","defaultSalesPaymentStatus","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesCompanyProfileId","defaultSalesDiscountType","defaultSalesDiscountValue","defaultSalesTaxType","defaultSalesTaxValue","defaultSalesPaymentMethod","defaultSalesPaymentNotes","defaultSalesInvoiceNotes","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseCompanyProfileId","defaultPurchaseDiscountType","defaultPurchaseDiscountValue","defaultPurchaseTaxType","defaultPurchaseTaxValue","defaultBankAccountId","deletedAt","linkedLedgerEntryId","originalDate","dueDate","settledDate","reset_code","reset_token_expiry","imageContent","audioContent","reactions","editHistory","discountType","discountValue","discountAmount","taxType","taxValue","taxAmount","notes","items","paymentsReceived","description","unitPrice","unit","address","phone","logoBase64","taxId","companyProfileId","stockUnit","stockHistory","mrp","wholesalePrice","accountNumber","bankName","branchName","bankAccountId","bankAccountName"].forEach(c=>{e[c]===null&&(c==="editHistory"||c==="items"||c==="paymentsReceived"||c==="associatedSuggestions"||c==="stockHistory"?e[c]=[]:(String(c).endsWith("Value")||String(c).endsWith("Offset")||["unitPrice","logoBase64","stockUnit","productImage","mrp","wholesalePrice","defaultSalesPaymentMethod","defaultSalesPaymentNotes","defaultSalesInvoiceNotes"].includes(c),e[c]=void 0))}),e.hasOwnProperty("stockUnit")&&(e.stockUnit===void 0||e.stockUnit===null)&&(e.stockUnit=""),!e.hasOwnProperty("stockUnit")&&n.hasOwnProperty("name")&&(e.stockUnit=""),e}async function ri(n,e,t="1",s=!1){if(!e&&n!=="users")throw new Error("User ID context required for fetching records from non-user tables.");let r=n==="users"?t:L2(t,e);["transactions","persons","invoices","products","company_profiles","bank_accounts"].includes(n)&&!s&&(r=`${r} AND (isDeleted IS NULL OR isDeleted = 0)`);const c=await Xi({method:"tableFetch",table:n,where:r});return c.success&&c.data&&Array.isArray(c.data)?c.data.map(d=>I2(d)):[]}async function Du(n,e,t){let s=t;if(n!=="users"){if(!e)throw new Error("User ID context required for inserting records into non-user tables.");s=aT(s,e)}let r=w2(s);const i=Sh[n];if(i){const c=new Set(i.map(f=>f.name.toLowerCase())),d={};for(const f in r)c.has(f.toLowerCase())&&(d[f]=r[f]);r=d}else console.warn(`Schema not found for table ${n} in apiService.insertRecord. Sending all processed fields.`);if((n==="messages"||n==="invoices"||n==="transactions"||n==="persons"||n==="debts"||n==="bank_accounts")&&!r.editHistory){const c={isDeleted:!1};let d=new Date().toISOString();n==="transactions"?(c.date=r.date,c.description=r.description,c.amount=r.amount,c.type=r.type,c.bankAccountId=r.bankAccountId,c.bankAccountName=r.bankAccountName,d=r.lastModified||r.date||d):n==="persons"?(c.name=r.name,c.mobileNumber=r.mobileNumber,c.email=r.email,d=r.lastModified||r.createdAt||d):n==="debts"?(c.personId=r.personId,c.originalAmount=r.originalAmount,c.remainingAmount=r.remainingAmount,c.type=r.type,c.isSettled=r.isSettled,c.creationDate=r.creationDate,d=r.lastModified||r.creationDate||d):n==="messages"?(c.content=r.content,c.imageContent=r.imageContent?JSON.parse(r.imageContent):void 0,c.audioContent=r.audioContent?JSON.parse(r.audioContent):void 0,d=r.timestamp||d):n==="invoices"?(c.invoiceNumber=r.invoiceNumber,c.invoiceType=r.invoiceType,c.invoiceDate=r.invoiceDate,c.dueDate=r.dueDate,c.personId=r.personId,c.companyProfileId=r.companyProfileId,c.items=r.items?JSON.parse(r.items):[],c.subtotal=r.subtotal,c.totalAmount=r.totalAmount,c.paymentStatus=r.paymentStatus,c.paymentsReceived=r.paymentsReceived?JSON.parse(r.paymentsReceived):[],d=r.lastModified||r.createdAt||d):n==="bank_accounts"&&(c.accountName=r.accountName,c.accountType=r.accountType,c.initialBalance=r.initialBalance,c.balanceEffectiveDate=r.balanceEffectiveDate,c.isDefault=r.isDefault,c.currency=r.currency,d=r.lastModified||r.createdAt||d);const f={timestamp:d,action:"created",userId:e,snapshot:c};r.editHistory=JSON.stringify([f])}return Xi({method:"tableInsert",table:n,fields:r})}async function gi(n,e,t,s){if(!e&&n!=="users")throw new Error("User ID context required for updating records in non-user tables.");let r=w2(t);const i=Sh[n];if(i){const d=new Set(i.map(h=>h.name.toLowerCase())),f={};for(const h in r)d.has(h.toLowerCase())&&(f[h]=r[h]);r=f}else console.warn(`Schema not found for table ${n} in apiService.updateRecord. Sending all processed fields.`);const c=n==="users"?s:L2(s,e);return Xi({method:"tableUpdate",table:n,fields:r,where:c})}async function rT(n){if(!n)throw new Error("User ID required for fetching suggestions.");const e="user_transaction_suggestions";try{return await ri(e,n,"1")}catch(t){return console.warn(`Could not fetch suggestions for user ${n}. Error: ${t.message}`),[]}}let h0="pending";async function iT(){console.log("Starting shared table initialization and schema check..."),h0="pending";const n=[];for(const e in Sh){const t=Sh[e],s=(async()=>{var r,i;try{const c=await sT(e,t);if(console.log(`Shared table ${e} creation/check response: SQL: ${c.sql||"N/A"}, Success: ${c.success}, MySQL Error: ${c.error||"N/A"}`),c.success===!1&&!((r=c.error)!=null&&r.toLowerCase().includes("already exists")||(i=c.error)!=null&&i.toLowerCase().includes("table exist")))throw new Error(c.error||`Backend reported failure for table ${e}. SQL: ${c.sql||"N/A"}`);const d=await Xi({method:"describeTable",table:e});if(!d.success||!Array.isArray(d.structure))throw console.warn(`Could not describe table '${e}'. Skipping column check. Response:`,d),new Error(`Failed to describe table '${e}'. Cannot verify or add columns.`);const f=d.structure.map(h=>h.Field.toLowerCase());for(const h of t)if(!f.includes(h.name.toLowerCase())){console.log(`Column '${h.name}' missing in table '${e}'. Attempting to add.`);const _=await Xi({method:"columnAdd",table:e,column:{name:h.name,type:h.type,options:h.options||""}});if(console.log(`Add column '${h.name}' to '${e}': Success: ${_.success}, SQL: ${_.sql||"N/A"}, Error: ${_.error||"N/A"}`),_.success===!1){if(console.warn(`Failed to add column '${h.name}' to table '${e}'. Error: ${_.error}. This might cause issues.`),(e==="transactions"||e==="persons"||e==="debts"||e==="messages"||e==="invoices"||e==="company_profiles"||e==="products"||e==="bank_accounts")&&(h.name==="editHistory"||h.name==="logoBase64"||h.name==="stockHistory"||h.name==="productImage"))throw new Error(`Critical column '${h.name}' (MEDIUMTEXT) could not be added to '${e}'.`);if(e==="persons"&&(h.name==="profileImage"||h.name==="email"||h.name==="customAlias"||h.name==="systemUserId"))throw new Error(`Critical column '${h.name}' could not be added to 'persons' table.`);if(e==="users"&&(h.name==="reset_code"||h.name==="reset_token_expiry"||h.name.startsWith("defaultSales")||h.name.startsWith("defaultPurchase")||h.name==="defaultBankAccountId"))throw new Error(`Critical column '${h.name}' could not be added to 'users' table.`);if(e==="users"&&h.name==="mobileNumber")throw new Error("Critical column 'mobileNumber' could not be added to 'users' table.");if(e==="users"&&h.name==="facebookProfileUrl")throw new Error("Critical column 'facebookProfileUrl' could not be added to 'users' table.");if(e==="messages"&&(h.name==="threadId"||h.name==="actualSenderId"||h.name==="actualReceiverId"||h.name==="imageContent"||h.name==="reactions"||h.name==="audioContent"||h.name==="isDeleted"||h.name==="deletedAt"))throw new Error(`Critical column '${h.name}' could not be added to 'messages' table.`);if(e==="invoices"&&(h.name==="items"||h.name==="paymentsReceived"||h.name==="companyProfileId"||h.name==="invoiceType"))throw new Error(`Critical column '${h.name}' could not be added to 'invoices' table.`);if(e==="products"&&(h.name==="currentStock"||h.name==="stockUnit"||h.name==="lowStockThreshold"||h.name==="stockHistory"||h.name==="productImage"||h.name==="mrp"||h.name==="wholesalePrice"))throw new Error(`Critical column '${h.name}' could not be added to 'products' table.`);if(e==="transactions"&&(h.name==="bankAccountId"||h.name==="bankAccountName"))throw new Error(`Critical column '${h.name}' could not be added to 'transactions' table.`)}}}catch(c){throw console.error(`Error processing table '${e}':`,c.message),new Error(`Setup failed for table '${e}': ${c.message}`)}})();n.push(s)}try{await Promise.all(n),h0="success",console.log("All shared table initializations and alterations successfully completed or reported success by backend.")}catch(e){throw h0="failed",console.error("One or more shared table initializations/alterations failed:",e),e}}async function oT(n){if(!n||!n.trim())return null;const e=n.trim();try{const t=await Xi({method:"tableFetch",table:"users",where:`mobileNumber = '${e.replace(/'/g,"''")}'`});if(t.success&&t.data&&Array.isArray(t.data)&&t.data.length>0){const s=I2(t.data[0]);return{id:s.id,name:s.name,email:s.email,mobileNumber:s.mobileNumber}}return null}catch(t){return console.error(`Error fetching user by mobile ${e}:`,t.message),null}}const Np=10,lT=async(n,e,t)=>{const s=e.toLowerCase();try{const r=await ri("users",s,`email = '${s.replace(/'/g,"''")}'`);if(r&&r.length>0)throw new Error(p.AUTH_ERROR_EMAIL_EXISTS);const i=await ef.hash(t,Np),d={id:"user_"+Date.now().toString()+Math.random().toString(36).substring(2,9),name:n,email:s,hashed_password:i,enableSchemaCheckOnStartup:!0,enableDataFetchOnStartup:!0},f=await Du("users",s,d);if(f.success)return{id:d.id,name:d.name,email:d.email,enableSchemaCheckOnStartup:!0,enableDataFetchOnStartup:!0};throw typeof f.error=="string"&&(f.error.includes("Duplicate entry")&&f.error.toLowerCase().includes("for key")&&f.error.toLowerCase().includes("email")||f.error.includes("1062"))?new Error(p.AUTH_ERROR_EMAIL_EXISTS):new Error(f.error||"User registration failed via tableInsert.")}catch(r){throw r.message===p.AUTH_ERROR_EMAIL_EXISTS?r:typeof r.message=="string"&&(r.message.includes("Duplicate entry")&&r.message.toLowerCase().includes("for key")&&r.message.toLowerCase().includes("email")||r.message.includes("1062"))?new Error(p.AUTH_ERROR_EMAIL_EXISTS):new Error(r.message||p.AUTH_ERROR_GENERAL)}},Kx=async(n,e)=>{const t=n.includes("@")?n.toLowerCase():n;n.includes("@")?`${t.replace(/'/g,"''")}`:`${n.replace(/'/g,"''")}`;const r=t.replace(/'/g,"''"),i=n.replace(/'/g,"''"),c=`(email = '${r}' OR mobileNumber = '${i}')`;try{const d=await ri("users",n,c);if(!d||d.length===0)throw new Error(p.AUTH_ERROR_INVALID_CREDENTIALS);const f=d[0];if(!f.hashed_password)throw new Error(p.AUTH_ERROR_GENERAL+" (User data incomplete)");if(await ef.compare(e,f.hashed_password)){const{hashed_password:_,...b}=f;return b}else throw new Error(p.AUTH_ERROR_INVALID_CREDENTIALS)}catch(d){throw d.message===p.AUTH_ERROR_INVALID_CREDENTIALS||d.message.includes(p.AUTH_ERROR_GENERAL)?d:new Error(p.AUTH_ERROR_INVALID_CREDENTIALS)}},cT=async n=>{const e=n.toLowerCase();try{const t=await Xi({method:"tableFetch",table:"users",where:`email='${e.replace(/'/g,"''")}'`});return t.success&&Array.isArray(t.data)&&t.data.length>0}catch{return!1}},uT=async(n,e)=>{const t=n.toLowerCase(),s=new Date(Date.now()+10*60*1e3);try{const r=await Xi({method:"tableUpdate",table:"users",fields:{reset_code:e,reset_token_expiry:s.toISOString()},where:`email='${t.replace(/'/g,"''")}'`});if(!r.success)throw new Error(r.error||"Failed to store reset code.")}catch(r){throw new Error(r.message||"Failed to store reset code due to an unexpected issue.")}},dT=async(n,e)=>{const t=p.RESET_CODE_EMAIL_SUBJECT,s=p.RESET_CODE_EMAIL_MESSAGE_HTML.replace("{CODE}",e).replace("{APP_TITLE}",Vx),r=`From: "${Vx}" <no-reply@medha4u.com>\r
Content-Type: text/html; charset=UTF-8\r
MIME-Version: 1.0`;try{const i=await Xi({method:"sendEmail",to:n,subject:t,message:s,headers:r});if(!i.success)throw new Error(i.message||i.error||"Failed to send reset email via backend.")}catch(i){throw i.message&&i.message.includes("API Request Failed"),new Error(i.message||"Failed to send reset email due to an unexpected issue.")}},fT=async(n,e,t)=>{var r;const s=n.toLowerCase();try{const i=await ef.hash(t,Np),c=await Xi({method:"tableUpdate",table:"users",fields:{hashed_password:i,reset_code:null,reset_token_expiry:null},where:`email='${s.replace(/'/g,"''")}' AND reset_code='${e.replace(/'/g,"''")}'`});if(!c.success||c.success&&((r=c.data)==null?void 0:r.affectedRows)===0){let d=p.INVALID_RESET_CODE;throw!c.success&&c.error&&(c.error.toLowerCase().includes("expired")?d=p.INVALID_RESET_CODE:!c.error.toLowerCase().includes("invalid")&&!c.error.toLowerCase().includes("no user found")&&(d=c.error)),new Error(d)}}catch(i){throw i.message===p.INVALID_RESET_CODE||i.message.includes(p.AUTH_ERROR_GENERAL)?i:new Error(p.AUTH_ERROR_GENERAL+(i.message?`: ${i.message}`:""))}},hT=async(n,e,t,s)=>{const r=e.toLowerCase();try{const i=await ri("users",r,`id = '${n.replace(/'/g,"''")}' AND email = '${r.replace(/'/g,"''")}'`);if(!i||i.length===0)throw new Error(p.AUTH_ERROR_GENERAL+" (   )");const c=i[0];if(!c.hashed_password)throw new Error(p.AUTH_ERROR_GENERAL+" (  )");if(!await ef.compare(t,c.hashed_password))throw new Error(p.ERROR_CURRENT_PASSWORD_INCORRECT);const f=await ef.hash(s,Np),h=await gi("users",r,{hashed_password:f},`id = '${c.id}'`);if(!h.success)throw new Error(h.error||"    ")}catch(i){throw i.message===p.ERROR_CURRENT_PASSWORD_INCORRECT||i.message.includes(p.AUTH_ERROR_GENERAL)?i:new Error(p.AUTH_ERROR_GENERAL+(i.message?`: ${i.message}`:""))}},mT=async(n,e,t)=>{const s={};if(t.name!==void 0&&(s.name=t.name),t.mobileNumber!==void 0&&(s.mobileNumber=t.mobileNumber===null||t.mobileNumber.trim()===""?null:t.mobileNumber.trim()),t.facebookProfileUrl!==void 0&&(s.facebookProfileUrl=t.facebookProfileUrl===null||t.facebookProfileUrl.trim()===""?null:t.facebookProfileUrl.trim()),t.enableSchemaCheckOnStartup!==void 0&&(s.enableSchemaCheckOnStartup=t.enableSchemaCheckOnStartup),t.enableDataFetchOnStartup!==void 0&&(s.enableDataFetchOnStartup=t.enableDataFetchOnStartup),t.defaultSalesPaymentStatus!==void 0&&(s.defaultSalesPaymentStatus=t.defaultSalesPaymentStatus),t.defaultSalesInvoiceDateOffset!==void 0&&(s.defaultSalesInvoiceDateOffset=t.defaultSalesInvoiceDateOffset),t.defaultSalesDueDateOffset!==void 0&&(s.defaultSalesDueDateOffset=t.defaultSalesDueDateOffset),t.defaultSalesCompanyProfileId!==void 0&&(s.defaultSalesCompanyProfileId=t.defaultSalesCompanyProfileId),t.defaultSalesDiscountType!==void 0&&(s.defaultSalesDiscountType=t.defaultSalesDiscountType),t.defaultSalesDiscountValue!==void 0&&(s.defaultSalesDiscountValue=t.defaultSalesDiscountValue),t.defaultSalesTaxType!==void 0&&(s.defaultSalesTaxType=t.defaultSalesTaxType),t.defaultSalesTaxValue!==void 0&&(s.defaultSalesTaxValue=t.defaultSalesTaxValue),t.defaultSalesPaymentMethod!==void 0&&(s.defaultSalesPaymentMethod=t.defaultSalesPaymentMethod),t.defaultSalesPaymentNotes!==void 0&&(s.defaultSalesPaymentNotes=t.defaultSalesPaymentNotes),t.defaultSalesInvoiceNotes!==void 0&&(s.defaultSalesInvoiceNotes=t.defaultSalesInvoiceNotes),t.defaultPurchaseBillDateOffset!==void 0&&(s.defaultPurchaseBillDateOffset=t.defaultPurchaseBillDateOffset),t.defaultPurchaseDueDateOffset!==void 0&&(s.defaultPurchaseDueDateOffset=t.defaultPurchaseDueDateOffset),t.defaultPurchaseCompanyProfileId!==void 0&&(s.defaultPurchaseCompanyProfileId=t.defaultPurchaseCompanyProfileId),t.defaultPurchaseDiscountType!==void 0&&(s.defaultPurchaseDiscountType=t.defaultPurchaseDiscountType),t.defaultPurchaseDiscountValue!==void 0&&(s.defaultPurchaseDiscountValue=t.defaultPurchaseDiscountValue),t.defaultPurchaseTaxType!==void 0&&(s.defaultPurchaseTaxType=t.defaultPurchaseTaxType),t.defaultPurchaseTaxValue!==void 0&&(s.defaultPurchaseTaxValue=t.defaultPurchaseTaxValue),Object.keys(s).length===0)return{};try{if(s.mobileNumber&&s.mobileNumber.trim()!==""){const i=await ri("users",e,`mobileNumber = '${s.mobileNumber.replace(/'/g,"''")}' AND id != '${n.replace(/'/g,"''")}'`);if(i&&i.length>0)throw new Error(p.MOBILE_NUMBER_ALREADY_IN_USE.replace("{mobileNumber}",s.mobileNumber))}const r=await gi("users",e,s,`id = '${n.replace(/'/g,"''")}'`);if(!r.success)throw r.error&&r.error.toLowerCase().includes("duplicate entry")&&r.error.toLowerCase().includes("mobilenumber")?new Error(p.MOBILE_NUMBER_ALREADY_IN_USE.replace("{mobileNumber}",s.mobileNumber||"")):new Error(r.error||"    ");return s}catch(r){throw r}},pT=async(n,e)=>{const t=p.WELCOME_EMAIL_SUBJECT,s=p.APP_TITLE,r=`
    <html>
      <body style="font-family: Arial, sans-serif; line-height: 1.6;">
        <p> ${e},</p>
        <p> '${s}'   !</p>
        <p>             Gemini AI      </p>
        <p>!</p>
        <p>,<br/><strong>${s} </strong></p>
      </body>
    </html>`,i=`From: "${s}" <no-reply@medha4u.com>\r
Content-Type: text/html; charset=UTF-8\r
MIME-Version: 1.0`;try{(await Xi({method:"sendEmail",table:"system_email_action",to:n,subject:t,message:r,headers:i})).success}catch{}},Xx=async(n,e)=>{const t=p.PASSWORD_CHANGED_EMAIL_SUBJECT,s=p.APP_TITLE,r=e||"",i=p.PASSWORD_CHANGED_EMAIL_MESSAGE_HTML.replace(/{USER_NAME}/g,r).replace(/{APP_TITLE}/g,s),c=`From: "${s}" <no-reply@medha4u.com>\r
Content-Type: text/html; charset=UTF-8\r
MIME-Version: 1.0`;try{(await Xi({method:"sendEmail",to:n,subject:t,message:i,headers:c})).success}catch{}},D2=D.createContext(void 0),gT=({children:n})=>{const[e,t]=D.useState([]),s=D.useCallback((i,c,d=5e3)=>{const f=Math.random().toString(36).substring(2,9);t(h=>[...h,{id:f,message:i,type:c,duration:d}]),d>0&&setTimeout(()=>{r(f)},d)},[]),r=D.useCallback(i=>{t(c=>c.filter(d=>d.id!==i))},[]);return l.jsx(D2.Provider,{value:{notifications:e,addNotification:s,removeNotification:r},children:n})},ur=()=>{const n=D.useContext(D2);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},R2=D.createContext(void 0),xT=({children:n})=>{const[e,t]=D.useState(null),[s,r]=D.useState(!0),[i,c]=D.useState(null),{addNotification:d}=ur();D.useEffect(()=>{(async()=>{console.log("AuthContext: Initializing authentication and tables..."),r(!0),c(null);let I=null;try{const j=localStorage.getItem(Tt.USER);if(j)try{const O=JSON.parse(j);O.enableSchemaCheckOnStartup=O.enableSchemaCheckOnStartup===void 0?!0:O.enableSchemaCheckOnStartup,O.enableDataFetchOnStartup=O.enableDataFetchOnStartup===void 0?!0:O.enableDataFetchOnStartup,I=O,t(O),console.log("AuthContext: Successfully loaded active user session from localStorage.")}catch(O){console.error("AuthContext: Failed to parse stored user data. Clearing stored session.",O),localStorage.removeItem(Tt.USER),t(null)}else t(null);await iT(),console.log("AuthContext: Shared tables initialized (or skipped based on setting)."),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log('AuthContext: Cleaned up legacy "remember me" keys from localStorage.')}catch(j){console.error("AuthContext: Error during app initialization (auth or tables):",j);const O=`    : ${j.message}.          `;c(O),localStorage.removeItem(Tt.USER),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),t(null)}finally{r(!1),console.log("AuthContext: Initialization complete. isAuthLoading set to false.")}})()},[]);const f=async(R,I)=>{console.log("AuthContext: login called. Email/Mobile:",R),r(!0),c(null);try{const j=await Kx(R,I),O={...j,enableSchemaCheckOnStartup:j.enableSchemaCheckOnStartup===void 0?!0:j.enableSchemaCheckOnStartup,enableDataFetchOnStartup:j.enableDataFetchOnStartup===void 0?!0:j.enableDataFetchOnStartup};return t(O),localStorage.setItem(Tt.USER,JSON.stringify(O)),console.log(`AuthContext: User logged in and "${Tt.USER}" set.`),d(p.LOGIN_SUCCESS,"success"),r(!1),!0}catch(j){let O=j.message;return j.message&&j.message.includes("Initialization failed for table")&&(O=`  ,       : ${j.message}`),c(O),d(O,"error"),t(null),localStorage.removeItem(Tt.USER),console.log("AuthContext: Login failed. Error:",O),r(!1),!1}},h=async(R,I,j)=>{r(!0),c(null);try{const O=await lT(R,I,j),U={...O,enableSchemaCheckOnStartup:O.enableSchemaCheckOnStartup===void 0?!0:O.enableSchemaCheckOnStartup,enableDataFetchOnStartup:O.enableDataFetchOnStartup===void 0?!0:O.enableDataFetchOnStartup};t(U),localStorage.setItem(Tt.USER,JSON.stringify(U)),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log(`AuthContext: Signup successful. "${Tt.USER}" set, and legacy "remember me" keys cleared.`);try{await pT(U.email,U.name||U.email),d(p.SIGNUP_SUCCESS,"success")}catch{d(p.SIGNUP_SUCCESS+" (      )","warning")}return r(!1),!0}catch(O){let U=O.message;return O.message&&O.message.includes("Initialization failed for table")&&(U=`  ,       : ${O.message}`),c(U),d(U,"error"),t(null),localStorage.removeItem(Tt.USER),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log("AuthContext: Signup failed. Cleared all relevant keys. Error:",U),r(!1),!1}},_=()=>{console.log("AuthContext: logout called."),t(null),localStorage.removeItem(Tt.USER),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log('AuthContext: Logged out. Cleared active session and any legacy "remember me" keys.'),d(p.LOGOUT_SUCCESS,"success")},b=()=>{c(null)},v=async R=>{r(!0),c(null);try{if(!await cT(R))return r(!1),{success:!1,message:p.EMAIL_NOT_FOUND_ALERT};const j=Math.floor(1e5+Math.random()*9e5).toString();return await uT(R,j),await dT(R,j),r(!1),{success:!0}}catch(I){let j=I.message||p.RESET_CODE_SENT_FAIL;return c(j),r(!1),{success:!1,message:j}}},T=async(R,I,j)=>{r(!0),c(null);try{await fT(R,I,j);const O=await Kx(R,j),U={...O,enableSchemaCheckOnStartup:O.enableSchemaCheckOnStartup===void 0?!0:O.enableSchemaCheckOnStartup,enableDataFetchOnStartup:O.enableDataFetchOnStartup===void 0?!0:O.enableDataFetchOnStartup};t(U),localStorage.setItem(Tt.USER,JSON.stringify(U)),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log('AuthContext: Password reset and auto-login. User data stored, legacy "remember me" keys cleared.'),d(p.PASSWORD_RESET_SUCCESS_AUTO_LOGIN,"success",7e3),await Xx(R,U.name)}catch(O){let U=O.message||p.AUTH_ERROR_GENERAL;throw c(U),d(U,"error"),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),O}finally{r(!1)}},C=async(R,I)=>{if(!e||!e.id||!e.email)throw d("   ","error"),new Error("User not logged in");r(!0),c(null);try{await hT(e.id,e.email,R,I),d(p.PASSWORD_CHANGE_SUCCESS,"success"),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),await Xx(e.email,e.name)}catch(j){const O=j.message||p.AUTH_ERROR_GENERAL;throw c(O),d(O,"error"),j}finally{r(!1)}},L=async R=>{if(!e||!e.id)throw d("   ","error"),new Error("User not logged in for profile update.");r(!0),c(null);try{const I=await mT(e.id,e.email,R),j={...e,...I,enableSchemaCheckOnStartup:I.enableSchemaCheckOnStartup===void 0?e.enableSchemaCheckOnStartup===void 0?!0:e.enableSchemaCheckOnStartup:I.enableSchemaCheckOnStartup,enableDataFetchOnStartup:I.enableDataFetchOnStartup===void 0?e.enableDataFetchOnStartup===void 0?!0:e.enableDataFetchOnStartup:I.enableDataFetchOnStartup};t(j),localStorage.setItem(Tt.USER,JSON.stringify(j)),console.log("AuthContext: User profile updated. New data stored in localStorage for key:",Tt.USER),d(p.PROFILE_UPDATE_SUCCESS,"success")}catch(I){const j=I.message||p.AUTH_ERROR_GENERAL;throw c(j),d(j,"error"),I}finally{r(!1)}};return l.jsx(R2.Provider,{value:{currentUser:e,isAuthLoading:s,authError:i,login:f,signup:h,logout:_,clearAuthError:b,requestPasswordReset:v,resetPasswordWithCode:T,changePassword:C,updateCurrentUserData:L},children:n})},Nc=()=>{const n=D.useContext(R2);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},tf=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6-2.292m0 0V21M12 12.75H18"})}),kl=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.071M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),Zx=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 3c-.397 0-.789.026-1.175.073M12 3a8.966 8.966 0 0 1-6.284 2.288"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12c0 .082.002.164.005.245M3 12a9 9 0 0 1 2.977-6.739"})]}),mh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ph=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"})}),gh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),ET=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),Wc=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Jx=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),j0=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})]}),B0=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H9"})}),Ch=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3.375 19.5h17.25c.621 0 1.125-.504 1.125-1.125V6.375c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125Z"})}),Qx=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125V6.375c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v.001c0 .621.504 1.125 1.125 1.125Z"})}),e1=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),t1=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),n1=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"})}),xh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),s1=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6.75h.008v.008h-.008V6.75Zm.75 0V12m0 2.25h.008v.008h-.008v-.008Zm0 0V12m2.25-5.25h.008v.008H18.75V6.75Zm.75 0V12m0 2.25h.008v.008h-.008v-.008Zm0 0V12m-2.25 5.25h.008v.008H18.75V17.25Zm.75 0V12M15 6.75H9.75M15 12H9.75M15 17.25H9.75M9 6.75H6.75M9 12H6.75M9 17.25H6.75M6 6.75V12m0 5.25V12"})]}),vp=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.646.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 1.905c-.007.378.138.75.431.99l1.005.828c.282.231.398.6.258 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.333.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .258-1.43l1.005-.828c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-1.905c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 0 1-.258-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),m0=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75v6m3-3h-6"})]}),Yd=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068M15.75 21H9c-2.625 0-4.875-2.25-4.875-5V7.5c0-2.625 2.25-4.875 4.875-4.875h7.5c2.625 0 4.875 2.25 4.875 4.875v3.75M9 12h9m-9 3h4.5m-4.5 3h1.5"})}),a1=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6M9 15.75h6M5.25 21v-3.375c0-.621.504-1.125 1.125-1.125h11.25c.621 0 1.125.504 1.125 1.125V21"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.75h.008v.008H6V6.75Zm0 4.5h.008v.008H6v-.008Zm0 4.5h.008v.008H6v-.008Zm0 4.5h.008v.008H6V20.25Zm12-13.5h.008v.008h-.008V6.75Zm0 4.5h.008v.008h-.008v-.008Zm0 4.5h.008v.008h-.008v-.008Zm0 4.5h.008v.008h-.008V20.25Z"})]}),Wd=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),p0=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),zh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),Su=({trigger:n,children:e,menuWidthClass:t="w-56",menuMaxHeightClass:s="max-h-96"})=>{const[r,i]=D.useState(!1),c=D.useRef(null),d=f=>{f.stopPropagation(),i(!r)};return D.useEffect(()=>{const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return r?document.addEventListener("mousedown",f):document.removeEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[r]),l.jsxs("div",{className:"relative inline-block text-left",ref:c,children:[l.jsx("div",{onClick:d,className:"cursor-pointer h-full flex items-center",role:"button","aria-haspopup":"true","aria-expanded":r,children:n}),r&&l.jsx("div",{className:`origin-top-right absolute right-0 mt-2 ${t} rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50 transition-all duration-100 ease-out transform ${r?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:l.jsx("div",{className:`py-1 ${s} overflow-y-auto custom-scrollbar-modal`,role:"none",children:D.Children.map(e,f=>{if(D.isValidElement(f)){const h=f.props.onClick;return D.cloneElement(f,{onClick:_=>{h&&h(_),i(!1)}})}return f})})})]})},jd=({text:n,className:e,title:t})=>l.jsxs("button",{type:"button",className:`inline-flex justify-center items-center w-full h-full rounded-md border border-transparent shadow-sm px-3 py-2 bg-transparent text-sm font-medium text-white hover:bg-teal-700/70 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-teal-600 focus:ring-teal-500 transition-colors duration-150 ${e}`,"aria-haspopup":"true",title:t||n,children:[n,l.jsx(zh,{className:"-mr-1 ml-1.5 h-4 w-4 text-white/80"})]}),r1=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 12h9.75m-9.75 6h9.75M3.75 6.75h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Zm0 5.25h.008v.008H6v-.008Zm0 5.25h.008v.008H6v-.008Z"})]}),Lh=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{d:"M11.999 14.942c2.066 0 3.75-1.683 3.75-3.75V6.017c0-2.067-1.684-3.75-3.75-3.75s-3.75 1.683-3.75 3.75v5.175c0 2.067 1.684 3.75 3.75 3.75Z"}),l.jsx("path",{d:"M11.999 18.75c3.444 0 6.25-2.806 6.25-6.25h-1.5c0 2.615-2.135 4.75-4.75 4.75s-4.75-2.135-4.75-4.75h-1.5c0 3.444 2.806 6.25 6.25 6.25Z"}),l.jsx("path",{d:"M11.249 21.75v-2.272a29.196 29.196 0 0 0-4.002-.432 1.072 1.072 0 0 1-.998-1.072V17.25a.75.75 0 0 1 1.5 0v.383c0 .088.07.16.157.171a27.807 27.807 0 0 0 6.587 0c.087-.01.157-.083.157-.172v-.383a.75.75 0 0 1 1.5 0v.723c0 .544-.408 1.005-.941 1.065a29.318 29.318 0 0 0-4.002.432V21.75a.75.75 0 0 1-1.5 0Z"})]}),i1=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877m0 0L11.25 7.5M11.42 15.17l2.472-2.472a3.375 3.375 0 000-4.773L6.273 2.273a3.375 3.375 0 00-4.773 0L2.25 1.5l9.542 9.542L3 15.75l-2.25 2.25a4.482 4.482 0 006.338 6.338l2.25-2.25 5.173-5.173L11.42 15.17z"})}),o1=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),qd=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6M5.25 10.5h13.5A2.25 2.25 0 0 1 21 12.75v5.25a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18V12.75A2.25 2.25 0 0 1 5.25 10.5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 15h9"})]}),Sn=({text:n,icon:e,additionalContent:t,badgeCount:s,srText:r})=>l.jsxs(l.Fragment,{children:[_p.cloneElement(e,{className:"w-5 h-5 mr-3 text-teal-600 flex-shrink-0"}),l.jsx("span",{className:"text-sm font-medium",children:n}),t&&l.jsx("span",{className:"ml-auto text-xs text-slate-500",children:t}),r&&l.jsx("span",{className:"sr-only",children:r}),s&&s>0&&l.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold rounded-full h-4 w-4 flex items-center justify-center",children:s>9?"9+":s})]}),_T=n=>{const{isAdminUser:e,onAddIncomeClick:t,onAddExpenseClick:s,onAddDebtClick:r,onViewTransactionsClick:i,onManagePersonsClick:c,onViewReportClick:d,onOpenBankReportModal:f,onOpenStockReportModal:h,onBudgetClick:_,onArchiveClick:b,onEditProfileClick:v,onChangePasswordClick:T,onOpenInboxModal:C,onManageSuggestionsClick:L,onCreateSalesInvoiceClick:R,onCreatePurchaseBillClick:I,onOpenInvoiceListModal:j,onManageProductsClick:O,onManageBankAccountsClick:U,onSwitchAuthMode:se,unreadMessagesCount:Z,onResetAppDataClick:ee,isGlobalPhoneticModeActive:J,onToggleGlobalPhoneticMode:oe,onManageCompanyProfilesClick:xe,onOpenGeminiSettingsModal:F,onOpenAdminAppSettingsModal:H,onOpenAILogModal:re,isProcessingAICommand:K,isAIAssistantListening:Te,onToggleAIAssistantListening:G}=n,{currentUser:he,logout:ue,isAuthLoading:ae}=Nc(),[V,ce]=D.useState(!1),M=D.useRef(null),k=D.useRef(null);D.useEffect(()=>{const Je=Ze=>{M.current&&!M.current.contains(Ze.target)&&k.current&&!k.current.contains(Ze.target)&&ce(!1)};return V?(document.addEventListener("mousedown",Je),document.body.style.overflow="hidden"):document.body.style.overflow="auto",()=>{document.removeEventListener("mousedown",Je),document.body.style.overflow="auto"}},[V]);const Y="text-white hover:bg-teal-700/70 font-medium py-2 px-3 rounded-md transition duration-150 flex items-center space-x-1.5 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:ring-opacity-75",Q=({onClick:Je,children:Ze,className:Qe})=>l.jsx("button",{onClick:()=>{Je()},className:`flex items-center w-full px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 transition-colors duration-150 ${Qe}`,role:"menuitem",children:Ze}),fe=J?p.PHONETIC_BANGLA_ACTIVE:p.PHONETIC_ENGLISH_ACTIVE,ve=()=>l.jsxs(l.Fragment,{children:[l.jsx(Q,{onClick:oe,children:l.jsx(Sn,{text:fe,icon:l.jsx(s1,{}),additionalContent:l.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded ${J?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:J?"":"EN"})})}),l.jsx("hr",{className:"my-1 border-slate-100"}),l.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:p.MODAL_TITLE_ADD_TRANSACTION.split(" ")[2]})," ",l.jsx(Q,{onClick:()=>{t(),ce(!1)},children:l.jsx(Sn,{text:p.MODAL_TITLE_ADD_INCOME,icon:l.jsx(mh,{})})}),l.jsx(Q,{onClick:()=>{s(),ce(!1)},children:l.jsx(Sn,{text:p.MODAL_TITLE_ADD_EXPENSE,icon:l.jsx(ph,{})})}),l.jsx(Q,{onClick:()=>{i(),ce(!1)},children:l.jsx(Sn,{text:p.MODAL_TITLE_TRANSACTION_HISTORY,icon:l.jsx(tf,{})})}),l.jsx("hr",{className:"my-1 border-slate-100"}),l.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"  "}),l.jsx(Q,{onClick:()=>{R(),ce(!1)},children:l.jsx(Sn,{text:p.CREATE_SALES_INVOICE_NAV_BTN,icon:l.jsx(m0,{})})}),l.jsx(Q,{onClick:()=>{I(),ce(!1)},children:l.jsx(Sn,{text:p.CREATE_PURCHASE_BILL_NAV_BTN,icon:l.jsx(p0,{})})}),l.jsx(Q,{onClick:()=>{j(),ce(!1)},children:l.jsx(Sn,{text:p.VIEW_INVOICES_NAV_BTN,icon:l.jsx(Yd,{})})}),l.jsx(Q,{onClick:()=>{O(),ce(!1)},children:l.jsx(Sn,{text:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,icon:l.jsx(Wd,{})})}),l.jsx("hr",{className:"my-1 border-slate-100"}),l.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:" "})," ",l.jsx(Q,{onClick:()=>{c(),ce(!1)},children:l.jsx(Sn,{text:p.MANAGE_PERSONS_MODAL_TITLE,icon:l.jsx(kl,{})})}),l.jsx(Q,{onClick:()=>{r(),ce(!1)},children:l.jsx(Sn,{text:p.MODAL_TITLE_ADD_DEBT,icon:l.jsx(gh,{})})}),l.jsx(Q,{onClick:()=>{U(),ce(!1)},children:l.jsx(Sn,{text:p.MANAGE_BANK_ACCOUNTS_NAV_BTN,icon:l.jsx(qd,{})})}),l.jsx("hr",{className:"my-1 border-slate-100"}),l.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"  "}),l.jsx(Q,{onClick:()=>{d(),ce(!1)},children:l.jsx(Sn,{text:p.MODAL_TITLE_REPORTS,icon:l.jsx(Zx,{})})}),l.jsx(Q,{onClick:()=>{f(),ce(!1)},children:l.jsx(Sn,{text:p.BANK_REPORT_MODAL_TITLE,icon:l.jsx(qd,{})})})," ",l.jsx(Q,{onClick:()=>{h(),ce(!1)},children:l.jsx(Sn,{text:p.STOCK_REPORT_NAV_BTN,icon:l.jsx(Yd,{})})}),l.jsx(Q,{onClick:()=>{_(),ce(!1)},children:l.jsx(Sn,{text:p.BUDGET_MANAGEMENT_TITLE,icon:l.jsx(j0,{})})}),l.jsx("hr",{className:"my-1 border-slate-100"}),l.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:""}),l.jsx(Q,{onClick:()=>{C(),ce(!1)},children:l.jsx(Sn,{text:p.MESSAGES_NAV_BTN,icon:l.jsx(n1,{}),badgeCount:Z})}),l.jsx("hr",{className:"my-1 border-slate-100"}),l.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:""}),l.jsx(Q,{onClick:()=>{v(),ce(!1)},children:l.jsx(Sn,{text:p.EDIT_PROFILE_MODAL_TITLE,icon:l.jsx(t1,{})})}),l.jsx(Q,{onClick:()=>{T(),ce(!1)},children:l.jsx(Sn,{text:p.CHANGE_PASSWORD_MODAL_TITLE,icon:l.jsx(e1,{})})}),l.jsx(Q,{onClick:()=>{xe(),ce(!1)},children:l.jsx(Sn,{text:p.MANAGE_COMPANY_PROFILES_BTN,icon:l.jsx(a1,{})})}),l.jsx(Q,{onClick:()=>{L(),ce(!1)},children:l.jsx(Sn,{text:p.MANAGE_SUGGESTIONS_BTN_TEXT,icon:l.jsx(kl,{})})}),l.jsx(Q,{onClick:()=>{re(),ce(!1)},children:l.jsx(Sn,{text:p.AI_LOG_MODAL_TITLE,icon:l.jsx(o1,{})})}),e&&l.jsxs(l.Fragment,{children:[l.jsx(Q,{onClick:()=>{F(),ce(!1)},children:l.jsx(Sn,{text:p.SETTINGS_NAV_ITEM_GEMINI,icon:l.jsx(r1,{})})}),l.jsx(Q,{onClick:()=>{H(),ce(!1)},children:l.jsx(Sn,{text:p.APP_ADMIN_SETTINGS_NAV_ITEM,icon:l.jsx(i1,{})})}),l.jsx(Q,{onClick:()=>{ee(),ce(!1)},children:l.jsx(Sn,{text:p.RESET_APP_DATA_BTN,icon:l.jsx(xh,{})})})]}),l.jsx(Q,{onClick:()=>{b(),ce(!1)},children:l.jsx(Sn,{text:p.ARCHIVE_NAV_BTN,icon:l.jsx(Qx,{})})})]});let de=p.AI_ASSISTANT_BUTTON_LABEL,Ne=l.jsx(Lh,{className:"w-5 h-5"}),Ue="bg-cyan-500 hover:bg-cyan-600",we="";return K?(de=p.AI_ASSISTANT_PROCESSING,Ne=l.jsx(xh,{className:"w-5 h-5 animate-spin"}),Ue="bg-purple-500 hover:bg-purple-600 focus:ring-purple-400",we="animate-pulse"):Te&&(de=p.AI_ASSISTANT_LISTENING,Ne=l.jsx(Lh,{className:"w-5 h-5"}),Ue="bg-red-500 hover:bg-red-600 focus:ring-red-400",we="animate-pulse"),l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-teal-600 text-white p-3 sm:p-4 shadow-lg sticky top-0 z-50",children:l.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[l.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold whitespace-nowrap truncate",children:p.APP_TITLE}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5 md:space-x-2",children:[ae&&!he?l.jsx("div",{className:"text-xs sm:text-sm animate-pulse p-2",children:p.LOADING}):he?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:oe,className:`${Y} ${J?"bg-orange-500 hover:bg-orange-400 focus:ring-orange-400":"bg-sky-500 hover:bg-sky-400 focus:ring-sky-400"}`,title:fe,"aria-label":p.PHONETIC_TYPING_TOGGLE_TOOLTIP,children:[l.jsx(s1,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden xs:inline ml-1 text-xs sm:text-sm",children:J?"":"EN"})]}),l.jsxs("button",{onClick:G,className:`${Y} ${Ue} ${we}`,title:p.AI_ASSISTANT_BUTTON_LABEL,"aria-label":p.AI_ASSISTANT_BUTTON_LABEL,disabled:!("SpeechRecognition"in window||"webkitSpeechRecognition"in window)||K&&!Te,children:[Ne,l.jsx("span",{className:"hidden md:inline text-xs sm:text-sm",children:de})]}),l.jsxs("button",{onClick:re,className:`${Y} bg-slate-500 hover:bg-slate-600 focus:ring-slate-400`,title:p.AI_LOG_MODAL_TITLE,"aria-label":p.AI_LOG_MODAL_TITLE,children:[l.jsx(o1,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs sm:text-sm",children:"AI "})]}),l.jsxs("div",{className:"hidden lg:flex items-center space-x-0.5",children:[l.jsxs(Su,{trigger:l.jsx(jd,{text:p.MODAL_TITLE_ADD_TRANSACTION.split(" ")[2]}),children:[" ",l.jsx(Q,{onClick:t,children:l.jsx(Sn,{text:p.MODAL_TITLE_ADD_INCOME,icon:l.jsx(mh,{})})}),l.jsx(Q,{onClick:s,children:l.jsx(Sn,{text:p.MODAL_TITLE_ADD_EXPENSE,icon:l.jsx(ph,{})})}),l.jsx(Q,{onClick:i,children:l.jsx(Sn,{text:p.MODAL_TITLE_TRANSACTION_HISTORY,icon:l.jsx(tf,{})})})]}),l.jsxs(Su,{trigger:l.jsx(jd,{text:"  "}),children:[l.jsx(Q,{onClick:R,children:l.jsx(Sn,{text:p.CREATE_SALES_INVOICE_NAV_BTN,icon:l.jsx(m0,{})})}),l.jsx(Q,{onClick:I,children:l.jsx(Sn,{text:p.CREATE_PURCHASE_BILL_NAV_BTN,icon:l.jsx(p0,{})})}),l.jsx(Q,{onClick:j,children:l.jsx(Sn,{text:p.VIEW_INVOICES_NAV_BTN,icon:l.jsx(Yd,{})})}),l.jsx(Q,{onClick:O,children:l.jsx(Sn,{text:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,icon:l.jsx(Wd,{})})})]}),l.jsxs(Su,{trigger:l.jsx(jd,{text:" "}),children:[" ",l.jsx(Q,{onClick:c,children:l.jsx(Sn,{text:p.MANAGE_PERSONS_MODAL_TITLE,icon:l.jsx(kl,{})})}),l.jsx(Q,{onClick:r,children:l.jsx(Sn,{text:p.MODAL_TITLE_ADD_DEBT,icon:l.jsx(gh,{})})}),l.jsx(Q,{onClick:U,children:l.jsx(Sn,{text:p.MANAGE_BANK_ACCOUNTS_NAV_BTN,icon:l.jsx(qd,{})})})]}),l.jsxs(Su,{trigger:l.jsx(jd,{text:"  "}),children:[l.jsx(Q,{onClick:d,children:l.jsx(Sn,{text:p.MODAL_TITLE_REPORTS,icon:l.jsx(Zx,{})})}),l.jsx(Q,{onClick:f,children:l.jsx(Sn,{text:p.BANK_REPORT_MODAL_TITLE,icon:l.jsx(qd,{})})})," ",l.jsx(Q,{onClick:h,children:l.jsx(Sn,{text:p.STOCK_REPORT_NAV_BTN,icon:l.jsx(Yd,{})})}),l.jsx(Q,{onClick:_,children:l.jsx(Sn,{text:p.BUDGET_MANAGEMENT_TITLE,icon:l.jsx(j0,{})})})]}),l.jsx(Su,{trigger:l.jsx(jd,{text:p.MESSAGES_NAV_BTN}),children:l.jsx(Q,{onClick:C,children:l.jsx(Sn,{text:p.INBOX_MODAL_TITLE,icon:l.jsx(n1,{}),badgeCount:Z})})})]}),l.jsxs("div",{className:"hidden sm:flex lg:hidden items-center space-x-1",children:[l.jsxs("button",{onClick:t,className:`${Y} bg-green-500 hover:bg-green-400`,title:p.MODAL_TITLE_ADD_INCOME,children:[l.jsx(mh,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),l.jsxs("button",{onClick:s,className:`${Y} bg-red-500 hover:bg-red-400`,title:p.MODAL_TITLE_ADD_EXPENSE,children:[l.jsx(ph,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),l.jsxs("button",{onClick:r,className:`${Y} bg-sky-500 hover:bg-sky-400`,title:p.MODAL_TITLE_ADD_DEBT,children:[l.jsx(gh,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),l.jsxs("button",{onClick:R,className:`${Y} bg-purple-500 hover:bg-purple-400`,title:p.CREATE_SALES_INVOICE_NAV_BTN,children:[l.jsx(m0,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),l.jsxs("button",{onClick:I,className:`${Y} bg-indigo-500 hover:bg-indigo-400`,title:p.CREATE_PURCHASE_BILL_NAV_BTN,children:[l.jsx(p0,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),l.jsxs("button",{onClick:O,className:`${Y} bg-orange-500 hover:bg-orange-400`,title:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,children:[l.jsx(Wd,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline text-xs",children:""})]})]}),l.jsx("div",{className:"hidden lg:flex items-center",children:l.jsxs(Su,{trigger:l.jsx("button",{className:`${Y} p-2`,title:"",children:l.jsx(vp,{className:"w-5 h-5"})}),children:[l.jsx(Q,{onClick:v,children:l.jsx(Sn,{text:p.EDIT_PROFILE_MODAL_TITLE,icon:l.jsx(t1,{})})}),l.jsx(Q,{onClick:T,children:l.jsx(Sn,{text:p.CHANGE_PASSWORD_MODAL_TITLE,icon:l.jsx(e1,{})})}),l.jsx(Q,{onClick:xe,children:l.jsx(Sn,{text:p.MANAGE_COMPANY_PROFILES_BTN,icon:l.jsx(a1,{})})}),l.jsx(Q,{onClick:L,children:l.jsx(Sn,{text:p.MANAGE_SUGGESTIONS_BTN_TEXT,icon:l.jsx(kl,{})})}),e&&l.jsxs(l.Fragment,{children:[l.jsx(Q,{onClick:F,children:l.jsx(Sn,{text:p.SETTINGS_NAV_ITEM_GEMINI,icon:l.jsx(r1,{})})}),l.jsx(Q,{onClick:H,children:l.jsx(Sn,{text:p.APP_ADMIN_SETTINGS_NAV_ITEM,icon:l.jsx(i1,{})})}),l.jsx(Q,{onClick:ee,children:l.jsx(Sn,{text:p.RESET_APP_DATA_BTN,icon:l.jsx(xh,{})})})]}),l.jsx(Q,{onClick:b,children:l.jsx(Sn,{text:p.ARCHIVE_NAV_BTN,icon:l.jsx(Qx,{})})})]})}),l.jsx("span",{className:"text-sm hidden xl:block border-l border-teal-500 pl-3 ml-2 whitespace-nowrap",children:he.name||he.email}),l.jsxs("button",{onClick:ue,className:"hidden lg:flex bg-red-500 hover:bg-red-600 text-white text-xs sm:text-sm font-semibold py-2 px-3 rounded-lg shadow-md transition duration-150 items-center space-x-1.5",title:p.LOGOUT,children:[l.jsx(Jx,{className:"w-4 h-4"})," ",l.jsx("span",{children:p.LOGOUT})]})]}):l.jsxs("div",{className:"hidden lg:flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>se("login"),className:`${Y} bg-green-500 hover:bg-green-600`,children:[l.jsx(B0,{className:"w-4 h-4 mr-1.5"}),p.LOGIN]}),l.jsxs("button",{onClick:()=>se("signup"),className:`${Y} bg-sky-500 hover:bg-sky-600`,children:[l.jsx(Ch,{className:"w-4 h-4 mr-1.5"}),p.SIGNUP]})]}),l.jsxs("button",{ref:k,onClick:()=>ce(!V),className:"lg:hidden p-2 text-white hover:bg-teal-700/70 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-400","aria-controls":"mobile-menu","aria-expanded":V,title:" ",children:[l.jsx("span",{className:"sr-only",children:" "}),V?l.jsx(Wc,{className:"w-6 h-6"}):l.jsx(ET,{className:"w-6 h-6"})]})]})]})}),l.jsxs(l.Fragment,{children:[V&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-[55] lg:hidden",onClick:()=>ce(!1),"aria-hidden":"true"}),l.jsxs("div",{id:"mobile-menu",ref:M,className:`fixed top-0 right-0 h-full w-72 sm:w-80 bg-white shadow-xl z-[60] transform transition-transform duration-300 ease-in-out lg:hidden flex flex-col
                      ${V?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 bg-slate-50",children:[l.jsx("h2",{id:"mobile-menu-title",className:"text-lg font-semibold text-teal-700",children:p.APP_TITLE}),l.jsxs("button",{onClick:()=>ce(!1),className:"p-1 text-slate-500 hover:text-slate-700 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",title:"  ",children:[l.jsx(Wc,{className:"w-6 h-6"})," ",l.jsx("span",{className:"sr-only",children:"  "})]})]}),he?l.jsxs(l.Fragment,{children:[l.jsx("nav",{className:"flex-grow py-2 overflow-y-auto",role:"navigation","aria-label":" ",children:ve()}),l.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:he.name||he.email}),l.jsx("p",{className:"text-xs text-slate-500",children:""})]}),l.jsxs("button",{onClick:()=>{ue(),ce(!1)},className:"w-full flex items-center justify-center bg-red-500 hover:bg-red-600 text-white text-sm font-semibold py-2.5 px-4 rounded-lg shadow-md transition duration-150",children:[l.jsx(Jx,{className:"w-4 h-4 mr-2"})," ",p.LOGOUT]})]})]}):l.jsxs("nav",{className:"flex-grow py-3 overflow-y-auto",role:"navigation","aria-label":" ",children:[l.jsx(Q,{onClick:()=>{se("login"),ce(!1)},children:l.jsx(Sn,{text:p.LOGIN,icon:l.jsx(B0,{})})}),l.jsx(Q,{onClick:()=>{se("signup"),ce(!1)},children:l.jsx(Sn,{text:p.SIGNUP,icon:l.jsx(Ch,{})})})]})]})]})]})},Bd=({title:n,amount:e,colorClass:t,onClick:s,isClickable:r,ariaLabelDetails:i})=>l.jsxs("div",{className:`p-4 sm:p-6 rounded-lg shadow-lg text-center ${t} ${r?"cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-200 ease-out":""}`,onClick:s,role:r?"button":void 0,tabIndex:r?0:void 0,onKeyDown:r?c=>{(c.key==="Enter"||c.key===" ")&&(s==null||s())}:void 0,"aria-label":r?`${n}, ${i||` ${e.toLocaleString("bn-BD")} ,    `}`:n,children:[l.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-700 mb-1 sm:mb-2",children:n}),l.jsxs("p",{className:"text-2xl sm:text-3xl font-bold",children:[p.BDT_SYMBOL," ",e.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),bT=({totalIncome:n,totalExpense:e,balance:t,totalPayable:s,totalReceivable:r,onOpenReceivablePersonsModal:i,onOpenPayablePersonsModal:c})=>l.jsxs("section",{"aria-labelledby":"summary-heading",className:"my-8 p-4 md:p-6 bg-white rounded-xl shadow-lg",children:[l.jsx("h2",{id:"summary-heading",className:"sr-only",children:"Financial Summary"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[l.jsx(Bd,{title:p.SUMMARY_TOTAL_INCOME,amount:n,colorClass:"bg-green-100 text-green-700"}),l.jsx(Bd,{title:p.SUMMARY_TOTAL_EXPENSE,amount:e,colorClass:"bg-red-100 text-red-700"}),l.jsx(Bd,{title:p.SUMMARY_CURRENT_BALANCE,amount:t,colorClass:t>=0?"bg-sky-100 text-sky-700":"bg-orange-100 text-orange-700"}),l.jsx(Bd,{title:p.TOTAL_RECEIVABLE,amount:r,colorClass:"bg-green-100 text-green-700",onClick:i,isClickable:!0,ariaLabelDetails:`  ${r.toLocaleString("bn-BD")} ,    `}),l.jsx(Bd,{title:p.TOTAL_PAYABLE,amount:s,colorClass:"bg-red-100 text-red-700",onClick:c,isClickable:!0,ariaLabelDetails:`  ${s.toLocaleString("bn-BD")} ,    `})]})]}),O2=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 12h9.75m-9.75 6h9.75M3.75 6.75h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Z"})}),TT="",NT="",vT={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function cr(n){const e=n.split(/(\s+)/);let t="";for(const s of e){if(s.match(/^\s+$/)){t+=s;continue}if(s.length===0)continue;const r=s.toLowerCase();if(Gc.hasOwnProperty(r)&&Gc[r]&&(r.length>3||Gc[r].length>1||r==="a")&&Gc[r].length>1){t+=Gc[r];continue}let i="",c=0;for(;c<s.length;){let d=!1;for(let f=3;f>=1;f--)if(c+f<=s.length){const h=s.substring(c,c+f);if(Gc.hasOwnProperty(h)){const _=Gc[h];TT.includes(_)&&i.length>0&&NT.includes(i[i.length-1])?i+=vT[_]||"":i+=_,c+=f,d=!0;break}}d||(i+=s[c],c+=1)}t+=i}return t}const l1=({transactionType:n,onAddTransaction:e,suggestionsList:t,onOpenManageSuggestions:s,expenseFieldRequirements:r,onUpdateExpenseFieldRequirements:i,isGlobalPhoneticModeActive:c,bankAccounts:d,defaultBankAccountId:f})=>{const[h,_]=D.useState(""),[b,v]=D.useState(""),[T,C]=D.useState(new Date().toISOString().slice(0,16)),[L,R]=D.useState(f||void 0),[I,j]=D.useState(""),[O,U]=D.useState(""),[se,Z]=D.useState(""),[ee,J]=D.useState(t),[oe,xe]=D.useState(!1),F=D.useRef(null),H=D.useRef(null),re=D.useRef(null),K=D.useRef(null),{addNotification:Te}=ur(),G=D.useRef(!1),he=D.useCallback(()=>{G.current=!0,_(""),v(""),j(""),U(""),Z(""),R(f||void 0),J(t),xe(!1),setTimeout(()=>{var Fe;return(Fe=F.current)==null?void 0:Fe.focus()},0)},[t,f]);D.useEffect(()=>{he()},[n,t,he]),D.useEffect(()=>{!L&&f&&R(f)},[f,L]),D.useEffect(()=>{if(n===fs.EXPENSE&&h){const Fe=h.toLowerCase();let ut="";for(const Pe in Hx)if(Fe.includes(Pe.toLowerCase())){ut=Hx[Pe];break}ut&&!O.trim()&&(G.current=!0,U(ut))}else n!==fs.EXPENSE&&(G.current=!0,U(""))},[h,n,O]);const ue=(Fe,ut)=>Pe=>{const nt=Pe.target.value;G.current?(Fe(nt),G.current=!1):Fe(nt),ut&&ut(nt)},ae=(Fe,ut)=>Pe=>{if(!G.current&&c&&Pe.key===" "){Pe.preventDefault();const nt=(ut==null?void 0:ut.current)||Pe.target,it=nt.value,st=nt.selectionStart||0;let Nt=st-1;for(;Nt>=0&&it[Nt]!==" ";)Nt--;Nt++;const Pt=it.substring(Nt,st);if(Pt.trim()){const Rt=cr(Pt),Ft=it.substring(0,Nt)+Rt+" "+it.substring(st);Fe(Ft),setTimeout(()=>{const Yt=Nt+Rt.length+1;nt.setSelectionRange(Yt,Yt)},0)}else{const Rt=it.substring(0,st)+" "+it.substring(st);Fe(Rt),setTimeout(()=>{nt.setSelectionRange(st+1,st+1)},0)}Fe===_&&xe(!1)}},V=(Fe,ut)=>Pe=>{if(G.current){G.current=!1;return}if(c){Pe.preventDefault();const nt=Pe.clipboardData.getData("text"),it=cr(nt),st=(ut==null?void 0:ut.current)||Pe.target,Nt=st.selectionStart||0,Pt=st.selectionEnd||0,Rt=st.value,Ft=Rt.substring(0,Nt)+it+Rt.substring(Pt);Fe(Ft),setTimeout(()=>{const Yt=Nt+it.length;st.setSelectionRange(Yt,Yt)},0),Fe===_&&xe(!1)}},M=ue(_,Fe=>{if(Fe.trim()){const ut=t.filter(Pe=>Pe.toLowerCase().includes(Fe.toLowerCase()));J(ut),xe(!0)}else J(t),xe(!0)}),k=ae(_,F),Y=V(_,F),Q=ue(U),fe=ae(U,H),ve=V(U,H),de=ue(Z),Ne=ae(Z,re),Ue=V(Z,re),we=()=>{var ut;const Fe=((ut=F.current)==null?void 0:ut.value)||h;if(Fe.trim()==="")J(t);else{const Pe=t.filter(nt=>nt.toLowerCase().includes(Fe.toLowerCase()));J(Pe)}xe(!0)},Je=Fe=>{var ut;G.current=!0,_(Fe),xe(!1),(ut=F.current)==null||ut.focus()};D.useEffect(()=>{const Fe=ut=>{F.current&&!F.current.contains(ut.target)&&K.current&&!K.current.contains(ut.target)&&xe(!1)};return document.addEventListener("mousedown",Fe),()=>{document.removeEventListener("mousedown",Fe)}},[]);const Ze=async Fe=>{Fe.preventDefault();const ut=parseFloat(b);if(!h.trim()||isNaN(ut)||ut<=0||!T){Te(p.FORM_VALIDATION_ERROR,"error");return}if(n===fs.EXPENSE){if(r.quantityRequired&&!I.trim()){Te(`${p.QUANTITY_LABEL} ${p.FIELD_IS_REQUIRED}`,"error");return}if(r.unitRequired&&!O.trim()){Te(`${p.UNIT_LABEL} ${p.FIELD_IS_REQUIRED}`,"error");return}if(r.notesRequired&&!se.trim()){Te(`${p.ADDITIONAL_NOTES_LABEL.replace("()","").trim()} ${p.FIELD_IS_REQUIRED}`,"error");return}}let Pe=h.trim();if(n===fs.EXPENSE){const st=I.trim(),Nt=O.trim(),Pt=se.trim(),Rt=[];if(st||Nt){let Ft=st||"";Nt&&(Ft=st?`${st} ${Nt}`:Nt),Ft&&Rt.push(`[${Ft}]`)}Pt&&Rt.push(Pt),Rt.length>0&&(Pe+=` ${Rt.join(" - ")}`)}const nt=d.find(st=>st.id===L);await e({description:Pe,amount:ut,type:n,date:new Date(T).toISOString(),bankAccountId:L||void 0,bankAccountName:(nt==null?void 0:nt.accountName)||void 0})&&he()},Qe=n===fs.INCOME?p.ADD_INCOME_BTN_TEXT:p.ADD_EXPENSE_BTN_TEXT,je=n===fs.EXPENSE&&h.trim()!=="",ge=(Fe,ut)=>l.jsxs("div",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"checkbox",id:`require-${String(Fe)}`,checked:r[Fe],onChange:Pe=>i({[Fe]:Pe.target.checked}),className:"form-checkbox h-3.5 w-3.5 text-teal-500 rounded-sm border-slate-400 focus:ring-teal-400 cursor-pointer","aria-label":`${ut}  `}),l.jsx("label",{htmlFor:`require-${String(Fe)}`,className:"text-xs text-slate-500 cursor-pointer",children:p.FIELD_REQUIRED_TOGGLE})]});return l.jsxs("form",{onSubmit:Ze,className:"space-y-5",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex justify-between items-end mb-1",children:[l.jsxs("label",{htmlFor:"s-description",className:"block text-sm font-medium text-slate-600",children:[p.DESCRIPTION," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("button",{type:"button",onClick:s,className:"text-xs text-teal-600 hover:text-teal-800 hover:underline flex items-center space-x-1",title:p.MANAGE_SUGGESTIONS_BTN_TEXT,children:[l.jsx(O2,{className:"w-3 h-3"}),l.jsx("span",{children:p.MANAGE_SUGGESTIONS_BTN_TEXT})]})]}),l.jsx("input",{ref:F,type:"text",id:"s-description",value:h,onChange:M,onKeyDown:k,onPaste:Y,onFocus:we,placeholder:p.DESCRIPTION_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"s-description-suggestions","aria-expanded":oe}),oe&&l.jsx("ul",{ref:K,id:"s-description-suggestions",className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox",children:ee.length>0?ee.map((Fe,ut)=>l.jsx("li",{onClick:()=>Je(Fe),onMouseDown:Pe=>Pe.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm text-slate-700",role:"option",tabIndex:0,onKeyDown:Pe=>{(Pe.key==="Enter"||Pe.key===" ")&&Je(Fe)},children:Fe},ut)):h.trim()&&l.jsx("li",{className:"px-4 py-2 text-center text-xs text-slate-500",children:p.TRANSACTION_DESCRIPTION_NO_SUGGESTIONS})})]}),je&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("label",{htmlFor:"s-quantity",className:"block text-sm font-medium text-slate-600",children:[p.QUANTITY_LABEL,r.quantityRequired&&l.jsx("span",{className:"text-red-500",children:"*"})]}),ge("quantityRequired",p.QUANTITY_LABEL)]}),l.jsx("input",{type:"number",id:"s-quantity",value:I,onChange:Fe=>j(Fe.target.value),placeholder:": ",className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",min:"0",step:"any",required:r.quantityRequired})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("label",{htmlFor:"s-unit",className:"block text-sm font-medium text-slate-600",children:[p.UNIT_LABEL,r.unitRequired&&l.jsx("span",{className:"text-red-500",children:"*"})]}),ge("unitRequired",p.UNIT_LABEL)]}),l.jsx("input",{ref:H,type:"text",id:"s-unit",value:O,onChange:Q,onKeyDown:fe,onPaste:ve,placeholder:p.UNIT_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",list:"common-units-datalist",required:r.unitRequired}),l.jsx("datalist",{id:"common-units-datalist",children:Wi.map(Fe=>l.jsx("option",{value:Fe},Fe))})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("label",{htmlFor:"s-additional-notes",className:"block text-sm font-medium text-slate-600",children:[p.ADDITIONAL_NOTES_LABEL,r.notesRequired&&l.jsx("span",{className:"text-red-500",children:"*"})]}),ge("notesRequired",p.ADDITIONAL_NOTES_LABEL.replace("()","").trim())]}),l.jsx("textarea",{ref:re,id:"s-additional-notes",value:se,onChange:de,onKeyDown:Ne,onPaste:Ue,placeholder:p.ADDITIONAL_NOTES_PLACEHOLDER,rows:2,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:r.notesRequired})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"s-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",id:"s-amount",value:b,onChange:Fe=>v(Fe.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"s-transaction-date",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DATE," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"datetime-local",id:"s-transaction-date",value:T,onChange:Fe=>C(Fe.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"s-bank-account",className:"block text-sm font-medium text-slate-600 mb-1",children:p.SELECT_BANK_ACCOUNT_TRANSACTION_LABEL}),l.jsxs("select",{id:"s-bank-account",value:L||"",onChange:Fe=>R(Fe.target.value||void 0),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",children:[l.jsx("option",{value:"",children:p.SELECT_BANK_ACCOUNT_PLACEHOLDER}),d.filter(Fe=>!Fe.isDeleted).map(Fe=>l.jsxs("option",{value:Fe.id,children:[Fe.accountName," ",Fe.bankName&&`(${Fe.bankName})`]},Fe.id))]})]}),l.jsx("button",{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:Qe})]})},xr=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.56 0c1.153 0 2.243.032 3.223.094M7.5 5.25h9M7.5 5.25a2.25 2.25 0 0 1-2.25-2.25H18.75a2.25 2.25 0 0 1-2.25 2.25H7.5Z"})}),hl=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),P2=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),yT=({transaction:n,onDeleteTransaction:e,onEditTransaction:t,onViewHistory:s,onRestoreTransaction:r})=>{const i=n.type===fs.INCOME,c=n.isDeleted?"text-slate-400 line-through":i?"text-green-600":"text-red-600",d=n.isDeleted?"border-slate-400":i?"border-green-500":"border-red-500",f=i?mh:ph,h=n.isDeleted?"text-slate-500 line-through":"text-slate-700",_=(C,L=!1)=>{if(!C)return"N/A";try{const R=new Date(C);if(isNaN(R.getTime()))return C;const I={day:"2-digit",month:"long",year:"numeric"};return L?(I.hour="2-digit",I.minute="2-digit",R.toLocaleString("bn-BD",I)):R.toLocaleDateString("bn-BD",I)}catch{return C}},b=_(n.date,!0),v=n.lastModified&&n.lastModified!==n.date?_(n.lastModified,!0):null,T=n.isDeleted&&n.deletedAt?_(n.deletedAt,!0):null;return l.jsxs("li",{className:`bg-white p-4 rounded-lg shadow-sm border-l-4 ${d} flex flex-col sm:flex-row justify-between items-start sm:items-center hover:shadow-md transition-shadow duration-150 ${n.isDeleted?"opacity-70 hover:opacity-90":""}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-grow",children:[l.jsx(f,{className:`w-8 h-8 ${n.isDeleted?"text-slate-400":i?"text-green-500":"text-red-500"}`}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium ${h}`,children:n.description}),l.jsxs("p",{className:"text-xs text-slate-500",children:[p.DATE,": ",b]}),n.bankAccountName&&!n.isDeleted&&l.jsxs("p",{className:"text-xs text-sky-600 flex items-center",children:[l.jsx(qd,{className:"w-3 h-3 mr-1"})," ",p.TRANSACTION_LINKED_TO_BANK_ACCOUNT.replace("{bankAccountName}",n.bankAccountName)]}),v&&!n.isDeleted&&l.jsxs("p",{className:"text-xs text-slate-400 italic",children:[p.LAST_MODIFIED_ON," ",v]}),n.isDeleted&&T&&l.jsxs("p",{className:"text-xs text-orange-600 font-medium",children:[p.DELETED_ON," ",T," (",p.STATUS_ARCHIVED,")"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 self-end sm:self-center mt-2 sm:mt-0",children:[l.jsxs("span",{className:`font-semibold text-lg ${c}`,children:[i?"+":"-"," ",p.BDT_SYMBOL," ",(n.amount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.isDeleted?l.jsx("button",{onClick:()=>r(n.id),className:"text-slate-500 hover:text-green-600 p-2 rounded-full hover:bg-green-50 transition duration-150","aria-label":p.RESTORE_ITEM_TOOLTIP,title:p.RESTORE_ITEM_TOOLTIP,children:l.jsx(P2,{className:"w-4 h-4"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>s(n),className:"text-slate-500 hover:text-sky-600 p-2 rounded-full hover:bg-sky-50 transition duration-150","aria-label":p.VIEW_HISTORY_TOOLTIP,title:p.VIEW_HISTORY_TOOLTIP,children:l.jsx(tf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>t(n),className:"text-slate-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition duration-150","aria-label":p.EDIT_TRANSACTION_TOOLTIP,title:p.EDIT_TRANSACTION_TOOLTIP,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>e(n.id),className:"text-slate-500 hover:text-red-600 p-2 rounded-full hover:bg-red-50 transition duration-150","aria-label":p.DELETE_TRANSACTION_TOOLTIP,title:p.DELETE_TRANSACTION_TOOLTIP,children:l.jsx(xr,{className:"w-4 h-4"})})]})]})]})},M2=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),k2=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),ah=10,yp=({transactions:n,onDeleteTransaction:e,onEditTransaction:t,onViewHistory:s,onRestoreTransaction:r,showTitle:i=!0,initialShowDeleted:c=!1})=>{const[d,f]=D.useState(c),[h,_]=D.useState(1),{activeTransactions:b,deletedTransactions:v}=D.useMemo(()=>{const Z=[],ee=[];return n.forEach(J=>{J.isDeleted?ee.push(J):Z.push(J)}),Z.sort((J,oe)=>new Date(oe.date).getTime()-new Date(J.date).getTime()),ee.sort((J,oe)=>new Date(oe.deletedAt||oe.date).getTime()-new Date(J.deletedAt||J.date).getTime()),{activeTransactions:Z,deletedTransactions:ee}},[n]),T=D.useMemo(()=>d?[...b,...v]:b,[d,b,v]);D.useEffect(()=>{_(1)},[n,d]);const C=T.length,L=Math.max(1,Math.ceil(C/ah));D.useEffect(()=>{h>L&&_(L)},[h,L]);const R=D.useMemo(()=>{const Z=(h-1)*ah,ee=Z+ah;return T.slice(Z,ee)},[T,h]),I=R.length,j=b.length,O=v.length,U=()=>{_(Z=>Math.max(1,Z-1))},se=()=>{_(Z=>Math.min(L,Z+1))};return j===0&&!d&&O>0?l.jsxs("section",{"aria-labelledby":i?"transaction-history-heading":void 0,className:`${i?"my-8 p-6 bg-white rounded-xl shadow-lg text-center":"text-center py-4"}`,children:[i&&l.jsx("h2",{id:"transaction-history-heading",className:"text-2xl font-semibold text-slate-700 mb-4",children:p.TRANSACTION_HISTORY}),l.jsx("p",{className:"text-slate-500 mb-3",children:p.NO_TRANSACTIONS}),l.jsxs("button",{onClick:()=>f(!0),className:"text-sm text-teal-600 hover:text-teal-700 underline focus:outline-none",children:[p.SHOW_DELETED_ITEMS_BTN," (",O,")"]})]}):j===0&&O===0?l.jsxs("section",{"aria-labelledby":i?"transaction-history-heading":void 0,className:`${i?"my-8 p-6 bg-white rounded-xl shadow-lg text-center":"text-center py-4"}`,children:[i&&l.jsx("h2",{id:"transaction-history-heading",className:"text-2xl font-semibold text-slate-700 mb-6",children:p.TRANSACTION_HISTORY}),l.jsx("p",{className:"text-slate-500",children:p.NO_TRANSACTIONS})]}):l.jsxs("section",{"aria-labelledby":i?"transaction-history-heading":void 0,className:`${i?"my-8 p-4 md:p-6 bg-white rounded-xl shadow-lg":""}`,children:[l.jsxs("div",{className:`flex flex-col sm:flex-row justify-between items-center ${i?"mb-6":"mb-4"}`,children:[i&&l.jsx("h2",{id:"transaction-history-heading",className:"text-2xl font-semibold text-slate-700",children:p.TRANSACTION_HISTORY}),O>0&&l.jsx("button",{onClick:()=>f(!d),className:"text-sm text-teal-600 hover:text-teal-700 underline focus:outline-none mt-2 sm:mt-0",children:d?p.HIDE_DELETED_ITEMS_BTN:`${p.SHOW_DELETED_ITEMS_BTN} (${O})`})]}),I===0&&C>0?l.jsx("p",{className:"text-slate-500 text-center py-4",children:"    "}):I===0&&C===0?l.jsx("p",{className:"text-slate-500 text-center py-4",children:d?p.NO_DELETED_TRANSACTIONS:p.NO_TRANSACTIONS}):l.jsxs(l.Fragment,{children:[l.jsx("ul",{className:"space-y-4",children:R.map(Z=>l.jsx(yT,{transaction:Z,onDeleteTransaction:e,onEditTransaction:t,onViewHistory:s,onRestoreTransaction:r},Z.id))}),C>ah&&l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center text-sm text-slate-600",children:[l.jsxs("p",{className:"mb-2 sm:mb-0",children:[" ",h.toLocaleString("bn-BD"),"  ",L.toLocaleString("bn-BD")," |  ",C.toLocaleString("bn-BD"),"  "]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:U,disabled:h===1,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":" ",children:[l.jsx(M2,{className:"w-4 h-4 mr-1"}),""]}),l.jsxs("button",{onClick:se,disabled:h===L,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":" ",children:["",l.jsx(k2,{className:"w-4 h-4 ml-1"})]})]})]})]})]})};var ks;(function(n){n.assertEqual=r=>{};function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const i={};for(const c of r)i[c]=c;return i},n.getValidEnumValues=r=>{const i=n.objectKeys(r).filter(d=>typeof r[r[d]]!="number"),c={};for(const d of i)c[d]=r[d];return n.objectValues(c)},n.objectValues=r=>n.objectKeys(r).map(function(i){return r[i]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const c in r)Object.prototype.hasOwnProperty.call(r,c)&&i.push(c);return i},n.find=(r,i)=>{for(const c of r)if(i(c))return c},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,i=" | "){return r.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}n.joinValues=s,n.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(ks||(ks={}));var c1;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(c1||(c1={}));const nn=ks.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),pc=n=>{switch(typeof n){case"undefined":return nn.undefined;case"string":return nn.string;case"number":return Number.isNaN(n)?nn.nan:nn.number;case"boolean":return nn.boolean;case"function":return nn.function;case"bigint":return nn.bigint;case"symbol":return nn.symbol;case"object":return Array.isArray(n)?nn.array:n===null?nn.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?nn.promise:typeof Map<"u"&&n instanceof Map?nn.map:typeof Set<"u"&&n instanceof Set?nn.set:typeof Date<"u"&&n instanceof Date?nn.date:nn.object;default:return nn.unknown}},Ot=ks.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Bl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},s={_errors:[]},r=i=>{for(const c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(r);else if(c.code==="invalid_return_type")r(c.returnTypeError);else if(c.code==="invalid_arguments")r(c.argumentsError);else if(c.path.length===0)s._errors.push(t(c));else{let d=s,f=0;for(;f<c.path.length;){const h=c.path[f];f===c.path.length-1?(d[h]=d[h]||{_errors:[]},d[h]._errors.push(t(c))):d[h]=d[h]||{_errors:[]},d=d[h],f++}}};return r(this),s}static assert(e){if(!(e instanceof Bl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ks.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Bl.create=n=>new Bl(n);const U0=(n,e)=>{let t;switch(n.code){case Ot.invalid_type:n.received===nn.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Ot.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ks.jsonStringifyReplacer)}`;break;case Ot.unrecognized_keys:t=`Unrecognized key(s) in object: ${ks.joinValues(n.keys,", ")}`;break;case Ot.invalid_union:t="Invalid input";break;case Ot.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ks.joinValues(n.options)}`;break;case Ot.invalid_enum_value:t=`Invalid enum value. Expected ${ks.joinValues(n.options)}, received '${n.received}'`;break;case Ot.invalid_arguments:t="Invalid function arguments";break;case Ot.invalid_return_type:t="Invalid function return type";break;case Ot.invalid_date:t="Invalid date";break;case Ot.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ks.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Ot.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Ot.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Ot.custom:t="Invalid input";break;case Ot.invalid_intersection_types:t="Intersection results could not be merged";break;case Ot.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Ot.not_finite:t="Number must be finite";break;default:t=e.defaultError,ks.assertNever(n)}return{message:t}};let AT=U0;function ST(){return AT}const CT=n=>{const{data:e,path:t,errorMaps:s,issueData:r}=n,i=[...t,...r.path||[]],c={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let d="";const f=s.filter(h=>!!h).slice().reverse();for(const h of f)d=h(c,{data:e,defaultError:d}).message;return{...r,path:i,message:d}};function zt(n,e){const t=ST(),s=CT({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===U0?void 0:U0].filter(r=>!!r)});n.common.issues.push(s)}class Ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const r of t){if(r.status==="aborted")return Hn;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const r of t){const i=await r.key,c=await r.value;s.push({key:i,value:c})}return Ei.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const r of t){const{key:i,value:c}=r;if(i.status==="aborted"||c.status==="aborted")return Hn;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||r.alwaysSet)&&(s[i.value]=c.value)}return{status:e.value,value:s}}}const Hn=Object.freeze({status:"aborted"}),zd=n=>({status:"dirty",value:n}),Eo=n=>({status:"valid",value:n}),u1=n=>n.status==="aborted",d1=n=>n.status==="dirty",Yu=n=>n.status==="valid",wh=n=>typeof Promise<"u"&&n instanceof Promise;var cn;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(cn||(cn={}));class ml{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const f1=(n,e)=>{if(Yu(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Bl(n.common.issues);return this._error=t,this._error}}};function ss(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:r}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,d)=>{const{message:f}=n;return c.code==="invalid_enum_value"?{message:f??d.defaultError}:typeof d.data>"u"?{message:f??s??d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:f??t??d.defaultError}},description:r}}class Es{get description(){return this._def.description}_getType(e){return pc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:pc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ei,ctx:{common:e.parent.common,data:e.data,parsedType:pc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(wh(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pc(e)},r=this._parseSync({data:e,path:s.path,parent:s});return f1(s,r)}"~validate"(e){var s,r;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pc(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return Yu(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(r=(s=i==null?void 0:i.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>Yu(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pc(e)},r=this._parse({data:e,path:s.path,parent:s}),i=await(wh(r)?r:Promise.resolve(r));return f1(s,i)}refine(e,t){const s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,i)=>{const c=e(r),d=()=>i.addIssue({code:Ot.custom,...s(r)});return typeof Promise<"u"&&c instanceof Promise?c.then(f=>f?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new $u({schema:this,typeName:Gn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ec.create(this,this._def)}nullable(){return Wu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dl.create(this)}promise(){return Ph.create(this,this._def)}or(e){return Dh.create([this,e],this._def)}and(e){return Rh.create(this,e,this._def)}transform(e){return new $u({...ss(this._def),schema:this,typeName:Gn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new H0({...ss(this._def),innerType:this,defaultValue:t,typeName:Gn.ZodDefault})}brand(){return new XT({typeName:Gn.ZodBranded,type:this,...ss(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Y0({...ss(this._def),innerType:this,catchValue:t,typeName:Gn.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ap.create(this,e)}readonly(){return q0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LT=/^c[^\s-]{8,}$/i,wT=/^[0-9a-z]+$/,IT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,DT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RT=/^[a-z0-9_-]{21}$/i,OT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let g0;const jT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,UT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,j2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",HT=new RegExp(`^${j2}$`);function B2(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function YT(n){return new RegExp(`^${B2(n)}$`)}function qT(n){let e=`${j2}T${B2(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function zT(n,e){return!!((e==="v4"||!e)&&jT.test(n)||(e==="v6"||!e)&&UT.test(n))}function $T(n,e){if(!OT.test(n))return!1;try{const[t]=n.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function WT(n,e){return!!((e==="v4"||!e)&&BT.test(n)||(e==="v6"||!e)&&FT.test(n))}class ll extends Es{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==nn.string){const i=this._getOrReturnCtx(e);return zt(i,{code:Ot.invalid_type,expected:nn.string,received:i.parsedType}),Hn}const s=new Ei;let r;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const c=e.data.length>i.value,d=e.data.length<i.value;(c||d)&&(r=this._getOrReturnCtx(e,r),c?zt(r,{code:Ot.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):d&&zt(r,{code:Ot.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")MT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"email",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")g0||(g0=new RegExp(kT,"u")),g0.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"emoji",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")DT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"uuid",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")RT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"nanoid",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")LT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"cuid",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")wT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"cuid2",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")IT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"ulid",code:Ot.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),zt(r,{validation:"url",code:Ot.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"regex",code:Ot.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?qT(i).test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?HT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?YT(i).test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?PT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"duration",code:Ot.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?zT(e.data,i.version)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"ip",code:Ot.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?$T(e.data,i.alg)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"jwt",code:Ot.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?WT(e.data,i.version)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"cidr",code:Ot.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?VT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"base64",code:Ot.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?GT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"base64url",code:Ot.invalid_string,message:i.message}),s.dirty()):ks.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:Ot.invalid_string,...cn.errToObj(s)})}_addCheck(e){return new ll({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...cn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...cn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...cn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...cn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...cn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...cn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...cn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...cn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...cn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...cn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...cn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...cn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...cn.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...cn.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...cn.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...cn.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...cn.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...cn.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...cn.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...cn.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...cn.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...cn.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...cn.errToObj(t)})}nonempty(e){return this.min(1,cn.errToObj(e))}trim(){return new ll({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ll({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ll({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ll.create=n=>new ll({checks:[],typeName:Gn.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...ss(n)});function KT(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,i=Number.parseInt(n.toFixed(r).replace(".","")),c=Number.parseInt(e.toFixed(r).replace(".",""));return i%c/10**r}class Kc extends Es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==nn.number){const i=this._getOrReturnCtx(e);return zt(i,{code:Ot.invalid_type,expected:nn.number,received:i.parsedType}),Hn}let s;const r=new Ei;for(const i of this._def.checks)i.kind==="int"?ks.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?KT(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.not_finite,message:i.message}),r.dirty()):ks.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,cn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,cn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,cn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,cn.toString(t))}setLimit(e,t,s,r){return new Kc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:cn.toString(r)}]})}_addCheck(e){return new Kc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:cn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:cn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:cn.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:cn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:cn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:cn.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ks.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Kc.create=n=>new Kc({checks:[],typeName:Gn.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ss(n)});class Xc extends Es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==nn.bigint)return this._getInvalidInput(e);let s;const r=new Ei;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):ks.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return zt(t,{code:Ot.invalid_type,expected:nn.bigint,received:t.parsedType}),Hn}gte(e,t){return this.setLimit("min",e,!0,cn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,cn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,cn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,cn.toString(t))}setLimit(e,t,s,r){return new Xc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:cn.toString(r)}]})}_addCheck(e){return new Xc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:cn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:cn.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Xc.create=n=>new Xc({checks:[],typeName:Gn.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...ss(n)});class Ih extends Es{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==nn.boolean){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.boolean,received:s.parsedType}),Hn}return Eo(e.data)}}Ih.create=n=>new Ih({typeName:Gn.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ss(n)});class qu extends Es{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==nn.date){const i=this._getOrReturnCtx(e);return zt(i,{code:Ot.invalid_type,expected:nn.date,received:i.parsedType}),Hn}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return zt(i,{code:Ot.invalid_date}),Hn}const s=new Ei;let r;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):ks.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:cn.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:cn.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}qu.create=n=>new qu({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Gn.ZodDate,...ss(n)});class h1 extends Es{_parse(e){if(this._getType(e)!==nn.symbol){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.symbol,received:s.parsedType}),Hn}return Eo(e.data)}}h1.create=n=>new h1({typeName:Gn.ZodSymbol,...ss(n)});class m1 extends Es{_parse(e){if(this._getType(e)!==nn.undefined){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.undefined,received:s.parsedType}),Hn}return Eo(e.data)}}m1.create=n=>new m1({typeName:Gn.ZodUndefined,...ss(n)});class p1 extends Es{_parse(e){if(this._getType(e)!==nn.null){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.null,received:s.parsedType}),Hn}return Eo(e.data)}}p1.create=n=>new p1({typeName:Gn.ZodNull,...ss(n)});class g1 extends Es{constructor(){super(...arguments),this._any=!0}_parse(e){return Eo(e.data)}}g1.create=n=>new g1({typeName:Gn.ZodAny,...ss(n)});class F0 extends Es{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Eo(e.data)}}F0.create=n=>new F0({typeName:Gn.ZodUnknown,...ss(n)});class _c extends Es{_parse(e){const t=this._getOrReturnCtx(e);return zt(t,{code:Ot.invalid_type,expected:nn.never,received:t.parsedType}),Hn}}_c.create=n=>new _c({typeName:Gn.ZodNever,...ss(n)});class x1 extends Es{_parse(e){if(this._getType(e)!==nn.undefined){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.void,received:s.parsedType}),Hn}return Eo(e.data)}}x1.create=n=>new x1({typeName:Gn.ZodVoid,...ss(n)});class dl extends Es{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==nn.array)return zt(t,{code:Ot.invalid_type,expected:nn.array,received:t.parsedType}),Hn;if(r.exactLength!==null){const c=t.data.length>r.exactLength.value,d=t.data.length<r.exactLength.value;(c||d)&&(zt(t,{code:c?Ot.too_big:Ot.too_small,minimum:d?r.exactLength.value:void 0,maximum:c?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(zt(t,{code:Ot.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(zt(t,{code:Ot.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((c,d)=>r.type._parseAsync(new ml(t,c,t.path,d)))).then(c=>Ei.mergeArray(s,c));const i=[...t.data].map((c,d)=>r.type._parseSync(new ml(t,c,t.path,d)));return Ei.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new dl({...this._def,minLength:{value:e,message:cn.toString(t)}})}max(e,t){return new dl({...this._def,maxLength:{value:e,message:cn.toString(t)}})}length(e,t){return new dl({...this._def,exactLength:{value:e,message:cn.toString(t)}})}nonempty(e){return this.min(1,e)}}dl.create=(n,e)=>new dl({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Gn.ZodArray,...ss(e)});function Ru(n){if(n instanceof lr){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=Ec.create(Ru(s))}return new lr({...n._def,shape:()=>e})}else return n instanceof dl?new dl({...n._def,type:Ru(n.element)}):n instanceof Ec?Ec.create(Ru(n.unwrap())):n instanceof Wu?Wu.create(Ru(n.unwrap())):n instanceof Zc?Zc.create(n.items.map(e=>Ru(e))):n}class lr extends Es{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ks.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==nn.object){const h=this._getOrReturnCtx(e);return zt(h,{code:Ot.invalid_type,expected:nn.object,received:h.parsedType}),Hn}const{status:s,ctx:r}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof _c&&this._def.unknownKeys==="strip"))for(const h in r.data)c.includes(h)||d.push(h);const f=[];for(const h of c){const _=i[h],b=r.data[h];f.push({key:{status:"valid",value:h},value:_._parse(new ml(r,b,r.path,h)),alwaysSet:h in r.data})}if(this._def.catchall instanceof _c){const h=this._def.unknownKeys;if(h==="passthrough")for(const _ of d)f.push({key:{status:"valid",value:_},value:{status:"valid",value:r.data[_]}});else if(h==="strict")d.length>0&&(zt(r,{code:Ot.unrecognized_keys,keys:d}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const _ of d){const b=r.data[_];f.push({key:{status:"valid",value:_},value:h._parse(new ml(r,b,r.path,_)),alwaysSet:_ in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const h=[];for(const _ of f){const b=await _.key,v=await _.value;h.push({key:b,value:v,alwaysSet:_.alwaysSet})}return h}).then(h=>Ei.mergeObjectSync(s,h)):Ei.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return cn.errToObj,new lr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var i,c;const r=((c=(i=this._def).errorMap)==null?void 0:c.call(i,t,s).message)??s.defaultError;return t.code==="unrecognized_keys"?{message:cn.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(e){return new lr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Gn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new lr({...this._def,catchall:e})}pick(e){const t={};for(const s of ks.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new lr({...this._def,shape:()=>t})}omit(e){const t={};for(const s of ks.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new lr({...this._def,shape:()=>t})}deepPartial(){return Ru(this)}partial(e){const t={};for(const s of ks.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new lr({...this._def,shape:()=>t})}required(e){const t={};for(const s of ks.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Ec;)i=i._def.innerType;t[s]=i}return new lr({...this._def,shape:()=>t})}keyof(){return U2(ks.objectKeys(this.shape))}}lr.create=(n,e)=>new lr({shape:()=>n,unknownKeys:"strip",catchall:_c.create(),typeName:Gn.ZodObject,...ss(e)});lr.strictCreate=(n,e)=>new lr({shape:()=>n,unknownKeys:"strict",catchall:_c.create(),typeName:Gn.ZodObject,...ss(e)});lr.lazycreate=(n,e)=>new lr({shape:n,unknownKeys:"strip",catchall:_c.create(),typeName:Gn.ZodObject,...ss(e)});class Dh extends Es{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function r(i){for(const d of i)if(d.result.status==="valid")return d.result;for(const d of i)if(d.result.status==="dirty")return t.common.issues.push(...d.ctx.common.issues),d.result;const c=i.map(d=>new Bl(d.ctx.common.issues));return zt(t,{code:Ot.invalid_union,unionErrors:c}),Hn}if(t.common.async)return Promise.all(s.map(async i=>{const c={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(r);{let i;const c=[];for(const f of s){const h={...t,common:{...t.common,issues:[]},parent:null},_=f._parseSync({data:t.data,path:t.path,parent:h});if(_.status==="valid")return _;_.status==="dirty"&&!i&&(i={result:_,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const d=c.map(f=>new Bl(f));return zt(t,{code:Ot.invalid_union,unionErrors:d}),Hn}}get options(){return this._def.options}}Dh.create=(n,e)=>new Dh({options:n,typeName:Gn.ZodUnion,...ss(e)});function V0(n,e){const t=pc(n),s=pc(e);if(n===e)return{valid:!0,data:n};if(t===nn.object&&s===nn.object){const r=ks.objectKeys(e),i=ks.objectKeys(n).filter(d=>r.indexOf(d)!==-1),c={...n,...e};for(const d of i){const f=V0(n[d],e[d]);if(!f.valid)return{valid:!1};c[d]=f.data}return{valid:!0,data:c}}else if(t===nn.array&&s===nn.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let i=0;i<n.length;i++){const c=n[i],d=e[i],f=V0(c,d);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return t===nn.date&&s===nn.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Rh extends Es{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=(i,c)=>{if(u1(i)||u1(c))return Hn;const d=V0(i.value,c.value);return d.valid?((d1(i)||d1(c))&&t.dirty(),{status:t.value,value:d.data}):(zt(s,{code:Ot.invalid_intersection_types}),Hn)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,c])=>r(i,c)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Rh.create=(n,e,t)=>new Rh({left:n,right:e,typeName:Gn.ZodIntersection,...ss(t)});class Zc extends Es{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.array)return zt(s,{code:Ot.invalid_type,expected:nn.array,received:s.parsedType}),Hn;if(s.data.length<this._def.items.length)return zt(s,{code:Ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Hn;!this._def.rest&&s.data.length>this._def.items.length&&(zt(s,{code:Ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((c,d)=>{const f=this._def.items[d]||this._def.rest;return f?f._parse(new ml(s,c,s.path,d)):null}).filter(c=>!!c);return s.common.async?Promise.all(i).then(c=>Ei.mergeArray(t,c)):Ei.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Zc({...this._def,rest:e})}}Zc.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zc({items:n,typeName:Gn.ZodTuple,rest:null,...ss(e)})};class Oh extends Es{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.object)return zt(s,{code:Ot.invalid_type,expected:nn.object,received:s.parsedType}),Hn;const r=[],i=this._def.keyType,c=this._def.valueType;for(const d in s.data)r.push({key:i._parse(new ml(s,d,s.path,d)),value:c._parse(new ml(s,s.data[d],s.path,d)),alwaysSet:d in s.data});return s.common.async?Ei.mergeObjectAsync(t,r):Ei.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Es?new Oh({keyType:e,valueType:t,typeName:Gn.ZodRecord,...ss(s)}):new Oh({keyType:ll.create(),valueType:e,typeName:Gn.ZodRecord,...ss(t)})}}class E1 extends Es{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.map)return zt(s,{code:Ot.invalid_type,expected:nn.map,received:s.parsedType}),Hn;const r=this._def.keyType,i=this._def.valueType,c=[...s.data.entries()].map(([d,f],h)=>({key:r._parse(new ml(s,d,s.path,[h,"key"])),value:i._parse(new ml(s,f,s.path,[h,"value"]))}));if(s.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const f of c){const h=await f.key,_=await f.value;if(h.status==="aborted"||_.status==="aborted")return Hn;(h.status==="dirty"||_.status==="dirty")&&t.dirty(),d.set(h.value,_.value)}return{status:t.value,value:d}})}else{const d=new Map;for(const f of c){const h=f.key,_=f.value;if(h.status==="aborted"||_.status==="aborted")return Hn;(h.status==="dirty"||_.status==="dirty")&&t.dirty(),d.set(h.value,_.value)}return{status:t.value,value:d}}}}E1.create=(n,e,t)=>new E1({valueType:e,keyType:n,typeName:Gn.ZodMap,...ss(t)});class nf extends Es{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.set)return zt(s,{code:Ot.invalid_type,expected:nn.set,received:s.parsedType}),Hn;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(zt(s,{code:Ot.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(zt(s,{code:Ot.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function c(f){const h=new Set;for(const _ of f){if(_.status==="aborted")return Hn;_.status==="dirty"&&t.dirty(),h.add(_.value)}return{status:t.value,value:h}}const d=[...s.data.values()].map((f,h)=>i._parse(new ml(s,f,s.path,h)));return s.common.async?Promise.all(d).then(f=>c(f)):c(d)}min(e,t){return new nf({...this._def,minSize:{value:e,message:cn.toString(t)}})}max(e,t){return new nf({...this._def,maxSize:{value:e,message:cn.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}nf.create=(n,e)=>new nf({valueType:n,minSize:null,maxSize:null,typeName:Gn.ZodSet,...ss(e)});class G0 extends Es{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}G0.create=(n,e)=>new G0({getter:n,typeName:Gn.ZodLazy,...ss(e)});class _1 extends Es{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return zt(t,{received:t.data,code:Ot.invalid_literal,expected:this._def.value}),Hn}return{status:"valid",value:e.data}}get value(){return this._def.value}}_1.create=(n,e)=>new _1({value:n,typeName:Gn.ZodLiteral,...ss(e)});function U2(n,e){return new zu({values:n,typeName:Gn.ZodEnum,...ss(e)})}class zu extends Es{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return zt(t,{expected:ks.joinValues(s),received:t.parsedType,code:Ot.invalid_type}),Hn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return zt(t,{received:t.data,code:Ot.invalid_enum_value,options:s}),Hn}return Eo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return zu.create(e,{...this._def,...t})}exclude(e,t=this._def){return zu.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}zu.create=U2;class b1 extends Es{_parse(e){const t=ks.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==nn.string&&s.parsedType!==nn.number){const r=ks.objectValues(t);return zt(s,{expected:ks.joinValues(r),received:s.parsedType,code:Ot.invalid_type}),Hn}if(this._cache||(this._cache=new Set(ks.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=ks.objectValues(t);return zt(s,{received:s.data,code:Ot.invalid_enum_value,options:r}),Hn}return Eo(e.data)}get enum(){return this._def.values}}b1.create=(n,e)=>new b1({values:n,typeName:Gn.ZodNativeEnum,...ss(e)});class Ph extends Es{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==nn.promise&&t.common.async===!1)return zt(t,{code:Ot.invalid_type,expected:nn.promise,received:t.parsedType}),Hn;const s=t.parsedType===nn.promise?t.data:Promise.resolve(t.data);return Eo(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ph.create=(n,e)=>new Ph({type:n,typeName:Gn.ZodPromise,...ss(e)});class $u extends Es{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Gn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:c=>{zt(s,c),c.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const c=r.transform(s.data,i);if(s.common.async)return Promise.resolve(c).then(async d=>{if(t.value==="aborted")return Hn;const f=await this._def.schema._parseAsync({data:d,path:s.path,parent:s});return f.status==="aborted"?Hn:f.status==="dirty"||t.value==="dirty"?zd(f.value):f});{if(t.value==="aborted")return Hn;const d=this._def.schema._parseSync({data:c,path:s.path,parent:s});return d.status==="aborted"?Hn:d.status==="dirty"||t.value==="dirty"?zd(d.value):d}}if(r.type==="refinement"){const c=d=>{const f=r.refinement(d,i);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(s.common.async===!1){const d=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return d.status==="aborted"?Hn:(d.status==="dirty"&&t.dirty(),c(d.value),{status:t.value,value:d.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(d=>d.status==="aborted"?Hn:(d.status==="dirty"&&t.dirty(),c(d.value).then(()=>({status:t.value,value:d.value}))))}if(r.type==="transform")if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Yu(c))return Hn;const d=r.transform(c.value,i);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:d}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>Yu(c)?Promise.resolve(r.transform(c.value,i)).then(d=>({status:t.value,value:d})):Hn);ks.assertNever(r)}}$u.create=(n,e,t)=>new $u({schema:n,typeName:Gn.ZodEffects,effect:e,...ss(t)});$u.createWithPreprocess=(n,e,t)=>new $u({schema:e,effect:{type:"preprocess",transform:n},typeName:Gn.ZodEffects,...ss(t)});class Ec extends Es{_parse(e){return this._getType(e)===nn.undefined?Eo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ec.create=(n,e)=>new Ec({innerType:n,typeName:Gn.ZodOptional,...ss(e)});class Wu extends Es{_parse(e){return this._getType(e)===nn.null?Eo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wu.create=(n,e)=>new Wu({innerType:n,typeName:Gn.ZodNullable,...ss(e)});class H0 extends Es{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===nn.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}H0.create=(n,e)=>new H0({innerType:n,typeName:Gn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ss(e)});class Y0 extends Es{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return wh(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Bl(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Bl(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Y0.create=(n,e)=>new Y0({innerType:n,typeName:Gn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ss(e)});class T1 extends Es{_parse(e){if(this._getType(e)!==nn.nan){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.nan,received:s.parsedType}),Hn}return{status:"valid",value:e.data}}}T1.create=n=>new T1({typeName:Gn.ZodNaN,...ss(n)});class XT extends Es{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ap extends Es{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Hn:i.status==="dirty"?(t.dirty(),zd(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Hn:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new Ap({in:e,out:t,typeName:Gn.ZodPipeline})}}class q0 extends Es{_parse(e){const t=this._def.innerType._parse(e),s=r=>(Yu(r)&&(r.value=Object.freeze(r.value)),r);return wh(t)?t.then(r=>s(r)):s(t)}unwrap(){return this._def.innerType}}q0.create=(n,e)=>new q0({innerType:n,typeName:Gn.ZodReadonly,...ss(e)});var Gn;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Gn||(Gn={}));const Hc=ll.create,N1=Kc.create;Xc.create;const ZT=Ih.create;qu.create;const v1=F0.create;_c.create;const $d=dl.create,JT=lr.create,QT=Dh.create;Rh.create;Zc.create;const eN=Oh.create,tN=G0.create,nN=zu.create;Ph.create;Ec.create;Wu.create;const Cu={string:n=>ll.create({...n,coerce:!0}),number:n=>Kc.create({...n,coerce:!0}),boolean:n=>Ih.create({...n,coerce:!0}),bigint:n=>Xc.create({...n,coerce:!0}),date:n=>qu.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sN,aN;function rN(){return{geminiUrl:sN,vertexUrl:aN}}function iN(n,e,t){var s,r,i;if(!(!((s=n.httpOptions)===null||s===void 0)&&s.baseUrl)){const c=rN();return n.vertexai?(r=c.vertexUrl)!==null&&r!==void 0?r:e:(i=c.geminiUrl)!==null&&i!==void 0?i:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zu{}function Pn(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function x(n,e,t){for(let i=0;i<e.length-1;i++){const c=e[i];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let h=0;h<f.length;h++){const _=f[h];x(_,e.slice(i+1),t[h])}else for(const h of f)x(h,e.slice(i+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];x(f[0],e.slice(i+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else n[s]=t}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const s=e[t];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in n){const i=n[r];return Array.isArray(i)?i.map(c=>g(c,e.slice(t+1))):void 0}else return}else n=n[s]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var y1;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(y1||(y1={}));var A1;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(A1||(A1={}));var cl;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cl||(cl={}));var S1;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(S1||(S1={}));var C1;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(C1||(C1={}));var L1;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(L1||(L1={}));var w1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(w1||(w1={}));var I1;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(I1||(I1={}));var D1;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(D1||(D1={}));var R1;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(R1||(R1={}));var O1;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O1||(O1={}));var P1;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(P1||(P1={}));var M1;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(M1||(M1={}));var Mh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Mh||(Mh={}));var k1;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(k1||(k1={}));var z0;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(z0||(z0={}));var j1;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(j1||(j1={}));var B1;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(B1||(B1={}));var U1;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(U1||(U1={}));var F1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(F1||(F1={}));var V1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(V1||(V1={}));var G1;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(G1||(G1={}));var H1;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(H1||(H1={}));var Y1;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Y1||(Y1={}));var q1;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(q1||(q1={}));var z1;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(z1||(z1={}));var $1;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($1||($1={}));var W1;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(W1||(W1={}));var K1;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(K1||(K1={}));var X1;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(X1||(X1={}));var Z1;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Z1||(Z1={}));var J1;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(J1||(J1={}));var Q1;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Q1||(Q1={}));var eE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eE||(eE={}));var tE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(tE||(tE={}));var nE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nE||(nE={}));var sE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(sE||(sE={}));var aE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(aE||(aE={}));var Mu;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Mu||(Mu={}));class Ud{get text(){var e,t,s,r,i,c,d,f;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const b=[];for(const v of(f=(d=(c=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[T,C]of Object.entries(v))T!=="text"&&T!=="thought"&&(C!==null||C!==void 0)&&b.push(T);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;_=!0,h+=v.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,s,r,i,c,d,f;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const b of(f=(d=(c=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[v,T]of Object.entries(b))v!=="inlineData"&&(T!==null||T!==void 0)&&_.push(v);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,s,r,i,c,d,f;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(c=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,s,r,i,c,d,f,h;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(d=(c=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,s,r,i,c,d,f,h;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(d=(c=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class rE{}class iE{}class oN{}class lN{}class oE{}class lE{}class cE{}class cN{}class uE{}class dE{}class fE{}class uN{}class $0{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class dN{}class fN{}class hN{get text(){var e,t,s;let r="",i=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&c.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;i=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,t,s;let r="";const i=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,f]of Object.entries(c))d!=="inlineData"&&f!==null&&i.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class mN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function la(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function F2(n,e){const t=la(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function V2(n,e){return Array.isArray(e)?e.map(t=>kh(n,t)):[kh(n,e)]}function kh(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function pN(n,e){const t=kh(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function gN(n,e){const t=kh(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function hE(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function G2(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>hE(n,t)):[hE(n,e)]}function W0(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function mE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function pE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function xi(n,e){if(e==null)throw new Error("ContentUnion is required");return W0(e)?e:{role:"user",parts:G2(n,e)}}function H2(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=xi(n,t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=xi(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>xi(n,t)):[xi(n,e)]}function Vo(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(mE(e)||pE(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xi(n,e)]}const t=[],s=[],r=W0(e[0]);for(const i of e){const c=W0(i);if(c!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(i);else{if(mE(i)||pE(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(i)}}return r||t.push({role:"user",parts:G2(n,s)}),t}const xN=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),gE=nN(["string","number","integer","object","array","boolean","null"]),EN=QT([gE,$d(gE)]);function _N(n=!0){const e=tN(()=>{const t=JT({type:EN.optional(),format:Hc().optional(),title:Hc().optional(),description:Hc().optional(),default:v1().optional(),items:e.optional(),minItems:Cu.string().optional(),maxItems:Cu.string().optional(),enum:$d(v1()).optional(),properties:eN(Hc(),e).optional(),required:$d(Hc()).optional(),minProperties:Cu.string().optional(),maxProperties:Cu.string().optional(),propertyOrdering:$d(Hc()).optional(),minimum:N1().optional(),maximum:N1().optional(),minLength:Cu.string().optional(),maxLength:Cu.string().optional(),pattern:Hc().optional(),anyOf:$d(e).optional(),additionalProperties:ZT().optional()});return n?t.strict():t});return e}function bN(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(cl).includes(t[0].toUpperCase())?t[0].toUpperCase():cl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(cl).includes(s.toUpperCase())?s.toUpperCase():cl.TYPE_UNSPECIFIED})}}function ju(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,n=i[1]):i[1].type==="null"&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&bN(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(cl).includes(d.toUpperCase())?d.toUpperCase():cl.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=ju(d);else if(s.includes(c)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(ju(h))}e[c]=f}else if(r.includes(c)){const f={};for(const[h,_]of Object.entries(d))f[h]=ju(_);e[c]=f}else{if(c==="additionalProperties")continue;e[c]=d}return e}function jh(n,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=_N().parse(e);return ju(t)}else return ju(e)}function Y2(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Sp(n,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function rf(n,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=jh(n,t.parameters)),t.response&&(t.response=jh(n,t.response));return e}function of(n,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const s of e)t.push(s);return t}function TN(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function vc(n,e){if(typeof e!="string")throw new Error("name must be a string");return TN(n,e,"cachedContents")}function q2(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function yc(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function NN(n){return n!=null&&typeof n=="object"&&"name"in n}function vN(n){return n!=null&&typeof n=="object"&&"video"in n}function yN(n){return n!=null&&typeof n=="object"&&"uri"in n}function z2(n,e){var t;let s;if(NN(e)&&(s=e.name),!(yN(e)&&(s=e.uri,s===void 0))&&!(vN(e)&&(s=(t=e.video)===null||t===void 0?void 0:t.uri,s===void 0))){if(typeof e=="string"&&(s=e),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const i=s.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${s}`);s=i[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function $2(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function W2(n,e){for(const t of["models","tunedModels","publisherModels"])if(AN(e,t))return e[t];return[]}function AN(n,e){return n!==null&&typeof n=="object"&&e in n}function SN(n,e={}){const t=n,s={name:t.name,description:t.description,parameters:ju($h(t.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function CN(n,e={}){const t=[],s=new Set;for(const r of n){const i=r.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const c=SN(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function LN(n){const e=[];for(const t of n)e.push($h(t));return e}function wN(n){const e={};for(const[t,s]of Object.entries(n)){const r=s;e[t]=$h(r)}return e}function $h(n){const e=new Set(["items"]),t=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[i,c]of Object.entries(n))if(e.has(i))r[i]=$h(c);else if(t.has(i))r[i]=LN(c);else if(s.has(i))r[i]=wN(c);else if(i==="type"){const d=c.toUpperCase();r[i]=Object.values(cl).includes(d)?d:cl.TYPE_UNSPECIFIED}else xN.has(i)&&(r[i]=c);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IN(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function DN(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function RN(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["fileUri"]);s!=null&&x(t,["fileUri"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function ON(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],IN(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],DN(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],RN(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function xE(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>ON(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function PN(n,e){const t={},s=g(e,["behavior"]);s!=null&&x(t,["behavior"],s);const r=g(e,["description"]);r!=null&&x(t,["description"],r);const i=g(e,["name"]);i!=null&&x(t,["name"],i);const c=g(e,["parameters"]);c!=null&&x(t,["parameters"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],d),t}function MN(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function kN(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],MN(n,s)),t}function jN(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function BN(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],jN(n,s)),t}function UN(){return{}}function FN(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(h=>PN(n,h))),x(t,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearch"]);r!=null&&x(t,["googleSearch"],kN(n,r));const i=g(e,["googleSearchRetrieval"]);if(i!=null&&x(t,["googleSearchRetrieval"],BN(n,i)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&x(t,["urlContext"],UN());const d=g(e,["codeExecution"]);return d!=null&&x(t,["codeExecution"],d),t}function VN(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["allowedFunctionNames"]);return r!=null&&x(t,["allowedFunctionNames"],r),t}function GN(n,e){const t={},s=g(e,["latitude"]);s!=null&&x(t,["latitude"],s);const r=g(e,["longitude"]);return r!=null&&x(t,["longitude"],r),t}function HN(n,e){const t={},s=g(e,["latLng"]);s!=null&&x(t,["latLng"],GN(n,s));const r=g(e,["languageCode"]);return r!=null&&x(t,["languageCode"],r),t}function YN(n,e){const t={},s=g(e,["functionCallingConfig"]);s!=null&&x(t,["functionCallingConfig"],VN(n,s));const r=g(e,["retrievalConfig"]);return r!=null&&x(t,["retrievalConfig"],HN(n,r)),t}function qN(n,e,t){const s={},r=g(e,["ttl"]);t!==void 0&&r!=null&&x(t,["ttl"],r);const i=g(e,["expireTime"]);t!==void 0&&i!=null&&x(t,["expireTime"],i);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let b=Vo(n,d);Array.isArray(b)&&(b=b.map(v=>xE(n,v))),x(t,["contents"],b)}const f=g(e,["systemInstruction"]);t!==void 0&&f!=null&&x(t,["systemInstruction"],xE(n,xi(n,f)));const h=g(e,["tools"]);if(t!==void 0&&h!=null){let b=h;Array.isArray(b)&&(b=b.map(v=>FN(n,v))),x(t,["tools"],b)}const _=g(e,["toolConfig"]);if(t!==void 0&&_!=null&&x(t,["toolConfig"],YN(n,_)),g(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function zN(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["model"],F2(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],qN(n,r,t)),t}function $N(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],vc(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function WN(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],vc(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function KN(n,e,t){const s={},r=g(e,["ttl"]);t!==void 0&&r!=null&&x(t,["ttl"],r);const i=g(e,["expireTime"]);return t!==void 0&&i!=null&&x(t,["expireTime"],i),s}function XN(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],vc(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],KN(n,r,t)),t}function ZN(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);return t!==void 0&&i!=null&&x(t,["_query","pageToken"],i),s}function JN(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],ZN(n,s,t)),t}function QN(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function ev(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["data"]);r!=null&&x(t,["data"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function tv(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["fileUri"]);r!=null&&x(t,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function nv(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],QN(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],ev(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],tv(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function EE(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>nv(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function sv(n,e){const t={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=g(e,["description"]);s!=null&&x(t,["description"],s);const r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["parameters"]);i!=null&&x(t,["parameters"],i);const c=g(e,["response"]);return c!=null&&x(t,["response"],c),t}function av(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function rv(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],av(n,s)),t}function iv(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function ov(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],iv(n,s)),t}function lv(){return{}}function cv(n,e){const t={},s=g(e,["apiKeyString"]);return s!=null&&x(t,["apiKeyString"],s),t}function uv(n,e){const t={},s=g(e,["apiKeyConfig"]);s!=null&&x(t,["apiKeyConfig"],cv(n,s));const r=g(e,["authType"]);r!=null&&x(t,["authType"],r);const i=g(e,["googleServiceAccountConfig"]);i!=null&&x(t,["googleServiceAccountConfig"],i);const c=g(e,["httpBasicAuthConfig"]);c!=null&&x(t,["httpBasicAuthConfig"],c);const d=g(e,["oauthConfig"]);d!=null&&x(t,["oauthConfig"],d);const f=g(e,["oidcConfig"]);return f!=null&&x(t,["oidcConfig"],f),t}function dv(n,e){const t={},s=g(e,["authConfig"]);return s!=null&&x(t,["authConfig"],uv(n,s)),t}function fv(){return{}}function hv(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(v=>sv(n,v))),x(t,["functionDeclarations"],b)}const r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r);const i=g(e,["googleSearch"]);i!=null&&x(t,["googleSearch"],rv(n,i));const c=g(e,["googleSearchRetrieval"]);c!=null&&x(t,["googleSearchRetrieval"],ov(n,c)),g(e,["enterpriseWebSearch"])!=null&&x(t,["enterpriseWebSearch"],lv());const f=g(e,["googleMaps"]);f!=null&&x(t,["googleMaps"],dv(n,f)),g(e,["urlContext"])!=null&&x(t,["urlContext"],fv());const _=g(e,["codeExecution"]);return _!=null&&x(t,["codeExecution"],_),t}function mv(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["allowedFunctionNames"]);return r!=null&&x(t,["allowedFunctionNames"],r),t}function pv(n,e){const t={},s=g(e,["latitude"]);s!=null&&x(t,["latitude"],s);const r=g(e,["longitude"]);return r!=null&&x(t,["longitude"],r),t}function gv(n,e){const t={},s=g(e,["latLng"]);s!=null&&x(t,["latLng"],pv(n,s));const r=g(e,["languageCode"]);return r!=null&&x(t,["languageCode"],r),t}function xv(n,e){const t={},s=g(e,["functionCallingConfig"]);s!=null&&x(t,["functionCallingConfig"],mv(n,s));const r=g(e,["retrievalConfig"]);return r!=null&&x(t,["retrievalConfig"],gv(n,r)),t}function Ev(n,e,t){const s={},r=g(e,["ttl"]);t!==void 0&&r!=null&&x(t,["ttl"],r);const i=g(e,["expireTime"]);t!==void 0&&i!=null&&x(t,["expireTime"],i);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let v=Vo(n,d);Array.isArray(v)&&(v=v.map(T=>EE(n,T))),x(t,["contents"],v)}const f=g(e,["systemInstruction"]);t!==void 0&&f!=null&&x(t,["systemInstruction"],EE(n,xi(n,f)));const h=g(e,["tools"]);if(t!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(T=>hv(n,T))),x(t,["tools"],v)}const _=g(e,["toolConfig"]);t!==void 0&&_!=null&&x(t,["toolConfig"],xv(n,_));const b=g(e,["kmsKeyName"]);return t!==void 0&&b!=null&&x(t,["encryption_spec","kmsKeyName"],b),s}function _v(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["model"],F2(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],Ev(n,r,t)),t}function bv(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],vc(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Tv(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],vc(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Nv(n,e,t){const s={},r=g(e,["ttl"]);t!==void 0&&r!=null&&x(t,["ttl"],r);const i=g(e,["expireTime"]);return t!==void 0&&i!=null&&x(t,["expireTime"],i),s}function vv(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],vc(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],Nv(n,r,t)),t}function yv(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);return t!==void 0&&i!=null&&x(t,["_query","pageToken"],i),s}function Av(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],yv(n,s,t)),t}function Eh(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["displayName"]);r!=null&&x(t,["displayName"],r);const i=g(e,["model"]);i!=null&&x(t,["model"],i);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const f=g(e,["expireTime"]);f!=null&&x(t,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&x(t,["usageMetadata"],h),t}function Sv(){return{}}function Cv(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(c=>Eh(n,c))),x(t,["cachedContents"],i)}return t}function _h(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["displayName"]);r!=null&&x(t,["displayName"],r);const i=g(e,["model"]);i!=null&&x(t,["model"],i);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const f=g(e,["expireTime"]);f!=null&&x(t,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&x(t,["usageMetadata"],h),t}function Lv(){return{}}function wv(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(c=>_h(n,c))),x(t,["cachedContents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ku;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ku||(Ku={}));class Wh{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};s?typeof s=="object"?c=Object.assign({},s):c=s:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(i=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iv extends Zu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wh(Ku.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=_v(this.apiClient,e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_h(this.apiClient,_))}else{const h=zN(this.apiClient,e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Eh(this.apiClient,_))}}async get(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=bv(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_h(this.apiClient,_))}else{const h=$N(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Eh(this.apiClient,_))}}async delete(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=Tv(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(()=>{const _=Lv(),b=new dE;return Object.assign(b,_),b})}else{const h=WN(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(()=>{const _=Sv(),b=new dE;return Object.assign(b,_),b})}}async update(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=vv(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_h(this.apiClient,_))}else{const h=XN(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Eh(this.apiClient,_))}}async listInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=Av(this.apiClient,e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=wv(this.apiClient,_),v=new fE;return Object.assign(v,b),v})}else{const h=JN(this.apiClient,e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=Cv(this.apiClient,_),v=new fE;return Object.assign(v,b),v})}}}function _E(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ea(n){return this instanceof Ea?(this.v=n,this):new Ea(n)}function Bu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(T){return function(C){return Promise.resolve(C).then(T,b)}}function d(T,C){s[T]&&(r[T]=function(L){return new Promise(function(R,I){i.push([T,L,R,I])>1||f(T,L)})},C&&(r[T]=C(r[T])))}function f(T,C){try{h(s[T](C))}catch(L){v(i[0][3],L)}}function h(T){T.value instanceof Ea?Promise.resolve(T.value.v).then(_,b):v(i[0][2],T)}function _(T){f("next",T)}function b(T){f("throw",T)}function v(T,C){T(C),i.shift(),i.length&&f(i[0][0],i[0][1])}}function Kd(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _E=="function"?_E(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(i){t[i]=n[i]&&function(c){return new Promise(function(d,f){c=n[i](c),r(d,f,c.done,c.value)})}}function r(i,c,d,f){Promise.resolve(f).then(function(h){i({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dv(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:K2(t)}function K2(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Rv(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let i=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),i&&!K2(n[s])&&(i=!1),s++;i?e.push(...r):e.pop()}return e}class Ov{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Pv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Pv{constructor(e,t,s,r={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),Rv(i)}async sendMessage(e){var t;await this.sendPromise;const s=xi(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var i,c,d;const f=await r,h=(c=(i=f.candidates)===null||i===void 0?void 0:i[0])===null||c===void 0?void 0:c.content,_=f.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let v=[];_!=null&&(v=(d=_.slice(b))!==null&&d!==void 0?d:[]);const T=h?[h]:[];this.recordHistory(s,T,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=xi(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,s)}getHistory(e=!1){const t=e?bE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return Bu(this,arguments,function*(){var c,d,f,h;const _=[];try{for(var b=!0,v=Kd(e),T;T=yield Ea(v.next()),c=T.done,!c;b=!0){h=T.value,b=!1;const C=h;if(Dv(C)){const L=(r=(s=C.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;L!==void 0&&_.push(L)}yield yield Ea(C)}}catch(C){d={error:C}}finally{try{!b&&!c&&(f=v.return)&&(yield Ea(f.call(v)))}finally{if(d)throw d.error}}this.recordHistory(t,_)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(i=>i.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...bE(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mv(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);return t!==void 0&&i!=null&&x(t,["_query","pageToken"],i),s}function kv(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],Mv(n,s,t)),t}function jv(n,e){const t={},s=g(e,["details"]);s!=null&&x(t,["details"],s);const r=g(e,["message"]);r!=null&&x(t,["message"],r);const i=g(e,["code"]);return i!=null&&x(t,["code"],i),t}function Bv(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["displayName"]);r!=null&&x(t,["displayName"],r);const i=g(e,["mimeType"]);i!=null&&x(t,["mimeType"],i);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const f=g(e,["expirationTime"]);f!=null&&x(t,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&x(t,["updateTime"],h);const _=g(e,["sha256Hash"]);_!=null&&x(t,["sha256Hash"],_);const b=g(e,["uri"]);b!=null&&x(t,["uri"],b);const v=g(e,["downloadUri"]);v!=null&&x(t,["downloadUri"],v);const T=g(e,["state"]);T!=null&&x(t,["state"],T);const C=g(e,["source"]);C!=null&&x(t,["source"],C);const L=g(e,["videoMetadata"]);L!=null&&x(t,["videoMetadata"],L);const R=g(e,["error"]);return R!=null&&x(t,["error"],jv(n,R)),t}function Uv(n,e){const t={},s=g(e,["file"]);s!=null&&x(t,["file"],Bv(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Fv(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","file"],z2(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Vv(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","file"],z2(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Gv(n,e){const t={},s=g(e,["details"]);s!=null&&x(t,["details"],s);const r=g(e,["message"]);r!=null&&x(t,["message"],r);const i=g(e,["code"]);return i!=null&&x(t,["code"],i),t}function K0(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["displayName"]);r!=null&&x(t,["displayName"],r);const i=g(e,["mimeType"]);i!=null&&x(t,["mimeType"],i);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const f=g(e,["expirationTime"]);f!=null&&x(t,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&x(t,["updateTime"],h);const _=g(e,["sha256Hash"]);_!=null&&x(t,["sha256Hash"],_);const b=g(e,["uri"]);b!=null&&x(t,["uri"],b);const v=g(e,["downloadUri"]);v!=null&&x(t,["downloadUri"],v);const T=g(e,["state"]);T!=null&&x(t,["state"],T);const C=g(e,["source"]);C!=null&&x(t,["source"],C);const L=g(e,["videoMetadata"]);L!=null&&x(t,["videoMetadata"],L);const R=g(e,["error"]);return R!=null&&x(t,["error"],Gv(n,R)),t}function Hv(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(c=>K0(n,c))),x(t,["files"],i)}return t}function Yv(){return{}}function qv(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zv extends Zu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wh(Ku.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>K0(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kv(this.apiClient,e);return i=Pn("files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=Hv(this.apiClient,f),_=new uN;return Object.assign(_,h),_})}}async createInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Uv(this.apiClient,e);return i=Pn("upload/v1beta/files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(()=>{const f=Yv(),h=new dN;return Object.assign(h,f),h})}}async get(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Fv(this.apiClient,e);return i=Pn("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>K0(this.apiClient,f))}}async delete(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Vv(this.apiClient,e);return i=Pn("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(()=>{const f=qv(),h=new fN;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $v(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function Wv(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function X2(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],$v(n,s)),t}function Kv(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],Wv(n,s)),t}function Xv(n,e){const t={},s=g(e,["speaker"]);s!=null&&x(t,["speaker"],s);const r=g(e,["voiceConfig"]);return r!=null&&x(t,["voiceConfig"],X2(n,r)),t}function Zv(n,e){const t={},s=g(e,["speakerVoiceConfigs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Xv(n,i))),x(t,["speakerVoiceConfigs"],r)}return t}function Jv(n,e){const t={},s=g(e,["voiceConfig"]);s!=null&&x(t,["voiceConfig"],X2(n,s));const r=g(e,["multiSpeakerVoiceConfig"]);r!=null&&x(t,["multiSpeakerVoiceConfig"],Zv(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function Qv(n,e){const t={},s=g(e,["voiceConfig"]);if(s!=null&&x(t,["voiceConfig"],Kv(n,s)),g(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=g(e,["languageCode"]);return r!=null&&x(t,["languageCode"],r),t}function ey(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function ty(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function ny(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function sy(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["data"]);r!=null&&x(t,["data"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function ay(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["fileUri"]);s!=null&&x(t,["fileUri"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function ry(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["fileUri"]);r!=null&&x(t,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function iy(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],ey(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],ny(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],ay(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function oy(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],ty(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],sy(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],ry(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function ly(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>iy(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function cy(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>oy(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function uy(n,e){const t={},s=g(e,["behavior"]);s!=null&&x(t,["behavior"],s);const r=g(e,["description"]);r!=null&&x(t,["description"],r);const i=g(e,["name"]);i!=null&&x(t,["name"],i);const c=g(e,["parameters"]);c!=null&&x(t,["parameters"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],d),t}function dy(n,e){const t={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=g(e,["description"]);s!=null&&x(t,["description"],s);const r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["parameters"]);i!=null&&x(t,["parameters"],i);const c=g(e,["response"]);return c!=null&&x(t,["response"],c),t}function fy(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function hy(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function my(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],fy(n,s)),t}function py(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],hy(n,s)),t}function gy(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function xy(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function Ey(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],gy(n,s)),t}function _y(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],xy(n,s)),t}function by(){return{}}function Ty(n,e){const t={},s=g(e,["apiKeyString"]);return s!=null&&x(t,["apiKeyString"],s),t}function Ny(n,e){const t={},s=g(e,["apiKeyConfig"]);s!=null&&x(t,["apiKeyConfig"],Ty(n,s));const r=g(e,["authType"]);r!=null&&x(t,["authType"],r);const i=g(e,["googleServiceAccountConfig"]);i!=null&&x(t,["googleServiceAccountConfig"],i);const c=g(e,["httpBasicAuthConfig"]);c!=null&&x(t,["httpBasicAuthConfig"],c);const d=g(e,["oauthConfig"]);d!=null&&x(t,["oauthConfig"],d);const f=g(e,["oidcConfig"]);return f!=null&&x(t,["oidcConfig"],f),t}function vy(n,e){const t={},s=g(e,["authConfig"]);return s!=null&&x(t,["authConfig"],Ny(n,s)),t}function yy(){return{}}function Ay(){return{}}function Sy(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(h=>uy(n,h))),x(t,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearch"]);r!=null&&x(t,["googleSearch"],my(n,r));const i=g(e,["googleSearchRetrieval"]);if(i!=null&&x(t,["googleSearchRetrieval"],Ey(n,i)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&x(t,["urlContext"],yy());const d=g(e,["codeExecution"]);return d!=null&&x(t,["codeExecution"],d),t}function Cy(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(v=>dy(n,v))),x(t,["functionDeclarations"],b)}const r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r);const i=g(e,["googleSearch"]);i!=null&&x(t,["googleSearch"],py(n,i));const c=g(e,["googleSearchRetrieval"]);c!=null&&x(t,["googleSearchRetrieval"],_y(n,c)),g(e,["enterpriseWebSearch"])!=null&&x(t,["enterpriseWebSearch"],by());const f=g(e,["googleMaps"]);f!=null&&x(t,["googleMaps"],vy(n,f)),g(e,["urlContext"])!=null&&x(t,["urlContext"],Ay());const _=g(e,["codeExecution"]);return _!=null&&x(t,["codeExecution"],_),t}function Ly(n,e){const t={},s=g(e,["handle"]);if(s!=null&&x(t,["handle"],s),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function wy(n,e){const t={},s=g(e,["handle"]);s!=null&&x(t,["handle"],s);const r=g(e,["transparent"]);return r!=null&&x(t,["transparent"],r),t}function TE(){return{}}function NE(){return{}}function Iy(n,e){const t={},s=g(e,["disabled"]);s!=null&&x(t,["disabled"],s);const r=g(e,["startOfSpeechSensitivity"]);r!=null&&x(t,["startOfSpeechSensitivity"],r);const i=g(e,["endOfSpeechSensitivity"]);i!=null&&x(t,["endOfSpeechSensitivity"],i);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function Dy(n,e){const t={},s=g(e,["disabled"]);s!=null&&x(t,["disabled"],s);const r=g(e,["startOfSpeechSensitivity"]);r!=null&&x(t,["startOfSpeechSensitivity"],r);const i=g(e,["endOfSpeechSensitivity"]);i!=null&&x(t,["endOfSpeechSensitivity"],i);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function Ry(n,e){const t={},s=g(e,["automaticActivityDetection"]);s!=null&&x(t,["automaticActivityDetection"],Iy(n,s));const r=g(e,["activityHandling"]);r!=null&&x(t,["activityHandling"],r);const i=g(e,["turnCoverage"]);return i!=null&&x(t,["turnCoverage"],i),t}function Oy(n,e){const t={},s=g(e,["automaticActivityDetection"]);s!=null&&x(t,["automaticActivityDetection"],Dy(n,s));const r=g(e,["activityHandling"]);r!=null&&x(t,["activityHandling"],r);const i=g(e,["turnCoverage"]);return i!=null&&x(t,["turnCoverage"],i),t}function Py(n,e){const t={},s=g(e,["targetTokens"]);return s!=null&&x(t,["targetTokens"],s),t}function My(n,e){const t={},s=g(e,["targetTokens"]);return s!=null&&x(t,["targetTokens"],s),t}function ky(n,e){const t={},s=g(e,["triggerTokens"]);s!=null&&x(t,["triggerTokens"],s);const r=g(e,["slidingWindow"]);return r!=null&&x(t,["slidingWindow"],Py(n,r)),t}function jy(n,e){const t={},s=g(e,["triggerTokens"]);s!=null&&x(t,["triggerTokens"],s);const r=g(e,["slidingWindow"]);return r!=null&&x(t,["slidingWindow"],My(n,r)),t}function By(n,e){const t={},s=g(e,["proactiveAudio"]);return s!=null&&x(t,["proactiveAudio"],s),t}function Uy(n,e){const t={},s=g(e,["proactiveAudio"]);return s!=null&&x(t,["proactiveAudio"],s),t}function Fy(n,e,t){const s={},r=g(e,["generationConfig"]);t!==void 0&&r!=null&&x(t,["setup","generationConfig"],r);const i=g(e,["responseModalities"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig","responseModalities"],i);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const f=g(e,["topK"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);t!==void 0&&h!=null&&x(t,["setup","generationConfig","maxOutputTokens"],h);const _=g(e,["mediaResolution"]);t!==void 0&&_!=null&&x(t,["setup","generationConfig","mediaResolution"],_);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const v=g(e,["speechConfig"]);t!==void 0&&v!=null&&x(t,["setup","generationConfig","speechConfig"],Jv(n,Sp(n,v)));const T=g(e,["enableAffectiveDialog"]);t!==void 0&&T!=null&&x(t,["setup","generationConfig","enableAffectiveDialog"],T);const C=g(e,["systemInstruction"]);t!==void 0&&C!=null&&x(t,["setup","systemInstruction"],ly(n,xi(n,C)));const L=g(e,["tools"]);if(t!==void 0&&L!=null){let Z=of(n,L);Array.isArray(Z)&&(Z=Z.map(ee=>Sy(n,rf(n,ee)))),x(t,["setup","tools"],Z)}const R=g(e,["sessionResumption"]);t!==void 0&&R!=null&&x(t,["setup","sessionResumption"],Ly(n,R));const I=g(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&x(t,["setup","inputAudioTranscription"],TE());const j=g(e,["outputAudioTranscription"]);t!==void 0&&j!=null&&x(t,["setup","outputAudioTranscription"],TE());const O=g(e,["realtimeInputConfig"]);t!==void 0&&O!=null&&x(t,["setup","realtimeInputConfig"],Ry(n,O));const U=g(e,["contextWindowCompression"]);t!==void 0&&U!=null&&x(t,["setup","contextWindowCompression"],ky(n,U));const se=g(e,["proactivity"]);return t!==void 0&&se!=null&&x(t,["setup","proactivity"],By(n,se)),s}function Vy(n,e,t){const s={},r=g(e,["generationConfig"]);t!==void 0&&r!=null&&x(t,["setup","generationConfig"],r);const i=g(e,["responseModalities"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig","responseModalities"],i);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const f=g(e,["topK"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);t!==void 0&&h!=null&&x(t,["setup","generationConfig","maxOutputTokens"],h);const _=g(e,["mediaResolution"]);t!==void 0&&_!=null&&x(t,["setup","generationConfig","mediaResolution"],_);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const v=g(e,["speechConfig"]);t!==void 0&&v!=null&&x(t,["setup","generationConfig","speechConfig"],Qv(n,Sp(n,v)));const T=g(e,["enableAffectiveDialog"]);t!==void 0&&T!=null&&x(t,["setup","generationConfig","enableAffectiveDialog"],T);const C=g(e,["systemInstruction"]);t!==void 0&&C!=null&&x(t,["setup","systemInstruction"],cy(n,xi(n,C)));const L=g(e,["tools"]);if(t!==void 0&&L!=null){let Z=of(n,L);Array.isArray(Z)&&(Z=Z.map(ee=>Cy(n,rf(n,ee)))),x(t,["setup","tools"],Z)}const R=g(e,["sessionResumption"]);t!==void 0&&R!=null&&x(t,["setup","sessionResumption"],wy(n,R));const I=g(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&x(t,["setup","inputAudioTranscription"],NE());const j=g(e,["outputAudioTranscription"]);t!==void 0&&j!=null&&x(t,["setup","outputAudioTranscription"],NE());const O=g(e,["realtimeInputConfig"]);t!==void 0&&O!=null&&x(t,["setup","realtimeInputConfig"],Oy(n,O));const U=g(e,["contextWindowCompression"]);t!==void 0&&U!=null&&x(t,["setup","contextWindowCompression"],jy(n,U));const se=g(e,["proactivity"]);return t!==void 0&&se!=null&&x(t,["setup","proactivity"],Uy(n,se)),s}function Gy(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["setup","model"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],Fy(n,r,t)),t}function Hy(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["setup","model"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],Vy(n,r,t)),t}function Yy(){return{}}function qy(){return{}}function zy(){return{}}function $y(){return{}}function Wy(n,e){const t={},s=g(e,["media"]);s!=null&&x(t,["mediaChunks"],V2(n,s));const r=g(e,["audio"]);r!=null&&x(t,["audio"],gN(n,r));const i=g(e,["audioStreamEnd"]);i!=null&&x(t,["audioStreamEnd"],i);const c=g(e,["video"]);c!=null&&x(t,["video"],pN(n,c));const d=g(e,["text"]);return d!=null&&x(t,["text"],d),g(e,["activityStart"])!=null&&x(t,["activityStart"],Yy()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],zy()),t}function Ky(n,e){const t={},s=g(e,["media"]);if(s!=null&&x(t,["mediaChunks"],V2(n,s)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=g(e,["audioStreamEnd"]);if(r!=null&&x(t,["audioStreamEnd"],r),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&x(t,["activityStart"],qy()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],$y()),t}function Z2(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const r=g(e,["weight"]);return r!=null&&x(t,["weight"],r),t}function Xy(n,e){const t={},s=g(e,["weightedPrompts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Z2(n,i))),x(t,["weightedPrompts"],r)}return t}function J2(n,e){const t={},s=g(e,["temperature"]);s!=null&&x(t,["temperature"],s);const r=g(e,["topK"]);r!=null&&x(t,["topK"],r);const i=g(e,["seed"]);i!=null&&x(t,["seed"],i);const c=g(e,["guidance"]);c!=null&&x(t,["guidance"],c);const d=g(e,["bpm"]);d!=null&&x(t,["bpm"],d);const f=g(e,["density"]);f!=null&&x(t,["density"],f);const h=g(e,["brightness"]);h!=null&&x(t,["brightness"],h);const _=g(e,["scale"]);_!=null&&x(t,["scale"],_);const b=g(e,["muteBass"]);b!=null&&x(t,["muteBass"],b);const v=g(e,["muteDrums"]);v!=null&&x(t,["muteDrums"],v);const T=g(e,["onlyBassAndDrums"]);return T!=null&&x(t,["onlyBassAndDrums"],T),t}function Zy(n,e){const t={},s=g(e,["musicGenerationConfig"]);return s!=null&&x(t,["musicGenerationConfig"],J2(n,s)),t}function Q2(n,e){const t={},s=g(e,["model"]);return s!=null&&x(t,["model"],s),t}function e_(n,e){const t={},s=g(e,["weightedPrompts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Z2(n,i))),x(t,["weightedPrompts"],r)}return t}function X0(n,e){const t={},s=g(e,["setup"]);s!=null&&x(t,["setup"],Q2(n,s));const r=g(e,["clientContent"]);r!=null&&x(t,["clientContent"],e_(n,r));const i=g(e,["musicGenerationConfig"]);i!=null&&x(t,["musicGenerationConfig"],J2(n,i));const c=g(e,["playbackControl"]);return c!=null&&x(t,["playbackControl"],c),t}function Jy(){return{}}function Qy(){return{}}function eA(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function tA(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function nA(n,e){const t={},s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function sA(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["data"]);r!=null&&x(t,["data"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function aA(n,e){const t={},s=g(e,["fileUri"]);s!=null&&x(t,["fileUri"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function rA(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["fileUri"]);r!=null&&x(t,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function iA(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],eA(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],nA(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],aA(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function oA(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],tA(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],sA(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],rA(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function lA(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>iA(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function cA(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>oA(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function vE(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const r=g(e,["finished"]);return r!=null&&x(t,["finished"],r),t}function yE(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const r=g(e,["finished"]);return r!=null&&x(t,["finished"],r),t}function uA(n,e){const t={},s=g(e,["retrievedUrl"]);s!=null&&x(t,["retrievedUrl"],s);const r=g(e,["urlRetrievalStatus"]);return r!=null&&x(t,["urlRetrievalStatus"],r),t}function dA(n,e){const t={},s=g(e,["urlMetadata"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>uA(n,i))),x(t,["urlMetadata"],r)}return t}function fA(n,e){const t={},s=g(e,["modelTurn"]);s!=null&&x(t,["modelTurn"],lA(n,s));const r=g(e,["turnComplete"]);r!=null&&x(t,["turnComplete"],r);const i=g(e,["interrupted"]);i!=null&&x(t,["interrupted"],i);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const f=g(e,["inputTranscription"]);f!=null&&x(t,["inputTranscription"],vE(n,f));const h=g(e,["outputTranscription"]);h!=null&&x(t,["outputTranscription"],vE(n,h));const _=g(e,["urlContextMetadata"]);return _!=null&&x(t,["urlContextMetadata"],dA(n,_)),t}function hA(n,e){const t={},s=g(e,["modelTurn"]);s!=null&&x(t,["modelTurn"],cA(n,s));const r=g(e,["turnComplete"]);r!=null&&x(t,["turnComplete"],r);const i=g(e,["interrupted"]);i!=null&&x(t,["interrupted"],i);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const f=g(e,["inputTranscription"]);f!=null&&x(t,["inputTranscription"],yE(n,f));const h=g(e,["outputTranscription"]);return h!=null&&x(t,["outputTranscription"],yE(n,h)),t}function mA(n,e){const t={},s=g(e,["id"]);s!=null&&x(t,["id"],s);const r=g(e,["args"]);r!=null&&x(t,["args"],r);const i=g(e,["name"]);return i!=null&&x(t,["name"],i),t}function pA(n,e){const t={},s=g(e,["args"]);s!=null&&x(t,["args"],s);const r=g(e,["name"]);return r!=null&&x(t,["name"],r),t}function gA(n,e){const t={},s=g(e,["functionCalls"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>mA(n,i))),x(t,["functionCalls"],r)}return t}function xA(n,e){const t={},s=g(e,["functionCalls"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>pA(n,i))),x(t,["functionCalls"],r)}return t}function EA(n,e){const t={},s=g(e,["ids"]);return s!=null&&x(t,["ids"],s),t}function _A(n,e){const t={},s=g(e,["ids"]);return s!=null&&x(t,["ids"],s),t}function rh(n,e){const t={},s=g(e,["modality"]);s!=null&&x(t,["modality"],s);const r=g(e,["tokenCount"]);return r!=null&&x(t,["tokenCount"],r),t}function ih(n,e){const t={},s=g(e,["modality"]);s!=null&&x(t,["modality"],s);const r=g(e,["tokenCount"]);return r!=null&&x(t,["tokenCount"],r),t}function bA(n,e){const t={},s=g(e,["promptTokenCount"]);s!=null&&x(t,["promptTokenCount"],s);const r=g(e,["cachedContentTokenCount"]);r!=null&&x(t,["cachedContentTokenCount"],r);const i=g(e,["responseTokenCount"]);i!=null&&x(t,["responseTokenCount"],i);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const f=g(e,["totalTokenCount"]);f!=null&&x(t,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(C=>rh(n,C))),x(t,["promptTokensDetails"],T)}const _=g(e,["cacheTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>rh(n,C))),x(t,["cacheTokensDetails"],T)}const b=g(e,["responseTokensDetails"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(C=>rh(n,C))),x(t,["responseTokensDetails"],T)}const v=g(e,["toolUsePromptTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(C=>rh(n,C))),x(t,["toolUsePromptTokensDetails"],T)}return t}function TA(n,e){const t={},s=g(e,["promptTokenCount"]);s!=null&&x(t,["promptTokenCount"],s);const r=g(e,["cachedContentTokenCount"]);r!=null&&x(t,["cachedContentTokenCount"],r);const i=g(e,["candidatesTokenCount"]);i!=null&&x(t,["responseTokenCount"],i);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const f=g(e,["totalTokenCount"]);f!=null&&x(t,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(L=>ih(n,L))),x(t,["promptTokensDetails"],C)}const _=g(e,["cacheTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(L=>ih(n,L))),x(t,["cacheTokensDetails"],C)}const b=g(e,["candidatesTokensDetails"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(L=>ih(n,L))),x(t,["responseTokensDetails"],C)}const v=g(e,["toolUsePromptTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(L=>ih(n,L))),x(t,["toolUsePromptTokensDetails"],C)}const T=g(e,["trafficType"]);return T!=null&&x(t,["trafficType"],T),t}function NA(n,e){const t={},s=g(e,["timeLeft"]);return s!=null&&x(t,["timeLeft"],s),t}function vA(n,e){const t={},s=g(e,["timeLeft"]);return s!=null&&x(t,["timeLeft"],s),t}function yA(n,e){const t={},s=g(e,["newHandle"]);s!=null&&x(t,["newHandle"],s);const r=g(e,["resumable"]);r!=null&&x(t,["resumable"],r);const i=g(e,["lastConsumedClientMessageIndex"]);return i!=null&&x(t,["lastConsumedClientMessageIndex"],i),t}function AA(n,e){const t={},s=g(e,["newHandle"]);s!=null&&x(t,["newHandle"],s);const r=g(e,["resumable"]);r!=null&&x(t,["resumable"],r);const i=g(e,["lastConsumedClientMessageIndex"]);return i!=null&&x(t,["lastConsumedClientMessageIndex"],i),t}function SA(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],Jy());const r=g(e,["serverContent"]);r!=null&&x(t,["serverContent"],fA(n,r));const i=g(e,["toolCall"]);i!=null&&x(t,["toolCall"],gA(n,i));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],EA(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],bA(n,d));const f=g(e,["goAway"]);f!=null&&x(t,["goAway"],NA(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&x(t,["sessionResumptionUpdate"],yA(n,h)),t}function CA(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],Qy());const r=g(e,["serverContent"]);r!=null&&x(t,["serverContent"],hA(n,r));const i=g(e,["toolCall"]);i!=null&&x(t,["toolCall"],xA(n,i));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],_A(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],TA(n,d));const f=g(e,["goAway"]);f!=null&&x(t,["goAway"],vA(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&x(t,["sessionResumptionUpdate"],AA(n,h)),t}function LA(){return{}}function wA(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const r=g(e,["weight"]);return r!=null&&x(t,["weight"],r),t}function IA(n,e){const t={},s=g(e,["weightedPrompts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>wA(n,i))),x(t,["weightedPrompts"],r)}return t}function DA(n,e){const t={},s=g(e,["temperature"]);s!=null&&x(t,["temperature"],s);const r=g(e,["topK"]);r!=null&&x(t,["topK"],r);const i=g(e,["seed"]);i!=null&&x(t,["seed"],i);const c=g(e,["guidance"]);c!=null&&x(t,["guidance"],c);const d=g(e,["bpm"]);d!=null&&x(t,["bpm"],d);const f=g(e,["density"]);f!=null&&x(t,["density"],f);const h=g(e,["brightness"]);h!=null&&x(t,["brightness"],h);const _=g(e,["scale"]);_!=null&&x(t,["scale"],_);const b=g(e,["muteBass"]);b!=null&&x(t,["muteBass"],b);const v=g(e,["muteDrums"]);v!=null&&x(t,["muteDrums"],v);const T=g(e,["onlyBassAndDrums"]);return T!=null&&x(t,["onlyBassAndDrums"],T),t}function RA(n,e){const t={},s=g(e,["clientContent"]);s!=null&&x(t,["clientContent"],IA(n,s));const r=g(e,["musicGenerationConfig"]);return r!=null&&x(t,["musicGenerationConfig"],DA(n,r)),t}function OA(n,e){const t={},s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);r!=null&&x(t,["mimeType"],r);const i=g(e,["sourceMetadata"]);return i!=null&&x(t,["sourceMetadata"],RA(n,i)),t}function PA(n,e){const t={},s=g(e,["audioChunks"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>OA(n,i))),x(t,["audioChunks"],r)}return t}function MA(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const r=g(e,["filteredReason"]);return r!=null&&x(t,["filteredReason"],r),t}function kA(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],LA());const r=g(e,["serverContent"]);r!=null&&x(t,["serverContent"],PA(n,r));const i=g(e,["filteredPrompt"]);return i!=null&&x(t,["filteredPrompt"],MA(n,i)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jA(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function BA(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function UA(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["fileUri"]);s!=null&&x(t,["fileUri"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function FA(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],jA(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],BA(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],UA(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function Kh(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>FA(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function VA(n,e){const t={},s=g(e,["anyOf"]);s!=null&&x(t,["anyOf"],s);const r=g(e,["default"]);r!=null&&x(t,["default"],r);const i=g(e,["description"]);i!=null&&x(t,["description"],i);const c=g(e,["enum"]);c!=null&&x(t,["enum"],c);const d=g(e,["example"]);d!=null&&x(t,["example"],d);const f=g(e,["format"]);f!=null&&x(t,["format"],f);const h=g(e,["items"]);h!=null&&x(t,["items"],h);const _=g(e,["maxItems"]);_!=null&&x(t,["maxItems"],_);const b=g(e,["maxLength"]);b!=null&&x(t,["maxLength"],b);const v=g(e,["maxProperties"]);v!=null&&x(t,["maxProperties"],v);const T=g(e,["maximum"]);T!=null&&x(t,["maximum"],T);const C=g(e,["minItems"]);C!=null&&x(t,["minItems"],C);const L=g(e,["minLength"]);L!=null&&x(t,["minLength"],L);const R=g(e,["minProperties"]);R!=null&&x(t,["minProperties"],R);const I=g(e,["minimum"]);I!=null&&x(t,["minimum"],I);const j=g(e,["nullable"]);j!=null&&x(t,["nullable"],j);const O=g(e,["pattern"]);O!=null&&x(t,["pattern"],O);const U=g(e,["properties"]);U!=null&&x(t,["properties"],U);const se=g(e,["propertyOrdering"]);se!=null&&x(t,["propertyOrdering"],se);const Z=g(e,["required"]);Z!=null&&x(t,["required"],Z);const ee=g(e,["title"]);ee!=null&&x(t,["title"],ee);const J=g(e,["type"]);return J!=null&&x(t,["type"],J),t}function GA(n,e){const t={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=g(e,["category"]);s!=null&&x(t,["category"],s);const r=g(e,["threshold"]);return r!=null&&x(t,["threshold"],r),t}function HA(n,e){const t={},s=g(e,["behavior"]);s!=null&&x(t,["behavior"],s);const r=g(e,["description"]);r!=null&&x(t,["description"],r);const i=g(e,["name"]);i!=null&&x(t,["name"],i);const c=g(e,["parameters"]);c!=null&&x(t,["parameters"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],d),t}function YA(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function qA(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],YA(n,s)),t}function zA(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function $A(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],zA(n,s)),t}function WA(){return{}}function KA(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(h=>HA(n,h))),x(t,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearch"]);r!=null&&x(t,["googleSearch"],qA(n,r));const i=g(e,["googleSearchRetrieval"]);if(i!=null&&x(t,["googleSearchRetrieval"],$A(n,i)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&x(t,["urlContext"],WA());const d=g(e,["codeExecution"]);return d!=null&&x(t,["codeExecution"],d),t}function XA(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["allowedFunctionNames"]);return r!=null&&x(t,["allowedFunctionNames"],r),t}function ZA(n,e){const t={},s=g(e,["latitude"]);s!=null&&x(t,["latitude"],s);const r=g(e,["longitude"]);return r!=null&&x(t,["longitude"],r),t}function JA(n,e){const t={},s=g(e,["latLng"]);s!=null&&x(t,["latLng"],ZA(n,s));const r=g(e,["languageCode"]);return r!=null&&x(t,["languageCode"],r),t}function QA(n,e){const t={},s=g(e,["functionCallingConfig"]);s!=null&&x(t,["functionCallingConfig"],XA(n,s));const r=g(e,["retrievalConfig"]);return r!=null&&x(t,["retrievalConfig"],JA(n,r)),t}function eS(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function t_(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],eS(n,s)),t}function tS(n,e){const t={},s=g(e,["speaker"]);s!=null&&x(t,["speaker"],s);const r=g(e,["voiceConfig"]);return r!=null&&x(t,["voiceConfig"],t_(n,r)),t}function nS(n,e){const t={},s=g(e,["speakerVoiceConfigs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>tS(n,i))),x(t,["speakerVoiceConfigs"],r)}return t}function sS(n,e){const t={},s=g(e,["voiceConfig"]);s!=null&&x(t,["voiceConfig"],t_(n,s));const r=g(e,["multiSpeakerVoiceConfig"]);r!=null&&x(t,["multiSpeakerVoiceConfig"],nS(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function aS(n,e){const t={},s=g(e,["includeThoughts"]);s!=null&&x(t,["includeThoughts"],s);const r=g(e,["thinkingBudget"]);return r!=null&&x(t,["thinkingBudget"],r),t}function rS(n,e,t){const s={},r=g(e,["systemInstruction"]);t!==void 0&&r!=null&&x(t,["systemInstruction"],Kh(n,xi(n,r)));const i=g(e,["temperature"]);i!=null&&x(s,["temperature"],i);const c=g(e,["topP"]);c!=null&&x(s,["topP"],c);const d=g(e,["topK"]);d!=null&&x(s,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&x(s,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(s,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&x(s,["stopSequences"],_);const b=g(e,["responseLogprobs"]);b!=null&&x(s,["responseLogprobs"],b);const v=g(e,["logprobs"]);v!=null&&x(s,["logprobs"],v);const T=g(e,["presencePenalty"]);T!=null&&x(s,["presencePenalty"],T);const C=g(e,["frequencyPenalty"]);C!=null&&x(s,["frequencyPenalty"],C);const L=g(e,["seed"]);L!=null&&x(s,["seed"],L);const R=g(e,["responseMimeType"]);R!=null&&x(s,["responseMimeType"],R);const I=g(e,["responseSchema"]);if(I!=null&&x(s,["responseSchema"],VA(n,jh(n,I))),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=g(e,["safetySettings"]);if(t!==void 0&&j!=null){let xe=j;Array.isArray(xe)&&(xe=xe.map(F=>GA(n,F))),x(t,["safetySettings"],xe)}const O=g(e,["tools"]);if(t!==void 0&&O!=null){let xe=of(n,O);Array.isArray(xe)&&(xe=xe.map(F=>KA(n,rf(n,F)))),x(t,["tools"],xe)}const U=g(e,["toolConfig"]);if(t!==void 0&&U!=null&&x(t,["toolConfig"],QA(n,U)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=g(e,["cachedContent"]);t!==void 0&&se!=null&&x(t,["cachedContent"],vc(n,se));const Z=g(e,["responseModalities"]);Z!=null&&x(s,["responseModalities"],Z);const ee=g(e,["mediaResolution"]);ee!=null&&x(s,["mediaResolution"],ee);const J=g(e,["speechConfig"]);if(J!=null&&x(s,["speechConfig"],sS(n,Y2(n,J))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=g(e,["thinkingConfig"]);return oe!=null&&x(s,["thinkingConfig"],aS(n,oe)),s}function AE(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(n,r);Array.isArray(c)&&(c=c.map(d=>Kh(n,d))),x(t,["contents"],c)}const i=g(e,["config"]);return i!=null&&x(t,["generationConfig"],rS(n,i,t)),t}function iS(n,e,t){const s={},r=g(e,["taskType"]);t!==void 0&&r!=null&&x(t,["requests[]","taskType"],r);const i=g(e,["title"]);t!==void 0&&i!=null&&x(t,["requests[]","title"],i);const c=g(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&x(t,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function oS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);r!=null&&x(t,["requests[]","content"],H2(n,r));const i=g(e,["config"]);i!=null&&x(t,["config"],iS(n,i,t));const c=g(e,["model"]);return c!==void 0&&x(t,["requests[]","model"],la(n,c)),t}function lS(n,e,t){const s={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=g(e,["numberOfImages"]);t!==void 0&&r!=null&&x(t,["parameters","sampleCount"],r);const i=g(e,["aspectRatio"]);t!==void 0&&i!=null&&x(t,["parameters","aspectRatio"],i);const c=g(e,["guidanceScale"]);if(t!==void 0&&c!=null&&x(t,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=g(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&x(t,["parameters","safetySetting"],d);const f=g(e,["personGeneration"]);t!==void 0&&f!=null&&x(t,["parameters","personGeneration"],f);const h=g(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&x(t,["parameters","includeSafetyAttributes"],h);const _=g(e,["includeRaiReason"]);t!==void 0&&_!=null&&x(t,["parameters","includeRaiReason"],_);const b=g(e,["language"]);t!==void 0&&b!=null&&x(t,["parameters","language"],b);const v=g(e,["outputMimeType"]);t!==void 0&&v!=null&&x(t,["parameters","outputOptions","mimeType"],v);const T=g(e,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&x(t,["parameters","outputOptions","compressionQuality"],T),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function cS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["prompt"]);r!=null&&x(t,["instances[0]","prompt"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],lS(n,i,t)),t}function uS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function dS(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);t!==void 0&&i!=null&&x(t,["_query","pageToken"],i);const c=g(e,["filter"]);t!==void 0&&c!=null&&x(t,["_query","filter"],c);const d=g(e,["queryBase"]);return t!==void 0&&d!=null&&x(t,["_url","models_url"],$2(n,d)),s}function fS(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],dS(n,s,t)),t}function hS(n,e,t){const s={},r=g(e,["displayName"]);t!==void 0&&r!=null&&x(t,["displayName"],r);const i=g(e,["description"]);t!==void 0&&i!=null&&x(t,["description"],i);const c=g(e,["defaultCheckpointId"]);return t!==void 0&&c!=null&&x(t,["defaultCheckpointId"],c),s}function mS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],hS(n,r,t)),t}function pS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function gS(n,e){const t={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function xS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(n,r);Array.isArray(c)&&(c=c.map(d=>Kh(n,d))),x(t,["contents"],c)}const i=g(e,["config"]);return i!=null&&x(t,["config"],gS(n,i)),t}function ES(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=g(e,["imageBytes"]);s!=null&&x(t,["bytesBase64Encoded"],yc(n,s));const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function _S(n,e,t){const s={},r=g(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&x(t,["parameters","sampleCount"],r),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=g(e,["durationSeconds"]);if(t!==void 0&&i!=null&&x(t,["parameters","durationSeconds"],i),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(t!==void 0&&c!=null&&x(t,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=g(e,["personGeneration"]);if(t!==void 0&&d!=null&&x(t,["parameters","personGeneration"],d),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(e,["negativePrompt"]);t!==void 0&&f!=null&&x(t,["parameters","negativePrompt"],f);const h=g(e,["enhancePrompt"]);if(t!==void 0&&h!=null&&x(t,["parameters","enhancePrompt"],h),g(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return s}function bS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["prompt"]);r!=null&&x(t,["instances[0]","prompt"],r);const i=g(e,["image"]);i!=null&&x(t,["instances[0]","image"],ES(n,i));const c=g(e,["config"]);return c!=null&&x(t,["config"],_S(n,c,t)),t}function TS(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function NS(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["data"]);r!=null&&x(t,["data"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function vS(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["fileUri"]);r!=null&&x(t,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function yS(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],TS(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],NS(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],vS(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function Ju(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>yS(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function AS(n,e){const t={},s=g(e,["anyOf"]);s!=null&&x(t,["anyOf"],s);const r=g(e,["default"]);r!=null&&x(t,["default"],r);const i=g(e,["description"]);i!=null&&x(t,["description"],i);const c=g(e,["enum"]);c!=null&&x(t,["enum"],c);const d=g(e,["example"]);d!=null&&x(t,["example"],d);const f=g(e,["format"]);f!=null&&x(t,["format"],f);const h=g(e,["items"]);h!=null&&x(t,["items"],h);const _=g(e,["maxItems"]);_!=null&&x(t,["maxItems"],_);const b=g(e,["maxLength"]);b!=null&&x(t,["maxLength"],b);const v=g(e,["maxProperties"]);v!=null&&x(t,["maxProperties"],v);const T=g(e,["maximum"]);T!=null&&x(t,["maximum"],T);const C=g(e,["minItems"]);C!=null&&x(t,["minItems"],C);const L=g(e,["minLength"]);L!=null&&x(t,["minLength"],L);const R=g(e,["minProperties"]);R!=null&&x(t,["minProperties"],R);const I=g(e,["minimum"]);I!=null&&x(t,["minimum"],I);const j=g(e,["nullable"]);j!=null&&x(t,["nullable"],j);const O=g(e,["pattern"]);O!=null&&x(t,["pattern"],O);const U=g(e,["properties"]);U!=null&&x(t,["properties"],U);const se=g(e,["propertyOrdering"]);se!=null&&x(t,["propertyOrdering"],se);const Z=g(e,["required"]);Z!=null&&x(t,["required"],Z);const ee=g(e,["title"]);ee!=null&&x(t,["title"],ee);const J=g(e,["type"]);return J!=null&&x(t,["type"],J),t}function SS(n,e){const t={},s=g(e,["featureSelectionPreference"]);return s!=null&&x(t,["featureSelectionPreference"],s),t}function CS(n,e){const t={},s=g(e,["method"]);s!=null&&x(t,["method"],s);const r=g(e,["category"]);r!=null&&x(t,["category"],r);const i=g(e,["threshold"]);return i!=null&&x(t,["threshold"],i),t}function LS(n,e){const t={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=g(e,["description"]);s!=null&&x(t,["description"],s);const r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["parameters"]);i!=null&&x(t,["parameters"],i);const c=g(e,["response"]);return c!=null&&x(t,["response"],c),t}function wS(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function IS(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],wS(n,s)),t}function DS(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function RS(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],DS(n,s)),t}function OS(){return{}}function PS(n,e){const t={},s=g(e,["apiKeyString"]);return s!=null&&x(t,["apiKeyString"],s),t}function MS(n,e){const t={},s=g(e,["apiKeyConfig"]);s!=null&&x(t,["apiKeyConfig"],PS(n,s));const r=g(e,["authType"]);r!=null&&x(t,["authType"],r);const i=g(e,["googleServiceAccountConfig"]);i!=null&&x(t,["googleServiceAccountConfig"],i);const c=g(e,["httpBasicAuthConfig"]);c!=null&&x(t,["httpBasicAuthConfig"],c);const d=g(e,["oauthConfig"]);d!=null&&x(t,["oauthConfig"],d);const f=g(e,["oidcConfig"]);return f!=null&&x(t,["oidcConfig"],f),t}function kS(n,e){const t={},s=g(e,["authConfig"]);return s!=null&&x(t,["authConfig"],MS(n,s)),t}function jS(){return{}}function n_(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(v=>LS(n,v))),x(t,["functionDeclarations"],b)}const r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r);const i=g(e,["googleSearch"]);i!=null&&x(t,["googleSearch"],IS(n,i));const c=g(e,["googleSearchRetrieval"]);c!=null&&x(t,["googleSearchRetrieval"],RS(n,c)),g(e,["enterpriseWebSearch"])!=null&&x(t,["enterpriseWebSearch"],OS());const f=g(e,["googleMaps"]);f!=null&&x(t,["googleMaps"],kS(n,f)),g(e,["urlContext"])!=null&&x(t,["urlContext"],jS());const _=g(e,["codeExecution"]);return _!=null&&x(t,["codeExecution"],_),t}function BS(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["allowedFunctionNames"]);return r!=null&&x(t,["allowedFunctionNames"],r),t}function US(n,e){const t={},s=g(e,["latitude"]);s!=null&&x(t,["latitude"],s);const r=g(e,["longitude"]);return r!=null&&x(t,["longitude"],r),t}function FS(n,e){const t={},s=g(e,["latLng"]);s!=null&&x(t,["latLng"],US(n,s));const r=g(e,["languageCode"]);return r!=null&&x(t,["languageCode"],r),t}function VS(n,e){const t={},s=g(e,["functionCallingConfig"]);s!=null&&x(t,["functionCallingConfig"],BS(n,s));const r=g(e,["retrievalConfig"]);return r!=null&&x(t,["retrievalConfig"],FS(n,r)),t}function GS(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function HS(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],GS(n,s)),t}function YS(n,e){const t={},s=g(e,["voiceConfig"]);if(s!=null&&x(t,["voiceConfig"],HS(n,s)),g(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=g(e,["languageCode"]);return r!=null&&x(t,["languageCode"],r),t}function qS(n,e){const t={},s=g(e,["includeThoughts"]);s!=null&&x(t,["includeThoughts"],s);const r=g(e,["thinkingBudget"]);return r!=null&&x(t,["thinkingBudget"],r),t}function zS(n,e,t){const s={},r=g(e,["systemInstruction"]);t!==void 0&&r!=null&&x(t,["systemInstruction"],Ju(n,xi(n,r)));const i=g(e,["temperature"]);i!=null&&x(s,["temperature"],i);const c=g(e,["topP"]);c!=null&&x(s,["topP"],c);const d=g(e,["topK"]);d!=null&&x(s,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&x(s,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(s,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&x(s,["stopSequences"],_);const b=g(e,["responseLogprobs"]);b!=null&&x(s,["responseLogprobs"],b);const v=g(e,["logprobs"]);v!=null&&x(s,["logprobs"],v);const T=g(e,["presencePenalty"]);T!=null&&x(s,["presencePenalty"],T);const C=g(e,["frequencyPenalty"]);C!=null&&x(s,["frequencyPenalty"],C);const L=g(e,["seed"]);L!=null&&x(s,["seed"],L);const R=g(e,["responseMimeType"]);R!=null&&x(s,["responseMimeType"],R);const I=g(e,["responseSchema"]);I!=null&&x(s,["responseSchema"],AS(n,jh(n,I)));const j=g(e,["routingConfig"]);j!=null&&x(s,["routingConfig"],j);const O=g(e,["modelSelectionConfig"]);O!=null&&x(s,["modelConfig"],SS(n,O));const U=g(e,["safetySettings"]);if(t!==void 0&&U!=null){let K=U;Array.isArray(K)&&(K=K.map(Te=>CS(n,Te))),x(t,["safetySettings"],K)}const se=g(e,["tools"]);if(t!==void 0&&se!=null){let K=of(n,se);Array.isArray(K)&&(K=K.map(Te=>n_(n,rf(n,Te)))),x(t,["tools"],K)}const Z=g(e,["toolConfig"]);t!==void 0&&Z!=null&&x(t,["toolConfig"],VS(n,Z));const ee=g(e,["labels"]);t!==void 0&&ee!=null&&x(t,["labels"],ee);const J=g(e,["cachedContent"]);t!==void 0&&J!=null&&x(t,["cachedContent"],vc(n,J));const oe=g(e,["responseModalities"]);oe!=null&&x(s,["responseModalities"],oe);const xe=g(e,["mediaResolution"]);xe!=null&&x(s,["mediaResolution"],xe);const F=g(e,["speechConfig"]);F!=null&&x(s,["speechConfig"],YS(n,Y2(n,F)));const H=g(e,["audioTimestamp"]);H!=null&&x(s,["audioTimestamp"],H);const re=g(e,["thinkingConfig"]);return re!=null&&x(s,["thinkingConfig"],qS(n,re)),s}function SE(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(n,r);Array.isArray(c)&&(c=c.map(d=>Ju(n,d))),x(t,["contents"],c)}const i=g(e,["config"]);return i!=null&&x(t,["generationConfig"],zS(n,i,t)),t}function $S(n,e,t){const s={},r=g(e,["taskType"]);t!==void 0&&r!=null&&x(t,["instances[]","task_type"],r);const i=g(e,["title"]);t!==void 0&&i!=null&&x(t,["instances[]","title"],i);const c=g(e,["outputDimensionality"]);t!==void 0&&c!=null&&x(t,["parameters","outputDimensionality"],c);const d=g(e,["mimeType"]);t!==void 0&&d!=null&&x(t,["instances[]","mimeType"],d);const f=g(e,["autoTruncate"]);return t!==void 0&&f!=null&&x(t,["parameters","autoTruncate"],f),s}function WS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);r!=null&&x(t,["instances[]","content"],H2(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],$S(n,i,t)),t}function KS(n,e,t){const s={},r=g(e,["outputGcsUri"]);t!==void 0&&r!=null&&x(t,["parameters","storageUri"],r);const i=g(e,["negativePrompt"]);t!==void 0&&i!=null&&x(t,["parameters","negativePrompt"],i);const c=g(e,["numberOfImages"]);t!==void 0&&c!=null&&x(t,["parameters","sampleCount"],c);const d=g(e,["aspectRatio"]);t!==void 0&&d!=null&&x(t,["parameters","aspectRatio"],d);const f=g(e,["guidanceScale"]);t!==void 0&&f!=null&&x(t,["parameters","guidanceScale"],f);const h=g(e,["seed"]);t!==void 0&&h!=null&&x(t,["parameters","seed"],h);const _=g(e,["safetyFilterLevel"]);t!==void 0&&_!=null&&x(t,["parameters","safetySetting"],_);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const v=g(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&x(t,["parameters","includeSafetyAttributes"],v);const T=g(e,["includeRaiReason"]);t!==void 0&&T!=null&&x(t,["parameters","includeRaiReason"],T);const C=g(e,["language"]);t!==void 0&&C!=null&&x(t,["parameters","language"],C);const L=g(e,["outputMimeType"]);t!==void 0&&L!=null&&x(t,["parameters","outputOptions","mimeType"],L);const R=g(e,["outputCompressionQuality"]);t!==void 0&&R!=null&&x(t,["parameters","outputOptions","compressionQuality"],R);const I=g(e,["addWatermark"]);t!==void 0&&I!=null&&x(t,["parameters","addWatermark"],I);const j=g(e,["enhancePrompt"]);return t!==void 0&&j!=null&&x(t,["parameters","enhancePrompt"],j),s}function XS(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["prompt"]);r!=null&&x(t,["instances[0]","prompt"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],KS(n,i,t)),t}function Cp(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["gcsUri"],s);const r=g(e,["imageBytes"]);r!=null&&x(t,["bytesBase64Encoded"],yc(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function ZS(n,e){const t={},s=g(e,["maskMode"]);s!=null&&x(t,["maskMode"],s);const r=g(e,["segmentationClasses"]);r!=null&&x(t,["maskClasses"],r);const i=g(e,["maskDilation"]);return i!=null&&x(t,["dilation"],i),t}function JS(n,e){const t={},s=g(e,["controlType"]);s!=null&&x(t,["controlType"],s);const r=g(e,["enableControlImageComputation"]);return r!=null&&x(t,["computeControl"],r),t}function QS(n,e){const t={},s=g(e,["styleDescription"]);return s!=null&&x(t,["styleDescription"],s),t}function eC(n,e){const t={},s=g(e,["subjectType"]);s!=null&&x(t,["subjectType"],s);const r=g(e,["subjectDescription"]);return r!=null&&x(t,["subjectDescription"],r),t}function tC(n,e){const t={},s=g(e,["referenceImage"]);s!=null&&x(t,["referenceImage"],Cp(n,s));const r=g(e,["referenceId"]);r!=null&&x(t,["referenceId"],r);const i=g(e,["referenceType"]);i!=null&&x(t,["referenceType"],i);const c=g(e,["maskImageConfig"]);c!=null&&x(t,["maskImageConfig"],ZS(n,c));const d=g(e,["controlImageConfig"]);d!=null&&x(t,["controlImageConfig"],JS(n,d));const f=g(e,["styleImageConfig"]);f!=null&&x(t,["styleImageConfig"],QS(n,f));const h=g(e,["subjectImageConfig"]);return h!=null&&x(t,["subjectImageConfig"],eC(n,h)),t}function nC(n,e,t){const s={},r=g(e,["outputGcsUri"]);t!==void 0&&r!=null&&x(t,["parameters","storageUri"],r);const i=g(e,["negativePrompt"]);t!==void 0&&i!=null&&x(t,["parameters","negativePrompt"],i);const c=g(e,["numberOfImages"]);t!==void 0&&c!=null&&x(t,["parameters","sampleCount"],c);const d=g(e,["aspectRatio"]);t!==void 0&&d!=null&&x(t,["parameters","aspectRatio"],d);const f=g(e,["guidanceScale"]);t!==void 0&&f!=null&&x(t,["parameters","guidanceScale"],f);const h=g(e,["seed"]);t!==void 0&&h!=null&&x(t,["parameters","seed"],h);const _=g(e,["safetyFilterLevel"]);t!==void 0&&_!=null&&x(t,["parameters","safetySetting"],_);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const v=g(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&x(t,["parameters","includeSafetyAttributes"],v);const T=g(e,["includeRaiReason"]);t!==void 0&&T!=null&&x(t,["parameters","includeRaiReason"],T);const C=g(e,["language"]);t!==void 0&&C!=null&&x(t,["parameters","language"],C);const L=g(e,["outputMimeType"]);t!==void 0&&L!=null&&x(t,["parameters","outputOptions","mimeType"],L);const R=g(e,["outputCompressionQuality"]);t!==void 0&&R!=null&&x(t,["parameters","outputOptions","compressionQuality"],R);const I=g(e,["editMode"]);t!==void 0&&I!=null&&x(t,["parameters","editMode"],I);const j=g(e,["baseSteps"]);return t!==void 0&&j!=null&&x(t,["parameters","editConfig","baseSteps"],j),s}function sC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["prompt"]);r!=null&&x(t,["instances[0]","prompt"],r);const i=g(e,["referenceImages"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>tC(n,f))),x(t,["instances[0]","referenceImages"],d)}const c=g(e,["config"]);return c!=null&&x(t,["config"],nC(n,c,t)),t}function aC(n,e,t){const s={},r=g(e,["includeRaiReason"]);t!==void 0&&r!=null&&x(t,["parameters","includeRaiReason"],r);const i=g(e,["outputMimeType"]);t!==void 0&&i!=null&&x(t,["parameters","outputOptions","mimeType"],i);const c=g(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&x(t,["parameters","outputOptions","compressionQuality"],c);const d=g(e,["numberOfImages"]);t!==void 0&&d!=null&&x(t,["parameters","sampleCount"],d);const f=g(e,["mode"]);return t!==void 0&&f!=null&&x(t,["parameters","mode"],f),s}function rC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["image"]);r!=null&&x(t,["instances[0]","image"],Cp(n,r));const i=g(e,["upscaleFactor"]);i!=null&&x(t,["parameters","upscaleConfig","upscaleFactor"],i);const c=g(e,["config"]);return c!=null&&x(t,["config"],aC(n,c,t)),t}function iC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function oC(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);t!==void 0&&i!=null&&x(t,["_query","pageToken"],i);const c=g(e,["filter"]);t!==void 0&&c!=null&&x(t,["_query","filter"],c);const d=g(e,["queryBase"]);return t!==void 0&&d!=null&&x(t,["_url","models_url"],$2(n,d)),s}function lC(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],oC(n,s,t)),t}function cC(n,e,t){const s={},r=g(e,["displayName"]);t!==void 0&&r!=null&&x(t,["displayName"],r);const i=g(e,["description"]);t!==void 0&&i!=null&&x(t,["description"],i);const c=g(e,["defaultCheckpointId"]);return t!==void 0&&c!=null&&x(t,["defaultCheckpointId"],c),s}function uC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],cC(n,r,t)),t}function dC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function fC(n,e,t){const s={},r=g(e,["systemInstruction"]);t!==void 0&&r!=null&&x(t,["systemInstruction"],Ju(n,xi(n,r)));const i=g(e,["tools"]);if(t!==void 0&&i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>n_(n,f))),x(t,["tools"],d)}const c=g(e,["generationConfig"]);return t!==void 0&&c!=null&&x(t,["generationConfig"],c),s}function hC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(n,r);Array.isArray(c)&&(c=c.map(d=>Ju(n,d))),x(t,["contents"],c)}const i=g(e,["config"]);return i!=null&&x(t,["config"],fC(n,i,t)),t}function mC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(n,r);Array.isArray(c)&&(c=c.map(d=>Ju(n,d))),x(t,["contents"],c)}const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function pC(n,e,t){const s={},r=g(e,["numberOfVideos"]);t!==void 0&&r!=null&&x(t,["parameters","sampleCount"],r);const i=g(e,["outputGcsUri"]);t!==void 0&&i!=null&&x(t,["parameters","storageUri"],i);const c=g(e,["fps"]);t!==void 0&&c!=null&&x(t,["parameters","fps"],c);const d=g(e,["durationSeconds"]);t!==void 0&&d!=null&&x(t,["parameters","durationSeconds"],d);const f=g(e,["seed"]);t!==void 0&&f!=null&&x(t,["parameters","seed"],f);const h=g(e,["aspectRatio"]);t!==void 0&&h!=null&&x(t,["parameters","aspectRatio"],h);const _=g(e,["resolution"]);t!==void 0&&_!=null&&x(t,["parameters","resolution"],_);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const v=g(e,["pubsubTopic"]);t!==void 0&&v!=null&&x(t,["parameters","pubsubTopic"],v);const T=g(e,["negativePrompt"]);t!==void 0&&T!=null&&x(t,["parameters","negativePrompt"],T);const C=g(e,["enhancePrompt"]);t!==void 0&&C!=null&&x(t,["parameters","enhancePrompt"],C);const L=g(e,["generateAudio"]);return t!==void 0&&L!=null&&x(t,["parameters","generateAudio"],L),s}function gC(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],la(n,s));const r=g(e,["prompt"]);r!=null&&x(t,["instances[0]","prompt"],r);const i=g(e,["image"]);i!=null&&x(t,["instances[0]","image"],Cp(n,i));const c=g(e,["config"]);return c!=null&&x(t,["config"],pC(n,c,t)),t}function xC(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function EC(n,e){const t={},s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function _C(n,e){const t={},s=g(e,["fileUri"]);s!=null&&x(t,["fileUri"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function bC(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],xC(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],EC(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],_C(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function TC(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>bC(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function NC(n,e){const t={},s=g(e,["citationSources"]);return s!=null&&x(t,["citations"],s),t}function vC(n,e){const t={},s=g(e,["retrievedUrl"]);s!=null&&x(t,["retrievedUrl"],s);const r=g(e,["urlRetrievalStatus"]);return r!=null&&x(t,["urlRetrievalStatus"],r),t}function yC(n,e){const t={},s=g(e,["urlMetadata"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>vC(n,i))),x(t,["urlMetadata"],r)}return t}function AC(n,e){const t={},s=g(e,["content"]);s!=null&&x(t,["content"],TC(n,s));const r=g(e,["citationMetadata"]);r!=null&&x(t,["citationMetadata"],NC(n,r));const i=g(e,["tokenCount"]);i!=null&&x(t,["tokenCount"],i);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["urlContextMetadata"]);d!=null&&x(t,["urlContextMetadata"],yC(n,d));const f=g(e,["avgLogprobs"]);f!=null&&x(t,["avgLogprobs"],f);const h=g(e,["groundingMetadata"]);h!=null&&x(t,["groundingMetadata"],h);const _=g(e,["index"]);_!=null&&x(t,["index"],_);const b=g(e,["logprobsResult"]);b!=null&&x(t,["logprobsResult"],b);const v=g(e,["safetyRatings"]);return v!=null&&x(t,["safetyRatings"],v),t}function CE(n,e){const t={},s=g(e,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(f=>AC(n,f))),x(t,["candidates"],d)}const r=g(e,["modelVersion"]);r!=null&&x(t,["modelVersion"],r);const i=g(e,["promptFeedback"]);i!=null&&x(t,["promptFeedback"],i);const c=g(e,["usageMetadata"]);return c!=null&&x(t,["usageMetadata"],c),t}function SC(n,e){const t={},s=g(e,["values"]);return s!=null&&x(t,["values"],s),t}function CC(){return{}}function LC(n,e){const t={},s=g(e,["embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>SC(n,c))),x(t,["embeddings"],i)}return g(e,["metadata"])!=null&&x(t,["metadata"],CC()),t}function wC(n,e){const t={},s=g(e,["bytesBase64Encoded"]);s!=null&&x(t,["imageBytes"],yc(n,s));const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function s_(n,e){const t={},s=g(e,["safetyAttributes","categories"]);s!=null&&x(t,["categories"],s);const r=g(e,["safetyAttributes","scores"]);r!=null&&x(t,["scores"],r);const i=g(e,["contentType"]);return i!=null&&x(t,["contentType"],i),t}function IC(n,e){const t={},s=g(e,["_self"]);s!=null&&x(t,["image"],wC(n,s));const r=g(e,["raiFilteredReason"]);r!=null&&x(t,["raiFilteredReason"],r);const i=g(e,["_self"]);return i!=null&&x(t,["safetyAttributes"],s_(n,i)),t}function DC(n,e){const t={},s=g(e,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>IC(n,c))),x(t,["generatedImages"],i)}const r=g(e,["positivePromptSafetyAttributes"]);return r!=null&&x(t,["positivePromptSafetyAttributes"],s_(n,r)),t}function RC(n,e){const t={},s=g(e,["baseModel"]);s!=null&&x(t,["baseModel"],s);const r=g(e,["createTime"]);r!=null&&x(t,["createTime"],r);const i=g(e,["updateTime"]);return i!=null&&x(t,["updateTime"],i),t}function Z0(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["displayName"]);r!=null&&x(t,["displayName"],r);const i=g(e,["description"]);i!=null&&x(t,["description"],i);const c=g(e,["version"]);c!=null&&x(t,["version"],c);const d=g(e,["_self"]);d!=null&&x(t,["tunedModelInfo"],RC(n,d));const f=g(e,["inputTokenLimit"]);f!=null&&x(t,["inputTokenLimit"],f);const h=g(e,["outputTokenLimit"]);h!=null&&x(t,["outputTokenLimit"],h);const _=g(e,["supportedGenerationMethods"]);return _!=null&&x(t,["supportedActions"],_),t}function OC(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["_self"]);if(r!=null){let i=W2(n,r);Array.isArray(i)&&(i=i.map(c=>Z0(n,c))),x(t,["models"],i)}return t}function PC(){return{}}function MC(n,e){const t={},s=g(e,["totalTokens"]);s!=null&&x(t,["totalTokens"],s);const r=g(e,["cachedContentTokenCount"]);return r!=null&&x(t,["cachedContentTokenCount"],r),t}function kC(n,e){const t={},s=g(e,["video","uri"]);s!=null&&x(t,["uri"],s);const r=g(e,["video","encodedVideo"]);r!=null&&x(t,["videoBytes"],yc(n,r));const i=g(e,["encoding"]);return i!=null&&x(t,["mimeType"],i),t}function jC(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],kC(n,s)),t}function BC(n,e){const t={},s=g(e,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>jC(n,d))),x(t,["generatedVideos"],c)}const r=g(e,["raiMediaFilteredCount"]);r!=null&&x(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);return i!=null&&x(t,["raiMediaFilteredReasons"],i),t}function UC(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["metadata"]);r!=null&&x(t,["metadata"],r);const i=g(e,["done"]);i!=null&&x(t,["done"],i);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],BC(n,d)),t}function FC(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function VC(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["data"]);r!=null&&x(t,["data"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function GC(n,e){const t={},s=g(e,["displayName"]);s!=null&&x(t,["displayName"],s);const r=g(e,["fileUri"]);r!=null&&x(t,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function HC(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],FC(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],VC(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],GC(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function YC(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>HC(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function qC(n,e){const t={},s=g(e,["citations"]);return s!=null&&x(t,["citations"],s),t}function zC(n,e){const t={},s=g(e,["retrievedUrl"]);s!=null&&x(t,["retrievedUrl"],s);const r=g(e,["urlRetrievalStatus"]);return r!=null&&x(t,["urlRetrievalStatus"],r),t}function $C(n,e){const t={},s=g(e,["urlMetadata"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>zC(n,i))),x(t,["urlMetadata"],r)}return t}function WC(n,e){const t={},s=g(e,["content"]);s!=null&&x(t,["content"],YC(n,s));const r=g(e,["citationMetadata"]);r!=null&&x(t,["citationMetadata"],qC(n,r));const i=g(e,["finishMessage"]);i!=null&&x(t,["finishMessage"],i);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["urlContextMetadata"]);d!=null&&x(t,["urlContextMetadata"],$C(n,d));const f=g(e,["avgLogprobs"]);f!=null&&x(t,["avgLogprobs"],f);const h=g(e,["groundingMetadata"]);h!=null&&x(t,["groundingMetadata"],h);const _=g(e,["index"]);_!=null&&x(t,["index"],_);const b=g(e,["logprobsResult"]);b!=null&&x(t,["logprobsResult"],b);const v=g(e,["safetyRatings"]);return v!=null&&x(t,["safetyRatings"],v),t}function LE(n,e){const t={},s=g(e,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(_=>WC(n,_))),x(t,["candidates"],h)}const r=g(e,["createTime"]);r!=null&&x(t,["createTime"],r);const i=g(e,["responseId"]);i!=null&&x(t,["responseId"],i);const c=g(e,["modelVersion"]);c!=null&&x(t,["modelVersion"],c);const d=g(e,["promptFeedback"]);d!=null&&x(t,["promptFeedback"],d);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function KC(n,e){const t={},s=g(e,["truncated"]);s!=null&&x(t,["truncated"],s);const r=g(e,["token_count"]);return r!=null&&x(t,["tokenCount"],r),t}function XC(n,e){const t={},s=g(e,["values"]);s!=null&&x(t,["values"],s);const r=g(e,["statistics"]);return r!=null&&x(t,["statistics"],KC(n,r)),t}function ZC(n,e){const t={},s=g(e,["billableCharacterCount"]);return s!=null&&x(t,["billableCharacterCount"],s),t}function JC(n,e){const t={},s=g(e,["predictions[]","embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>XC(n,c))),x(t,["embeddings"],i)}const r=g(e,["metadata"]);return r!=null&&x(t,["metadata"],ZC(n,r)),t}function QC(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["gcsUri"],s);const r=g(e,["bytesBase64Encoded"]);r!=null&&x(t,["imageBytes"],yc(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function a_(n,e){const t={},s=g(e,["safetyAttributes","categories"]);s!=null&&x(t,["categories"],s);const r=g(e,["safetyAttributes","scores"]);r!=null&&x(t,["scores"],r);const i=g(e,["contentType"]);return i!=null&&x(t,["contentType"],i),t}function Lp(n,e){const t={},s=g(e,["_self"]);s!=null&&x(t,["image"],QC(n,s));const r=g(e,["raiFilteredReason"]);r!=null&&x(t,["raiFilteredReason"],r);const i=g(e,["_self"]);i!=null&&x(t,["safetyAttributes"],a_(n,i));const c=g(e,["prompt"]);return c!=null&&x(t,["enhancedPrompt"],c),t}function eL(n,e){const t={},s=g(e,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>Lp(n,c))),x(t,["generatedImages"],i)}const r=g(e,["positivePromptSafetyAttributes"]);return r!=null&&x(t,["positivePromptSafetyAttributes"],a_(n,r)),t}function tL(n,e){const t={},s=g(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Lp(n,i))),x(t,["generatedImages"],r)}return t}function nL(n,e){const t={},s=g(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Lp(n,i))),x(t,["generatedImages"],r)}return t}function sL(n,e){const t={},s=g(e,["endpoint"]);s!=null&&x(t,["name"],s);const r=g(e,["deployedModelId"]);return r!=null&&x(t,["deployedModelId"],r),t}function aL(n,e){const t={},s=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&x(t,["baseModel"],s);const r=g(e,["createTime"]);r!=null&&x(t,["createTime"],r);const i=g(e,["updateTime"]);return i!=null&&x(t,["updateTime"],i),t}function rL(n,e){const t={},s=g(e,["checkpointId"]);s!=null&&x(t,["checkpointId"],s);const r=g(e,["epoch"]);r!=null&&x(t,["epoch"],r);const i=g(e,["step"]);return i!=null&&x(t,["step"],i),t}function J0(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["displayName"]);r!=null&&x(t,["displayName"],r);const i=g(e,["description"]);i!=null&&x(t,["description"],i);const c=g(e,["versionId"]);c!=null&&x(t,["version"],c);const d=g(e,["deployedModels"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(T=>sL(n,T))),x(t,["endpoints"],v)}const f=g(e,["labels"]);f!=null&&x(t,["labels"],f);const h=g(e,["_self"]);h!=null&&x(t,["tunedModelInfo"],aL(n,h));const _=g(e,["defaultCheckpointId"]);_!=null&&x(t,["defaultCheckpointId"],_);const b=g(e,["checkpoints"]);if(b!=null){let v=b;Array.isArray(v)&&(v=v.map(T=>rL(n,T))),x(t,["checkpoints"],v)}return t}function iL(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["_self"]);if(r!=null){let i=W2(n,r);Array.isArray(i)&&(i=i.map(c=>J0(n,c))),x(t,["models"],i)}return t}function oL(){return{}}function lL(n,e){const t={},s=g(e,["totalTokens"]);return s!=null&&x(t,["totalTokens"],s),t}function cL(n,e){const t={},s=g(e,["tokensInfo"]);return s!=null&&x(t,["tokensInfo"],s),t}function uL(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["uri"],s);const r=g(e,["bytesBase64Encoded"]);r!=null&&x(t,["videoBytes"],yc(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function dL(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],uL(n,s)),t}function fL(n,e){const t={},s=g(e,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>dL(n,d))),x(t,["generatedVideos"],c)}const r=g(e,["raiMediaFilteredCount"]);r!=null&&x(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);return i!=null&&x(t,["raiMediaFilteredReasons"],i),t}function hL(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["metadata"]);r!=null&&x(t,["metadata"],r);const i=g(e,["done"]);i!=null&&x(t,["done"],i);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],fL(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mL="Content-Type",pL="X-Server-Timeout",gL="User-Agent",Q0="x-goog-api-client",xL="1.4.0",EL=`google-genai-sdk/${xL}`,_L="v1beta1",bL="v1beta",wE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class r_ extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class ep extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class TL{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:_L,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:bL,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))typeof i=="object"?s[r]=Object.assign(Object.assign({},s[r]),i):i!==void 0&&(s[r]=i);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const r=new AbortController,i=r.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=i}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await IE(r),new $0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await IE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Bu(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:f}=yield Ea(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=i.decode(f);try{const b=JSON.parse(h);if("error"in b){const v=JSON.parse(JSON.stringify(b.error)),T=v.status,C=v.code,L=`got status: ${T}. ${JSON.stringify(b)}`;if(C>=400&&C<500)throw new r_(L);if(C>=500&&C<600)throw new ep(L)}}catch(b){const v=b;if(v.name==="ClientError"||v.name==="ServerError")throw b}c+=h;let _=c.match(wE);for(;_;){const b=_[1];try{const v=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ea(new $0(v)),c=c.slice(_[0].length),_=c.match(wE)}catch(v){throw new Error(`exception parsing stream chunk ${b}. ${v}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=EL+" "+this.clientOptions.userAgentExtra;return e[gL]=t,e[Q0]=t,e[mL]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))t.append(s,r);e.timeout&&e.timeout>0&&t.append(pL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,c=await i.stat(e);r.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const f=await this.fetchUploadUrl(r,t);return i.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},c=await this.request({path:Pn("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function IE(n){var e;if(n===void 0)throw new ep("response is undefined");if(!n.ok){const t=n.status,s=n.statusText;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=`got status: ${t} ${s}. ${JSON.stringify(r)}`;throw t>=400&&t<500?new r_(i):t>=500&&t<600?new ep(i):new Error(i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NL="mcp_used/unknown";function i_(n){for(const e of n)if(wp(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function o_(n){var e;const t=(e=n[Q0])!==null&&e!==void 0?e:"";n[Q0]=(t+` ${NL}`).trimStart()}function vL(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>wp(r)))!==null&&s!==void 0?s:!1}function yL(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!wp(r)))!==null&&s!==void 0?s:!1}function wp(n){return n!==null&&typeof n=="object"&&n instanceof Ip}function AL(n,e=100){return Bu(this,arguments,function*(){let s,r=0;for(;r<e;){const i=yield Ea(n.listTools({cursor:s}));for(const c of i.tools)yield yield Ea(c),r++;if(!i.nextCursor)break;s=i.nextCursor}})}class Ip{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ip(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const i={},c=[];for(const _ of this.mcpClients)try{for(var d=!0,f=(t=void 0,Kd(AL(_))),h;h=await f.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const b=r;c.push(b);const v=b.name;if(i[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);i[v]=_}}catch(b){t={error:b}}finally{try{!d&&!e&&(s=f.return)&&await s.call(f)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),CN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const i=await this.functionNameToMcpClient[s.name].callTool({name:s.name,arguments:s.args});t.push({functionResponse:{name:s.name,response:i.isError?{error:i}:i}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SL(n,e,t){const s=new mN;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const i=kA(n,r);Object.assign(s,i),e(s)}class CL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),c=IL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(O=>{h=O}),b=e.callbacks,v=function(){h({})},T=this.apiClient,C={onopen:v,onmessage:O=>{SL(T,b.onmessage,O)},onerror:(t=b==null?void 0:b.onerror)!==null&&t!==void 0?t:function(O){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(O){}},L=this.webSocketFactory.create(f,wL(c),C);L.connect(),await _;const R=la(this.apiClient,e.model),I=Q2(this.apiClient,{model:R}),j=X0(this.apiClient,{setup:I});return L.send(JSON.stringify(j)),new LL(L,this.apiClient)}}class LL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Xy(this.apiClient,e),s=e_(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Zy(this.apiClient,e),s=X0(this.apiClient,t);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const t=X0(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Mu.PLAY)}pause(){this.sendPlaybackControl(Mu.PAUSE)}stop(){this.sendPlaybackControl(Mu.STOP)}resetContext(){this.sendPlaybackControl(Mu.RESET_CONTEXT)}close(){this.conn.close()}}function wL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function IL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RL(n,e,t){const s=new hN;let r;if(t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),n.isVertexAI()){const i=CA(n,r);Object.assign(s,i)}else{const i=SA(n,r);Object.assign(s,i)}e(s)}class OL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new CL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,i,c,d;const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const b=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&i_(e.config.tools)&&o_(b);const v=jL(b);if(this.apiClient.isVertexAI())_=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const oe=this.apiClient.getApiKey();let xe="BidiGenerateContent",F="key";oe!=null&&oe.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),xe="BidiGenerateContentConstrained",F="access_token"),_=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${xe}?${F}=${oe}`}let T=()=>{};const C=new Promise(oe=>{T=oe}),L=e.callbacks,R=function(){var oe;(oe=L==null?void 0:L.onopen)===null||oe===void 0||oe.call(L),T({})},I=this.apiClient,j={onopen:R,onmessage:oe=>{RL(I,L.onmessage,oe)},onerror:(t=L==null?void 0:L.onerror)!==null&&t!==void 0?t:function(oe){},onclose:(s=L==null?void 0:L.onclose)!==null&&s!==void 0?s:function(oe){}},O=this.webSocketFactory.create(_,kL(v),j);O.connect(),await C;let U=la(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const oe=this.apiClient.getProject(),xe=this.apiClient.getLocation();U=`projects/${oe}/locations/${xe}/`+U}let se={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mh.AUDIO]}:e.config.responseModalities=[Mh.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],ee=[];for(const oe of Z)if(this.isCallableTool(oe)){const xe=oe;ee.push(await xe.tool())}else ee.push(oe);ee.length>0&&(e.config.tools=ee);const J={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=Hy(this.apiClient,J):se=Gy(this.apiClient,J),delete se.config,O.send(JSON.stringify(se)),new ML(O,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const PL={turnComplete:!0};class ML{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Vo(e,t.turns),e.isVertexAI()?s=s.map(r=>Ju(e,r)):s=s.map(r=>Kh(e,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(DL)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},PL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Ky(this.apiClient,e)}:t={realtimeInput:Wy(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function kL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function jL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DE=10;function RE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(bh(c)){r=!0;break}if(!r)return!0;const i=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function bh(n){return"callTool"in n&&typeof n.callTool=="function"}function OE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BL extends Zu{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,i,c,d;const f=await this.processParamsForMcpUsage(t);if(!vL(t)||RE(t.config))return await this.generateContentInternal(f);if(yL(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,_;const b=Vo(this.apiClient,f.contents),v=(i=(r=(s=f.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:DE;let T=0;for(;T<v&&(h=await this.generateContentInternal(f),!(!h.functionCalls||h.functionCalls.length===0));){const C=h.candidates[0].content,L=[];for(const R of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(bh(R)){const j=await R.callTool(h.functionCalls);L.push(...j)}T++,_={role:"user",parts:L},f.contents=Vo(this.apiClient,f.contents),f.contents.push(C),f.contents.push(_),OE(f.config)&&(b.push(C),b.push(_))}return OE(f.config)&&(h.automaticFunctionCallingHistory=b),h},this.generateContentStream=async t=>{if(RE(t.config)){const s=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let i;const c=[];if(s!=null&&s.generatedImages)for(const f of s.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=f==null?void 0:f.safetyAttributes:c.push(f);let d;return i?d={generatedImages:c,positivePromptSafetyAttributes:i}:d={generatedImages:c},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Wh(Ku.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var t,s,r;const i=(t=e.config)===null||t===void 0?void 0:t.tools;if(!i)return e;const c=await Promise.all(i.map(async f=>bh(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&i_(e.config.tools)){const f=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),o_(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,s,r;const i=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(bh(c)){const d=c,f=await d.tool();for(const h of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(i.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);i.set(h.name,d)}}return i}async processAfcStream(e){var t,s,r;const i=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:DE;let c=!1,d=0;const f=await this.initAfcToolsMap(e);return function(h,_,b){var v,T;return Bu(this,arguments,function*(){for(var C,L,R,I;d<i;){c&&(d++,c=!1);const se=yield Ea(h.processParamsForMcpUsage(b)),Z=yield Ea(h.generateContentStreamInternal(se)),ee=[],J=[];try{for(var j=!0,O=(L=void 0,Kd(Z)),U;U=yield Ea(O.next()),C=U.done,!C;j=!0){I=U.value,j=!1;const oe=I;if(yield yield Ea(oe),oe.candidates&&(!((v=oe.candidates[0])===null||v===void 0)&&v.content)){J.push(oe.candidates[0].content);for(const xe of(T=oe.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(d<i&&xe.functionCall){if(!xe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(xe.functionCall.name)){const F=yield Ea(_.get(xe.functionCall.name).callTool([xe.functionCall]));ee.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${xe.functionCall.name}`)}}}}catch(oe){L={error:oe}}finally{try{!j&&!C&&(R=O.return)&&(yield Ea(R.call(O)))}finally{if(L)throw L.error}}if(ee.length>0){c=!0;const oe=new Ud;oe.candidates=[{content:{role:"user",parts:ee}}],yield yield Ea(oe);const xe=[];xe.push(...J),xe.push({role:"user",parts:ee});const F=Vo(h.apiClient,b.contents).concat(xe);b.contents=F}else break}})}(this,f,e)}async generateContentInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=SE(this.apiClient,e);return d=Pn("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=LE(this.apiClient,_),v=new Ud;return Object.assign(v,b),v})}else{const h=AE(this.apiClient,e);return d=Pn("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=CE(this.apiClient,_),v=new Ud;return Object.assign(v,b),v})}}async generateContentStreamInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=SE(this.apiClient,e);d=Pn("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const _=this.apiClient;return c=_.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(b){return Bu(this,arguments,function*(){var v,T,C,L;try{for(var R=!0,I=Kd(b),j;j=yield Ea(I.next()),v=j.done,!v;R=!0){L=j.value,R=!1;const U=LE(_,yield Ea(L.json())),se=new Ud;Object.assign(se,U),yield yield Ea(se)}}catch(O){T={error:O}}finally{try{!R&&!v&&(C=I.return)&&(yield Ea(C.call(I)))}finally{if(T)throw T.error}}})})}else{const h=AE(this.apiClient,e);d=Pn("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const _=this.apiClient;return c=_.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(b){return Bu(this,arguments,function*(){var v,T,C,L;try{for(var R=!0,I=Kd(b),j;j=yield Ea(I.next()),v=j.done,!v;R=!0){L=j.value,R=!1;const U=CE(_,yield Ea(L.json())),se=new Ud;Object.assign(se,U),yield yield Ea(se)}}catch(O){T={error:O}}finally{try{!R&&!v&&(C=I.return)&&(yield Ea(C.call(I)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=WS(this.apiClient,e);return d=Pn("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=JC(this.apiClient,_),v=new rE;return Object.assign(v,b),v})}else{const h=oS(this.apiClient,e);return d=Pn("{model}:batchEmbedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=LC(this.apiClient,_),v=new rE;return Object.assign(v,b),v})}}async generateImagesInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=XS(this.apiClient,e);return d=Pn("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=eL(this.apiClient,_),v=new iE;return Object.assign(v,b),v})}else{const h=cS(this.apiClient,e);return d=Pn("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=DC(this.apiClient,_),v=new iE;return Object.assign(v,b),v})}}async editImageInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI()){const d=sC(this.apiClient,e);return i=Pn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=tL(this.apiClient,f),_=new oN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI()){const d=rC(this.apiClient,e);return i=Pn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=nL(this.apiClient,f),_=new lN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=iC(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>J0(this.apiClient,_))}else{const h=uS(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Z0(this.apiClient,_))}}async listInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=lC(this.apiClient,e);return d=Pn("{models_url}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=iL(this.apiClient,_),v=new oE;return Object.assign(v,b),v})}else{const h=fS(this.apiClient,e);return d=Pn("{models_url}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=OC(this.apiClient,_),v=new oE;return Object.assign(v,b),v})}}async update(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=uC(this.apiClient,e);return d=Pn("{model}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>J0(this.apiClient,_))}else{const h=mS(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Z0(this.apiClient,_))}}async delete(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=dC(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(()=>{const _=oL(),b=new lE;return Object.assign(b,_),b})}else{const h=pS(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(()=>{const _=PC(),b=new lE;return Object.assign(b,_),b})}}async countTokens(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=hC(this.apiClient,e);return d=Pn("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=lL(this.apiClient,_),v=new cE;return Object.assign(v,b),v})}else{const h=xS(this.apiClient,e);return d=Pn("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=MC(this.apiClient,_),v=new cE;return Object.assign(v,b),v})}}async computeTokens(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI()){const d=mC(this.apiClient,e);return i=Pn("{model}:computeTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=cL(this.apiClient,f),_=new cN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=gC(this.apiClient,e);return d=Pn("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>hL(this.apiClient,_))}else{const h=bS(this.apiClient,e);return d=Pn("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>UC(this.apiClient,_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UL(n,e){const t={},s=g(e,["operationName"]);s!=null&&x(t,["_url","operationName"],s);const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function FL(n,e){const t={},s=g(e,["operationName"]);s!=null&&x(t,["_url","operationName"],s);const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function VL(n,e){const t={},s=g(e,["operationName"]);s!=null&&x(t,["operationName"],s);const r=g(e,["resourceName"]);r!=null&&x(t,["_url","resourceName"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function GL(n,e){const t={},s=g(e,["video","uri"]);s!=null&&x(t,["uri"],s);const r=g(e,["video","encodedVideo"]);r!=null&&x(t,["videoBytes"],yc(n,r));const i=g(e,["encoding"]);return i!=null&&x(t,["mimeType"],i),t}function HL(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],GL(n,s)),t}function YL(n,e){const t={},s=g(e,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>HL(n,d))),x(t,["generatedVideos"],c)}const r=g(e,["raiMediaFilteredCount"]);r!=null&&x(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);return i!=null&&x(t,["raiMediaFilteredReasons"],i),t}function qL(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["metadata"]);r!=null&&x(t,["metadata"],r);const i=g(e,["done"]);i!=null&&x(t,["done"],i);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],YL(n,d)),t}function zL(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["uri"],s);const r=g(e,["bytesBase64Encoded"]);r!=null&&x(t,["videoBytes"],yc(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function $L(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],zL(n,s)),t}function WL(n,e){const t={},s=g(e,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>$L(n,d))),x(t,["generatedVideos"],c)}const r=g(e,["raiMediaFilteredCount"]);r!=null&&x(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);return i!=null&&x(t,["raiMediaFilteredReasons"],i),t}function PE(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["metadata"]);r!=null&&x(t,["metadata"],r);const i=g(e,["done"]);i!=null&&x(t,["done"],i);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],WL(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KL extends Zu{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let i;return s&&"httpOptions"in s&&(i=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:i}})}else return this.getVideosOperationInternal({operationName:t.name,config:s})}async getVideosOperationInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=FL(this.apiClient,e);return d=Pn("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>PE(this.apiClient,_))}else{const h=UL(this.apiClient,e);return d=Pn("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>qL(this.apiClient,_))}}async fetchPredictVideosOperationInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI()){const d=VL(this.apiClient,e);return i=Pn("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>PE(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XL(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function l_(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],XL(n,s)),t}function ZL(n,e){const t={},s=g(e,["speaker"]);s!=null&&x(t,["speaker"],s);const r=g(e,["voiceConfig"]);return r!=null&&x(t,["voiceConfig"],l_(n,r)),t}function JL(n,e){const t={},s=g(e,["speakerVoiceConfigs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>ZL(n,i))),x(t,["speakerVoiceConfigs"],r)}return t}function QL(n,e){const t={},s=g(e,["voiceConfig"]);s!=null&&x(t,["voiceConfig"],l_(n,s));const r=g(e,["multiSpeakerVoiceConfig"]);r!=null&&x(t,["multiSpeakerVoiceConfig"],JL(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function ew(n,e){const t={},s=g(e,["fps"]);s!=null&&x(t,["fps"],s);const r=g(e,["endOffset"]);r!=null&&x(t,["endOffset"],r);const i=g(e,["startOffset"]);return i!=null&&x(t,["startOffset"],i),t}function tw(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["data"]);s!=null&&x(t,["data"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function nw(n,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(e,["fileUri"]);s!=null&&x(t,["fileUri"],s);const r=g(e,["mimeType"]);return r!=null&&x(t,["mimeType"],r),t}function sw(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],ew(n,s));const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["inlineData"]);i!=null&&x(t,["inlineData"],tw(n,i));const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],nw(n,c));const d=g(e,["thoughtSignature"]);d!=null&&x(t,["thoughtSignature"],d);const f=g(e,["codeExecutionResult"]);f!=null&&x(t,["codeExecutionResult"],f);const h=g(e,["executableCode"]);h!=null&&x(t,["executableCode"],h);const _=g(e,["functionCall"]);_!=null&&x(t,["functionCall"],_);const b=g(e,["functionResponse"]);b!=null&&x(t,["functionResponse"],b);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function aw(n,e){const t={},s=g(e,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>sw(n,c))),x(t,["parts"],i)}const r=g(e,["role"]);return r!=null&&x(t,["role"],r),t}function rw(n,e){const t={},s=g(e,["behavior"]);s!=null&&x(t,["behavior"],s);const r=g(e,["description"]);r!=null&&x(t,["description"],r);const i=g(e,["name"]);i!=null&&x(t,["name"],i);const c=g(e,["parameters"]);c!=null&&x(t,["parameters"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],d),t}function iw(n,e){const t={},s=g(e,["startTime"]);s!=null&&x(t,["startTime"],s);const r=g(e,["endTime"]);return r!=null&&x(t,["endTime"],r),t}function ow(n,e){const t={},s=g(e,["timeRangeFilter"]);return s!=null&&x(t,["timeRangeFilter"],iw(n,s)),t}function lw(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const r=g(e,["dynamicThreshold"]);return r!=null&&x(t,["dynamicThreshold"],r),t}function cw(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],lw(n,s)),t}function uw(){return{}}function dw(n,e){const t={},s=g(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(h=>rw(n,h))),x(t,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearch"]);r!=null&&x(t,["googleSearch"],ow(n,r));const i=g(e,["googleSearchRetrieval"]);if(i!=null&&x(t,["googleSearchRetrieval"],cw(n,i)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&x(t,["urlContext"],uw());const d=g(e,["codeExecution"]);return d!=null&&x(t,["codeExecution"],d),t}function fw(n,e){const t={},s=g(e,["handle"]);if(s!=null&&x(t,["handle"],s),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ME(){return{}}function hw(n,e){const t={},s=g(e,["disabled"]);s!=null&&x(t,["disabled"],s);const r=g(e,["startOfSpeechSensitivity"]);r!=null&&x(t,["startOfSpeechSensitivity"],r);const i=g(e,["endOfSpeechSensitivity"]);i!=null&&x(t,["endOfSpeechSensitivity"],i);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function mw(n,e){const t={},s=g(e,["automaticActivityDetection"]);s!=null&&x(t,["automaticActivityDetection"],hw(n,s));const r=g(e,["activityHandling"]);r!=null&&x(t,["activityHandling"],r);const i=g(e,["turnCoverage"]);return i!=null&&x(t,["turnCoverage"],i),t}function pw(n,e){const t={},s=g(e,["targetTokens"]);return s!=null&&x(t,["targetTokens"],s),t}function gw(n,e){const t={},s=g(e,["triggerTokens"]);s!=null&&x(t,["triggerTokens"],s);const r=g(e,["slidingWindow"]);return r!=null&&x(t,["slidingWindow"],pw(n,r)),t}function xw(n,e){const t={},s=g(e,["proactiveAudio"]);return s!=null&&x(t,["proactiveAudio"],s),t}function Ew(n,e,t){const s={},r=g(e,["generationConfig"]);t!==void 0&&r!=null&&x(t,["setup","generationConfig"],r);const i=g(e,["responseModalities"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig","responseModalities"],i);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const f=g(e,["topK"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);t!==void 0&&h!=null&&x(t,["setup","generationConfig","maxOutputTokens"],h);const _=g(e,["mediaResolution"]);t!==void 0&&_!=null&&x(t,["setup","generationConfig","mediaResolution"],_);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const v=g(e,["speechConfig"]);t!==void 0&&v!=null&&x(t,["setup","generationConfig","speechConfig"],QL(n,Sp(n,v)));const T=g(e,["enableAffectiveDialog"]);t!==void 0&&T!=null&&x(t,["setup","generationConfig","enableAffectiveDialog"],T);const C=g(e,["systemInstruction"]);t!==void 0&&C!=null&&x(t,["setup","systemInstruction"],aw(n,xi(n,C)));const L=g(e,["tools"]);if(t!==void 0&&L!=null){let Z=of(n,L);Array.isArray(Z)&&(Z=Z.map(ee=>dw(n,rf(n,ee)))),x(t,["setup","tools"],Z)}const R=g(e,["sessionResumption"]);t!==void 0&&R!=null&&x(t,["setup","sessionResumption"],fw(n,R));const I=g(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&x(t,["setup","inputAudioTranscription"],ME());const j=g(e,["outputAudioTranscription"]);t!==void 0&&j!=null&&x(t,["setup","outputAudioTranscription"],ME());const O=g(e,["realtimeInputConfig"]);t!==void 0&&O!=null&&x(t,["setup","realtimeInputConfig"],mw(n,O));const U=g(e,["contextWindowCompression"]);t!==void 0&&U!=null&&x(t,["setup","contextWindowCompression"],gw(n,U));const se=g(e,["proactivity"]);return t!==void 0&&se!=null&&x(t,["setup","proactivity"],xw(n,se)),s}function _w(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["setup","model"],la(n,s));const r=g(e,["config"]);return r!=null&&x(t,["config"],Ew(n,r,t)),t}function bw(n,e,t){const s={},r=g(e,["expireTime"]);t!==void 0&&r!=null&&x(t,["expireTime"],r);const i=g(e,["newSessionExpireTime"]);t!==void 0&&i!=null&&x(t,["newSessionExpireTime"],i);const c=g(e,["uses"]);t!==void 0&&c!=null&&x(t,["uses"],c);const d=g(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&x(t,["bidiGenerateContentSetup"],_w(n,d));const f=g(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&x(t,["fieldMask"],f),s}function Tw(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],bw(n,s,t)),t}function Nw(n,e){const t={},s=g(e,["name"]);return s!=null&&x(t,["name"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(i=>`${t}.${i}`);e.push(...r)}else e.push(t)}return e.join(",")}function yw(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(n.bidiGenerateContentSetup=i,t=i):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const i=vw(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?n.fieldMask=i:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const f=[];i&&f.push(i),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Aw extends Zu{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=Tw(this.apiClient,e);i=Pn("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=yw(d,e.config);return r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Nw(this.apiClient,h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sw(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],s);const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Cw(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);t!==void 0&&i!=null&&x(t,["_query","pageToken"],i);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),s}function Lw(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],Cw(n,s,t)),t}function ww(n,e){const t={},s=g(e,["textInput"]);s!=null&&x(t,["textInput"],s);const r=g(e,["output"]);return r!=null&&x(t,["output"],r),t}function Iw(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=g(e,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>ww(n,i))),x(t,["examples","examples"],r)}return t}function Dw(n,e,t){const s={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=g(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&x(t,["displayName"],r),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=g(e,["epochCount"]);t!==void 0&&i!=null&&x(t,["tuningTask","hyperparameters","epochCount"],i);const c=g(e,["learningRateMultiplier"]);if(c!=null&&x(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=g(e,["batchSize"]);t!==void 0&&d!=null&&x(t,["tuningTask","hyperparameters","batchSize"],d);const f=g(e,["learningRate"]);return t!==void 0&&f!=null&&x(t,["tuningTask","hyperparameters","learningRate"],f),s}function Rw(n,e){const t={},s=g(e,["baseModel"]);s!=null&&x(t,["baseModel"],s);const r=g(e,["trainingDataset"]);r!=null&&x(t,["tuningTask","trainingData"],Iw(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],Dw(n,i,t)),t}function Ow(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],s);const r=g(e,["config"]);return r!=null&&x(t,["config"],r),t}function Pw(n,e,t){const s={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&x(t,["_query","pageSize"],r);const i=g(e,["pageToken"]);t!==void 0&&i!=null&&x(t,["_query","pageToken"],i);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),s}function Mw(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],Pw(n,s,t)),t}function kw(n,e,t){const s={},r=g(e,["gcsUri"]);if(t!==void 0&&r!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],r),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function jw(n,e){const t={},s=g(e,["gcsUri"]);return s!=null&&x(t,["validationDatasetUri"],s),t}function Bw(n,e,t){const s={},r=g(e,["validationDataset"]);t!==void 0&&r!=null&&x(t,["supervisedTuningSpec"],jw(n,r));const i=g(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&x(t,["tunedModelDisplayName"],i);const c=g(e,["description"]);t!==void 0&&c!=null&&x(t,["description"],c);const d=g(e,["epochCount"]);t!==void 0&&d!=null&&x(t,["supervisedTuningSpec","hyperParameters","epochCount"],d);const f=g(e,["learningRateMultiplier"]);t!==void 0&&f!=null&&x(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=g(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&x(t,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const _=g(e,["adapterSize"]);if(t!==void 0&&_!=null&&x(t,["supervisedTuningSpec","hyperParameters","adapterSize"],_),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return s}function Uw(n,e){const t={},s=g(e,["baseModel"]);s!=null&&x(t,["baseModel"],s);const r=g(e,["trainingDataset"]);r!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],kw(n,r,t));const i=g(e,["config"]);return i!=null&&x(t,["config"],Bw(n,i,t)),t}function Fw(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["model"],s);const r=g(e,["name"]);return r!=null&&x(t,["endpoint"],r),t}function c_(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["state"]);r!=null&&x(t,["state"],q2(n,r));const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const c=g(e,["tuningTask","startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["tuningTask","completeTime"]);d!=null&&x(t,["endTime"],d);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const h=g(e,["description"]);h!=null&&x(t,["description"],h);const _=g(e,["baseModel"]);_!=null&&x(t,["baseModel"],_);const b=g(e,["_self"]);b!=null&&x(t,["tunedModel"],Fw(n,b));const v=g(e,["distillationSpec"]);v!=null&&x(t,["distillationSpec"],v);const T=g(e,["experiment"]);T!=null&&x(t,["experiment"],T);const C=g(e,["labels"]);C!=null&&x(t,["labels"],C);const L=g(e,["pipelineJob"]);L!=null&&x(t,["pipelineJob"],L);const R=g(e,["serviceAccount"]);R!=null&&x(t,["serviceAccount"],R);const I=g(e,["tunedModelDisplayName"]);return I!=null&&x(t,["tunedModelDisplayName"],I),t}function Vw(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["tunedModels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(c=>c_(n,c))),x(t,["tuningJobs"],i)}return t}function Gw(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["metadata"]);r!=null&&x(t,["metadata"],r);const i=g(e,["done"]);i!=null&&x(t,["done"],i);const c=g(e,["error"]);return c!=null&&x(t,["error"],c),t}function Hw(n,e){const t={},s=g(e,["checkpointId"]);s!=null&&x(t,["checkpointId"],s);const r=g(e,["epoch"]);r!=null&&x(t,["epoch"],r);const i=g(e,["step"]);i!=null&&x(t,["step"],i);const c=g(e,["endpoint"]);return c!=null&&x(t,["endpoint"],c),t}function Yw(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["model"],s);const r=g(e,["endpoint"]);r!=null&&x(t,["endpoint"],r);const i=g(e,["checkpoints"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>Hw(n,d))),x(t,["checkpoints"],c)}return t}function tp(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const r=g(e,["state"]);r!=null&&x(t,["state"],q2(n,r));const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const c=g(e,["startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["endTime"]);d!=null&&x(t,["endTime"],d);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const h=g(e,["error"]);h!=null&&x(t,["error"],h);const _=g(e,["description"]);_!=null&&x(t,["description"],_);const b=g(e,["baseModel"]);b!=null&&x(t,["baseModel"],b);const v=g(e,["tunedModel"]);v!=null&&x(t,["tunedModel"],Yw(n,v));const T=g(e,["supervisedTuningSpec"]);T!=null&&x(t,["supervisedTuningSpec"],T);const C=g(e,["tuningDataStats"]);C!=null&&x(t,["tuningDataStats"],C);const L=g(e,["encryptionSpec"]);L!=null&&x(t,["encryptionSpec"],L);const R=g(e,["partnerModelTuningSpec"]);R!=null&&x(t,["partnerModelTuningSpec"],R);const I=g(e,["distillationSpec"]);I!=null&&x(t,["distillationSpec"],I);const j=g(e,["experiment"]);j!=null&&x(t,["experiment"],j);const O=g(e,["labels"]);O!=null&&x(t,["labels"],O);const U=g(e,["pipelineJob"]);U!=null&&x(t,["pipelineJob"],U);const se=g(e,["serviceAccount"]);se!=null&&x(t,["serviceAccount"],se);const Z=g(e,["tunedModelDisplayName"]);return Z!=null&&x(t,["tunedModelDisplayName"],Z),t}function qw(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=g(e,["tuningJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(c=>tp(n,c))),x(t,["tuningJobs"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zw extends Zu{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Wh(Ku.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const s=await this.tuneMldevInternal(t);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:z0.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=Ow(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>tp(this.apiClient,_))}else{const h=Sw(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>c_(this.apiClient,_))}}async listInternal(e){var t,s,r,i;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=Mw(this.apiClient,e);return d=Pn("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=qw(this.apiClient,_),v=new uE;return Object.assign(v,b),v})}else{const h=Lw(this.apiClient,e);return d=Pn("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const b=Vw(this.apiClient,_),v=new uE;return Object.assign(v,b),v})}}async tuneInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI()){const d=Uw(this.apiClient,e);return i=Pn("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>tp(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,i="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Rw(this.apiClient,e);return i=Pn("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:i,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>Gw(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $w{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ww=1024*1024*8,Kw=3,Xw=1e3,Zw=2,x0="x-goog-upload-status";async function Jw(n,e,t){var s,r,i;let c=0,d=0,f=new $0(new Response),h="upload";for(c=n.size;d<c;){const b=Math.min(Ww,c-d),v=n.slice(d,d+b);d+b>=c&&(h+=", finalize");let T=0,C=Xw;for(;T<Kw&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(b)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[x0]));)T++,await eI(C),C=C*Zw;if(d+=b,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[x0])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await(f==null?void 0:f.json());if(((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[x0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function Qw(n){return{size:n.size,type:n.type}}function eI(n){return new Promise(e=>setTimeout(e,n))}class tI{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Jw(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Qw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nI{create(e,t,s){return new sI(e,t,s)}}class sI{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kE="x-goog-api-key";class aI{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(kE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(kE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rI="gl-node/";class iI{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=iN(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new aI(this.apiKey);this.apiClient=new TL({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:rI+"web",uploader:new tI,downloader:new $w}),this.models=new BL(this.apiClient),this.live=new OL(this.apiClient,r,new nI),this.chats=new Ov(this.models,this.apiClient),this.caches=new Iv(this.apiClient),this.files=new zv(this.apiClient),this.operations=new KL(this.apiClient),this.authTokens=new Aw(this.apiClient),this.tunings=new zw(this.apiClient)}}let jE;let Jc=null;if(jE)try{Jc=new iI({apiKey:jE})}catch(n){console.error("Failed to initialize GoogleGenAI:",n),Jc=null}else console.warn("Gemini API Key is not available. Gemini AI features will be unavailable. This could be due to process.env.API_KEY not being set or inaccessible in the current execution environment.");const oI=()=>!!Jc,lI=async(n,e=_2,t)=>{if(!Jc)throw new Error("Gemini AI service is not initialized. API Key might be missing or inaccessible.");const s=t.model,r=`Based on a current account balance of ${n} BDT, provide one concise and practical financial tip in simple ${e}. The tip should be encouraging and easy to understand. If the balance is low, suggest a small saving habit. If the balance is good, suggest a wise investment or saving goal. Respond in ${e} only. Keep it under 150 characters.`;console.log("[GeminiService Debug] getFinancialTip - Prompt:",r,"Language:",e);const i={};t.temperature!==void 0&&(i.temperature=t.temperature),t.topK!==void 0&&(i.topK=t.topK),t.topP!==void 0&&(i.topP=t.topP);try{const d=(await Jc.models.generateContent({model:s,contents:r,...Object.keys(i).length>0&&{config:i}})).text;if(console.log("[GeminiService Debug] getFinancialTip - Raw Gemini Response Text:",d),!d)throw new Error("No text content in Gemini response.");return d.trim()}catch(c){throw console.error("Error fetching financial tip from Gemini:",c),c instanceof Error?c.message.toLowerCase().includes("api key")?new Error(`Gemini API error: ${c.message}`):new Error(`Gemini API error during tip generation: ${c.message}`):new Error("An unknown error occurred while fetching financial tip.")}},cI=async(n,e,t,s="bn-BD",r="app")=>{if(!Jc)throw new Error("Gemini AI service is not initialized for command processing.");const i=t.model,c=_b(s);console.log("[GeminiService Debug] processUserCommandViaAI - Target Language:",c,"Code:",s,"Scope:",r);let d=`
    You are an AI assistant for the ' - ' (Daily Spending & Earning Tracker) application.
    Your primary role is to assist users with managing their finances within this app.
    You can help create income/expense transactions, sales invoices, answer questions about their financial data (like transaction counts, sums for specific periods for income, expenses, payables, receivables), and explain app features.
    If the user asks for something outside the scope of this application, politely state that you can only assist with matters related to this application or that you are unable to answer that specific query.
  `,f='Possible intents are: "perform_action", "query_app_data", "explain_feature", "out_of_scope".',h=`
    If intent is "perform_action":
      - actionType: "create_sales_invoice", "add_income", "add_expense".
      - entities:
        - For "create_sales_invoice": customerName (string), items (array of {productName, quantity, unitPrice, unit}), notes (string, optional).
        - For "add_income" or "add_expense": description (string), amount (number), date (string, optional, e.g., "", "", "today", "yesterday").
      - responseText: A short confirmation that the action is being initiated.

    If intent is "query_app_data":
      - actionDetails:
        - dataType: "transactions" | "balance" | "debts" 
        - queryType: "count" | "sum_amount" | "get_balance"
        - filters: (object, optional)
          - type: "income" | "expense" (for transactions), or "payable" | "receivable" (for debts)
          - period: "today" | "current_week" | "current_month" | "all_time" (default if not specified for sums/counts)
          - status: "active" | "deleted" | "all" (for transaction counts), or "settled" | "unsettled" | "all" (for debt counts/sums)
      - responseText: A generic acknowledgment that the data is being fetched. Example: " ..." or "Fetching data...". The application will provide the actual data.
        If the query is ambiguous (e.g., "how much debit"), try to infer the most likely dataType and filter. For "debit" or "", prefer dataType "debts" with filter type "payable". For "credit" or "", prefer dataType "debts" with filter type "receivable". For "expense" or "", prefer dataType "transactions" with filter type "expense". For "income" or "", prefer dataType "transactions" with filter type "income".

    If intent is "explain_feature":
      - responseText: Briefly explain the requested app feature in simple terms. If asked "what can you do?", list some key capabilities.
      
    If intent is "out_of_scope":
      - responseText: Politely state that you cannot assist with requests outside this application or that you are unable to answer that specific query. Example: " ,       " or "I am unable to answer that query."
  `;r==="global"&&(d=`
      You are a helpful AI assistant. You can answer general knowledge questions.
      Additionally, you can assist with the ' - ' (Daily Spending & Earning Tracker) application for tasks like creating transactions, invoices, or querying financial data.
      If the user's query is clearly app-related, prioritize app-specific actions. Otherwise, provide a general answer.
    `,f=`Possible intents are: "perform_action", "query_app_data", "explain_feature", "general_query", "out_of_scope".
      - For app-related queries, try to match "perform_action", "query_app_data", or "explain_feature" first.
      - Use "general_query" if the user asks a general knowledge question not related to the app.
      - Use "out_of_scope" only if an app-related query cannot be understood or a general query is truly unanswerable.
    `,h+=`
    
    If intent is "general_query":
      - responseText: Provide a direct answer to the user's general knowledge question. The application will display this text.
    `);const _=`
    ${d}

    User's voice/text command: "${n.replace(/"/g,'\\"')}"

    Current application context (use this for general queries if specific data query is not matched for app-related tasks):
    - Balance: ${e.balance} BDT
    - Total Income (all time): ${e.totalIncome} BDT
    - Total Expense (all time): ${e.totalExpense} BDT
    - Total Receivable (all time, unsettled): ${e.totalReceivable} BDT
    - Total Payable (all time, unsettled): ${e.totalPayable} BDT
    - Active Transactions (current count): ${e.activeTransactionsCount}
    - Managed Persons (current count): ${e.personsCount}
    - Available Features: ${e.featureList.join(", ")}

    Based on the user's command and the app context, determine the intent and extract relevant information.
    ${f}

    ${h}

    IMPORTANT LANGUAGE INSTRUCTION: You MUST provide your entire response, especially the "responseText" field, strictly in the ${c} language. Do not use any other language in the "responseText" field.
    For example, if the target language is English and you are acknowledging a data query, a good responseText would be "Fetching that information for you...".

    Return the information in the following JSON format:
    {
      "intent": "string",
      "actionDetails": { 
        "actionType": "string | null", 
        "entities": {}, 
        "dataType": "string | null", 
        "queryType": "string | null", 
        "filters": {} 
      } | null,
      "responseText": "string", 
      "originalQuery": "${n.replace(/"/g,'\\"')}"
    }
    Ensure quantities and unit prices are numbers for app actions.
    Respond ONLY with the JSON object. Do not add any explanatory text before or after the JSON.
    For date parsing in "add_income"/"add_expense", if user says "" or "", map to "today". If "", map to "yesterday". If no date mentioned, it's optional.
  `,b={responseMimeType:"application/json"};t.temperature!==void 0&&(b.temperature=t.temperature),t.topK!==void 0&&(b.topK=t.topK),t.topP!==void 0&&(b.topP=t.topP);try{console.log("[GeminiService Debug] processUserCommandViaAI - Sending prompt to Gemini for command processing. Language:",c,"Prompt snippet:",_.substring(0,300)+"...");const T=(await Jc.models.generateContent({model:i,contents:_,config:b})).text;if(console.log("[GeminiService Debug] processUserCommandViaAI - Raw Gemini JSON Response:",T),!T)return console.warn("[GeminiService Debug] No text content (JSON) in Gemini response for command processing."),{intent:"out_of_scope",responseText:c==="Bengali"?",      AI    ":"Sorry, I couldn't understand your request. No response from AI.",originalQuery:n,error:"No text content from AI.",rawResponse:"EMPTY_RESPONSE_FROM_AI"};let C=T.trim();const L=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,R=C.match(L);R&&R[2]&&(C=R[2].trim());try{const I=JSON.parse(C);return console.log("[GeminiService Debug] processUserCommandViaAI - Parsed data from Gemini:",I),{...I,rawResponse:T}}catch(I){return console.error("[GeminiService Debug] Failed to parse JSON from Gemini for command processing:",C,I),{intent:"out_of_scope",responseText:c==="Bengali"?", AI     ":"Sorry, an unexpected response was received from the AI.",originalQuery:n,error:"Invalid JSON from AI.",rawResponse:T}}}catch(v){throw console.error("[GeminiService Debug] Error processing command via Gemini:",v),v instanceof Error?new Error(`Gemini API error during command processing: ${v.message}`):new Error("An unknown error occurred during command processing via Gemini.")}};let ii=null,Ml=[];const uI=()=>{if(typeof window<"u"&&"speechSynthesis"in window){ii=window.speechSynthesis;const n=()=>{Ml=(ii==null?void 0:ii.getVoices())||[]};n(),(ii==null?void 0:ii.onvoiceschanged)!==void 0&&(ii.onvoiceschanged=n)}else console.warn(p.SPEECH_SYNTHESIS_NOT_SUPPORTED)};uI();const np=(n,e="bn-BD")=>(console.log("[SpeechService Debug] speakText - Attempting to speak. Text:",`"${n.substring(0,70)}..."`,"Requested Lang:",e),new Promise((t,s)=>{if(!ii){console.error("[SpeechService Debug] Speech synthesis not initialized."),s(new Error(p.SPEECH_SYNTHESIS_NOT_INITIALIZED));return}ii.speaking&&(ii.cancel(),console.log("[SpeechService Debug] Cancelled ongoing speech."));const r=new SpeechSynthesisUtterance(n);r.lang=e;let i;if(Ml.length>0){const c=Ml.filter(d=>d.lang===e);if(c.length>0&&(i=c.find(d=>d.default)||c[0]),!i&&e.includes("-")){const d=e.split("-")[0],f=Ml.filter(h=>h.lang.startsWith(d));f.length>0&&(i=f.find(h=>h.default)||f[0])}if(!i&&e.startsWith("bn")){const d=Ml.filter(f=>f.lang.startsWith("en-"));d.length>0&&(i=d.find(f=>f.lang==="en-US"&&f.default)||d.find(f=>f.default)||d[0])}if(!i&&e==="en-US"){const d=Ml.filter(f=>f.lang==="en-US");d.length>0&&(i=d.find(f=>f.default)||d[0])}if(!i){const d=Ml.find(f=>f.default);d&&(i=d)}!i&&Ml.length>0&&(i=Ml[0]),i&&(r.voice=i,r.lang=i.lang)}console.log("[SpeechService Debug] speakText - Final voice choice:",r.voice?`${r.voice.name} (${r.voice.lang})`:"Browser Default","Utterance lang:",r.lang),r.pitch=1,r.rate=r.lang&&r.lang.startsWith("bn")?.9:1,r.volume=1,r.onend=()=>{console.log("[SpeechService Debug] Speech synthesis ended successfully."),t()},r.onerror=c=>{var d;console.error("[SpeechService Debug] Speech synthesis error:",c.error,`Utterance: ${c.utterance.text.substring(0,50)}... Lang: ${c.utterance.lang}, Voice: ${(d=c.utterance.voice)==null?void 0:d.name}`),s(c)};try{ii.speak(r)}catch(c){console.error("[SpeechService Debug] Error calling synthesis.speak:",c),s(c)}})),dI=()=>!!ii,u_=()=>{ii&&ii.speaking&&ii.cancel()},d_=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.354a15.055 15.055 0 0 1-3 0M12 3v2.25m0 0a6.01 6.01 0 0 0 1.5.189m-1.5-.189a6.01 6.01 0 0 1-1.5.189M15.75 5.25A6.01 6.01 0 0 0 12 4.5a6.01 6.01 0 0 0-3.75.75M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"})}),fI=({balance:n,geminiSettings:e})=>{const[t,s]=D.useState(null),[r,i]=D.useState(!1),[c,d]=D.useState(null),f=oI(),h=dI(),_=async()=>{if(console.log("[AITipCard Debug] Fetch Tip button clicked."),!f){const b=p.API_KEY_NOT_CONFIGURED;d(b),console.error("[AITipCard Debug] Gemini not ready:",b);return}u_(),i(!0),d(null),s(null),console.log("[AITipCard Debug] Fetching financial tip. Balance:",n,"Settings:",e);try{const b=await lI(n,_2,e);if(console.log("[AITipCard Debug] Fetched financial tip text:",b),s(b),h&&b){console.log('[AITipCard Debug] Attempting to speak financial tip in English: "'+b.substring(0,50)+'..."');try{await np(b,"en-US"),console.log("[AITipCard Debug] Financial tip speech synthesis initiated successfully.")}catch(v){console.warn("[AITipCard Debug] AI Tip speech synthesis error:",v.message||v)}}else h||console.warn("[AITipCard Debug] Speech synthesis not available, so tip will not be spoken.")}catch(b){const v=b.message||p.ADVICE_ERROR;d(v),console.error("[AITipCard Debug] Error fetching or processing financial tip:",v,b)}finally{i(!1),console.log("[AITipCard Debug] Fetch tip process finished. isLoading:",!1)}};return l.jsxs("section",{"aria-labelledby":"ai-advice-heading",className:"my-8 p-6 bg-white rounded-xl shadow-lg",children:[l.jsxs("h2",{id:"ai-advice-heading",className:"text-2xl font-semibold text-slate-700 mb-4 text-center flex items-center justify-center",children:[l.jsx(d_,{className:"w-7 h-7 mr-2 text-yellow-500"}),p.FINANCIAL_ADVICE_SECTION_TITLE]}),!f&&l.jsx("p",{className:"text-center text-orange-600 bg-orange-50 p-3 rounded-md",children:p.API_KEY_NOT_CONFIGURED}),f&&l.jsx("div",{className:"text-center",children:l.jsx("button",{onClick:_,disabled:r,className:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:r?p.LOADING:p.GET_ADVICE_BTN})}),r&&l.jsxs("div",{className:"mt-4 text-center text-slate-500",children:[l.jsx("div",{role:"status",className:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-yellow-500 border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",children:l.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})}),l.jsx("p",{className:"mt-2",children:p.LOADING})]}),c&&l.jsx("p",{className:"mt-4 text-center text-red-600 bg-red-50 p-3 rounded-md",children:c}),t&&!r&&l.jsxs("div",{className:"mt-6 p-4 bg-sky-50 border border-sky-200 rounded-lg shadow",children:[l.jsx("h3",{className:"text-lg font-medium text-sky-700 mb-2",children:p.ADVICE_FROM_GEMINI}),l.jsx("p",{className:"text-slate-600 leading-relaxed",children:t})]})]})},hI=({isOpen:n,onClose:e,transaction:t,onSave:s,allSuggestions:r,onOpenManageSuggestions:i,isGlobalPhoneticModeActive:c,bankAccounts:d})=>{const[f,h]=D.useState(""),[_,b]=D.useState(""),[v,T]=D.useState(fs.EXPENSE),[C,L]=D.useState(""),[R,I]=D.useState(void 0),[j,O]=D.useState(r),[U,se]=D.useState(!1),Z=D.useRef(null),ee=D.useRef(null),{addNotification:J}=ur(),oe=D.useRef(!1);D.useEffect(()=>{t&&(oe.current=!0,h(t.description),b(t.amount.toString()),T(t.type),L(new Date(t.date).toISOString().slice(0,16)),I(t.bankAccountId||void 0),O(r.filter(G=>G.toLowerCase().includes(t.description.toLowerCase()))))},[t,r,n]);const xe=G=>{const he=G.target.value;if(oe.current?(h(he),oe.current=!1):h(he),he.trim()){const ue=r.filter(ae=>ae.toLowerCase().includes(he.toLowerCase()));O(ue),se(!0)}else O(r),se(!0)},F=G=>{if(!oe.current&&c&&G.key===" "){G.preventDefault();const he=G.target,ue=he.value,ae=he.selectionStart||0;let V=ae-1;for(;V>=0&&ue[V]!==" ";)V--;V++;const ce=ue.substring(V,ae);if(ce.trim()){const M=cr(ce),k=ue.substring(0,V)+M+" "+ue.substring(ae);h(k),setTimeout(()=>{const Y=V+M.length+1;he.setSelectionRange(Y,Y)},0)}else{const M=ue.substring(0,ae)+" "+ue.substring(ae);h(M),setTimeout(()=>{he.setSelectionRange(ae+1,ae+1)},0)}se(!1)}},H=G=>{if(oe.current){oe.current=!1;return}if(c){G.preventDefault();const he=G.clipboardData.getData("text"),ue=cr(he),ae=G.target,V=ae.selectionStart||0,ce=ae.selectionEnd||0,M=ae.value,k=M.substring(0,V)+ue+M.substring(ce);h(k),setTimeout(()=>{const Y=V+ue.length;ae.setSelectionRange(Y,Y)},0),se(!1)}},re=()=>{var he;const G=((he=Z.current)==null?void 0:he.value)||f;if(G.trim()==="")O(r);else{const ue=r.filter(ae=>ae.toLowerCase().includes(G.toLowerCase()));O(ue)}se(!0)},K=G=>{var he;oe.current=!0,h(G),se(!1),(he=Z.current)==null||he.focus()};if(D.useEffect(()=>{const G=he=>{Z.current&&!Z.current.contains(he.target)&&ee.current&&!ee.current.contains(he.target)&&se(!1)};return n&&document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[n]),!n||!t)return null;const Te=G=>{G.preventDefault();const he=parseFloat(_);if(!f.trim()||isNaN(he)||he<=0||!C){J(p.FORM_VALIDATION_ERROR,"error");return}const ue=d.find(V=>V.id===R),ae={...t,description:f.trim(),amount:he,type:v,date:new Date(C).toISOString(),lastModified:new Date().toISOString(),originalDate:t.originalDate||t.date,bankAccountId:R||void 0,bankAccountName:(ue==null?void 0:ue.accountName)||void 0};s(ae),se(!1)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"edit-transaction-modal-title",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[l.jsx("h2",{id:"edit-transaction-modal-title",className:"text-2xl font-semibold text-slate-700 mb-6",children:p.EDIT_TRANSACTION}),l.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex justify-between items-end mb-1",children:[l.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-slate-600",children:p.DESCRIPTION}),l.jsxs("button",{type:"button",onClick:i,className:"text-xs text-teal-600 hover:text-teal-800 hover:underline flex items-center space-x-1",title:p.MANAGE_SUGGESTIONS_BTN_TEXT,children:[l.jsx(O2,{className:"w-3 h-3"}),l.jsx("span",{children:p.MANAGE_SUGGESTIONS_BTN_TEXT})]})]}),l.jsx("input",{ref:Z,type:"text",id:"edit-description",value:f,onChange:xe,onKeyDown:F,onPaste:H,onFocus:re,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"edit-description-suggestions","aria-expanded":U}),U&&l.jsx("ul",{ref:ee,id:"edit-description-suggestions",className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox",children:j.length>0?j.map((G,he)=>l.jsx("li",{onClick:()=>K(G),onMouseDown:ue=>ue.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm",role:"option","aria-selected":f===G,children:G},he)):f.trim()&&l.jsx("li",{className:"px-4 py-2 text-center text-xs text-slate-500",children:p.TRANSACTION_DESCRIPTION_NO_SUGGESTIONS})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"edit-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,")"]}),l.jsx("input",{type:"number",id:"edit-amount",value:_,onChange:G=>b(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-slate-600 mb-1",children:p.DATE}),l.jsx("input",{type:"datetime-local",id:"edit-date",value:C,onChange:G=>L(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-bank-account",className:"block text-sm font-medium text-slate-600 mb-1",children:p.SELECT_BANK_ACCOUNT_TRANSACTION_LABEL}),l.jsxs("select",{id:"edit-bank-account",value:R||"",onChange:G=>I(G.target.value||void 0),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",children:[l.jsx("option",{value:"",children:p.SELECT_BANK_ACCOUNT_PLACEHOLDER}),d.filter(G=>!G.isDeleted).map(G=>l.jsxs("option",{value:G.id,children:[G.accountName," ",G.bankName&&`(${G.bankName})`]},G.id))]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"block text-sm font-medium text-slate-600 mb-2",children:p.TRANSACTION_TYPE}),l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"edit-type",value:fs.INCOME,checked:v===fs.INCOME,onChange:()=>T(fs.INCOME),className:"form-radio h-5 w-5 text-green-600 focus:ring-green-500"}),l.jsx("span",{className:"text-green-700",children:p.INCOME})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"edit-type",value:fs.EXPENSE,checked:v===fs.EXPENSE,onChange:()=>T(fs.EXPENSE),className:"form-radio h-5 w-5 text-red-600 focus:ring-red-500"}),l.jsx("span",{className:"text-red-700",children:p.EXPENSE})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.SAVE_CHANGES})]})]})]})})},mI=({onAddDebt:n,showTitle:e=!0,persons:t,onOpenSelectPersonModal:s,getCompositePersonBalance:r})=>{const[i,c]=D.useState(""),[d,f]=D.useState(null),[h,_]=D.useState(""),[b,v]=D.useState(""),[T,C]=D.useState(ps.CREATE_RECEIVABLE),[L,R]=D.useState(""),[I,j]=D.useState(""),[O,U]=D.useState([]),[se,Z]=D.useState(!1),ee=D.useRef(null),J=D.useRef(null),[oe,xe]=D.useState(null),[F,H]=D.useState(0),re=D.useRef(null),{addNotification:K}=ur();D.useEffect(()=>{let ce=0,M=null;d&&r&&(ce=r(d),ce>0?M={text:p.PERSON_OWES_YOU_NET_DEBT_LABEL,amount:ce,colorClass:"text-green-600 font-medium"}:ce<0?M={text:p.YOU_OWE_PERSON_NET_DEBT_LABEL,amount:Math.abs(ce),colorClass:"text-red-600 font-medium"}:M={text:p.NET_DEBT_BALANCE_ZERO_LABEL,amount:0,colorClass:"text-slate-600"}),H(ce),xe(M),d!==re.current&&(d?ce>0?C(ps.RECORD_PERSON_PAYMENT):ce<0?C(ps.RECORD_USER_PAYMENT_TO_PERSON):C(ps.CREATE_RECEIVABLE):C(ps.CREATE_RECEIVABLE)),re.current=d},[d,r]),D.useEffect(()=>{const ce=!d||F<=0,M=!d||F>=0;T===ps.RECORD_PERSON_PAYMENT&&ce&&C(ps.CREATE_RECEIVABLE),T===ps.RECORD_USER_PAYMENT_TO_PERSON&&M&&C(ps.CREATE_PAYABLE)},[T,d,F]),D.useEffect(()=>{T===ps.RECORD_PERSON_PAYMENT||T===ps.RECORD_USER_PAYMENT_TO_PERSON?(R(""),I||j(new Date().toISOString().slice(0,16))):j("")},[T,I]);const Te=ce=>{const M=t.find(k=>k.id===ce);M?(c(M.customAlias||M.name),f(M.id)):(c(""),f(null)),Z(!1)},G=ce=>{const M=ce.target.value;if(c(M),f(null),xe(null),M.trim()){const k=M.toLowerCase(),Y=t.filter(Q=>!Q.isDeleted&&(Q.customAlias&&Q.customAlias.toLowerCase().includes(k)||Q.name.toLowerCase().includes(k)||Q.mobileNumber&&Q.mobileNumber.includes(M))).slice(0,5);U(Y),Z(!0)}else U([]),Z(!1)},he=ce=>{c(ce.customAlias||ce.name),f(ce.id),U([]),Z(!1)};D.useEffect(()=>{const ce=M=>{ee.current&&!ee.current.contains(M.target)&&J.current&&!J.current.contains(M.target)&&Z(!1)};return document.addEventListener("mousedown",ce),()=>{document.removeEventListener("mousedown",ce)}},[]);const ue=ce=>{ce.preventDefault();const M=parseFloat(h);if(!i.trim()){K(p.PERSON_NAME_REQUIRED,"error");return}if(!b.trim()||isNaN(M)||M<=0){K(p.FORM_VALIDATION_ERROR,"error");return}const k={personNameValue:i.trim(),explicitSelectedPersonId:d,amount:M,description:b,formPurpose:T};if(T===ps.CREATE_PAYABLE)k.debtType=_a.PAYABLE,k.dueDate=L||void 0;else if(T===ps.CREATE_RECEIVABLE)k.debtType=_a.RECEIVABLE,k.dueDate=L||void 0;else if(T===ps.RECORD_PERSON_PAYMENT||T===ps.RECORD_USER_PAYMENT_TO_PERSON){if(!I){K(p.DEBT_FORM_ALERT_PAYMENT_DATE_REQUIRED,"error");return}k.paymentDate=new Date(I).toISOString()}n(k),c(""),f(null),_(""),v(""),R(""),j(""),Z(!1),xe(null)},ae=!d||F<=0,V=!d||F>=0;return l.jsxs("section",{"aria-labelledby":e?"add-debt-heading":void 0,className:`${e?"my-8 p-6 bg-white rounded-xl shadow-lg":""}`,children:[e&&l.jsx("h2",{id:"add-debt-heading",className:"text-2xl font-semibold text-slate-700 mb-6 text-center",children:p.ADD_NEW_DEBT}),l.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"debt-person-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.PERSON_NAME," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{ref:ee,type:"text",id:"debt-person-name",value:i,onChange:G,onFocus:()=>i.trim()&&Z(!0),placeholder:p.PERSON_NAME_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"person-suggestions"}),l.jsx("button",{type:"button",onClick:()=>{Z(!1),s(Te)},className:"p-2.5 bg-teal-500 hover:bg-teal-600 text-white rounded-lg shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:p.SELECT_PERSON_BTN_TITLE,"aria-label":p.SELECT_PERSON_BTN_TITLE,children:l.jsx(kl,{className:"w-5 h-5"})})]}),se&&l.jsx("div",{ref:J,id:"person-suggestions",className:"absolute z-10 w-full sm:w-[calc(100%-3.5rem)] bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox","aria-label":"  ",children:O.length>0?l.jsx("ul",{className:"list-none p-0",children:O.map(ce=>l.jsxs("li",{onClick:()=>he(ce),onMouseDown:M=>M.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm",role:"option","aria-selected":ce.id===d,children:[l.jsx("p",{className:"font-medium text-slate-700",children:ce.customAlias||ce.name}),ce.mobileNumber&&l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",ce.mobileNumber]}),ce.shopName&&l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",ce.shopName]})]},ce.id))}):i.trim()&&l.jsxs("div",{className:"p-3 text-center text-sm text-slate-500",children:[p.NO_SUGGESTIONS_FOUND," ",l.jsxs("span",{className:"italic",children:['"',i,'"']}),".",l.jsx("br",{}),' , "',l.jsx("span",{className:"font-semibold",children:i}),'"            ']})})]}),oe&&d&&l.jsxs("div",{className:`mt-2 px-3 py-1.5 text-xs rounded-md bg-slate-50 border border-slate-200 ${oe.colorClass}`,children:[oe.text," ",oe.amount!==0||oe.text===p.NET_DEBT_BALANCE_ZERO_LABEL?l.jsx(l.Fragment,{children:oe.text!==p.NET_DEBT_BALANCE_ZERO_LABEL&&l.jsxs("span",{className:"font-semibold",children:[p.BDT_SYMBOL," ",oe.amount.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]})}):null]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"debt-description",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DESCRIPTION," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"debt-description",value:b,onChange:ce=>v(ce.target.value),placeholder:p.DEBT_DESCRIPTION_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"debt-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",id:"debt-amount",value:h,onChange:ce=>_(ce.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),(T===ps.CREATE_PAYABLE||T===ps.CREATE_RECEIVABLE)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:p.DUE_DATE}),l.jsx("input",{type:"date",id:"dueDate",value:L,onChange:ce=>R(ce.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"})]}),(T===ps.RECORD_PERSON_PAYMENT||T===ps.RECORD_USER_PAYMENT_TO_PERSON)&&l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.PAYMENT_DATE," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"datetime-local",id:"paymentDate",value:I,onChange:ce=>j(ce.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("span",{className:"block text-sm font-medium text-slate-600 mb-2",children:p.ENTRY_NATURE_LABEL}),l.jsxs("div",{className:"space-y-2 sm:space-y-0 sm:flex sm:items-center sm:flex-wrap sm:gap-x-4 sm:gap-y-2",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-red-50 has-[:checked]:border-red-200 border border-transparent",children:[l.jsx("input",{type:"radio",name:"formPurpose",value:ps.CREATE_PAYABLE,checked:T===ps.CREATE_PAYABLE,onChange:()=>C(ps.CREATE_PAYABLE),className:"form-radio h-4 w-4 text-red-600 focus:ring-red-500 border-slate-400"}),l.jsx("span",{className:"text-sm text-red-700 font-medium",children:p.DEBT_PAYABLE_USER_OWES})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-green-50 has-[:checked]:border-green-200 border border-transparent",children:[l.jsx("input",{type:"radio",name:"formPurpose",value:ps.CREATE_RECEIVABLE,checked:T===ps.CREATE_RECEIVABLE,onChange:()=>C(ps.CREATE_RECEIVABLE),className:"form-radio h-4 w-4 text-green-600 focus:ring-green-500 border-slate-400"}),l.jsx("span",{className:"text-sm text-green-700 font-medium",children:p.DEBT_RECEIVABLE_USER_IS_OWED})]}),l.jsxs("label",{className:`flex items-center space-x-2 p-2 rounded-md border border-transparent ${ae?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-slate-50 has-[:checked]:bg-teal-50 has-[:checked]:border-teal-200"}`,children:[l.jsx("input",{type:"radio",name:"formPurpose",value:ps.RECORD_PERSON_PAYMENT,checked:T===ps.RECORD_PERSON_PAYMENT,onChange:()=>C(ps.RECORD_PERSON_PAYMENT),className:"form-radio h-4 w-4 text-teal-600 focus:ring-teal-500 border-slate-400",disabled:ae}),l.jsx("span",{className:`text-sm font-medium ${ae?"text-slate-500":"text-teal-700"}`,children:p.PERSON_PAYMENT_RECEIVED_LEDGER_CREDIT})]}),l.jsxs("label",{className:`flex items-center space-x-2 p-2 rounded-md border border-transparent ${V?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-slate-50 has-[:checked]:bg-orange-50 has-[:checked]:border-orange-200"}`,children:[l.jsx("input",{type:"radio",name:"formPurpose",value:ps.RECORD_USER_PAYMENT_TO_PERSON,checked:T===ps.RECORD_USER_PAYMENT_TO_PERSON,onChange:()=>C(ps.RECORD_USER_PAYMENT_TO_PERSON),className:"form-radio h-4 w-4 text-orange-600 focus:ring-orange-500 border-slate-400",disabled:V}),l.jsx("span",{className:`text-sm font-medium ${V?"text-slate-500":"text-orange-700"}`,children:p.PERSON_PAYMENT_MADE_BY_USER_LEDGER_DEBIT})]})]})]}),l.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:p.ADD_ENTRY_BTN})]})]})},Xu=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),pI=({mode:n,initialEmail:e,onClose:t,onSwitchMode:s})=>{const[r,i]=D.useState(n==="forgotPasswordReset"&&e?e:""),[c,d]=D.useState(""),[f,h]=D.useState(""),[_,b]=D.useState(""),[v,T]=D.useState(""),[C,L]=D.useState(""),[R,I]=D.useState(null),[j,O]=D.useState(null),[U,se]=D.useState(null),[Z,ee]=D.useState(null),{login:J,signup:oe,isAuthLoading:xe,authError:F,clearAuthError:H,requestPasswordReset:re,resetPasswordWithCode:K}=Nc(),{addNotification:Te}=ur(),G=D.useRef(null),he=D.useRef(null);D.useEffect(()=>{n==="forgotPasswordReset"&&e?(r!==e&&i(e),d("")):n!=="login"?(i(""),d("")):(e&&r!==e?i(e):e||i(""),d("")),n!=="signup"&&f!==""&&h(""),n!=="forgotPasswordReset"&&(_!==""&&b(""),v!==""&&T(""),C!==""&&L(""));const ae=n==="forgotPasswordReset"&&G.current==="forgotPasswordRequest",V=n==="login"&&F===p.AUTH_ERROR_INVALID_CREDENTIALS;!ae&&!V&&H(),I(null),O(null),se(null),ee(null),G.current=n},[n,e,H]);const ue=async ae=>{var M;ae.preventDefault(),I(null),O(null),se(null),ee(null);let V=!0,ce=!1;if(n==="login")c.length<6&&(O(p.PASSWORD_PLACEHOLDER),V=!1),V&&(ce=await J(r,c,!1));else if(n==="signup")f.trim()||(I(p.NAME+" "),V=!1),c.length<6&&(O(p.PASSWORD_PLACEHOLDER),V=!1),V&&(ce=await oe(f,r,c));else if(n==="forgotPasswordRequest"){const k=((M=he.current)==null?void 0:M.value)||r;if(!k){I(" ");return}const Y=await re(k);Y.success?(Te(p.RESET_CODE_SENT_SUCCESS,"success",7e3),s("forgotPasswordReset",k)):I(Y.message||p.RESET_CODE_SENT_FAIL)}else if(n==="forgotPasswordReset"){if(r||(I("        "),V=!1),_.trim()||(I(p.RESET_CODE_LABEL+" "),V=!1),v.length<6&&(se(p.NEW_PASSWORD_LABEL),V=!1),C.length<6&&(ee(p.CONFIRM_NEW_PASSWORD_LABEL),V=!1),v!==C&&(ee(p.PASSWORDS_DONT_MATCH),se(p.PASSWORDS_DONT_MATCH),V=!1),!V)return;try{await K(r,_,v),ce=!0,b(""),T(""),L(""),d("")}catch(k){!F&&k.message?I(k.message):F||I(p.AUTH_ERROR_GENERAL)}}(n==="login"||n==="signup"||n==="forgotPasswordReset")&&ce&&(n==="login"&&d(""),t())};return l.jsxs("div",{className:"bg-white rounded-lg w-full",children:[n==="forgotPasswordRequest"&&l.jsx("p",{className:"text-sm text-slate-600 mb-4 text-center",children:p.FORGOT_PASSWORD_INSTRUCTIONS}),l.jsxs("form",{onSubmit:ue,className:"space-y-5",children:[n==="signup"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:p.NAME}),l.jsx("input",{type:"text",id:"name",value:f,onChange:ae=>h(ae.target.value),placeholder:p.NAME_PLACEHOLDER,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0})]}),(n==="login"||n==="signup"||n==="forgotPasswordRequest")&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"emailOrMobile",className:"block text-sm font-medium text-slate-600 mb-1",children:n==="login"?p.EMAIL_OR_MOBILE:p.EMAIL}),l.jsx("input",{ref:he,type:n==="login"?"text":"email",id:"emailOrMobile",value:r,onChange:ae=>i(ae.target.value),placeholder:n==="login"?p.EMAIL_PLACEHOLDER:p.EMAIL_PLACEHOLDER.split("  ")[0],className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0})]}),n==="forgotPasswordReset"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email-display",className:"block text-sm font-medium text-slate-600 mb-1",children:p.EMAIL}),l.jsx("input",{type:"email",id:"email-display",value:r,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm bg-slate-100 cursor-not-allowed",readOnly:!0})]}),(n==="login"||n==="signup")&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-baseline",children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PASSWORD}),n==="login"&&l.jsx("button",{type:"button",onClick:()=>s("forgotPasswordRequest",r),className:"text-xs text-teal-600 hover:text-teal-700 hover:underline focus:outline-none",children:p.FORGOT_PASSWORD_LINK})]}),l.jsx("input",{type:"password",id:"password",value:c,onChange:ae=>{d(ae.target.value),O(null)},placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150 ${j?"border-red-500":"border-slate-300"}`,required:!0,minLength:6,"aria-describedby":"password-error"}),j&&l.jsx("p",{id:"password-error",className:"mt-1 text-xs text-red-600",children:j})]}),n==="forgotPasswordReset"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"resetCode",className:"block text-sm font-medium text-slate-600 mb-1",children:p.RESET_CODE_LABEL}),l.jsx("input",{type:"text",id:"resetCode",value:_,onChange:ae=>b(ae.target.value),placeholder:p.RESET_CODE_PLACEHOLDER,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.NEW_PASSWORD_LABEL}),l.jsx("input",{type:"password",id:"newPasswordModal",value:v,onChange:ae=>{T(ae.target.value),se(null),Z===p.PASSWORDS_DONT_MATCH&&ee(null)},placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150 ${U?"border-red-500":"border-slate-300"}`,required:!0,minLength:6,"aria-describedby":"new-password-error"}),U&&l.jsx("p",{id:"new-password-error",className:"mt-1 text-xs text-red-600",children:U})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmNewPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.CONFIRM_NEW_PASSWORD_LABEL}),l.jsx("input",{type:"password",id:"confirmNewPasswordModal",value:C,onChange:ae=>{L(ae.target.value),ee(null),U===p.PASSWORDS_DONT_MATCH&&se(null)},placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150 ${Z?"border-red-500":"border-slate-300"}`,required:!0,minLength:6,"aria-describedby":"confirm-password-error"}),Z&&l.jsx("p",{id:"confirm-password-error",className:"mt-1 text-xs text-red-600",children:Z})]})]}),l.jsx("button",{type:"submit",disabled:xe,className:`w-full font-semibold py-3 px-4 rounded-lg shadow-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2
              ${xe?"bg-slate-400 cursor-not-allowed":n==="forgotPasswordRequest"||n==="forgotPasswordReset"?"bg-orange-500 hover:bg-orange-600 focus:ring-orange-500 text-white":"bg-teal-600 hover:bg-teal-700 focus:ring-teal-500 text-white"}
            `,children:xe?p.LOADING:n==="login"?p.LOGIN:n==="signup"?p.SIGNUP:n==="forgotPasswordRequest"?p.SEND_RESET_CODE_BTN:p.RESET_PASSWORD_BTN}),F&&l.jsxs("div",{className:"mt-4 p-3 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-md text-sm flex items-start space-x-2",role:"alert",children:[l.jsx(Xu,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:F})]}),R&&!F&&l.jsxs("div",{className:`mt-4 p-3 rounded-md text-sm flex items-start space-x-2 ${R===p.RESET_CODE_SENT_SUCCESS?"bg-green-100 border-l-4 border-green-500 text-green-700":"bg-red-100 border-l-4 border-red-500 text-red-700"}`,role:"status",children:[l.jsx(Xu,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-red-600"}),l.jsx("span",{children:R})]})]}),l.jsxs("div",{className:"mt-6 text-center text-sm",children:[n==="login"&&!(F!=null&&F.includes(p.MOCKED_AUTH_WARNING_TITLE))&&l.jsxs("span",{className:"text-slate-600",children:[p.DONT_HAVE_ACCOUNT," ",l.jsx("button",{onClick:()=>s("signup"),className:"font-semibold text-teal-600 hover:text-teal-700 hover:underline",children:p.SIGNUP})]}),n==="signup"&&l.jsxs("span",{className:"text-slate-600",children:[p.ALREADY_HAVE_ACCOUNT," ",l.jsx("button",{onClick:()=>s("login"),className:"font-semibold text-teal-600 hover:text-teal-700 hover:underline",children:p.LOGIN})]}),(n==="forgotPasswordRequest"||n==="forgotPasswordReset")&&l.jsx("button",{onClick:()=>{s("login")},className:"text-teal-600 hover:text-teal-700 hover:underline",children:p.BACK_TO_LOGIN_LINK})]})]})},gI=({isOpen:n,onClose:e,debt:t,onSave:s,persons:r,onOpenSelectPersonModal:i})=>{const[c,d]=D.useState(""),[f,h]=D.useState(null),[_,b]=D.useState(""),[v,T]=D.useState(""),[C,L]=D.useState(_a.PAYABLE),[R,I]=D.useState(""),[j,O]=D.useState([]),[U,se]=D.useState(!1),Z=D.useRef(null),ee=D.useRef(null),{addNotification:J}=ur();if(D.useEffect(()=>{if(t){const re=r.find(K=>K.id===t.personId&&!K.isDeleted);d(re?re.name:p.UNKNOWN_PERSON),h(t.personId),b(t.originalAmount.toString()),T(t.description),L(t.type),I(t.dueDate?new Date(t.dueDate).toISOString().split("T")[0]:""),se(!1)}else d(""),h(null),b(""),T(""),L(_a.PAYABLE),I(""),se(!1)},[t,r]),!n||!t)return null;const oe=re=>{const K=r.find(Te=>Te.id===re&&!Te.isDeleted);if(K)d(K.name),h(K.id);else{const Te=r.find(G=>G.id===t.personId&&!G.isDeleted);d(Te?Te.name:p.UNKNOWN_PERSON),h(t.personId),J("        ","warning")}se(!1)},xe=re=>{const K=re.target.value;if(d(K),h(null),K.trim()){const Te=K.toLowerCase(),G=r.filter(he=>!he.isDeleted&&(he.name.toLowerCase().includes(Te)||he.mobileNumber&&he.mobileNumber.includes(K))).slice(0,5);O(G),se(!0)}else O([]),se(!1)},F=re=>{d(re.name),h(re.id),O([]),se(!1)};D.useEffect(()=>{const re=K=>{Z.current&&!Z.current.contains(K.target)&&ee.current&&!ee.current.contains(K.target)&&se(!1)};return document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[]);const H=re=>{re.preventDefault();const K=parseFloat(_);if(!c.trim()){J(p.PERSON_NAME_REQUIRED,"error");return}if(!f&&r.find(G=>G.name.toLowerCase()===c.trim().toLowerCase()&&!G.isDeleted),!v.trim()||isNaN(K)||K<=0){J(p.FORM_VALIDATION_ERROR,"error");return}const Te=C===_a.PAYABLE?ps.CREATE_PAYABLE:ps.CREATE_RECEIVABLE;s({personNameValue:c.trim(),explicitSelectedPersonId:f,amount:K,description:v,formPurpose:Te,debtType:C,dueDate:R||void 0},t.id),se(!1)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"edit-debt-modal-title",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[l.jsx("h2",{id:"edit-debt-modal-title",className:"text-2xl font-semibold text-slate-700 mb-6",children:p.EDIT_DEBT_MODAL_TITLE}),l.jsxs("form",{onSubmit:H,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("label",{htmlFor:"edit-debt-person-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.PERSON_NAME," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{ref:Z,type:"text",id:"edit-debt-person-name",value:c,onChange:xe,onFocus:()=>c.trim()&&se(!0),placeholder:p.PERSON_NAME_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"edit-person-suggestions"}),l.jsx("button",{type:"button",onClick:()=>{se(!1),i(oe)},className:"p-2.5 bg-teal-500 hover:bg-teal-600 text-white rounded-lg shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:p.SELECT_PERSON_BTN_TITLE,"aria-label":p.SELECT_PERSON_BTN_TITLE,children:l.jsx(kl,{className:"w-5 h-5"})})]}),U&&l.jsx("div",{ref:ee,id:"edit-person-suggestions",className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox",children:j.length>0?l.jsx("ul",{className:"list-none p-0",children:j.map(re=>l.jsxs("li",{onClick:()=>F(re),onMouseDown:K=>K.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm",role:"option","aria-selected":re.id===f,children:[l.jsx("p",{className:"font-medium text-slate-700",children:re.name}),re.mobileNumber&&l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",re.mobileNumber]}),re.shopName&&l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",re.shopName]})]},re.id))}):c.trim()&&l.jsxs("div",{className:"p-3 text-center text-sm text-slate-500",children:[p.NO_SUGGESTIONS_FOUND," ",l.jsxs("span",{className:"italic",children:['"',c,'"']}),".",l.jsx("br",{}),' , "',l.jsx("span",{className:"font-semibold",children:c}),'"            ']})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"edit-debt-description",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DESCRIPTION," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"edit-debt-description",value:v,onChange:re=>T(re.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"edit-debt-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",l.jsx("span",{className:"text-sm text-slate-500",children:"( )"})," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",id:"edit-debt-amount",value:_,onChange:re=>b(re.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"}),t&&t.remainingAmount<parseFloat(_)&&!t.isSettled&&l.jsxs("p",{className:"mt-1 text-xs text-sky-600",children:[" : ",p.BDT_SYMBOL," ",t.remainingAmount.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),".          "]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-debt-dueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:p.DUE_DATE}),l.jsx("input",{type:"date",id:"edit-debt-dueDate",value:R,onChange:re=>I(re.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"block text-sm font-medium text-slate-600 mb-2",children:p.DEBT_TYPE}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-red-50 has-[:checked]:border-red-200 border border-transparent",children:[l.jsx("input",{type:"radio",name:"edit-debtType",value:_a.PAYABLE,checked:C===_a.PAYABLE,onChange:()=>L(_a.PAYABLE),className:"form-radio h-4 w-4 text-red-600 focus:ring-red-500"}),l.jsx("span",{className:"text-sm text-red-700",children:p.DEBT_PAYABLE_USER_OWES})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-green-50 has-[:checked]:border-green-200 border border-transparent",children:[l.jsx("input",{type:"radio",name:"edit-debtType",value:_a.RECEIVABLE,checked:C===_a.RECEIVABLE,onChange:()=>L(_a.RECEIVABLE),className:"form-radio h-4 w-4 text-green-600 focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-green-700",children:p.DEBT_RECEIVABLE_USER_IS_OWED})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.SAVE_CHANGES})]})]})]})})},xI=({isOpen:n,onClose:e,transaction:t})=>{if(!n||!t)return null;const s=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return f}},r=f=>({description:p.FIELD_NAME_DESCRIPTION,amount:p.FIELD_NAME_AMOUNT,type:p.FIELD_NAME_TYPE,date:p.FIELD_NAME_DATE,originalDate:" ",linkedLedgerEntryId:"  ",isDeleted:p.FIELD_NAME_IS_DELETED,deletedAt:p.FIELD_NAME_DELETED_AT})[f]||f,i=(f,h)=>{if(h==null)return"";switch(f){case"type":return h===fs.INCOME?p.INCOME:p.EXPENSE;case"date":case"originalDate":case"deletedAt":return s(String(h));case"isDeleted":return h?p.FIELD_VALUE_TRUE:p.FIELD_VALUE_FALSE;case"amount":return`${p.BDT_SYMBOL} ${Number(h).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`;default:return String(h)}},c=(f,h)=>{const _=[],b=f.snapshot;if(f.action==="created"||!h&&f.action!=="updated"&&f.action!=="restored")Object.keys(b).forEach(v=>{b[v]!==void 0&&_.push(l.jsxs("li",{className:"text-sm",children:[l.jsxs("strong",{children:[r(v),":"]})," ",i(v,b[v])]},v))});else if((f.action==="updated"||f.action==="restored")&&h){let v=!1;if(Object.keys(b).forEach(T=>{const C=h[T],L=b[T];let R=!1;T==="isDeleted"?R=!!L!=!!C:R=String(L)!==String(C),R&&(f.action==="restored"?(T==="isDeleted"||T==="deletedAt"||String(L)!==String(C))&&(v=!0,_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(T)).replace("{oldValue}",i(T,C)).replace("{newValue}",i(T,L))},T))):(v=!0,_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(T)).replace("{oldValue}",i(T,C)).replace("{newValue}",i(T,L))},T))))}),!v){if(f.action==="updated")_.push(l.jsx("li",{className:"text-sm italic",children:"     "},"no-changes"));else if(f.action==="restored"){const T=!!b.isDeleted!=!!h.isDeleted,C=String(b.deletedAt)!==String(h.deletedAt);T&&_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("isDeleted")).replace("{oldValue}",i("isDeleted",h.isDeleted)).replace("{newValue}",i("isDeleted",b.isDeleted))},"isDeleted-restore-specific")),C&&_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("deletedAt")).replace("{oldValue}",i("deletedAt",h.deletedAt)).replace("{newValue}",i("deletedAt",b.deletedAt))},"deletedAt-restore-specific")),!T&&!C&&_.push(l.jsx("li",{className:"text-sm italic",children:"       "},"no-substantive-restore-changes"))}}}else f.action==="deleted"&&Object.keys(b).forEach(v=>{(v==="isDeleted"||v==="deletedAt"||b[v]!==void 0&&b[v]!==null)&&_.push(l.jsxs("li",{className:"text-sm",children:[l.jsxs("strong",{children:[r(v),":"]})," ",i(v,b[v])]},v))});return _.length===0?l.jsx("li",{className:"text-sm italic",children:"    "}):l.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:_})},d=f=>{switch(f){case"created":return{text:p.ACTION_CREATED,color:"bg-green-100 text-green-700"};case"updated":return{text:p.ACTION_UPDATED,color:"bg-blue-100 text-blue-700"};case"deleted":return{text:p.ACTION_DELETED,color:"bg-red-100 text-red-700"};case"restored":return{text:p.ACTION_RESTORED,color:"bg-yellow-100 text-yellow-700"};default:return{text:f,color:"bg-slate-100 text-slate-700"}}};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"transaction-history-modal-title",children:[l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("div",{children:l.jsxs("h2",{id:"transaction-history-modal-title",className:"text-xl font-semibold text-slate-800",children:[p.TRANSACTION_HISTORY_MODAL_TITLE,": ",l.jsx("span",{className:"font-normal",children:t.description})]})}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"overflow-y-auto flex-grow pr-1 space-y-4 custom-scrollbar",children:t.editHistory&&t.editHistory.length>0?t.editHistory.slice().sort((f,h)=>new Date(h.timestamp).getTime()-new Date(f.timestamp).getTime()).map((f,h,_)=>{const b=_[h+1],v=b?b.snapshot:void 0,T=d(f.action);return l.jsxs("div",{className:"p-3.5 border border-slate-200 rounded-lg bg-slate-50 shadow-sm hover:shadow-md transition-shadow duration-150",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[l.jsxs("p",{className:"text-xs text-slate-500",children:[l.jsx("span",{className:"font-semibold text-slate-700",children:" : "}),f.userId]}),l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${T.color}`,children:T.text})]}),l.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-1",children:[p.VERSION_AT_TIMESTAMP," ",s(f.timestamp)]}),c(f,v)]},f.timestamp)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_HISTORY})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1; /* slate-300 */
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8; /* slate-500 */
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},EI=({isOpen:n,onClose:e,debt:t,persons:s})=>{if(!n||!t)return null;const r=s.find(b=>b.id===t.personId),i=r?r.name:p.UNKNOWN_PERSON,c=b=>{if(!b)return"N/A";try{return new Date(b).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return b}},d=b=>({personId:p.FIELD_NAME_PERSON_NAME,originalAmount:p.FIELD_NAME_ORIGINAL_AMOUNT||" ",remainingAmount:p.FIELD_NAME_REMAINING_AMOUNT||" ",description:p.FIELD_NAME_DESCRIPTION,type:p.FIELD_NAME_TYPE,dueDate:p.FIELD_NAME_DUE_DATE,isSettled:p.FIELD_NAME_IS_SETTLED,creationDate:p.FIELD_NAME_CREATION_DATE,settledDate:p.FIELD_NAME_SETTLED_DATE})[b]||b,f=(b,v)=>{if(v==null)return"";switch(b){case"type":return v===_a.PAYABLE?p.PAYABLE:p.RECEIVABLE;case"isSettled":return v?p.FIELD_VALUE_TRUE:p.FIELD_VALUE_FALSE;case"creationDate":case"settledDate":case"dueDate":return c(String(v));case"originalAmount":case"remainingAmount":return`${p.BDT_SYMBOL} ${Number(v).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"personId":const T=s.find(C=>C.id===String(v));return T?T.name:`${p.UNKNOWN_PERSON} (ID: ${v})`;default:return String(v)}},h=(b,v)=>{const T=[],C=b.snapshot;if(b.action==="created"||!v)Object.keys(C).forEach(L=>{C[L]!==void 0&&T.push(l.jsxs("li",{className:"text-sm",children:[l.jsxs("strong",{children:[d(L),":"]})," ",f(L,C[L])]},L))});else{let L=!1;Object.keys(C).forEach(R=>{const I=C[R],j=v?v[R]:void 0;let O=!1;R==="isSettled"?O=!!I!=!!j:typeof I=="number"||typeof j=="number"?O=Number(I)!==Number(j):O=String(I)!==String(j),O&&(L=!0,T.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",d(R)).replace("{oldValue}",f(R,j)).replace("{newValue}",f(R,I))},R)))}),L||T.push(l.jsx("li",{className:"text-sm italic",children:"     "},"no-changes"))}return T.length===0?l.jsx("li",{className:"text-sm italic",children:"    "}):l.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:T})},_=b=>{switch(b){case"created":return{text:p.ACTION_CREATED,color:"bg-green-100 text-green-700"};case"updated":return{text:p.ACTION_UPDATED,color:"bg-blue-100 text-blue-700"};default:return{text:b,color:"bg-slate-100 text-slate-700"}}};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"debt-history-modal-title",children:[l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("div",{children:l.jsxs("h2",{id:"debt-history-modal-title",className:"text-xl font-semibold text-slate-800",children:[p.DEBT_HISTORY_MODAL_TITLE,": ",l.jsxs("span",{className:"font-normal",children:[i," - ",t.description]})]})}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"overflow-y-auto flex-grow pr-1 space-y-4 custom-scrollbar",children:t.editHistory&&t.editHistory.length>0?t.editHistory.slice().sort((b,v)=>new Date(v.timestamp).getTime()-new Date(b.timestamp).getTime()).map((b,v,T)=>{const C=T.find(I=>new Date(I.timestamp).getTime()<new Date(b.timestamp).getTime()),L=C?C.snapshot:void 0,R=_(b.action);return l.jsxs("div",{className:"p-3.5 border border-slate-200 rounded-lg bg-slate-50 shadow-sm hover:shadow-md transition-shadow duration-150",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[l.jsxs("p",{className:"text-xs text-slate-500",children:[l.jsx("span",{className:"font-semibold text-slate-700",children:" : "}),b.userId]}),l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${R.color}`,children:R.text})]}),l.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-1",children:[p.VERSION_AT_TIMESTAMP," ",c(b.timestamp)]}),h(b,L)]},b.timestamp)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_HISTORY})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1; /* slate-300 */
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8; /* slate-500 */
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},Ya=({isOpen:n,onClose:e,title:t,children:s,size:r="md",headerActions:i})=>{const[c,d]=D.useState(!1);if(D.useEffect(()=>{if(n){const v=setTimeout(()=>{d(!0)},10);document.body.style.overflow="hidden";const T=window.innerWidth-document.documentElement.clientWidth;return r!=="screen"&&(document.body.style.paddingRight=`${T}px`),()=>{clearTimeout(v),document.body.style.overflow="auto",document.body.style.paddingRight="0"}}else d(!1),setTimeout(()=>{document.querySelector(".fixed.inset-0.bg-black.bg-opacity-70")||(document.body.style.overflow="auto",document.body.style.paddingRight="0")},300)},[n,r]),!n&&!c)return null;const f={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl",full:"max-w-full h-full",screen:"w-screen h-screen max-w-none max-h-none rounded-none shadow-none"},h=r==="screen"?"p-0":"p-4",_="bg-white flex flex-col transform transition-all duration-300 ease-out",b=r==="screen"?f.screen:`p-5 sm:p-6 rounded-xl shadow-2xl w-full ${f[r]} max-h-[90vh]`;return l.jsxs("div",{className:`fixed inset-0 bg-black flex items-center justify-center z-[70] transition-opacity duration-300 ease-out ${h} ${n&&c?"bg-opacity-70 opacity-100":"bg-opacity-0 opacity-0 pointer-events-none"}`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:n&&c?e:void 0,children:[l.jsxs("div",{className:`
          ${_} ${b}
          ${n&&c?"opacity-100 scale-100":"opacity-0 scale-95"}
        `,onClick:v=>v.stopPropagation(),children:[l.jsxs("div",{className:`flex justify-between items-center mb-4 pb-3 border-b border-slate-200 ${r==="screen"?"px-4 pt-4 sm:px-6 sm:pt-5":""}`,children:[l.jsx("h2",{id:"modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800 flex-grow truncate mr-2",children:t}),l.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[" ",i,l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsx("div",{className:`overflow-y-auto flex-grow custom-scrollbar-modal pr-1 ${r==="screen"?"px-4 pb-4 sm:px-6 sm:pb-5":""}`,children:s})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar-modal::-webkit-scrollbar-track {
          background: #f8fafc; /* bg-slate-50 */
          border-radius: 10px;
        }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb {
          background: #e2e8f0; /* slate-200 */
          border-radius: 10px;
        }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover {
          background: #cbd5e1; /* slate-300 */
        }
      `})]})},_I=({isOpen:n,onClose:e,onConfirm:t,title:s,message:r,confirmButtonText:i=p.CONFIRM_BTN_YES_DELETE||" ",cancelButtonText:c=p.CANCEL,confirmButtonColor:d="bg-red-600 hover:bg-red-700 focus:ring-red-500"})=>{const f=D.useRef(null),h=D.useRef(null),_=D.useRef(null);return D.useEffect(()=>{var b;n&&((b=h.current)==null||b.focus())},[n]),D.useEffect(()=>{const b=v=>{var L,R;if(!n||!_.current)return;if(v.key==="Escape"){e();return}const T=[h.current,f.current].filter(Boolean);if(T.length===0)return;const C=T.findIndex(I=>I===document.activeElement);if(v.key==="ArrowRight"||v.key==="Tab"&&!v.shiftKey){v.preventDefault();const I=(C+1)%T.length;(L=T[I])==null||L.focus()}else if(v.key==="ArrowLeft"||v.key==="Tab"&&v.shiftKey){v.preventDefault();const I=(C-1+T.length)%T.length;(R=T[I])==null||R.focus()}};return n&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[n,e]),n?l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[102]",role:"dialog","aria-modal":"true","aria-labelledby":"confirmation-modal-title",onClick:e,children:[l.jsxs("div",{ref:_,className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-md transform transition-all duration-150 ease-out scale-100",onClick:b=>b.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},tabIndex:-1,children:[l.jsx("h2",{id:"confirmation-modal-title",className:"text-xl font-semibold text-slate-800 mb-4",children:s}),l.jsx("div",{className:"text-sm text-slate-600 mb-6 whitespace-pre-wrap",children:r}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{ref:f,type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-1",children:c}),l.jsx("button",{ref:h,type:"button",onClick:()=>{t()},className:`px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 ${d}`,children:i})]})]}),l.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null},Bh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),f_=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),bI=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),TI=()=>{const{notifications:n,removeNotification:e}=ur();if(n.length===0)return null;const t=r=>{switch(r){case"success":return l.jsx(Bh,{className:"w-6 h-6 text-green-500"});case"error":return l.jsx(Xu,{className:"w-6 h-6 text-red-500"});case"info":return l.jsx(f_,{className:"w-6 h-6 text-sky-500"});case"warning":return l.jsx(bI,{className:"w-6 h-6 text-yellow-500"});default:return null}},s=r=>{switch(r){case"success":return"bg-green-50 border-green-400 text-green-700";case"error":return"bg-red-50 border-red-400 text-red-700";case"info":return"bg-sky-50 border-sky-400 text-sky-700";case"warning":return"bg-yellow-50 border-yellow-400 text-yellow-700";default:return"bg-slate-50 border-slate-400 text-slate-700"}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed top-5 right-5 z-[250] w-full max-w-xs sm:max-w-sm space-y-3",children:n.map(r=>l.jsxs("div",{className:`p-4 rounded-lg shadow-lg border-l-4 flex items-start space-x-3 transition-all duration-300 ease-in-out transform animate-slideInRight ${s(r.type)}`,role:"alert","aria-live":r.type==="error"?"assertive":"polite",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:t(r.type)}),l.jsx("div",{className:"flex-grow text-sm",children:r.message}),l.jsx("button",{onClick:()=>e(r.id),className:`p-1 -mr-1 -mt-1 rounded-full hover:bg-opacity-20 ${r.type==="success"?"hover:bg-green-200":r.type==="error"?"hover:bg-red-200":r.type==="info"?"hover:bg-sky-200":r.type==="warning"?"hover:bg-yellow-200":"hover:bg-slate-200"}`,"aria-label":"Close notification",children:l.jsx(Wc,{className:"w-4 h-4"})})]},r.id))}),l.jsx("style",{children:`
          @keyframes slideInRight {
            from {
              opacity: 0;
              transform: translateX(100%);
            }
            to {
              opacity: 1;
              transform: translateX(0);
            }
          }
          .animate-slideInRight {
            animation: slideInRight 0.3s ease-out forwards;
          }
        `})]})},sf=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),h_=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})}),NI="modulepreload",vI=function(n){return"/"+n},BE={},sp=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(_=>Promise.resolve(_).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=c(t.map(h=>{if(h=vI(h),h in BE)return;BE[h]=!0;const _=h.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const v=document.createElement("link");if(v.rel=_?"stylesheet":NI,_||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),_)return new Promise((T,C)=>{v.addEventListener("load",T),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})};function $s(n){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(n)}var oi=Uint8Array,Ki=Uint16Array,Dp=Int32Array,Xh=new oi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zh=new oi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ap=new oi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m_=function(n,e){for(var t=new Ki(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var r=new Dp(t[30]),s=1;s<30;++s)for(var i=t[s];i<t[s+1];++i)r[i]=i-t[s]<<5|s;return{b:t,r}},p_=m_(Xh,2),g_=p_.b,rp=p_.r;g_[28]=258,rp[258]=28;var x_=m_(Zh,0),yI=x_.b,UE=x_.r,ip=new Ki(32768);for(var ba=0;ba<32768;++ba){var hc=(ba&43690)>>1|(ba&21845)<<1;hc=(hc&52428)>>2|(hc&13107)<<2,hc=(hc&61680)>>4|(hc&3855)<<4,ip[ba]=((hc&65280)>>8|(hc&255)<<8)>>1}var fl=function(n,e,t){for(var s=n.length,r=0,i=new Ki(e);r<s;++r)n[r]&&++i[n[r]-1];var c=new Ki(e);for(r=1;r<e;++r)c[r]=c[r-1]+i[r-1]<<1;var d;if(t){d=new Ki(1<<e);var f=15-e;for(r=0;r<s;++r)if(n[r])for(var h=r<<4|n[r],_=e-n[r],b=c[n[r]-1]++<<_,v=b|(1<<_)-1;b<=v;++b)d[ip[b]>>f]=h}else for(d=new Ki(s),r=0;r<s;++r)n[r]&&(d[r]=ip[c[n[r]-1]++]>>15-n[r]);return d},bc=new oi(288);for(var ba=0;ba<144;++ba)bc[ba]=8;for(var ba=144;ba<256;++ba)bc[ba]=9;for(var ba=256;ba<280;++ba)bc[ba]=7;for(var ba=280;ba<288;++ba)bc[ba]=8;var af=new oi(32);for(var ba=0;ba<32;++ba)af[ba]=5;var AI=fl(bc,9,0),SI=fl(bc,9,1),CI=fl(af,5,0),LI=fl(af,5,1),E0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ko=function(n,e,t){var s=e/8|0;return(n[s]|n[s+1]<<8)>>(e&7)&t},_0=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Rp=function(n){return(n+7)/8|0},E_=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new oi(n.subarray(e,t))},wI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Uo=function(n,e,t){var s=new Error(e||wI[n]);if(s.code=n,Error.captureStackTrace&&Error.captureStackTrace(s,Uo),!t)throw s;return s},II=function(n,e,t,s){var r=n.length,i=0;if(!r||e.f&&!e.l)return t||new oi(0);var c=!t,d=c||e.i!=2,f=e.i;c&&(t=new oi(r*3));var h=function(we){var Je=t.length;if(we>Je){var Ze=new oi(Math.max(Je*2,we));Ze.set(t),t=Ze}},_=e.f||0,b=e.p||0,v=e.b||0,T=e.l,C=e.d,L=e.m,R=e.n,I=r*8;do{if(!T){_=ko(n,b,1);var j=ko(n,b+1,3);if(b+=3,j)if(j==1)T=SI,C=LI,L=9,R=5;else if(j==2){var Z=ko(n,b,31)+257,ee=ko(n,b+10,15)+4,J=Z+ko(n,b+5,31)+1;b+=14;for(var oe=new oi(J),xe=new oi(19),F=0;F<ee;++F)xe[ap[F]]=ko(n,b+F*3,7);b+=ee*3;for(var H=E0(xe),re=(1<<H)-1,K=fl(xe,H,1),F=0;F<J;){var Te=K[ko(n,b,re)];b+=Te&15;var O=Te>>4;if(O<16)oe[F++]=O;else{var G=0,he=0;for(O==16?(he=3+ko(n,b,3),b+=2,G=oe[F-1]):O==17?(he=3+ko(n,b,7),b+=3):O==18&&(he=11+ko(n,b,127),b+=7);he--;)oe[F++]=G}}var ue=oe.subarray(0,Z),ae=oe.subarray(Z);L=E0(ue),R=E0(ae),T=fl(ue,L,1),C=fl(ae,R,1)}else Uo(1);else{var O=Rp(b)+4,U=n[O-4]|n[O-3]<<8,se=O+U;if(se>r){f&&Uo(0);break}d&&h(v+U),t.set(n.subarray(O,se),v),e.b=v+=U,e.p=b=se*8,e.f=_;continue}if(b>I){f&&Uo(0);break}}d&&h(v+131072);for(var V=(1<<L)-1,ce=(1<<R)-1,M=b;;M=b){var G=T[_0(n,b)&V],k=G>>4;if(b+=G&15,b>I){f&&Uo(0);break}if(G||Uo(2),k<256)t[v++]=k;else if(k==256){M=b,T=null;break}else{var Y=k-254;if(k>264){var F=k-257,Q=Xh[F];Y=ko(n,b,(1<<Q)-1)+g_[F],b+=Q}var fe=C[_0(n,b)&ce],ve=fe>>4;fe||Uo(3),b+=fe&15;var ae=yI[ve];if(ve>3){var Q=Zh[ve];ae+=_0(n,b)&(1<<Q)-1,b+=Q}if(b>I){f&&Uo(0);break}d&&h(v+131072);var de=v+Y;if(v<ae){var Ne=i-ae,Ue=Math.min(ae,de);for(Ne+v<0&&Uo(3);v<Ue;++v)t[v]=s[Ne+v]}for(;v<de;++v)t[v]=t[v-ae]}}e.l=T,e.p=M,e.b=v,e.f=_,T&&(_=1,e.m=L,e.d=C,e.n=R)}while(!_);return v!=t.length&&c?E_(t,0,v):t.subarray(0,v)},Pl=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Fd=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},b0=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var r=t.length,i=t.slice();if(!r)return{t:b_,l:0};if(r==1){var c=new oi(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(se,Z){return se.f-Z.f}),t.push({s:-1,f:25001});var d=t[0],f=t[1],h=0,_=1,b=2;for(t[0]={s:-1,f:d.f+f.f,l:d,r:f};_!=r-1;)d=t[t[h].f<t[b].f?h++:b++],f=t[h!=_&&t[h].f<t[b].f?h++:b++],t[_++]={s:-1,f:d.f+f.f,l:d,r:f};for(var v=i[0].s,s=1;s<r;++s)i[s].s>v&&(v=i[s].s);var T=new Ki(v+1),C=op(t[_-1],T,0);if(C>e){var s=0,L=0,R=C-e,I=1<<R;for(i.sort(function(Z,ee){return T[ee.s]-T[Z.s]||Z.f-ee.f});s<r;++s){var j=i[s].s;if(T[j]>e)L+=I-(1<<C-T[j]),T[j]=e;else break}for(L>>=R;L>0;){var O=i[s].s;T[O]<e?L-=1<<e-T[O]++-1:++s}for(;s>=0&&L;--s){var U=i[s].s;T[U]==e&&(--T[U],++L)}C=e}return{t:new oi(T),l:C}},op=function(n,e,t){return n.s==-1?Math.max(op(n.l,e,t+1),op(n.r,e,t+1)):e[n.s]=t},FE=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ki(++e),s=0,r=n[0],i=1,c=function(f){t[s++]=f},d=1;d<=e;++d)if(n[d]==r&&d!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(r),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(r);i=1,r=n[d]}return{c:t.subarray(0,s),n:e}},Vd=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},__=function(n,e,t){var s=t.length,r=Rp(e+2);n[r]=s&255,n[r+1]=s>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var i=0;i<s;++i)n[r+i+4]=t[i];return(r+4+s)*8},VE=function(n,e,t,s,r,i,c,d,f,h,_){Pl(e,_++,t),++r[256];for(var b=b0(r,15),v=b.t,T=b.l,C=b0(i,15),L=C.t,R=C.l,I=FE(v),j=I.c,O=I.n,U=FE(L),se=U.c,Z=U.n,ee=new Ki(19),J=0;J<j.length;++J)++ee[j[J]&31];for(var J=0;J<se.length;++J)++ee[se[J]&31];for(var oe=b0(ee,7),xe=oe.t,F=oe.l,H=19;H>4&&!xe[ap[H-1]];--H);var re=h+5<<3,K=Vd(r,bc)+Vd(i,af)+c,Te=Vd(r,v)+Vd(i,L)+c+14+3*H+Vd(ee,xe)+2*ee[16]+3*ee[17]+7*ee[18];if(f>=0&&re<=K&&re<=Te)return __(e,_,n.subarray(f,f+h));var G,he,ue,ae;if(Pl(e,_,1+(Te<K)),_+=2,Te<K){G=fl(v,T,0),he=v,ue=fl(L,R,0),ae=L;var V=fl(xe,F,0);Pl(e,_,O-257),Pl(e,_+5,Z-1),Pl(e,_+10,H-4),_+=14;for(var J=0;J<H;++J)Pl(e,_+3*J,xe[ap[J]]);_+=3*H;for(var ce=[j,se],M=0;M<2;++M)for(var k=ce[M],J=0;J<k.length;++J){var Y=k[J]&31;Pl(e,_,V[Y]),_+=xe[Y],Y>15&&(Pl(e,_,k[J]>>5&127),_+=k[J]>>12)}}else G=AI,he=bc,ue=CI,ae=af;for(var J=0;J<d;++J){var Q=s[J];if(Q>255){var Y=Q>>18&31;Fd(e,_,G[Y+257]),_+=he[Y+257],Y>7&&(Pl(e,_,Q>>23&31),_+=Xh[Y]);var fe=Q&31;Fd(e,_,ue[fe]),_+=ae[fe],fe>3&&(Fd(e,_,Q>>5&8191),_+=Zh[fe])}else Fd(e,_,G[Q]),_+=he[Q]}return Fd(e,_,G[256]),_+he[256]},DI=new Dp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),b_=new oi(0),RI=function(n,e,t,s,r,i){var c=i.z||n.length,d=new oi(s+c+5*(1+Math.ceil(c/7e3))+r),f=d.subarray(s,d.length-r),h=i.l,_=(i.r||0)&7;if(e){_&&(f[0]=i.r>>3);for(var b=DI[e-1],v=b>>13,T=b&8191,C=(1<<t)-1,L=i.p||new Ki(32768),R=i.h||new Ki(C+1),I=Math.ceil(t/3),j=2*I,O=function(Qe){return(n[Qe]^n[Qe+1]<<I^n[Qe+2]<<j)&C},U=new Dp(25e3),se=new Ki(288),Z=new Ki(32),ee=0,J=0,oe=i.i||0,xe=0,F=i.w||0,H=0;oe+2<c;++oe){var re=O(oe),K=oe&32767,Te=R[re];if(L[K]=Te,R[re]=K,F<=oe){var G=c-oe;if((ee>7e3||xe>24576)&&(G>423||!h)){_=VE(n,f,0,U,se,Z,J,xe,H,oe-H,_),xe=ee=J=0,H=oe;for(var he=0;he<286;++he)se[he]=0;for(var he=0;he<30;++he)Z[he]=0}var ue=2,ae=0,V=T,ce=K-Te&32767;if(G>2&&re==O(oe-ce))for(var M=Math.min(v,G)-1,k=Math.min(32767,oe),Y=Math.min(258,G);ce<=k&&--V&&K!=Te;){if(n[oe+ue]==n[oe+ue-ce]){for(var Q=0;Q<Y&&n[oe+Q]==n[oe+Q-ce];++Q);if(Q>ue){if(ue=Q,ae=ce,Q>M)break;for(var fe=Math.min(ce,Q-2),ve=0,he=0;he<fe;++he){var de=oe-ce+he&32767,Ne=L[de],Ue=de-Ne&32767;Ue>ve&&(ve=Ue,Te=de)}}}K=Te,Te=L[K],ce+=K-Te&32767}if(ae){U[xe++]=268435456|rp[ue]<<18|UE[ae];var we=rp[ue]&31,Je=UE[ae]&31;J+=Xh[we]+Zh[Je],++se[257+we],++Z[Je],F=oe+ue,++ee}else U[xe++]=n[oe],++se[n[oe]]}}for(oe=Math.max(oe,F);oe<c;++oe)U[xe++]=n[oe],++se[n[oe]];_=VE(n,f,h,U,se,Z,J,xe,H,oe-H,_),h||(i.r=_&7|f[_/8|0]<<3,_-=7,i.h=R,i.p=L,i.i=oe,i.w=F)}else{for(var oe=i.w||0;oe<c+h;oe+=65535){var Ze=oe+65535;Ze>=c&&(f[_/8|0]=h,Ze=c),_=__(f,_+1,n.subarray(oe,Ze))}i.i=c}return E_(d,0,s+Rp(_)+r)},T_=function(){var n=1,e=0;return{p:function(t){for(var s=n,r=e,i=t.length|0,c=0;c!=i;){for(var d=Math.min(c+2655,i);c<d;++c)r+=s+=t[c];s=(s&65535)+15*(s>>16),r=(r&65535)+15*(r>>16)}n=s,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},OI=function(n,e,t,s,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),c=new oi(i.length+n.length);c.set(i),c.set(n,i.length),n=c,r.w=i.length}return RI(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,r)},N_=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},PI=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var r=T_();r.p(e.dictionary),N_(n,2,r.d())}},MI=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Uo(6,"invalid zlib data"),(n[1]>>5&1)==1&&Uo(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function lp(n,e){e||(e={});var t=T_();t.p(n);var s=OI(n,e,e.dictionary?6:2,4);return PI(s,e),N_(s,s.length-4,t.d()),s}function kI(n,e){return II(n.subarray(MI(n),-4),{i:2},e,e)}var jI=typeof TextDecoder<"u"&&new TextDecoder,BI=0;try{jI.decode(b_,{stream:!0}),BI=1}catch{}var Dn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function T0(){Dn.console&&typeof Dn.console.log=="function"&&Dn.console.log.apply(Dn.console,arguments)}var na={log:T0,warn:function(n){Dn.console&&(typeof Dn.console.warn=="function"?Dn.console.warn.apply(Dn.console,arguments):T0.call(null,arguments))},error:function(n){Dn.console&&(typeof Dn.console.error=="function"?Dn.console.error.apply(Dn.console,arguments):T0(n))}};function N0(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){qc(s.response,e,t)},s.onerror=function(){na.error("could not download file")},s.send()}function GE(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function oh(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Xd,cp,qc=Dn.saveAs||((typeof window>"u"?"undefined":$s(window))!=="object"||window!==Dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=Dn.URL||Dn.webkitURL,r=document.createElement("a");e=e||n.name||"download",r.download=e,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?GE(r.href)?N0(n,e,t):oh(r,r.target="_blank"):oh(r)):(r.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(r.href)},4e4),setTimeout(function(){oh(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(GE(n))N0(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){oh(s)})}else navigator.msSaveOrOpenBlob(function(r,i){return i===void 0?i={autoBom:!1}:$s(i)!=="object"&&(na.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return N0(n,e,t);var r=n.type==="application/octet-stream",i=/constructor/i.test(Dn.HTMLElement)||Dn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&i)&&(typeof FileReader>"u"?"undefined":$s(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var _=d.result;_=c?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=_:location=_,s=null},d.readAsDataURL(n)}else{var f=Dn.URL||Dn.webkitURL,h=f.createObjectURL(n);s?s.location=h:location.href=h,s=null,setTimeout(function(){f.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function v_(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var r=t[s].re,i=t[s].process,c=r.exec(n);c&&(e=i(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),f=this.g.toString(16),h=this.b.toString(16);return d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),h.length==1&&(h="0"+h),"#"+d+f+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function v0(n,e){var t=n[0],s=n[1],r=n[2],i=n[3];t=ti(t,s,r,i,e[0],7,-680876936),i=ti(i,t,s,r,e[1],12,-389564586),r=ti(r,i,t,s,e[2],17,606105819),s=ti(s,r,i,t,e[3],22,-1044525330),t=ti(t,s,r,i,e[4],7,-176418897),i=ti(i,t,s,r,e[5],12,1200080426),r=ti(r,i,t,s,e[6],17,-1473231341),s=ti(s,r,i,t,e[7],22,-45705983),t=ti(t,s,r,i,e[8],7,1770035416),i=ti(i,t,s,r,e[9],12,-1958414417),r=ti(r,i,t,s,e[10],17,-42063),s=ti(s,r,i,t,e[11],22,-1990404162),t=ti(t,s,r,i,e[12],7,1804603682),i=ti(i,t,s,r,e[13],12,-40341101),r=ti(r,i,t,s,e[14],17,-1502002290),t=ni(t,s=ti(s,r,i,t,e[15],22,1236535329),r,i,e[1],5,-165796510),i=ni(i,t,s,r,e[6],9,-1069501632),r=ni(r,i,t,s,e[11],14,643717713),s=ni(s,r,i,t,e[0],20,-373897302),t=ni(t,s,r,i,e[5],5,-701558691),i=ni(i,t,s,r,e[10],9,38016083),r=ni(r,i,t,s,e[15],14,-660478335),s=ni(s,r,i,t,e[4],20,-405537848),t=ni(t,s,r,i,e[9],5,568446438),i=ni(i,t,s,r,e[14],9,-1019803690),r=ni(r,i,t,s,e[3],14,-187363961),s=ni(s,r,i,t,e[8],20,1163531501),t=ni(t,s,r,i,e[13],5,-1444681467),i=ni(i,t,s,r,e[2],9,-51403784),r=ni(r,i,t,s,e[7],14,1735328473),t=si(t,s=ni(s,r,i,t,e[12],20,-1926607734),r,i,e[5],4,-378558),i=si(i,t,s,r,e[8],11,-2022574463),r=si(r,i,t,s,e[11],16,1839030562),s=si(s,r,i,t,e[14],23,-35309556),t=si(t,s,r,i,e[1],4,-1530992060),i=si(i,t,s,r,e[4],11,1272893353),r=si(r,i,t,s,e[7],16,-155497632),s=si(s,r,i,t,e[10],23,-1094730640),t=si(t,s,r,i,e[13],4,681279174),i=si(i,t,s,r,e[0],11,-358537222),r=si(r,i,t,s,e[3],16,-722521979),s=si(s,r,i,t,e[6],23,76029189),t=si(t,s,r,i,e[9],4,-640364487),i=si(i,t,s,r,e[12],11,-421815835),r=si(r,i,t,s,e[15],16,530742520),t=ai(t,s=si(s,r,i,t,e[2],23,-995338651),r,i,e[0],6,-198630844),i=ai(i,t,s,r,e[7],10,1126891415),r=ai(r,i,t,s,e[14],15,-1416354905),s=ai(s,r,i,t,e[5],21,-57434055),t=ai(t,s,r,i,e[12],6,1700485571),i=ai(i,t,s,r,e[3],10,-1894986606),r=ai(r,i,t,s,e[10],15,-1051523),s=ai(s,r,i,t,e[1],21,-2054922799),t=ai(t,s,r,i,e[8],6,1873313359),i=ai(i,t,s,r,e[15],10,-30611744),r=ai(r,i,t,s,e[6],15,-1560198380),s=ai(s,r,i,t,e[13],21,1309151649),t=ai(t,s,r,i,e[4],6,-145523070),i=ai(i,t,s,r,e[11],10,-1120210379),r=ai(r,i,t,s,e[2],15,718787259),s=ai(s,r,i,t,e[9],21,-343485551),n[0]=gc(t,n[0]),n[1]=gc(s,n[1]),n[2]=gc(r,n[2]),n[3]=gc(i,n[3])}function Jh(n,e,t,s,r,i){return e=gc(gc(e,n),gc(s,i)),gc(e<<r|e>>>32-r,t)}function ti(n,e,t,s,r,i,c){return Jh(e&t|~e&s,n,e,r,i,c)}function ni(n,e,t,s,r,i,c){return Jh(e&s|t&~s,n,e,r,i,c)}function si(n,e,t,s,r,i,c){return Jh(e^t^s,n,e,r,i,c)}function ai(n,e,t,s,r,i,c){return Jh(t^(e|~s),n,e,r,i,c)}function y_(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)v0(s,UI(n.substring(e-64,e)));n=n.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)r[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(v0(s,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,v0(s,r),s}function UI(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Xd=Dn.atob.bind(Dn),cp=Dn.btoa.bind(Dn);var HE="0123456789abcdef".split("");function FI(n){for(var e="",t=0;t<4;t++)e+=HE[n>>8*t+4&15]+HE[n>>8*t&15];return e}function VI(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function up(n){return y_(n).map(VI).join("")}var GI=function(n){for(var e=0;e<n.length;e++)n[e]=FI(n[e]);return n.join("")}(y_("hello"))!="5d41402abc4b2a76b9719d911017c592";function gc(n,e){if(GI){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function dp(n,e){var t,s,r,i;if(n!==t){for(var c=(r=n,i=1+(256/n.length>>0),new Array(i+1).join(r)),d=[],f=0;f<256;f++)d[f]=f;var h=0;for(f=0;f<256;f++){var _=d[f];h=(h+_+c.charCodeAt(f))%256,d[f]=d[h],d[h]=_}t=n,s=d}else d=s;var b=e.length,v=0,T=0,C="";for(f=0;f<b;f++)T=(T+(_=d[v=(v+1)%256]))%256,d[v]=d[T],d[T]=_,c=d[(d[v]+d[T])%256],C+=String.fromCharCode(e.charCodeAt(f)^c);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var YE={print:4,modify:8,copy:16,"annot-forms":32};function Ou(n,e,t,s){this.v=1,this.r=2;var r=192;n.forEach(function(d){if(YE.perm!==void 0)throw new Error("Invalid permission: "+d);r+=YE[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,c),this.P=-(1+(255^r)),this.encryptionKey=up(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=dp(this.encryptionKey,this.padding)}function Pu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var r=n.charCodeAt(s);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=n[s]}return e}function qE(n){if($s(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,r){if(r=r||!1,typeof t!="string"||typeof s!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[s,!!r],i},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),r=[];for(var i in e[t]){var c=e[t][i];try{c[0].apply(n,s)}catch(d){Dn.console&&na.error("jsPDF PubSub Error",d.message,d)}c[1]&&r.push(i)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Uh(n){if(!(this instanceof Uh))return new Uh(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function A_(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function zc(n,e,t,s,r){if(!(this instanceof zc))return new zc(n,e,t,s,r);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,A_.call(this,s,r)}function ku(n,e,t,s,r){if(!(this instanceof ku))return new ku(n,e,t,s,r);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,A_.call(this,s,r)}function Nn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],r=arguments[2],i=arguments[3],c=[],d=1,f=16,h="S",_=null;$s(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,r=n.format||r,i=n.compress||n.compressPdf||i,(_=n.encryption||null)!==null&&(_.userPassword=_.userPassword||"",_.ownerPassword=_.ownerPassword||"",_.userPermissions=_.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),h=n.defaultPathOperation||"S"),c=n.filters||(i===!0?["FlateEncode"]:c),s=s||"mm",t=(""+(t||"P")).toLowerCase();var b=n.putOnlyUsedFonts||!1,v={},T={internal:{},__private__:{}};T.__private__.PubSub=qE;var C="1.3",L=T.__private__.getPdfVersion=function(){return C};T.__private__.setPdfVersion=function(S){C=S};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};T.__private__.getPageFormats=function(){return R};var I=T.__private__.getPageFormat=function(S){return R[S]};r=r||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},O=j.COMPAT;function U(){this.saveGraphicsState(),ge(new Xt(pe,0,0,-pe,0,Mi()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),h="n",O=j.ADVANCED}function se(){this.restoreGraphicsState(),h="S",O=j.COMPAT}var Z=T.__private__.combineFontStyleAndFontWeight=function(S,q){if(S=="bold"&&q=="normal"||S=="bold"&&q==400||S=="normal"&&q=="italic"||S=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(S=q==400||q==="normal"?S==="italic"?"italic":"normal":q!=700&&q!=="bold"||S!=="normal"?(q==700?"bold":q)+""+S:"bold"),S};T.advancedAPI=function(S){var q=O===j.COMPAT;return q&&U.call(this),typeof S!="function"||(S(this),q&&se.call(this)),this},T.compatAPI=function(S){var q=O===j.ADVANCED;return q&&se.call(this),typeof S!="function"||(S(this),q&&U.call(this)),this},T.isAdvancedAPI=function(){return O===j.ADVANCED};var ee,J=function(S){if(O!==j.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},oe=T.roundToPrecision=T.__private__.roundToPrecision=function(S,q){var Ee=e||q;if(isNaN(S)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(Ee).replace(/0+$/,"")};ee=T.hpf=T.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(S,16)};var xe=T.f2=T.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return oe(S,2)},F=T.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return oe(S,3)},H=T.scale=T.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return O===j.COMPAT?S*pe:O===j.ADVANCED?S:void 0},re=function(S){return O===j.COMPAT?Mi()-S:O===j.ADVANCED?S:void 0},K=function(S){return H(re(S))};T.__private__.setPrecision=T.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var Te,G="00000000000000000000000000000000",he=T.__private__.getFileId=function(){return G},ue=T.__private__.setFileId=function(S){return G=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():G.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),_!==null&&(bt=new Ou(_.userPermissions,_.userPassword,_.ownerPassword,G)),G};T.setFileId=function(S){return ue(S),this},T.getFileId=function(){return he()};var ae=T.__private__.convertDateToPDFDate=function(S){var q=S.getTimezoneOffset(),Ee=q<0?"+":"-",Ae=Math.floor(Math.abs(q/60)),Me=Math.abs(q%60),et=[Ee,Y(Ae),"'",Y(Me),"'"].join("");return["D:",S.getFullYear(),Y(S.getMonth()+1),Y(S.getDate()),Y(S.getHours()),Y(S.getMinutes()),Y(S.getSeconds()),et].join("")},V=T.__private__.convertPDFDateToDate=function(S){var q=parseInt(S.substr(2,4),10),Ee=parseInt(S.substr(6,2),10)-1,Ae=parseInt(S.substr(8,2),10),Me=parseInt(S.substr(10,2),10),et=parseInt(S.substr(12,2),10),vt=parseInt(S.substr(14,2),10);return new Date(q,Ee,Ae,Me,et,vt,0)},ce=T.__private__.setCreationDate=function(S){var q;if(S===void 0&&(S=new Date),S instanceof Date)q=ae(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=S}return Te=q},M=T.__private__.getCreationDate=function(S){var q=Te;return S==="jsDate"&&(q=V(Te)),q};T.setCreationDate=function(S){return ce(S),this},T.getCreationDate=function(S){return M(S)};var k,Y=T.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},Q=T.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},fe=0,ve=[],de=[],Ne=0,Ue=[],we=[],Je=!1,Ze=de,Qe=function(){fe=0,Ne=0,de=[],ve=[],Ue=[],Ca=_s(),En=_s()};T.__private__.setCustomOutputDestination=function(S){Je=!0,Ze=S};var je=function(S){Je||(Ze=S)};T.__private__.resetCustomOutputDestination=function(){Je=!1,Ze=de};var ge=T.__private__.out=function(S){return S=S.toString(),Ne+=S.length+1,Ze.push(S),Ze},Fe=T.__private__.write=function(S){return ge(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},ut=T.__private__.getArrayBuffer=function(S){for(var q=S.length,Ee=new ArrayBuffer(q),Ae=new Uint8Array(Ee);q--;)Ae[q]=S.charCodeAt(q);return Ee},Pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];T.__private__.getStandardFonts=function(){return Pe};var nt=n.fontSize||16;T.__private__.setFontSize=T.setFontSize=function(S){return nt=O===j.ADVANCED?S/pe:S,this};var it,st=T.__private__.getFontSize=T.getFontSize=function(){return O===j.COMPAT?nt:nt*pe},Nt=n.R2L||!1;T.__private__.setR2L=T.setR2L=function(S){return Nt=S,this},T.__private__.getR2L=T.getR2L=function(){return Nt};var Pt,Rt=T.__private__.setZoomMode=function(S){var q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))it=S;else if(isNaN(S)){if(q.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');it=S}else it=parseInt(S,10)};T.__private__.getZoomMode=function(){return it};var Ft,Yt=T.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Pt=S};T.__private__.getPageMode=function(){return Pt};var Be=T.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Ft=S};T.__private__.getLayoutMode=function(){return Ft},T.__private__.setDisplayMode=T.setDisplayMode=function(S,q,Ee){return Rt(S),Be(q),Yt(Ee),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};T.__private__.getDocumentProperty=function(S){if(Object.keys(We).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[S]},T.__private__.getDocumentProperties=function(){return We},T.__private__.setDocumentProperties=T.setProperties=T.setDocumentProperties=function(S){for(var q in We)We.hasOwnProperty(q)&&S[q]&&(We[q]=S[q]);return this},T.__private__.setDocumentProperty=function(S,q){if(Object.keys(We).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[S]=q};var Lt,pe,yt,At,Kt,Gt={},xn={},rs=[],Cn={},Ws={},Un={},js={},ln=null,ls=0,un=[],Mn=new qE(T),qa=n.hotfixes||[],gs={},ca={},vn=[],Xt=function S(q,Ee,Ae,Me,et,vt){if(!(this instanceof S))return new S(q,Ee,Ae,Me,et,vt);isNaN(q)&&(q=1),isNaN(Ee)&&(Ee=0),isNaN(Ae)&&(Ae=0),isNaN(Me)&&(Me=1),isNaN(et)&&(et=0),isNaN(vt)&&(vt=0),this._matrix=[q,Ee,Ae,Me,et,vt]};Object.defineProperty(Xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ee).join(S)},Xt.prototype.multiply=function(S){var q=S.sx*this.sx+S.shy*this.shx,Ee=S.sx*this.shy+S.shy*this.sy,Ae=S.shx*this.sx+S.sy*this.shx,Me=S.shx*this.shy+S.sy*this.sy,et=S.tx*this.sx+S.ty*this.shx+this.tx,vt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Xt(q,Ee,Ae,Me,et,vt)},Xt.prototype.decompose=function(){var S=this.sx,q=this.shy,Ee=this.shx,Ae=this.sy,Me=this.tx,et=this.ty,vt=Math.sqrt(S*S+q*q),Vt=(S/=vt)*Ee+(q/=vt)*Ae;Ee-=S*Vt,Ae-=q*Vt;var Jt=Math.sqrt(Ee*Ee+Ae*Ae);return Vt/=Jt,S*(Ae/=Jt)<q*(Ee/=Jt)&&(S=-S,q=-q,Vt=-Vt,vt=-vt),{scale:new Xt(vt,0,0,Jt,0,0),translate:new Xt(1,0,0,1,Me,et),rotate:new Xt(S,q,-q,S,0,0),skew:new Xt(1,0,Vt,1,0,0)}},Xt.prototype.toString=function(S){return this.join(" ")},Xt.prototype.inversed=function(){var S=this.sx,q=this.shy,Ee=this.shx,Ae=this.sy,Me=this.tx,et=this.ty,vt=1/(S*Ae-q*Ee),Vt=Ae*vt,Jt=-q*vt,pn=-Ee*vt,wn=S*vt;return new Xt(Vt,Jt,pn,wn,-Vt*Me-pn*et,-Jt*Me-wn*et)},Xt.prototype.applyToPoint=function(S){var q=S.x*this.sx+S.y*this.shx+this.tx,Ee=S.x*this.shy+S.y*this.sy+this.ty;return new ha(q,Ee)},Xt.prototype.applyToRectangle=function(S){var q=this.applyToPoint(S),Ee=this.applyToPoint(new ha(S.x+S.w,S.y+S.h));return new bn(q.x,q.y,Ee.x-q.x,Ee.y-q.y)},Xt.prototype.clone=function(){var S=this.sx,q=this.shy,Ee=this.shx,Ae=this.sy,Me=this.tx,et=this.ty;return new Xt(S,q,Ee,Ae,Me,et)},T.Matrix=Xt;var Ln=T.matrixMult=function(S,q){return q.multiply(S)},kn=new Xt(1,0,0,1,0,0);T.unitMatrix=T.identityMatrix=kn;var Fn=function(S,q){if(!Ws[S]){var Ee=(q instanceof zc?"Sh":"P")+(Object.keys(Cn).length+1).toString(10);q.id=Ee,Ws[S]=Ee,Cn[Ee]=q,Mn.publish("addPattern",q)}};T.ShadingPattern=zc,T.TilingPattern=ku,T.addShadingPattern=function(S,q){return J("addShadingPattern()"),Fn(S,q),this},T.beginTilingPattern=function(S){J("beginTilingPattern()"),aa(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},T.endTilingPattern=function(S,q){J("endTilingPattern()"),q.stream=we[k].join(`
`),Fn(S,q),Mn.publish("endTilingPattern",q),vn.pop().restore()};var Rn=T.__private__.newObject=function(){var S=_s();return hs(S,!0),S},_s=T.__private__.newObjectDeferred=function(){return fe++,ve[fe]=function(){return Ne},fe},hs=function(S,q){return q=typeof q=="boolean"&&q,ve[S]=Ne,q&&ge(S+" 0 obj"),S},er=T.__private__.newAdditionalObject=function(){var S={objId:_s(),content:""};return Ue.push(S),S},Ca=_s(),En=_s(),bs=T.__private__.decodeColorString=function(S){var q=S.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length===5&&(q[4]==="k"||q[4]==="K")&&(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var Ee=parseFloat(q[0]);q=[Ee,Ee,Ee,"r"]}for(var Ae="#",Me=0;Me<3;Me++)Ae+=("0"+Math.floor(255*parseFloat(q[Me])).toString(16)).slice(-2);return Ae},Qt=T.__private__.encodeColorString=function(S){var q;typeof S=="string"&&(S={ch1:S});var Ee=S.ch1,Ae=S.ch2,Me=S.ch3,et=S.ch4,vt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var Vt=new v_(Ee);if(Vt.ok)Ee=Vt.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Jt=parseInt(Ee.substr(1),16);Ee=Jt>>16&255,Ae=Jt>>8&255,Me=255&Jt}if(Ae===void 0||et===void 0&&Ee===Ae&&Ae===Me)if(typeof Ee=="string")q=Ee+" "+vt[0];else switch(S.precision){case 2:q=xe(Ee/255)+" "+vt[0];break;case 3:default:q=F(Ee/255)+" "+vt[0]}else if(et===void 0||$s(et)==="object"){if(et&&!isNaN(et.a)&&et.a===0)return q=["1.","1.","1.",vt[1]].join(" ");if(typeof Ee=="string")q=[Ee,Ae,Me,vt[1]].join(" ");else switch(S.precision){case 2:q=[xe(Ee/255),xe(Ae/255),xe(Me/255),vt[1]].join(" ");break;default:case 3:q=[F(Ee/255),F(Ae/255),F(Me/255),vt[1]].join(" ")}}else if(typeof Ee=="string")q=[Ee,Ae,Me,et,vt[2]].join(" ");else switch(S.precision){case 2:q=[xe(Ee),xe(Ae),xe(Me),xe(et),vt[2]].join(" ");break;case 3:default:q=[F(Ee),F(Ae),F(Me),F(et),vt[2]].join(" ")}return q},Ls=T.__private__.getFilters=function(){return c},Ts=T.__private__.putStream=function(S){var q=(S=S||{}).data||"",Ee=S.filters||Ls(),Ae=S.alreadyAppliedFilters||[],Me=S.addLength1||!1,et=q.length,vt=S.objectId,Vt=function(Hs){return Hs};if(_!==null&&vt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");_!==null&&(Vt=bt.encryptor(vt,0));var Jt={};Ee===!0&&(Ee=["FlateEncode"]);var pn=S.additionalKeyValues||[],wn=(Jt=Nn.API.processDataByFilters!==void 0?Nn.API.processDataByFilters(q,Ee):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(Ae)?Ae.join(" "):Ae.toString());if(Jt.data.length!==0&&(pn.push({key:"Length",value:Jt.data.length}),Me===!0&&pn.push({key:"Length1",value:et})),wn.length!=0)if(wn.split("/").length-1==1)pn.push({key:"Filter",value:wn});else{pn.push({key:"Filter",value:"["+wn+"]"});for(var as=0;as<pn.length;as+=1)if(pn[as].key==="DecodeParms"){for(var Ks=[],Xs=0;Xs<Jt.reverseChain.split("/").length-1;Xs+=1)Ks.push("null");Ks.push(pn[as].value),pn[as].value="["+Ks.join(" ")+"]"}}ge("<<");for(var ma=0;ma<pn.length;ma++)ge("/"+pn[ma].key+" "+pn[ma].value);ge(">>"),Jt.data.length!==0&&(ge("stream"),ge(Vt(Jt.data)),ge("endstream"))},$n=T.__private__.putPage=function(S){var q=S.number,Ee=S.data,Ae=S.objId,Me=S.contentsObjId;hs(Ae,!0),ge("<</Type /Page"),ge("/Parent "+S.rootDictionaryObjId+" 0 R"),ge("/Resources "+S.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(ee(S.mediaBox.bottomLeftX))+" "+parseFloat(ee(S.mediaBox.bottomLeftY))+" "+ee(S.mediaBox.topRightX)+" "+ee(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&ge("/CropBox ["+ee(S.cropBox.bottomLeftX)+" "+ee(S.cropBox.bottomLeftY)+" "+ee(S.cropBox.topRightX)+" "+ee(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&ge("/BleedBox ["+ee(S.bleedBox.bottomLeftX)+" "+ee(S.bleedBox.bottomLeftY)+" "+ee(S.bleedBox.topRightX)+" "+ee(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&ge("/TrimBox ["+ee(S.trimBox.bottomLeftX)+" "+ee(S.trimBox.bottomLeftY)+" "+ee(S.trimBox.topRightX)+" "+ee(S.trimBox.topRightY)+"]"),S.artBox!==null&&ge("/ArtBox ["+ee(S.artBox.bottomLeftX)+" "+ee(S.artBox.bottomLeftY)+" "+ee(S.artBox.topRightX)+" "+ee(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&ge("/UserUnit "+S.userUnit),Mn.publish("putPage",{objId:Ae,pageContext:un[q],pageNumber:q,page:Ee}),ge("/Contents "+Me+" 0 R"),ge(">>"),ge("endobj");var et=Ee.join(`
`);return O===j.ADVANCED&&(et+=`
Q`),hs(Me,!0),Ts({data:et,filters:Ls(),objectId:Me}),ge("endobj"),Ae},La=T.__private__.putPages=function(){var S,q,Ee=[];for(S=1;S<=ls;S++)un[S].objId=_s(),un[S].contentsObjId=_s();for(S=1;S<=ls;S++)Ee.push($n({number:S,data:we[S],objId:un[S].objId,contentsObjId:un[S].contentsObjId,mediaBox:un[S].mediaBox,cropBox:un[S].cropBox,bleedBox:un[S].bleedBox,trimBox:un[S].trimBox,artBox:un[S].artBox,userUnit:un[S].userUnit,rootDictionaryObjId:Ca,resourceDictionaryObjId:En}));hs(Ca,!0),ge("<</Type /Pages");var Ae="/Kids [";for(q=0;q<ls;q++)Ae+=Ee[q]+" 0 R ";ge(Ae+"]"),ge("/Count "+ls),ge(">>"),ge("endobj"),Mn.publish("postPutPages")},ua=function(S){Mn.publish("putFont",{font:S,out:ge,newObject:Rn,putStream:Ts}),S.isAlreadyPutted!==!0&&(S.objectNumber=Rn(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+Pu(S.postScriptName)),ge("/Subtype /Type1"),typeof S.encoding=="string"&&ge("/Encoding /"+S.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},Bs=function(){for(var S in Gt)Gt.hasOwnProperty(S)&&(b===!1||b===!0&&v.hasOwnProperty(S))&&ua(Gt[S])},ms=function(S){S.objectNumber=Rn();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[ee(S.x),ee(S.y),ee(S.x+S.width),ee(S.y+S.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var Ee=S.pages[1].join(`
`);Ts({data:Ee,additionalKeyValues:q,objectId:S.objectNumber}),ge("endobj")},wa=function(){for(var S in gs)gs.hasOwnProperty(S)&&ms(gs[S])},Is=function(S,q){var Ee,Ae=[],Me=1/(q-1);for(Ee=0;Ee<1;Ee+=Me)Ae.push(Ee);if(Ae.push(1),S[0].offset!=0){var et={offset:0,color:S[0].color};S.unshift(et)}if(S[S.length-1].offset!=1){var vt={offset:1,color:S[S.length-1].color};S.push(vt)}for(var Vt="",Jt=0,pn=0;pn<Ae.length;pn++){for(Ee=Ae[pn];Ee>S[Jt+1].offset;)Jt++;var wn=S[Jt].offset,as=(Ee-wn)/(S[Jt+1].offset-wn),Ks=S[Jt].color,Xs=S[Jt+1].color;Vt+=Q(Math.round((1-as)*Ks[0]+as*Xs[0]).toString(16))+Q(Math.round((1-as)*Ks[1]+as*Xs[1]).toString(16))+Q(Math.round((1-as)*Ks[2]+as*Xs[2]).toString(16))}return Vt.trim()},ka=function(S,q){q||(q=21);var Ee=Rn(),Ae=Is(S.colors,q),Me=[];Me.push({key:"FunctionType",value:"0"}),Me.push({key:"Domain",value:"[0.0 1.0]"}),Me.push({key:"Size",value:"["+q+"]"}),Me.push({key:"BitsPerSample",value:"8"}),Me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ts({data:Ae,additionalKeyValues:Me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),ge("endobj"),S.objectNumber=Rn(),ge("<< /ShadingType "+S.type),ge("/ColorSpace /DeviceRGB");var et="/Coords ["+ee(parseFloat(S.coords[0]))+" "+ee(parseFloat(S.coords[1]))+" ";S.type===2?et+=ee(parseFloat(S.coords[2]))+" "+ee(parseFloat(S.coords[3])):et+=ee(parseFloat(S.coords[2]))+" "+ee(parseFloat(S.coords[3]))+" "+ee(parseFloat(S.coords[4]))+" "+ee(parseFloat(S.coords[5])),ge(et+="]"),S.matrix&&ge("/Matrix ["+S.matrix.toString()+"]"),ge("/Function "+Ee+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},Wn=function(S,q){var Ee=_s(),Ae=Rn();q.push({resourcesOid:Ee,objectOid:Ae}),S.objectNumber=Ae;var Me=[];Me.push({key:"Type",value:"/Pattern"}),Me.push({key:"PatternType",value:"1"}),Me.push({key:"PaintType",value:"1"}),Me.push({key:"TilingType",value:"1"}),Me.push({key:"BBox",value:"["+S.boundingBox.map(ee).join(" ")+"]"}),Me.push({key:"XStep",value:ee(S.xStep)}),Me.push({key:"YStep",value:ee(S.yStep)}),Me.push({key:"Resources",value:Ee+" 0 R"}),S.matrix&&Me.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Ts({data:S.stream,additionalKeyValues:Me,objectId:S.objectNumber}),ge("endobj")},Ns=function(S){var q;for(q in Cn)Cn.hasOwnProperty(q)&&(Cn[q]instanceof zc?ka(Cn[q]):Cn[q]instanceof ku&&Wn(Cn[q],S))},da=function(S){for(var q in S.objectNumber=Rn(),ge("<<"),S)switch(q){case"opacity":ge("/ca "+xe(S[q]));break;case"stroke-opacity":ge("/CA "+xe(S[q]))}ge(">>"),ge("endobj")},ws=function(){var S;for(S in Un)Un.hasOwnProperty(S)&&da(Un[S])},tr=function(){for(var S in ge("/XObject <<"),gs)gs.hasOwnProperty(S)&&gs[S].objectNumber>=0&&ge("/"+S+" "+gs[S].objectNumber+" 0 R");Mn.publish("putXobjectDict"),ge(">>")},Ta=function(){bt.oid=Rn(),ge("<<"),ge("/Filter /Standard"),ge("/V "+bt.v),ge("/R "+bt.r),ge("/U <"+bt.toHexString(bt.U)+">"),ge("/O <"+bt.toHexString(bt.O)+">"),ge("/P "+bt.P),ge(">>"),ge("endobj")},sa=function(){for(var S in ge("/Font <<"),Gt)Gt.hasOwnProperty(S)&&(b===!1||b===!0&&v.hasOwnProperty(S))&&ge("/"+S+" "+Gt[S].objectNumber+" 0 R");ge(">>")},Gr=function(){if(Object.keys(Cn).length>0){for(var S in ge("/Shading <<"),Cn)Cn.hasOwnProperty(S)&&Cn[S]instanceof zc&&Cn[S].objectNumber>=0&&ge("/"+S+" "+Cn[S].objectNumber+" 0 R");Mn.publish("putShadingPatternDict"),ge(">>")}},mn=function(S){if(Object.keys(Cn).length>0){for(var q in ge("/Pattern <<"),Cn)Cn.hasOwnProperty(q)&&Cn[q]instanceof T.TilingPattern&&Cn[q].objectNumber>=0&&Cn[q].objectNumber<S&&ge("/"+q+" "+Cn[q].objectNumber+" 0 R");Mn.publish("putTilingPatternDict"),ge(">>")}},Hr=function(){if(Object.keys(Un).length>0){var S;for(S in ge("/ExtGState <<"),Un)Un.hasOwnProperty(S)&&Un[S].objectNumber>=0&&ge("/"+S+" "+Un[S].objectNumber+" 0 R");Mn.publish("putGStateDict"),ge(">>")}},Ds=function(S){hs(S.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),sa(),Gr(),mn(S.objectOid),Hr(),tr(),ge(">>"),ge("endobj")},ea=function(){var S=[];Bs(),ws(),wa(),Ns(S),Mn.publish("putResources"),S.forEach(Ds),Ds({resourcesOid:En,objectOid:Number.MAX_SAFE_INTEGER}),Mn.publish("postPutResources")},Yr=function(){Mn.publish("putAdditionalObjects");for(var S=0;S<Ue.length;S++){var q=Ue[S];hs(q.objId,!0),ge(q.content),ge("endobj")}Mn.publish("postPutAdditionalObjects")},wr=function(S){xn[S.fontName]=xn[S.fontName]||{},xn[S.fontName][S.fontStyle]=S.id},dr=function(S,q,Ee,Ae,Me){var et={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:S,fontName:q,fontStyle:Ee,encoding:Ae,isStandardFont:Me||!1,metadata:{}};return Mn.publish("addFont",{font:et,instance:this}),Gt[et.id]=et,wr(et),et.id},vs=function(S){for(var q=0,Ee=Pe.length;q<Ee;q++){var Ae=dr.call(this,S[q][0],S[q][1],S[q][2],Pe[q][3],!0);b===!1&&(v[Ae]=!0);var Me=S[q][0].split("-");wr({id:Ae,fontName:Me[0],fontStyle:Me[1]||""})}Mn.publish("addFonts",{fonts:Gt,dictionary:xn})},Ia=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(Ae){var q=Ae.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var Ee="Error in function "+q.split(`
`)[0].split("<")[0]+": "+Ae.message;if(!Dn.console)throw new Error(Ee);Dn.console.error(Ee,Ae),Dn.alert&&alert(Ee)}},S.foo.bar=S,S.foo},li=function(S,q){var Ee,Ae,Me,et,vt,Vt,Jt,pn,wn;if(Me=(q=q||{}).sourceEncoding||"Unicode",vt=q.outputEncoding,(q.autoencode||vt)&&Gt[Lt].metadata&&Gt[Lt].metadata[Me]&&Gt[Lt].metadata[Me].encoding&&(et=Gt[Lt].metadata[Me].encoding,!vt&&Gt[Lt].encoding&&(vt=Gt[Lt].encoding),!vt&&et.codePages&&(vt=et.codePages[0]),typeof vt=="string"&&(vt=et[vt]),vt)){for(Jt=!1,Vt=[],Ee=0,Ae=S.length;Ee<Ae;Ee++)(pn=vt[S.charCodeAt(Ee)])?Vt.push(String.fromCharCode(pn)):Vt.push(S[Ee]),Vt[Ee].charCodeAt(0)>>8&&(Jt=!0);S=Vt.join("")}for(Ee=S.length;Jt===void 0&&Ee!==0;)S.charCodeAt(Ee-1)>>8&&(Jt=!0),Ee--;if(!Jt)return S;for(Vt=q.noBOM?[]:[254,255],Ee=0,Ae=S.length;Ee<Ae;Ee++){if((wn=(pn=S.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(wn),Vt.push(pn-(wn<<8))}return String.fromCharCode.apply(void 0,Vt)},cs=T.__private__.pdfEscape=T.pdfEscape=function(S,q){return li(S,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qr=T.__private__.beginPage=function(S){we[++ls]=[],un[ls]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Er(ls),je(we[k])},_i=function(S,q){var Ee,Ae,Me;switch(t=q||t,typeof S=="string"&&(Ee=I(S.toLowerCase()),Array.isArray(Ee)&&(Ae=Ee[0],Me=Ee[1])),Array.isArray(S)&&(Ae=S[0]*pe,Me=S[1]*pe),isNaN(Ae)&&(Ae=r[0],Me=r[1]),(Ae>14400||Me>14400)&&(na.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ae=Math.min(14400,Ae),Me=Math.min(14400,Me)),r=[Ae,Me],t.substr(0,1)){case"l":Me>Ae&&(r=[Me,Ae]);break;case"p":Ae>Me&&(r=[Me,Ae])}qr(r),Pi(_r),ge(mt),Kn!==0&&ge(Kn+" J"),Xn!==0&&ge(Xn+" j"),Mn.publish("addPage",{pageNumber:ls})},bi=function(S){S>0&&S<=ls&&(we.splice(S,1),un.splice(S,1),ls--,k>ls&&(k=ls),this.setPage(k))},Er=function(S){S>0&&S<=ls&&(k=S)},ci=T.__private__.getNumberOfPages=T.getNumberOfPages=function(){return we.length-1},Ti=function(S,q,Ee){var Ae,Me=void 0;return Ee=Ee||{},S=S!==void 0?S:Gt[Lt].fontName,q=q!==void 0?q:Gt[Lt].fontStyle,Ae=S.toLowerCase(),xn[Ae]!==void 0&&xn[Ae][q]!==void 0?Me=xn[Ae][q]:xn[S]!==void 0&&xn[S][q]!==void 0?Me=xn[S][q]:Ee.disableWarning===!1&&na.warn("Unable to look up font label for font '"+S+"', '"+q+"'. Refer to getFontList() for available fonts."),Me||Ee.noFallback||(Me=xn.times[q])==null&&(Me=xn.times.normal),Me},za=T.__private__.putInfo=function(){var S=Rn(),q=function(Ae){return Ae};for(var Ee in _!==null&&(q=bt.encryptor(S,0)),ge("<<"),ge("/Producer ("+cs(q("jsPDF "+Nn.version))+")"),We)We.hasOwnProperty(Ee)&&We[Ee]&&ge("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+cs(q(We[Ee]))+")");ge("/CreationDate ("+cs(q(Te))+")"),ge(">>"),ge("endobj")},ui=T.__private__.putCatalog=function(S){var q=(S=S||{}).rootDictionaryObjId||Ca;switch(Rn(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+q+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+it;Ee.substr(Ee.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+xe(it)+"]")}switch(Ft||(Ft="continuous"),Ft){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}Pt&&ge("/PageMode /"+Pt),Mn.publish("putCatalog"),ge(">>"),ge("endobj")},Ir=T.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(fe+1)),ge("/Root "+fe+" 0 R"),ge("/Info "+(fe-1)+" 0 R"),_!==null&&ge("/Encrypt "+bt.oid+" 0 R"),ge("/ID [ <"+G+"> <"+G+"> ]"),ge(">>")},Da=T.__private__.putHeader=function(){ge("%PDF-"+C),ge("%")},Ni=T.__private__.putXRef=function(){var S="0000000000";ge("xref"),ge("0 "+(fe+1)),ge("0000000000 65535 f ");for(var q=1;q<=fe;q++)typeof ve[q]=="function"?ge((S+ve[q]()).slice(-10)+" 00000 n "):ve[q]!==void 0?ge((S+ve[q]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},be=T.__private__.buildDocument=function(){Qe(),je(de),Mn.publish("buildDocument"),Da(),La(),Yr(),ea(),_!==null&&Ta(),za(),ui();var S=Ne;return Ni(),Ir(),ge("startxref"),ge(""+S),ge("%%EOF"),je(we[k]),de.join(`
`)},Re=T.__private__.getBlob=function(S){return new Blob([ut(S)],{type:"application/pdf"})},ze=T.output=T.__private__.output=Ia(function(S,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",S){case void 0:return be();case"save":T.save(q.filename);break;case"arraybuffer":return ut(be());case"blob":return Re(be());case"bloburi":case"bloburl":if(Dn.URL!==void 0&&typeof Dn.URL.createObjectURL=="function")return Dn.URL&&Dn.URL.createObjectURL(Re(be()))||void 0;na.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",Ae=be();try{Ee=cp(Ae)}catch{Ee=cp(unescape(encodeURIComponent(Ae)))}return"data:application/pdf;filename="+q.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dn)==="[object Window]"){var Me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",et=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Me=q.pdfObjectUrl,et="");var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Me+'"'+et+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Vt=Dn.open();return Vt!==null&&Vt.document.write(vt),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dn)==="[object Window]"){var Jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',pn=Dn.open();if(pn!==null){pn.document.write(Jt);var wn=this;pn.document.documentElement.querySelector("#pdfViewer").onload=function(){pn.document.title=q.filename,pn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wn.output("bloburl"))}}return pn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',Ks=Dn.open();if(Ks!==null&&(Ks.document.write(as),Ks.document.title=q.filename),Ks||typeof safari>"u")return Ks;break;case"datauri":case"dataurl":return Dn.document.location.href=this.output("datauristring",q);default:return null}}),dt=function(S){return Array.isArray(qa)===!0&&qa.indexOf(S)>-1};switch(s){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=dt("px_scaling")==1?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);pe=s}var bt=null;ce(),ue();var Dt=function(S){return _!==null?bt.encryptor(S,0):function(q){return q}},wt=T.__private__.getPageInfo=T.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:un[S].objId,pageNumber:S,pageContext:un[S]}},xt=T.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in un)if(un[q].objId===S)break;return wt(q)},Zt=T.__private__.getCurrentPageInfo=T.getCurrentPageInfo=function(){return{objId:un[k].objId,pageNumber:k,pageContext:un[k]}};T.addPage=function(){return _i.apply(this,arguments),this},T.setPage=function(){return Er.apply(this,arguments),je.call(this,we[k]),this},T.insertPage=function(S){return this.addPage(),this.movePage(k,S),this},T.movePage=function(S,q){var Ee,Ae;if(S>q){Ee=we[S],Ae=un[S];for(var Me=S;Me>q;Me--)we[Me]=we[Me-1],un[Me]=un[Me-1];we[q]=Ee,un[q]=Ae,this.setPage(q)}else if(S<q){Ee=we[S],Ae=un[S];for(var et=S;et<q;et++)we[et]=we[et+1],un[et]=un[et+1];we[q]=Ee,un[q]=Ae,this.setPage(q)}return this},T.deletePage=function(){return bi.apply(this,arguments),this},T.__private__.text=T.text=function(S,q,Ee,Ae,Me){var et,vt,Vt,Jt,pn,wn,as,Ks,Xs,ma=(Ae=Ae||{}).scope||this;if(typeof S=="number"&&typeof q=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var Hs=Ee;Ee=q,q=S,S=Hs}if(arguments[3]instanceof Xt?(J("The transform parameter of text() with a Matrix value"),Xs=Me):(Vt=arguments[4],Jt=arguments[5],$s(as=arguments[3])==="object"&&as!==null||(typeof Vt=="string"&&(Jt=Vt,Vt=null),typeof as=="string"&&(Jt=as,as=null),typeof as=="number"&&(Vt=as,as=null),Ae={flags:as,angle:Vt,align:Jt})),isNaN(q)||isNaN(Ee)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return ma;var ja="",Rr=!1,hr=typeof Ae.lineHeightFactor=="number"?Ae.lineHeightFactor:sr,Or=ma.internal.scaleFactor;function qo(Zn){return Zn=Zn.split("	").join(Array(Ae.TabLen||9).join(" ")),cs(Zn,as)}function hi(Zn){for(var Jn,Fs=Zn.concat(),pa=[],Zr=Fs.length;Zr--;)typeof(Jn=Fs.shift())=="string"?pa.push(Jn):Array.isArray(Zn)&&(Jn.length===1||Jn[1]===void 0&&Jn[2]===void 0)?pa.push(Jn[0]):pa.push([Jn[0],Jn[1],Jn[2]]);return pa}function mi(Zn,Jn){var Fs;if(typeof Zn=="string")Fs=Jn(Zn)[0];else if(Array.isArray(Zn)){for(var pa,Zr,io=Zn.concat(),oo=[],Ui=io.length;Ui--;)typeof(pa=io.shift())=="string"?oo.push(Jn(pa)[0]):Array.isArray(pa)&&typeof pa[0]=="string"&&(Zr=Jn(pa[0],pa[1],pa[2]),oo.push([Zr[0],Zr[1],Zr[2]]));Fs=oo}return Fs}var Ji=!1,$r=!0;if(typeof S=="string")Ji=!0;else if(Array.isArray(S)){var zo=S.concat();vt=[];for(var Qi,Na=zo.length;Na--;)(typeof(Qi=zo.shift())!="string"||Array.isArray(Qi)&&typeof Qi[0]!="string")&&($r=!1);Ji=$r}if(Ji===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var ki=nt/ma.internal.scaleFactor,ji=ki*(hr-1);switch(Ae.baseline){case"bottom":Ee-=ji;break;case"top":Ee+=ki-ji;break;case"hanging":Ee+=ki-2*ji;break;case"middle":Ee+=ki/2-ji}if((wn=Ae.maxWidth||0)>0&&(typeof S=="string"?S=ma.splitTextToSize(S,wn):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Zn,Jn){return Zn.concat(ma.splitTextToSize(Jn,wn))},[]))),et={text:S,x:q,y:Ee,options:Ae,mutex:{pdfEscape:cs,activeFontKey:Lt,fonts:Gt,activeFontSize:nt}},Mn.publish("preProcessText",et),S=et.text,Vt=(Ae=et.options).angle,!(Xs instanceof Xt)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,Ae.rotationDirection===0&&(Vt=-Vt),O===j.ADVANCED&&(Vt=-Vt);var bo=Math.cos(Vt),$o=Math.sin(Vt);Xs=new Xt(bo,$o,-$o,bo,0,0)}else Vt&&Vt instanceof Xt&&(Xs=Vt);O!==j.ADVANCED||Xs||(Xs=kn),(pn=Ae.charSpace||$t)!==void 0&&(ja+=ee(H(pn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ks=Ae.horizontalScale)!==void 0&&(ja+=ee(100*Ks)+` Tz
`),Ae.lang;var mr=-1,Ac=Ae.renderingMode!==void 0?Ae.renderingMode:Ae.stroke,gl=ma.internal.getCurrentPageInfo().pageContext;switch(Ac){case 0:case!1:case"fill":mr=0;break;case 1:case!0:case"stroke":mr=1;break;case 2:case"fillThenStroke":mr=2;break;case 3:case"invisible":mr=3;break;case 4:case"fillAndAddForClipping":mr=4;break;case 5:case"strokeAndAddPathForClipping":mr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":mr=6;break;case 7:case"addToPathForClipping":mr=7}var Fl=gl.usedRenderingMode!==void 0?gl.usedRenderingMode:-1;mr!==-1?ja+=mr+` Tr
`:Fl!==-1&&(ja+=`0 Tr
`),mr!==-1&&(gl.usedRenderingMode=mr),Jt=Ae.align||"left";var Wr,Ba=nt*hr,eo=ma.internal.pageSize.getWidth(),xl=Gt[Lt];pn=Ae.charSpace||$t,wn=Ae.maxWidth||0,as=Object.assign({autoencode:!0,noBOM:!0},Ae.flags);var vi=[],to=function(Zn){return ma.getStringUnitWidth(Zn,{font:xl,charSpace:pn,fontSize:nt,doKerning:!1})*nt/Or};if(Object.prototype.toString.call(S)==="[object Array]"){var pr;vt=hi(S),Jt!=="left"&&(Wr=vt.map(to));var va,Kr=0;if(Jt==="right"){q-=Wr[0],S=[],Na=vt.length;for(var Ua=0;Ua<Na;Ua++)Ua===0?(va=tt(q),pr=Xe(Ee)):(va=H(Kr-Wr[Ua]),pr=-Ba),S.push([vt[Ua],va,pr]),Kr=Wr[Ua]}else if(Jt==="center"){q-=Wr[0]/2,S=[],Na=vt.length;for(var Nr=0;Nr<Na;Nr++)Nr===0?(va=tt(q),pr=Xe(Ee)):(va=H((Kr-Wr[Nr])/2),pr=-Ba),S.push([vt[Nr],va,pr]),Kr=Wr[Nr]}else if(Jt==="left"){S=[],Na=vt.length;for(var Xr=0;Xr<Na;Xr++)S.push(vt[Xr])}else if(Jt==="justify"&&xl.encoding==="Identity-H"){S=[],Na=vt.length,wn=wn!==0?wn:eo;for(var Pr=0,Us=0;Us<Na;Us++)if(pr=Us===0?Xe(Ee):-Ba,va=Us===0?tt(q):Pr,Us<Na-1){var ar=H((wn-Wr[Us])/(vt[Us].split(" ").length-1)),ya=vt[Us].split(" ");S.push([ya[0]+" ",va,pr]),Pr=0;for(var vr=1;vr<ya.length;vr++){var To=(to(ya[vr-1]+" "+ya[vr])-to(ya[vr]))*Or+ar;vr==ya.length-1?S.push([ya[vr],To,0]):S.push([ya[vr]+" ",To,0]),Pr-=To}}else S.push([vt[Us],va,pr]);S.push(["",Pr,0])}else{if(Jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Na=vt.length,wn=wn!==0?wn:eo,Us=0;Us<Na;Us++)pr=Us===0?Xe(Ee):-Ba,va=Us===0?tt(q):0,Us<Na-1?vi.push(ee(H((wn-Wr[Us])/(vt[Us].split(" ").length-1)))):vi.push(0),S.push([vt[Us],va,pr])}}var yi=typeof Ae.R2L=="boolean"?Ae.R2L:Nt;yi===!0&&(S=mi(S,function(Zn,Jn,Fs){return[Zn.split("").reverse().join(""),Jn,Fs]})),et={text:S,x:q,y:Ee,options:Ae,mutex:{pdfEscape:cs,activeFontKey:Lt,fonts:Gt,activeFontSize:nt}},Mn.publish("postProcessText",et),S=et.text,Rr=et.mutex.isHex||!1;var Wo=Gt[Lt].encoding;Wo!=="WinAnsiEncoding"&&Wo!=="StandardEncoding"||(S=mi(S,function(Zn,Jn,Fs){return[qo(Zn),Jn,Fs]})),vt=hi(S),S=[];for(var no,so,ao,No=0,Ko=1,ro=Array.isArray(vt[0])?Ko:No,Bi="",vo=function(Zn,Jn,Fs){var pa="";return Fs instanceof Xt?(Fs=typeof Ae.angle=="number"?Ln(Fs,new Xt(1,0,0,1,Zn,Jn)):Ln(new Xt(1,0,0,1,Zn,Jn),Fs),O===j.ADVANCED&&(Fs=Ln(new Xt(1,0,0,-1,0,0),Fs)),pa=Fs.join(" ")+` Tm
`):pa=ee(Zn)+" "+ee(Jn)+` Td
`,pa},ra=0;ra<vt.length;ra++){switch(Bi="",ro){case Ko:ao=(Rr?"<":"(")+vt[ra][0]+(Rr?">":")"),no=parseFloat(vt[ra][1]),so=parseFloat(vt[ra][2]);break;case No:ao=(Rr?"<":"(")+vt[ra]+(Rr?">":")"),no=tt(q),so=Xe(Ee)}vi!==void 0&&vi[ra]!==void 0&&(Bi=vi[ra]+` Tw
`),ra===0?S.push(Bi+vo(no,so,Xs)+ao):ro===No?S.push(Bi+ao):ro===Ko&&S.push(Bi+vo(no,so,Xs)+ao)}S=ro===No?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Mr=`BT
/`;return Mr+=Lt+" "+nt+` Tf
`,Mr+=ee(nt*hr)+` TL
`,Mr+=kt+`
`,Mr+=ja,Mr+=S,ge(Mr+="ET"),v[Lt]=!0,ma};var _n=T.__private__.clip=T.clip=function(S){return ge(S==="evenodd"?"W*":"W"),this};T.clipEvenOdd=function(){return _n("evenodd")},T.__private__.discardPath=T.discardPath=function(){return ge("n"),this};var on=T.__private__.isValidStyle=function(S){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(q=!0),q};T.__private__.setDefaultPathOperation=T.setDefaultPathOperation=function(S){return on(S)&&(h=S),this};var ts=T.__private__.getStyle=T.getStyle=function(S){var q=h;switch(S){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=S}return q},Yn=T.close=function(){return ge("h"),this};T.stroke=function(){return ge("S"),this},T.fill=function(S){return jn("f",S),this},T.fillEvenOdd=function(S){return jn("f*",S),this},T.fillStroke=function(S){return jn("B",S),this},T.fillStrokeEvenOdd=function(S){return jn("B*",S),this};var jn=function(S,q){$s(q)==="object"?zr(q,S):ge(S)},yn=function(S){S===null||O===j.ADVANCED&&S===void 0||(S=ts(S),ge(S))};function Dr(S,q,Ee,Ae,Me){var et=new ku(q||this.boundingBox,Ee||this.xStep,Ae||this.yStep,this.gState,Me||this.matrix);et.stream=this.stream;var vt=S+"$$"+this.cloneIndex+++"$$";return Fn(vt,et),et}var zr=function(S,q){var Ee=Ws[S.key],Ae=Cn[Ee];if(Ae instanceof zc)ge("q"),ge(fr(q)),Ae.gState&&T.setGState(Ae.gState),ge(S.matrix.toString()+" cm"),ge("/"+Ee+" sh"),ge("Q");else if(Ae instanceof ku){var Me=new Xt(1,0,0,-1,0,Mi());S.matrix&&(Me=Me.multiply(S.matrix||kn),Ee=Dr.call(Ae,S.key,S.boundingBox,S.xStep,S.yStep,Me).id),ge("q"),ge("/Pattern cs"),ge("/"+Ee+" scn"),Ae.gState&&T.setGState(Ae.gState),ge(q),ge("Q")}},fr=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},di=T.moveTo=function(S,q){return ge(ee(H(S))+" "+ee(K(q))+" m"),this},nr=T.lineTo=function(S,q){return ge(ee(H(S))+" "+ee(K(q))+" l"),this},fi=T.curveTo=function(S,q,Ee,Ae,Me,et){return ge([ee(H(S)),ee(K(q)),ee(H(Ee)),ee(K(Ae)),ee(H(Me)),ee(K(et)),"c"].join(" ")),this};T.__private__.line=T.line=function(S,q,Ee,Ae,Me){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||!on(Me))throw new Error("Invalid arguments passed to jsPDF.line");return O===j.COMPAT?this.lines([[Ee-S,Ae-q]],S,q,[1,1],Me||"S"):this.lines([[Ee-S,Ae-q]],S,q,[1,1]).stroke()},T.__private__.lines=T.lines=function(S,q,Ee,Ae,Me,et){var vt,Vt,Jt,pn,wn,as,Ks,Xs,ma,Hs,ja,Rr;if(typeof S=="number"&&(Rr=Ee,Ee=q,q=S,S=Rr),Ae=Ae||[1,1],et=et||!1,isNaN(q)||isNaN(Ee)||!Array.isArray(S)||!Array.isArray(Ae)||!on(Me)||typeof et!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(di(q,Ee),vt=Ae[0],Vt=Ae[1],pn=S.length,Hs=q,ja=Ee,Jt=0;Jt<pn;Jt++)(wn=S[Jt]).length===2?(Hs=wn[0]*vt+Hs,ja=wn[1]*Vt+ja,nr(Hs,ja)):(as=wn[0]*vt+Hs,Ks=wn[1]*Vt+ja,Xs=wn[2]*vt+Hs,ma=wn[3]*Vt+ja,Hs=wn[4]*vt+Hs,ja=wn[5]*Vt+ja,fi(as,Ks,Xs,ma,Hs,ja));return et&&Yn(),yn(Me),this},T.path=function(S){for(var q=0;q<S.length;q++){var Ee=S[q],Ae=Ee.c;switch(Ee.op){case"m":di(Ae[0],Ae[1]);break;case"l":nr(Ae[0],Ae[1]);break;case"c":fi.apply(this,Ae);break;case"h":Yn()}}return this},T.__private__.rect=T.rect=function(S,q,Ee,Ae,Me){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||!on(Me))throw new Error("Invalid arguments passed to jsPDF.rect");return O===j.COMPAT&&(Ae=-Ae),ge([ee(H(S)),ee(K(q)),ee(H(Ee)),ee(H(Ae)),"re"].join(" ")),yn(Me),this},T.__private__.triangle=T.triangle=function(S,q,Ee,Ae,Me,et,vt){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||isNaN(Me)||isNaN(et)||!on(vt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-S,Ae-q],[Me-Ee,et-Ae],[S-Me,q-et]],S,q,[1,1],vt,!0),this},T.__private__.roundedRect=T.roundedRect=function(S,q,Ee,Ae,Me,et,vt){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||isNaN(Me)||isNaN(et)||!on(vt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return Me=Math.min(Me,.5*Ee),et=Math.min(et,.5*Ae),this.lines([[Ee-2*Me,0],[Me*Vt,0,Me,et-et*Vt,Me,et],[0,Ae-2*et],[0,et*Vt,-Me*Vt,et,-Me,et],[2*Me-Ee,0],[-Me*Vt,0,-Me,-et*Vt,-Me,-et],[0,2*et-Ae],[0,-et*Vt,Me*Vt,-et,Me,-et]],S+Me,q,[1,1],vt,!0),this},T.__private__.ellipse=T.ellipse=function(S,q,Ee,Ae,Me){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||!on(Me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var et=4/3*(Math.SQRT2-1)*Ee,vt=4/3*(Math.SQRT2-1)*Ae;return di(S+Ee,q),fi(S+Ee,q-vt,S+et,q-Ae,S,q-Ae),fi(S-et,q-Ae,S-Ee,q-vt,S-Ee,q),fi(S-Ee,q+vt,S-et,q+Ae,S,q+Ae),fi(S+et,q+Ae,S+Ee,q+vt,S+Ee,q),yn(Me),this},T.__private__.circle=T.circle=function(S,q,Ee,Ae){if(isNaN(S)||isNaN(q)||isNaN(Ee)||!on(Ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,q,Ee,Ee,Ae)},T.setFont=function(S,q,Ee){return Ee&&(q=Z(q,Ee)),Lt=Ti(S,q,{disableWarning:!1}),this};var fa=T.__private__.getFont=T.getFont=function(){return Gt[Ti.apply(T,arguments)]};T.__private__.getFontList=T.getFontList=function(){var S,q,Ee={};for(S in xn)if(xn.hasOwnProperty(S))for(q in Ee[S]=[],xn[S])xn[S].hasOwnProperty(q)&&Ee[S].push(q);return Ee},T.addFont=function(S,q,Ee,Ae,Me){var et=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&et.indexOf(arguments[3])!==-1?Me=arguments[3]:arguments[3]&&et.indexOf(arguments[3])==-1&&(Ee=Z(Ee,Ae)),Me=Me||"Identity-H",dr.call(this,S,q,Ee,Me)};var sr,_r=n.lineWidth||.200025,br=T.__private__.getLineWidth=T.getLineWidth=function(){return _r},Pi=T.__private__.setLineWidth=T.setLineWidth=function(S){return _r=S,ge(ee(H(S))+" w"),this};T.__private__.setLineDash=Nn.API.setLineDash=Nn.API.setLineDashPattern=function(S,q){if(S=S||[],q=q||0,isNaN(q)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(Ee){return ee(H(Ee))}).join(" "),q=ee(H(q)),ge("["+S+"] "+q+" d"),this};var Zi=T.__private__.getLineHeight=T.getLineHeight=function(){return nt*sr};T.__private__.getLineHeight=T.getLineHeight=function(){return nt*sr};var le=T.__private__.setLineHeightFactor=T.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(sr=S),this},_e=T.__private__.getLineHeightFactor=T.getLineHeightFactor=function(){return sr};le(n.lineHeight);var tt=T.__private__.getHorizontalCoordinate=function(S){return H(S)},Xe=T.__private__.getVerticalCoordinate=function(S){return O===j.ADVANCED?S:un[k].mediaBox.topRightY-un[k].mediaBox.bottomLeftY-H(S)},rt=T.__private__.getHorizontalCoordinateString=T.getHorizontalCoordinateString=function(S){return ee(tt(S))},_t=T.__private__.getVerticalCoordinateString=T.getVerticalCoordinateString=function(S){return ee(Xe(S))},mt=n.strokeColor||"0 G";T.__private__.getStrokeColor=T.getDrawColor=function(){return bs(mt)},T.__private__.setStrokeColor=T.setDrawColor=function(S,q,Ee,Ae){return mt=Qt({ch1:S,ch2:q,ch3:Ee,ch4:Ae,pdfColorType:"draw",precision:2}),ge(mt),this};var Bt=n.fillColor||"0 g";T.__private__.getFillColor=T.getFillColor=function(){return bs(Bt)},T.__private__.setFillColor=T.setFillColor=function(S,q,Ee,Ae){return Bt=Qt({ch1:S,ch2:q,ch3:Ee,ch4:Ae,pdfColorType:"fill",precision:2}),ge(Bt),this};var kt=n.textColor||"0 g",Ct=T.__private__.getTextColor=T.getTextColor=function(){return bs(kt)};T.__private__.setTextColor=T.setTextColor=function(S,q,Ee,Ae){return kt=Qt({ch1:S,ch2:q,ch3:Ee,ch4:Ae,pdfColorType:"text",precision:3}),this};var $t=n.charSpace,Bn=T.__private__.getCharSpace=T.getCharSpace=function(){return parseFloat($t||0)};T.__private__.setCharSpace=T.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $t=S,this};var Kn=0;T.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},T.__private__.setLineCap=T.setLineCap=function(S){var q=T.CapJoinStyles[S];if(q===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kn=q,ge(q+" J"),this};var Xn=0;T.__private__.setLineJoin=T.setLineJoin=function(S){var q=T.CapJoinStyles[S];if(q===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xn=q,ge(q+" j"),this},T.__private__.setLineMiterLimit=T.__private__.setMiterLimit=T.setLineMiterLimit=T.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(ee(H(S))+" M"),this},T.GState=Uh,T.setGState=function(S){(S=typeof S=="string"?Un[js[S]]:zn(null,S)).equals(ln)||(ge("/"+S.id+" gs"),ln=S)};var zn=function(S,q){if(!S||!js[S]){var Ee=!1;for(var Ae in Un)if(Un.hasOwnProperty(Ae)&&Un[Ae].equals(q)){Ee=!0;break}if(Ee)q=Un[Ae];else{var Me="GS"+(Object.keys(Un).length+1).toString(10);Un[Me]=q,q.id=Me}return S&&(js[S]=q.id),Mn.publish("addGState",q),q}};T.addGState=function(S,q){return zn(S,q),this},T.saveGraphicsState=function(){return ge("q"),rs.push({key:Lt,size:nt,color:kt}),this},T.restoreGraphicsState=function(){ge("Q");var S=rs.pop();return Lt=S.key,nt=S.size,kt=S.color,ln=null,this},T.setCurrentTransformationMatrix=function(S){return ge(S.toString()+" cm"),this},T.comment=function(S){return ge("#"+S),this};var ha=function(S,q){var Ee=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(et){isNaN(et)||(Ee=parseFloat(et))}});var Ae=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ae},set:function(et){isNaN(et)||(Ae=parseFloat(et))}});var Me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Me},set:function(et){Me=et.toString()}}),this},bn=function(S,q,Ee,Ae){ha.call(this,S,q),this.type="rect";var Me=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Me},set:function(vt){isNaN(vt)||(Me=parseFloat(vt))}});var et=Ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return et},set:function(vt){isNaN(vt)||(et=parseFloat(vt))}}),this},Gs=function(){this.page=ls,this.currentPage=k,this.pages=we.slice(0),this.pagesContext=un.slice(0),this.x=yt,this.y=At,this.matrix=Kt,this.width=Tr(k),this.height=Mi(k),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Gs.prototype.restore=function(){ls=this.page,k=this.currentPage,un=this.pagesContext,we=this.pages,yt=this.x,At=this.y,Kt=this.matrix,Yo(k,this.width),_o(k,this.height),Ze=this.outputDestination};var aa=function(S,q,Ee,Ae,Me){vn.push(new Gs),ls=k=0,we=[],yt=S,At=q,Kt=Me,qr([Ee,Ae])},dn=function(S){if(ca[S])vn.pop().restore();else{var q=new Gs,Ee="Xo"+(Object.keys(gs).length+1).toString(10);q.id=Ee,ca[S]=Ee,gs[Ee]=q,Mn.publish("addFormObject",q),vn.pop().restore()}};for(var ys in T.beginFormObject=function(S,q,Ee,Ae,Me){return aa(S,q,Ee,Ae,Me),this},T.endFormObject=function(S){return dn(S),this},T.doFormObject=function(S,q){var Ee=gs[ca[S]];return ge("q"),ge(q.toString()+" cm"),ge("/"+Ee.id+" Do"),ge("Q"),this},T.getFormObject=function(S){var q=gs[ca[S]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},T.save=function(S,q){return S=S||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(qc(Re(be()),S),typeof qc.unload=="function"&&Dn.setTimeout&&setTimeout(qc.unload,911),this):new Promise(function(Ee,Ae){try{var Me=qc(Re(be()),S);typeof qc.unload=="function"&&Dn.setTimeout&&setTimeout(qc.unload,911),Ee(Me)}catch(et){Ae(et.message)}})},Nn.API)Nn.API.hasOwnProperty(ys)&&(ys==="events"&&Nn.API.events.length?function(S,q){var Ee,Ae,Me;for(Me=q.length-1;Me!==-1;Me--)Ee=q[Me][0],Ae=q[Me][1],S.subscribe.apply(S,[Ee].concat(typeof Ae=="function"?[Ae]:Ae))}(Mn,Nn.API.events):T[ys]=Nn.API[ys]);var Tr=T.getPageWidth=function(S){return(un[S=S||k].mediaBox.topRightX-un[S].mediaBox.bottomLeftX)/pe},Yo=T.setPageWidth=function(S,q){un[S].mediaBox.topRightX=q*pe+un[S].mediaBox.bottomLeftX},Mi=T.getPageHeight=function(S){return(un[S=S||k].mediaBox.topRightY-un[S].mediaBox.bottomLeftY)/pe},_o=T.setPageHeight=function(S,q){un[S].mediaBox.topRightY=q*pe+un[S].mediaBox.bottomLeftY};return T.internal={pdfEscape:cs,getStyle:ts,getFont:fa,getFontSize:st,getCharSpace:Bn,getTextColor:Ct,getLineHeight:Zi,getLineHeightFactor:_e,getLineWidth:br,write:Fe,getHorizontalCoordinate:tt,getVerticalCoordinate:Xe,getCoordinateString:rt,getVerticalCoordinateString:_t,collections:{},newObject:Rn,newAdditionalObject:er,newObjectDeferred:_s,newObjectDeferredBegin:hs,getFilters:Ls,putStream:Ts,events:Mn,scaleFactor:pe,pageSize:{getWidth:function(){return Tr(k)},setWidth:function(S){Yo(k,S)},getHeight:function(){return Mi(k)},setHeight:function(S){_o(k,S)}},encryptionOptions:_,encryption:bt,getEncryptor:Dt,output:ze,getNumberOfPages:ci,pages:we,out:ge,f2:xe,f3:F,getPageInfo:wt,getPageInfoByObjId:xt,getCurrentPageInfo:Zt,getPDFVersion:L,Point:ha,Rectangle:bn,Matrix:Xt,hasHotfix:dt},Object.defineProperty(T.internal.pageSize,"width",{get:function(){return Tr(k)},set:function(S){Yo(k,S)},enumerable:!0,configurable:!0}),Object.defineProperty(T.internal.pageSize,"height",{get:function(){return Mi(k)},set:function(S){_o(k,S)},enumerable:!0,configurable:!0}),vs.call(T,Pe),Lt="F1",_i(r,t),Mn.publish("initialized"),T}Ou.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ou.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ou.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ou.prototype.processOwnerPassword=function(n,e){return dp(up(e).substr(0,5),n)},Ou.prototype.encryptor=function(n,e){var t=up(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return dp(t,s)}},Uh.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||$s(n)!==$s(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Nn.API={events:[]},Nn.version="3.0.1";var Ha=Nn.API,Op=1,Qc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qn=function(n){return n.toFixed(2)},mc=function(n){return n.toFixed(5)};Ha.__acroform__={};var Oi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},zE=function(n){return n*Op},ol=function(n){var e=new C_,t=tn.internal.getHeight(n)||0,s=tn.internal.getWidth(n)||0;return e.BBox=[0,0,Number(qn(s)),Number(qn(t))],e},HI=Ha.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},YI=Ha.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},qI=Ha.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},Za=Ha.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qI(n,e-1)},Ja=Ha.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return HI(n,e-1)},Qa=Ha.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return YI(n,e-1)},zI=Ha.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,r=n[0],i=n[1],c=n[2],d=n[3],f={};return f.lowerLeft_X=t(r)||0,f.lowerLeft_Y=s(i+d)||0,f.upperRight_X=t(r+c)||0,f.upperRight_Y=s(i)||0,[Number(qn(f.lowerLeft_X)),Number(qn(f.lowerLeft_Y)),Number(qn(f.upperRight_X)),Number(qn(f.upperRight_Y))]},$I=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=fp(n,t),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+r+" "+qn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=ol(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},fp=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=n.multiline?r.map(function(F){return F.split(`
`)}):r.map(function(F){return[F]});var i=t,c=tn.internal.getHeight(n)||0;c=c<0?-c:c;var d=tn.internal.getWidth(n)||0;d=d<0?-d:d;var f=function(F,H,re){if(F+1<r.length){var K=H+" "+r[F+1][0];return lh(K,n,re).width<=d-4}return!1};i++;e:for(;i>0;){e="",i--;var h,_,b=lh("3",n,i).height,v=n.multiline?c-i:(c-b)/2,T=v+=2,C=0,L=0,R=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+lh(e,n,i=12).width+", FieldWidth:"+d+`
`;break}for(var I="",j=0,O=0;O<r.length;O++)if(r.hasOwnProperty(O)){var U=!1;if(r[O].length!==1&&R!==r[O].length-1){if((b+2)*(j+2)+2>c)continue e;I+=r[O][R],U=!0,L=O,O--}else{I=(I+=r[O][R]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var se=parseInt(O),Z=f(se,I,i),ee=O>=r.length-1;if(Z&&!ee){I+=" ",R=0;continue}if(Z||ee){if(ee)L=se;else if(n.multiline&&(b+2)*(j+2)+2>c)continue e}else{if(!n.multiline||(b+2)*(j+2)+2>c)continue e;L=se}}for(var J="",oe=C;oe<=L;oe++){var xe=r[oe];if(n.multiline){if(oe===L){J+=xe[R]+" ",R=(R+1)%xe.length;continue}if(oe===C){J+=xe[xe.length-1]+" ";continue}}J+=xe[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,_=lh(J,n,i).width,n.textAlign){case"right":h=d-_-2;break;case"center":h=(d-_)/2;break;case"left":default:h=2}e+=qn(h)+" "+qn(T)+` Td
`,e+="("+Qc(J)+`) Tj
`,e+=-qn(h)+` 0 Td
`,T=-(i+2),_=0,C=U?L:L+1,j++,I=""}break}return s.text=e,s.fontSize=i,s},lh=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},WI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KI=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},XI=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var s=t,r=n[t];e.internal.newObjectDeferredBegin(r.objId,!0),$s(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete n[s]}},ZI=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Go.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(WI)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Op=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new L_,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in s)if(s.hasOwnProperty(r)){var i=s[r];i.objId=void 0,i.hasAnnotation&&KI(i,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,r){var i=!s;for(var c in s||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(c)){var d=s[c],f=[],h=d.Rect;if(d.Rect&&(d.Rect=zI(d.Rect,r)),r.internal.newObjectDeferredBegin(d.objId,!0),d.DA=tn.createDefaultAppearanceStream(d),$s(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(f=d.getKeyValueListForStream()),d.Rect=h,d.hasAppearanceStream&&!d.appearanceStreamContent){var _=$I(d);f.push({key:"AP",value:"<</N "+_+">>"}),r.internal.acroformPlugin.xForms.push(_)}if(d.appearanceStreamContent){var b="";for(var v in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(v)){var T=d.appearanceStreamContent[v];if(b+="/"+v+" ",b+="<<",Object.keys(T).length>=1||Array.isArray(T)){for(var c in T)if(T.hasOwnProperty(c)){var C=T[c];typeof C=="function"&&(C=C.call(r,d)),b+="/"+c+" "+C+" ",r.internal.acroformPlugin.xForms.indexOf(C)>=0||r.internal.acroformPlugin.xForms.push(C)}}else typeof(C=T)=="function"&&(C=C.call(r,d)),b+="/"+c+" "+C,r.internal.acroformPlugin.xForms.indexOf(C)>=0||r.internal.acroformPlugin.xForms.push(C);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}r.internal.putStream({additionalKeyValues:f,objectId:d.objId}),r.internal.out("endobj")}i&&XI(r.internal.acroformPlugin.xForms,r)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},S_=Ha.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(c){return c};if(Array.isArray(n)){for(var r="[",i=0;i<n.length;i++)switch(i!==0&&(r+=" "),$s(n[i])){case"boolean":case"number":case"object":r+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),r+="("+Qc(s(n[i].toString()))+")"):r+=n[i].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},y0=function(n,e,t){var s=function(r){return r};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Qc(s(n))+")"},ul=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ul.prototype.toString=function(){return this.objId+" 0 R"},ul.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ul.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],r=this[s];r&&(Array.isArray(r)?n.push({key:s,value:S_(r,this.objId,this.scope)}):r instanceof ul?(r.scope=this.scope,n.push({key:s,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:s,value:r}))}return n};var C_=function(){ul.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Oi(C_,ul);var L_=function(){ul.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Qc(t(n))+")"}},set:function(t){n=t}})};Oi(L_,ul);var Go=function n(){ul.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Za(e,3)},set:function(I){I?this.F=Ja(e,3):this.F=Qa(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');t=I}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(I){s=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(I){s[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(I){s[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(I){s[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(I){s[3]=I}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Fh)return;i="FieldObject"+n.FieldNum++}var I=function(j){return j};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+Qc(I(i))+")"},set:function(I){i=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(I){i=I}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(I){c=I}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(I){d=I}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(I){f=I}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Op:h},set:function(I){h=I}});var _="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return _},set:function(I){_=I}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Fh||this instanceof $c))return y0(b,this.objId,this.scope)},set:function(I){I=I.toString(),b=I}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Lr?v:y0(v,this.objId,this.scope)},set:function(I){I=I.toString(),v=this instanceof Lr?I:I.substr(0,1)==="("?Lu(I.substr(1,I.length-2)):Lu(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?Lu(v.substr(1,v.length-1)):v},set:function(I){I=I.toString(),v=this instanceof Lr?"/"+I:I}});var T=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(T)return T},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof Lr?T:y0(T,this.objId,this.scope)},set:function(I){I=I.toString(),T=this instanceof Lr?I:I.substr(0,1)==="("?Lu(I.substr(1,I.length-2)):Lu(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?Lu(T.substr(1,T.length-1)):T},set:function(I){I=I.toString(),T=this instanceof Lr?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(I){I=!!I,L=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(I){C=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,1)},set:function(I){I?this.Ff=Ja(this.Ff,1):this.Ff=Qa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,2)},set:function(I){I?this.Ff=Ja(this.Ff,2):this.Ff=Qa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,3)},set:function(I){I?this.Ff=Ja(this.Ff,3):this.Ff=Qa(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');R=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(R){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Oi(Go,ul);var Uu=function(){Go.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return S_(e,this.objId,this.scope)},set:function(t){var s,r;r=[],typeof(s=t)=="string"&&(r=function(i,c,d){d||(d=1);for(var f,h=[];f=c.exec(i);)h.push(f[d]);return h}(s,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,18)},set:function(t){t?this.Ff=Ja(this.Ff,18):this.Ff=Qa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ja(this.Ff,19):this.Ff=Qa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,20)},set:function(t){t?(this.Ff=Ja(this.Ff,20),e.sort()):this.Ff=Qa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,22)},set:function(t){t?this.Ff=Ja(this.Ff,22):this.Ff=Qa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,23)},set:function(t){t?this.Ff=Ja(this.Ff,23):this.Ff=Qa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,27)},set:function(t){t?this.Ff=Ja(this.Ff,27):this.Ff=Qa(this.Ff,27)}}),this.hasAppearanceStream=!1};Oi(Uu,Go);var Fu=function(){Uu.call(this),this.fontName="helvetica",this.combo=!1};Oi(Fu,Uu);var Vu=function(){Fu.call(this),this.combo=!0};Oi(Vu,Fu);var Th=function(){Vu.call(this),this.edit=!0};Oi(Th,Vu);var Lr=function(){Go.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,15)},set:function(t){t?this.Ff=Ja(this.Ff,15):this.Ff=Qa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,16)},set:function(t){t?this.Ff=Ja(this.Ff,16):this.Ff=Qa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,17)},set:function(t){t?this.Ff=Ja(this.Ff,17):this.Ff=Qa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,26)},set:function(t){t?this.Ff=Ja(this.Ff,26):this.Ff=Qa(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,r=[];for(s in r.push("<<"),e)r.push("/"+s+" ("+Qc(t(e[s]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){$s(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Oi(Lr,Go);var Nh=function(){Lr.call(this),this.pushButton=!0};Oi(Nh,Lr);var Gu=function(){Lr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Oi(Gu,Lr);var Fh=function(){var n,e;Go.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(d){return d};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var i,c=[];for(i in c.push("<<"),s)c.push("/"+i+" ("+Qc(r(s[i]))+")");return c.push(">>"),c.join(`
`)},set:function(r){$s(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oi(Fh,Go),Gu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Gu.prototype.createOption=function(n){var e=new Fh;return e.Parent=this,e.optionName=n,this.Kids.push(e),JI.call(this.scope,e),e};var vh=function(){Lr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tn.CheckBox.createAppearanceStream()};Oi(vh,Lr);var $c=function(){Go.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,13)},set:function(e){e?this.Ff=Ja(this.Ff,13):this.Ff=Qa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,21)},set:function(e){e?this.Ff=Ja(this.Ff,21):this.Ff=Qa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,23)},set:function(e){e?this.Ff=Ja(this.Ff,23):this.Ff=Qa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,24)},set:function(e){e?this.Ff=Ja(this.Ff,24):this.Ff=Qa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,25)},set:function(e){e?this.Ff=Ja(this.Ff,25):this.Ff=Qa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,26)},set:function(e){e?this.Ff=Ja(this.Ff,26):this.Ff=Qa(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oi($c,Go);var yh=function(){$c.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Za(this.Ff,14)},set:function(n){n?this.Ff=Ja(this.Ff,14):this.Ff=Qa(this.Ff,14)}}),this.password=!0};Oi(yh,$c);var tn={CheckBox:{createAppearanceStream:function(){return{N:{On:tn.CheckBox.YesNormal},D:{On:tn.CheckBox.YesPushDown,Off:tn.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=fp(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+qn(tn.internal.getWidth(n))+" "+qn(tn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+qn(i.fontSize)+" Tf "+r),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ol(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),r=[],i=tn.internal.getHeight(n),c=tn.internal.getWidth(n),d=fp(n,n.caption);return r.push("1 g"),r.push("0 0 "+qn(c)+" "+qn(i)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+qn(c-1)+" "+qn(i-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+qn(d.fontSize)+" Tf "+s),r.push(d.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+qn(tn.internal.getWidth(n))+" "+qn(tn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=tn.RadioButton.Circle.YesNormal,e.D[n]=tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ol(n);e.scope=n.scope;var t=[],s=tn.internal.getWidth(n)<=tn.internal.getHeight(n)?tn.internal.getWidth(n)/4:tn.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var r=tn.internal.Bezier_C,i=Number((s*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+mc(tn.internal.getWidth(n)/2)+" "+mc(tn.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[],s=tn.internal.getWidth(n)<=tn.internal.getHeight(n)?tn.internal.getWidth(n)/4:tn.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var r=Number((2*s).toFixed(5)),i=Number((r*tn.internal.Bezier_C).toFixed(5)),c=Number((s*tn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mc(tn.internal.getWidth(n)/2)+" "+mc(tn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+mc(tn.internal.getWidth(n)/2)+" "+mc(tn.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),t.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),t.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),t.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[],s=tn.internal.getWidth(n)<=tn.internal.getHeight(n)?tn.internal.getWidth(n)/4:tn.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var r=Number((2*s).toFixed(5)),i=Number((r*tn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mc(tn.internal.getWidth(n)/2)+" "+mc(tn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=tn.RadioButton.Cross.YesNormal,e.D[n]=tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ol(n);e.scope=n.scope;var t=[],s=tn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+qn(tn.internal.getWidth(n)-2)+" "+qn(tn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(qn(s.x1.x)+" "+qn(s.x1.y)+" m"),t.push(qn(s.x2.x)+" "+qn(s.x2.y)+" l"),t.push(qn(s.x4.x)+" "+qn(s.x4.y)+" m"),t.push(qn(s.x3.x)+" "+qn(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=tn.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+qn(tn.internal.getWidth(n))+" "+qn(tn.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+qn(tn.internal.getWidth(n)-2)+" "+qn(tn.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(qn(t.x1.x)+" "+qn(t.x1.y)+" m"),s.push(qn(t.x2.x)+" "+qn(t.x2.y)+" l"),s.push(qn(t.x4.x)+" "+qn(t.x4.y)+" m"),s.push(qn(t.x3.x)+" "+qn(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=ol(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+qn(tn.internal.getWidth(n))+" "+qn(tn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};tn.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=tn.internal.getWidth(n),t=tn.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},tn.internal.getWidth=function(n){var e=0;return $s(n)==="object"&&(e=zE(n.Rect[2])),e},tn.internal.getHeight=function(n){var e=0;return $s(n)==="object"&&(e=zE(n.Rect[3])),e};var JI=Ha.addField=function(n){if(ZI(this,n),!(n instanceof Go))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ha.AcroFormChoiceField=Uu,Ha.AcroFormListBox=Fu,Ha.AcroFormComboBox=Vu,Ha.AcroFormEditBox=Th,Ha.AcroFormButton=Lr,Ha.AcroFormPushButton=Nh,Ha.AcroFormRadioButton=Gu,Ha.AcroFormCheckBox=vh,Ha.AcroFormTextField=$c,Ha.AcroFormPasswordField=yh,Ha.AcroFormAppearance=tn,Ha.AcroForm={ChoiceField:Uu,ListBox:Fu,ComboBox:Vu,EditBox:Th,Button:Lr,PushButton:Nh,RadioButton:Gu,CheckBox:vh,TextField:$c,PasswordField:yh,Appearance:tn},Nn.AcroForm={ChoiceField:Uu,ListBox:Fu,ComboBox:Vu,EditBox:Th,Button:Lr,PushButton:Nh,RadioButton:Gu,CheckBox:vh,TextField:$c,PasswordField:yh,Appearance:tn};Nn.AcroForm;function w_(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(F,H){var re,K,Te,G,he,ue=e;if((H=H||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(Z(F))for(he in t)for(Te=t[he],re=0;re<Te.length;re+=1){for(G=!0,K=0;K<Te[re].length;K+=1)if(Te[re][K]!==void 0&&Te[re][K]!==F[K]){G=!1;break}if(G===!0){ue=he;break}}else for(he in t)for(Te=t[he],re=0;re<Te.length;re+=1){for(G=!0,K=0;K<Te[re].length;K+=1)if(Te[re][K]!==void 0&&Te[re][K]!==F.charCodeAt(K)){G=!1;break}if(G===!0){ue=he;break}}return ue===e&&H!==e&&(ue=H),ue},r=function F(H){for(var re=this.internal.write,K=this.internal.putStream,Te=(0,this.internal.getFilters)();Te.indexOf("FlateEncode")!==-1;)Te.splice(Te.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var G=[];if(G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Image"}),G.push({key:"Width",value:H.width}),G.push({key:"Height",value:H.height}),H.colorSpace===R.INDEXED?G.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(G.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===R.DEVICE_CMYK&&G.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),G.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&G.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var he="",ue=0,ae=H.transparency.length;ue<ae;ue++)he+=H.transparency[ue]+" "+H.transparency[ue]+" ";G.push({key:"Mask",value:"["+he+"]"})}H.sMask!==void 0&&G.push({key:"SMask",value:H.objectId+1+" 0 R"});var V=H.filter!==void 0?["/"+H.filter]:void 0;if(K({data:H.data,additionalKeyValues:G,alreadyAppliedFilters:V,objectId:H.objectId}),re("endobj"),"sMask"in H&&H.sMask!==void 0){var ce="/Predictor "+H.predictor+" /Colors 1 /BitsPerComponent "+H.bitsPerComponent+" /Columns "+H.width,M={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:ce,data:H.sMask};"filter"in H&&(M.filter=H.filter),F.call(this,M)}if(H.colorSpace===R.INDEXED){var k=this.internal.newObject();K({data:J(new Uint8Array(H.palette)),objectId:k}),re("endobj")}},i=function(){var F=this.internal.collections.addImage_images;for(var H in F)r.call(this,F[H])},c=function(){var F,H=this.internal.collections.addImage_images,re=this.internal.write;for(var K in H)re("/I"+(F=H[K]).index,F.objectId,"0","R")},d=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var F=this.internal.collections.addImage_images;return d.call(this),F},h=function(){return Object.keys(this.internal.collections.addImage_images).length},_=function(F){return typeof n["process"+F.toUpperCase()]=="function"},b=function(F){return $s(F)==="object"&&F.nodeType===1},v=function(F,H){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var re=""+F.getAttribute("src");if(re.indexOf("data:image/")===0)return Xd(unescape(re).split("base64,").pop());var K=n.loadFile(re,!0);if(K!==void 0)return K}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var Te;switch(H){case"PNG":Te="image/png";break;case"WEBP":Te="image/webp";break;case"JPEG":case"JPG":default:Te="image/jpeg"}return Xd(F.toDataURL(Te,1).split("base64,").pop())}},T=function(F){var H=this.internal.collections.addImage_images;if(H){for(var re in H)if(F===H[re].alias)return H[re]}},C=function(F,H,re){return F||H||(F=-96,H=-96),F<0&&(F=-1*re.width*72/F/this.internal.scaleFactor),H<0&&(H=-1*re.height*72/H/this.internal.scaleFactor),F===0&&(F=H*re.width/re.height),H===0&&(H=F*re.height/re.width),[F,H]},L=function(F,H,re,K,Te,G){var he=C.call(this,re,K,Te),ue=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,V=f.call(this);if(re=he[0],K=he[1],V[Te.index]=Te,G){G*=Math.PI/180;var ce=Math.cos(G),M=Math.sin(G),k=function(Q){return Q.toFixed(4)},Y=[k(ce),k(M),k(-1*M),k(ce),0,0,"cm"]}this.internal.write("q"),G?(this.internal.write([1,"0","0",1,ue(F),ae(H+K),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ue(re),"0","0",ue(K),"0","0","cm"].join(" "))):this.internal.write([ue(re),"0","0",ue(K),ue(F),ae(H+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Te.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(F){var H,re,K=0;if(typeof F=="string")for(re=F.length,H=0;H<re;H++)K=(K<<5)-K+F.charCodeAt(H),K|=0;else if(Z(F))for(re=F.byteLength/2,H=0;H<re;H++)K=(K<<5)-K+F[H],K|=0;return K},O=n.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var H=!0;return F.length===0&&(H=!1),F.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(H=!1),H},U=n.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var H=F.indexOf(",");return H<0?null:F.substring(0,H).trim().endsWith("base64")?F.substring(H+1):null},se=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(F){return se()&&F instanceof ArrayBuffer};var Z=n.__addimage__.isArrayBufferView=function(F){return se()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},ee=n.__addimage__.binaryStringToUint8Array=function(F){for(var H=F.length,re=new Uint8Array(H),K=0;K<H;K++)re[K]=F.charCodeAt(K);return re},J=n.__addimage__.arrayBufferToBinaryString=function(F){for(var H="",re=Z(F)?F:new Uint8Array(F),K=0;K<re.length;K+=8192)H+=String.fromCharCode.apply(null,re.subarray(K,K+8192));return H};n.addImage=function(){var F,H,re,K,Te,G,he,ue,ae;if(typeof arguments[1]=="number"?(H=e,re=arguments[1],K=arguments[2],Te=arguments[3],G=arguments[4],he=arguments[5],ue=arguments[6],ae=arguments[7]):(H=arguments[1],re=arguments[2],K=arguments[3],Te=arguments[4],G=arguments[5],he=arguments[6],ue=arguments[7],ae=arguments[8]),$s(F=arguments[0])==="object"&&!b(F)&&"imageData"in F){var V=F;F=V.imageData,H=V.format||H||e,re=V.x||re||0,K=V.y||K||0,Te=V.w||V.width||Te,G=V.h||V.height||G,he=V.alias||he,ue=V.compression||ue,ae=V.rotation||V.angle||ae}var ce=this.internal.getFilters();if(ue===void 0&&ce.indexOf("FlateEncode")!==-1&&(ue="SLOW"),isNaN(re)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var M=oe.call(this,F,H,he,ue);return L.call(this,re,K,Te,G,M,ae),this};var oe=function(F,H,re,K){var Te,G,he;if(typeof F=="string"&&s(F)===e){F=unescape(F);var ue=xe(F,!1);(ue!==""||(ue=n.loadFile(F,!0))!==void 0)&&(F=ue)}if(b(F)&&(F=v(F,H)),H=s(F,H),!_(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((he=re)==null||he.length===0)&&(re=function(ae){return typeof ae=="string"||Z(ae)?j(ae):Z(ae.data)?j(ae.data):null}(F)),(Te=T.call(this,re))||(se()&&(F instanceof Uint8Array||H==="RGBA"||(G=F,F=ee(F))),Te=this["process"+H.toUpperCase()](F,h.call(this),re,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in n.image_compression?ae:I.NONE}(K),G)),!Te)throw new Error("An unknown error occurred whilst processing the image.");return Te},xe=n.__addimage__.convertBase64ToBinaryString=function(F,H){H=typeof H!="boolean"||H;var re,K="";if(typeof F=="string"){var Te;re=(Te=U(F))!==null&&Te!==void 0?Te:F;try{K=Xd(re)}catch(G){if(H)throw O(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+G.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};n.getImageProperties=function(F){var H,re,K="";if(b(F)&&(F=v(F)),typeof F=="string"&&s(F)===e&&((K=xe(F,!1))===""&&(K=n.loadFile(F)||""),F=K),re=s(F),!_(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(!se()||F instanceof Uint8Array||(F=ee(F)),!(H=this["process"+re.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=re,H}})(Nn.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Nn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,r,i,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),h=t.pageContext.annotations,_=!1,b=0;b<h.length&&!_;b++)switch((s=h[b]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(_=!0);break;case"reference":case"text":case"freetext":_=!0}if(_!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){s=h[v];var T=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(L.objId),j=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+c(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+c(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+T(I(s.contents))+")",i+=" /Popup "+R.objId+" 0 R",i+=" /P "+f.objId+" 0 R",i+=" /T ("+T(I(j))+") >>",L.content=i;var O=L.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+c(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+c(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+O,s.open&&(i+=" /Open true"),i+=" >>",R.content=i,this.internal.write(L.objId,"0 R",R.objId,"0 R");break;case"freetext":r="/Rect ["+c(s.bounds.x)+" "+d(s.bounds.y)+" "+c(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var U=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+T(C(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var se=this.annotations._nameMap[s.options.name];s.options.pageNumber=se.page,s.options.top=se.y}else s.options.top||(s.options.top=0);if(r="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+T(C(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Z=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+Z+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,r,i,c){var d=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:f(t),y:h(s),w:f(t+r),h:h(s+i)},options:c,type:"link"})},n.textWithLink=function(t,s,r,i){var c,d,f=this.getTextWidth(t),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){d=i.maxWidth;var _=this.splitTextToSize(t,d).length;c=Math.ceil(h*_)}else d=f,c=h;return this.text(t,s,r,i),r+=.2*h,i.align==="center"&&(s-=f/2),i.align==="right"&&(s-=f),this.link(s,r-h,d,c,i),f},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}}(Nn.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(L){return e[L.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},d=n.__arabicParser__.isArabicEndLetter=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(L){return c(L)&&r.indexOf(L.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=1};var h=n.__arabicParser__.arabicLetterHasFinalForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=3};var _=n.__arabicParser__.arabicLetterHasMedialForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length==4},b=n.__arabicParser__.resolveLigatures=function(L){var R=0,I=t,j="",O=0;for(R=0;R<L.length;R+=1)I[L.charCodeAt(R)]!==void 0?(O++,typeof(I=I[L.charCodeAt(R)])=="number"&&(j+=String.fromCharCode(I),I=t,O=0),R===L.length-1&&(I=t,j+=L.charAt(R-(O-1)),R-=O-1,O=0)):(I=t,j+=L.charAt(R-O),R-=O,O=0);return j};n.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&s[L.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(L,R,I){return c(L)?i(L)===!1?-1:!h(L)||!c(R)&&!c(I)||!c(I)&&d(R)||d(L)&&!c(R)||d(L)&&f(R)||d(L)&&d(R)?0:_(L)&&c(R)&&!d(R)&&c(I)&&h(I)?3:d(L)||!c(I)?1:2:-1},T=function(L){var R=0,I=0,j=0,O="",U="",se="",Z=(L=L||"").split("\\s+"),ee=[];for(R=0;R<Z.length;R+=1){for(ee.push(""),I=0;I<Z[R].length;I+=1)O=Z[R][I],U=Z[R][I-1],se=Z[R][I+1],c(O)?(j=v(O,U,se),ee[R]+=j!==-1?String.fromCharCode(e[O.charCodeAt(0)][j]):O):ee[R]+=O;ee[R]=b(ee[R])}return ee.join(" ")},C=n.__arabicParser__.processArabic=n.processArabic=function(){var L,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(R)){var j=0;for(I=[],j=0;j<R.length;j+=1)Array.isArray(R[j])?I.push([T(R[j][0]),R[j][1],R[j][2]]):I.push([T(R[j])]);L=I}else L=T(R);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};n.events.push(["preProcessText",C])}(Nn.API),Nn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(d){i=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var r;if((t=t||"2d")!=="2d")return null;for(r in s)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=s[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nn.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(L){f=L}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(L){h=L}});var _=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return _},set:function(L){_=L}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(L){b=L}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(L){v=L}});var T=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return T},set:function(L){T=L}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(L){C=L}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,h){s.call(this);var _=(h=h||{}).fontSize||this.getFontSize(),b=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,T=0,C=0,L=0,R=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var I=h.maxWidth;I>0?typeof f=="string"?f=this.splitTextToSize(f,I):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(O,U){return O.concat(R.splitTextToSize(U,I))},[])):f=Array.isArray(f)?f:[f];for(var j=0;j<f.length;j++)T<(L=this.getStringUnitWidth(f[j],{font:b})*_)&&(T=L);return T!==0&&(C=f.length),{w:T/=v,h:Math.max((C*_*this.getLineHeightFactor()-_*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var f;f=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var h=this.internal.__cell__.lastCell,_=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,T=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===f.lineNumber?(f.x=(h.x||0)+(h.width||0),f.y=h.y||0):h.y+h.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,T&&v&&(this.printHeaderRow(f.lineNumber,!0),f.y+=v[0].height)):f.y=h.y+h.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-_,f.y+_,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+_,{align:"center",baseline:"top",maxWidth:f.width-_-_}):this.text(f.text,f.x+_,f.y+_,{align:"left",baseline:"top",maxWidth:f.width-_-_})),this.internal.__cell__.lastCell=f,this};n.table=function(f,h,_,b,v){if(s.call(this),!_)throw new Error("No data for PDF table.");var T,C,L,R,I=[],j=[],O=[],U={},se={},Z=[],ee=[],J=(v=v||{}).autoSize||!1,oe=v.printHeaders!==!1,xe=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,F=v.margins||Object.assign({width:this.getPageWidth()},e),H=typeof v.padding=="number"?v.padding:3,re=v.headerBackgroundColor||"#c8c8c8",K=v.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=oe,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=xe,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=K,this.setFontSize(xe),b==null)j=I=Object.keys(_[0]),O=I.map(function(){return"left"});else if(Array.isArray(b)&&$s(b[0])==="object")for(I=b.map(function(V){return V.name}),j=b.map(function(V){return V.prompt||V.name||""}),O=b.map(function(V){return V.align||"left"}),T=0;T<b.length;T+=1)se[b[T].name]=b[T].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(j=I=b,O=I.map(function(){return"left"}));if(J||Array.isArray(b)&&typeof b[0]=="string")for(T=0;T<I.length;T+=1){for(U[R=I[T]]=_.map(function(V){return V[R]}),this.setFont(void 0,"bold"),Z.push(this.getTextDimensions(j[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=U[R],this.setFont(void 0,"normal"),L=0;L<C.length;L+=1)Z.push(this.getTextDimensions(C[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[R]=Math.max.apply(null,Z)+H+H,Z=[]}if(oe){var Te={};for(T=0;T<I.length;T+=1)Te[I[T]]={},Te[I[T]].text=j[T],Te[I[T]].align=O[T];var G=d.call(this,Te,se);ee=I.map(function(V){return new i(f,h,se[V],G,Te[V].text,void 0,Te[V].align)}),this.setTableHeaderRow(ee),this.printHeaderRow(1,!1)}var he=b.reduce(function(V,ce){return V[ce.name]=ce.align,V},{});for(T=0;T<_.length;T+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:T,data:_[T]},this);var ue=d.call(this,_[T],se);for(L=0;L<I.length;L+=1){var ae=_[T][I[L]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:T,col:L,data:ae},this),c.call(this,new i(f,h,se[I[L]],ue,ae,T+2,he[I[L]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=h,this};var d=function(f,h){var _=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(f).map(function(T){var C=f[T];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,h[T]-_-_)},this).map(function(T){return this.getLineHeightFactor()*T.length*b/v+_+_},this).reduce(function(T,C){return Math.max(T,C)},0)};n.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,h){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var _;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],T=0;T<this.internal.__cell__.tableHeaderRow.length;T+=1){_=this.internal.__cell__.tableHeaderRow[T].clone(),h&&(_.y=this.internal.__cell__.margins.top||0,v.push(_)),_.lineNumber=f;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,_),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}}(Nn.API);var I_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},D_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],hp=w_(D_),R_=[100,200,300,400,500,600,700,800,900],QI=w_(R_);function mp(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return I_[i=i||"normal"]?i:"normal"}(n.style),s=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(n.weight),r=function(i){return typeof hp[i=i||"normal"]=="number"?i:"normal"}(n.stretch);return{family:e,style:t,weight:s,stretch:r,src:n.src||[],ref:n.ref||{name:e,style:[r,t,s].join(" ")}}}function $E(n,e,t,s){var r;for(r=t;r>=0&&r<e.length;r+=s)if(n[e[r]])return n[e[r]];for(r=t;r>=0&&r<e.length;r-=s)if(n[e[r]])return n[e[r]]}var eD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},WE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function KE(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function tD(n,e,t){for(var s=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},eD,t.genericFontFamilies||{}),i=null,c=null,d=0;d<e.length;++d)if(r[(i=mp(e[d])).family]&&(i.family=r[i.family]),n.hasOwnProperty(i.family)){c=n[i.family];break}if(!(c=c||n[s]))throw new Error("Could not find a font-family for the rule '"+KE(i)+"' and default family '"+s+"'.");if(c=function(f,h){if(h[f])return h[f];var _=hp[f],b=_<=hp.normal?-1:1,v=$E(h,D_,_,b);if(!v)throw new Error("Could not find a matching font-stretch value for "+f);return v}(i.stretch,c),c=function(f,h){if(h[f])return h[f];for(var _=I_[f],b=0;b<_.length;++b)if(h[_[b]])return h[_[b]];throw new Error("Could not find a matching font-style for "+f)}(i.style,c),!(c=function(f,h){if(h[f])return h[f];if(f===400&&h[500])return h[500];if(f===500&&h[400])return h[400];var _=QI[f],b=$E(h,R_,_,f<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+f);return b}(i.weight,c)))throw new Error("Failed to resolve a font for the rule '"+KE(i)+"'.");return c}function XE(n){return n.trimLeft()}function nD(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function sD(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var ch,ZE,JE,A0=["times"];(function(n){var e,t,s,r,i,c,d,f,h,_=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new f,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new c,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new c,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,f=this.internal.Matrix,h=new _}]);var b=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var k=M;Object.defineProperty(this,"pdf",{get:function(){return k}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(je){Y=!!je}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(je){Q=!!je}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(je){isNaN(je)||(fe=je)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(je){isNaN(je)||(ve=je)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(je){var ge;typeof je=="number"?ge=[je,je,je,je]:((ge=new Array(4))[0]=je[0],ge[1]=je.length>=2?je[1]:ge[0],ge[2]=je.length>=3?je[2]:ge[0],ge[3]=je.length>=4?je[3]:ge[1]),h.margin=ge}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(je){de=je}});var Ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ne},set:function(je){Ne=je}});var Ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ue},set:function(je){Ue=je}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(je){je instanceof _&&(h=je)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(je){h.path=je}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(je){we=je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(je){var ge;ge=v(je),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(je){var ge=v(je);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(je){["butt","round","square"].indexOf(je)!==-1&&(this.ctx.lineCap=je,this.pdf.setLineCap(je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(je){isNaN(je)||(this.ctx.lineWidth=je,this.pdf.setLineWidth(je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(je){["bevel","round","miter"].indexOf(je)!==-1&&(this.ctx.lineJoin=je,this.pdf.setLineJoin(je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(je){isNaN(je)||(this.ctx.miterLimit=je,this.pdf.setMiterLimit(je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(je){this.ctx.textBaseline=je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(je){["right","end","center","left","start"].indexOf(je)!==-1&&(this.ctx.textAlign=je)}});var Je=null;function Ze(je,ge){if(Je===null){var Fe=function(ut){var Pe=[];return Object.keys(ut).forEach(function(nt){ut[nt].forEach(function(it){var st=null;switch(it){case"bold":st={family:nt,weight:"bold"};break;case"italic":st={family:nt,style:"italic"};break;case"bolditalic":st={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":st={family:nt}}st!==null&&(st.ref={name:nt,style:it},Pe.push(st))})}),Pe}(je.getFontList());Je=function(ut){for(var Pe={},nt=0;nt<ut.length;++nt){var it=mp(ut[nt]),st=it.family,Nt=it.stretch,Pt=it.style,Rt=it.weight;Pe[st]=Pe[st]||{},Pe[st][Nt]=Pe[st][Nt]||{},Pe[st][Nt][Pt]=Pe[st][Nt][Pt]||{},Pe[st][Nt][Pt][Rt]=it}return Pe}(Fe.concat(ge))}return Je}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(je){Je=null,Qe=je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(je){var ge;if(this.ctx.font=je,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(je))!==null){var Fe=ge[1];ge[2];var ut=ge[3],Pe=ge[4];ge[5];var nt=ge[6],it=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(it==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:it==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var st=function(We){var Lt,pe,yt=[],At=We.trim();if(At==="")return A0;if(At in WE)return[WE[At]];for(;At!=="";){switch(pe=null,Lt=(At=XE(At)).charAt(0)){case'"':case"'":pe=nD(At.substring(1),Lt);break;default:pe=sD(At)}if(pe===null||(yt.push(pe[0]),(At=XE(pe[1]))!==""&&At.charAt(0)!==","))return A0;At=At.replace(/^,/,"")}return yt}(nt);if(this.fontFaces){var Nt=tD(Ze(this.pdf,this.fontFaces),st.map(function(We){return{family:We,stretch:"normal",weight:ut,style:Fe}}));this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var Pt="";(ut==="bold"||parseInt(ut,10)>=700||Fe==="bold")&&(Pt="bold"),Fe==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var Rt="",Ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Yt=0;Yt<st.length;Yt++){if(this.pdf.internal.getFont(st[Yt],Pt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=st[Yt];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(st[Yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=st[Yt],Pt="bold";else if(this.pdf.internal.getFont(st[Yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=st[Yt],Pt="normal";break}}if(Rt===""){for(var Be=0;Be<st.length;Be++)if(Ft[st[Be]]){Rt=Ft[st[Be]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(je){this.ctx.globalCompositeOperation=je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(je){this.ctx.globalAlpha=je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(je){this.ctx.lineDashOffset=je,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(je){this.ctx.lineDash=je,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(je){this.ctx.ignoreClearRect=!!je}})};b.prototype.setLineDash=function(M){this.lineDash=M},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){U.call(this,"fill",!1)},b.prototype.stroke=function(){U.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new c(M,k));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new c(M,k)},b.prototype.closePath=function(){var M=new c(0,0),k=0;for(k=this.path.length-1;k!==-1;k--)if(this.path[k].type==="begin"&&$s(this.path[k+1])==="object"&&typeof this.path[k+1].x=="number"){M=new c(this.path[k+1].x,this.path[k+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(M.x,M.y)},b.prototype.lineTo=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new c(M,k));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new c(Y.x,Y.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},b.prototype.quadraticCurveTo=function(M,k,Y,Q){if(isNaN(Y)||isNaN(Q)||isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new c(Y,Q)),ve=this.ctx.transform.applyToPoint(new c(M,k));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},b.prototype.bezierCurveTo=function(M,k,Y,Q,fe,ve){if(isNaN(fe)||isNaN(ve)||isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q))throw na.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new c(fe,ve)),Ne=this.ctx.transform.applyToPoint(new c(M,k)),Ue=this.ctx.transform.applyToPoint(new c(Y,Q));this.path.push({type:"bct",x1:Ne.x,y1:Ne.y,x2:Ue.x,y2:Ue.y,x:de.x,y:de.y}),this.ctx.lastPoint=new c(de.x,de.y)},b.prototype.arc=function(M,k,Y,Q,fe,ve){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q)||isNaN(fe))throw na.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new c(M,k));M=de.x,k=de.y;var Ne=this.ctx.transform.applyToPoint(new c(0,Y)),Ue=this.ctx.transform.applyToPoint(new c(0,0));Y=Math.sqrt(Math.pow(Ne.x-Ue.x,2)+Math.pow(Ne.y-Ue.y,2))}Math.abs(fe-Q)>=2*Math.PI&&(Q=0,fe=2*Math.PI),this.path.push({type:"arc",x:M,y:k,radius:Y,startAngle:Q,endAngle:fe,counterclockwise:ve})},b.prototype.arcTo=function(M,k,Y,Q,fe){throw new Error("arcTo not implemented.")},b.prototype.rect=function(M,k,Y,Q){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q))throw na.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,k),this.lineTo(M+Y,k),this.lineTo(M+Y,k+Q),this.lineTo(M,k+Q),this.lineTo(M,k),this.lineTo(M+Y,k),this.lineTo(M,k)},b.prototype.fillRect=function(M,k,Y,Q){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q))throw na.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!T.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,k,Y,Q),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},b.prototype.strokeRect=function(M,k,Y,Q){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q))throw na.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(M,k,Y,Q),this.stroke())},b.prototype.clearRect=function(M,k,Y,Q){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q))throw na.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,k,Y,Q))},b.prototype.save=function(M){M=typeof M!="boolean"||M;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(k),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new _(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},b.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(k),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(M){var k,Y,Q,fe;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))k=0,Y=0,Q=0,fe=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ve!==null)k=parseInt(ve[1]),Y=parseInt(ve[2]),Q=parseInt(ve[3]),fe=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)k=parseInt(ve[1]),Y=parseInt(ve[2]),Q=parseInt(ve[3]),fe=parseFloat(ve[4]);else{if(fe=1,typeof M=="string"&&M.charAt(0)!=="#"){var de=new v_(M);M=de.ok?de.toHex():"#000000"}M.length===4?(k=M.substring(1,2),k+=k,Y=M.substring(2,3),Y+=Y,Q=M.substring(3,4),Q+=Q):(k=M.substring(1,3),Y=M.substring(3,5),Q=M.substring(5,7)),k=parseInt(k,16),Y=parseInt(Y,16),Q=parseInt(Q,16)}}return{r:k,g:Y,b:Q,a:fe,style:M}},T=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(M,k,Y,Q){if(isNaN(k)||isNaN(Y)||typeof M!="string")throw na.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!T.call(this)){var fe=ue(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;H.call(this,{text:M,x:k,y:Y,scale:ve,angle:fe,align:this.textAlign,maxWidth:Q})}},b.prototype.strokeText=function(M,k,Y,Q){if(isNaN(k)||isNaN(Y)||typeof M!="string")throw na.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){Q=isNaN(Q)?void 0:Q;var fe=ue(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;H.call(this,{text:M,x:k,y:Y,scale:ve,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:Q})}},b.prototype.measureText=function(M){if(typeof M!="string")throw na.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var k=this.pdf,Y=this.pdf.internal.scaleFactor,Q=k.internal.getFontSize(),fe=k.getStringUnitWidth(M)*Q/k.internal.scaleFactor,ve=function(de){var Ne=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ne}}),this};return new ve({width:fe*=Math.round(96*Y/72*1e4)/1e4})},b.prototype.scale=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new f(M,0,0,k,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.rotate=function(M){if(isNaN(M))throw na.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var k=new f(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(k)},b.prototype.translate=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new f(1,0,0,1,M,k);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.transform=function(M,k,Y,Q,fe,ve){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Q)||isNaN(fe)||isNaN(ve))throw na.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new f(M,k,Y,Q,fe,ve);this.ctx.transform=this.ctx.transform.multiply(de)},b.prototype.setTransform=function(M,k,Y,Q,fe,ve){M=isNaN(M)?1:M,k=isNaN(k)?0:k,Y=isNaN(Y)?0:Y,Q=isNaN(Q)?1:Q,fe=isNaN(fe)?0:fe,ve=isNaN(ve)?0:ve,this.ctx.transform=new f(M,k,Y,Q,fe,ve)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(M,k,Y,Q,fe,ve,de,Ne,Ue){var we=this.pdf.getImageProperties(M),Je=1,Ze=1,Qe=1,je=1;Q!==void 0&&Ne!==void 0&&(Qe=Ne/Q,je=Ue/fe,Je=we.width/Q*Ne/Q,Ze=we.height/fe*Ue/fe),ve===void 0&&(ve=k,de=Y,k=0,Y=0),Q!==void 0&&Ne===void 0&&(Ne=Q,Ue=fe),Q===void 0&&Ne===void 0&&(Ne=we.width,Ue=we.height);for(var ge,Fe=this.ctx.transform.decompose(),ut=ue(Fe.rotate.shx),Pe=new f,nt=(Pe=(Pe=(Pe=Pe.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale)).applyToRectangle(new d(ve-k*Qe,de-Y*je,Q*Je,fe*Ze)),it=R.call(this,nt),st=[],Nt=0;Nt<it.length;Nt+=1)st.indexOf(it[Nt])===-1&&st.push(it[Nt]);if(O(st),this.autoPaging)for(var Pt=st[0],Rt=st[st.length-1],Ft=Pt;Ft<Rt+1;Ft++){this.pdf.setPage(Ft);var Yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=Ft===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=Ft===1?0:We+(Ft-2)*Lt;if(this.ctx.clip_path.length!==0){var yt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(ge,this.posX+this.margin[3],-pe+Be+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=yt}var At=JSON.parse(JSON.stringify(nt));At=j([At],this.posX+this.margin[3],-pe+Be+this.ctx.prevPageLastElemOffset)[0];var Kt=(Ft>Pt||Ft<Rt)&&L.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,Lt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",At.x,At.y,At.w,At.h,null,null,ut),Kt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,ut)};var R=function(M,k,Y){var Q=[];k=k||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Q.push(Math.floor((M.y+fe)/Y)+1);break;case"arc":Q.push(Math.floor((M.y+fe-M.radius)/Y)+1),Q.push(Math.floor((M.y+fe+M.radius)/Y)+1);break;case"qct":var ve=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Q.push(Math.floor((ve.y+fe)/Y)+1),Q.push(Math.floor((ve.y+ve.h+fe)/Y)+1);break;case"bct":var de=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Q.push(Math.floor((de.y+fe)/Y)+1),Q.push(Math.floor((de.y+de.h+fe)/Y)+1);break;case"rect":Q.push(Math.floor((M.y+fe)/Y)+1),Q.push(Math.floor((M.y+M.h+fe)/Y)+1)}for(var Ne=0;Ne<Q.length;Ne+=1)for(;this.pdf.internal.getNumberOfPages()<Q[Ne];)I.call(this);return Q},I=function(){var M=this.fillStyle,k=this.strokeStyle,Y=this.font,Q=this.lineCap,fe=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=k,this.font=Y,this.lineCap=Q,this.lineWidth=fe,this.lineJoin=ve},j=function(M,k,Y){for(var Q=0;Q<M.length;Q++)switch(M[Q].type){case"bct":M[Q].x2+=k,M[Q].y2+=Y;case"qct":M[Q].x1+=k,M[Q].y1+=Y;case"mt":case"lt":case"arc":default:M[Q].x+=k,M[Q].y+=Y}return M},O=function(M){return M.sort(function(k,Y){return k-Y})},U=function(M,k){for(var Y,Q,fe=this.fillStyle,ve=this.strokeStyle,de=this.lineCap,Ne=this.lineWidth,Ue=Math.abs(Ne*this.ctx.transform.scaleX),we=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),Qe=[],je=0;je<Ze.length;je++)if(Ze[je].x!==void 0)for(var ge=R.call(this,Ze[je]),Fe=0;Fe<ge.length;Fe+=1)Qe.indexOf(ge[Fe])===-1&&Qe.push(ge[Fe]);for(var ut=0;ut<Qe.length;ut++)for(;this.pdf.internal.getNumberOfPages()<Qe[ut];)I.call(this);if(O(Qe),this.autoPaging)for(var Pe=Qe[0],nt=Qe[Qe.length-1],it=Pe;it<nt+1;it++){this.pdf.setPage(it),this.fillStyle=fe,this.strokeStyle=ve,this.lineCap=de,this.lineWidth=Ue,this.lineJoin=we;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=it===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ft=it===1?0:Pt+(it-2)*Rt;if(this.ctx.clip_path.length!==0){var Yt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Y,this.posX+this.margin[3],-Ft+Nt+this.ctx.prevPageLastElemOffset),se.call(this,M,!0),this.path=Yt}if(Q=JSON.parse(JSON.stringify(Je)),this.path=j(Q,this.posX+this.margin[3],-Ft+Nt+this.ctx.prevPageLastElemOffset),k===!1||it===0){var Be=(it>Pe||it<nt)&&L.call(this);Be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Rt,null).clip().discardPath()),se.call(this,M,k),Be&&this.pdf.restoreGraphicsState()}this.lineWidth=Ne}else this.lineWidth=Ue,se.call(this,M,k),this.lineWidth=Ne;this.path=Je},se=function(M,k){if((M!=="stroke"||k||!C.call(this))&&(M==="stroke"||k||!T.call(this))){for(var Y,Q,fe=[],ve=this.path,de=0;de<ve.length;de++){var Ne=ve[de];switch(Ne.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:Ne,deltas:[],abs:[]});break;case"lt":var Ue=fe.length;if(ve[de-1]&&!isNaN(ve[de-1].x)&&(Y=[Ne.x-ve[de-1].x,Ne.y-ve[de-1].y],Ue>0)){for(;Ue>=0;Ue--)if(fe[Ue-1].close!==!0&&fe[Ue-1].begin!==!0){fe[Ue-1].deltas.push(Y),fe[Ue-1].abs.push(Ne);break}}break;case"bct":Y=[Ne.x1-ve[de-1].x,Ne.y1-ve[de-1].y,Ne.x2-ve[de-1].x,Ne.y2-ve[de-1].y,Ne.x-ve[de-1].x,Ne.y-ve[de-1].y],fe[fe.length-1].deltas.push(Y);break;case"qct":var we=ve[de-1].x+2/3*(Ne.x1-ve[de-1].x),Je=ve[de-1].y+2/3*(Ne.y1-ve[de-1].y),Ze=Ne.x+2/3*(Ne.x1-Ne.x),Qe=Ne.y+2/3*(Ne.y1-Ne.y),je=Ne.x,ge=Ne.y;Y=[we-ve[de-1].x,Je-ve[de-1].y,Ze-ve[de-1].x,Qe-ve[de-1].y,je-ve[de-1].x,ge-ve[de-1].y],fe[fe.length-1].deltas.push(Y);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(Ne)}}Q=k?null:M==="stroke"?"stroke":"fill";for(var Fe=!1,ut=0;ut<fe.length;ut++)if(fe[ut].arc)for(var Pe=fe[ut].abs,nt=0;nt<Pe.length;nt++){var it=Pe[nt];it.type==="arc"?J.call(this,it.x,it.y,it.radius,it.startAngle,it.endAngle,it.counterclockwise,void 0,k,!Fe):re.call(this,it.x,it.y),Fe=!0}else if(fe[ut].close===!0)this.pdf.internal.out("h"),Fe=!1;else if(fe[ut].begin!==!0){var st=fe[ut].start.x,Nt=fe[ut].start.y;K.call(this,fe[ut].deltas,st,Nt),Fe=!0}Q&&oe.call(this,Q),k&&xe.call(this)}},Z=function(M){var k=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=k*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Y;case"top":return M+k-Y;case"hanging":return M+k-2*Y;case"middle":return M+k/2-Y;case"ideographic":return M;case"alphabetic":default:return M}},ee=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(k,Y){this.colorStops.push([k,Y])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(M,k,Y,Q,fe,ve,de,Ne,Ue){for(var we=G.call(this,Y,Q,fe,ve),Je=0;Je<we.length;Je++){var Ze=we[Je];Je===0&&(Ue?F.call(this,Ze.x1+M,Ze.y1+k):re.call(this,Ze.x1+M,Ze.y1+k)),Te.call(this,M,k,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}Ne?xe.call(this):oe.call(this,de)},oe=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xe=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(M,k){this.pdf.internal.out(t(M)+" "+s(k)+" m")},H=function(M){var k;switch(M.align){case"right":case"end":k="right";break;case"center":k="center";break;case"left":case"start":default:k="left"}var Y=this.pdf.getTextDimensions(M.text),Q=Z.call(this,M.y),fe=ee.call(this,Q)-Y.h,ve=this.ctx.transform.applyToPoint(new c(M.x,Q)),de=this.ctx.transform.decompose(),Ne=new f;Ne=(Ne=(Ne=Ne.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var Ue,we,Je,Ze=this.ctx.transform.applyToRectangle(new d(M.x,Q,Y.w,Y.h)),Qe=Ne.applyToRectangle(new d(M.x,fe,Y.w,Y.h)),je=R.call(this,Qe),ge=[],Fe=0;Fe<je.length;Fe+=1)ge.indexOf(je[Fe])===-1&&ge.push(je[Fe]);if(O(ge),this.autoPaging)for(var ut=ge[0],Pe=ge[ge.length-1],nt=ut;nt<Pe+1;nt++){this.pdf.setPage(nt);var it=nt===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],Pt=Nt-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],Ft=Rt-this.margin[3],Yt=nt===1?0:st+(nt-2)*Pt;if(this.ctx.clip_path.length!==0){var Be=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Ue,this.posX+this.margin[3],-1*Yt+it),se.call(this,"fill",!0),this.path=Be}var We=j([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-Yt+it+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*M.scale),Je=this.lineWidth,this.lineWidth=Je*M.scale);var Lt=this.autoPaging!=="text";if(Lt||We.y+We.h<=Nt){if(Lt||We.y>=it&&We.x<=Rt){var pe=Lt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Rt-We.x)[0],yt=j([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Yt+it+this.ctx.prevPageLastElemOffset)[0],At=Lt&&(nt>ut||nt<Pe)&&L.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,Pt,null).clip().discardPath()),this.pdf.text(pe,yt.x,yt.y,{angle:M.angle,align:k,renderingMode:M.renderingMode}),At&&this.pdf.restoreGraphicsState()}}else We.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-We.y);M.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Je)}else M.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*M.scale),Je=this.lineWidth,this.lineWidth=Je*M.scale),this.pdf.text(M.text,ve.x+this.posX,ve.y+this.posY,{angle:M.angle,align:k,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Je)},re=function(M,k,Y,Q){Y=Y||0,Q=Q||0,this.pdf.internal.out(t(M+Y)+" "+s(k+Q)+" l")},K=function(M,k,Y){return this.pdf.lines(M,k,Y,null,null)},Te=function(M,k,Y,Q,fe,ve,de,Ne){this.pdf.internal.out([e(r(Y+M)),e(i(Q+k)),e(r(fe+M)),e(i(ve+k)),e(r(de+M)),e(i(Ne+k)),"c"].join(" "))},G=function(M,k,Y,Q){for(var fe=2*Math.PI,ve=Math.PI/2;k>Y;)k-=fe;var de=Math.abs(Y-k);de<fe&&Q&&(de=fe-de);for(var Ne=[],Ue=Q?-1:1,we=k;de>1e-5;){var Je=we+Ue*Math.min(de,ve);Ne.push(he.call(this,M,we,Je)),de-=Math.abs(Je-we),we=Je}return Ne},he=function(M,k,Y){var Q=(Y-k)/2,fe=M*Math.cos(Q),ve=M*Math.sin(Q),de=fe,Ne=-ve,Ue=de*de+Ne*Ne,we=Ue+de*fe+Ne*ve,Je=4/3*(Math.sqrt(2*Ue*we)-we)/(de*ve-Ne*fe),Ze=de-Je*Ne,Qe=Ne+Je*de,je=Ze,ge=-Qe,Fe=Q+k,ut=Math.cos(Fe),Pe=Math.sin(Fe);return{x1:M*Math.cos(k),y1:M*Math.sin(k),x2:Ze*ut-Qe*Pe,y2:Ze*Pe+Qe*ut,x3:je*ut-ge*Pe,y3:je*Pe+ge*ut,x4:M*Math.cos(Y),y4:M*Math.sin(Y)}},ue=function(M){return 180*M/Math.PI},ae=function(M,k,Y,Q,fe,ve){var de=M+.5*(Y-M),Ne=k+.5*(Q-k),Ue=fe+.5*(Y-fe),we=ve+.5*(Q-ve),Je=Math.min(M,fe,de,Ue),Ze=Math.max(M,fe,de,Ue),Qe=Math.min(k,ve,Ne,we),je=Math.max(k,ve,Ne,we);return new d(Je,Qe,Ze-Je,je-Qe)},V=function(M,k,Y,Q,fe,ve,de,Ne){var Ue,we,Je,Ze,Qe,je,ge,Fe,ut,Pe,nt,it,st,Nt,Pt=Y-M,Rt=Q-k,Ft=fe-Y,Yt=ve-Q,Be=de-fe,We=Ne-ve;for(we=0;we<41;we++)ut=(ge=(Je=M+(Ue=we/40)*Pt)+Ue*((Qe=Y+Ue*Ft)-Je))+Ue*(Qe+Ue*(fe+Ue*Be-Qe)-ge),Pe=(Fe=(Ze=k+Ue*Rt)+Ue*((je=Q+Ue*Yt)-Ze))+Ue*(je+Ue*(ve+Ue*We-je)-Fe),we==0?(nt=ut,it=Pe,st=ut,Nt=Pe):(nt=Math.min(nt,ut),it=Math.min(it,Pe),st=Math.max(st,ut),Nt=Math.max(Nt,Pe));return new d(Math.round(nt),Math.round(it),Math.round(st-nt),Math.round(Nt-it))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,k,Y=(M=this.ctx.lineDash,k=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:k}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Nn.API),function(n){var e=function(i){var c,d,f,h,_,b,v,T,C,L;for(d=[],f=0,h=(i+=c="\0\0\0\0".slice(i.length%4||4)).length;h>f;f+=4)(_=(i.charCodeAt(f)<<24)+(i.charCodeAt(f+1)<<16)+(i.charCodeAt(f+2)<<8)+i.charCodeAt(f+3))!==0?(b=(_=((_=((_=((_=(_-(L=_%85))/85)-(C=_%85))/85)-(T=_%85))/85)-(v=_%85))/85)%85,d.push(b+33,v+33,T+33,C+33,L+33)):d.push(122);return function(R,I){for(var j=I;j>0;j--)R.pop()}(d,c.length),String.fromCharCode.apply(String,d)+"~>"},t=function(i){var c,d,f,h,_,b=String,v="length",T=255,C="charCodeAt",L="slice",R="replace";for(i[L](-2),i=i[L](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),f=[],h=0,_=(i+=c="uuuuu"[L](i[v]%5||5))[v];_>h;h+=5)d=52200625*(i[C](h)-33)+614125*(i[C](h+1)-33)+7225*(i[C](h+2)-33)+85*(i[C](h+3)-33)+(i[C](h+4)-33),f.push(T&d>>24,T&d>>16,T&d>>8,T&d);return function(I,j){for(var O=j;O>0;O--)I.pop()}(f,c[v]),b.fromCharCode.apply(b,f)},s=function(i){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),c.test(i)===!1)return"";for(var d="",f=0;f<i.length;f+=2)d+=String.fromCharCode("0x"+(i[f]+i[f+1]));return d},r=function(i){for(var c=new Uint8Array(i.length),d=i.length;d--;)c[d]=i.charCodeAt(d);return i=(c=lp(c)).reduce(function(f,h){return f+String.fromCharCode(h)},"")};n.processDataByFilters=function(i,c){var d=0,f=i||"",h=[];for(typeof(c=c||[])=="string"&&(c=[c]),d=0;d<c.length;d+=1)switch(c[d]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=s(f),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(_){return("0"+_.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=r(f),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[d]+'" is not implemented')}return{data:f,reverseChain:h.reverse().join(" ")}}}(Nn.API),function(n){n.loadFile=function(e,t,s){return function(r,i,c){i=i!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=function(f,h,_){var b=new XMLHttpRequest,v=0,T=function(C){var L=C.length,R=[],I=String.fromCharCode;for(v=0;v<L;v+=1)R.push(I(255&C.charCodeAt(v)));return R.join("")};if(b.open("GET",f,!h),b.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(b.onload=function(){b.status===200?_(T(this.responseText)):_(void 0)}),b.send(null),h&&b.status===200)return T(b.responseText)}(r,i,c)}catch{}return d}(e,t,s)},n.loadImageFile=n.loadFile}(Nn.API),function(n){function e(){return(Dn.html2canvas?Promise.resolve(Dn.html2canvas):sp(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(Dn.DOMPurify?Promise.resolve(Dn.DOMPurify):sp(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var d=$s(c);return d==="undefined"?"undefined":d==="string"||c instanceof String?"string":d==="number"||c instanceof Number?"number":d==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":d==="object"?"object":"unknown"},r=function(c,d){var f=document.createElement(c);for(var h in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[h]=d.style[h];return f},i=function c(d){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),h=c.convert(Promise.resolve(),f);return h=(h=h.setProgress(1,c,1,[c])).set(d)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(c,d){return c.__proto__=d||i.prototype,c},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(c,d){return this.then(function(){switch(d=d||function(f){switch(s(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(t).then(function(f){return this.set({src:r("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},i.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=function f(h,_){for(var b=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)_!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||b.appendChild(f(v,_));return h.nodeType===1&&(h.nodeName==="CANVAS"?(b.width=h.width,b.height=h.height,b.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(b.value=h.value),b.addEventListener("load",function(){b.scrollTop=h.scrollTop,b.scrollLeft=h.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(d){var f=this.opt.jsPDF,h=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=h,h)for(var v=0;v<h.length;++v){var T=h[v],C=T.src.find(function(L){return L.format==="truetype"});C&&f.addFont(C.url,T.ref.name,T.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,f.context2d.save(!0),d(this.prop.container,b)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(c,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,d):this.outputPdf(c,d)},i.prototype.outputPdf=function(c,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,d)})},i.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},i.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(c){if(s(c)!=="object")return this;var d=Object.keys(c||{}).map(function(f){if(f in i.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(d)})},i.prototype.get=function(c,d){return this.then(function(){var f=c in i.template.prop?this.prop[c]:this.opt[c];return d?d(f):f})},i.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},i.prototype.setPageSize=function(c){function d(f,h){return Math.floor(f*h/72*96)}return this.then(function(){(c=c||Nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:d(c.inner.width,c.k),height:d(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},i.prototype.setProgress=function(c,d,f,h){return c!=null&&(this.progress.val=c),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(c,d,f,h){return this.setProgress(c?this.progress.val+c:null,d||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},i.prototype.then=function(c,d){var f=this;return this.thenCore(c,d,function(h,_){return f.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(b){return f.updateProgress(null,h),b}).then(h,_).then(function(b){return f.updateProgress(1),b})})},i.prototype.thenCore=function(c,d,f){f=f||Promise.prototype.then,c&&(c=c.bind(this)),d&&(d=d.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),_=f.call(h,c,d);return i.convert(_,this.__proto__)},i.prototype.thenExternal=function(c,d){return Promise.prototype.then.call(this,c,d)},i.prototype.thenList=function(c){var d=this;return c.forEach(function(f){d=d.thenCore(f)}),d},i.prototype.catch=function(c){c&&(c=c.bind(this));var d=Promise.prototype.catch.call(this,c);return i.convert(d,this)},i.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},i.prototype.error=function(c){return this.then(function(){throw new Error(c)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Nn.getPageSize=function(c,d,f){if($s(c)==="object"){var h=c;c=h.orientation,d=h.unit||d,f=h.format||f}d=d||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var _,b=(""+f).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+d}var T,C=0,L=0;if(v.hasOwnProperty(b))C=v[b][1]/_,L=v[b][0]/_;else try{C=f[1],L=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",L>C&&(T=L,L=C,C=T);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",C>L&&(T=L,L=C,C=T)}return{width:L,height:C,unit:d,k:_,orientation:c}},n.html=function(c,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(mp):null;var f=new i(d);return d.worker?f:f.from(c).doCallback()}}(Nn.API),Nn.API.addJS=function(n){return JE=n,this.internal.events.subscribe("postPutResources",function(){ch=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ch+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+JE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ch!==void 0&&ZE!==void 0&&this.internal.out("/Names <</JavaScript "+ch+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),i=0;i<r.length;i++){var c=r[i],d=s.exec(c);if(d!=null){var f=d[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,_=[];for(i=0;i<h;i++){var b=t.internal.newObject();_.push(b);var v=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var T=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<_.length;i++)t.internal.write("(page_"+(i+1)+")"+_[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+T+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,r,i){var c={title:r,options:i,children:[]};return s==null&&(s=this.root),s.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var r=0;r<s.children.length;r++)this.genIds_r(s.children[r])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var c=s.children[i];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var f=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var h=0;h<s.children.length;h++)this.renderItems(s.children[h])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,r){for(var i=0;i<r.children.length;i++)s.count++,this.count_r(s,r.children[i]);return s.count}}])}(Nn.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,r,i,c,d){var f,h=this.decode.DCT_DECODE,_=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(b){for(var v,T=256*b.charCodeAt(4)+b.charCodeAt(5),C=b.length,L={width:0,height:0,numcomponents:1},R=4;R<C;R+=2){if(R+=T,e.indexOf(b.charCodeAt(R+1))!==-1){v=256*b.charCodeAt(R+5)+b.charCodeAt(R+6),L={width:256*b.charCodeAt(R+7)+b.charCodeAt(R+8),height:v,numcomponents:b.charCodeAt(R+9)};break}T=256*b.charCodeAt(R+2)+b.charCodeAt(R+3)}return L}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}_={data:t,width:f.width,height:f.height,colorSpace:d,bitsPerComponent:8,filter:h,index:s,alias:r}}return _}}(Nn.API);var wu,uh,QE,e2,t2,aD=function(){var n,e,t;function s(i){var c,d,f,h,_,b,v,T,C,L,R,I,j,O;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(c=this.readUInt32(),C=(function(){var U,se;for(se=[],U=0;U<4;++U)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},_=this.readUInt16(),h=this.readUInt16()||100,b.delay=1e3*_/h,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,c-=4),i=(b!=null?b.data:void 0)||this.imgData,I=0;0<=c?I<c:I>c;0<=c?++I:--I)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((L=f-this.transparency.indexed.length)>0)for(j=0;0<=L?j<L:j>L;0<=L?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":v=(R=this.read(c)).indexOf(0),T=String.fromCharCode.apply(String,R.slice(0,v)),this.text[T]=String.fromCharCode.apply(String,R.slice(v+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(O=this.colorType)===4||O===6,d=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*d,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(i){var c,d;for(d=[],c=0;0<=i?c<i:c>i;0<=i?++c:--c)d.push(this.data[this.pos++]);return d},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(i){var c=this.pixelBitlength/8,d=new Uint8Array(this.width*this.height*c),f=0,h=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function _(b,v,T,C){var L,R,I,j,O,U,se,Z,ee,J,oe,xe,F,H,re,K,Te,G,he,ue,ae,V=Math.ceil((h.width-b)/T),ce=Math.ceil((h.height-v)/C),M=h.width==V&&h.height==ce;for(H=c*V,xe=M?d:new Uint8Array(H*ce),U=i.length,F=0,R=0;F<ce&&f<U;){switch(i[f++]){case 0:for(j=Te=0;Te<H;j=Te+=1)xe[R++]=i[f++];break;case 1:for(j=G=0;G<H;j=G+=1)L=i[f++],O=j<c?0:xe[R-c],xe[R++]=(L+O)%256;break;case 2:for(j=he=0;he<H;j=he+=1)L=i[f++],I=(j-j%c)/c,re=F&&xe[(F-1)*H+I*c+j%c],xe[R++]=(re+L)%256;break;case 3:for(j=ue=0;ue<H;j=ue+=1)L=i[f++],I=(j-j%c)/c,O=j<c?0:xe[R-c],re=F&&xe[(F-1)*H+I*c+j%c],xe[R++]=(L+Math.floor((O+re)/2))%256;break;case 4:for(j=ae=0;ae<H;j=ae+=1)L=i[f++],I=(j-j%c)/c,O=j<c?0:xe[R-c],F===0?re=K=0:(re=xe[(F-1)*H+I*c+j%c],K=I&&xe[(F-1)*H+(I-1)*c+j%c]),se=O+re-K,Z=Math.abs(se-O),J=Math.abs(se-re),oe=Math.abs(se-K),ee=Z<=J&&Z<=oe?O:J<=oe?re:K,xe[R++]=(L+ee)%256;break;default:throw new Error("Invalid filter algorithm: "+i[f-1])}if(!M){var k=((v+F*C)*h.width+b)*c,Y=F*H;for(j=0;j<V;j+=1){for(var Q=0;Q<c;Q+=1)d[k++]=xe[Y++];k+=(T-1)*c}}F++}}return i=kI(i),h.interlaceMethod==1?(_(0,0,8,8),_(4,0,8,8),_(0,4,4,8),_(2,0,4,4),_(0,2,2,4),_(1,0,2,2),_(0,1,1,2)):_(0,0,1,1),d},s.prototype.decodePalette=function(){var i,c,d,f,h,_,b,v,T;for(d=this.palette,_=this.transparency.indexed||[],h=new Uint8Array((_.length||0)+d.length),f=0,i=0,c=b=0,v=d.length;b<v;c=b+=3)h[f++]=d[c],h[f++]=d[c+1],h[f++]=d[c+2],h[f++]=(T=_[i++])!=null?T:255;return h},s.prototype.copyToImageData=function(i,c){var d,f,h,_,b,v,T,C,L,R,I;if(f=this.colors,L=null,d=this.hasAlphaChannel,this.palette.length&&(L=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),f=4,d=!0),C=(h=i.data||i).length,b=L||c,_=v=0,f===1)for(;_<C;)T=L?4*c[_/4]:v,R=b[T++],h[_++]=R,h[_++]=R,h[_++]=R,h[_++]=d?b[T++]:255,v=T;else for(;_<C;)T=L?4*c[_/4]:v,h[_++]=b[T++],h[_++]=b[T++],h[_++]=b[T++],h[_++]=d?b[T++]:255,v=T},s.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var r=function(){if(Object.prototype.toString.call(Dn)==="[object Window]"){try{e=Dn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),n=function(i){var c;if(r()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(i){var c,d,f,h,_,b,v,T;if(this.animation){for(T=[],d=_=0,b=(v=this.animation.frames).length;_<b;d=++_)c=v[d],f=i.createImageData(c.width,c.height),h=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(f,h),c.imageData=f,T.push(c.image=n(f));return T}},s.prototype.renderFrame=function(i,c){var d,f,h;return d=(f=this.animation.frames)[c],h=f[c-1],c===0&&i.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?i.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&i.putImageData(h.imageData,h.xOffset,h.yOffset),d.blendOp===0&&i.clearRect(d.xOffset,d.yOffset,d.width,d.height),i.drawImage(d.image,d.xOffset,d.yOffset)},s.prototype.animate=function(i){var c,d,f,h,_,b,v=this;return d=0,b=this.animation,h=b.numFrames,f=b.frames,_=b.numPlays,(c=function(){var T,C;if(T=d++%h,C=f[T],v.renderFrame(i,T),h>1&&d/h<_)return v.animation._timeout=setTimeout(c,C.delay)})()},s.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},s.prototype.render=function(i){var c,d;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,c=i.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(d=c.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),c.putImageData(d,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function rD(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,r=n[e++],i=r>>7,c=1<<(7&r)+1;n[e++],n[e++];var d=null,f=null;i&&(d=e,f=c,e+=3*c);var h=!0,_=[],b=0,v=null,T=0,C=null;for(this.width=t,this.height=s;h&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,C=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var L=n[e++];b=n[e++]|n[e++]<<8,v=n[e++],(1&L)==0&&(v=null),T=L>>2&7,e++;break;case 254:for(;;){if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var R=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,O=n[e++]|n[e++]<<8,U=n[e++],se=U>>6&1,Z=1<<(7&U)+1,ee=d,J=f,oe=!1;U>>7&&(oe=!0,ee=e,J=Z,e+=3*Z);var xe=e;for(e++;;){var F;if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}_.push({x:R,y:I,width:j,height:O,has_local_palette:oe,palette_offset:ee,palette_size:J,data_offset:xe,data_length:e-xe,transparent_index:v,interlaced:!!se,delay:b,disposal:T});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return C},this.frameInfo=function(H){if(H<0||H>=_.length)throw new Error("Frame index out of range.");return _[H]},this.decodeAndBlitFrameBGRA=function(H,re){var K=this.frameInfo(H),Te=K.width*K.height,G=new Uint8Array(Te);n2(n,K.data_offset,G,Te);var he=K.palette_offset,ue=K.transparent_index;ue===null&&(ue=256);var ae=K.width,V=t-ae,ce=ae,M=4*(K.y*t+K.x),k=4*((K.y+K.height)*t+K.x),Y=M,Q=4*V;K.interlaced===!0&&(Q+=4*t*7);for(var fe=8,ve=0,de=G.length;ve<de;++ve){var Ne=G[ve];if(ce===0&&(ce=ae,(Y+=Q)>=k&&(Q=4*V+4*t*(fe-1),Y=M+(ae+V)*(fe<<1),fe>>=1)),Ne===ue)Y+=4;else{var Ue=n[he+3*Ne],we=n[he+3*Ne+1],Je=n[he+3*Ne+2];re[Y++]=Je,re[Y++]=we,re[Y++]=Ue,re[Y++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(H,re){var K=this.frameInfo(H),Te=K.width*K.height,G=new Uint8Array(Te);n2(n,K.data_offset,G,Te);var he=K.palette_offset,ue=K.transparent_index;ue===null&&(ue=256);var ae=K.width,V=t-ae,ce=ae,M=4*(K.y*t+K.x),k=4*((K.y+K.height)*t+K.x),Y=M,Q=4*V;K.interlaced===!0&&(Q+=4*t*7);for(var fe=8,ve=0,de=G.length;ve<de;++ve){var Ne=G[ve];if(ce===0&&(ce=ae,(Y+=Q)>=k&&(Q=4*V+4*t*(fe-1),Y=M+(ae+V)*(fe<<1),fe>>=1)),Ne===ue)Y+=4;else{var Ue=n[he+3*Ne],we=n[he+3*Ne+1],Je=n[he+3*Ne+2];re[Y++]=Ue,re[Y++]=we,re[Y++]=Je,re[Y++]=255}--ce}}}function n2(n,e,t,s){for(var r=n[e++],i=1<<r,c=i+1,d=c+1,f=r+1,h=(1<<f)-1,_=0,b=0,v=0,T=n[e++],C=new Int32Array(4096),L=null;;){for(;_<16&&T!==0;)b|=n[e++]<<_,_+=8,T===1?T=n[e++]:--T;if(_<f)break;var R=b&h;if(b>>=f,_-=f,R!==i){if(R===c)break;for(var I=R<d?R:L,j=0,O=I;O>i;)O=C[O]>>8,++j;var U=O;if(v+j+(I!==R?1:0)>s)return void na.log("Warning, gif stream longer than expected.");t[v++]=U;var se=v+=j;for(I!==R&&(t[v++]=U),O=I;j--;)O=C[O],t[--se]=255&O,O>>=8;L!==null&&d<4096&&(C[d++]=L<<8|U,d>=h+1&&f<12&&(++f,h=h<<1|1)),L=R}else d=c+1,h=(1<<(f=r+1))-1,L=null}return v!==s&&na.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function S0(n){var e,t,s,r,i,c=Math.floor,d=new Array(64),f=new Array(64),h=new Array(64),_=new Array(64),b=new Array(65535),v=new Array(65535),T=new Array(64),C=new Array(64),L=[],R=0,I=7,j=new Array(64),O=new Array(64),U=new Array(64),se=new Array(256),Z=new Array(2048),ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function G(M,k){for(var Y=0,Q=0,fe=new Array,ve=1;ve<=16;ve++){for(var de=1;de<=M[ve];de++)fe[k[Q]]=[],fe[k[Q]][0]=Y,fe[k[Q]][1]=ve,Q++,Y++;Y*=2}return fe}function he(M){for(var k=M[0],Y=M[1]-1;Y>=0;)k&1<<Y&&(R|=1<<I),Y--,--I<0&&(R==255?(ue(255),ue(0)):ue(R),I=7,R=0)}function ue(M){L.push(M)}function ae(M){ue(M>>8&255),ue(255&M)}function V(M,k,Y,Q,fe){for(var ve,de=fe[0],Ne=fe[240],Ue=function(Pe,nt){var it,st,Nt,Pt,Rt,Ft,Yt,Be,We,Lt,pe=0;for(We=0;We<8;++We){it=Pe[pe],st=Pe[pe+1],Nt=Pe[pe+2],Pt=Pe[pe+3],Rt=Pe[pe+4],Ft=Pe[pe+5],Yt=Pe[pe+6];var yt=it+(Be=Pe[pe+7]),At=it-Be,Kt=st+Yt,Gt=st-Yt,xn=Nt+Ft,rs=Nt-Ft,Cn=Pt+Rt,Ws=Pt-Rt,Un=yt+Cn,js=yt-Cn,ln=Kt+xn,ls=Kt-xn;Pe[pe]=Un+ln,Pe[pe+4]=Un-ln;var un=.707106781*(ls+js);Pe[pe+2]=js+un,Pe[pe+6]=js-un;var Mn=.382683433*((Un=Ws+rs)-(ls=Gt+At)),qa=.5411961*Un+Mn,gs=1.306562965*ls+Mn,ca=.707106781*(ln=rs+Gt),vn=At+ca,Xt=At-ca;Pe[pe+5]=Xt+qa,Pe[pe+3]=Xt-qa,Pe[pe+1]=vn+gs,Pe[pe+7]=vn-gs,pe+=8}for(pe=0,We=0;We<8;++We){it=Pe[pe],st=Pe[pe+8],Nt=Pe[pe+16],Pt=Pe[pe+24],Rt=Pe[pe+32],Ft=Pe[pe+40],Yt=Pe[pe+48];var Ln=it+(Be=Pe[pe+56]),kn=it-Be,Fn=st+Yt,Rn=st-Yt,_s=Nt+Ft,hs=Nt-Ft,er=Pt+Rt,Ca=Pt-Rt,En=Ln+er,bs=Ln-er,Qt=Fn+_s,Ls=Fn-_s;Pe[pe]=En+Qt,Pe[pe+32]=En-Qt;var Ts=.707106781*(Ls+bs);Pe[pe+16]=bs+Ts,Pe[pe+48]=bs-Ts;var $n=.382683433*((En=Ca+hs)-(Ls=Rn+kn)),La=.5411961*En+$n,ua=1.306562965*Ls+$n,Bs=.707106781*(Qt=hs+Rn),ms=kn+Bs,wa=kn-Bs;Pe[pe+40]=wa+La,Pe[pe+24]=wa-La,Pe[pe+8]=ms+ua,Pe[pe+56]=ms-ua,pe++}for(We=0;We<64;++We)Lt=Pe[We]*nt[We],T[We]=Lt>0?Lt+.5|0:Lt-.5|0;return T}(M,k),we=0;we<64;++we)C[ee[we]]=Ue[we];var Je=C[0]-Y;Y=C[0],Je==0?he(Q[0]):(he(Q[v[ve=32767+Je]]),he(b[ve]));for(var Ze=63;Ze>0&&C[Ze]==0;)Ze--;if(Ze==0)return he(de),Y;for(var Qe,je=1;je<=Ze;){for(var ge=je;C[je]==0&&je<=Ze;)++je;var Fe=je-ge;if(Fe>=16){Qe=Fe>>4;for(var ut=1;ut<=Qe;++ut)he(Ne);Fe&=15}ve=32767+C[je],he(fe[(Fe<<4)+v[ve]]),he(b[ve]),je++}return Ze!=63&&he(de),Y}function ce(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(k){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var fe=c((Y[Q]*k+50)/100);fe=Math.min(Math.max(fe,1),255),d[ee[Q]]=fe}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var Ne=c((ve[de]*k+50)/100);Ne=Math.min(Math.max(Ne,1),255),f[ee[de]]=Ne}for(var Ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Je=0;Je<8;Je++)for(var Ze=0;Ze<8;Ze++)h[we]=1/(d[ee[we]]*Ue[Je]*Ue[Ze]*8),_[we]=1/(f[ee[we]]*Ue[Je]*Ue[Ze]*8),we++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,k){k&&ce(k),L=new Array,R=0,I=7,ae(65496),ae(65504),ae(16),ue(74),ue(70),ue(73),ue(70),ue(0),ue(1),ue(1),ue(0),ae(1),ae(1),ue(0),ue(0),function(){ae(65499),ae(132),ue(0);for(var st=0;st<64;st++)ue(d[st]);ue(1);for(var Nt=0;Nt<64;Nt++)ue(f[Nt])}(),function(st,Nt){ae(65472),ae(17),ue(8),ae(Nt),ae(st),ue(3),ue(1),ue(17),ue(0),ue(2),ue(17),ue(1),ue(3),ue(17),ue(1)}(M.width,M.height),function(){ae(65476),ae(418),ue(0);for(var st=0;st<16;st++)ue(J[st+1]);for(var Nt=0;Nt<=11;Nt++)ue(oe[Nt]);ue(16);for(var Pt=0;Pt<16;Pt++)ue(xe[Pt+1]);for(var Rt=0;Rt<=161;Rt++)ue(F[Rt]);ue(1);for(var Ft=0;Ft<16;Ft++)ue(H[Ft+1]);for(var Yt=0;Yt<=11;Yt++)ue(re[Yt]);ue(17);for(var Be=0;Be<16;Be++)ue(K[Be+1]);for(var We=0;We<=161;We++)ue(Te[We])}(),ae(65498),ae(12),ue(3),ue(1),ue(0),ue(2),ue(17),ue(3),ue(17),ue(0),ue(63),ue(0);var Y=0,Q=0,fe=0;R=0,I=7,this.encode.displayName="_encode_";for(var ve,de,Ne,Ue,we,Je,Ze,Qe,je,ge=M.data,Fe=M.width,ut=M.height,Pe=4*Fe,nt=0;nt<ut;){for(ve=0;ve<Pe;){for(we=Pe*nt+ve,Ze=-1,Qe=0,je=0;je<64;je++)Je=we+(Qe=je>>3)*Pe+(Ze=4*(7&je)),nt+Qe>=ut&&(Je-=Pe*(nt+1+Qe-ut)),ve+Ze>=Pe&&(Je-=ve+Ze-Pe+4),de=ge[Je++],Ne=ge[Je++],Ue=ge[Je++],j[je]=(Z[de]+Z[Ne+256>>0]+Z[Ue+512>>0]>>16)-128,O[je]=(Z[de+768>>0]+Z[Ne+1024>>0]+Z[Ue+1280>>0]>>16)-128,U[je]=(Z[de+1280>>0]+Z[Ne+1536>>0]+Z[Ue+1792>>0]>>16)-128;Y=V(j,h,Y,e,s),Q=V(O,_,Q,t,r),fe=V(U,_,fe,t,r),ve+=32}nt+=8}if(I>=0){var it=[];it[1]=I+1,it[0]=(1<<I+1)-1,he(it)}return ae(65497),new Uint8Array(L)},n=n||50,function(){for(var M=String.fromCharCode,k=0;k<256;k++)se[k]=M(k)}(),e=G(J,oe),t=G(H,re),s=G(xe,F),r=G(K,Te),function(){for(var M=1,k=2,Y=1;Y<=15;Y++){for(var Q=M;Q<k;Q++)v[32767+Q]=Y,b[32767+Q]=[],b[32767+Q][1]=Y,b[32767+Q][0]=Q;for(var fe=-(k-1);fe<=-M;fe++)v[32767+fe]=Y,b[32767+fe]=[],b[32767+fe][1]=Y,b[32767+fe][0]=k-1+fe;M<<=1,k<<=1}}(),function(){for(var M=0;M<256;M++)Z[M]=19595*M,Z[M+256>>0]=38470*M,Z[M+512>>0]=7471*M+32768,Z[M+768>>0]=-11059*M,Z[M+1024>>0]=-21709*M,Z[M+1280>>0]=32768*M+8421375,Z[M+1536>>0]=-27439*M,Z[M+1792>>0]=-5329*M}(),ce(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function jo(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function s2(n){function e(J){if(!J)throw Error("assert :P")}function t(J,oe,xe){for(var F=0;4>F;F++)if(J[oe+F]!=xe.charCodeAt(F))return!0;return!1}function s(J,oe,xe,F,H){for(var re=0;re<H;re++)J[oe+re]=xe[F+re]}function r(J,oe,xe,F){for(var H=0;H<F;H++)J[oe+H]=xe}function i(J){return new Int32Array(J)}function c(J,oe){for(var xe=[],F=0;F<J;F++)xe.push(new oe);return xe}function d(J,oe){var xe=[];return function F(H,re,K){for(var Te=K[re],G=0;G<Te&&(H.push(K.length>re+1?[]:new oe),!(K.length<re+1));G++)F(H[G],re+1,K)}(xe,0,J),xe}var f=function(){var J=this;function oe(E,y){for(var w=1<<y-1>>>0;E&w;)w>>>=1;return w?(E&w-1)+w:E}function xe(E,y,w,P,z){e(!(P%w));do E[y+(P-=w)]=z;while(0<P)}function F(E,y,w,P,z){if(e(2328>=z),512>=z)var W=i(512);else if((W=i(z))==null)return 0;return function(X,te,ie,me,Ce,He){var Ve,Oe,pt=te,Ke=1<<ie,Le=i(16),De=i(16);for(e(Ce!=0),e(me!=null),e(X!=null),e(0<ie),Oe=0;Oe<Ce;++Oe){if(15<me[Oe])return 0;++Le[me[Oe]]}if(Le[0]==Ce)return 0;for(De[1]=0,Ve=1;15>Ve;++Ve){if(Le[Ve]>1<<Ve)return 0;De[Ve+1]=De[Ve]+Le[Ve]}for(Oe=0;Oe<Ce;++Oe)Ve=me[Oe],0<me[Oe]&&(He[De[Ve]++]=Oe);if(De[15]==1)return(me=new H).g=0,me.value=He[0],xe(X,pt,1,Ke,me),Ke;var lt,gt=-1,ft=Ke-1,qt=0,jt=1,fn=1,Ut=1<<ie;for(Oe=0,Ve=1,Ce=2;Ve<=ie;++Ve,Ce<<=1){if(jt+=fn<<=1,0>(fn-=Le[Ve]))return 0;for(;0<Le[Ve];--Le[Ve])(me=new H).g=Ve,me.value=He[Oe++],xe(X,pt+qt,Ce,Ut,me),qt=oe(qt,Ve)}for(Ve=ie+1,Ce=2;15>=Ve;++Ve,Ce<<=1){if(jt+=fn<<=1,0>(fn-=Le[Ve]))return 0;for(;0<Le[Ve];--Le[Ve]){if(me=new H,(qt&ft)!=gt){for(pt+=Ut,lt=1<<(gt=Ve)-ie;15>gt&&!(0>=(lt-=Le[gt]));)++gt,lt<<=1;Ke+=Ut=1<<(lt=gt-ie),X[te+(gt=qt&ft)].g=lt+ie,X[te+gt].value=pt-te-gt}me.g=Ve-ie,me.value=He[Oe++],xe(X,pt+(qt>>ie),Ce,Ut,me),qt=oe(qt,Ve)}}return jt!=2*De[15]-1?0:Ke}(E,y,w,P,z,W)}function H(){this.value=this.g=0}function re(){this.value=this.g=0}function K(){this.G=c(5,H),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Na,re)}function Te(E,y,w,P){e(E!=null),e(y!=null),e(2147483648>P),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=y,E.pa=w,E.Jd=y,E.Yc=w+P,E.Zc=4<=P?w+P-4+1:w,ve(E)}function G(E,y){for(var w=0;0<y--;)w|=Ne(E,128)<<y;return w}function he(E,y){var w=G(E,y);return de(E)?-w:w}function ue(E,y,w,P){var z,W=0;for(e(E!=null),e(y!=null),e(4294967288>P),E.Sb=P,E.Ra=0,E.u=0,E.h=0,4<P&&(P=4),z=0;z<P;++z)W+=y[w+z]<<8*z;E.Ra=W,E.bb=P,E.oa=y,E.pa=w}function ae(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<bo-8>>>0,++E.bb,E.u-=8;Y(E)&&(E.h=1,E.u=0)}function V(E,y){if(e(0<=y),!E.h&&y<=ji){var w=k(E)&ki[y];return E.u+=y,ae(E),w}return E.h=1,E.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function k(E){return E.Ra>>>(E.u&bo-1)>>>0}function Y(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>bo}function Q(E,y){E.u=y,E.h=Y(E)}function fe(E){E.u>=$o&&(e(E.u>=$o),ae(E))}function ve(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function de(E){return G(E,1)}function Ne(E,y){var w=E.Ca;0>E.b&&ve(E);var P=E.b,z=w*y>>>8,W=(E.I>>>P>z)+0;for(W?(w-=z,E.I-=z+1<<P>>>0):w=z+1,P=w,z=0;256<=P;)z+=8,P>>=8;return P=7^z+mr[P],E.b-=P,E.Ca=(w<<P)-1,W}function Ue(E,y,w){E[y+0]=w>>24&255,E[y+1]=w>>16&255,E[y+2]=w>>8&255,E[y+3]=w>>0&255}function we(E,y){return E[y+0]<<0|E[y+1]<<8}function Je(E,y){return we(E,y)|E[y+2]<<16}function Ze(E,y){return we(E,y)|we(E,y+2)<<16}function Qe(E,y){var w=1<<y;return e(E!=null),e(0<y),E.X=i(w),E.X==null?0:(E.Mb=32-y,E.Xa=y,1)}function je(E,y){e(E!=null),e(y!=null),e(E.Xa==y.Xa),s(y.X,0,E.X,0,1<<y.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function Fe(E,y,w,P){e(w!=null),e(P!=null);var z=w[0],W=P[0];return z==0&&(z=(E*W+y/2)/y),W==0&&(W=(y*z+E/2)/E),0>=z||0>=W?0:(w[0]=z,P[0]=W,1)}function ut(E,y){return E+(1<<y)-1>>>y}function Pe(E,y){return((4278255360&E)+(4278255360&y)>>>0&4278255360)+((16711935&E)+(16711935&y)>>>0&16711935)>>>0}function nt(E,y){J[y]=function(w,P,z,W,X,te,ie){var me;for(me=0;me<X;++me){var Ce=J[E](te[ie+me-1],z,W+me);te[ie+me]=Pe(w[P+me],Ce)}}}function it(){this.ud=this.hd=this.jd=0}function st(E,y){return((4278124286&(E^y))>>>1)+(E&y)>>>0}function Nt(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Pt(E,y){return Nt(E+(E-y+.5>>1))}function Rt(E,y,w){return Math.abs(y-w)-Math.abs(E-w)}function Ft(E,y,w,P,z,W,X){for(P=W[X-1],w=0;w<z;++w)W[X+w]=P=Pe(E[y+w],P)}function Yt(E,y,w,P,z){var W;for(W=0;W<w;++W){var X=E[y+W],te=X>>8&255,ie=16711935&(ie=(ie=16711935&X)+((te<<16)+te));P[z+W]=(4278255360&X)+ie>>>0}}function Be(E,y){y.jd=E>>0&255,y.hd=E>>8&255,y.ud=E>>16&255}function We(E,y,w,P,z,W){var X;for(X=0;X<P;++X){var te=y[w+X],ie=te>>>8,me=te,Ce=255&(Ce=(Ce=te>>>16)+((E.jd<<24>>24)*(ie<<24>>24)>>>5));me=255&(me=(me=me+((E.hd<<24>>24)*(ie<<24>>24)>>>5))+((E.ud<<24>>24)*(Ce<<24>>24)>>>5)),z[W+X]=(4278255360&te)+(Ce<<16)+me}}function Lt(E,y,w,P,z){J[y]=function(W,X,te,ie,me,Ce,He,Ve,Oe){for(ie=He;ie<Ve;++ie)for(He=0;He<Oe;++He)me[Ce++]=z(te[P(W[X++])])},J[E]=function(W,X,te,ie,me,Ce,He){var Ve=8>>W.b,Oe=W.Ea,pt=W.K[0],Ke=W.w;if(8>Ve)for(W=(1<<W.b)-1,Ke=(1<<Ve)-1;X<te;++X){var Le,De=0;for(Le=0;Le<Oe;++Le)Le&W||(De=P(ie[me++])),Ce[He++]=z(pt[De&Ke]),De>>=Ve}else J["VP8LMapColor"+w](ie,me,pt,Ke,Ce,He,X,te,Oe)}}function pe(E,y,w,P,z){for(w=y+w;y<w;){var W=E[y++];P[z++]=W>>16&255,P[z++]=W>>8&255,P[z++]=W>>0&255}}function yt(E,y,w,P,z){for(w=y+w;y<w;){var W=E[y++];P[z++]=W>>16&255,P[z++]=W>>8&255,P[z++]=W>>0&255,P[z++]=W>>24&255}}function At(E,y,w,P,z){for(w=y+w;y<w;){var W=(X=E[y++])>>16&240|X>>12&15,X=X>>0&240|X>>28&15;P[z++]=W,P[z++]=X}}function Kt(E,y,w,P,z){for(w=y+w;y<w;){var W=(X=E[y++])>>16&248|X>>13&7,X=X>>5&224|X>>3&31;P[z++]=W,P[z++]=X}}function Gt(E,y,w,P,z){for(w=y+w;y<w;){var W=E[y++];P[z++]=W>>0&255,P[z++]=W>>8&255,P[z++]=W>>16&255}}function xn(E,y,w,P,z,W){if(W==0)for(w=y+w;y<w;)Ue(P,((W=E[y++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),z+=32;else s(P,z,E,y,w)}function rs(E,y){J[y][0]=J[E+"0"],J[y][1]=J[E+"1"],J[y][2]=J[E+"2"],J[y][3]=J[E+"3"],J[y][4]=J[E+"4"],J[y][5]=J[E+"5"],J[y][6]=J[E+"6"],J[y][7]=J[E+"7"],J[y][8]=J[E+"8"],J[y][9]=J[E+"9"],J[y][10]=J[E+"10"],J[y][11]=J[E+"11"],J[y][12]=J[E+"12"],J[y][13]=J[E+"13"],J[y][14]=J[E+"0"],J[y][15]=J[E+"0"]}function Cn(E){return E==_l||E==Si||E==Ci||E==So}function Ws(){this.eb=[],this.size=this.A=this.fb=0}function Un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function js(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ws,this.f.kb=new Un,this.sd=null}function ln(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ls(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function un(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function Mn(E,y){var w=E.T,P=y.ba.f.RGBA,z=P.eb,W=P.fb+E.ka*P.A,X=ir[y.ba.S],te=E.y,ie=E.O,me=E.f,Ce=E.N,He=E.ea,Ve=E.W,Oe=y.cc,pt=y.dc,Ke=y.Mc,Le=y.Nc,De=E.ka,lt=E.ka+E.T,gt=E.U,ft=gt+1>>1;for(De==0?X(te,ie,null,null,me,Ce,He,Ve,me,Ce,He,Ve,z,W,null,null,gt):(X(y.ec,y.fc,te,ie,Oe,pt,Ke,Le,me,Ce,He,Ve,z,W-P.A,z,W,gt),++w);De+2<lt;De+=2)Oe=me,pt=Ce,Ke=He,Le=Ve,Ce+=E.Rc,Ve+=E.Rc,W+=2*P.A,X(te,(ie+=2*E.fa)-E.fa,te,ie,Oe,pt,Ke,Le,me,Ce,He,Ve,z,W-P.A,z,W,gt);return ie+=E.fa,E.j+lt<E.o?(s(y.ec,y.fc,te,ie,gt),s(y.cc,y.dc,me,Ce,ft),s(y.Mc,y.Nc,He,Ve,ft),w--):1&lt||X(te,ie,null,null,me,Ce,He,Ve,me,Ce,He,Ve,z,W+P.A,null,null,gt),w}function qa(E,y,w){var P=E.F,z=[E.J];if(P!=null){var W=E.U,X=y.ba.S,te=X==Ao||X==Ci;y=y.ba.f.RGBA;var ie=[0],me=E.ka;ie[0]=E.T,E.Kb&&(me==0?--ie[0]:(--me,z[0]-=E.width),E.j+E.ka+E.T==E.o&&(ie[0]=E.o-E.j-me));var Ce=y.eb;me=y.fb+me*y.A,E=Jn(P,z[0],E.width,W,ie,Ce,me+(te?0:3),y.A),e(w==ie),E&&Cn(X)&&Mr(Ce,me,te,W,ie,y.A)}return 0}function gs(E){var y=E.ma,w=y.ba.S,P=11>w,z=w==Xo||w==lo||w==Ao||w==Fi||w==12||Cn(w);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!$r(y.Oa,E,z?11:12))return 0;if(z&&Cn(w)&&vt(),E.da)alert("todo:use_scaling");else{if(P){if(y.Ib=un,E.Kb){if(w=E.U+1>>1,y.memory=i(E.U+2*w),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+E.U,y.Mc=y.cc,y.Nc=y.dc+w,y.Ib=Mn,vt()}}else alert("todo:EmitYUV");z&&(y.Jb=qa,P&&Me())}if(P&&!uf){for(E=0;256>E;++E)nm[E]=89858*(E-128)+$a>>fo,Sc[E]=-22014*(E-128)+$a,Qu[E]=-45773*(E-128),Wa[E]=113618*(E-128)+$a>>fo;for(E=Jo;E<su;++E)y=76283*(E-16)+$a>>fo,Cc[E-Jo]=hr(y,255),ed[E-Jo]=hr(y+8>>4,15);uf=1}return 1}function ca(E){var y=E.ma,w=E.U,P=E.T;return e(!(1&E.ka)),0>=w||0>=P?0:(w=y.Ib(E,y),y.Jb!=null&&y.Jb(E,y,w),y.Dc+=w,1)}function vn(E){E.ma.memory=null}function Xt(E,y,w,P){return V(E,8)!=47?0:(y[0]=V(E,14)+1,w[0]=V(E,14)+1,P[0]=V(E,1),V(E,3)!=0?0:!E.h)}function Ln(E,y){if(4>E)return E+1;var w=E-2>>1;return(2+(1&E)<<w)+V(y,w)+1}function kn(E,y){return 120<y?y-120:1<=(w=((w=at[y-1])>>4)*E+(8-(15&w)))?w:1;var w}function Fn(E,y,w){var P=k(w),z=E[y+=255&P].g-8;return 0<z&&(Q(w,w.u+8),P=k(w),y+=E[y].value,y+=P&(1<<z)-1),Q(w,w.u+E[y].g),E[y].value}function Rn(E,y,w){return w.g+=E.g,w.value+=E.value<<y>>>0,e(8>=w.g),E.g}function _s(E,y,w){var P=E.xc;return e((y=P==0?0:E.vc[E.md*(w>>P)+(y>>P)])<E.Wb),E.Ya[y]}function hs(E,y,w,P){var z=E.ab,W=E.c*y,X=E.C;y=X+y;var te=w,ie=P;for(P=E.Ta,w=E.Ua;0<z--;){var me=E.gc[z],Ce=X,He=y,Ve=te,Oe=ie,pt=(ie=P,te=w,me.Ea);switch(e(Ce<He),e(He<=me.nc),me.hc){case 2:Fl(Ve,Oe,(He-Ce)*pt,ie,te);break;case 0:var Ke=Ce,Le=He,De=ie,lt=te,gt=(Ut=me).Ea;Ke==0&&(Ac(Ve,Oe,null,null,1,De,lt),Ft(Ve,Oe+1,0,0,gt-1,De,lt+1),Oe+=gt,lt+=gt,++Ke);for(var ft=1<<Ut.b,qt=ft-1,jt=ut(gt,Ut.b),fn=Ut.K,Ut=Ut.w+(Ke>>Ut.b)*jt;Ke<Le;){var As=fn,Rs=Ut,ns=1;for(gl(Ve,Oe,De,lt-gt,1,De,lt);ns<gt;){var Qn=(ns&~qt)+ft;Qn>gt&&(Qn=gt),(0,vi[As[Rs++]>>8&15])(Ve,Oe+ +ns,De,lt+ns-gt,Qn-ns,De,lt+ns),ns=Qn}Oe+=gt,lt+=gt,++Ke&qt||(Ut+=jt)}He!=me.nc&&s(ie,te-pt,ie,te+(He-Ce-1)*pt,pt);break;case 1:for(pt=Ve,Le=Oe,gt=(Ve=me.Ea)-(lt=Ve&~(De=(Oe=1<<me.b)-1)),Ke=ut(Ve,me.b),ft=me.K,me=me.w+(Ce>>me.b)*Ke;Ce<He;){for(qt=ft,jt=me,fn=new it,Ut=Le+lt,As=Le+Ve;Le<Ut;)Be(qt[jt++],fn),to(fn,pt,Le,Oe,ie,te),Le+=Oe,te+=Oe;Le<As&&(Be(qt[jt++],fn),to(fn,pt,Le,gt,ie,te),Le+=gt,te+=gt),++Ce&De||(me+=Ke)}break;case 3:if(Ve==ie&&Oe==te&&0<me.b){for(Le=ie,Ve=pt=te+(He-Ce)*pt-(lt=(He-Ce)*ut(me.Ea,me.b)),Oe=ie,De=te,Ke=[],lt=(gt=lt)-1;0<=lt;--lt)Ke[lt]=Oe[De+lt];for(lt=gt-1;0<=lt;--lt)Le[Ve+lt]=Ke[lt];Wr(me,Ce,He,ie,pt,ie,te)}else Wr(me,Ce,He,Ve,Oe,ie,te)}te=P,ie=w}ie!=w&&s(P,w,te,ie,W)}function er(E,y){var w=E.V,P=E.Ba+E.c*E.C,z=y-E.C;if(e(y<=E.l.o),e(16>=z),0<z){var W=E.l,X=E.Ta,te=E.Ua,ie=W.width;if(hs(E,z,w,P),z=te=[te],e((w=E.C)<(P=y)),e(W.v<W.va),P>W.o&&(P=W.o),w<W.j){var me=W.j-w;w=W.j,z[0]+=me*ie}if(w>=P?w=0:(z[0]+=4*W.v,W.ka=w-W.j,W.U=W.va-W.v,W.T=P-w,w=1),w){if(te=te[0],11>(w=E.ca).S){var Ce=w.f.RGBA,He=(P=w.S,z=W.U,W=W.T,me=Ce.eb,Ce.A),Ve=W;for(Ce=Ce.fb+E.Ma*Ce.A;0<Ve--;){var Oe=X,pt=te,Ke=z,Le=me,De=Ce;switch(P){case rr:pr(Oe,pt,Ke,Le,De);break;case Xo:va(Oe,pt,Ke,Le,De);break;case _l:va(Oe,pt,Ke,Le,De),Mr(Le,De,0,Ke,1,0);break;case Ai:Nr(Oe,pt,Ke,Le,De);break;case lo:xn(Oe,pt,Ke,Le,De,1);break;case Si:xn(Oe,pt,Ke,Le,De,1),Mr(Le,De,0,Ke,1,0);break;case Ao:xn(Oe,pt,Ke,Le,De,0);break;case Ci:xn(Oe,pt,Ke,Le,De,0),Mr(Le,De,1,Ke,1,0);break;case Fi:Kr(Oe,pt,Ke,Le,De);break;case So:Kr(Oe,pt,Ke,Le,De),Zn(Le,De,Ke,1,0);break;case El:Ua(Oe,pt,Ke,Le,De);break;default:e(0)}te+=ie,Ce+=He}E.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=w.height)}}E.C=y,e(E.C<=E.i)}function Ca(E){var y;if(0<E.ua)return 0;for(y=0;y<E.Wb;++y){var w=E.Ya[y].G,P=E.Ya[y].H;if(0<w[1][P[1]+0].g||0<w[2][P[2]+0].g||0<w[3][P[3]+0].g)return 0}return 1}function En(E,y,w,P,z,W){if(E.Z!=0){var X=E.qd,te=E.rd;for(e(co[E.Z]!=null);y<w;++y)co[E.Z](X,te,P,z,P,z,W),X=P,te=z,z+=W;E.qd=X,E.rd=te}}function bs(E,y){var w=E.l.ma,P=w.Z==0||w.Z==1?E.l.j:E.C;if(P=E.C<P?P:E.C,e(y<=E.l.o),y>P){var z=E.l.width,W=w.ca,X=w.tb+z*P,te=E.V,ie=E.Ba+E.c*P,me=E.gc;e(E.ab==1),e(me[0].hc==3),eo(me[0],P,y,te,ie,W,X),En(w,P,y,W,X,z)}E.C=E.Ma=y}function Qt(E,y,w,P,z,W,X){var te=E.$/P,ie=E.$%P,me=E.m,Ce=E.s,He=w+E.$,Ve=He;z=w+P*z;var Oe=w+P*W,pt=280+Ce.ua,Ke=E.Pb?te:16777216,Le=0<Ce.ua?Ce.Wa:null,De=Ce.wc,lt=He<Oe?_s(Ce,ie,te):null;e(E.C<W),e(Oe<=z);var gt=!1;e:for(;;){for(;gt||He<Oe;){var ft=0;if(te>=Ke){var qt=He-w;e((Ke=E).Pb),Ke.wd=Ke.m,Ke.xd=qt,0<Ke.s.ua&&je(Ke.s.Wa,Ke.s.vb),Ke=te+Mt}if(ie&De||(lt=_s(Ce,ie,te)),e(lt!=null),lt.Qb&&(y[He]=lt.qb,gt=!0),!gt)if(fe(me),lt.jc){ft=me,qt=y;var jt=He,fn=lt.pd[k(ft)&Na-1];e(lt.jc),256>fn.g?(Q(ft,ft.u+fn.g),qt[jt]=fn.value,ft=0):(Q(ft,ft.u+fn.g-256),e(256<=fn.value),ft=fn.value),ft==0&&(gt=!0)}else ft=Fn(lt.G[0],lt.H[0],me);if(me.h)break;if(gt||256>ft){if(!gt)if(lt.nd)y[He]=(lt.qb|ft<<8)>>>0;else{if(fe(me),gt=Fn(lt.G[1],lt.H[1],me),fe(me),qt=Fn(lt.G[2],lt.H[2],me),jt=Fn(lt.G[3],lt.H[3],me),me.h)break;y[He]=(jt<<24|gt<<16|ft<<8|qt)>>>0}if(gt=!1,++He,++ie>=P&&(ie=0,++te,X!=null&&te<=W&&!(te%16)&&X(E,te),Le!=null))for(;Ve<He;)ft=y[Ve++],Le.X[(506832829*ft&4294967295)>>>Le.Mb]=ft}else if(280>ft){if(ft=Ln(ft-256,me),qt=Fn(lt.G[4],lt.H[4],me),fe(me),qt=kn(P,qt=Ln(qt,me)),me.h)break;if(He-w<qt||z-He<ft)break e;for(jt=0;jt<ft;++jt)y[He+jt]=y[He+jt-qt];for(He+=ft,ie+=ft;ie>=P;)ie-=P,++te,X!=null&&te<=W&&!(te%16)&&X(E,te);if(e(He<=z),ie&De&&(lt=_s(Ce,ie,te)),Le!=null)for(;Ve<He;)ft=y[Ve++],Le.X[(506832829*ft&4294967295)>>>Le.Mb]=ft}else{if(!(ft<pt))break e;for(gt=ft-280,e(Le!=null);Ve<He;)ft=y[Ve++],Le.X[(506832829*ft&4294967295)>>>Le.Mb]=ft;ft=He,e(!(gt>>>(qt=Le).Xa)),y[ft]=qt.X[gt],gt=!0}gt||e(me.h==Y(me))}if(E.Pb&&me.h&&He<z)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&je(E.s.vb,E.s.Wa);else{if(me.h)break e;X!=null&&X(E,te>W?W:te),E.a=0,E.$=He-w}return 1}return E.a=3,0}function Ls(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var y=E.Wa;y!=null&&(y.X=null),E.vb=null,e(E!=null)}function Ts(){var E=new dn;return E==null?null:(E.a=0,E.xb=Hl,rs("Predictor","VP8LPredictors"),rs("Predictor","VP8LPredictors_C"),rs("PredictorAdd","VP8LPredictorsAdd"),rs("PredictorAdd","VP8LPredictorsAdd_C"),Fl=Yt,to=We,pr=pe,va=yt,Kr=At,Ua=Kt,Nr=Gt,J.VP8LMapColor32b=Ba,J.VP8LMapColor8b=xl,E)}function $n(E,y,w,P,z){var W=1,X=[E],te=[y],ie=P.m,me=P.s,Ce=null,He=0;e:for(;;){if(w)for(;W&&V(ie,1);){var Ve=X,Oe=te,pt=P,Ke=1,Le=pt.m,De=pt.gc[pt.ab],lt=V(Le,2);if(pt.Oc&1<<lt)W=0;else{switch(pt.Oc|=1<<lt,De.hc=lt,De.Ea=Ve[0],De.nc=Oe[0],De.K=[null],++pt.ab,e(4>=pt.ab),lt){case 0:case 1:De.b=V(Le,3)+2,Ke=$n(ut(De.Ea,De.b),ut(De.nc,De.b),0,pt,De.K),De.K=De.K[0];break;case 3:var gt,ft=V(Le,8)+1,qt=16<ft?0:4<ft?1:2<ft?2:3;if(Ve[0]=ut(De.Ea,qt),De.b=qt,gt=Ke=$n(ft,1,0,pt,De.K)){var jt,fn=ft,Ut=De,As=1<<(8>>Ut.b),Rs=i(As);if(Rs==null)gt=0;else{var ns=Ut.K[0],Qn=Ut.w;for(Rs[0]=Ut.K[0][0],jt=1;jt<1*fn;++jt)Rs[jt]=Pe(ns[Qn+jt],Rs[jt-1]);for(;jt<4*As;++jt)Rs[jt]=0;Ut.K[0]=null,Ut.K[0]=Rs,gt=1}}Ke=gt;break;case 2:break;default:e(0)}W=Ke}}if(X=X[0],te=te[0],W&&V(ie,1)&&!(W=1<=(He=V(ie,4))&&11>=He)){P.a=3;break e}var Vs;if(Vs=W)t:{var Os,Vn,Ys,gn=P,In=X,xs=te,Ss=He,or=w,Ka=gn.m,Oa=gn.s,Pa=[null],Fa=1,Li=0,Ps=St[Ss];n:for(;;){if(or&&V(Ka,1)){var Va=V(Ka,3)+2,Vi=ut(In,Va),Qo=ut(xs,Va),vl=Vi*Qo;if(!$n(Vi,Qo,0,gn,Pa))break n;for(Pa=Pa[0],Oa.xc=Va,Os=0;Os<vl;++Os){var el=Pa[Os]>>8&65535;Pa[Os]=el,el>=Fa&&(Fa=el+1)}}if(Ka.h)break n;for(Vn=0;5>Vn;++Vn){var ia=$[Vn];!Vn&&0<Ss&&(ia+=1<<Ss),Li<ia&&(Li=ia)}var Lc=c(Fa*Ps,H),au=Fa,Br=c(au,K);if(Br==null)var xa=null;else e(65536>=au),xa=Br;var yl=i(Li);if(xa==null||yl==null||Lc==null){gn.a=1;break n}var tl=Lc;for(Os=Ys=0;Os<Fa;++Os){var Jr=xa[Os],nl=Jr.G,Qr=Jr.H,wc=0,ql=1,ru=0;for(Vn=0;5>Vn;++Vn){ia=$[Vn],nl[Vn]=tl,Qr[Vn]=Ys,!Vn&&0<Ss&&(ia+=1<<Ss);a:{var Ic,iu=ia,Dc=gn,zl=yl,hf=tl,mf=Ys,Rc=0,Io=Dc.m,am=V(Io,1);if(r(zl,0,0,iu),am){var pf=V(Io,1)+1,gf=V(Io,1),td=V(Io,gf==0?1:8);zl[td]=1,pf==2&&(zl[td=V(Io,8)]=1);var $l=1}else{var nd=i(19),sd=V(Io,4)+4;if(19<sd){Dc.a=3;var Oc=0;break a}for(Ic=0;Ic<sd;++Ic)nd[ot[Ic]]=V(Io,3);var ou=void 0,Wl=void 0,xf=Dc,Ef=nd,Do=iu,Pc=zl,lu=0,Gi=xf.m,Kl=8,ad=c(128,H);s:for(;F(ad,0,7,Ef,19);){if(V(Gi,1)){var _f=2+2*V(Gi,3);if((ou=2+V(Gi,_f))>Do)break s}else ou=Do;for(Wl=0;Wl<Do&&ou--;){fe(Gi);var rd=ad[0+(127&k(Gi))];Q(Gi,Gi.u+rd.g);var Al=rd.value;if(16>Al)Pc[Wl++]=Al,Al!=0&&(Kl=Al);else{var bf=Al==16,id=Al-16,od=kr[id],ld=V(Gi,bl[id])+od;if(Wl+ld>Do)break s;for(var Tf=bf?Kl:0;0<ld--;)Pc[Wl++]=Tf}}lu=1;break s}lu||(xf.a=3),$l=lu}($l=$l&&!Io.h)&&(Rc=F(hf,mf,8,zl,iu)),$l&&Rc!=0?Oc=Rc:(Dc.a=3,Oc=0)}if(Oc==0)break n;if(ql&&Se[Vn]==1&&(ql=tl[Ys].g==0),wc+=tl[Ys].g,Ys+=Oc,3>=Vn){var Sl,cu=yl[0];for(Sl=1;Sl<ia;++Sl)yl[Sl]>cu&&(cu=yl[Sl]);ru+=cu}}if(Jr.nd=ql,Jr.Qb=0,ql&&(Jr.qb=(nl[3][Qr[3]+0].value<<24|nl[1][Qr[1]+0].value<<16|nl[2][Qr[2]+0].value)>>>0,wc==0&&256>nl[0][Qr[0]+0].value&&(Jr.Qb=1,Jr.qb+=nl[0][Qr[0]+0].value<<8)),Jr.jc=!Jr.Qb&&6>ru,Jr.jc){var Mc,Ro=Jr;for(Mc=0;Mc<Na;++Mc){var ho=Mc,Oo=Ro.pd[ho],kc=Ro.G[0][Ro.H[0]+ho];256<=kc.value?(Oo.g=kc.g+256,Oo.value=kc.value):(Oo.g=0,Oo.value=0,ho>>=Rn(kc,8,Oo),ho>>=Rn(Ro.G[1][Ro.H[1]+ho],16,Oo),ho>>=Rn(Ro.G[2][Ro.H[2]+ho],0,Oo),Rn(Ro.G[3][Ro.H[3]+ho],24,Oo))}}}Oa.vc=Pa,Oa.Wb=Fa,Oa.Ya=xa,Oa.yc=Lc,Vs=1;break t}Vs=0}if(!(W=Vs)){P.a=3;break e}if(0<He){if(me.ua=1<<He,!Qe(me.Wa,He)){P.a=1,W=0;break e}}else me.ua=0;var jc=P,cd=X,Nf=te,ud=jc.s,dd=ud.xc;if(jc.c=cd,jc.i=Nf,ud.md=ut(cd,dd),ud.wc=dd==0?-1:(1<<dd)-1,w){P.xb=cf;break e}if((Ce=i(X*te))==null){P.a=1,W=0;break e}W=(W=Qt(P,Ce,0,X,te,te,null))&&!ie.h;break e}return W?(z!=null?z[0]=Ce:(e(Ce==null),e(w)),P.$=0,w||Ls(me)):Ls(me),W}function La(E,y){var w=E.c*E.i,P=w+y+16*y;return e(E.c<=y),E.V=i(P),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+w+y,1)}function ua(E,y){var w=E.C,P=y-w,z=E.V,W=E.Ba+E.c*w;for(e(y<=E.l.o);0<P;){var X=16<P?16:P,te=E.l.ma,ie=E.l.width,me=ie*X,Ce=te.ca,He=te.tb+ie*w,Ve=E.Ta,Oe=E.Ua;hs(E,X,z,W),Fs(Ve,Oe,Ce,He,me),En(te,w,w+X,Ce,He,ie),P-=X,z+=X*E.c,w+=X}e(w==y),E.C=E.Ma=y}function Bs(){this.ub=this.yd=this.td=this.Rb=0}function ms(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function wa(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Is(){this.Yb=function(){var E=[];return function y(w,P,z){for(var W=z[P],X=0;X<W&&(w.push(z.length>P+1?[]:0),!(z.length<P+1));X++)y(w[X],P+1,z)}(E,0,[3,11]),E}()}function ka(){this.jb=i(3),this.Wc=d([4,8],Is),this.Xc=d([4,17],Is)}function Wn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ns(){this.ld=this.La=this.dd=this.tc=0}function da(){this.Na=this.la=0}function ws(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function tr(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ta(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ns),this.Y=0,this.ya=Array(new tr),this.aa=0,this.l=new mn}function sa(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Gr(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new Bs,this.Kc=new ms,this.ed=new Wn,this.Qa=new wa,this.Ic=this.$c=this.Aa=0,this.D=new Ta,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,ce),this.ia=0,this.pb=c(4,ws),this.Pa=new ka,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new sa),this.Hd=0,this.rb=Array(new da),this.sb=0,this.wa=Array(new Ns),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new tr),this.L=this.aa=0,this.gd=d([4,2],Ns),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function mn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hr(){var E=new Gr;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,Wt||(Wt=wr)),E}function Ds(E,y,w){return E.a==0&&(E.a=y,E.sc=w,E.cb=0),0}function ea(E,y,w){return 3<=w&&E[y+0]==157&&E[y+1]==1&&E[y+2]==42}function Yr(E,y){if(E==null)return 0;if(E.a=0,E.sc="OK",y==null)return Ds(E,2,"null VP8Io passed to VP8GetHeaders()");var w=y.data,P=y.w,z=y.ha;if(4>z)return Ds(E,7,"Truncated header.");var W=w[P+0]|w[P+1]<<8|w[P+2]<<16,X=E.Od;if(X.Rb=!(1&W),X.td=W>>1&7,X.yd=W>>4&1,X.ub=W>>5,3<X.td)return Ds(E,3,"Incorrect keyframe parameters.");if(!X.yd)return Ds(E,4,"Frame not displayable.");P+=3,z-=3;var te=E.Kc;if(X.Rb){if(7>z)return Ds(E,7,"cannot parse picture header");if(!ea(w,P,z))return Ds(E,3,"Bad code word");te.c=16383&(w[P+4]<<8|w[P+3]),te.Td=w[P+4]>>6,te.i=16383&(w[P+6]<<8|w[P+5]),te.Ud=w[P+6]>>6,P+=7,z-=7,E.za=te.c+15>>4,E.Ub=te.i+15>>4,y.width=te.c,y.height=te.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,r((W=E.Pa).jb,0,255,W.jb.length),e((W=E.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,r(W.Zb,0,0,W.Zb.length),r(W.Lb,0,0,W.Lb)}if(X.ub>z)return Ds(E,7,"bad partition length");Te(W=E.m,w,P,X.ub),P+=X.ub,z-=X.ub,X.Rb&&(te.Ld=de(W),te.Kd=de(W)),te=E.Qa;var ie,me=E.Pa;if(e(W!=null),e(te!=null),te.Cb=de(W),te.Cb){if(te.Bb=de(W),de(W)){for(te.Fb=de(W),ie=0;4>ie;++ie)te.Zb[ie]=de(W)?he(W,7):0;for(ie=0;4>ie;++ie)te.Lb[ie]=de(W)?he(W,6):0}if(te.Bb)for(ie=0;3>ie;++ie)me.jb[ie]=de(W)?G(W,8):255}else te.Bb=0;if(W.Ka)return Ds(E,3,"cannot parse segment header");if((te=E.ed).zd=de(W),te.Tb=G(W,6),te.wb=G(W,3),te.Pc=de(W),te.Pc&&de(W)){for(me=0;4>me;++me)de(W)&&(te.vd[me]=he(W,6));for(me=0;4>me;++me)de(W)&&(te.od[me]=he(W,6))}if(E.L=te.Tb==0?0:te.zd?1:2,W.Ka)return Ds(E,3,"cannot parse filter header");var Ce=z;if(z=ie=P,P=ie+Ce,te=Ce,E.Xb=(1<<G(E.m,2))-1,Ce<3*(me=E.Xb))w=7;else{for(ie+=3*me,te-=3*me,Ce=0;Ce<me;++Ce){var He=w[z+0]|w[z+1]<<8|w[z+2]<<16;He>te&&(He=te),Te(E.Jc[+Ce],w,ie,He),ie+=He,te-=He,z+=3}Te(E.Jc[+me],w,ie,te),w=ie<P?0:5}if(w!=0)return Ds(E,w,"cannot parse partitions");for(w=G(ie=E.m,7),z=de(ie)?he(ie,4):0,P=de(ie)?he(ie,4):0,te=de(ie)?he(ie,4):0,me=de(ie)?he(ie,4):0,ie=de(ie)?he(ie,4):0,Ce=E.Qa,He=0;4>He;++He){if(Ce.Cb){var Ve=Ce.Zb[He];Ce.Fb||(Ve+=w)}else{if(0<He){E.pb[He]=E.pb[0];continue}Ve=w}var Oe=E.pb[He];Oe.Sc[0]=It[hr(Ve+z,127)],Oe.Sc[1]=sn[hr(Ve+0,127)],Oe.Eb[0]=2*It[hr(Ve+P,127)],Oe.Eb[1]=101581*sn[hr(Ve+te,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=It[hr(Ve+me,117)],Oe.Qc[1]=sn[hr(Ve+ie,127)],Oe.lc=Ve+ie}if(!X.Rb)return Ds(E,4,"Not a key frame.");for(de(W),X=E.Pa,w=0;4>w;++w){for(z=0;8>z;++z)for(P=0;3>P;++P)for(te=0;11>te;++te)me=Ne(W,Tl[w][z][P][te])?G(W,8):ga[w][z][P][te],X.Wc[w][z].Yb[P][te]=me;for(z=0;17>z;++z)X.Xc[w][z]=X.Wc[w][lf[z]]}return E.kc=de(W),E.kc&&(E.Bd=G(W,8)),E.cb=1}function wr(E,y,w,P,z,W,X){var te=y[z].Yb[w];for(w=0;16>z;++z){if(!Ne(E,te[w+0]))return z;for(;!Ne(E,te[w+1]);)if(te=y[++z].Yb[0],w=0,z==16)return 16;var ie=y[z+1].Yb;if(Ne(E,te[w+2])){var me=E,Ce=0;if(Ne(me,(Ve=te)[(He=w)+3]))if(Ne(me,Ve[He+6])){for(te=0,He=2*(Ce=Ne(me,Ve[He+8]))+(Ve=Ne(me,Ve[He+9+Ce])),Ce=0,Ve=an[He];Ve[te];++te)Ce+=Ce+Ne(me,Ve[te]);Ce+=3+(8<<He)}else Ne(me,Ve[He+7])?(Ce=7+2*Ne(me,165),Ce+=Ne(me,145)):Ce=5+Ne(me,159);else Ce=Ne(me,Ve[He+4])?3+Ne(me,Ve[He+5]):2;te=ie[2]}else Ce=1,te=ie[1];ie=X+rn[z],0>(me=E).b&&ve(me);var He,Ve=me.b,Oe=(He=me.Ca>>1)-(me.I>>Ve)>>31;--me.b,me.Ca+=Oe,me.Ca|=1,me.I-=(He+1&Oe)<<Ve,W[ie]=((Ce^Oe)-Oe)*P[(0<z)+0]}return 16}function dr(E){var y=E.rb[E.sb-1];y.la=0,y.Na=0,r(E.zc,0,0,E.zc.length),E.ja=0}function vs(E,y){if(E==null)return 0;if(y==null)return Ds(E,2,"NULL VP8Io parameter in VP8Decode().");if(!E.cb&&!Yr(E,y))return 0;if(e(E.cb),y.ac==null||y.ac(y)){y.ob&&(E.L=0);var w=wo[E.L];if(E.L==2?(E.yb=0,E.zb=0):(E.yb=y.v-w>>4,E.zb=y.j-w>>4,0>E.yb&&(E.yb=0),0>E.zb&&(E.zb=0)),E.Va=y.o+15+w>>4,E.Hb=y.va+15+w>>4,E.Hb>E.za&&(E.Hb=E.za),E.Va>E.Ub&&(E.Va=E.Ub),0<E.L){var P=E.ed;for(w=0;4>w;++w){var z;if(E.Qa.Cb){var W=E.Qa.Lb[w];E.Qa.Fb||(W+=P.Tb)}else W=P.Tb;for(z=0;1>=z;++z){var X=E.gd[w][z],te=W;if(P.Pc&&(te+=P.vd[0],z&&(te+=P.od[0])),0<(te=0>te?0:63<te?63:te)){var ie=te;0<P.wb&&(ie=4<P.wb?ie>>2:ie>>1)>9-P.wb&&(ie=9-P.wb),1>ie&&(ie=1),X.dd=ie,X.tc=2*te+ie,X.ld=40<=te?2:15<=te?1:0}else X.tc=0;X.La=z}}}w=0}else Ds(E,6,"Frame setup failed"),w=E.a;if(w=w==0){if(w){E.$c=0,0<E.Aa||(E.Ic=df);e:{w=E.Ic,P=4*(ie=E.za);var me=32*ie,Ce=ie+1,He=0<E.L?ie*(0<E.Aa?2:1):0,Ve=(E.Aa==2?2:1)*ie;if((X=P+832+(z=3*(16*w+wo[E.L])/2*me)+(W=E.Fa!=null&&0<E.Fa.length?E.Kc.c*E.Kc.i:0))!=X)w=0;else{if(X>E.Vb){if(E.Vb=0,E.Ec=i(X),E.Fc=0,E.Ec==null){w=Ds(E,1,"no memory during frame initialization.");break e}E.Vb=X}X=E.Ec,te=E.Fc,E.Ac=X,E.Bc=te,te+=P,E.Gd=c(me,sa),E.Hd=0,E.rb=c(Ce+1,da),E.sb=1,E.wa=He?c(He,Ns):null,E.Y=0,E.D.Nb=0,E.D.wa=E.wa,E.D.Y=E.Y,0<E.Aa&&(E.D.Y+=ie),e(!0),E.oc=X,E.pc=te,te+=832,E.ya=c(Ve,tr),E.aa=0,E.D.ya=E.ya,E.D.aa=E.aa,E.Aa==2&&(E.D.aa+=ie),E.R=16*ie,E.B=8*ie,ie=(me=wo[E.L])*E.R,me=me/2*E.B,E.sa=X,E.ta=te+ie,E.qa=E.sa,E.ra=E.ta+16*w*E.R+me,E.Ha=E.qa,E.Ia=E.ra+8*w*E.B+me,E.$c=0,te+=z,E.mb=W?X:null,E.nb=W?te:null,e(te+W<=E.Fc+E.Vb),dr(E),r(E.Ac,E.Bc,0,P),w=1}}if(w){if(y.ka=0,y.y=E.sa,y.O=E.ta,y.f=E.qa,y.N=E.ra,y.ea=E.Ha,y.Vd=E.Ia,y.fa=E.R,y.Rc=E.B,y.F=null,y.J=0,!Ui){for(w=-255;255>=w;++w)pa[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)Zr[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)io[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)oo[255+w]=0>w?0:255<w?255:w;Ui=1}Xr=za,Pr=bi,ar=Er,ya=ci,vr=Ti,Us=_i,To=Bt,yi=kt,Wo=Bn,no=Kn,so=Ct,ao=$t,No=Xn,Ko=zn,ro=_e,Bi=tt,vo=Xe,ra=rt,jr[0]=on,jr[1]=Ir,jr[2]=Zt,jr[3]=_n,jr[4]=ts,jr[5]=jn,jr[6]=Yn,jr[7]=yn,jr[8]=zr,jr[9]=Dr,Co[0]=dt,Co[1]=Ni,Co[2]=be,Co[3]=Re,Co[4]=bt,Co[5]=Dt,Co[6]=wt,pi[0]=fi,pi[1]=Da,pi[2]=fr,pi[3]=di,pi[4]=sr,pi[5]=fa,pi[6]=_r,w=1}else w=0}w&&(w=function(Oe,pt){for(Oe.M=0;Oe.M<Oe.Va;++Oe.M){var Ke,Le=Oe.Jc[Oe.M&Oe.Xb],De=Oe.m,lt=Oe;for(Ke=0;Ke<lt.za;++Ke){var gt=De,ft=lt,qt=ft.Ac,jt=ft.Bc+4*Ke,fn=ft.zc,Ut=ft.ya[ft.aa+Ke];if(ft.Qa.Bb?Ut.$b=Ne(gt,ft.Pa.jb[0])?2+Ne(gt,ft.Pa.jb[2]):Ne(gt,ft.Pa.jb[1]):Ut.$b=0,ft.kc&&(Ut.Ad=Ne(gt,ft.Bd)),Ut.Za=!Ne(gt,145)+0,Ut.Za){var As=Ut.Ob,Rs=0;for(ft=0;4>ft;++ft){var ns,Qn=fn[0+ft];for(ns=0;4>ns;++ns){Qn=Gl[qt[jt+ns]][Qn];for(var Vs=is[Ne(gt,Qn[0])];0<Vs;)Vs=is[2*Vs+Ne(gt,Qn[Vs])];Qn=-Vs,qt[jt+ns]=Qn}s(As,Rs,qt,jt,4),Rs+=4,fn[0+ft]=Qn}}else Qn=Ne(gt,156)?Ne(gt,128)?1:3:Ne(gt,163)?2:0,Ut.Ob[0]=Qn,r(qt,jt,Qn,4),r(fn,0,Qn,4);Ut.Dd=Ne(gt,142)?Ne(gt,114)?Ne(gt,183)?1:3:2:0}if(lt.m.Ka)return Ds(Oe,7,"Premature end-of-partition0 encountered.");for(;Oe.ja<Oe.za;++Oe.ja){if(lt=Le,gt=(De=Oe).rb[De.sb-1],qt=De.rb[De.sb+De.ja],Ke=De.ya[De.aa+De.ja],jt=De.kc?Ke.Ad:0)gt.la=qt.la=0,Ke.Za||(gt.Na=qt.Na=0),Ke.Hc=0,Ke.Gc=0,Ke.ia=0;else{var Os,Vn;if(gt=qt,qt=lt,jt=De.Pa.Xc,fn=De.ya[De.aa+De.ja],Ut=De.pb[fn.$b],ft=fn.ad,As=0,Rs=De.rb[De.sb-1],Qn=ns=0,r(ft,As,0,384),fn.Za)var Ys=0,gn=jt[3];else{Vs=i(16);var In=gt.Na+Rs.Na;if(In=Wt(qt,jt[1],In,Ut.Eb,0,Vs,0),gt.Na=Rs.Na=(0<In)+0,1<In)Xr(Vs,0,ft,As);else{var xs=Vs[0]+3>>3;for(Vs=0;256>Vs;Vs+=16)ft[As+Vs]=xs}Ys=1,gn=jt[0]}var Ss=15&gt.la,or=15&Rs.la;for(Vs=0;4>Vs;++Vs){var Ka=1&or;for(xs=Vn=0;4>xs;++xs)Ss=Ss>>1|(Ka=(In=Wt(qt,gn,In=Ka+(1&Ss),Ut.Sc,Ys,ft,As))>Ys)<<7,Vn=Vn<<2|(3<In?3:1<In?2:ft[As+0]!=0),As+=16;Ss>>=4,or=or>>1|Ka<<7,ns=(ns<<8|Vn)>>>0}for(gn=Ss,Ys=or>>4,Os=0;4>Os;Os+=2){for(Vn=0,Ss=gt.la>>4+Os,or=Rs.la>>4+Os,Vs=0;2>Vs;++Vs){for(Ka=1&or,xs=0;2>xs;++xs)In=Ka+(1&Ss),Ss=Ss>>1|(Ka=0<(In=Wt(qt,jt[2],In,Ut.Qc,0,ft,As)))<<3,Vn=Vn<<2|(3<In?3:1<In?2:ft[As+0]!=0),As+=16;Ss>>=2,or=or>>1|Ka<<5}Qn|=Vn<<4*Os,gn|=Ss<<4<<Os,Ys|=(240&or)<<Os}gt.la=gn,Rs.la=Ys,fn.Hc=ns,fn.Gc=Qn,fn.ia=43690&Qn?0:Ut.ia,jt=!(ns|Qn)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[Ke.$b][Ke.Za],De.wa[De.Y+De.ja].La|=!jt),lt.Ka)return Ds(Oe,7,"Premature end-of-file encountered.")}if(dr(Oe),De=pt,lt=1,Ke=(Le=Oe).D,gt=0<Le.L&&Le.M>=Le.zb&&Le.M<=Le.Va,Le.Aa==0)e:{if(Ke.M=Le.M,Ke.uc=gt,mi(Le,Ke),lt=1,Ke=(Vn=Le.D).Nb,gt=(Qn=wo[Le.L])*Le.R,qt=Qn/2*Le.B,Vs=16*Ke*Le.R,xs=8*Ke*Le.B,jt=Le.sa,fn=Le.ta-gt+Vs,Ut=Le.qa,ft=Le.ra-qt+xs,As=Le.Ha,Rs=Le.Ia-qt+xs,or=(Ss=Vn.M)==0,ns=Ss>=Le.Va-1,Le.Aa==2&&mi(Le,Vn),Vn.uc)for(Ka=(In=Le).D.M,e(In.D.uc),Vn=In.yb;Vn<In.Hb;++Vn){Ys=Vn,gn=Ka;var Oa=(Pa=(ia=In).D).Nb;Os=ia.R;var Pa=Pa.wa[Pa.Y+Ys],Fa=ia.sa,Li=ia.ta+16*Oa*Os+16*Ys,Ps=Pa.dd,Va=Pa.tc;if(Va!=0)if(e(3<=Va),ia.L==1)0<Ys&&Bi(Fa,Li,Os,Va+4),Pa.La&&ra(Fa,Li,Os,Va),0<gn&&ro(Fa,Li,Os,Va+4),Pa.La&&vo(Fa,Li,Os,Va);else{var Vi=ia.B,Qo=ia.qa,vl=ia.ra+8*Oa*Vi+8*Ys,el=ia.Ha,ia=ia.Ia+8*Oa*Vi+8*Ys;Oa=Pa.ld,0<Ys&&(yi(Fa,Li,Os,Va+4,Ps,Oa),no(Qo,vl,el,ia,Vi,Va+4,Ps,Oa)),Pa.La&&(ao(Fa,Li,Os,Va,Ps,Oa),Ko(Qo,vl,el,ia,Vi,Va,Ps,Oa)),0<gn&&(To(Fa,Li,Os,Va+4,Ps,Oa),Wo(Qo,vl,el,ia,Vi,Va+4,Ps,Oa)),Pa.La&&(so(Fa,Li,Os,Va,Ps,Oa),No(Qo,vl,el,ia,Vi,Va,Ps,Oa))}}if(Le.ia&&alert("todo:DitherRow"),De.put!=null){if(Vn=16*Ss,Ss=16*(Ss+1),or?(De.y=Le.sa,De.O=Le.ta+Vs,De.f=Le.qa,De.N=Le.ra+xs,De.ea=Le.Ha,De.W=Le.Ia+xs):(Vn-=Qn,De.y=jt,De.O=fn,De.f=Ut,De.N=ft,De.ea=As,De.W=Rs),ns||(Ss-=Qn),Ss>De.o&&(Ss=De.o),De.F=null,De.J=null,Le.Fa!=null&&0<Le.Fa.length&&Vn<Ss&&(De.J=_o(Le,De,Vn,Ss-Vn),De.F=Le.mb,De.F==null&&De.F.length==0)){lt=Ds(Le,3,"Could not decode alpha data.");break e}Vn<De.j&&(Qn=De.j-Vn,Vn=De.j,e(!(1&Qn)),De.O+=Le.R*Qn,De.N+=Le.B*(Qn>>1),De.W+=Le.B*(Qn>>1),De.F!=null&&(De.J+=De.width*Qn)),Vn<Ss&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=Vn-De.j,De.U=De.va-De.v,De.T=Ss-Vn,lt=De.put(De))}Ke+1!=Le.Ic||ns||(s(Le.sa,Le.ta-gt,jt,fn+16*Le.R,gt),s(Le.qa,Le.ra-qt,Ut,ft+8*Le.B,qt),s(Le.Ha,Le.Ia-qt,As,Rs+8*Le.B,qt))}if(!lt)return Ds(Oe,6,"Output aborted.")}return 1}(E,y)),y.bc!=null&&y.bc(y),w&=1}return w?(E.cb=0,w):0}function Ia(E,y,w,P,z){z=E[y+w+32*P]+(z>>3),E[y+w+32*P]=-256&z?0>z?0:255:z}function li(E,y,w,P,z,W){Ia(E,y,0,w,P+z),Ia(E,y,1,w,P+W),Ia(E,y,2,w,P-W),Ia(E,y,3,w,P-z)}function cs(E){return(20091*E>>16)+E}function qr(E,y,w,P){var z,W=0,X=i(16);for(z=0;4>z;++z){var te=E[y+0]+E[y+8],ie=E[y+0]-E[y+8],me=(35468*E[y+4]>>16)-cs(E[y+12]),Ce=cs(E[y+4])+(35468*E[y+12]>>16);X[W+0]=te+Ce,X[W+1]=ie+me,X[W+2]=ie-me,X[W+3]=te-Ce,W+=4,y++}for(z=W=0;4>z;++z)te=(E=X[W+0]+4)+X[W+8],ie=E-X[W+8],me=(35468*X[W+4]>>16)-cs(X[W+12]),Ia(w,P,0,0,te+(Ce=cs(X[W+4])+(35468*X[W+12]>>16))),Ia(w,P,1,0,ie+me),Ia(w,P,2,0,ie-me),Ia(w,P,3,0,te-Ce),W++,P+=32}function _i(E,y,w,P){var z=E[y+0]+4,W=35468*E[y+4]>>16,X=cs(E[y+4]),te=35468*E[y+1]>>16;li(w,P,0,z+X,E=cs(E[y+1]),te),li(w,P,1,z+W,E,te),li(w,P,2,z-W,E,te),li(w,P,3,z-X,E,te)}function bi(E,y,w,P,z){qr(E,y,w,P),z&&qr(E,y+16,w,P+4)}function Er(E,y,w,P){Pr(E,y+0,w,P,1),Pr(E,y+32,w,P+128,1)}function ci(E,y,w,P){var z;for(E=E[y+0]+4,z=0;4>z;++z)for(y=0;4>y;++y)Ia(w,P,y,z,E)}function Ti(E,y,w,P){E[y+0]&&ya(E,y+0,w,P),E[y+16]&&ya(E,y+16,w,P+4),E[y+32]&&ya(E,y+32,w,P+128),E[y+48]&&ya(E,y+48,w,P+128+4)}function za(E,y,w,P){var z,W=i(16);for(z=0;4>z;++z){var X=E[y+0+z]+E[y+12+z],te=E[y+4+z]+E[y+8+z],ie=E[y+4+z]-E[y+8+z],me=E[y+0+z]-E[y+12+z];W[0+z]=X+te,W[8+z]=X-te,W[4+z]=me+ie,W[12+z]=me-ie}for(z=0;4>z;++z)X=(E=W[0+4*z]+3)+W[3+4*z],te=W[1+4*z]+W[2+4*z],ie=W[1+4*z]-W[2+4*z],me=E-W[3+4*z],w[P+0]=X+te>>3,w[P+16]=me+ie>>3,w[P+32]=X-te>>3,w[P+48]=me-ie>>3,P+=64}function ui(E,y,w){var P,z=y-32,W=Ra,X=255-E[z-1];for(P=0;P<w;++P){var te,ie=W,me=X+E[y-1];for(te=0;te<w;++te)E[y+te]=ie[me+E[z+te]];y+=32}}function Ir(E,y){ui(E,y,4)}function Da(E,y){ui(E,y,8)}function Ni(E,y){ui(E,y,16)}function be(E,y){var w;for(w=0;16>w;++w)s(E,y+32*w,E,y-32,16)}function Re(E,y){var w;for(w=16;0<w;--w)r(E,y,E[y-1],16),y+=32}function ze(E,y,w){var P;for(P=0;16>P;++P)r(y,w+32*P,E,16)}function dt(E,y){var w,P=16;for(w=0;16>w;++w)P+=E[y-1+32*w]+E[y+w-32];ze(P>>5,E,y)}function bt(E,y){var w,P=8;for(w=0;16>w;++w)P+=E[y-1+32*w];ze(P>>4,E,y)}function Dt(E,y){var w,P=8;for(w=0;16>w;++w)P+=E[y+w-32];ze(P>>4,E,y)}function wt(E,y){ze(128,E,y)}function xt(E,y,w){return E+2*y+w+2>>2}function Zt(E,y){var w,P=y-32;for(P=new Uint8Array([xt(E[P-1],E[P+0],E[P+1]),xt(E[P+0],E[P+1],E[P+2]),xt(E[P+1],E[P+2],E[P+3]),xt(E[P+2],E[P+3],E[P+4])]),w=0;4>w;++w)s(E,y+32*w,P,0,P.length)}function _n(E,y){var w=E[y-1],P=E[y-1+32],z=E[y-1+64],W=E[y-1+96];Ue(E,y+0,16843009*xt(E[y-1-32],w,P)),Ue(E,y+32,16843009*xt(w,P,z)),Ue(E,y+64,16843009*xt(P,z,W)),Ue(E,y+96,16843009*xt(z,W,W))}function on(E,y){var w,P=4;for(w=0;4>w;++w)P+=E[y+w-32]+E[y-1+32*w];for(P>>=3,w=0;4>w;++w)r(E,y+32*w,P,4)}function ts(E,y){var w=E[y-1+0],P=E[y-1+32],z=E[y-1+64],W=E[y-1-32],X=E[y+0-32],te=E[y+1-32],ie=E[y+2-32],me=E[y+3-32];E[y+0+96]=xt(P,z,E[y-1+96]),E[y+1+96]=E[y+0+64]=xt(w,P,z),E[y+2+96]=E[y+1+64]=E[y+0+32]=xt(W,w,P),E[y+3+96]=E[y+2+64]=E[y+1+32]=E[y+0+0]=xt(X,W,w),E[y+3+64]=E[y+2+32]=E[y+1+0]=xt(te,X,W),E[y+3+32]=E[y+2+0]=xt(ie,te,X),E[y+3+0]=xt(me,ie,te)}function Yn(E,y){var w=E[y+1-32],P=E[y+2-32],z=E[y+3-32],W=E[y+4-32],X=E[y+5-32],te=E[y+6-32],ie=E[y+7-32];E[y+0+0]=xt(E[y+0-32],w,P),E[y+1+0]=E[y+0+32]=xt(w,P,z),E[y+2+0]=E[y+1+32]=E[y+0+64]=xt(P,z,W),E[y+3+0]=E[y+2+32]=E[y+1+64]=E[y+0+96]=xt(z,W,X),E[y+3+32]=E[y+2+64]=E[y+1+96]=xt(W,X,te),E[y+3+64]=E[y+2+96]=xt(X,te,ie),E[y+3+96]=xt(te,ie,ie)}function jn(E,y){var w=E[y-1+0],P=E[y-1+32],z=E[y-1+64],W=E[y-1-32],X=E[y+0-32],te=E[y+1-32],ie=E[y+2-32],me=E[y+3-32];E[y+0+0]=E[y+1+64]=W+X+1>>1,E[y+1+0]=E[y+2+64]=X+te+1>>1,E[y+2+0]=E[y+3+64]=te+ie+1>>1,E[y+3+0]=ie+me+1>>1,E[y+0+96]=xt(z,P,w),E[y+0+64]=xt(P,w,W),E[y+0+32]=E[y+1+96]=xt(w,W,X),E[y+1+32]=E[y+2+96]=xt(W,X,te),E[y+2+32]=E[y+3+96]=xt(X,te,ie),E[y+3+32]=xt(te,ie,me)}function yn(E,y){var w=E[y+0-32],P=E[y+1-32],z=E[y+2-32],W=E[y+3-32],X=E[y+4-32],te=E[y+5-32],ie=E[y+6-32],me=E[y+7-32];E[y+0+0]=w+P+1>>1,E[y+1+0]=E[y+0+64]=P+z+1>>1,E[y+2+0]=E[y+1+64]=z+W+1>>1,E[y+3+0]=E[y+2+64]=W+X+1>>1,E[y+0+32]=xt(w,P,z),E[y+1+32]=E[y+0+96]=xt(P,z,W),E[y+2+32]=E[y+1+96]=xt(z,W,X),E[y+3+32]=E[y+2+96]=xt(W,X,te),E[y+3+64]=xt(X,te,ie),E[y+3+96]=xt(te,ie,me)}function Dr(E,y){var w=E[y-1+0],P=E[y-1+32],z=E[y-1+64],W=E[y-1+96];E[y+0+0]=w+P+1>>1,E[y+2+0]=E[y+0+32]=P+z+1>>1,E[y+2+32]=E[y+0+64]=z+W+1>>1,E[y+1+0]=xt(w,P,z),E[y+3+0]=E[y+1+32]=xt(P,z,W),E[y+3+32]=E[y+1+64]=xt(z,W,W),E[y+3+64]=E[y+2+64]=E[y+0+96]=E[y+1+96]=E[y+2+96]=E[y+3+96]=W}function zr(E,y){var w=E[y-1+0],P=E[y-1+32],z=E[y-1+64],W=E[y-1+96],X=E[y-1-32],te=E[y+0-32],ie=E[y+1-32],me=E[y+2-32];E[y+0+0]=E[y+2+32]=w+X+1>>1,E[y+0+32]=E[y+2+64]=P+w+1>>1,E[y+0+64]=E[y+2+96]=z+P+1>>1,E[y+0+96]=W+z+1>>1,E[y+3+0]=xt(te,ie,me),E[y+2+0]=xt(X,te,ie),E[y+1+0]=E[y+3+32]=xt(w,X,te),E[y+1+32]=E[y+3+64]=xt(P,w,X),E[y+1+64]=E[y+3+96]=xt(z,P,w),E[y+1+96]=xt(W,z,P)}function fr(E,y){var w;for(w=0;8>w;++w)s(E,y+32*w,E,y-32,8)}function di(E,y){var w;for(w=0;8>w;++w)r(E,y,E[y-1],8),y+=32}function nr(E,y,w){var P;for(P=0;8>P;++P)r(y,w+32*P,E,8)}function fi(E,y){var w,P=8;for(w=0;8>w;++w)P+=E[y+w-32]+E[y-1+32*w];nr(P>>4,E,y)}function fa(E,y){var w,P=4;for(w=0;8>w;++w)P+=E[y+w-32];nr(P>>3,E,y)}function sr(E,y){var w,P=4;for(w=0;8>w;++w)P+=E[y-1+32*w];nr(P>>3,E,y)}function _r(E,y){nr(128,E,y)}function br(E,y,w){var P=E[y-w],z=E[y+0],W=3*(z-P)+Vl[1020+E[y-2*w]-E[y+w]],X=yo[112+(W+4>>3)];E[y-w]=Ra[255+P+yo[112+(W+3>>3)]],E[y+0]=Ra[255+z-X]}function Pi(E,y,w,P){var z=E[y+0],W=E[y+w];return yr[255+E[y-2*w]-E[y-w]]>P||yr[255+W-z]>P}function Zi(E,y,w,P){return 4*yr[255+E[y-w]-E[y+0]]+yr[255+E[y-2*w]-E[y+w]]<=P}function le(E,y,w,P,z){var W=E[y-3*w],X=E[y-2*w],te=E[y-w],ie=E[y+0],me=E[y+w],Ce=E[y+2*w],He=E[y+3*w];return 4*yr[255+te-ie]+yr[255+X-me]>P?0:yr[255+E[y-4*w]-W]<=z&&yr[255+W-X]<=z&&yr[255+X-te]<=z&&yr[255+He-Ce]<=z&&yr[255+Ce-me]<=z&&yr[255+me-ie]<=z}function _e(E,y,w,P){var z=2*P+1;for(P=0;16>P;++P)Zi(E,y+P,w,z)&&br(E,y+P,w)}function tt(E,y,w,P){var z=2*P+1;for(P=0;16>P;++P)Zi(E,y+P*w,1,z)&&br(E,y+P*w,1)}function Xe(E,y,w,P){var z;for(z=3;0<z;--z)_e(E,y+=4*w,w,P)}function rt(E,y,w,P){var z;for(z=3;0<z;--z)tt(E,y+=4,w,P)}function _t(E,y,w,P,z,W,X,te){for(W=2*W+1;0<z--;){if(le(E,y,w,W,X))if(Pi(E,y,w,te))br(E,y,w);else{var ie=E,me=y,Ce=w,He=ie[me-2*Ce],Ve=ie[me-Ce],Oe=ie[me+0],pt=ie[me+Ce],Ke=ie[me+2*Ce],Le=27*(lt=Vl[1020+3*(Oe-Ve)+Vl[1020+He-pt]])+63>>7,De=18*lt+63>>7,lt=9*lt+63>>7;ie[me-3*Ce]=Ra[255+ie[me-3*Ce]+lt],ie[me-2*Ce]=Ra[255+He+De],ie[me-Ce]=Ra[255+Ve+Le],ie[me+0]=Ra[255+Oe-Le],ie[me+Ce]=Ra[255+pt-De],ie[me+2*Ce]=Ra[255+Ke-lt]}y+=P}}function mt(E,y,w,P,z,W,X,te){for(W=2*W+1;0<z--;){if(le(E,y,w,W,X))if(Pi(E,y,w,te))br(E,y,w);else{var ie=E,me=y,Ce=w,He=ie[me-Ce],Ve=ie[me+0],Oe=ie[me+Ce],pt=yo[112+((Ke=3*(Ve-He))+4>>3)],Ke=yo[112+(Ke+3>>3)],Le=pt+1>>1;ie[me-2*Ce]=Ra[255+ie[me-2*Ce]+Le],ie[me-Ce]=Ra[255+He+Ke],ie[me+0]=Ra[255+Ve-pt],ie[me+Ce]=Ra[255+Oe-Le]}y+=P}}function Bt(E,y,w,P,z,W){_t(E,y,w,1,16,P,z,W)}function kt(E,y,w,P,z,W){_t(E,y,1,w,16,P,z,W)}function Ct(E,y,w,P,z,W){var X;for(X=3;0<X;--X)mt(E,y+=4*w,w,1,16,P,z,W)}function $t(E,y,w,P,z,W){var X;for(X=3;0<X;--X)mt(E,y+=4,1,w,16,P,z,W)}function Bn(E,y,w,P,z,W,X,te){_t(E,y,z,1,8,W,X,te),_t(w,P,z,1,8,W,X,te)}function Kn(E,y,w,P,z,W,X,te){_t(E,y,1,z,8,W,X,te),_t(w,P,1,z,8,W,X,te)}function Xn(E,y,w,P,z,W,X,te){mt(E,y+4*z,z,1,8,W,X,te),mt(w,P+4*z,z,1,8,W,X,te)}function zn(E,y,w,P,z,W,X,te){mt(E,y+4,1,z,8,W,X,te),mt(w,P+4,1,z,8,W,X,te)}function ha(){this.ba=new js,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ls,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function aa(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new H}function dn(){this.xb=this.a=0,this.l=new mn,this.ca=new js,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new aa,this.ab=0,this.gc=c(4,Gs),this.Oc=0}function ys(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Tr(E,y,w,P,z,W,X){for(E=E==null?0:E[y+0],y=0;y<X;++y)z[W+y]=E+w[P+y]&255,E=z[W+y]}function Yo(E,y,w,P,z,W,X){var te;if(E==null)Tr(null,null,w,P,z,W,X);else for(te=0;te<X;++te)z[W+te]=E[y+te]+w[P+te]&255}function Mi(E,y,w,P,z,W,X){if(E==null)Tr(null,null,w,P,z,W,X);else{var te,ie=E[y+0],me=ie,Ce=ie;for(te=0;te<X;++te)me=Ce+(ie=E[y+te])-me,Ce=w[P+te]+(-256&me?0>me?0:255:me)&255,me=ie,z[W+te]=Ce}}function _o(E,y,w,P){var z=y.width,W=y.o;if(e(E!=null&&y!=null),0>w||0>=P||w+P>W)return null;if(!E.Cc){if(E.ga==null){var X;if(E.ga=new ys,(X=E.ga==null)||(X=y.width*y.o,e(E.Gb.length==0),E.Gb=i(X),E.Uc=0,E.Gb==null?X=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,X=1),X=!X),!X){X=E.ga;var te=E.Fa,ie=E.P,me=E.qc,Ce=E.mb,He=E.nb,Ve=ie+1,Oe=me-1,pt=X.l;if(e(te!=null&&Ce!=null&&y!=null),co[0]=null,co[1]=Tr,co[2]=Yo,co[3]=Mi,X.ca=Ce,X.tb=He,X.c=y.width,X.i=y.height,e(0<X.c&&0<X.i),1>=me)y=0;else if(X.$a=te[ie+0]>>0&3,X.Z=te[ie+0]>>2&3,X.Lc=te[ie+0]>>4&3,ie=te[ie+0]>>6&3,0>X.$a||1<X.$a||4<=X.Z||1<X.Lc||ie)y=0;else if(pt.put=ca,pt.ac=gs,pt.bc=vn,pt.ma=X,pt.width=y.width,pt.height=y.height,pt.Da=y.Da,pt.v=y.v,pt.va=y.va,pt.j=y.j,pt.o=y.o,X.$a)e:{e(X.$a==1),y=Ts();t:for(;;){if(y==null){y=0;break e}if(e(X!=null),X.mc=y,y.c=X.c,y.i=X.i,y.l=X.l,y.l.ma=X,y.l.width=X.c,y.l.height=X.i,y.a=0,ue(y.m,te,Ve,Oe),!$n(X.c,X.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Ca(y.s)?(X.ic=1,te=y.c*y.i,y.Ta=null,y.Ua=0,y.V=i(te),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(X.ic=0,y=La(y,X.c)),!y))break t;y=1;break e}X.mc=null,y=0}else y=Oe>=X.c*X.i;X=!y}if(X)return null;E.ga.Lc!=1?E.Ga=0:P=W-w}e(E.ga!=null),e(w+P<=W);e:{if(y=(te=E.ga).c,W=te.l.o,te.$a==0){if(Ve=E.rc,Oe=E.Vc,pt=E.Fa,ie=E.P+1+w*y,me=E.mb,Ce=E.nb+w*y,e(ie<=E.P+E.qc),te.Z!=0)for(e(co[te.Z]!=null),X=0;X<P;++X)co[te.Z](Ve,Oe,pt,ie,me,Ce,y),Ve=me,Oe=Ce,Ce+=y,ie+=y;else for(X=0;X<P;++X)s(me,Ce,pt,ie,y),Ve=me,Oe=Ce,Ce+=y,ie+=y;E.rc=Ve,E.Vc=Oe}else{if(e(te.mc!=null),y=w+P,e((X=te.mc)!=null),e(y<=X.i),X.C>=y)y=1;else if(te.ic||Me(),te.ic){te=X.V,Ve=X.Ba,Oe=X.c;var Ke=X.i,Le=(pt=1,ie=X.$/Oe,me=X.$%Oe,Ce=X.m,He=X.s,X.$),De=Oe*Ke,lt=Oe*y,gt=He.wc,ft=Le<lt?_s(He,me,ie):null;e(Le<=De),e(y<=Ke),e(Ca(He));t:for(;;){for(;!Ce.h&&Le<lt;){if(me&gt||(ft=_s(He,me,ie)),e(ft!=null),fe(Ce),256>(Ke=Fn(ft.G[0],ft.H[0],Ce)))te[Ve+Le]=Ke,++Le,++me>=Oe&&(me=0,++ie<=y&&!(ie%16)&&bs(X,ie));else{if(!(280>Ke)){pt=0;break t}Ke=Ln(Ke-256,Ce);var qt,jt=Fn(ft.G[4],ft.H[4],Ce);if(fe(Ce),!(Le>=(jt=kn(Oe,jt=Ln(jt,Ce)))&&De-Le>=Ke)){pt=0;break t}for(qt=0;qt<Ke;++qt)te[Ve+Le+qt]=te[Ve+Le+qt-jt];for(Le+=Ke,me+=Ke;me>=Oe;)me-=Oe,++ie<=y&&!(ie%16)&&bs(X,ie);Le<lt&&me&gt&&(ft=_s(He,me,ie))}e(Ce.h==Y(Ce))}bs(X,ie>y?y:ie);break t}!pt||Ce.h&&Le<De?(pt=0,X.a=Ce.h?5:3):X.$=Le,y=pt}else y=Qt(X,X.V,X.Ba,X.c,X.i,y,ua);if(!y){P=0;break e}}w+P>=W&&(E.Cc=1),P=1}if(!P)return null;if(E.Cc&&((P=E.ga)!=null&&(P.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+w*z}function S(E,y,w,P,z,W){for(;0<z--;){var X,te=E,ie=y+(w?1:0),me=E,Ce=y+(w?0:3);for(X=0;X<P;++X){var He=me[Ce+4*X];He!=255&&(He*=32897,te[ie+4*X+0]=te[ie+4*X+0]*He>>23,te[ie+4*X+1]=te[ie+4*X+1]*He>>23,te[ie+4*X+2]=te[ie+4*X+2]*He>>23)}y+=W}}function q(E,y,w,P,z){for(;0<P--;){var W;for(W=0;W<w;++W){var X=E[y+2*W+0],te=15&(me=E[y+2*W+1]),ie=4369*te,me=(240&me|me>>4)*ie>>16;E[y+2*W+0]=(240&X|X>>4)*ie>>16&240|(15&X|X<<4)*ie>>16>>4&15,E[y+2*W+1]=240&me|te}y+=z}}function Ee(E,y,w,P,z,W,X,te){var ie,me,Ce=255;for(me=0;me<z;++me){for(ie=0;ie<P;++ie){var He=E[y+ie];W[X+4*ie]=He,Ce&=He}y+=w,X+=te}return Ce!=255}function Ae(E,y,w,P,z){var W;for(W=0;W<z;++W)w[P+W]=E[y+W]>>8}function Me(){Mr=S,Zn=q,Jn=Ee,Fs=Ae}function et(E,y,w){J[E]=function(P,z,W,X,te,ie,me,Ce,He,Ve,Oe,pt,Ke,Le,De,lt,gt){var ft,qt=gt-1>>1,jt=te[ie+0]|me[Ce+0]<<16,fn=He[Ve+0]|Oe[pt+0]<<16;e(P!=null);var Ut=3*jt+fn+131074>>2;for(y(P[z+0],255&Ut,Ut>>16,Ke,Le),W!=null&&(Ut=3*fn+jt+131074>>2,y(W[X+0],255&Ut,Ut>>16,De,lt)),ft=1;ft<=qt;++ft){var As=te[ie+ft]|me[Ce+ft]<<16,Rs=He[Ve+ft]|Oe[pt+ft]<<16,ns=jt+As+fn+Rs+524296,Qn=ns+2*(As+fn)>>3;Ut=Qn+jt>>1,jt=(ns=ns+2*(jt+Rs)>>3)+As>>1,y(P[z+2*ft-1],255&Ut,Ut>>16,Ke,Le+(2*ft-1)*w),y(P[z+2*ft-0],255&jt,jt>>16,Ke,Le+(2*ft-0)*w),W!=null&&(Ut=ns+fn>>1,jt=Qn+Rs>>1,y(W[X+2*ft-1],255&Ut,Ut>>16,De,lt+(2*ft-1)*w),y(W[X+2*ft+0],255&jt,jt>>16,De,lt+(2*ft+0)*w)),jt=As,fn=Rs}1&gt||(Ut=3*jt+fn+131074>>2,y(P[z+gt-1],255&Ut,Ut>>16,Ke,Le+(gt-1)*w),W!=null&&(Ut=3*fn+jt+131074>>2,y(W[X+gt-1],255&Ut,Ut>>16,De,lt+(gt-1)*w)))}}function vt(){ir[rr]=Lo,ir[Xo]=uo,ir[Ai]=Zo,ir[lo]=eu,ir[Ao]=tu,ir[Fi]=Yl,ir[El]=nu,ir[_l]=uo,ir[Si]=eu,ir[Ci]=tu,ir[So]=Yl}function Vt(E){return E&-16384?0>E?0:255:E>>tm}function Jt(E,y){return Vt((19077*E>>8)+(26149*y>>8)-14234)}function pn(E,y,w){return Vt((19077*E>>8)-(6419*y>>8)-(13320*w>>8)+8708)}function wn(E,y){return Vt((19077*E>>8)+(33050*y>>8)-17685)}function as(E,y,w,P,z){P[z+0]=Jt(E,w),P[z+1]=pn(E,y,w),P[z+2]=wn(E,y)}function Ks(E,y,w,P,z){P[z+0]=wn(E,y),P[z+1]=pn(E,y,w),P[z+2]=Jt(E,w)}function Xs(E,y,w,P,z){var W=pn(E,y,w);y=W<<3&224|wn(E,y)>>3,P[z+0]=248&Jt(E,w)|W>>5,P[z+1]=y}function ma(E,y,w,P,z){var W=240&wn(E,y)|15;P[z+0]=240&Jt(E,w)|pn(E,y,w)>>4,P[z+1]=W}function Hs(E,y,w,P,z){P[z+0]=255,as(E,y,w,P,z+1)}function ja(E,y,w,P,z){Ks(E,y,w,P,z),P[z+3]=255}function Rr(E,y,w,P,z){as(E,y,w,P,z),P[z+3]=255}function hr(E,y){return 0>E?0:E>y?y:E}function Or(E,y,w){J[E]=function(P,z,W,X,te,ie,me,Ce,He){for(var Ve=Ce+(-2&He)*w;Ce!=Ve;)y(P[z+0],W[X+0],te[ie+0],me,Ce),y(P[z+1],W[X+0],te[ie+0],me,Ce+w),z+=2,++X,++ie,Ce+=2*w;1&He&&y(P[z+0],W[X+0],te[ie+0],me,Ce)}}function qo(E,y,w){return w==0?E==0?y==0?6:5:y==0?4:0:w}function hi(E,y,w,P,z){switch(E>>>30){case 3:Pr(y,w,P,z,0);break;case 2:Us(y,w,P,z);break;case 1:ya(y,w,P,z)}}function mi(E,y){var w,P,z=y.M,W=y.Nb,X=E.oc,te=E.pc+40,ie=E.oc,me=E.pc+584,Ce=E.oc,He=E.pc+600;for(w=0;16>w;++w)X[te+32*w-1]=129;for(w=0;8>w;++w)ie[me+32*w-1]=129,Ce[He+32*w-1]=129;for(0<z?X[te-1-32]=ie[me-1-32]=Ce[He-1-32]=129:(r(X,te-32-1,127,21),r(ie,me-32-1,127,9),r(Ce,He-32-1,127,9)),P=0;P<E.za;++P){var Ve=y.ya[y.aa+P];if(0<P){for(w=-1;16>w;++w)s(X,te+32*w-4,X,te+32*w+12,4);for(w=-1;8>w;++w)s(ie,me+32*w-4,ie,me+32*w+4,4),s(Ce,He+32*w-4,Ce,He+32*w+4,4)}var Oe=E.Gd,pt=E.Hd+P,Ke=Ve.ad,Le=Ve.Hc;if(0<z&&(s(X,te-32,Oe[pt].y,0,16),s(ie,me-32,Oe[pt].f,0,8),s(Ce,He-32,Oe[pt].ea,0,8)),Ve.Za){var De=X,lt=te-32+16;for(0<z&&(P>=E.za-1?r(De,lt,Oe[pt].y[15],4):s(De,lt,Oe[pt+1].y,0,4)),w=0;4>w;w++)De[lt+128+w]=De[lt+256+w]=De[lt+384+w]=De[lt+0+w];for(w=0;16>w;++w,Le<<=2)De=X,lt=te+Nl[w],jr[Ve.Ob[w]](De,lt),hi(Le,Ke,16*+w,De,lt)}else if(De=qo(P,z,Ve.Ob[0]),Co[De](X,te),Le!=0)for(w=0;16>w;++w,Le<<=2)hi(Le,Ke,16*+w,X,te+Nl[w]);for(w=Ve.Gc,De=qo(P,z,Ve.Dd),pi[De](ie,me),pi[De](Ce,He),Le=Ke,De=ie,lt=me,255&(Ve=w>>0)&&(170&Ve?ar(Le,256,De,lt):vr(Le,256,De,lt)),Ve=Ce,Le=He,255&(w>>=8)&&(170&w?ar(Ke,320,Ve,Le):vr(Ke,320,Ve,Le)),z<E.Ub-1&&(s(Oe[pt].y,0,X,te+480,16),s(Oe[pt].f,0,ie,me+224,8),s(Oe[pt].ea,0,Ce,He+224,8)),w=8*W*E.B,Oe=E.sa,pt=E.ta+16*P+16*W*E.R,Ke=E.qa,Ve=E.ra+8*P+w,Le=E.Ha,De=E.Ia+8*P+w,w=0;16>w;++w)s(Oe,pt+w*E.R,X,te+32*w,16);for(w=0;8>w;++w)s(Ke,Ve+w*E.B,ie,me+32*w,8),s(Le,De+w*E.B,Ce,He+32*w,8)}}function Ji(E,y,w,P,z,W,X,te,ie){var me=[0],Ce=[0],He=0,Ve=ie!=null?ie.kd:0,Oe=ie??new bn;if(E==null||12>w)return 7;Oe.data=E,Oe.w=y,Oe.ha=w,y=[y],w=[w],Oe.gb=[Oe.gb];e:{var pt=y,Ke=w,Le=Oe.gb;if(e(E!=null),e(Ke!=null),e(Le!=null),Le[0]=0,12<=Ke[0]&&!t(E,pt[0],"RIFF")){if(t(E,pt[0]+8,"WEBP")){Le=3;break e}var De=Ze(E,pt[0]+4);if(12>De||4294967286<De){Le=3;break e}if(Ve&&De>Ke[0]-8){Le=7;break e}Le[0]=De,pt[0]+=12,Ke[0]-=12}Le=0}if(Le!=0)return Le;for(De=0<Oe.gb[0],w=w[0];;){e:{var lt=E;Ke=y,Le=w;var gt=me,ft=Ce,qt=pt=[0];if((Ut=He=[He])[0]=0,8>Le[0])Le=7;else{if(!t(lt,Ke[0],"VP8X")){if(Ze(lt,Ke[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var jt=Ze(lt,Ke[0]+8),fn=1+Je(lt,Ke[0]+12);if(2147483648<=fn*(lt=1+Je(lt,Ke[0]+15))){Le=3;break e}qt!=null&&(qt[0]=jt),gt!=null&&(gt[0]=fn),ft!=null&&(ft[0]=lt),Ke[0]+=18,Le[0]-=18,Ut[0]=1}Le=0}}if(He=He[0],pt=pt[0],Le!=0)return Le;if(Ke=!!(2&pt),!De&&He)return 3;if(W!=null&&(W[0]=!!(16&pt)),X!=null&&(X[0]=Ke),te!=null&&(te[0]=0),X=me[0],pt=Ce[0],He&&Ke&&ie==null){Le=0;break}if(4>w){Le=7;break}if(De&&He||!De&&!He&&!t(E,y[0],"ALPH")){w=[w],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{jt=E,Le=y,De=w;var Ut=Oe.gb;gt=Oe.na,ft=Oe.P,qt=Oe.Sa,fn=22,e(jt!=null),e(De!=null),lt=Le[0];var As=De[0];for(e(gt!=null),e(qt!=null),gt[0]=null,ft[0]=null,qt[0]=0;;){if(Le[0]=lt,De[0]=As,8>As){Le=7;break e}var Rs=Ze(jt,lt+4);if(4294967286<Rs){Le=3;break e}var ns=8+Rs+1&-2;if(fn+=ns,0<Ut&&fn>Ut){Le=3;break e}if(!t(jt,lt,"VP8 ")||!t(jt,lt,"VP8L")){Le=0;break e}if(As[0]<ns){Le=7;break e}t(jt,lt,"ALPH")||(gt[0]=jt,ft[0]=lt+8,qt[0]=Rs),lt+=ns,As-=ns}}if(w=w[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],Le!=0)break}w=[w],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(Ut=E,Le=y,De=w,gt=Oe.gb[0],ft=Oe.Ja,qt=Oe.xa,jt=Le[0],lt=!t(Ut,jt,"VP8 "),fn=!t(Ut,jt,"VP8L"),e(Ut!=null),e(De!=null),e(ft!=null),e(qt!=null),8>De[0])Le=7;else{if(lt||fn){if(Ut=Ze(Ut,jt+4),12<=gt&&Ut>gt-12){Le=3;break e}if(Ve&&Ut>De[0]-8){Le=7;break e}ft[0]=Ut,Le[0]+=8,De[0]-=8,qt[0]=fn}else qt[0]=5<=De[0]&&Ut[jt+0]==47&&!(Ut[jt+4]>>5),ft[0]=De[0];Le=0}if(w=w[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],y=y[0],Le!=0)break;if(4294967286<Oe.Ja)return 3;if(te==null||Ke||(te[0]=Oe.xa?2:1),X=[X],pt=[pt],Oe.xa){if(5>w){Le=7;break}te=X,Ve=pt,Ke=W,E==null||5>w?E=0:5<=w&&E[y+0]==47&&!(E[y+4]>>5)?(De=[0],Ut=[0],gt=[0],ue(ft=new M,E,y,w),Xt(ft,De,Ut,gt)?(te!=null&&(te[0]=De[0]),Ve!=null&&(Ve[0]=Ut[0]),Ke!=null&&(Ke[0]=gt[0]),E=1):E=0):E=0}else{if(10>w){Le=7;break}te=pt,E==null||10>w||!ea(E,y+3,w-3)?E=0:(Ve=E[y+0]|E[y+1]<<8|E[y+2]<<16,Ke=16383&(E[y+7]<<8|E[y+6]),E=16383&(E[y+9]<<8|E[y+8]),1&Ve||3<(Ve>>1&7)||!(Ve>>4&1)||Ve>>5>=Oe.Ja||!Ke||!E?E=0:(X&&(X[0]=Ke),te&&(te[0]=E),E=1))}if(!E||(X=X[0],pt=pt[0],He&&(me[0]!=X||Ce[0]!=pt)))return 3;ie!=null&&(ie[0]=Oe,ie.offset=y-ie.w,e(4294967286>y-ie.w),e(ie.offset==ie.ha-w));break}return Le==0||Le==7&&He&&ie==null?(W!=null&&(W[0]|=Oe.na!=null&&0<Oe.na.length),P!=null&&(P[0]=X),z!=null&&(z[0]=pt),0):Le}function $r(E,y,w){var P=y.width,z=y.height,W=0,X=0,te=P,ie=z;if(y.Da=E!=null&&0<E.Da,y.Da&&(te=E.cd,ie=E.bd,W=E.v,X=E.j,11>w||(W&=-2,X&=-2),0>W||0>X||0>=te||0>=ie||W+te>P||X+ie>z))return 0;if(y.v=W,y.j=X,y.va=W+te,y.o=X+ie,y.U=te,y.T=ie,y.da=E!=null&&0<E.da,y.da){if(!Fe(te,ie,w=[E.ib],W=[E.hb]))return 0;y.ib=w[0],y.hb=W[0]}return y.ob=E!=null&&E.ob,y.Kb=E==null||!E.Sd,y.da&&(y.ob=y.ib<3*P/4&&y.hb<3*z/4,y.Kb=0),1}function zo(E){if(E==null)return 2;if(11>E.S){var y=E.f.RGBA;y.fb+=(E.height-1)*y.A,y.A=-y.A}else y=E.f.kb,E=E.height,y.O+=(E-1)*y.fa,y.fa=-y.fa,y.N+=(E-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(E-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(E-1)*y.lb,y.lb=-y.lb);return 0}function Qi(E,y,w,P){if(P==null||0>=E||0>=y)return 2;if(w!=null){if(w.Da){var z=w.cd,W=w.bd,X=-2&w.v,te=-2&w.j;if(0>X||0>te||0>=z||0>=W||X+z>E||te+W>y)return 2;E=z,y=W}if(w.da){if(!Fe(E,y,z=[w.ib],W=[w.hb]))return 2;E=z[0],y=W[0]}}P.width=E,P.height=y;e:{var ie=P.width,me=P.height;if(E=P.S,0>=ie||0>=me||!(E>=rr&&13>E))E=2;else{if(0>=P.Rd&&P.sd==null){X=W=z=y=0;var Ce=(te=ie*ff[E])*me;if(11>E||(W=(me+1)/2*(y=(ie+1)/2),E==12&&(X=(z=ie)*me)),(me=i(Ce+2*W+X))==null){E=1;break e}P.sd=me,11>E?((ie=P.f.RGBA).eb=me,ie.fb=0,ie.A=te,ie.size=Ce):((ie=P.f.kb).y=me,ie.O=0,ie.fa=te,ie.Fd=Ce,ie.f=me,ie.N=0+Ce,ie.Ab=y,ie.Cd=W,ie.ea=me,ie.W=0+Ce+W,ie.Db=y,ie.Ed=W,E==12&&(ie.F=me,ie.J=0+Ce+2*W),ie.Tc=X,ie.lb=z)}if(y=1,z=P.S,W=P.width,X=P.height,z>=rr&&13>z)if(11>z)E=P.f.RGBA,y&=(te=Math.abs(E.A))*(X-1)+W<=E.size,y&=te>=W*ff[z],y&=E.eb!=null;else{E=P.f.kb,te=(W+1)/2,Ce=(X+1)/2,ie=Math.abs(E.fa),me=Math.abs(E.Ab);var He=Math.abs(E.Db),Ve=Math.abs(E.lb),Oe=Ve*(X-1)+W;y&=ie*(X-1)+W<=E.Fd,y&=me*(Ce-1)+te<=E.Cd,y=(y&=He*(Ce-1)+te<=E.Ed)&ie>=W&me>=te&He>=te,y&=E.y!=null,y&=E.f!=null,y&=E.ea!=null,z==12&&(y&=Ve>=W,y&=Oe<=E.Tc,y&=E.F!=null)}else y=0;E=y?0:2}}return E!=0||w!=null&&w.fd&&(E=zo(P)),E}var Na=64,ki=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ji=24,bo=32,$o=8,mr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(E){return E},J.Predictor2=function(E,y,w){return y[w+0]},J.Predictor3=function(E,y,w){return y[w+1]},J.Predictor4=function(E,y,w){return y[w-1]},J.Predictor5=function(E,y,w){return st(st(E,y[w+1]),y[w+0])},J.Predictor6=function(E,y,w){return st(E,y[w-1])},J.Predictor7=function(E,y,w){return st(E,y[w+0])},J.Predictor8=function(E,y,w){return st(y[w-1],y[w+0])},J.Predictor9=function(E,y,w){return st(y[w+0],y[w+1])},J.Predictor10=function(E,y,w){return st(st(E,y[w-1]),st(y[w+0],y[w+1]))},J.Predictor11=function(E,y,w){var P=y[w+0];return 0>=Rt(P>>24&255,E>>24&255,(y=y[w-1])>>24&255)+Rt(P>>16&255,E>>16&255,y>>16&255)+Rt(P>>8&255,E>>8&255,y>>8&255)+Rt(255&P,255&E,255&y)?P:E},J.Predictor12=function(E,y,w){var P=y[w+0];return(Nt((E>>24&255)+(P>>24&255)-((y=y[w-1])>>24&255))<<24|Nt((E>>16&255)+(P>>16&255)-(y>>16&255))<<16|Nt((E>>8&255)+(P>>8&255)-(y>>8&255))<<8|Nt((255&E)+(255&P)-(255&y)))>>>0},J.Predictor13=function(E,y,w){var P=y[w-1];return(Pt((E=st(E,y[w+0]))>>24&255,P>>24&255)<<24|Pt(E>>16&255,P>>16&255)<<16|Pt(E>>8&255,P>>8&255)<<8|Pt(E>>0&255,P>>0&255))>>>0};var Ac=J.PredictorAdd0;J.PredictorAdd1=Ft,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var gl=J.PredictorAdd2;Lt("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),Lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Fl,Wr=J.ColorIndexInverseTransform,Ba=J.MapARGB,eo=J.VP8LColorIndexInverseTransformAlpha,xl=J.MapAlpha,vi=J.VP8LPredictorsAdd=[];vi.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var to,pr,va,Kr,Ua,Nr,Xr,Pr,Us,ar,ya,vr,To,yi,Wo,no,so,ao,No,Ko,ro,Bi,vo,ra,Mr,Zn,Jn,Fs,pa=i(511),Zr=i(2041),io=i(225),oo=i(767),Ui=0,Vl=Zr,yo=io,Ra=oo,yr=pa,rr=0,Xo=1,Ai=2,lo=3,Ao=4,Fi=5,El=6,_l=7,Si=8,Ci=9,So=10,bl=[2,3,7],kr=[3,3,11],$=[280,256,256,256,40],Se=[0,1,1,1,0],ot=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],at=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],St=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Mt=8,It=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wt=null,an=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],is=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ga=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Gl=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Tl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Co=[],jr=[],pi=[],cf=1,Hl=2,co=[],ir=[];et("UpsampleRgbLinePair",as,3),et("UpsampleBgrLinePair",Ks,3),et("UpsampleRgbaLinePair",Rr,4),et("UpsampleBgraLinePair",ja,4),et("UpsampleArgbLinePair",Hs,4),et("UpsampleRgba4444LinePair",ma,2),et("UpsampleRgb565LinePair",Xs,2);var Lo=J.UpsampleRgbLinePair,Zo=J.UpsampleBgrLinePair,uo=J.UpsampleRgbaLinePair,eu=J.UpsampleBgraLinePair,tu=J.UpsampleArgbLinePair,Yl=J.UpsampleRgba4444LinePair,nu=J.UpsampleRgb565LinePair,fo=16,$a=1<<fo-1,Jo=-227,su=482,tm=6,uf=0,nm=i(256),Wa=i(256),Qu=i(256),Sc=i(256),Cc=i(su-Jo),ed=i(su-Jo);Or("YuvToRgbRow",as,3),Or("YuvToBgrRow",Ks,3),Or("YuvToRgbaRow",Rr,4),Or("YuvToBgraRow",ja,4),Or("YuvToArgbRow",Hs,4),Or("YuvToRgba4444Row",ma,2),Or("YuvToRgb565Row",Xs,2);var Nl=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wo=[0,2,8],sm=[8,7,6,4,4,2,2,2,1,1,1,1],df=1;this.WebPDecodeRGBA=function(E,y,w,P,z){var W=Xo,X=new ha,te=new js;X.ba=te,te.S=W,te.width=[te.width],te.height=[te.height];var ie=te.width,me=te.height,Ce=new ln;if(Ce==null||E==null)var He=2;else e(Ce!=null),He=Ji(E,y,w,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if(He!=0?ie=0:(ie!=null&&(ie[0]=Ce.width[0]),me!=null&&(me[0]=Ce.height[0]),ie=1),ie){te.width=te.width[0],te.height=te.height[0],P!=null&&(P[0]=te.width),z!=null&&(z[0]=te.height);e:{if(P=new mn,(z=new bn).data=E,z.w=y,z.ha=w,z.kd=1,y=[0],e(z!=null),((E=Ji(z.data,z.w,z.ha,null,null,null,y,null,z))==0||E==7)&&y[0]&&(E=4),(y=E)==0){if(e(X!=null),P.data=z.data,P.w=z.w+z.offset,P.ha=z.ha-z.offset,P.put=ca,P.ac=gs,P.bc=vn,P.ma=X,z.xa){if((E=Ts())==null){X=1;break e}if(function(Ve,Oe){var pt=[0],Ke=[0],Le=[0];t:for(;;){if(Ve==null)return 0;if(Oe==null)return Ve.a=2,0;if(Ve.l=Oe,Ve.a=0,ue(Ve.m,Oe.data,Oe.w,Oe.ha),!Xt(Ve.m,pt,Ke,Le)){Ve.a=3;break t}if(Ve.xb=Hl,Oe.width=pt[0],Oe.height=Ke[0],!$n(pt[0],Ke[0],1,Ve,null))break t;return 1}return e(Ve.a!=0),0}(E,P)){if(P=(y=Qi(P.width,P.height,X.Oa,X.ba))==0){t:{P=E;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((w=P.l)!=null),e((z=w.ma)!=null),P.xb!=0){if(P.ca=z.ba,P.tb=z.tb,e(P.ca!=null),!$r(z.Oa,w,lo)){P.a=2;break n}if(!La(P,w.width)||w.da)break n;if((w.da||Cn(P.ca.S))&&Me(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&Me()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!Qe(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Qt(P,P.V,P.Ba,P.c,P.i,w.o,er))break n;z.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(y=E.a)}else y=E.a}else{if((E=new Hr)==null){X=1;break e}if(E.Fa=z.na,E.P=z.P,E.qc=z.Sa,Yr(E,P)){if((y=Qi(P.width,P.height,X.Oa,X.ba))==0){if(E.Aa=0,w=X.Oa,e((z=E)!=null),w!=null){if(0<(ie=0>(ie=w.Md)?0:100<ie?255:255*ie/100)){for(me=Ce=0;4>me;++me)12>(He=z.pb[me]).lc&&(He.ia=ie*sm[0>He.lc?0:He.lc]>>3),Ce|=He.ia;Ce&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=w.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}vs(E,P)||(y=E.a)}}else y=E.a}y==0&&X.Oa!=null&&X.Oa.fd&&(y=zo(X.ba))}X=y}W=X!=0?null:11>W?te.f.RGBA.eb:te.f.kb.y}else W=null;return W};var ff=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(J,oe){for(var xe="",F=0;F<4;F++)xe+=String.fromCharCode(J[oe++]);return xe}function _(J,oe){return(J[oe+0]<<0|J[oe+1]<<8|J[oe+2]<<16)>>>0}function b(J,oe){return(J[oe+0]<<0|J[oe+1]<<8|J[oe+2]<<16|J[oe+3]<<24)>>>0}new f;var v=[0],T=[0],C=[],L=new f,R=n,I=function(J,oe){var xe={},F=0,H=!1,re=0,K=0;if(xe.frames=[],!function(k,Y,Q,fe){for(var ve=0;ve<fe;ve++)if(k[Y+ve]!=Q.charCodeAt(ve))return!0;return!1}(J,oe,"RIFF",4)){for(b(J,oe+=4),oe+=8;oe<J.length;){var Te=h(J,oe),G=b(J,oe+=4);oe+=4;var he=G+(1&G);switch(Te){case"VP8 ":case"VP8L":xe.frames[F]===void 0&&(xe.frames[F]={}),(V=xe.frames[F]).src_off=H?K:oe-8,V.src_size=re+G+8,F++,H&&(H=!1,re=0,K=0);break;case"VP8X":(V=xe.header={}).feature_flags=J[oe];var ue=oe+4;V.canvas_width=1+_(J,ue),ue+=3,V.canvas_height=1+_(J,ue),ue+=3;break;case"ALPH":H=!0,re=he+8,K=oe-8;break;case"ANIM":(V=xe.header).bgcolor=b(J,oe),ue=oe+4,V.loop_count=(ce=J)[(M=ue)+0]<<0|ce[M+1]<<8,ue+=2;break;case"ANMF":var ae,V;(V=xe.frames[F]={}).offset_x=2*_(J,oe),oe+=3,V.offset_y=2*_(J,oe),oe+=3,V.width=1+_(J,oe),oe+=3,V.height=1+_(J,oe),oe+=3,V.duration=_(J,oe),oe+=3,ae=J[oe++],V.dispose=1&ae,V.blend=ae>>1&1}Te!="ANMF"&&(oe+=he)}var ce,M;return xe}}(R,0);I.response=R,I.rgbaoutput=!0,I.dataurl=!1;var j=I.header?I.header:null,O=I.frames?I.frames:null;if(j){j.loop_counter=j.loop_count,v=[j.canvas_height],T=[j.canvas_width];for(var U=0;U<O.length&&O[U].blend!=0;U++);}var se=O[0],Z=L.WebPDecodeRGBA(R,se.src_off,se.src_size,T,v);se.rgba=Z,se.imgwidth=T[0],se.imgheight=v[0];for(var ee=0;ee<T[0]*v[0]*4;ee++)C[ee]=Z[ee];return this.width=T,this.height=v,this.data=C,this}(function(n){var e=function(){return typeof lp=="function"},t=function(v,T,C,L){var R=4,I=c;switch(L){case n.image_compression.FAST:R=1,I=i;break;case n.image_compression.MEDIUM:R=6,I=d;break;case n.image_compression.SLOW:R=9,I=f}v=s(v,T,C,I);var j=lp(v,{level:R});return n.__addimage__.arrayBufferToBinaryString(j)},s=function(v,T,C,L){for(var R,I,j,O=v.length/T,U=new Uint8Array(v.length+O),se=_(),Z=0;Z<O;Z+=1){if(j=Z*T,R=v.subarray(j,j+T),L)U.set(L(R,C,I),j+Z);else{for(var ee,J=se.length,oe=[];ee<J;ee+=1)oe[ee]=se[ee](R,C,I);var xe=b(oe.concat());U.set(oe[xe],j+Z)}I=R}return U},r=function(v){var T=Array.apply([],v);return T.unshift(0),T},i=function(v,T){var C,L=[],R=v.length;L[0]=1;for(var I=0;I<R;I+=1)C=v[I-T]||0,L[I+1]=v[I]-C+256&255;return L},c=function(v,T,C){var L,R=[],I=v.length;R[0]=2;for(var j=0;j<I;j+=1)L=C&&C[j]||0,R[j+1]=v[j]-L+256&255;return R},d=function(v,T,C){var L,R,I=[],j=v.length;I[0]=3;for(var O=0;O<j;O+=1)L=v[O-T]||0,R=C&&C[O]||0,I[O+1]=v[O]+256-(L+R>>>1)&255;return I},f=function(v,T,C){var L,R,I,j,O=[],U=v.length;O[0]=4;for(var se=0;se<U;se+=1)L=v[se-T]||0,R=C&&C[se]||0,I=C&&C[se-T]||0,j=h(L,R,I),O[se+1]=v[se]-j+256&255;return O},h=function(v,T,C){if(v===T&&T===C)return v;var L=Math.abs(T-C),R=Math.abs(v-C),I=Math.abs(v+T-C-C);return L<=R&&L<=I?v:R<=I?T:C},_=function(){return[r,i,c,d,f]},b=function(v){var T=v.map(function(C){return C.reduce(function(L,R){return L+Math.abs(R)},0)});return T.indexOf(Math.min.apply(null,T))};n.processPNG=function(v,T,C,L){var R,I,j,O,U,se,Z,ee,J,oe,xe,F,H,re,K,Te=this.decode.FLATE_DECODE,G="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(j=new aD(v)).imgData,I=j.bits,R=j.colorSpace,U=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){J=(ee=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,xe=new Uint8Array(J*j.colors),oe=new Uint8Array(J);var he,ue=j.pixelBitlength-j.bits;for(re=0,K=0;re<J;re++){for(H=ee[re],he=0;he<ue;)xe[K++]=H>>>he&255,he+=j.bits;oe[re]=H>>>he&255}}if(j.bits===16){J=(ee=new Uint32Array(j.decodePixels().buffer)).length,xe=new Uint8Array(J*(32/j.pixelBitlength)*j.colors),oe=new Uint8Array(J*(32/j.pixelBitlength)),F=j.colors>1,re=0,K=0;for(var ae=0;re<J;)H=ee[re++],xe[K++]=H>>>0&255,F&&(xe[K++]=H>>>16&255,H=ee[re++],xe[K++]=H>>>0&255),oe[ae++]=H>>>16&255;I=8}L!==n.image_compression.NONE&&e()?(v=t(xe,j.width*j.colors,j.colors,L),Z=t(oe,j.width,1,L)):(v=xe,Z=oe,Te=void 0)}if(j.colorType===3&&(R=this.color_spaces.INDEXED,se=j.palette,j.transparency.indexed)){var V=j.transparency.indexed,ce=0;for(re=0,J=V.length;re<J;++re)ce+=V[re];if((ce/=255)===J-1&&V.indexOf(0)!==-1)O=[V.indexOf(0)];else if(ce!==J){for(ee=j.decodePixels(),oe=new Uint8Array(ee.length),re=0,J=ee.length;re<J;re++)oe[re]=V[ee[re]];Z=t(oe,j.width,1)}}var M=function(k){var Y;switch(k){case n.image_compression.FAST:Y=11;break;case n.image_compression.MEDIUM:Y=13;break;case n.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(L);return Te===this.decode.FLATE_DECODE&&(G="/Predictor "+M+" "),G+="/Colors "+U+" /BitsPerComponent "+I+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(Z&&this.__addimage__.isArrayBuffer(Z)||this.__addimage__.isArrayBufferView(Z))&&(Z=this.__addimage__.arrayBufferToBinaryString(Z)),{alias:C,data:v,index:T,filter:Te,decodeParameters:G,transparency:O,palette:se,sMask:Z,predictor:M,width:j.width,height:j.height,bitsPerComponent:I,colorSpace:R}}}})(Nn.API),function(n){n.processGIF89A=function(e,t,s,r){var i=new rD(e),c=i.width,d=i.height,f=[];i.decodeAndBlitFrameRGBA(0,f);var h={data:f,width:c,height:d},_=new S0(100).encode(h,100);return n.processJPEG.call(this,_,t,s,r)},n.processGIF87A=n.processGIF89A}(Nn.API),jo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:s,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jo.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){na.log("bit decode error:"+t)}},jo.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,r=0;r<e;r++)for(var i=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+8*r*4,d=0;d<8&&8*r+d<this.width;d++){var f=this.palette[i>>7-d&1];this.data[c+4*d]=f.blue,this.data[c+4*d+1]=f.green,this.data[c+4*d+2]=f.red,this.data[c+4*d+3]=255}t!==0&&(this.pos+=4-t)}},jo.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<n;r++){var i=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+2*r*4,d=i>>4,f=15&i,h=this.palette[d];if(this.data[c]=h.blue,this.data[c+1]=h.green,this.data[c+2]=h.red,this.data[c+3]=255,2*r+1>=this.width)break;h=this.palette[f],this.data[c+4]=h.blue,this.data[c+4+1]=h.green,this.data[c+4+2]=h.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},jo.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var r=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*s;if(r<this.palette.length){var c=this.palette[r];this.data[i]=c.red,this.data[i+1]=c.green,this.data[i+2]=c.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},jo.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&e)/e*255|0,d=(i>>5&e)/e*255|0,f=(i>>10&e)/e*255|0,h=i>>15?255:0,_=s*this.width*4+4*r;this.data[_]=f,this.data[_+1]=d,this.data[_+2]=c,this.data[_+3]=h}this.pos+=n}},jo.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,f=(c>>5&t)/t*255|0,h=(c>>11)/e*255|0,_=r*this.width*4+4*i;this.data[_]=h,this.data[_+1]=f,this.data[_+2]=d,this.data[_+3]=255}this.pos+=n}},jo.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=i,this.data[c+1]=r,this.data[c+2]=s,this.data[c+3]=255}this.pos+=this.width%4}},jo.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=i,this.data[d+1]=r,this.data[d+2]=s,this.data[d+3]=c}},jo.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,s,r){var i=new jo(e,!1),c=i.width,d=i.height,f={data:i.getData(),width:c,height:d},h=new S0(100).encode(f,100);return n.processJPEG.call(this,h,t,s,r)}}(Nn.API),s2.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,s,r){var i=new s2(e),c=i.width,d=i.height,f={data:i.getData(),width:c,height:d},h=new S0(100).encode(f,100);return n.processJPEG.call(this,h,t,s,r)}}(Nn.API),Nn.API.processRGBA=function(n,e,t){for(var s=n.data,r=s.length,i=new Uint8Array(r/4*3),c=new Uint8Array(r/4),d=0,f=0,h=0;h<r;h+=4){var _=s[h],b=s[h+1],v=s[h+2],T=s[h+3];i[d++]=_,i[d++]=b,i[d++]=v,c[f++]=T}var C=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Nn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},wu=Nn.API,uh=wu.getCharWidthsArray=function(n,e){var t,s,r=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:r.metadata.Unicode.widths,f=d.fof?d.fof:1,h=e.kerning?e.kerning:r.metadata.Unicode.kerning,_=h.fof?h.fof:1,b=e.doKerning!==!1,v=0,T=n.length,C=0,L=d[0]||f,R=[];for(t=0;t<T;t++)s=n.charCodeAt(t),typeof r.metadata.widthOfString=="function"?R.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(s))+c*(1e3/i)||0)/1e3):(v=b&&$s(h[s])==="object"&&!isNaN(parseInt(h[s][C],10))?h[s][C]/_:0,R.push((d[s]||L)/f+v)),C=s;return R},QE=wu.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return wu.processArabic&&(n=wu.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,r)/t:uh.apply(this,arguments).reduce(function(i,c){return i+c},0)},e2=function(n,e,t,s){for(var r=[],i=0,c=n.length,d=0;i!==c&&d+e[i]<t;)d+=e[i],i++;r.push(n.slice(0,i));var f=i;for(d=0;i!==c;)d+e[i]>s&&(r.push(n.slice(f,i)),d=0,f=i),d+=e[i],i++;return f!==i&&r.push(n.slice(f,i)),r},t2=function(n,e,t){t||(t={});var s,r,i,c,d,f,h,_=[],b=[_],v=t.textIndent||0,T=0,C=0,L=n.split(" "),R=uh.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?L[0].length+2:t.lineIndent||0){var I=Array(f).join(" "),j=[];L.map(function(U){(U=U.split(/\s*\n/)).length>1?j=j.concat(U.map(function(se,Z){return(Z&&se.length?`
`:"")+se})):j.push(U[0])}),L=j,f=QE.apply(this,[I,t])}for(i=0,c=L.length;i<c;i++){var O=0;if(s=L[i],f&&s[0]==`
`&&(s=s.substr(1),O=1),v+T+(C=(r=uh.apply(this,[s,t])).reduce(function(U,se){return U+se},0))>e||O){if(C>e){for(d=e2.apply(this,[s,r,e-(v+T),e]),_.push(d.shift()),_=[d.pop()];d.length;)b.push([d.shift()]);C=r.slice(s.length-(_[0]?_[0].length:0)).reduce(function(U,se){return U+se},0)}else _=[s];b.push(_),v=C+f,T=R}else _.push(s),v+=T+C,T=R}return h=f?function(U,se){return(se?I:"")+U.join(" ")}:function(U){return U.join(" ")},b.map(h)},wu.splitTextToSize=function(n,e,t){var s,r=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(_){if(_.widths&&_.kerning)return{widths:_.widths,kerning:_.kerning};var b=this.internal.getFont(_.fontName,_.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/r;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,i.lineIndent=t.lineIndent;var d,f,h=[];for(d=0,f=s.length;d<f;d++)h=h.concat(t2.apply(this,[s[d],c,i]));return h},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},s={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],s["0123456789abcdef"[r]]=e[r];var i=function(b){return"0x"+parseInt(b,10).toString(16)},c=n.__fontmetrics__.compress=function(b){var v,T,C,L,R=["{"];for(var I in b){if(v=b[I],isNaN(parseInt(I,10))?T="'"+I+"'":(I=parseInt(I,10),T=(T=i(I).slice(2)).slice(0,-1)+s[T.slice(-1)]),typeof v=="number")v<0?(C=i(v).slice(3),L="-"):(C=i(v).slice(2),L=""),C=L+C.slice(0,-1)+s[C.slice(-1)];else{if($s(v)!=="object")throw new Error("Don't know what to do with value type "+$s(v)+".");C=c(v)}R.push(T+C)}return R.push("}"),R.join("")},d=n.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,T,C,L,R={},I=1,j=R,O=[],U="",se="",Z=b.length-1,ee=1;ee<Z;ee+=1)(L=b[ee])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(L):L=="{"?(O.push([j,C]),j={},C=void 0):L=="}"?((T=O.pop())[0][T[1]]=j,C=void 0,j=T[0]):L=="-"?I=-1:C===void 0?t.hasOwnProperty(L)?(U+=t[L],C=parseInt(U,16)*I,I=1,U=""):U+=L:t.hasOwnProperty(L)?(se+=t[L],j[C]=parseInt(se,16)*I,I=1,C=void 0,se=""):se+=L;return R},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},_={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(b){var v=b.font,T=_.Unicode[v.postScriptName];T&&(v.metadata.Unicode={},v.metadata.Unicode.widths=T.widths,v.metadata.Unicode.kerning=T.kerning);var C=h.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])}(Nn.API),function(n){var e=function(t){for(var s=t.length,r=new Uint8Array(s),i=0;i<s;i++)r[i]=t.charCodeAt(i);return r};n.API.events.push(["addFont",function(t){var s=void 0,r=t.font,i=t.instance;if(!r.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(s=i.existsFileInVFS(r.postScriptName)===!1?i.loadFile(r.postScriptName):i.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Xd(d)),c.metadata=n.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(r,s)}}])}(Nn),function(n){function e(){return(Dn.canvg?Promise.resolve(Dn.canvg):sp(()=>import("./index.es-bh19TFXx.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Nn.API.addSvgAsImage=function(t,s,r,i,c,d,f,h){if(isNaN(s)||isNaN(r))throw na.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(c))throw na.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var _=document.createElement("canvas");_.width=i,_.height=c;var b=_.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,_.width,_.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},T=this;return e().then(function(C){return C.fromString(b,t,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(v)}).then(function(){T.addImage(_.toDataURL("image/jpeg",1),s,r,i,c,f,h)})}}(),Nn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var r=0;r<this.internal.pages[s].length;r++)this.internal.pages[s][r]=this.internal.pages[s][r].replace(e,t);return this},Nn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,r,i,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),f=[],h=0,_=0,b=0;function v(C,L){var R,I=!1;for(R=0;R<C.length;R+=1)C[R]===L&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var T=d.length;for(b=0;b<T;b+=1)t[d[b]].value=t[d[b]].defaultValue,t[d[b]].explicitSet=!1}if($s(n)==="object"){for(r in n)if(i=n[r],v(d,r)&&i!==void 0){if(t[r].type==="boolean"&&typeof i=="boolean")t[r].value=i;else if(t[r].type==="name"&&v(t[r].valueSet,i))t[r].value=i;else if(t[r].type==="integer"&&Number.isInteger(i))t[r].value=i;else if(t[r].type==="array"){for(h=0;h<i.length;h+=1)if(s=!0,i[h].length===1&&typeof i[h][0]=="number")f.push(String(i[h]-1));else if(i[h].length>1){for(_=0;_<i[h].length;_+=1)typeof i[h][_]!="number"&&(s=!1);s===!0&&f.push([i[h][0]-1,i[h][1]-1].join(" "))}t[r].value="["+f.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,L=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?L.push("/"+C+" /"+t[C].value):L.push("/"+C+" "+t[C].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),h=i.length+c.length+d.length+r.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(r+i+c+d+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Nn.API),function(n){var e=n.API,t=e.pdfEscape16=function(i,c){for(var d,f=c.metadata.Unicode.widths,h=["","0","00","000","0000"],_=[""],b=0,v=i.length;b<v;++b){if(d=c.metadata.characterToGlyph(i.charCodeAt(b)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=i.charCodeAt(b),f.indexOf(d)==-1&&(f.push(d),f.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return _.join("");d=d.toString(16),_.push(h[4-d.length],d)}return _.join("")},s=function(i){var c,d,f,h,_,b,v;for(_=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,v=(d=Object.keys(i).sort(function(T,C){return T-C})).length;b<v;b++)c=d[b],f.length>=100&&(_+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),i[c]!==void 0&&i[c]!==null&&typeof i[c].toString=="function"&&(h=("0000"+i[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+h+">"));return f.length&&(_+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),_+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(c){var d=c.font,f=c.out,h=c.newObject,_=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var b=d.metadata.Unicode.widths,v=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),T="",C=0;C<v.length;C++)T+=String.fromCharCode(v[C]);var L=h();_({data:T,addLength1:!0,objectId:L}),f("endobj");var R=h();_({data:s(d.metadata.toUnicode),addLength1:!0,objectId:R}),f("endobj");var I=h();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Pu(d.fontName)),f("/FontFile2 "+L+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/Flags "+d.metadata.flags),f("/StemV "+d.metadata.stemV),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f(">>"),f("endobj");var j=h();f("<<"),f("/Type /Font"),f("/BaseFont /"+Pu(d.fontName)),f("/FontDescriptor "+I+" 0 R"),f("/W "+n.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+d.encoding+")"),f(">>"),f(">>"),f("endobj"),d.objectNumber=h(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+R+" 0 R"),f("/BaseFont /"+Pu(d.fontName)),f("/Encoding /"+d.encoding),f("/DescendantFonts ["+j+" 0 R]"),f(">>"),f("endobj"),d.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(c){var d=c.font,f=c.out,h=c.newObject,_=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var b=d.metadata.rawData,v="",T=0;T<b.length;T++)v+=String.fromCharCode(b[T]);var C=h();_({data:v,addLength1:!0,objectId:C}),f("endobj");var L=h();_({data:s(d.metadata.toUnicode),addLength1:!0,objectId:L}),f("endobj");var R=h();f("<<"),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f("/StemV "+d.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+C+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/FontName /"+Pu(d.fontName)),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f(">>"),f("endobj"),d.objectNumber=h();for(var I=0;I<d.metadata.hmtx.widths.length;I++)d.metadata.hmtx.widths[I]=parseInt(d.metadata.hmtx.widths[I]*(1e3/d.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+Pu(d.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),f("endobj"),d.isAlreadyPutted=!0}})(i)}]);var r=function(i){var c,d=i.text||"",f=i.x,h=i.y,_=i.options||{},b=i.mutex||{},v=b.pdfEscape,T=b.activeFontKey,C=b.fonts,L=T,R="",I=0,j="",O=C[L].encoding;if(C[L].encoding!=="Identity-H")return{text:d,x:f,y:h,options:_,mutex:b};for(j=d,L=T,Array.isArray(d)&&(j=d[0]),I=0;I<j.length;I+=1)C[L].metadata.hasOwnProperty("cmap")&&(c=C[L].metadata.cmap.unicode.codeMap[j[I].charCodeAt(0)]),c||j[I].charCodeAt(0)<256&&C[L].metadata.hasOwnProperty("Unicode")?R+=j[I]:R+="";var U="";return parseInt(L.slice(1))<14||O==="WinAnsiEncoding"?U=v(R,L).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(U=t(R,C[L])),b.isHex=!0,{text:U,x:f,y:h,options:_,mutex:b}};e.events.push(["postProcessText",function(i){var c=i.text||"",d=[],f={text:c,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(c)){var h=0;for(h=0;h<c.length;h+=1)Array.isArray(c[h])&&c[h].length===3?d.push([r(Object.assign({},f,{text:c[h][0]})).text,c[h][1],c[h][2]]):d.push(r(Object.assign({},f,{text:c[h]})).text);i.text=d}else i.text=r(Object.assign({},f,{text:c})).text}])}(Nn),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Nn.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var r,i,c,d,f,h,_,b=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],T=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,O=0;this.__bidiEngine__={};var U=function(F){var H=F.charCodeAt(),re=H>>8,K=L[re];return K!==void 0?b[256*K+(255&H)]:re===252||re===253?"AL":I.test(re)?"L":re===8?"R":"N"},se=function(F){for(var H,re=0;re<F.length;re++){if((H=U(F.charAt(re)))==="L")return!1;if(H==="R")return!0}return!1},Z=function(F,H,re,K){var Te,G,he,ue,ae=H[K];switch(ae){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(ae="AN");break;case"AL":j=!0,ae="R";break;case"WS":ae="N";break;case"CS":K<1||K+1>=H.length||(Te=re[K-1])!=="EN"&&Te!=="AN"||(G=H[K+1])!=="EN"&&G!=="AN"?ae="N":j&&(G="AN"),ae=G===Te?G:"N";break;case"ES":ae=(Te=K>0?re[K-1]:"B")==="EN"&&K+1<H.length&&H[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&re[K-1]==="EN"){ae="EN";break}if(j){ae="N";break}for(he=K+1,ue=H.length;he<ue&&H[he]==="ET";)he++;ae=he<ue&&H[he]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(ue=H.length,he=K+1;he<ue&&H[he]==="NSM";)he++;if(he<ue){var V=F[K],ce=V>=1425&&V<=2303||V===64286;if(Te=H[he],ce&&(Te==="R"||Te==="AL")){ae="R";break}}}ae=K<1||(Te=H[K-1])==="B"?"N":re[K-1];break;case"B":j=!1,r=!0,ae=O;break;case"S":i=!0,ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":ae="N"}return ae},ee=function(F,H,re){var K=F.split("");return re&&J(K,re,{hiLevel:O}),K.reverse(),H&&H.reverse(),K.join("")},J=function(F,H,re){var K,Te,G,he,ue,ae=-1,V=F.length,ce=0,M=[],k=O?T:v,Y=[];for(j=!1,r=!1,i=!1,Te=0;Te<V;Te++)Y[Te]=U(F[Te]);for(G=0;G<V;G++){if(ue=ce,M[G]=Z(F,Y,M,G),K=240&(ce=k[ue][C[M[G]]]),ce&=15,H[G]=he=k[ce][5],K>0)if(K===16){for(Te=ae;Te<G;Te++)H[Te]=1;ae=-1}else ae=-1;if(k[ce][6])ae===-1&&(ae=G);else if(ae>-1){for(Te=ae;Te<G;Te++)H[Te]=he;ae=-1}Y[G]==="B"&&(H[G]=0),re.hiLevel|=he}i&&function(Q,fe,ve){for(var de=0;de<ve;de++)if(Q[de]==="S"){fe[de]=O;for(var Ne=de-1;Ne>=0&&Q[Ne]==="WS";Ne--)fe[Ne]=O}}(Y,H,V)},oe=function(F,H,re,K,Te){if(!(Te.hiLevel<F)){if(F===1&&O===1&&!r)return H.reverse(),void(re&&re.reverse());for(var G,he,ue,ae,V=H.length,ce=0;ce<V;){if(K[ce]>=F){for(ue=ce+1;ue<V&&K[ue]>=F;)ue++;for(ae=ce,he=ue-1;ae<he;ae++,he--)G=H[ae],H[ae]=H[he],H[he]=G,re&&(G=re[ae],re[ae]=re[he],re[he]=G);ce=ue}ce++}}},xe=function(F,H,re){var K=F.split(""),Te={hiLevel:O};return re||(re=[]),J(K,re,Te),function(G,he,ue){if(ue.hiLevel!==0&&_)for(var ae,V=0;V<G.length;V++)he[V]===1&&(ae=R.indexOf(G[V]))>=0&&(G[V]=R[ae+1])}(K,re,Te),oe(2,K,H,re,Te),oe(1,K,H,re,Te),K.join("")};return this.__bidiEngine__.doBidiReorder=function(F,H,re){if(function(Te,G){if(G)for(var he=0;he<Te.length;he++)G[he]=he;d===void 0&&(d=se(Te)),h===void 0&&(h=se(Te))}(F,H),c||!f||h)if(c&&f&&d^h)O=d?1:0,F=ee(F,H,re);else if(!c&&f&&h)O=d?1:0,F=xe(F,H,re),F=ee(F,H);else if(!c||d||f||h){if(c&&!f&&d^h)F=ee(F,H),d?(O=0,F=xe(F,H,re)):(O=1,F=xe(F,H,re),F=ee(F,H));else if(c&&d&&!f&&h)O=1,F=xe(F,H,re),F=ee(F,H);else if(!c&&!f&&d^h){var K=_;d?(O=1,F=xe(F,H,re),O=0,_=!1,F=xe(F,H,re),_=K):(O=0,F=xe(F,H,re),F=ee(F,H),O=1,_=!1,F=xe(F,H,re),_=K,F=ee(F,H))}}else O=0,F=xe(F,H,re);else O=d?1:0,F=xe(F,H,re);return F},this.__bidiEngine__.setOptions=function(F){F&&(c=F.isInputVisual,f=F.isOutputVisual,d=F.isInputRtl,h=F.isOutputRtl,_=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var r=s.text;s.x,s.y;var i=s.options||{};s.mutex,i.lang;var c=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(r)==="[object Array]"){var d=0;for(c=[],d=0;d<r.length;d+=1)Object.prototype.toString.call(r[d])==="[object Array]"?c.push([t.doBidiReorder(r[d][0]),r[d][1],r[d][2]]):c.push([t.doBidiReorder(r[d])]);s.text=c}else s.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(Nn),Nn.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Tc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new bD(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new iD(this.contents),this.head=new lD(this),this.name=new hD(this),this.cmap=new O_(this),this.toUnicode={},this.hhea=new cD(this),this.maxp=new mD(this),this.hmtx=new pD(this),this.post=new dD(this),this.os2=new uD(this),this.loca=new _D(this),this.glyf=new gD(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,f,h;for(h=[],c=0,d=(f=this.bbox).length;c<d;c++)e=f[c],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(s=255&(r=this.post.italic_angle),(32768&(t=r>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var r,i,c,d;for(c=0,i=0,d=(e=""+e).length;0<=d?i<d:i>d;i=0<=d?++i:--i)r=e.charCodeAt(i),c+=this.widthOfGlyph(this.characterToGlyph(r))+s*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n}();var Ho,Tc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,r;for(r=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,r,i,c,d,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),r=this.readByte(),i=this.readByte(),c=this.readByte(),d=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^r)+16777216*(255^i)+65536*(255^c)+256*(255^d)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*r+16777216*i+65536*c+256*d+f},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,r,i;for(i=[],s=0,r=e.length;s<r;s++)t=e[s],i.push(this.writeByte(t));return i},n}(),iD=function(){var n;function e(t){var s,r,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,i=this.tableCount;0<=i?r<i:r>i;r=0<=i?++r:--r)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,r,i,c,d,f,h,_,b,v,T,C,L;for(L in T=Object.keys(t).length,f=Math.log(2),b=16*Math.floor(Math.log(T)/f),c=Math.floor(b/f),_=16*T-b,(r=new Tc).writeInt(this.scalarType),r.writeShort(T),r.writeShort(b),r.writeShort(c),r.writeShort(_),i=16*T,h=r.pos+i,d=null,C=[],t)for(v=t[L],r.writeString(L),r.writeInt(n(v)),r.writeInt(h),r.writeInt(v.length),C=C.concat(v),L==="head"&&(d=h),h+=v.length;h%4;)C.push(0),h++;return r.write(C),s=2981146554-n(r.data),r.pos=d+8,r.writeUInt32(s),r.data},n=function(t){var s,r,i,c;for(t=P_.call(t);t.length%4;)t.push(0);for(i=new Tc(t),r=0,s=0,c=t.length;s<c;s=s+=4)r+=i.readUInt32();return 4294967295&r},e}(),oD={}.hasOwnProperty,pl=function(n,e){for(var t in e)oD.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};Ho=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var lD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var s;return(s=new Tc).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(t),s.writeShort(this.glyphDataFormat),s.data},e}(),a2=function(){function n(e,t){var s,r,i,c,d,f,h,_,b,v,T,C,L,R,I,j,O;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(T=e.readUInt16(),v=T/2,e.pos+=6,i=function(){var U,se;for(se=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)se.push(e.readUInt16());return se}(),e.pos+=2,L=function(){var U,se;for(se=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)se.push(e.readUInt16());return se}(),h=function(){var U,se;for(se=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)se.push(e.readUInt16());return se}(),_=function(){var U,se;for(se=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)se.push(e.readUInt16());return se}(),r=(this.length-e.pos+this.offset)/2,d=function(){var U,se;for(se=[],f=U=0;0<=r?U<r:U>r;f=0<=r?++U:--U)se.push(e.readUInt16());return se}(),f=I=0,O=i.length;I<O;f=++I)for(R=i[f],s=j=C=L[f];C<=R?j<=R:j>=R;s=C<=R?++j:--j)_[f]===0?c=s+h[f]:(c=d[_[f]/2+(s-C)-(v-f)]||0)!==0&&(c+=h[f]),this.codeMap[s]=65535&c}e.pos=b}return n.encode=function(e,t){var s,r,i,c,d,f,h,_,b,v,T,C,L,R,I,j,O,U,se,Z,ee,J,oe,xe,F,H,re,K,Te,G,he,ue,ae,V,ce,M,k,Y,Q,fe,ve,de,Ne,Ue,we,Je;switch(K=new Tc,c=Object.keys(e).sort(function(Ze,Qe){return Ze-Qe}),t){case"macroman":for(L=0,R=function(){var Ze=[];for(C=0;C<256;++C)Ze.push(0);return Ze}(),j={0:0},i={},Te=0,ae=c.length;Te<ae;Te++)j[Ne=e[r=c[Te]]]==null&&(j[Ne]=++L),i[r]={old:e[r],new:j[e[r]]},R[r]=j[e[r]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(R),{charMap:i,subtable:K.data,maxGlyphID:L+1};case"unicode":for(H=[],b=[],O=0,j={},s={},I=h=null,G=0,V=c.length;G<V;G++)j[se=e[r=c[G]]]==null&&(j[se]=++O),s[r]={old:se,new:j[se]},d=j[se]-r,I!=null&&d===h||(I&&b.push(I),H.push(r),h=d),I=r;for(I&&b.push(I),b.push(65535),H.push(65535),xe=2*(oe=H.length),J=2*Math.pow(Math.log(oe)/Math.LN2,2),v=Math.log(J/2)/Math.LN2,ee=2*oe-J,f=[],Z=[],T=[],C=he=0,ce=H.length;he<ce;C=++he){if(F=H[C],_=b[C],F===65535){f.push(0),Z.push(0);break}if(F-(re=s[F].new)>=32768)for(f.push(0),Z.push(2*(T.length+oe-C)),r=ue=F;F<=_?ue<=_:ue>=_;r=F<=_?++ue:--ue)T.push(s[r].new);else f.push(re-F),Z.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*oe+2*T.length),K.writeUInt16(0),K.writeUInt16(xe),K.writeUInt16(J),K.writeUInt16(v),K.writeUInt16(ee),ve=0,M=b.length;ve<M;ve++)r=b[ve],K.writeUInt16(r);for(K.writeUInt16(0),de=0,k=H.length;de<k;de++)r=H[de],K.writeUInt16(r);for(Ue=0,Y=f.length;Ue<Y;Ue++)d=f[Ue],K.writeUInt16(d);for(we=0,Q=Z.length;we<Q;we++)U=Z[we],K.writeUInt16(U);for(Je=0,fe=T.length;Je<fe;Je++)L=T[Je],K.writeUInt16(L);return{charMap:s,subtable:K.data,maxGlyphID:O+1}}},n}(),O_=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="cmap",e.prototype.parse=function(t){var s,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)s=new a2(t,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(t,s){var r,i;return s==null&&(s="macroman"),r=a2.encode(t,s),(i=new Tc).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},e}(),cD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),uD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var s,r;for(r=[],s=0;s<10;++s)r.push(t.readByte());return r}(),this.charRange=function(){var s,r;for(r=[],s=0;s<4;++s)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var s,r;for(r=[],s=0;s<2;s=++s)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),dD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="post",e.prototype.parse=function(t){var s,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var c;for(r=t.readUInt16(),this.glyphNameIndex=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)s=t.readByte(),i.push(this.names.push(t.readString(s)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var d,f,h;for(h=[],c=d=0,f=this.file.maxp.numGlyphs;0<=f?d<f:d>f;c=0<=f?++d:--d)h.push(t.readUInt32());return h}).call(this)}},e}(),fD=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},hD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="name",e.prototype.parse=function(t){var s,r,i,c,d,f,h,_,b,v,T;for(t.pos=this.offset,t.readShort(),s=t.readShort(),f=t.readShort(),r=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(h={},c=b=0,v=r.length;b<v;c=++b)i=r[c],t.pos=i.offset,_=t.readString(i.length),d=new fD(_,i),h[T=i.nameID]==null&&(h[T]=[]),h[i.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),mD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),pD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="hmtx",e.prototype.parse=function(t){var s,r,i,c,d,f,h;for(t.pos=this.offset,this.metrics=[],s=0,f=this.file.hhea.numberOfMetrics;0<=f?s<f:s>f;s=0<=f?++s:--s)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var _,b;for(b=[],s=_=0;0<=i?_<i:_>i;s=0<=i?++_:--_)b.push(t.readInt16());return b}(),this.widths=(function(){var _,b,v,T;for(T=[],_=0,b=(v=this.metrics).length;_<b;_++)c=v[_],T.push(c.advance);return T}).call(this),r=this.widths[this.widths.length-1],h=[],s=d=0;0<=i?d<i:d>i;s=0<=i?++d:--d)h.push(this.widths.push(r));return h},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),P_=[].slice,gD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var s,r,i,c,d,f,h,_,b,v;return t in this.cache?this.cache[t]:(c=this.file.loca,s=this.file.contents,r=c.indexOf(t),(i=c.lengthOf(t))===0?this.cache[t]=null:(s.pos=this.offset+r,d=(f=new Tc(s.read(i))).readShort(),_=f.readShort(),v=f.readShort(),h=f.readShort(),b=f.readShort(),this.cache[t]=d===-1?new ED(f,_,v,h,b):new xD(f,d,_,v,h,b),this.cache[t]))},e.prototype.encode=function(t,s,r){var i,c,d,f,h;for(d=[],c=[],f=0,h=s.length;f<h;f++)i=t[s[f]],c.push(d.length),i&&(d=d.concat(i.encode(r)));return c.push(d.length),{table:d,offsets:c}},e}(),xD=function(){function n(e,t,s,r,i,c){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=r,this.xMax=i,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),ED=function(){function n(e,t,s,r,i){var c,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new Tc(P_.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),_D=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="loca",e.prototype.parse=function(t){var s,r;return t.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var i,c;for(c=[],r=0,i=this.length;r<i;r+=2)c.push(2*t.readUInt16());return c}).call(this):(function(){var i,c;for(c=[],r=0,i=this.length;r<i;r+=4)c.push(t.readUInt32());return c}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,s){for(var r=new Uint32Array(this.offsets.length),i=0,c=0,d=0;d<r.length;++d)if(r[d]=i,c<s.length&&s[c]==d){++c,r[d]=i;var f=this.offsets[d],h=this.offsets[d+1]-f;h>0&&(i+=h)}for(var _=new Array(4*r.length),b=0;b<r.length;++b)_[4*b+3]=255&r[b],_[4*b+2]=(65280&r[b])>>8,_[4*b+1]=(16711680&r[b])>>16,_[4*b]=(4278190080&r[b])>>24;return _},e}(),bD=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)s=i[t],e[t]=r[s];return e},n.prototype.glyphsFor=function(e){var t,s,r,i,c,d,f;for(r={},c=0,d=e.length;c<d;c++)r[i=e[c]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(s=r[i])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(i in f=this.glyphsFor(t))s=f[i],r[i]=s;return r},n.prototype.encode=function(e,t){var s,r,i,c,d,f,h,_,b,v,T,C,L,R,I;for(r in s=O_.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),T={0:0},I=s.charMap)T[(f=I[r]).old]=f.new;for(C in v=s.maxGlyphID,c)C in T||(T[C]=v++);return _=function(j){var O,U;for(O in U={},j)U[j[O]]=O;return U}(T),b=Object.keys(_).sort(function(j,O){return j-O}),L=function(){var j,O,U;for(U=[],j=0,O=b.length;j<O;j++)d=b[j],U.push(_[d]);return U}(),i=this.font.glyf.encode(c,L,T),h=this.font.loca.encode(i.offsets,L),R={cmap:this.font.cmap.raw(),glyf:i.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},n}();Nn.API.PDFObject=function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,r,i,c;if(Array.isArray(t))return"["+function(){var d,f,h;for(h=[],d=0,f=t.length;d<f;d++)s=t[d],h.push(e.convert(s));return h}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in i=["<<"],t)c=t[r],i.push("/"+r+" "+e.convert(c));return i.push(">>"),i.join(`
`)}return""+t},e}();function M_(n,e,t,s,r){s=s||{};var i=1.15,c=r.internal.scaleFactor,d=r.internal.getFontSize()/c,f=r.getLineHeightFactor?r.getLineHeightFactor():i,h=d*f,_=/\r\n|\r|\n/g,b="",v=1;if((s.valign==="middle"||s.valign==="bottom"||s.halign==="center"||s.halign==="right")&&(b=typeof n=="string"?n.split(_):n,v=b.length||1),t+=d*(2-i),s.valign==="middle"?t-=v/2*h:s.valign==="bottom"&&(t-=v*h),s.halign==="center"||s.halign==="right"){var T=d;if(s.halign==="center"&&(T*=.5),b&&v>=1){for(var C=0;C<b.length;C++)r.text(b[C],e-r.getStringUnitWidth(b[C])*T,t),t+=h;return r}e-=r.getStringUnitWidth(n)*T}return s.halign==="justify"?r.text(n,e,t,{maxWidth:s.maxWidth||100,align:"justify"}):r.text(n,e,t),r}var r2={},Hu=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:r2=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var s,r,i;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),d=c.fontStyle,f=c.fontName;if(e.font&&(f=e.font),e.fontStyle){d=e.fontStyle;var h=this.getFontList()[f];h&&h.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),d=h[0])}if(this.jsPDFDocument.setFont(f,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var _=n.unifyColor(e.fillColor);_&&(s=this.jsPDFDocument).setFillColor.apply(s,_),_=n.unifyColor(e.textColor),_&&(r=this.jsPDFDocument).setTextColor.apply(r,_),_=n.unifyColor(e.lineColor),_&&(i=this.jsPDFDocument).setDrawColor.apply(i,_),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,s){return this.jsPDFDocument.splitTextToSize(e,t,s)},n.prototype.rect=function(e,t,s,r,i){return this.jsPDFDocument.rect(e,t,s,r,i)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return r2||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),pp=function(n,e){return pp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])},pp(n,e)};function k_(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var j_=function(n){k_(e,n);function e(t){var s=n.call(this)||this;return s._element=t,s}return e}(Array);function TD(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ND(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Vh(n,e,t){t.applyStyles(e,!0);var s=Array.isArray(n)?n:[n],r=s.map(function(i){return t.getTextWidth(i)}).reduce(function(i,c){return Math.max(i,c)},0);return r}function B_(n,e,t,s){var r=e.settings.tableLineWidth,i=e.settings.tableLineColor;n.applyStyles({lineWidth:r,lineColor:i});var c=U_(r,!1);c&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),s.y-t.y,c)}function U_(n,e){var t=n>0,s=e||e===0;return t&&s?"DF":t?"S":s?"F":null}function Qh(n,e){var t,s,r,i;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(s=n.top)!==null&&s!==void 0?s:e,right:(r=n.right)!==null&&r!==void 0?r:e,bottom:(i=n.bottom)!==null&&i!==void 0?i:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function F_(n,e){var t=Qh(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function vD(n,e,t,s,r){var i={},c=1.3333333333333333,d=C0(e,function(O){return r.getComputedStyle(O).backgroundColor});d!=null&&(i.fillColor=d);var f=C0(e,function(O){return r.getComputedStyle(O).color});f!=null&&(i.textColor=f);var h=AD(s,t);h&&(i.cellPadding=h);var _="borderTopColor",b=c*t,v=s.borderTopWidth;if(s.borderBottomWidth===v&&s.borderRightWidth===v&&s.borderLeftWidth===v){var T=(parseFloat(v)||0)/b;T&&(i.lineWidth=T)}else i.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/b,right:(parseFloat(s.borderRightWidth)||0)/b,bottom:(parseFloat(s.borderBottomWidth)||0)/b,left:(parseFloat(s.borderLeftWidth)||0)/b},i.lineWidth.top||(i.lineWidth.right?_="borderRightColor":i.lineWidth.bottom?_="borderBottomColor":i.lineWidth.left&&(_="borderLeftColor"));var C=C0(e,function(O){return r.getComputedStyle(O)[_]});C!=null&&(i.lineColor=C);var L=["left","right","center","justify"];L.indexOf(s.textAlign)!==-1&&(i.halign=s.textAlign),L=["middle","bottom","top"],L.indexOf(s.verticalAlign)!==-1&&(i.valign=s.verticalAlign);var R=parseInt(s.fontSize||"");isNaN(R)||(i.fontSize=R/c);var I=yD(s);I&&(i.fontStyle=I);var j=(s.fontFamily||"").toLowerCase();return n.indexOf(j)!==-1&&(i.font=j),i}function yD(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function C0(n,e){var t=V_(n,e);if(!t)return null;var s=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var r=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],i=parseInt(s[4]);return i===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function V_(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:V_(n.parentElement,e):t}function AD(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],s=96/(72/e),r=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,i=t.map(function(d){return parseInt(d||"0")/s}),c=Qh(i,0);return r>c.top&&(c.top=r),r>c.bottom&&(c.bottom=r),c}function G_(n,e,t,s,r){var i,c;s===void 0&&(s=!1),r===void 0&&(r=!1);var d;typeof e=="string"?d=t.document.querySelector(e):d=e;var f=Object.keys(n.getFontList()),h=n.scaleFactor(),_=[],b=[],v=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:_,body:b,foot:v};for(var T=0;T<d.rows.length;T++){var C=d.rows[T],L=(c=(i=C==null?void 0:C.parentElement)===null||i===void 0?void 0:i.tagName)===null||c===void 0?void 0:c.toLowerCase(),R=SD(f,h,t,C,s,r);R&&(L==="thead"?_.push(R):L==="tfoot"?v.push(R):b.push(R))}return{head:_,body:b,foot:v}}function SD(n,e,t,s,r,i){for(var c=new j_(s),d=0;d<s.cells.length;d++){var f=s.cells[d],h=t.getComputedStyle(f);if(r||h.display!=="none"){var _=void 0;i&&(_=vD(n,f,e,h,t)),c.push({rowSpan:f.rowSpan,colSpan:f.colSpan,styles:_,_element:f,content:CD(f)})}}var b=t.getComputedStyle(s);if(c.length>0&&(r||b.display!=="none"))return c}function CD(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function LD(n,e,t){for(var s=0,r=[n,e,t];s<r.length;s++){var i=r[s];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function jl(n,e,t,s,r){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),c=1;c<arguments.length;c++){var d=arguments[c];if(d!=null)for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(i[f]=d[f])}return i}function H_(n,e){var t=new Hu(n),s=t.getDocumentOptions(),r=t.getGlobalOptions();LD(r,s,e);var i=jl({},r,s,e),c;typeof window<"u"&&(c=window);var d=wD(r,s,e),f=ID(r,s,e),h=DD(t,i),_=OD(t,i,c);return{id:e.tableId,content:_,hooks:f,styles:d,settings:h}}function wD(n,e,t){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(f){if(f==="columnStyles"){var h=n[f],_=e[f],b=t[f];s.columnStyles=jl({},h,_,b)}else{var v=[n,e,t],T=v.map(function(C){return C[f]||{}});s[f]=jl({},T[0],T[1],T[2])}},i=0,c=Object.keys(s);i<c.length;i++){var d=c[i];r(d)}return s}function ID(n,e,t){for(var s=[n,e,t],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,c=s;i<c.length;i++){var d=c[i];d.didParseCell&&r.didParseCell.push(d.didParseCell),d.willDrawCell&&r.willDrawCell.push(d.willDrawCell),d.didDrawCell&&r.didDrawCell.push(d.didDrawCell),d.willDrawPage&&r.willDrawPage.push(d.willDrawPage),d.didDrawPage&&r.didDrawPage.push(d.didDrawPage)}return r}function DD(n,e){var t,s,r,i,c,d,f,h,_,b,v,T,C=Qh(e.margin,40/n.scaleFactor()),L=(t=RD(n,e.startY))!==null&&t!==void 0?t:C.top,R;e.showFoot===!0?R="everyPage":e.showFoot===!1?R="never":R=(s=e.showFoot)!==null&&s!==void 0?s:"everyPage";var I;e.showHead===!0?I="everyPage":e.showHead===!1?I="never":I=(r=e.showHead)!==null&&r!==void 0?r:"everyPage";var j=(i=e.useCss)!==null&&i!==void 0?i:!1,O=e.theme||(j?"plain":"striped"),U=!!e.horizontalPageBreak,se=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:j,theme:O,startY:L,margin:C,pageBreak:(f=e.pageBreak)!==null&&f!==void 0?f:"auto",rowPageBreak:(h=e.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(_=e.tableWidth)!==null&&_!==void 0?_:"auto",showHead:I,showFoot:R,tableLineWidth:(b=e.tableLineWidth)!==null&&b!==void 0?b:0,tableLineColor:(v=e.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:U,horizontalPageBreakRepeat:se,horizontalPageBreakBehaviour:(T=e.horizontalPageBreakBehaviour)!==null&&T!==void 0?T:"afterAllRows"}}function RD(n,e){var t=n.getLastAutoTable(),s=n.scaleFactor(),r=n.pageNumber(),i=!1;if(t&&t.startPageNumber){var c=t.startPageNumber+t.pageNumber-1;i=c===r}return typeof e=="number"?e:(e==null||e===!1)&&i&&(t==null?void 0:t.finalY)!=null?t.finalY+20/s:null}function OD(n,e,t){var s=e.head||[],r=e.body||[],i=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(t){var d=G_(n,e.html,t,c,e.useCss)||{};s=d.head||s,r=d.body||s,i=d.foot||s}else console.error("Cannot parse html in non browser environment")}var f=e.columns||PD(s,r,i);return{columns:f,head:s,body:r,foot:i}}function PD(n,e,t){var s=n[0]||e[0]||t[0]||[],r=[];return Object.keys(s).filter(function(i){return i!=="_element"}).forEach(function(i){var c=1,d;Array.isArray(s)?d=s[parseInt(i)]:d=s[i],typeof d=="object"&&!Array.isArray(d)&&(c=(d==null?void 0:d.colSpan)||1);for(var f=0;f<c;f++){var h=void 0;Array.isArray(s)?h=r.length:h=i+(f>0?"_".concat(f):"");var _={dataKey:h};r.push(_)}}),r}var gp=function(){function n(e,t,s){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=s,this.doc=e.getDocument()}return n}(),MD=function(n){k_(e,n);function e(t,s,r,i,c,d){var f=n.call(this,t,s,d)||this;return f.cell=r,f.row=i,f.column=c,f.section=i.section,f}return e}(gp),kD=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,s){return t+s.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,s){return t+s.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,s,r,i,c){for(var d=0,f=t;d<f.length;d++){var h=f[d],_=new MD(e,this,s,r,i,c),b=h(_)===!1;if(s.text=Array.isArray(s.text)?s.text:[s.text],b)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var s=0,r=this.hooks.didDrawPage;s<r.length;s++){var i=r[s];i(new gp(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var s=0,r=this.hooks.willDrawPage;s<r.length;s++){var i=r[s];i(new gp(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(r,i){return r+i.wrappedWidth},0);return t}else{var s=this.settings.margin;return e-s.left-s.right}},n}(),Y_=function(){function n(e,t,s,r,i){i===void 0&&(i=!1),this.height=0,this.raw=e,e instanceof j_&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=s,this.cells=r,this.spansMultiplePages=i}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(s,r){var i;return Math.max(s,((i=t.cells[r.index])===null||i===void 0?void 0:i.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(s){var r=t.cells[s.index];return r?r.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var s=this;return e.reduce(function(r,i){var c=s.cells[i.index];if(!c)return 0;var d=t.getLineHeight(c.styles.fontSize),f=c.padding("vertical"),h=f+d;return h>r?h:r},0)},n}(),q_=function(){function n(e,t,s){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=s,this.raw=e;var i=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=(r=e.content)!==null&&r!==void 0?r:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=i!=null?""+i:"",d=/\r\n|\r|\n/g;this.text=c.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var s;if(this.styles.halign==="right")s=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");s=this.x+r/2+this.padding("left")}else s=this.x+this.padding("left");return{x:s,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var s=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/e*t,i=s*r+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=Qh(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),jD=function(){function n(e,t,s){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=s}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,s=0,r=e.allRows();s<r.length;s++){var i=r[s],c=i.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(t=Math.max(t,c.styles.cellWidth))}return t},n}();function BD(n,e){UD(n,e);var t=[],s=0;e.columns.forEach(function(i){var c=i.getMaxCustomCellWidth(e);c?i.width=c:(i.width=i.wrappedWidth,t.push(i)),s+=i.width});var r=e.getWidth(n.pageSize().width)-s;r&&(r=xp(t,r,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),r&&(r=xp(t,r,function(i){return i.minWidth})),r=Math.abs(r),!e.settings.horizontalPageBreak&&r>.1/n.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),VD(e),GD(e,n),FD(e)}function UD(n,e){var t=n.scaleFactor(),s=e.settings.horizontalPageBreak,r=F_(n,e);e.allRows().forEach(function(i){for(var c=0,d=e.columns;c<d.length;c++){var f=d[c],h=i.cells[f.index];if(h){var _=e.hooks.didParseCell;e.callCellHooks(n,_,h,i,f,null);var b=h.padding("horizontal");h.contentWidth=Vh(h.text,h.styles,n)+b;var v=Vh(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,n);if(h.minReadableWidth=v+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||s===!0)h.contentWidth>r?(h.minWidth=r,h.wrappedWidth=r):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var T=10/t;h.minWidth=h.styles.minCellWidth||T,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),e.allRows().forEach(function(i){for(var c=0,d=e.columns;c<d.length;c++){var f=d[c],h=i.cells[f.index];if(h&&h.colSpan===1)f.wrappedWidth=Math.max(f.wrappedWidth,h.wrappedWidth),f.minWidth=Math.max(f.minWidth,h.minWidth),f.minReadableWidth=Math.max(f.minReadableWidth,h.minReadableWidth);else{var _=e.styles.columnStyles[f.dataKey]||e.styles.columnStyles[f.index]||{},b=_.cellWidth||_.minCellWidth;b&&typeof b=="number"&&(f.minWidth=b,f.wrappedWidth=b)}h&&(h.colSpan>1&&!f.minWidth&&(f.minWidth=h.minWidth),h.colSpan>1&&!f.wrappedWidth&&(f.wrappedWidth=h.minWidth))}})}function xp(n,e,t){for(var s=e,r=n.reduce(function(T,C){return T+C.wrappedWidth},0),i=0;i<n.length;i++){var c=n[i],d=c.wrappedWidth/r,f=s*d,h=c.width+f,_=t(c),b=h<_?_:h;e-=b-c.width,c.width=b}if(e=Math.round(e*1e10)/1e10,e){var v=n.filter(function(T){return e<0?T.width>t(T):!0});v.length&&(e=xp(v,e,t))}return e}function FD(n){for(var e={},t=1,s=n.allRows(),r=0;r<s.length;r++)for(var i=s[r],c=0,d=n.columns;c<d.length;c++){var f=d[c],h=e[f.index];if(t>1)t--,delete i.cells[f.index];else if(h)h.cell.height+=i.height,t=h.cell.colSpan,delete i.cells[f.index],h.left--,h.left<=1&&delete e[f.index];else{var _=i.cells[f.index];if(!_)continue;if(_.height=i.height,_.rowSpan>1){var b=s.length-r,v=_.rowSpan>b?b:_.rowSpan;e[f.index]={cell:_,left:v,row:i}}}}}function VD(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var s=e[t],r=null,i=0,c=0,d=0;d<n.columns.length;d++){var f=n.columns[d];if(c-=1,c>1&&n.columns[d+1])i+=f.width,delete s.cells[f.index];else if(r){var h=r;delete s.cells[f.index],r=null,h.width=f.width+i}else{var h=s.cells[f.index];if(!h)continue;if(c=h.colSpan,i=0,h.colSpan>1){r=h,i+=f.width;continue}h.width=f.width+i}}}function GD(n,e){for(var t={count:0,height:0},s=0,r=n.allRows();s<r.length;s++){for(var i=r[s],c=0,d=n.columns;c<d.length;c++){var f=d[c],h=i.cells[f.index];if(h){e.applyStyles(h.styles,!0);var _=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=e.splitTextToSize(h.text,_+1/e.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=i2(h.text,_,h.styles,e,"...");else if(h.styles.overflow==="hidden")h.text=i2(h.text,_,h.styles,e,"");else if(typeof h.styles.overflow=="function"){var b=h.styles.overflow(h.text,_);typeof b=="string"?h.text=[b]:h.text=b}h.contentHeight=h.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var v=h.contentHeight/h.rowSpan;h.rowSpan>1&&t.count*t.height<v*h.rowSpan?t={height:v,count:h.rowSpan}:t&&t.count>0&&t.height>v&&(v=t.height),v>i.height&&(i.height=v)}}t.count--}}function i2(n,e,t,s,r){return n.map(function(i){return HD(i,e,t,s,r)})}function HD(n,e,t,s,r){var i=1e4*s.scaleFactor();if(e=Math.ceil(e*i)/i,e>=Vh(n,t,s))return n;for(;e<Vh(n+r,t,s)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+r}function z_(n,e){var t=new Hu(n),s=YD(e,t.scaleFactor()),r=new kD(e,s);return BD(t,r),t.applyStyles(t.userStyles),r}function YD(n,e){var t=n.content,s=zD(t.columns);if(t.head.length===0){var r=o2(s,"head");r&&t.head.push(r)}if(t.foot.length===0){var r=o2(s,"foot");r&&t.foot.push(r)}var i=n.settings.theme,c=n.styles;return{columns:s,head:L0("head",t.head,s,c,i,e),body:L0("body",t.body,s,c,i,e),foot:L0("foot",t.foot,s,c,i,e)}}function L0(n,e,t,s,r,i){var c={},d=e.map(function(f,h){for(var _=0,b={},v=0,T=0,C=0,L=t;C<L.length;C++){var R=L[C];if(c[R.index]==null||c[R.index].left===0)if(T===0){var I=void 0;Array.isArray(f)?I=f[R.index-v-_]:I=f[R.dataKey];var j={};typeof I=="object"&&!Array.isArray(I)&&(j=(I==null?void 0:I.styles)||{});var O=$D(n,R,h,r,s,i,j),U=new q_(I,O,n);b[R.dataKey]=U,b[R.index]=U,T=U.colSpan-1,c[R.index]={left:U.rowSpan-1,times:T}}else T--,v++;else c[R.index].left--,T=c[R.index].times,_++}return new Y_(f,h,n,b)});return d}function o2(n,e){var t={};return n.forEach(function(s){if(s.raw!=null){var r=qD(e,s.raw);r!=null&&(t[s.dataKey]=r)}}),Object.keys(t).length>0?t:null}function qD(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function zD(n){return n.map(function(e,t){var s,r;return typeof e=="object"?r=(s=e.dataKey)!==null&&s!==void 0?s:t:r=t,new jD(r,e,t)})}function $D(n,e,t,s,r,i,c){var d=ND(s),f;n==="head"?f=r.headStyles:n==="body"?f=r.bodyStyles:n==="foot"&&(f=r.footStyles);var h=jl({},d.table,d[n],r.styles,f),_=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},b=n==="body"?_:{},v=n==="body"&&t%2===0?jl({},d.alternateRow,r.alternateRowStyles):{},T=TD(i),C=jl({},T,h,v,b);return jl(C,c)}function WD(n,e,t){var s;t===void 0&&(t={});var r=F_(n,e),i=new Map,c=[],d=[],f=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?f=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(f=[e.settings.horizontalPageBreakRepeat]),f.forEach(function(v){var T=e.columns.find(function(C){return C.dataKey===v||C.index===v});T&&!i.has(T.index)&&(i.set(T.index,!0),c.push(T.index),d.push(e.columns[T.index]),r-=T.wrappedWidth)});for(var h=!0,_=(s=t==null?void 0:t.start)!==null&&s!==void 0?s:0;_<e.columns.length;){if(i.has(_)){_++;continue}var b=e.columns[_].wrappedWidth;if(h||r>=b)h=!1,c.push(_),d.push(e.columns[_]),r-=b;else break;_++}return{colIndexes:c,columns:d,lastIndex:_-1}}function KD(n,e){for(var t=[],s=0;s<e.columns.length;s++){var r=WD(n,e,{start:s});r.columns.length&&(t.push(r),s=r.lastIndex)}return t}function $_(n,e){var t=e.settings,s=t.startY,r=t.margin,i={x:r.left,y:s},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=s+r.bottom+c;if(t.pageBreak==="avoid"){var f=e.body,h=f.reduce(function(v,T){return v+T.height},0);d+=h}var _=new Hu(n);(t.pageBreak==="always"||t.startY!=null&&d>_.pageSize().height)&&(K_(_),i.y=r.top),e.callWillDrawPageHooks(_,i);var b=jl({},i);e.startPageNumber=_.pageNumber(),t.horizontalPageBreak?XD(_,e,b,i):(_.applyStyles(_.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(v){return Ul(_,e,v,i,e.columns)}),_.applyStyles(_.userStyles),e.body.forEach(function(v,T){var C=T===e.body.length-1;Gh(_,e,v,C,b,i,e.columns)}),_.applyStyles(_.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(v){return Ul(_,e,v,i,e.columns)})),B_(_,e,b,i),e.callEndPageHooks(_,i),e.finalY=i.y,n.lastAutoTable=e,_.applyStyles(_.userStyles)}function XD(n,e,t,s){var r=KD(n,e),i=e.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(h,_){n.applyStyles(n.userStyles),_>0?Zd(n,e,t,s,h.columns,!0):l2(n,e,s,h.columns),ZD(n,e,t,s,h.columns),w0(n,e,s,h.columns)});else for(var c=-1,d=r[0],f=function(){var h=c;if(d){n.applyStyles(n.userStyles);var _=d.columns;c>=0?Zd(n,e,t,s,_,!0):l2(n,e,s,_),h=c2(n,e,c+1,s,_),w0(n,e,s,_)}var b=h-c;r.slice(1).forEach(function(v){n.applyStyles(n.userStyles),Zd(n,e,t,s,v.columns,!0),c2(n,e,c+1,s,v.columns,b),w0(n,e,s,v.columns)}),c=h};c<e.body.length-1;)f()}function l2(n,e,t,s){var r=e.settings;n.applyStyles(n.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(i){return Ul(n,e,i,t,s)})}function ZD(n,e,t,s,r){n.applyStyles(n.userStyles),e.body.forEach(function(i,c){var d=c===e.body.length-1;Gh(n,e,i,d,t,s,r)})}function c2(n,e,t,s,r,i){n.applyStyles(n.userStyles),i=i??e.body.length;var c=Math.min(t+i,e.body.length),d=-1;return e.body.slice(t,c).forEach(function(f,h){var _=t+h===e.body.length-1,b=W_(n,e,_,s);f.canEntireRowFit(b,r)&&(Ul(n,e,f,s,r),d=t+h)}),d}function w0(n,e,t,s){var r=e.settings;n.applyStyles(n.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(i){return Ul(n,e,i,t,s)})}function JD(n,e,t){var s=t.getLineHeight(n.styles.fontSize),r=n.padding("vertical"),i=Math.floor((e-r)/s);return Math.max(0,i)}function QD(n,e,t,s){var r={};n.spansMultiplePages=!0,n.height=0;for(var i=0,c=0,d=t.columns;c<d.length;c++){var f=d[c],h=n.cells[f.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var _=new q_(h.raw,h.styles,h.section);_=jl(_,h),_.text=[];var b=JD(h,e,s);h.text.length>b&&(_.text=h.text.splice(b,h.text.length));var v=s.scaleFactor(),T=s.getLineHeightFactor();h.contentHeight=h.getContentHeight(v,T),h.contentHeight>=e&&(h.contentHeight=e,_.styles.minCellHeight-=e),h.contentHeight>n.height&&(n.height=h.contentHeight),_.contentHeight=_.getContentHeight(v,T),_.contentHeight>i&&(i=_.contentHeight),r[f.index]=_}}var C=new Y_(n.raw,-1,n.section,r,!0);C.height=i;for(var L=0,R=t.columns;L<R.length;L++){var f=R[L],_=C.cells[f.index];_&&(_.height=C.height);var h=n.cells[f.index];h&&(h.height=n.height)}return C}function e3(n,e,t,s){var r=n.pageSize().height,i=s.settings.margin,c=i.top+i.bottom,d=r-c;e.section==="body"&&(d-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var f=e.getMinimumRowHeight(s.columns,n),h=f<t;if(f>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var _=e.hasRowSpan(s.columns),b=e.getMaxCellHeight(s.columns)>d;return b?(_&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(_||s.settings.rowPageBreak==="avoid")}function Gh(n,e,t,s,r,i,c){var d=W_(n,e,s,i);if(t.canEntireRowFit(d,c))Ul(n,e,t,i,c);else if(e3(n,t,d,e)){var f=QD(t,d,e,n);Ul(n,e,t,i,c),Zd(n,e,r,i,c),Gh(n,e,f,s,r,i,c)}else Zd(n,e,r,i,c),Gh(n,e,t,s,r,i,c)}function Ul(n,e,t,s,r){s.x=e.settings.margin.left;for(var i=0,c=r;i<c.length;i++){var d=c[i],f=t.cells[d.index];if(!f){s.x+=d.width;continue}n.applyStyles(f.styles),f.x=s.x,f.y=s.y;var h=e.callCellHooks(n,e.hooks.willDrawCell,f,t,d,s);if(h===!1){s.x+=d.width;continue}t3(n,f,s);var _=f.getTextPos();M_(f.text,_.x,_.y,{halign:f.styles.halign,valign:f.styles.valign,maxWidth:Math.ceil(f.width-f.padding("left")-f.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,f,t,d,s),s.x+=d.width}s.y+=t.height}function t3(n,e,t){var s=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof s.lineWidth=="number"){var r=U_(s.lineWidth,s.fillColor);r&&n.rect(e.x,t.y,e.width,e.height,r)}else typeof s.lineWidth=="object"&&(s.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),n3(n,e,t,s.lineWidth))}function n3(n,e,t,s){var r,i,c,d;s.top&&(r=t.x,i=t.y,c=t.x+e.width,d=t.y,s.right&&(c+=.5*s.right),s.left&&(r-=.5*s.left),f(s.top,r,i,c,d)),s.bottom&&(r=t.x,i=t.y+e.height,c=t.x+e.width,d=t.y+e.height,s.right&&(c+=.5*s.right),s.left&&(r-=.5*s.left),f(s.bottom,r,i,c,d)),s.left&&(r=t.x,i=t.y,c=t.x,d=t.y+e.height,s.top&&(i-=.5*s.top),s.bottom&&(d+=.5*s.bottom),f(s.left,r,i,c,d)),s.right&&(r=t.x+e.width,i=t.y,c=t.x+e.width,d=t.y+e.height,s.top&&(i-=.5*s.top),s.bottom&&(d+=.5*s.bottom),f(s.right,r,i,c,d));function f(h,_,b,v,T){n.getDocument().setLineWidth(h),n.getDocument().line(_,b,v,T,"S")}}function W_(n,e,t,s){var r=e.settings.margin.bottom,i=e.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&t)&&(r+=e.getFootHeight(e.columns)),n.pageSize().height-s.y-r}function Zd(n,e,t,s,r,i){r===void 0&&(r=[]),i===void 0&&(i=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!i&&e.foot.forEach(function(d){return Ul(n,e,d,s,r)}),e.callEndPageHooks(n,s);var c=e.settings.margin;B_(n,e,t,s),K_(n),e.pageNumber++,s.x=c.left,s.y=c.top,t.y=c.top,e.callWillDrawPageHooks(n,s),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return Ul(n,e,d,s,r)}),n.applyStyles(n.userStyles))}function K_(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function s3(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=e[0],r=H_(this,s),i=z_(this,r);return $_(this,i),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,s,r){M_(e,t,s,r,this)},n.API.autoTableSetDefaults=function(e){return Hu.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Hu.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var s;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Hu(this),i=G_(r,e,window,t,!1),c=i.head,d=i.body,f=((s=c[0])===null||s===void 0?void 0:s.map(function(h){return h.content}))||[];return{columns:f,rows:d,data:d}}}var I0;function X_(n,e){var t=H_(n,e),s=z_(n,t);$_(n,s)}try{if(typeof window<"u"&&window){var u2=window,d2=u2.jsPDF||((I0=u2.jspdf)===null||I0===void 0?void 0:I0.jsPDF);d2&&s3(d2)}}catch(n){console.error("Could not apply autoTable plugin",n)}const a3=({isOpen:n,onClose:e,transactions:t,allDescriptions:s,onDeleteTransaction:r,onEditTransaction:i,onViewHistory:c,onRestoreTransaction:d})=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),1),[_,b]=D.useState(h.toISOString().split("T")[0]),[v,T]=D.useState(f.toISOString().split("T")[0]),[C,L]=D.useState(!1),[R,I]=D.useState([]),[j,O]=D.useState(""),[U,se]=D.useState(!1),Z=D.useRef(null),ee=D.useRef(null),[J,oe]=D.useState(null),{addNotification:xe}=ur(),F=D.useMemo(()=>[...new Set(s.map(k=>k.split(" | ")[0]))].sort((k,Y)=>k.localeCompare(Y,"bn-BD")),[s]),H=D.useMemo(()=>j.trim()?F.filter(k=>k.toLowerCase().includes(j.toLowerCase())):F,[F,j]),re=D.useCallback(()=>{if(!_||!v){xe("       ","warning");return}const k=new Date(_);k.setHours(0,0,0,0);const Y=new Date(v);Y.setHours(23,59,59,999);let Q=0,fe=0,ve=0;const de=t.filter(Ne=>{const Ue=new Date(Ne.date);return!(Ue>=k&&Ue<=Y)||!(R.length===0||R.some(Ze=>Ne.description.split(" | ")[0].split(" [")[0].toLowerCase()===Ze.toLowerCase()))?!1:Ne.isDeleted?(ve++,C):(Ne.type===fs.INCOME?Q+=Ne.amount:fe+=Ne.amount,!0)});oe({filteredTransactions:de.sort((Ne,Ue)=>new Date(Ue.date).getTime()-new Date(Ne.date).getTime()),totalIncome:Q,totalExpense:fe,netBalance:Q-fe,deletedCountInPeriod:ve})},[_,v,t,R,C,xe]);D.useEffect(()=>{n?re():(oe(null),L(!1),I([]),O(""),se(!1))},[n,_,v,C,R,re]),D.useEffect(()=>{const k=Y=>{Z.current&&!Z.current.contains(Y.target)&&ee.current&&!ee.current.contains(Y.target)&&se(!1)};return U&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[U]);const K=k=>{I(Y=>Y.includes(k)?Y.filter(Q=>Q!==k):[...Y,k])},Te=k=>{I(k?Y=>Array.from(new Set([...Y,...H])):Y=>Y.filter(Q=>!H.includes(Q)))},G=()=>{I([]),O("")},he=k=>{try{return new Date(k).toLocaleDateString("bn-BD",{day:"2-digit",month:"long",year:"numeric"})}catch{return k}},ue=k=>{if(!k)return"N/A";try{return new Date(k).toLocaleString("bn-BD",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",","")}catch{return k}},ae=(k,Y,Q)=>{const fe=new Blob([k],{type:Q}),ve=document.createElement("a");ve.href=URL.createObjectURL(fe),ve.download=Y,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(ve.href)},V=()=>{if(!J||!J.filteredTransactions){xe("   ","error");return}const Y=[[" (Date)"," (Description)"," (Type)",` (${p.BDT_SYMBOL}) (Amount)`," (Status)"].join(",")];J.filteredTransactions.forEach(ve=>{const de=ue(ve.date),Ne=`"${ve.description.replace(/"/g,'""')}"`,Ue=ve.type===fs.INCOME?p.INCOME:p.EXPENSE,we=ve.amount.toFixed(2),Je=ve.isDeleted?" ":"";Y.push([de,Ne,Ue,we,Je].join(","))});const Q="\uFEFF"+Y.join(`
`),fe=`Report_${_}_to_${v}${R.length>0?"_Filtered":""}.csv`;ae(Q,fe,"text/csv;charset=utf-8;"),xe("CSV    ","success")},ce=()=>{if(!J||!J.filteredTransactions){xe("   ","error");return}const k=new Nn;let Y="Helvetica";try{k.setFont("Noto Sans Bengali","normal"),Y="Noto Sans Bengali"}catch(Ze){console.warn("Noto Sans Bengali could not be set in jsPDF for doc.setFont. Falling back to Helvetica for document text.",Ze),k.setFont("Helvetica","normal"),Y="Helvetica"}k.setFontSize(18),k.text(p.REPORT_MODAL_TITLE,14,22),k.setFontSize(11),k.setTextColor(100);const Q=`${p.REPORT_FOR_PERIOD} ${he(_)} ${p.TO_DATE} ${he(v)}`;k.text(Q,14,30);let fe=38;if(R.length>0){const Ze=`${p.REPORT_FOR_DESCRIPTIONS} ${R.slice(0,3).join(", ")}${R.length>3?"...":""}`;k.setFontSize(9),k.setTextColor(120),k.text(Ze,14,fe),fe+=7,k.setFontSize(11),k.setTextColor(100)}[`${p.SUMMARY_TOTAL_INCOME}: ${p.BDT_SYMBOL} ${J.totalIncome.toLocaleString("bn-BD",{minimumFractionDigits:2})}`,`${p.SUMMARY_TOTAL_EXPENSE}: ${p.BDT_SYMBOL} ${J.totalExpense.toLocaleString("bn-BD",{minimumFractionDigits:2})}`,`${p.NET_BALANCE_FOR_PERIOD}: ${p.BDT_SYMBOL} ${J.netBalance.toLocaleString("bn-BD",{minimumFractionDigits:2})}`].forEach(Ze=>{k.text(Ze,14,fe),fe+=7});const de={3:{halign:"right"},0:{cellWidth:35},1:{cellWidth:"auto"},2:{cellWidth:25}},Ne=[[p.DATE,p.DESCRIPTION,p.TRANSACTION_TYPE,p.AMOUNT+` (${p.BDT_SYMBOL})`]],Ue=J.filteredTransactions.map(Ze=>[ue(Ze.date),Ze.description,Ze.type===fs.INCOME?p.INCOME:p.EXPENSE,Ze.amount.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]),we=Y==="Noto Sans Bengali"?"Noto Sans Bengali":"Helvetica";X_(k,{startY:fe+5,head:Ne,body:Ue,theme:"striped",headStyles:{fillColor:[22,160,133],font:we,fontStyle:"bold"},bodyStyles:{font:we},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:de,didDrawPage:Ze=>{let Qe=" "+k.getNumberOfPages();k.setFontSize(10);try{k.setFont(we,"normal")}catch{k.setFont("Helvetica","normal")}k.text(Qe,Ze.settings.margin.left,k.internal.pageSize.height-10)}});const Je=`Report_${_}_to_${v}${R.length>0?"_Filtered":""}.pdf`;k.save(Je),xe("PDF    ","success")};if(!n)return null;const M=R.length>0?p.DESCRIPTIONS_SELECTED_COUNT_TEXT.replace("{count}",R.length.toString()):p.SELECT_DESCRIPTIONS_BTN_TEXT;return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"report-modal-title",children:[l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"report-modal-title",className:"text-xl font-semibold text-slate-800",children:p.REPORT_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-5 p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-4",children:[l.jsx("p",{className:"text-sm font-medium text-slate-600",children:p.SELECT_DATE_RANGE}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"startDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.START_DATE}),l.jsx("input",{type:"date",id:"startDate",value:_,onChange:k=>b(k.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"endDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.END_DATE}),l.jsx("input",{type:"date",id:"endDate",value:v,onChange:k=>T(k.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:ee,type:"button",onClick:()=>se(k=>!k),className:`w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm text-sm
                ${U?"border-teal-500 ring-1 ring-teal-500":"border-slate-300"}
                ${R.length>0?"bg-teal-50 text-teal-700":"bg-white text-slate-700 hover:border-slate-400"}`,"aria-haspopup":"listbox","aria-expanded":U,children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(h_,{className:`w-4 h-4 mr-2 ${R.length>0?"text-teal-600":"text-slate-400"}`}),M]}),l.jsx(zh,{className:`w-4 h-4 transition-transform ${U?"rotate-180":""} ${R.length>0?"text-teal-600":"text-slate-400"}`})]}),U&&l.jsxs("div",{ref:Z,className:"absolute z-20 mt-1 w-full bg-white border border-slate-300 rounded-md shadow-lg max-h-72 flex flex-col",role:"listbox",children:[l.jsx("div",{className:"p-2 border-b border-slate-200",children:l.jsx("input",{type:"search",value:j,onChange:k=>O(k.target.value),placeholder:p.SEARCH_DESCRIPTIONS_PLACEHOLDER,className:"w-full px-2.5 py-1.5 border border-slate-300 rounded-md text-xs focus:ring-teal-500 focus:border-teal-500"})}),l.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1 custom-scrollbar-modal",children:H.length===0?l.jsx("p",{className:"text-xs text-slate-500 text-center py-2",children:p.NO_DESCRIPTIONS_AVAILABLE}):H.map(k=>l.jsxs("label",{className:"flex items-center space-x-2 px-2 py-1.5 hover:bg-slate-50 rounded cursor-pointer text-sm",children:[l.jsx("input",{type:"checkbox",checked:R.includes(k),onChange:()=>K(k),className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),l.jsx("span",{className:"text-slate-700",children:k})]},k))}),l.jsxs("div",{className:"p-2 border-t border-slate-200 flex flex-wrap gap-2 justify-between items-center",children:[l.jsx("button",{onClick:()=>Te(!0),className:"text-xs text-teal-600 hover:underline",children:p.SELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL}),l.jsx("button",{onClick:()=>Te(!1),className:"text-xs text-orange-600 hover:underline",children:p.DESELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL}),l.jsx("button",{onClick:G,className:"text-xs text-red-600 hover:underline",children:p.CLEAR_SELECTION_BTN_TEXT})]})]})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("button",{onClick:re,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition duration-150",children:p.GENERATE_REPORT_BTN})})]}),J?l.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:[l.jsxs("div",{className:"mb-4 p-3 bg-sky-50 rounded-md border border-sky-200 text-sm",children:[l.jsx("h3",{className:"font-semibold text-sky-700 mb-1.5",children:p.REPORT_SUMMARY_TITLE}),l.jsxs("p",{children:[p.REPORT_FOR_PERIOD," ",l.jsx("span",{className:"font-medium",children:he(_)})," ",p.TO_DATE," ",l.jsx("span",{className:"font-medium",children:he(v)})]}),R.length>0&&l.jsxs("p",{className:"text-xs text-slate-600 mt-0.5",children:[p.REPORT_FOR_DESCRIPTIONS," ",l.jsx("span",{className:"font-medium",children:R.join(", ")})]}),l.jsxs("p",{children:[p.SUMMARY_TOTAL_INCOME,": ",l.jsxs("span",{className:"font-medium text-green-600",children:[p.BDT_SYMBOL," ",J.totalIncome.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),l.jsxs("p",{children:[p.SUMMARY_TOTAL_EXPENSE,": ",l.jsxs("span",{className:"font-medium text-red-600",children:[p.BDT_SYMBOL," ",J.totalExpense.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),l.jsxs("p",{children:[p.NET_BALANCE_FOR_PERIOD,": ",l.jsxs("span",{className:`font-medium ${J.netBalance>=0?"text-green-600":"text-red-600"}`,children:[p.BDT_SYMBOL," ",J.netBalance.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),J.deletedCountInPeriod>0&&l.jsx("div",{className:"mt-1.5 pt-1.5 border-t border-sky-100",children:l.jsxs("label",{className:"flex items-center space-x-2 text-xs text-orange-700",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:k=>L(k.target.checked),className:"form-checkbox h-3.5 w-3.5 text-orange-600 border-slate-300 rounded focus:ring-orange-500"}),l.jsxs("span",{children:[" ",J.deletedCountInPeriod,"    "]})]})})]}),J.filteredTransactions.length>0?l.jsx(yp,{transactions:J.filteredTransactions,onDeleteTransaction:r,onEditTransaction:i,onViewHistory:c,onRestoreTransaction:d,showTitle:!1,initialShowDeleted:C}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_TRANSACTIONS_IN_RANGE})]}):l.jsx("div",{className:"flex-grow flex items-center justify-center",children:l.jsxs("p",{className:"text-slate-500",children:[p.LOADING,"        ..."]})}),l.jsxs("div",{className:"mt-6 pt-4 text-right border-t border-slate-200 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[J&&J.filteredTransactions.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:V,className:"flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx(sf,{className:"w-4 h-4"})," ",l.jsx("span",{children:"CSV  "})]}),l.jsxs("button",{onClick:ce,className:"flex items-center justify-center space-x-2 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500",children:[l.jsx(sf,{className:"w-4 h-4"})," ",l.jsx("span",{children:"PDF  "})]})]}),l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-500 hover:bg-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CLOSE_BTN})]})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})},r3=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),Z_=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9H3.75M10.5 6h3.75a2.25 2.25 0 0 1 2.25 2.25v3.75a2.25 2.25 0 0 1-2.25 2.25h-3.75a2.25 2.25 0 0 1-2.25-2.25V8.25a2.25 2.25 0 0 1 2.25-2.25Z"})}),i3=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-3.861 8.25-8.625 8.25S3.75 16.556 3.75 12 7.611 3.75 12.375 3.75 21 7.444 21 12Zm-2.625 .065c.014-.09.021-.182.021-.275a2.625 2.625 0 0 0-4.645-1.9C13.001 9.53 12.36 9 11.625 9S10.25 9.53 9.506 10.065A2.625 2.625 0 0 0 4.86 11.79c.007.093.014.185.021.275L4.5 14.25l2.622-.751a9.004 9.004 0 0 0 1.378.562A9.004 9.004 0 0 0 11.625 15a8.963 8.963 0 0 0 3.13-.562l2.622.751L18.375 12.065Z"})}),J_=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9A2.25 2.25 0 0 0 4.5 18.75Z"})}),o3=({person:n,netLedgerBalance:e,onEdit:t,onDelete:s,onViewHistory:r,onViewPersonDebtsHistory:i,onViewPersonLedger:c,onRestore:d,onOpenChat:f,onOpenVideoCall:h})=>{const _=(oe,xe=!0)=>{if(!oe)return"N/A";try{const F={day:"2-digit",month:"long",year:"numeric"};return xe&&(F.hour="2-digit",F.minute="2-digit"),new Date(oe).toLocaleDateString("bn-BD",F)}catch{return oe}},b=oe=>`${p.BDT_SYMBOL} ${Math.abs(oe).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,v=oe=>oe>0?p.LEDGER_BALANCE_STATUS_DEBIT.replace("{amount}",b(oe)):oe<0?p.LEDGER_BALANCE_STATUS_CREDIT.replace("{amount}",b(oe)):p.LEDGER_BALANCE_STATUS_ZERO,T=oe=>oe>0?"text-green-600":oe<0?"text-red-600":"text-slate-700",C=n.isDeleted?"opacity-70 hover:opacity-90":"",L=n.isDeleted?"border-slate-400":"border-sky-500",R=n.isDeleted&&n.deletedAt?_(n.deletedAt,!0):null,I=n.isDeleted?"text-slate-400":"text-slate-600",j=n.isDeleted?"text-slate-400":"text-slate-500",O=n.customAlias||n.name,U=n.isDeleted?"text-slate-500 line-through":"text-sky-700",se=oe=>{if(!oe)return"";const xe=oe.split(" ");return xe.length>1?`${xe[0][0]}${xe[xe.length-1][0]}`.toUpperCase():oe.substring(0,2).toUpperCase()},Z=!!n.systemUserId,ee=Z?p.OPEN_CHAT_TOOLTIP.replace("{personName}",O):p.CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",O),J=Z?p.OPEN_VIDEO_CALL_TOOLTIP.replace("{personName}",O):p.VIDEO_CALL_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",O);return l.jsxs("li",{className:`bg-white p-4 rounded-lg shadow-sm border-l-4 ${L} hover:shadow-md transition-shadow duration-150 ${C}`,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-grow mb-3 sm:mb-0",children:[l.jsx("div",{className:"flex-shrink-0",children:n.profileImage?l.jsx("img",{src:n.profileImage,alt:O,className:"h-12 w-12 rounded-full object-cover ring-1 ring-slate-200"}):l.jsx("span",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 font-semibold text-lg ring-1 ring-slate-300",children:se(O)})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("h3",{className:`text-lg font-semibold ${U}`,children:[O,n.systemUserId&&n.customAlias&&n.name!==n.customAlias&&l.jsxs("span",{className:`text-xs ${j} ml-1`,children:["(",n.name," ",p.SYSTEM_NAME_INDICATOR,")"]}),n.systemUserId&&!n.customAlias&&l.jsx("span",{className:`text-xs ${j} ml-1`,children:p.SYSTEM_NAME_INDICATOR})]}),n.mobileNumber&&l.jsxs("p",{className:`text-sm ${I}`,children:[p.PERSON_MOBILE_NUMBER,": ",n.mobileNumber]}),n.email&&l.jsxs("p",{className:`text-sm ${I}`,children:[p.EMAIL,": ",n.email]}),n.shopName&&l.jsxs("p",{className:`text-sm ${j}`,children:[p.PERSON_SHOP_NAME,": ",n.shopName]}),n.address&&l.jsxs("p",{className:`text-xs ${j} truncate max-w-xs sm:max-w-sm md:max-w-md`,title:n.address,children:[p.PERSON_ADDRESS,": ",n.address]}),typeof e=="number"&&!n.isDeleted&&l.jsxs("p",{className:`text-sm font-medium mt-1.5 ${T(e)}`,children:[l.jsxs("span",{className:"text-slate-600 font-normal",children:[p.CURRENT_NET_LEDGER_BALANCE_LABEL,": "]}),v(e)]}),n.isDeleted&&R&&l.jsxs("p",{className:"text-xs text-orange-600 font-medium mt-1",children:[p.DELETED_ON," ",R," (",p.STATUS_ARCHIVED,")"]})]})]}),l.jsx("div",{className:"flex items-center space-x-0.5 sm:space-x-1 self-end sm:self-center flex-shrink-0",children:n.isDeleted?l.jsx("button",{onClick:()=>d(n.id),className:"text-slate-500 hover:text-green-600 p-2 rounded-full hover:bg-green-50 transition duration-150","aria-label":p.RESTORE_ITEM_TOOLTIP,title:p.RESTORE_ITEM_TOOLTIP,children:l.jsx(P2,{className:"w-4 h-4"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>h(n),className:`p-2 rounded-full transition duration-150 ${Z?"text-slate-500 hover:text-green-600 hover:bg-green-50":"text-slate-400 cursor-not-allowed"}`,title:J,"aria-label":J,disabled:!Z,children:l.jsx(J_,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>f(n),className:`p-2 rounded-full transition duration-150 ${Z?"text-slate-500 hover:text-purple-600 hover:bg-purple-50":"text-slate-400 cursor-not-allowed"}`,title:ee,"aria-label":ee,disabled:!Z,children:l.jsx(i3,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>c(n),className:"text-slate-500 hover:text-indigo-600 p-2 rounded-full hover:bg-indigo-50 transition duration-150",title:p.VIEW_PERSON_LEDGER_TOOLTIP,"aria-label":p.VIEW_PERSON_LEDGER_TOOLTIP,children:l.jsx(Z_,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>i(n),className:"text-slate-500 hover:text-green-600 p-2 rounded-full hover:bg-green-50 transition duration-150",title:p.VIEW_PERSON_DEBTS_HISTORY_TOOLTIP,"aria-label":p.VIEW_PERSON_DEBTS_HISTORY_TOOLTIP,children:l.jsx(r3,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>r(n),className:"text-slate-500 hover:text-sky-600 p-2 rounded-full hover:bg-sky-50 transition duration-150",title:p.VIEW_HISTORY_TOOLTIP,"aria-label":p.VIEW_HISTORY_TOOLTIP,children:l.jsx(tf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>t(n),className:"text-slate-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition duration-150",title:p.EDIT_PERSON_BTN_LABEL,"aria-label":p.EDIT_PERSON_BTN_LABEL,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>s(n.id),className:"text-slate-500 hover:text-red-600 p-2 rounded-full hover:bg-red-50 transition duration-150",title:p.DELETE_PERSON_BTN_LABEL,"aria-label":p.DELETE_PERSON_BTN_LABEL,children:l.jsx(xr,{className:"w-4 h-4"})})]})})]}),!n.isDeleted&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-400",children:[l.jsxs("p",{children:[p.CREATED_ON," ",_(n.createdAt)]}),n.lastModified!==n.createdAt&&l.jsxs("p",{children:[p.LAST_MODIFIED_ON," ",_(n.lastModified)]})]})]})},Ri=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Q_=({persons:n,onEditPerson:e,onDeletePerson:t,onViewPersonHistory:s,onAddNewPerson:r,onViewPersonDebtsHistory:i,onViewPersonLedger:c,getPersonNetLedgerBalance:d,onRestorePerson:f,onOpenChat:h,onOpenVideoCall:_})=>{const[b,v]=D.useState(""),[T,C]=D.useState(!1),{activePersons:L,deletedPersons:R}=D.useMemo(()=>{const O=[],U=[],se=b.toLowerCase();return n.forEach(Z=>{const ee=Z.name.toLowerCase().includes(se),J=Z.mobileNumber&&Z.mobileNumber.includes(se),oe=Z.customAlias&&Z.customAlias.toLowerCase().includes(se);(ee||J||oe)&&(Z.isDeleted?U.push(Z):O.push(Z))}),O.sort((Z,ee)=>new Date(ee.lastModified).getTime()-new Date(Z.lastModified).getTime()),U.sort((Z,ee)=>new Date(ee.deletedAt||ee.lastModified).getTime()-new Date(Z.deletedAt||ee.lastModified).getTime()),{activePersons:O,deletedPersons:U}},[n,b]),I=T?[...L,...R]:L,j=R.length;return l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:[l.jsx("input",{type:"text",placeholder:p.SEARCH_PERSON_PLACEHOLDER,value:b,onChange:O=>v(O.target.value),className:"w-full sm:w-auto px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"}),l.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[j>0&&l.jsx("button",{onClick:()=>C(!T),className:"text-xs text-teal-600 hover:text-teal-700 underline focus:outline-none py-2 px-2 whitespace-nowrap",children:T?p.HIDE_DELETED_ITEMS_BTN:`${p.SHOW_DELETED_ITEMS_BTN} (${j})`}),l.jsxs("button",{onClick:r,className:"flex-grow sm:flex-grow-0 flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-md transition duration-150",children:[l.jsx(Ri,{className:"w-5 h-5"}),l.jsx("span",{children:p.ADD_NEW_PERSON_BTN})]})]})]}),I.length===0?l.jsx("p",{className:"text-slate-500 text-center py-6",children:b&&!T?`"${b}"       `:b&&T?`"${b}"    (  )   `:!b&&T&&j===0?p.NO_DELETED_PERSONS:!b&&!T&&L.length===0&&j>0?p.NO_PERSONS_FOUND+" "+p.SHOW_DELETED_ITEMS_BTN+"  ":p.NO_PERSONS_FOUND}):l.jsx("ul",{className:"space-y-4",children:I.map(O=>l.jsx(o3,{person:O,netLedgerBalance:d(O.id),onEdit:e,onDelete:t,onViewHistory:s,onViewPersonDebtsHistory:i,onViewPersonLedger:c,onRestore:f,onOpenChat:h,onOpenVideoCall:_},O.id))})]})},l3=({isOpen:n,onClose:e,allTransactions:t,persons:s,onRestoreTransaction:r,onRestorePerson:i,onViewTransactionHistory:c,onViewPersonHistory:d,onEditPerson:f,onViewPersonDebtsHistory:h,onViewPersonLedger:_,getPersonNetLedgerBalance:b,onDeleteTransaction:v,onEditTransaction:T,onOpenChat:C,onOpenVideoCall:L})=>{const[R,I]=D.useState("transactions"),j=D.useMemo(()=>t.filter(U=>U.isDeleted),[t]),O=D.useMemo(()=>s.filter(U=>U.isDeleted),[s]);return l.jsx(Ya,{isOpen:n,onClose:e,title:p.ARCHIVE_MODAL_TITLE,size:"3xl",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsx("div",{className:"mb-4 border-b border-slate-200",children:l.jsxs("nav",{className:"-mb-px flex space-x-5","aria-label":"Tabs",children:[l.jsxs("button",{onClick:()=>I("transactions"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${R==="transactions"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":R==="transactions"?"page":void 0,children:[p.DELETED_TRANSACTIONS_TAB," (",j.length,")"]}),l.jsxs("button",{onClick:()=>I("persons"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${R==="persons"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":R==="persons"?"page":void 0,children:[p.DELETED_PERSONS_TAB," (",O.length,")"]})]})}),l.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:[R==="transactions"&&l.jsx(yp,{transactions:j,onDeleteTransaction:v,onEditTransaction:T,onViewHistory:c,onRestoreTransaction:r,showTitle:!1,initialShowDeleted:!0}),R==="persons"&&l.jsx(Q_,{persons:O,onEditPerson:f,onDeletePerson:()=>{},onViewPersonHistory:d,onAddNewPerson:()=>{},onViewPersonDebtsHistory:h,onViewPersonLedger:_,getPersonNetLedgerBalance:b,onRestorePerson:i,onOpenChat:C,onOpenVideoCall:L})]})]})})},em=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Hh=({debt:n,persons:e,onDeleteDebt:t,onToggleSettle:s,onEditDebt:r,onViewHistory:i,onViewPersonFinancialOverview:c})=>{const d=n.type===_a.RECEIVABLE,f=n.isSettled?"text-slate-400 line-through":d?"text-green-600":"text-red-600",h=n.isSettled?"border-slate-400":d?"border-green-500":"border-red-500",_=d?"text-green-700":"text-red-700",b=d?"hover:text-green-800":"hover:text-red-800";let v=n.isSettled?"text-slate-500":_;!n.isSettled&&c&&(v=`${_} ${b}`);const T="text-slate-600",C=e.find(oe=>oe.id===n.personId),L=C?C.customAlias||C.name:p.UNKNOWN_PERSON,R=(oe,xe=!1)=>{if(!oe)return"N/A";try{const F=new Date(oe);if(isNaN(F.getTime()))return oe;const H={day:"2-digit",month:"long",year:"numeric"};return xe?(H.hour="2-digit",H.minute="2-digit",F.toLocaleString("bn-BD",H)):F.toLocaleDateString("bn-BD",H)}catch{return oe}},I=R(n.creationDate,!0),j=n.dueDate?R(n.dueDate):" ",O=n.settledDate?R(n.settledDate,!0):"",U=n.lastModified&&n.lastModified!==n.creationDate?R(n.lastModified,!0):null,se=()=>{C&&c&&c(C)},Z=(n.remainingAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),ee=(n.originalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),J=!n.isSettled&&(n.remainingAmount||0)<(n.originalAmount||0)&&(n.remainingAmount||0)>0;return l.jsxs("li",{className:`bg-white p-4 rounded-lg shadow-sm border-l-4 ${h} flex flex-col space-y-3 hover:shadow-md transition-shadow duration-150`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[C&&c?l.jsx("button",{onClick:se,className:`font-semibold text-lg text-left hover:underline focus:outline-none focus:ring-1 focus:ring-offset-1 rounded-sm ${v} focus:ring-sky-500`,title:p.VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP.replace("{personName}",L),disabled:!c,children:L}):l.jsx("p",{className:`font-semibold text-lg ${v}`,children:L}),l.jsx("p",{className:`text-sm ${T}`,children:n.description}),C&&C.mobileNumber&&l.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",C.mobileNumber]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:`font-semibold text-xl ${f}`,children:[p.BDT_SYMBOL," ",Z]}),(J||n.isSettled&&n.originalAmount!==n.remainingAmount)&&l.jsxs("span",{className:"block text-xs text-slate-400",children:["(: ",p.BDT_SYMBOL," ",ee,")"]})]})]}),l.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[l.jsxs("p",{children:[p.CREATED_ON," ",I]}),!n.isSettled&&n.dueDate&&l.jsxs("p",{className:"text-orange-600",children:[p.DUE_ON," ",j]}),n.isSettled&&l.jsxs("p",{className:"text-lime-600 font-medium",children:[p.SETTLED_ON," ",O]}),U&&l.jsxs("p",{className:"italic",children:[p.LAST_MODIFIED_ON," ",U]}),J&&l.jsx("p",{className:"text-blue-600 font-medium",children:" "})]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200 mt-2 space-x-2",children:[l.jsx("button",{onClick:()=>s(n.id),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-colors duration-150
            ${n.isSettled?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":d?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:n.isSettled&&(n.remainingAmount||0)>0,children:n.isSettled?p.MARK_AS_UNSETTLED:p.MARK_AS_SETTLED}),l.jsxs("div",{className:"flex items-center space-x-0.5",children:[C&&c&&l.jsx("button",{onClick:se,className:"text-slate-500 hover:text-sky-600 p-1.5 rounded-full hover:bg-sky-50 transition duration-150","aria-label":p.VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP.replace("{personName}",L),title:p.VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP.replace("{personName}",L),children:l.jsx(em,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>i(n),className:"text-slate-500 hover:text-sky-600 p-1.5 rounded-full hover:bg-sky-50 transition duration-150","aria-label":p.VIEW_HISTORY_TOOLTIP,title:p.VIEW_HISTORY_TOOLTIP,children:l.jsx(tf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>r(n),className:"text-slate-500 hover:text-blue-600 p-1.5 rounded-full hover:bg-blue-50 transition duration-150","aria-label":p.EDIT_DEBT_TOOLTIP,title:p.EDIT_DEBT_TOOLTIP,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>t(n.id),className:"text-slate-500 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition duration-150","aria-label":p.DELETE_DEBT_TOOLTIP,title:p.DELETE_DEBT_TOOLTIP,children:l.jsx(xr,{className:"w-4 h-4"})})]})]})]})},c3=({debts:n,persons:e,onDeleteDebt:t,onToggleSettle:s,onEditDebt:r,onViewHistory:i,onViewPersonFinancialOverview:c})=>{const d=n.filter(h=>h.type===_a.RECEIVABLE).sort((h,_)=>new Date(_.creationDate).getTime()-new Date(h.creationDate).getTime()),f=n.filter(h=>h.type===_a.PAYABLE).sort((h,_)=>new Date(_.creationDate).getTime()-new Date(h.creationDate).getTime());return l.jsxs("section",{"aria-labelledby":"debt-list-heading",className:"my-8 p-4 md:p-6 bg-white rounded-xl shadow-lg",children:[l.jsx("h2",{id:"debt-list-heading",className:"text-2xl font-semibold text-slate-700 mb-6 text-center",children:p.DEBT_LIST_TITLE}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-medium text-green-700 mb-4 pb-2 border-b-2 border-green-200",children:p.RECEIVABLES_SUBTITLE}),d.length===0?l.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_DEBTS_RECEIVABLE}):l.jsx("ul",{className:"space-y-4",children:d.map(h=>l.jsx(Hh,{debt:h,persons:e,onDeleteDebt:t,onToggleSettle:s,onEditDebt:r,onViewHistory:i,onViewPersonFinancialOverview:c},h.id))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-medium text-red-700 mb-4 pb-2 border-b-2 border-red-200",children:p.PAYABLES_SUBTITLE}),f.length===0?l.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_DEBTS_PAYABLE}):l.jsx("ul",{className:"space-y-4",children:f.map(h=>l.jsx(Hh,{debt:h,persons:e,onDeleteDebt:t,onToggleSettle:s,onEditDebt:r,onViewHistory:i,onViewPersonFinancialOverview:c},h.id))})]})]})]})},u3=({isOpen:n,onClose:e,message:t,title:s=""})=>n?l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[101]",role:"dialog","aria-modal":"true","aria-labelledby":"simple-error-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-sm transform transition-all duration-150 ease-out scale-100",onClick:r=>r.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"mr-3 flex-shrink-0",children:l.jsx(Xu,{className:"h-6 w-6 text-red-500","aria-hidden":"true"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h2",{id:"simple-error-modal-title",className:"text-lg font-semibold text-slate-800 mb-2",children:s}),l.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-wrap",children:t})]})]}),l.jsx("div",{className:"mt-6 text-right",children:l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null,d3=({isOpen:n,onClose:e})=>{const[t,s]=D.useState(""),[r,i]=D.useState(""),[c,d]=D.useState(""),[f,h]=D.useState(null),{changePassword:_,isAuthLoading:b,authError:v,clearAuthError:T}=Nc();if(!n)return null;const C=async R=>{if(R.preventDefault(),h(null),T(),r.length<6){h(p.NEW_PASSWORD_LABEL);return}if(r!==c){h(p.PASSWORDS_DONT_MATCH);return}try{await _(t,r),e()}catch(I){!v&&I.message!==p.ERROR_CURRENT_PASSWORD_INCORRECT&&h(I.message||p.AUTH_ERROR_GENERAL)}},L=v||f;return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[99]",role:"dialog","aria-modal":"true","aria-labelledby":"change-password-modal-title",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-5",children:[l.jsx("h2",{id:"change-password-modal-title",className:"text-xl font-semibold text-slate-700",children:p.CHANGE_PASSWORD_MODAL_TITLE}),l.jsx("button",{onClick:()=>{e(),T(),h(null)},className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-slate-600 mb-1",children:p.CURRENT_PASSWORD_LABEL}),l.jsx("input",{type:"password",id:"currentPassword",value:t,onChange:R=>s(R.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.NEW_PASSWORD_LABEL}),l.jsx("input",{type:"password",id:"newPasswordModal",value:r,onChange:R=>i(R.target.value),placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${f&&f.includes("")?"border-red-500":"border-slate-300"}`,required:!0,minLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmNewPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.CONFIRM_NEW_PASSWORD_LABEL}),l.jsx("input",{type:"password",id:"confirmNewPasswordModal",value:c,onChange:R=>d(R.target.value),placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${f&&f===p.PASSWORDS_DONT_MATCH?"border-red-500":"border-slate-300"}`,required:!0,minLength:6})]}),L&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 border-l-4 border-red-400 text-red-700 text-sm rounded-md flex items-start space-x-2",role:"alert",children:[l.jsx(Xu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:L})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[l.jsx("button",{type:"button",onClick:()=>{e(),T(),h(null)},className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",disabled:b,children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50",disabled:b,children:b?p.LOADING:p.RESET_PASSWORD_BTN})]})]})]})})},f3=({isOpen:n,onClose:e})=>{const{currentUser:t,updateCurrentUserData:s,isAuthLoading:r,authError:i,clearAuthError:c}=Nc(),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[T,C]=D.useState(null);if(D.useEffect(()=>{t&&(f(t.name||""),_(t.mobileNumber||""),v(t.facebookProfileUrl||"")),C(null),i&&c()},[n,t]),!n||!t)return null;const L=O=>O.trim()===""?!0:/^(?:\+88|88)?(01[3-9]\d{8})$/.test(O),R=O=>O.trim()===""?!0:/^(https?:\/\/)?(www\.)?(m\.)?(facebook|fb)\.com\/[a-zA-Z0-9(\.\_\-?/=&\ S)]+$/i.test(O),I=async O=>{if(O.preventDefault(),C(null),c(),!d.trim()){C(p.NAME_PLACEHOLDER+" ");return}if(h.trim()&&!L(h.trim())){C(p.INVALID_MOBILE_NUMBER_FORMAT);return}if(b.trim()&&!R(b.trim())){C(p.INVALID_FACEBOOK_URL);return}const U={};if(d.trim()!==(t.name||"")&&(U.name=d.trim()),h.trim()!==(t.mobileNumber||"")?U.mobileNumber=h.trim()===""?void 0:h.trim():!h.trim()&&t.mobileNumber&&(U.mobileNumber=void 0),b.trim()!==(t.facebookProfileUrl||"")?U.facebookProfileUrl=b.trim()===""?void 0:b.trim():!b.trim()&&t.facebookProfileUrl&&(U.facebookProfileUrl=void 0),Object.keys(U).length===0){e();return}try{await s(U),e()}catch(se){!i&&se.message!==p.MOBILE_NUMBER_ALREADY_IN_USE.replace("{mobileNumber}","")&&C(se.message||p.AUTH_ERROR_GENERAL)}},j=i||T;return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[100]",role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-modal-title",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-5",children:[l.jsx("h2",{id:"edit-profile-modal-title",className:"text-xl font-semibold text-slate-700",children:p.EDIT_PROFILE_MODAL_TITLE}),l.jsx("button",{onClick:()=>{e(),c(),C(null)},className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("form",{onSubmit:I,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"profile-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.NAME," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"profile-name",value:d,onChange:O=>f(O.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profile-mobile",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_MOBILE_NUMBER}),l.jsx("input",{type:"tel",id:"profile-mobile",value:h,onChange:O=>_(O.target.value),placeholder:p.PERSON_MOBILE_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${T&&(T===p.INVALID_MOBILE_NUMBER_FORMAT||T.includes(p.MOBILE_NUMBER_ALREADY_IN_USE.split(" ")[0]))?"border-red-500":"border-slate-300"}`})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profile-facebook",className:"block text-sm font-medium text-slate-600 mb-1",children:p.FACEBOOK_PROFILE_URL}),l.jsx("input",{type:"url",id:"profile-facebook",value:b,onChange:O=>v(O.target.value),placeholder:p.FACEBOOK_PROFILE_URL_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${T===p.INVALID_FACEBOOK_URL?"border-red-500":"border-slate-300"}`})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profile-email",className:"block text-sm font-medium text-slate-600 mb-1",children:p.EMAIL_NOT_EDITABLE}),l.jsx("input",{type:"email",id:"profile-email",value:t.email,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm bg-slate-100 text-slate-500 cursor-not-allowed",readOnly:!0,disabled:!0})]}),j&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 border-l-4 border-red-400 text-red-700 text-sm rounded-md flex items-start space-x-2",role:"alert",children:[l.jsx(Xu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:j})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[l.jsx("button",{type:"button",onClick:()=>{e(),c(),C(null)},className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",disabled:r,children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50",disabled:r,children:r?p.LOADING:p.SAVE_CHANGES})]})]})]})})},h3=({onOpenInvoiceListModal:n,invoiceCount:e})=>l.jsxs("div",{onClick:n,className:"bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer flex flex-col items-center text-center h-full transform hover:scale-105",role:"button",tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&n()},"aria-label":`${p.VIEW_INVOICES_NAV_BTN}, ${p.INVOICE_HOME_CARD_SUBTITLE}`,children:[l.jsx(Yd,{className:"w-10 h-10 text-indigo-500 mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:p.VIEW_INVOICES_NAV_BTN}),l.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-grow",children:p.INVOICE_HOME_CARD_SUBTITLE}),typeof e=="number"&&l.jsxs("p",{className:"text-base font-bold text-indigo-600 mt-3 pt-2 border-t border-slate-100 w-full",children:[p.TOTAL_INVOICES_COUNT_LABEL,": ",e.toLocaleString("bn-BD")]})]}),Gd=({title:n,description:e,icon:t})=>l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col items-center text-center h-full transform hover:scale-105",children:[l.jsx("div",{className:"text-teal-500 mb-4",children:t}),l.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:n}),l.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-grow",children:e})]}),m3=({onSwitchAuthMode:n,onOpenInvoiceListModal:e})=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-600 via-cyan-600 to-sky-600 text-white flex flex-col items-center justify-center p-4 sm:p-8 selection:bg-yellow-300 selection:text-yellow-900",children:[l.jsxs("header",{className:"text-center mb-10 sm:mb-16",children:[l.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 animate-fadeInUp text-shadow-sm",children:p.WELCOME_TO_APP_MAIN_TITLE}),l.jsx("p",{className:"text-lg sm:text-xl text-teal-50 max-w-3xl mx-auto animate-fadeInUp animation-delay-300 leading-relaxed",children:p.WELCOME_TO_APP_SUBTITLE})]}),l.jsxs("main",{className:"w-full max-w-5xl",children:[l.jsxs("section",{className:"mb-10 sm:mb-12 animate-fadeInUp animation-delay-600",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-center mb-6 sm:mb-8 text-white text-shadow-xs",children:p.KEY_FEATURES_TITLE}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[l.jsx(Gd,{title:p.FEATURE_TRANSACTION_TRACKING_TITLE,description:p.FEATURE_TRANSACTION_TRACKING_DESC,icon:l.jsx(gh,{className:"w-10 h-10"})}),l.jsx(Gd,{title:p.FEATURE_DEBT_MANAGEMENT_TITLE,description:p.FEATURE_DEBT_MANAGEMENT_DESC,icon:l.jsx(kl,{className:"w-10 h-10"})}),l.jsx(Gd,{title:p.FEATURE_BUDGETING_TITLE,description:p.FEATURE_BUDGETING_DESC,icon:l.jsx(j0,{className:"w-10 h-10"})}),l.jsx(h3,{onOpenInvoiceListModal:e}),l.jsx(Gd,{title:p.FEATURE_PERSON_LEDGER_TITLE,description:p.FEATURE_PERSON_LEDGER_DESC,icon:l.jsx(Z_,{className:"w-10 h-10"})}),l.jsx(Gd,{title:p.FEATURE_AI_ADVICE_TITLE,description:p.FEATURE_AI_ADVICE_DESC,icon:l.jsx(d_,{className:"w-10 h-10"})})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6 animate-fadeInUp animation-delay-900",children:[l.jsxs("button",{onClick:()=>n("login"),className:"w-full sm:w-auto bg-white text-teal-700 font-semibold py-3 px-10 rounded-lg shadow-md hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-300 focus:ring-opacity-75 transition-all duration-150 transform hover:scale-105 text-lg flex items-center justify-center space-x-2","aria-label":p.LOGIN,children:[l.jsx(B0,{className:"w-5 h-5"}),l.jsx("span",{children:p.LOGIN})]}),l.jsxs("button",{onClick:()=>n("signup"),className:"w-full sm:w-auto bg-yellow-400 text-yellow-900 font-semibold py-3 px-10 rounded-lg shadow-md hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-75 transition-all duration-150 transform hover:scale-105 text-lg flex items-center justify-center space-x-2","aria-label":p.SIGNUP,children:[l.jsx(Ch,{className:"w-5 h-5"}),l.jsx("span",{children:p.SIGNUP})]})]})]}),l.jsx("footer",{className:"mt-10 sm:mt-16 text-center text-teal-100 text-sm animate-fadeInUp animation-delay-1200",children:l.jsxs("p",{children:[" ",new Date().getFullYear()," ",p.APP_TITLE,".  "]})}),l.jsx("style",{children:`
        .animation-delay-300 { animation-delay: 0.3s; }
        .animation-delay-600 { animation-delay: 0.6s; }
        .animation-delay-900 { animation-delay: 0.9s; }
        .animation-delay-1200 { animation-delay: 1.2s; }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fadeInUp {
            animation: fadeInUp 0.7s ease-out forwards;
            opacity: 0; /* Start hidden */
        }
        .text-shadow-sm { text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        .text-shadow-xs { text-shadow: 1px 1px 1px rgba(0,0,0,0.05); }
      `})]}),Pp=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),p3=1*1024*1024,g3=({onSave:n,initialData:e,onCancel:t,allPersons:s,onUserDetailsImported:r})=>{const[i,c]=D.useState(""),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[T,C]=D.useState(""),[L,R]=D.useState(""),[I,j]=D.useState(void 0),[O,U]=D.useState(void 0),[se,Z]=D.useState(""),[ee,J]=D.useState(""),[oe,xe]=D.useState(null),[F,H]=D.useState(!1),re=D.useRef(null),{addNotification:K}=ur(),Te=D.useRef(null),G=!!(e&&e.systemUserId);D.useEffect(()=>{e?(c(e.name),f(e.customAlias||""),_(e.mobileNumber||""),v(e.email||""),C(e.address||""),R(e.shopName||""),j(e.profileImage),U(e.systemUserId)):(c(""),f(""),_(""),v(""),C(""),R(""),j(void 0),U(void 0)),Z(""),J(""),xe(null),H(!1)},[e]);const he=D.useCallback(async()=>{var ve;if(G)return;const Y=((ve=Te.current)==null?void 0:ve.value.trim())||"";if(H(!0),Z(""),xe(null),!Y){O&&(U(void 0),K(p.SYSTEM_USER_UNLINKED_FORM_EDITABLE,"info",4e3)),H(!1);return}if(!/^(?:\+88|88)?(01[3-9]\d{8})$/.test(Y)){Z(p.INVALID_MOBILE_NUMBER_FORMAT),H(!1);return}const fe=s.find(de=>de.mobileNumber===Y&&(!e||de.id!==e.id));if(fe){const de=fe.name;Z(p.MOBILE_NUMBER_DUPLICATE.replace("{mobileNumber}",Y).replace("{personNamesString}",de)),H(!1);return}try{const de=await oT(Y);de&&de.id?O===de.id&&((e==null?void 0:e.mobileNumber)===Y||h===Y)?xe(null):xe(de):(O&&(U(void 0),K(p.SYSTEM_USER_UNLINKED_FORM_EDITABLE,"info",4e3)),xe(null))}catch(de){console.error("Error fetching system user by mobile:",de),O&&(U(void 0),K(p.SYSTEM_USER_UNLINKED_FORM_EDITABLE,"info",4e3)),xe(null)}finally{H(!1)}},[s,e,O,K,h,G]);D.useEffect(()=>{if(G&&(e!=null&&e.email)){v(e.email),J("");return}if(!b.trim()){J("");return}const Y=b.trim().toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y)){J(p.INVALID_EMAIL_FORMAT);return}const fe=s.filter(ve=>{var de;return((de=ve.email)==null?void 0:de.toLowerCase())===Y&&(!e||ve.id!==e.id)});if(fe.length>0){const ve=fe.map(de=>de.name).join(", ");J(p.PERSON_EMAIL_DUPLICATE.replace("{email}",b.trim()).replace("{personNamesString}",ve))}else J("")},[b,s,e,G]);const ue=Y=>{var fe;if(G)return;const Q=(fe=Y.target.files)==null?void 0:fe[0];if(Q){if(Q.size>p3){K(p.IMAGE_SIZE_TOO_LARGE_ERROR,"error"),re.current&&(re.current.value="");return}const ve=new FileReader;ve.onloadend=()=>{j(ve.result)},ve.readAsDataURL(Q)}},ae=()=>{G||(j(void 0),re.current&&(re.current.value=""))},V=()=>{if(!G&&oe&&oe.mobileNumber&&oe.id){const Y=oe.name||"",Q=oe.email||"";c(Y),v(Q),U(oe.id),f(""),K(p.USER_DETAILS_IMPORTED,"success");const fe={name:Y,email:Q||void 0,mobileNumber:oe.mobileNumber,systemUserId:oe.id};xe(null),!e&&r&&r(fe)}},ce=Y=>{if(Y.preventDefault(),!i.trim()&&!G){K(p.NAME+" ","error");return}if(se&&se!==p.IMPORT_SYSTEM_USER_PROMPT&&!G){K(se,"error");return}if(ee&&!G){K(ee,"error");return}const Q={name:i,customAlias:d.trim()||void 0,mobileNumber:h.trim()||void 0,email:b.trim()||void 0,address:T.trim()||void 0,shopName:L.trim()||void 0,profileImage:I,systemUserId:O};n(Q,e==null?void 0:e.id)},M="bg-slate-100 text-slate-500 cursor-not-allowed",k="border-slate-300";return l.jsxs("form",{onSubmit:ce,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"person-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[G?p.SYSTEM_LINKED_NAME_LABEL:p.NAME,!G&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"person-name",value:i,onChange:Y=>!G&&c(Y.target.value),placeholder:G?"":p.NAME_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${G?M:k}`,required:!G,readOnly:G})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"person-custom-alias",className:"block text-sm font-medium text-slate-600 mb-1",children:p.FIELD_NAME_CUSTOM_ALIAS}),l.jsx("input",{type:"text",id:"person-custom-alias",value:d,onChange:Y=>f(Y.target.value),placeholder:p.CUSTOM_ALIAS_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"}),G&&i!==d&&d&&l.jsxs("p",{className:"mt-1 text-xs text-slate-500 flex items-center",children:[l.jsx(f_,{className:"w-3 h-3 mr-1 text-sky-500"}),' "',l.jsx("span",{className:"font-medium mx-1",children:d}),'"    ']})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_PROFILE_IMAGE}),l.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[l.jsx("span",{className:"inline-block h-20 w-20 rounded-full overflow-hidden bg-slate-100 ring-2 ring-slate-200",children:I?l.jsx("img",{src:I,alt:p.IMAGE_PREVIEW_ALT,className:"h-full w-full object-cover"}):l.jsx("svg",{className:"h-full w-full text-slate-300",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsxs("button",{type:"button",onClick:()=>{var Y;return(Y=re.current)==null?void 0:Y.click()},className:`inline-flex items-center px-3 py-1.5 border shadow-sm text-xs font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${G?"border-slate-200 text-slate-400 bg-slate-100 cursor-not-allowed":"border-slate-300 text-slate-700 bg-white hover:bg-slate-50"}`,disabled:G,children:[l.jsx(Pp,{className:`w-4 h-4 mr-1.5 ${G?"text-slate-400":"text-slate-500"}`}),I?p.CHANGE_IMAGE_BTN:p.UPLOAD_IMAGE_BTN]}),l.jsx("input",{type:"file",ref:re,onChange:ue,accept:"image/*",className:"hidden","aria-label":p.UPLOAD_IMAGE_BTN,disabled:G}),I&&l.jsxs("button",{type:"button",onClick:ae,className:`inline-flex items-center px-3 py-1.5 border border-transparent shadow-sm text-xs font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${G?"text-red-400 bg-red-50 cursor-not-allowed":"text-red-700 bg-red-100 hover:bg-red-200"}`,disabled:G,children:[l.jsx(xr,{className:"w-4 h-4 mr-1.5"}),p.REMOVE_IMAGE_BTN]})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"person-mobile",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_MOBILE_NUMBER}),l.jsx("input",{ref:Te,type:"tel",id:"person-mobile",value:h,onChange:Y=>!G&&_(Y.target.value),onBlur:he,placeholder:p.PERSON_MOBILE_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${se&&!G?"border-red-500":G?M:k}`,"aria-describedby":"mobile-error-message mobile-import-prompt",readOnly:G}),se&&!G&&l.jsx("p",{id:"mobile-error-message",className:"mt-1 text-xs text-red-600",children:se}),F&&!G&&l.jsx("p",{className:"mt-1 text-xs text-slate-500 animate-pulse",children:p.LOADING}),oe&&!se&&!F&&!G&&l.jsxs("div",{id:"mobile-import-prompt",className:"mt-2 p-2 bg-sky-50 border border-sky-200 rounded-md text-xs",children:[l.jsx("p",{className:"text-sky-700",children:p.IMPORT_SYSTEM_USER_PROMPT}),l.jsxs("p",{className:"text-slate-600",children:[": ",l.jsx("span",{className:"font-medium",children:oe.name}),oe.email?`, : ${oe.email}`:""]}),l.jsxs("button",{type:"button",onClick:V,className:"mt-1.5 text-xs bg-sky-500 hover:bg-sky-600 text-white font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",children:[l.jsx(Ch,{className:"w-3 h-3"}),l.jsx("span",{children:p.IMPORT_USER_DETAILS_BTN})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"person-email",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_EMAIL_LABEL}),l.jsx("input",{type:"email",id:"person-email",value:b,onChange:Y=>!G&&v(Y.target.value),placeholder:p.PERSON_EMAIL_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${ee&&!G?"border-red-500":G?M:k}`,readOnly:G}),ee&&!G&&l.jsx("p",{id:"email-error",className:"mt-1 text-xs text-red-600",children:ee})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"person-address",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_ADDRESS}),l.jsx("textarea",{id:"person-address",value:T,onChange:Y=>!G&&C(Y.target.value),placeholder:p.PERSON_ADDRESS_PLACEHOLDER,rows:2,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${G?M:k}`,readOnly:G})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"person-shopName",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_SHOP_NAME}),l.jsx("input",{type:"text",id:"person-shopName",value:L,onChange:Y=>!G&&R(Y.target.value),placeholder:p.PERSON_SHOP_NAME_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${G?M:k}`,readOnly:G})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[l.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-70",disabled:!G&&(!!se&&se!==p.IMPORT_SYSTEM_USER_PROMPT||!!ee||F),children:e?p.SAVE_CHANGES:p.SAVE_PERSON_BTN})]})]})},x3=({isOpen:n,onClose:e,person:t})=>{if(!n||!t)return null;const s=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return f}},r=f=>({name:p.FIELD_NAME_PERSON_NAME,customAlias:p.FIELD_NAME_CUSTOM_ALIAS,mobileNumber:p.FIELD_NAME_PERSON_MOBILE,email:p.FIELD_NAME_PERSON_EMAIL,address:p.FIELD_NAME_PERSON_ADDRESS,shopName:p.FIELD_NAME_PERSON_SHOP_NAME,profileImageAction:p.FIELD_NAME_PERSON_PROFILE_IMAGE,systemUserId:"  ",isDeleted:p.FIELD_NAME_IS_DELETED,deletedAt:p.FIELD_NAME_DELETED_AT})[f]||f,i=(f,h)=>{if(h==null||h==="")return["mobileNumber","email","address","shopName","deletedAt","customAlias","systemUserId"].includes(f)&&(h===null||h==="")?"":"";if(f==="profileImageAction")switch(h){case"added":return p.PROFILE_IMAGE_ADDED;case"updated":return p.PROFILE_IMAGE_UPDATED;case"removed":return p.PROFILE_IMAGE_REMOVED;case"none":return" ";default:return String(h)}return f==="isDeleted"?h?p.FIELD_VALUE_TRUE:p.FIELD_VALUE_FALSE:f==="deletedAt"?s(String(h)):String(h)},c=(f,h)=>{const _=[],b=f.snapshot;if(f.action==="created"||!h&&f.action!=="updated"&&f.action!=="restored")Object.keys(b).forEach(v=>{b[v]!==void 0&&(v!=="profileImageAction"||b[v]!=="none")&&_.push(l.jsxs("li",{className:"text-sm",children:[l.jsxs("strong",{children:[r(v),":"]})," ",i(v,b[v])]},v))}),_.length===0&&_.push(l.jsx("li",{className:"text-sm italic",children:"      "},"initial-empty"));else if((f.action==="updated"||f.action==="restored")&&h){let v=!1;if(Object.keys(b).forEach(T=>{const C=h[T],L=b[T];let R=!1;if(T==="isDeleted")R=!!L!=!!C;else if(T==="profileImageAction")R=L!=="none"&&L!==C;else{const I=C==null||C==="",j=L==null||L==="";I&&j?R=!1:R=String(L)!==String(C)}R&&(f.action==="restored"?(T==="isDeleted"||T==="deletedAt"||T==="profileImageAction"||String(L)!==String(C))&&(v=!0,_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(T)).replace("{oldValue}",i(T,C)).replace("{newValue}",i(T,L))},T))):(v=!0,T==="profileImageAction"&&L!=="none"?_.push(l.jsxs("li",{className:"text-sm",children:[l.jsxs("strong",{children:[r(T),":"]})," ",i(T,L)]},T)):T!=="profileImageAction"&&_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(T)).replace("{oldValue}",i(T,C)).replace("{newValue}",i(T,L))},T))))}),!v){if(f.action==="updated")_.push(l.jsx("li",{className:"text-sm italic",children:"     "},"no-changes"));else if(f.action==="restored"){const T=!!b.isDeleted!=!!h.isDeleted,C=String(b.deletedAt)!==String(h.deletedAt),L=b.profileImageAction!=="none"&&b.profileImageAction!==h.profileImageAction;T&&_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("isDeleted")).replace("{oldValue}",i("isDeleted",h.isDeleted)).replace("{newValue}",i("isDeleted",b.isDeleted))},"isDeleted-restore-specific")),C&&_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("deletedAt")).replace("{oldValue}",i("deletedAt",h.deletedAt)).replace("{newValue}",i("deletedAt",b.deletedAt))},"deletedAt-restore-specific")),L&&_.push(l.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("profileImageAction")).replace("{oldValue}",i("profileImageAction",h.profileImageAction)).replace("{newValue}",i("profileImageAction",b.profileImageAction))},"profileImageAction-restore-specific")),!T&&!C&&!L&&_.push(l.jsx("li",{className:"text-sm italic",children:"  "},"no-substantive-restore-changes"))}}}else f.action==="deleted"&&Object.keys(b).forEach(v=>{(v==="isDeleted"||v==="deletedAt"||b[v]!==void 0&&b[v]!==null&&(v!=="profileImageAction"||b[v]!=="none"))&&_.push(l.jsxs("li",{className:"text-sm",children:[l.jsxs("strong",{children:[r(v),":"]})," ",i(v,b[v])]},v))});return _.length===0?l.jsx("li",{className:"text-sm italic",children:"    "}):l.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:_})},d=f=>{switch(f){case"created":return{text:p.ACTION_CREATED,color:"bg-green-100 text-green-700"};case"updated":return{text:p.ACTION_UPDATED,color:"bg-blue-100 text-blue-700"};case"deleted":return{text:p.ACTION_DELETED,color:"bg-red-100 text-red-700"};case"restored":return{text:p.ACTION_RESTORED,color:"bg-yellow-100 text-yellow-700"};default:return{text:f,color:"bg-slate-100 text-slate-700"}}};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"person-history-modal-title",children:[l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("div",{children:l.jsxs("h2",{id:"person-history-modal-title",className:"text-xl font-semibold text-slate-800",children:[p.PERSON_HISTORY_MODAL_TITLE,": ",l.jsx("span",{className:"font-normal",children:t.customAlias||t.name})]})}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"overflow-y-auto flex-grow pr-1 space-y-4 custom-scrollbar",children:t.editHistory&&t.editHistory.length>0?t.editHistory.slice().sort((f,h)=>new Date(h.timestamp).getTime()-new Date(f.timestamp).getTime()).map((f,h,_)=>{const b=_[h+1],v=b?b.snapshot:void 0,T=d(f.action);return l.jsxs("div",{className:"p-3.5 border border-slate-200 rounded-lg bg-slate-50 shadow-sm hover:shadow-md transition-shadow duration-150",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[l.jsxs("p",{className:"text-xs text-slate-500",children:[l.jsx("span",{className:"font-semibold text-slate-700",children:" : "}),f.userId]}),l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${T.color}`,children:T.text})]}),l.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-1",children:[p.VERSION_AT_TIMESTAMP," ",s(f.timestamp)]}),c(f,v)]},f.timestamp)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_HISTORY})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1; /* slate-300 */
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8; /* slate-500 */
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},E3=({isOpen:n,onClose:e,persons:t,onSelectPerson:s,onAddNewPerson:r})=>{const[i,c]=D.useState(""),d=D.useMemo(()=>{const f=i.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.mobileNumber&&h.mobileNumber.includes(f)).sort((h,_)=>h.name.localeCompare(_.name,"bn-BD"))},[t,i]);return n?l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[97]",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"select-person-modal-title",children:[l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col",onClick:f=>f.stopPropagation(),style:{animation:"fadeIn 0.2s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"select-person-modal-title",className:"text-xl font-semibold text-slate-800",children:p.SELECT_PERSON_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3",children:[l.jsx("input",{type:"text",placeholder:p.SEARCH_PERSON_PLACEHOLDER,value:i,onChange:f=>c(f.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",autoFocus:!0,"aria-label":" "}),l.jsxs("button",{onClick:()=>{r()},className:"flex items-center justify-center space-x-2 bg-green-500 hover:bg-green-600 text-white font-medium py-2.5 px-4 rounded-lg shadow-sm transition duration-150 text-sm sm:text-base flex-shrink-0",children:[l.jsx(Ri,{className:"w-5 h-5"}),l.jsx("span",{children:p.ADD_NEW_PERSON_BTN})]})]}),l.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:d.length===0?l.jsx("p",{className:"text-slate-500 text-center py-5",children:i?`"${i}"       `:p.NO_PERSONS_FOUND}):l.jsx("ul",{className:"space-y-2",role:"listbox","aria-label":" ",children:d.map(f=>l.jsx("li",{role:"option","aria-selected":"false",children:l.jsxs("button",{onClick:()=>{s(f.id)},className:"w-full text-left p-3 rounded-md hover:bg-teal-50 focus:bg-teal-100 focus:outline-none focus:ring-1 focus:ring-teal-500 transition duration-150",children:[l.jsx("span",{className:"font-medium text-slate-700",children:f.name}),f.mobileNumber&&l.jsxs("span",{className:"text-xs text-slate-500 block",children:[": ",f.mobileNumber]}),f.shopName&&l.jsxs("span",{className:"text-xs text-slate-500 block",children:[": ",f.shopName]})]})},f.id))})}),l.jsx("div",{className:"mt-5 pt-4 border-t border-slate-200 text-right",children:l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL})})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; /* bg-slate-50 */ border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; /* slate-200 */ border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; /* slate-300 */ }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      `})]}):null},_3=({isOpen:n,onClose:e,person:t,personDebts:s,allPersons:r,onDeleteDebt:i,onToggleSettle:c,onEditDebt:d,onViewDebtHistory:f})=>{if(!n||!t)return null;const h=[...s].sort((b,v)=>new Date(v.creationDate).getTime()-new Date(b.creationDate).getTime()),_=p.PERSON_DEBTS_HISTORY_MODAL_TITLE.replace("{personName}",t.name);return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"person-debts-history-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:b=>b.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"person-debts-history-modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800 truncate pr-2",children:_}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full flex-shrink-0","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.mobileNumber&&l.jsxs("p",{className:"text-sm text-slate-600 mb-0.5",children:[p.PERSON_MOBILE_NUMBER,": ",t.mobileNumber]}),t.shopName&&l.jsxs("p",{className:"text-sm text-slate-500 mb-0.5",children:[p.PERSON_SHOP_NAME,": ",t.shopName]}),t.address&&l.jsxs("p",{className:"text-xs text-slate-500 mb-3 truncate",title:t.address,children:[p.PERSON_ADDRESS,": ",t.address]}),l.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1 space-y-4",children:h.length===0?l.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_DEBTS_FOR_PERSON}):l.jsx("ul",{className:"space-y-4",children:h.map(b=>l.jsx(Hh,{debt:b,persons:r,onDeleteDebt:i,onToggleSettle:c,onEditDebt:d,onViewHistory:f},b.id))})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},b3=({isOpen:n,onClose:e,person:t,onAddEntry:s})=>{const[r,i]=D.useState(xo.DEBIT),[c,d]=D.useState(""),[f,h]=D.useState(""),[_,b]=D.useState(""),{addNotification:v}=ur();if(D.useEffect(()=>{n&&(i(xo.DEBIT),d(""),h(""),b(new Date().toISOString().slice(0,16)))},[n]),!n||!t)return null;const T=C=>{C.preventDefault();const L=parseFloat(c);if(isNaN(L)||L<=0){v(p.FORM_VALIDATION_ERROR.replace("  ",""),"error");return}if(!f.trim()){v(p.FORM_VALIDATION_ERROR.replace("   ",""),"error");return}if(!_){v("     ","error");return}s({personId:t.id,type:r,amount:L,description:f.trim(),date:new Date(_).toISOString()}),e()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[99]",role:"dialog","aria-modal":"true","aria-labelledby":"add-ledger-entry-modal-title",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{id:"add-ledger-entry-modal-title",className:"text-xl font-semibold text-slate-700",children:p.ADD_LEDGER_ENTRY_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("p",{className:"text-md text-slate-600 mb-5",children:[p.PERSON_NAME,": ",l.jsx("span",{className:"font-semibold",children:t.name})]}),l.jsxs("form",{onSubmit:T,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"entry-date",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DATE," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"datetime-local",id:"entry-date",value:_,onChange:C=>b(C.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1.5",children:[p.LEDGER_ENTRY_TYPE_LABEL," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md border border-slate-200 hover:bg-slate-50 has-[:checked]:bg-orange-50 has-[:checked]:border-orange-400",children:[l.jsx("input",{type:"radio",name:"ledgerEntryType",value:xo.DEBIT,checked:r===xo.DEBIT,onChange:()=>i(xo.DEBIT),className:"form-radio h-4 w-4 text-orange-600 focus:ring-orange-500"}),l.jsx("span",{className:"text-sm text-orange-700",children:p.LEDGER_TYPE_DEBIT_PERSON})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md border border-slate-200 hover:bg-slate-50 has-[:checked]:bg-teal-50 has-[:checked]:border-teal-400",children:[l.jsx("input",{type:"radio",name:"ledgerEntryType",value:xo.CREDIT,checked:r===xo.CREDIT,onChange:()=>i(xo.CREDIT),className:"form-radio h-4 w-4 text-teal-600 focus:ring-teal-500"}),l.jsx("span",{className:"text-sm text-teal-700",children:p.LEDGER_TYPE_CREDIT_PERSON})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"ledger-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",id:"ledger-amount",value:c,onChange:C=>d(C.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"ledger-description",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DESCRIPTION," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{id:"ledger-description",value:f,onChange:C=>h(C.target.value),placeholder:p.LEDGER_ENTRY_DESCRIPTION_PLACEHOLDER,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:p.ADD_LEDGER_ENTRY_BTN})]})]})]})})},T3=({isOpen:n,onClose:e,person:t,ledgerEntries:s,currentNetBalance:r,onAddEntryClick:i,onDeleteEntry:c})=>{if(!n||!t)return null;const d=[...s].sort((T,C)=>new Date(C.date).getTime()-new Date(T.date).getTime()),f=T=>{try{return new Date(T).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return T}},h=T=>`${p.BDT_SYMBOL} ${Math.abs(T).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,_=T=>T>0?p.LEDGER_BALANCE_STATUS_DEBIT.replace("{amount}",h(T)):T<0?p.LEDGER_BALANCE_STATUS_CREDIT.replace("{amount}",h(T)):p.LEDGER_BALANCE_STATUS_ZERO,b=T=>T>0?"text-green-600":T<0?"text-red-600":"text-slate-700",v=T=>{window.confirm(p.CONFIRM_DELETE_LEDGER_ENTRY_MSG)&&c(T,t.id)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"person-ledger-history-modal-title",onClick:e,children:l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-2xl md:max-w-3xl max-h-[90vh] flex flex-col",onClick:T=>T.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsxs("div",{children:[l.jsx("h2",{id:"person-ledger-history-modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800 truncate pr-2",children:p.PERSON_LEDGER_HISTORY_MODAL_TITLE.replace("{personName}",t.name)}),l.jsxs("p",{className:`text-md font-medium ${b(r)}`,children:[p.CURRENT_NET_LEDGER_BALANCE_LABEL,": ",_(r)]})]}),l.jsxs("div",{className:"mt-2 sm:mt-0 flex space-x-2",children:[l.jsxs("button",{onClick:()=>i(t),className:"flex items-center space-x-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-xs sm:text-sm font-medium py-2 px-3 rounded-md transition duration-150",children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsxs("span",{children:[p.ADD_LEDGER_ENTRY_BTN.split(" ")[0]," ",p.ADD_LEDGER_ENTRY_BTN.split(" ")[1]]})]}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1.5 rounded-full flex-shrink-0","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:d.length===0?l.jsx("p",{className:"text-slate-500 text-center py-10",children:p.NO_LEDGER_ENTRIES_FOUND}):l.jsx("div",{className:"divide-y divide-slate-100",children:d.map(T=>{const C=T.type===xo.DEBIT,L=C?"text-green-600":"text-red-600";return l.jsx("div",{className:"py-3 px-1.5 hover:bg-slate-50 rounded-md group",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[l.jsxs("div",{className:"flex-grow mb-1 sm:mb-0",children:[l.jsx("p",{className:"text-xs text-slate-500",children:f(T.date)}),l.jsx("p",{className:"text-sm font-medium text-slate-700",children:T.description})]}),l.jsxs("div",{className:"flex sm:flex-col items-end sm:text-right space-x-2 sm:space-x-0 sm:space-y-0.5 w-full sm:w-auto",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:`font-semibold text-sm ${L}`,children:C?`: ${h(T.amount)}`:`: ${h(T.amount)}`}),l.jsx("button",{onClick:()=>v(T.id),className:"ml-2 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-1",title:p.DELETE_DEBT_TOOLTIP,children:l.jsx(xr,{className:"w-3.5 h-3.5"})})]}),l.jsxs("p",{className:`text-xs font-medium ${b(T.balanceAfterEntry)}`,children:[p.LEDGER_BALANCE_AFTER_ENTRY,": ",_(T.balanceAfterEntry)]})]})]})},T.id)})})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md",children:p.CLOSE_BTN})})]})})},N3=({isOpen:n,onClose:e,person:t,personDebts:s,personLedgerEntries:r,currentNetLedgerBalance:i,allPersons:c,onDeleteDebt:d,onToggleSettle:f,onEditDebt:h,onViewDebtHistory:_,onAddLedgerEntryClick:b,onDeleteLedgerEntry:v})=>{if(!n)return null;const T=p.PERSON_FINANCIAL_OVERVIEW_MODAL_TITLE.replace("{personName}",t.name),C=D.useMemo(()=>{const U=r.map(Z=>({id:Z.id,date:Z.date,itemType:"ledger",description:Z.description,amount:Z.amount,ledgerEntryType:Z.type,balanceAfterEntry:Z.balanceAfterEntry,originalEntry:Z})),se=s.map(Z=>({id:Z.id,date:Z.creationDate,itemType:"debt",description:Z.description,amount:Z.originalAmount,debtType:Z.type,isSettled:Z.isSettled,dueDate:Z.dueDate,settledDate:Z.settledDate,creationDate:Z.creationDate,personId:Z.personId,originalDebt:Z}));return[...U,...se].sort((Z,ee)=>new Date(ee.date).getTime()-new Date(Z.date).getTime())},[r,s]),L=U=>{if(!U)return"N/A";try{const se={day:"2-digit",month:"long",year:"numeric"};return new Date(U).toLocaleDateString("bn-BD",se)}catch{return U}},R=U=>`${p.BDT_SYMBOL} ${Math.abs(U).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,I=U=>U>0?p.LEDGER_BALANCE_STATUS_DEBIT.replace("{amount}",R(U)):U<0?p.LEDGER_BALANCE_STATUS_CREDIT.replace("{amount}",R(U)):p.LEDGER_BALANCE_STATUS_ZERO,j=U=>U>0?"text-green-600":U<0?"text-red-600":"text-slate-700",O=U=>{window.confirm(p.CONFIRM_DELETE_LEDGER_ENTRY_MSG)&&v(U,t.id)};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-2 sm:p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"person-financial-overview-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-slate-50 p-4 sm:p-6 rounded-xl shadow-2xl w-full max-w-3xl xl:max-w-4xl max-h-[95vh] flex flex-col",onClick:U=>U.stopPropagation(),children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-4 pb-3 border-b border-slate-300",children:[l.jsx("div",{className:"flex-grow",children:l.jsx("h2",{id:"person-financial-overview-modal-title",className:"text-lg sm:text-xl md:text-2xl font-semibold text-slate-800",children:T})}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1.5 rounded-full sm:ml-4 absolute top-3 right-3 mt-1 mr-1 sm:static sm:mt-0 sm:mr-0","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg shadow-sm border border-slate-200",children:[l.jsxs("p",{className:"text-sm text-slate-600",children:[p.PERSON_NAME,": ",l.jsx("span",{className:"font-semibold text-slate-700",children:t.name})]}),t.mobileNumber&&l.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",t.mobileNumber]}),t.shopName&&l.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_SHOP_NAME,": ",t.shopName]}),t.address&&l.jsxs("p",{className:"text-xs text-slate-500 truncate max-w-xs sm:max-w-sm md:max-w-md",title:t.address,children:[p.PERSON_ADDRESS,": ",t.address]}),l.jsxs("p",{className:`text-md font-semibold mt-2 pt-2 border-t border-slate-100 ${j(i)}`,children:[p.CURRENT_NET_LEDGER_BALANCE_LABEL,": ",I(i)]})]}),l.jsxs("section",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1 bg-white p-4 rounded-lg shadow",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-indigo-700",children:p.UNIFIED_FINANCIAL_HISTORY_TITLE}),l.jsxs("button",{onClick:()=>b(t),className:"flex items-center space-x-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-xs font-medium py-1.5 px-3 rounded-md",title:p.ADD_LEDGER_ENTRY_MODAL_TITLE,children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsx("span",{children:"  "})]})]}),C.length===0?l.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_FINANCIAL_ACTIVITY}):l.jsx("ul",{className:"space-y-4",children:C.map(U=>{const se=L(U.date);if(U.itemType==="ledger"){const Z=U,ee=Z.ledgerEntryType===xo.DEBIT,J=ee?"border-green-500":"border-red-500",oe=ee?"text-green-600":"text-red-600",xe="text-slate-700",F=Z.ledgerEntryType===xo.DEBIT?p.LEDGER_TYPE_DEBIT_PERSON.split(" ")[0]:p.LEDGER_TYPE_CREDIT_PERSON.split(" ")[0];return l.jsx("li",{className:`bg-white p-3 rounded-md shadow-sm border-l-4 ${J} group`,children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[l.jsxs("div",{className:"flex-grow mb-1.5 sm:mb-0",children:[l.jsx("p",{className:"text-xs text-slate-500",children:se}),l.jsx("p",{className:`text-sm font-medium ${xe}`,children:Z.description})]}),l.jsxs("div",{className:"flex sm:flex-col items-end sm:text-right space-x-2 sm:space-x-0 sm:space-y-0.5 w-full sm:w-auto self-end sm:self-auto",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("span",{className:`font-semibold text-sm ${oe}`,children:[F,": ",R(Z.amount)]}),l.jsx("button",{onClick:()=>O(Z.id),className:"ml-1.5 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity p-0.5",title:p.DELETE_TRANSACTION_TOOLTIP,children:l.jsx(xr,{className:"w-3.5 h-3.5"})})]}),l.jsxs("p",{className:`text-xs font-medium ${j(Z.balanceAfterEntry)}`,children:[" (): ",I(Z.balanceAfterEntry)]})]})]})},Z.id)}else if(U.itemType==="debt"){const Z=U;return l.jsx("li",{className:"relative",children:l.jsx(Hh,{debt:Z.originalDebt,persons:c,onDeleteDebt:d,onToggleSettle:f,onEditDebt:h,onViewHistory:_})},Z.id)}return null})})]}),l.jsx("div",{className:"mt-5 pt-4 text-right border-t border-slate-300 bg-slate-50 -mx-4 sm:-mx-6 -mb-4 sm:-mb-6 px-4 sm:px-6 pb-4 sm:pb-6 rounded-b-xl",children:l.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 text-sm font-semibold text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})},v3=({isOpen:n,onClose:e,receivablePersons:t,onViewPersonDetails:s,persons:r})=>{if(!n)return null;const i=d=>`${p.BDT_SYMBOL} ${d.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,c=d=>{const f=r.find(h=>h.id===d);f&&(s(f),e())};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"receivable-persons-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col",onClick:d=>d.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"receivable-persons-modal-title",className:"text-xl font-semibold text-slate-800",children:p.RECEIVABLE_PERSONS_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:t.length===0?l.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_PERSONS_WITH_RECEIVABLES}):l.jsx("ul",{className:"space-y-3",children:t.map(d=>l.jsx("li",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow duration-150",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-green-700",children:d.personName}),d.personMobile&&l.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",d.personMobile]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-0.5",children:[p.TOTAL_RECEIVABLE_FROM_PERSON_LABEL," ",l.jsx("span",{className:"font-bold text-green-600",children:i(d.totalReceivableAmount)})]})]}),l.jsx("button",{onClick:()=>c(d.personId),className:"text-sky-600 hover:text-sky-700 p-2 rounded-full hover:bg-sky-100 transition-colors",title:p.VIEW_DETAILS_FOR_PERSON_RECEIVABLE_TOOLTIP.replace("{personName}",d.personName),"aria-label":p.VIEW_DETAILS_FOR_PERSON_RECEIVABLE_TOOLTIP.replace("{personName}",d.personName),children:l.jsx(em,{className:"w-5 h-5"})})]})},d.personId))})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},y3=({isOpen:n,onClose:e,payablePersons:t,onViewPersonDetails:s,persons:r})=>{if(!n)return null;const i=d=>`${p.BDT_SYMBOL} ${d.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,c=d=>{const f=r.find(h=>h.id===d);f&&(s(f),e())};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"payable-persons-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col",onClick:d=>d.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"payable-persons-modal-title",className:"text-xl font-semibold text-slate-800",children:p.PAYABLE_PERSONS_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:t.length===0?l.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_PERSONS_WITH_PAYABLES}):l.jsx("ul",{className:"space-y-3",children:t.map(d=>l.jsx("li",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow duration-150",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-red-700",children:d.personName}),d.personMobile&&l.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",d.personMobile]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-0.5",children:[p.TOTAL_PAYABLE_TO_PERSON_LABEL," ",l.jsx("span",{className:"font-bold text-red-600",children:i(d.totalPayableAmount)})]})]}),l.jsx("button",{onClick:()=>c(d.personId),className:"text-sky-600 hover:text-sky-700 p-2 rounded-full hover:bg-sky-100 transition-colors",title:p.VIEW_DETAILS_FOR_PERSON_PAYABLE_TOOLTIP.replace("{personName}",d.personName),"aria-label":p.VIEW_DETAILS_FOR_PERSON_PAYABLE_TOOLTIP.replace("{personName}",d.personName),children:l.jsx(em,{className:"w-5 h-5"})})]})},d.personId))})}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},A3=({isOpen:n,onClose:e,userSuggestions:t,predefinedIncomeSuggestions:s,predefinedExpenseSuggestions:r,onAddSuggestion:i,onEditSuggestion:c,onDeleteSuggestion:d})=>{const[f,h]=D.useState("expense"),[_,b]=D.useState(""),[v,T]=D.useState(null),[C,L]=D.useState(null),{addNotification:R}=ur();if(D.useEffect(()=>{n&&(h("expense"),b(""),T(null),L(null))},[n]),!n)return null;const I=ee=>{ee.preventDefault(),L(null);const J=_.trim();if(!J){L(p.SUGGESTION_CANNOT_BE_EMPTY);return}if([...t.filter(xe=>xe.type===f).map(xe=>xe.text.toLowerCase()),...(f==="income"?s:r).map(xe=>xe.toLowerCase())].includes(J.toLowerCase())){L(p.SUGGESTION_ALREADY_EXISTS);return}i(J,f),b("")},j=ee=>{var F;if(ee.preventDefault(),L(null),!v||!v.currentText.trim()){L(p.SUGGESTION_CANNOT_BE_EMPTY);return}const J=v.currentText.trim(),oe=((F=t.find(H=>H.id===v.id))==null?void 0:F.text)||"",xe=[...t.filter(H=>H.type===v.type&&H.id!==v.id).map(H=>H.text.toLowerCase()),...(v.type==="income"?s:r).map(H=>H.toLowerCase())];if(J.toLowerCase()!==oe.toLowerCase()&&xe.includes(J.toLowerCase())){L(p.SUGGESTION_ALREADY_EXISTS);return}c(v.id,J),T(null)},O=ee=>{T({id:ee.id,currentText:ee.text,type:ee.type}),L(null),h(ee.type)},U=f==="income"?s:r,se=t.filter(ee=>ee.type===f),Z=(ee,J,oe)=>l.jsxs("section",{className:"mb-4",children:[l.jsx("h3",{className:"text-md font-semibold text-slate-700 mb-2",children:oe}),ee.length===0?l.jsx("p",{className:"text-sm text-slate-500 italic",children:J?p.NO_USER_SUGGESTIONS_FOR_TYPE:"   "}):l.jsx("ul",{className:`space-y-1.5 ${J?"":"max-h-40 overflow-y-auto custom-scrollbar-modal pr-1 border-t border-slate-200 pt-2"}`,children:ee.map((xe,F)=>{const H=J?xe.text:xe,re=J?xe.id:`predefined-${F}`;return l.jsxs("li",{className:`flex justify-between items-center p-2 rounded-md group ${J?"bg-indigo-50 border-indigo-100":"bg-slate-100"}`,children:[l.jsx("span",{className:`text-sm ${J?"text-slate-700":"text-slate-600"}`,children:H}),J&&l.jsxs("div",{className:"space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>O(xe),className:"p-1 text-blue-600 hover:text-blue-800",title:p.EDIT_SUGGESTION_TOOLTIP,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>d(xe.id),className:"p-1 text-red-500 hover:text-red-700",title:p.DELETE_SUGGESTION_TOOLTIP,children:l.jsx(xr,{className:"w-4 h-4"})})]})]},re)})})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[100]",role:"dialog","aria-modal":"true","aria-labelledby":"manage-suggestions-modal-title",onClick:e,children:l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg md:max-w-xl max-h-[90vh] flex flex-col",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"manage-suggestions-modal-title",className:"text-xl font-semibold text-slate-800",children:p.MANAGE_SUGGESTIONS_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"mb-4 border-b border-slate-200",children:l.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>h("income"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none ${f==="income"?"border-green-500 text-green-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":f==="income"?"page":void 0,children:p.SUGGESTIONS_INCOME_TAB}),l.jsx("button",{onClick:()=>h("expense"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none ${f==="expense"?"border-red-500 text-red-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":f==="expense"?"page":void 0,children:p.SUGGESTIONS_EXPENSE_TAB})]})}),l.jsxs("div",{className:"mb-5 p-3.5 border border-teal-200 bg-teal-50 rounded-lg",children:[l.jsx("h3",{className:"text-md font-medium text-teal-700 mb-2",children:v?p.EDIT_SUGGESTION_MODAL_TITLE:`${f==="income"?p.INCOME:p.EXPENSE} ${p.ADD_NEW_SUGGESTION_LABEL.toLowerCase()}`}),l.jsxs("form",{onSubmit:v?j:I,className:"space-y-2.5",children:[l.jsx("input",{type:"text",value:v?v.currentText:_,onChange:ee=>v?T({...v,currentText:ee.target.value}):b(ee.target.value),placeholder:p.SUGGESTION_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",autoFocus:!!v}),C&&l.jsx("p",{className:"text-xs text-red-600",children:C}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-3.5 rounded-md text-sm flex items-center space-x-1.5",children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsx("span",{children:v?p.SAVE_CHANGES:p.ADD_SUGGESTION_BTN})]}),v&&l.jsx("button",{type:"button",onClick:()=>{T(null),L(null)},className:"bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-2 px-3.5 rounded-md text-sm",children:p.CANCEL})]})]})]}),l.jsxs("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1 space-y-5",children:[Z(se,!0,f==="income"?p.USER_SUGGESTIONS_TITLE_INCOME:p.USER_SUGGESTIONS_TITLE_EXPENSE),Z(U,!1,f==="income"?p.PREDEFINED_SUGGESTIONS_TITLE_INCOME:p.PREDEFINED_SUGGESTIONS_TITLE_EXPENSE)]}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 rounded-lg shadow-md",children:p.CLOSE_BTN})})]})})},S3=({isOpen:n,onClose:e,categories:t,budgets:s,transactions:r,allTransactionSuggestions:i,userCustomSuggestions:c,onAddCategory:d,onUpdateCategory:f,onDeleteCategory:h,onAddBudget:_,onUpdateBudget:b,onDeleteBudget:v,calculateBudgetUsage:T})=>{const[C,L]=D.useState("budgets"),[R,I]=D.useState(""),[j,O]=D.useState(null),[U,se]=D.useState([]),[Z,ee]=D.useState(""),[J,oe]=D.useState(""),[xe,F]=D.useState(!1),[H,re]=D.useState(""),[K,Te]=D.useState(Qs.MONTHLY),[G,he]=D.useState(""),[ue,ae]=D.useState(new Date().getFullYear().toString()),[V,ce]=D.useState(""),[M,k]=D.useState(new Date().getFullYear().toString()),[Y,Q]=D.useState("1"),[fe,ve]=D.useState(new Date().getFullYear().toString()),[de,Ne]=D.useState(""),[Ue,we]=D.useState(""),[Je,Ze]=D.useState(null),Qe=D.useMemo(()=>i.filter(pe=>!c.includes(pe)).sort((pe,yt)=>pe.localeCompare(yt,"bn-BD")),[i,c]),je=D.useMemo(()=>[...c].sort((pe,yt)=>pe.localeCompare(yt,"bn-BD")),[c]);D.useEffect(()=>{if(n){I(""),O(null),se([]),oe(""),ee(""),re(""),Te(Qs.MONTHLY);const pe=new Date;he(`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`),ae(pe.getFullYear().toString()),ce(ge(pe).toString()),k(pe.getFullYear().toString()),Q((Math.floor(pe.getMonth()/3)+1).toString()),ve(pe.getFullYear().toString()),Ne(pe.toISOString().split("T")[0]),we(new Date(pe.getFullYear(),pe.getMonth()+1,0).toISOString().split("T")[0]),Ze(null),L("budgets")}},[n]);function ge(pe){pe=new Date(Date.UTC(pe.getFullYear(),pe.getMonth(),pe.getDate())),pe.setUTCDate(pe.getUTCDate()+4-(pe.getUTCDay()||7));const yt=new Date(Date.UTC(pe.getUTCFullYear(),0,1));return Math.ceil(((pe.valueOf()-yt.valueOf())/864e5+1)/7)}const Fe=(pe,yt)=>{const At=pe==="user"?je:Qe;se(yt?Kt=>Array.from(new Set([...Kt,...At])):Kt=>Kt.filter(Gt=>!At.includes(Gt)))},ut=pe=>{se(yt=>yt.includes(pe)?yt.filter(At=>At!==pe):[...yt,pe])},Pe=async pe=>{pe.preventDefault(),j?(await f(j.id,R,U),O(null)):await d(R,U),I(""),se([])},nt=pe=>{O(pe),I(pe.name),se(pe.associatedSuggestions||[]),L("categories")},it=()=>{O(null),I(""),se([])},st=async pe=>{pe.preventDefault();const yt=parseFloat(H);let At="",Kt;switch(K){case Qs.MONTHLY:At=`${G}-01`;break;case Qs.WEEKLY:const Gt=new Date(parseInt(ue),0,1+(parseInt(V)-1)*7),xn=Gt.getDay(),rs=xn===0?-6:1-xn;Gt.setDate(Gt.getDate()+rs),At=Gt.toISOString().split("T")[0];break;case Qs.QUARTERLY:const Cn=(parseInt(Y)-1)*3;At=new Date(parseInt(M),Cn,1).toISOString().split("T")[0];break;case Qs.YEARLY:At=new Date(parseInt(fe),0,1).toISOString().split("T")[0];break;case Qs.CUSTOM:if(!de||!Ue){alert(p.BUDGET_INVALID_CUSTOM_DATE_RANGE);return}if(new Date(Ue)<new Date(de)){alert(p.BUDGET_INVALID_CUSTOM_DATE_RANGE);return}At=de,Kt=Ue;break;default:alert("  ");return}Je?(await b(Je.id,yt),Ze(null)):await _(J,yt,K,At,Kt),re(""),Je||(oe(""),ee(""))},Nt=pe=>{Ze(pe),oe(pe.categoryId);const yt=t.find(Gt=>Gt.id===pe.categoryId);ee(yt?yt.name:""),re(pe.amount.toString()),Te(pe.period);const At=new Date(pe.startDate),Kt=new Date(pe.endDate);switch(pe.period){case Qs.MONTHLY:he(`${At.getFullYear()}-${String(At.getMonth()+1).padStart(2,"0")}`);break;case Qs.WEEKLY:ae(At.getFullYear().toString()),ce(ge(At).toString());break;case Qs.QUARTERLY:k(At.getFullYear().toString()),Q((Math.floor(At.getMonth()/3)+1).toString());break;case Qs.YEARLY:ve(At.getFullYear().toString());break;case Qs.CUSTOM:Ne(At.toISOString().split("T")[0]),we(Kt.toISOString().split("T")[0]);break}L("budgets")},Pt=pe=>{var yt;return((yt=t.find(At=>At.id===pe))==null?void 0:yt.name)||p.UNKNOWN_PERSON},Rt=pe=>{const yt=new Date(pe.startDate),At=new Date(pe.endDate),Kt={day:"numeric",month:"long",year:"numeric"};switch(pe.period){case Qs.MONTHLY:return yt.toLocaleDateString("bn-BD",{month:"long",year:"numeric"});case Qs.WEEKLY:return`${yt.toLocaleDateString("bn-BD",Kt)} - ${At.toLocaleDateString("bn-BD",Kt)} ( ${ge(yt)})`;case Qs.QUARTERLY:const Gt=Math.floor(yt.getMonth()/3)+1,xn={1:p.QUARTER_1,2:p.QUARTER_2,3:p.QUARTER_3,4:p.QUARTER_4};return`${yt.getFullYear()} ${xn[Gt]||` ${Gt}`}`;case Qs.YEARLY:return yt.getFullYear().toString()+" ";case Qs.CUSTOM:return`${yt.toLocaleDateString("bn-BD",Kt)} - ${At.toLocaleDateString("bn-BD",Kt)}`;default:return Ft(pe.startDate)}},Ft=pe=>new Date(pe).toLocaleDateString("bn-BD",{month:"long",year:"numeric"}),Yt=({percentage:pe,isOverspent:yt})=>{const At=yt?100:Math.max(0,Math.min(100,pe));let Kt="bg-green-500";return yt?Kt="bg-red-600":pe>90?Kt="bg-red-500":pe>75&&(Kt="bg-yellow-500"),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 dark:bg-slate-700 my-1",children:l.jsx("div",{className:`${Kt} h-2.5 rounded-full transition-all duration-300 ease-out`,style:{width:`${At}%`},"aria-valuenow":yt?100:pe,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":`${p.BUDGET_PERCENTAGE_USED_LABEL.replace("{percentage}",pe.toFixed(0))}`})})},Be=[...t].sort((pe,yt)=>pe.name.localeCompare(yt.name,"bn-BD")),We=[...s].sort((pe,yt)=>new Date(yt.startDate).getTime()-new Date(pe.startDate).getTime()||Pt(pe.categoryId).localeCompare(Pt(yt.categoryId))),Lt=D.useMemo(()=>Z?Be.filter(pe=>pe.name.toLowerCase().includes(Z.toLowerCase())):Be,[Z,Be]);return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"budget-setup-modal-title",children:[l.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-2xl md:max-w-3xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[l.jsx("h2",{id:"budget-setup-modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800",children:p.BUDGET_SETUP_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"mb-4 border-b border-slate-200",children:l.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>L("budgets"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${C==="budgets"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":C==="budgets"?"page":void 0,children:p.BUDGETS_SECTION_TITLE}),l.jsx("button",{onClick:()=>L("categories"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${C==="categories"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":C==="categories"?"page":void 0,children:p.BUDGET_CATEGORIES_SECTION_TITLE})]})}),l.jsxs("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:[C==="categories"&&l.jsxs("section",{"aria-labelledby":"categories-section-title",children:[l.jsx("h3",{id:"categories-section-title",className:"text-lg font-semibold text-slate-700 mb-3",children:j?p.EDIT_BUDGET_CATEGORY_BTN:p.ADD_NEW_BUDGET_CATEGORY_BTN}),l.jsxs("form",{onSubmit:Pe,className:"mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"categoryName",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_CATEGORY_NAME_LABEL}),l.jsx("input",{type:"text",id:"categoryName",value:R,onChange:pe=>I(pe.target.value),placeholder:p.BUDGET_CATEGORY_NAME_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"      :"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3 max-h-60 overflow-y-auto custom-scrollbar-modal p-2 border rounded-md bg-white",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white py-1",children:[l.jsx("p",{className:"text-xs font-semibold text-indigo-600",children:p.USER_SUGGESTIONS_TITLE_EXPENSE}),je.length>0&&l.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-indigo-500 rounded-sm border-slate-400 focus:ring-indigo-400",title:U.filter(pe=>je.includes(pe)).length===je.length?p.DESELECT_ALL_SUGGESTIONS_LABEL:p.SELECT_ALL_SUGGESTIONS_LABEL,checked:je.length>0&&U.filter(pe=>je.includes(pe)).length===je.length,onChange:pe=>Fe("user",pe.target.checked)})]}),je.length>0?je.map(pe=>l.jsxs("label",{className:"flex items-center space-x-2 text-xs text-slate-700 mb-1 p-1 hover:bg-indigo-50 rounded",children:[l.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500",checked:U.includes(pe),onChange:()=>ut(pe)}),l.jsx("span",{children:pe})]},`user-${pe}`)):l.jsx("p",{className:"text-xs text-slate-400 italic",children:p.NO_USER_SUGGESTIONS_FOR_TYPE})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white py-1",children:[l.jsx("p",{className:"text-xs font-semibold text-sky-600",children:p.PREDEFINED_SUGGESTIONS_TITLE_EXPENSE}),Qe.length>0&&l.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-sky-500 rounded-sm border-slate-400 focus:ring-sky-400",title:U.filter(pe=>Qe.includes(pe)).length===Qe.length?p.DESELECT_ALL_SUGGESTIONS_LABEL:p.SELECT_ALL_SUGGESTIONS_LABEL,checked:Qe.length>0&&U.filter(pe=>Qe.includes(pe)).length===Qe.length,onChange:pe=>Fe("predefined",pe.target.checked)})]}),Qe.map(pe=>l.jsxs("label",{className:"flex items-center space-x-2 text-xs text-slate-700 mb-1 p-1 hover:bg-sky-50 rounded",children:[l.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-sky-600 border-slate-300 rounded focus:ring-sky-500",checked:U.includes(pe),onChange:()=>ut(pe)}),l.jsx("span",{children:pe})]},`predefined-${pe}`))]})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 pt-1",children:[l.jsxs("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-md text-sm flex items-center space-x-1.5",children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsx("span",{children:j?p.SAVE_CHANGES:p.SAVE_BUDGET_CATEGORY_BTN})]}),j&&l.jsx("button",{type:"button",onClick:it,className:"bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-2 px-4 rounded-md text-sm",children:p.CANCEL})]})]}),Be.length===0&&!j?l.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_BUDGET_CATEGORIES_FOUND}):l.jsx("ul",{className:"space-y-2",children:Be.map(pe=>l.jsxs("li",{className:"p-2.5 bg-white rounded-md border border-slate-200 hover:shadow-sm group",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-slate-700 text-sm font-medium",children:pe.name}),l.jsxs("div",{className:"space-x-1 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>nt(pe),className:"p-1.5 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50",title:p.EDIT_BUDGET_CATEGORY_BTN,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>h(pe.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:p.DELETE_BUDGET_CATEGORY_BTN,children:l.jsx(xr,{className:"w-4 h-4"})})]})]}),pe.associatedSuggestions&&pe.associatedSuggestions.length>0&&l.jsxs("div",{className:"mt-1.5 pt-1.5 border-t border-slate-100",children:[l.jsxs("p",{className:"text-xs text-slate-500 mb-0.5",children:["  (",pe.associatedSuggestions.length,"):"]}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[pe.associatedSuggestions.slice(0,5).map(yt=>l.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded-full",children:yt},yt)),pe.associatedSuggestions.length>5&&l.jsx("span",{className:"text-xs text-slate-400 px-1.5 py-0.5",children:"..."})]})]})]},pe.id))})]}),C==="budgets"&&l.jsxs("section",{"aria-labelledby":"budgets-section-title",children:[l.jsx("h3",{id:"budgets-section-title",className:"text-lg font-semibold text-slate-700 mb-3",children:Je?p.EDIT_BUDGET_BTN:p.ADD_NEW_BUDGET_BTN}),l.jsxs("form",{onSubmit:st,className:"mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"budgetCategorySearch",className:"block text-sm font-medium text-slate-600 mb-1",children:p.SELECT_BUDGET_CATEGORY_LABEL}),l.jsx("input",{type:"text",id:"budgetCategorySearch",value:Z,onChange:pe=>{ee(pe.target.value),F(!0),oe("")},onFocus:()=>F(!0),placeholder:p.BUDGET_SELECT_CATEGORY_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",required:!J,disabled:!!Je,autoComplete:"off"}),xe&&!Je&&l.jsx("ul",{className:"absolute z-10 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto",children:Lt.length>0?Lt.map(pe=>l.jsx("li",{onClick:()=>{oe(pe.id),ee(pe.name),F(!1)},className:"px-3 py-2 hover:bg-teal-50 cursor-pointer text-sm",children:pe.name},pe.id)):l.jsx("li",{className:"px-3 py-2 text-xs text-slate-500",children:"  "})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetAmount",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_AMOUNT_LABEL}),l.jsx("input",{type:"number",id:"budgetAmount",value:H,onChange:pe=>re(pe.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetPeriod",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_PERIOD_LABEL}),l.jsxs("select",{id:"budgetPeriod",value:K,onChange:pe=>Te(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",required:!0,disabled:!!Je,children:[l.jsx("option",{value:Qs.MONTHLY,children:p.BUDGET_MONTHLY_PERIOD}),l.jsx("option",{value:Qs.WEEKLY,children:p.BUDGET_WEEKLY_PERIOD}),l.jsx("option",{value:Qs.QUARTERLY,children:p.BUDGET_QUARTERLY_PERIOD}),l.jsx("option",{value:Qs.YEARLY,children:p.BUDGET_YEARLY_PERIOD}),l.jsx("option",{value:Qs.CUSTOM,children:p.BUDGET_CUSTOM_PERIOD_LABEL})]})]}),K===Qs.MONTHLY&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetMonthYear",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_START_MONTH_LABEL}),l.jsx("input",{type:"month",id:"budgetMonthYear",value:G,onChange:pe=>he(pe.target.value),disabled:!!Je,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",required:!0})]}),K===Qs.WEEKLY&&l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetYearForWeekly",className:"block text-xs font-medium text-slate-600 mb-1",children:""}),l.jsx("input",{type:"number",id:"budgetYearForWeekly",value:ue,onChange:pe=>ae(pe.target.value),disabled:!!Je,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",placeholder:"",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetWeek",className:"block text-xs font-medium text-slate-600 mb-1",children:" "}),l.jsx("input",{type:"number",id:"budgetWeek",value:V,onChange:pe=>ce(pe.target.value),min:"1",max:"53",disabled:!!Je,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",placeholder:"",required:!0})]})]}),K===Qs.QUARTERLY&&l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetYearForQuarterly",className:"block text-xs font-medium text-slate-600 mb-1",children:""}),l.jsx("input",{type:"number",id:"budgetYearForQuarterly",value:M,onChange:pe=>k(pe.target.value),disabled:!!Je,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",placeholder:"",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetQuarter",className:"block text-xs font-medium text-slate-600 mb-1",children:""}),l.jsxs("select",{id:"budgetQuarter",value:Y,onChange:pe=>Q(pe.target.value),disabled:!!Je,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",required:!0,children:[l.jsx("option",{value:"1",children:p.QUARTER_1}),l.jsx("option",{value:"2",children:p.QUARTER_2}),l.jsx("option",{value:"3",children:p.QUARTER_3}),l.jsx("option",{value:"4",children:p.QUARTER_4})]})]})]}),K===Qs.YEARLY&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"budgetYearForYearly",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_START_YEAR_LABEL}),l.jsx("input",{type:"number",id:"budgetYearForYearly",value:fe,onChange:pe=>ve(pe.target.value),disabled:!!Je,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",placeholder:",  ",required:!0})]}),K===Qs.CUSTOM&&l.jsxs("div",{className:"sm:col-span-2 grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"customStartDate",className:"block text-xs font-medium text-slate-600 mb-1",children:p.BUDGET_CUSTOM_START_DATE_LABEL}),l.jsx("input",{type:"date",id:"customStartDate",value:de,onChange:pe=>Ne(pe.target.value),disabled:!!Je,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"customEndDate",className:"block text-xs font-medium text-slate-600 mb-1",children:p.BUDGET_CUSTOM_END_DATE_LABEL}),l.jsx("input",{type:"date",id:"customEndDate",value:Ue,onChange:pe=>we(pe.target.value),disabled:!!Je,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",required:!0})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[l.jsxs("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-md text-sm flex items-center space-x-1.5",children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsx("span",{children:Je?p.SAVE_CHANGES:p.SAVE_BUDGET_BTN})]}),Je&&l.jsx("button",{type:"button",onClick:()=>{Ze(null),oe(""),ee(""),re("")},className:"bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-2 px-4 rounded-md text-sm",children:p.CANCEL})]})]}),We.length===0&&!Je?l.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_BUDGETS_FOUND}):l.jsx("ul",{className:"space-y-3",children:We.map(pe=>{const yt=T(pe,r),At=yt.spent>pe.amount;return l.jsxs("li",{className:"p-3 bg-white rounded-lg border border-slate-200 shadow-sm hover:shadow-md group",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start",children:[l.jsxs("div",{className:"mb-2 sm:mb-0",children:[l.jsx("h4",{className:"font-semibold text-md text-indigo-700",children:Pt(pe.categoryId)}),l.jsx("p",{className:"text-xs text-slate-500",children:p.BUDGET_FOR_PERIOD_LABEL.replace("{periodDisplay}",Rt(pe))})]}),l.jsxs("div",{className:"flex space-x-1 self-start sm:self-center opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Nt(pe),className:"p-1.5 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50",title:p.EDIT_BUDGET_BTN,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>v(pe.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:p.DELETE_BUDGET_BTN,children:l.jsx(xr,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"mt-1",children:[l.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mb-0.5",children:[l.jsxs("span",{children:[p.BUDGET_SPENT_LABEL,": ",p.BDT_SYMBOL,yt.spent.toLocaleString("bn-BD")]}),l.jsxs("span",{children:[p.BUDGET_TARGET_LABEL,": ",p.BDT_SYMBOL,pe.amount.toLocaleString("bn-BD")]})]}),l.jsx(Yt,{percentage:yt.percentageUsed,isOverspent:At}),l.jsxs("div",{className:"flex justify-between text-xs mt-0.5",children:[At?l.jsxs("span",{className:"text-red-600 font-medium",children:[p.BUDGET_OVERSPENT_LABEL,": ",p.BDT_SYMBOL,(yt.spent-pe.amount).toLocaleString("bn-BD")]}):l.jsxs("span",{className:"text-green-600",children:[p.BUDGET_REMAINING_LABEL,": ",p.BDT_SYMBOL,yt.remaining.toLocaleString("bn-BD")]}),l.jsx("span",{className:"text-slate-500",children:p.BUDGET_PERCENTAGE_USED_LABEL.replace("{percentage}",yt.percentageUsed.toFixed(0))})]})]})]},pe.id)})})]})]}),l.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 rounded-lg shadow-md focus:outline-none",children:p.CLOSE_BTN})})]}),l.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
      `})]})},e5=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),C3=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.122 2.122l7.81-7.81"})}),f2=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9 9.75h.008v.008H9V9.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.008-4.5h.008v.008h-.008V9.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),t5=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),L3=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.254 9.254 9 9.563 9h4.874c.309 0 .563.254.563.563v4.874c0 .309-.254.563-.563.563H9.563A.562.562 0 0 1 9 14.437V9.564Z"})]}),n5=({isOpen:n,onClose:e,imageUrl:t,imageName:s="chat-image"})=>{if(!n||!t)return null;const r=()=>{if(!t)return;const i=document.createElement("a");i.href=t,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(i.href)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-[110]",role:"dialog","aria-modal":"true","aria-labelledby":"image-viewer-modal-title",onClick:e,children:l.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl w-full h-full max-w-4xl max-h-[90vh] flex flex-col relative overflow-hidden",onClick:i=>i.stopPropagation(),children:[l.jsxs("div",{className:"absolute top-0 left-0 right-0 p-3 sm:p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/50 via-black/30 to-transparent",children:[l.jsx("h2",{id:"image-viewer-modal-title",className:"text-lg font-semibold text-white truncate pr-2",children:s!=="chat-image"?s:p.IMAGE_PREVIEW_CHAT_ALT}),l.jsx("button",{onClick:e,className:"text-white hover:text-slate-300 p-1.5 bg-black/30 hover:bg-black/50 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx(Wc,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-grow flex items-center justify-center overflow-hidden p-2",children:l.jsx("img",{src:t,alt:s,className:"max-w-full max-h-full object-contain"})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 flex justify-center items-center z-10 bg-gradient-to-t from-black/50 via-black/30 to-transparent",children:l.jsxs("button",{onClick:r,className:"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md flex items-center space-x-2 transition-colors duration-150","aria-label":"Download image",children:[l.jsx(sf,{className:"w-5 h-5"}),l.jsx("span",{children:""})]})})]})})},w3=["\\u{1F600}-\\u{1F64F}","\\u{1F300}-\\u{1F5FF}","\\u{1F680}-\\u{1F6FF}","\\u{1F700}-\\u{1F77F}","\\u{1F780}-\\u{1F7FF}","\\u{1F800}-\\u{1F8FF}","\\u{1F900}-\\u{1F9FF}","\\u{1FA00}-\\u{1FA6F}","\\u{1FA70}-\\u{1FAFF}","\\u{2600}-\\u{26FF}","\\u{2700}-\\u{27BF}","\\u{FE00}-\\u{FE0F}","\\u{1F1E6}-\\u{1F1FF}","\\u{E0020}-\\u{E007F}"].join(""),I3=new RegExp(`^[\\s${w3}]+$`,"u");function D3(n){return!n||!n.trim()||!/\S/.test(n)?!1:I3.test(n)}const R3=({isOpen:n,onClose:e,person:t,currentUser:s,messages:r,onSendMessage:i,onReactToMessage:c,onDeleteMessage:d})=>{const[f,h]=D.useState(""),[_,b]=D.useState([]),[v,T]=D.useState([]),[C,L]=D.useState(!1),[R,I]=D.useState(null),[j,O]=D.useState(null),[U,se]=D.useState(null),[Z,ee]=D.useState(!1),[J,oe]=D.useState(null),xe=D.useRef([]),[F,H]=D.useState(null),re=D.useRef(null),[K,Te]=D.useState(0),G=D.useRef(null),[he,ue]=D.useState(!1),[ae,V]=D.useState(null),ce=D.useRef(null),M=D.useRef(null),k=D.useRef(null),Y=D.useRef(null),Q=D.useRef(null),{addNotification:fe}=ur(),ve=D.useRef(null),de=D.useRef(0),Ne=D.useRef(0),Ue=D.useRef(!1),we=D.useRef(!1),Je=Be=>{const We=Math.floor(Be/1e3),Lt=Math.floor(We/60),pe=We%60;return`${Lt}:${pe.toString().padStart(2,"0")}`},Ze=(Be="smooth")=>{var We;(We=ce.current)==null||We.scrollIntoView({behavior:Be})};D.useEffect(()=>{n?(setTimeout(()=>Ze("auto"),50),setTimeout(()=>{var Be;return(Be=M.current)==null?void 0:Be.focus()},100),de.current=r.filter(Be=>!Be.isDeleted).length,Ne.current=v.length,Ue.current=!!F,we.current=Z):(h(""),b([]),T([]),L(!1),I(null),O(null),se(null),ue(!1),V(null),J&&J.state!=="inactive"&&J.stop(),oe(null),ee(!1),H(null),xe.current=[],G.current&&clearInterval(G.current),Te(0))},[n]),D.useEffect(()=>{if(n){const Be=r.filter(xn=>!xn.isDeleted).length,We=v.length,Lt=!!F,pe=Z,yt=Be>de.current,At=We!==Ne.current,Kt=Lt!==Ue.current,Gt=pe!==we.current;(yt||At||Kt||Gt||de.current===0&&Be>0)&&Ze("smooth"),de.current=Be,Ne.current=We,Ue.current=Lt,we.current=pe}},[n,r,v.length,F,Z]),D.useEffect(()=>{if(M.current){M.current.style.height="auto";const Be=M.current.scrollHeight,We=112;M.current.style.height=`${Math.min(Be,We)}px`}},[f]),D.useEffect(()=>{const Be=We=>{if(Y.current&&!Y.current.contains(We.target)){const Lt=document.getElementById("emoji-picker-button");if(Lt&&Lt.contains(We.target))return;L(!1)}if(Q.current&&!Q.current.contains(We.target)){const Lt=document.querySelectorAll(".add-reaction-trigger");let pe=!1;Lt.forEach(yt=>{yt.contains(We.target)&&(pe=!0)}),pe||I(null)}};return(C||R)&&document.addEventListener("mousedown",Be),()=>{document.removeEventListener("mousedown",Be)}},[C,R]);const Qe=async()=>{if(F&&ut(),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){fe(p.ERROR_AUDIO_RECORDING+" (Media API not supported)","error");return}try{const Be=await navigator.mediaDevices.getUserMedia({audio:!0}),We={mimeType:f0};let Lt;try{Lt=new MediaRecorder(Be,We)}catch{console.warn(`Failed to create MediaRecorder with ${f0}, trying default.`),Lt=new MediaRecorder(Be)}oe(Lt),xe.current=[],Lt.ondataavailable=pe=>{xe.current.push(pe.data)},Lt.onstop=()=>{const pe=new Blob(xe.current,{type:(Lt==null?void 0:Lt.mimeType)||f0}),yt=URL.createObjectURL(pe),At=re.current?Date.now()-re.current:0;H({blob:pe,url:yt,duration:At}),Be.getTracks().forEach(Kt=>Kt.stop()),G.current&&clearInterval(G.current),G.current=null,re.current=null},Lt.onerror=pe=>{console.error("MediaRecorder error:",pe),fe(p.ERROR_AUDIO_RECORDING,"error"),ge()},Lt.start(),ee(!0),Te(0),re.current=Date.now(),G.current=window.setInterval(()=>{if(re.current){const pe=Date.now()-re.current;Te(pe),pe>=jb&&(je(),fe(p.MAX_RECORDING_DURATION_REACHED,"info"))}},1e3)}catch(Be){console.error("Error starting recording:",Be);let We=p.ERROR_AUDIO_RECORDING;Be.name==="NotAllowedError"||Be.name==="PermissionDeniedError"?We="   ":(Be.name==="NotFoundError"||Be.name==="DevicesNotFoundError")&&(We="    "),fe(We,"error"),ge()}},je=()=>{J&&J.state!=="inactive"&&J.stop(),ee(!1)},ge=()=>{ee(!1),J&&(J.stream.getTracks().forEach(Be=>Be.stop()),oe(null)),G.current&&clearInterval(G.current),G.current=null,re.current=null,xe.current=[]},Fe=()=>{Z?je():Qe()},ut=()=>{F&&URL.revokeObjectURL(F.url),H(null),Te(0)},Pe=async Be=>{const We=Be.target.files;if(!We||We.length===0)return;const Lt=[];Array.from(We).forEach(pe=>{if(!Gx.includes(pe.type)){fe(p.INVALID_IMAGE_FILE+` (${pe.name})`,"error"),Lt.push(Promise.resolve(null));return}if(pe.size>kb){fe(p.IMAGE_TOO_LARGE_CHAT+` (${pe.name})`,"error"),Lt.push(Promise.resolve(null));return}const yt=new Promise(At=>{const Kt=new FileReader;Kt.onloadend=()=>{At({imageContent:{type:"image",base64Data:Kt.result,mimeType:pe.type,fileName:pe.name},previewUrl:Kt.result})},Kt.onerror=()=>{fe(`"${pe.name}"    `,"error"),At(null)},Kt.readAsDataURL(pe)});Lt.push(yt)});try{const yt=(await Promise.all(Lt)).filter(At=>At!==null);yt.length>0&&(b(At=>[...At,...yt.map(Kt=>Kt.imageContent)]),T(At=>[...At,...yt.map(Kt=>Kt.previewUrl)]))}catch(pe){console.error("Error processing images:",pe),fe("    ","error")}k.current&&(k.current.value="")},nt=Be=>{b(We=>We.filter((Lt,pe)=>pe!==Be)),T(We=>We.filter((pe,yt)=>yt!==Be)),_.length===1&&k.current&&(k.current.value="")},it=()=>{T([]),b([]),k.current&&(k.current.value="")},st=Be=>{var We;h(Lt=>Lt+Be),(We=M.current)==null||We.focus()},Nt=(Be,We)=>{c(Be,We),I(null)},Pt=async()=>{let We=f.trim(),Lt=!1;if(F){let pe;const yt=new FileReader;yt.readAsDataURL(F.blob);try{await new Promise((At,Kt)=>{yt.onloadend=()=>{pe={type:"audio",base64Data:yt.result,mimeType:F.blob.type,duration:Math.round(F.duration/1e3)},At()},yt.onerror=Gt=>{console.error("Error converting audio blob to base64:",Gt),fe(p.AUDIO_SEND_ERROR,"error"),Kt(Gt)}}),pe&&(i(We,t,void 0,pe),Lt=!0,We="")}catch{ut();return}ut()}if(_.length>0){i(Lt?"":We,t,_[0]),Lt=!0,We="";for(let yt=1;yt<_.length;yt++)i("",t,_[yt]);it()}We&&!Lt&&(i(We,t),Lt=!0),(Lt||_.length>0||F)&&h(""),L(!1)},Rt=Be=>{Be!=null&&Be.base64Data&&(V({url:Be.base64Data,name:Be.fileName}),ue(!0))},Ft=Be=>{if(!Be)return"";try{return new Date(Be).toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return" "}},Yt=p.CHAT_WITH_PERSON_TITLE.replace("{personName}",t.customAlias||t.name);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-2 sm:p-4 z-[101]",role:"dialog","aria-modal":"true","aria-labelledby":"chat-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-2xl w-full max-w-md md:max-w-lg h-[85vh] sm:h-[90vh] flex flex-col",onClick:Be=>Be.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 bg-white rounded-t-xl sticky top-0 z-10",children:[l.jsx("h2",{id:"chat-modal-title",className:"text-lg font-semibold text-slate-700 truncate",children:Yt}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx(Wc,{className:"w-6 h-6"})})]}),l.jsxs("div",{ref:ve,className:"flex-grow overflow-y-auto p-4 space-y-1 custom-scrollbar-chat",children:[r.length===0&&_.length===0&&!F?l.jsx("p",{className:"text-center text-slate-500 py-10",children:p.NO_MESSAGES_YET.replace("{personName}",t.customAlias||t.name)}):r.map(Be=>{const We=Be.actualSenderId===s.id,Lt=Be.content?D3(Be.content):!1;let pe="rounded-lg mb-0.5",yt="whitespace-pre-wrap break-words",At="";Lt?(pe+=" bg-transparent p-0 w-auto inline-block",yt+=" text-5xl"):(pe+=` shadow-sm max-w-[75%] ${We?"bg-teal-500 text-white rounded-br-none p-2.5":"bg-white text-slate-700 border border-slate-200 rounded-bl-none p-2.5"}`,yt+=" text-lg",At=We?"text-white":"text-slate-700"),Be.audioContent&&(pe=pe.replace(/max-w-\[75%\]|w-auto inline-block/g,"w-full"),Lt&&(pe=pe.replace("p-0","p-2.5")));const Kt=We&&!Be.isDeleted;return Be.isDeleted?l.jsx("div",{className:`flex flex-col ${We?"items-end":"items-start"} group relative py-1`,children:l.jsxs("div",{className:`max-w-[75%] p-2.5 rounded-lg shadow-sm mb-0.5 bg-slate-200 text-slate-500 italic ${We?"rounded-br-none":"rounded-bl-none"}`,children:[l.jsx("p",{className:"text-base whitespace-pre-wrap break-words",children:We?p.YOU_DELETED_A_MESSAGE:p.MESSAGE_WAS_DELETED}),l.jsx("p",{className:`text-xs mt-1 text-slate-400 ${We?"text-right":"text-left"}`,children:Ft(Be.deletedAt||Be.timestamp)})]})},Be.id):l.jsxs("div",{className:"group relative py-1",onMouseEnter:()=>{Kt&&!Be.isDeleted&&se(Be.id),!We&&!Be.isDeleted&&O(Be.id)},onMouseLeave:()=>{se(null),We||O(null)},children:[l.jsxs("div",{className:`flex flex-col ${We?"items-end":"items-start"}`,children:[l.jsxs("div",{className:pe,children:[Be.imageContent&&l.jsx("img",{src:Be.imageContent.base64Data,alt:Be.imageContent.fileName||"Chat image",className:"max-w-full h-auto rounded-md my-1 max-h-60 object-contain cursor-pointer",onClick:()=>Rt(Be.imageContent),onKeyDown:Gt=>Gt.key==="Enter"&&Rt(Be.imageContent),tabIndex:0,role:"button","aria-label":"   "}),Be.audioContent&&l.jsx("div",{className:"my-1",children:l.jsx("audio",{controls:!0,src:Be.audioContent.base64Data,className:"w-full",children:"     "})}),Be.content&&l.jsx("p",{className:`${yt} ${At}`,children:Be.content}),l.jsx("p",{className:`text-xs mt-1 ${Lt?We?"text-slate-700":"text-slate-400":We?"text-teal-100":"text-slate-400"} ${We?"text-right":"text-left"}`,children:Ft(Be.timestamp)})]}),Be.reactions&&Object.keys(Be.reactions).length>0&&l.jsx("div",{className:`flex flex-wrap gap-1 mt-0.5 px-1 ${We?"justify-end":"justify-start"}`,children:Object.entries(Be.reactions).map(([Gt,xn])=>{if(!xn||!Array.isArray(xn)||xn.length===0)return null;const rs=xn.includes(s.id??"");return l.jsxs("button",{onClick:()=>!We&&Nt(Be.id,Gt),className:`px-1.5 py-0.5 text-xs rounded-full border flex items-center space-x-1 transition-colors
                              ${rs?"bg-teal-100 border-teal-400 text-teal-700 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-600 hover:bg-slate-200"}
                              ${We?"cursor-default":"cursor-pointer"}`,"aria-label":`React with ${Gt}, currently ${xn.length} ${rs?", you reacted":""}`,disabled:We,children:[l.jsx("span",{className:"text-lg",children:Gt}),l.jsx("span",{children:xn.length})]},Gt)})})]}),!We&&!Be.isDeleted&&(j===Be.id||R===Be.id)&&l.jsxs("div",{className:"absolute left-0 z-20 flex flex-col items-start",style:{bottom:"-8px"},children:[R===Be.id&&l.jsx("div",{ref:Q,className:"mb-1 p-1.5 bg-white border border-slate-300 rounded-lg shadow-xl flex gap-1",style:{animation:"fadeInScaleUp 0.1s ease-out forwards"},children:Ub.map(Gt=>l.jsx("button",{onClick:()=>Nt(Be.id,Gt),className:"p-1.5 text-2xl rounded-md hover:bg-slate-100 focus:bg-slate-200 focus:outline-none","aria-label":`React with ${Gt}`,children:Gt},Gt))}),l.jsx("button",{className:"add-reaction-trigger p-1 bg-white border border-slate-300 rounded-full shadow-md focus:outline-none focus:ring-1 focus:ring-teal-500",onClick:()=>{const Gt=R===Be.id?null:Be.id;I(Gt)},title:p.ADD_REACTION_TOOLTIP,"aria-label":p.ADD_REACTION_TOOLTIP,children:l.jsx(f2,{className:"w-4 h-4 text-slate-600"})})]}),Kt&&!Be.isDeleted&&U===Be.id&&l.jsx("button",{onClick:()=>d(Be.id),className:"absolute z-20 p-1 bg-white border border-red-300 rounded-full shadow-md focus:outline-none focus:ring-1 focus:ring-red-500 hover:bg-red-50 text-red-500 hover:text-red-600",style:{bottom:"-8px",right:We?"0":void 0},title:p.DELETE_MESSAGE_TOOLTIP,"aria-label":p.DELETE_MESSAGE_TOOLTIP,children:l.jsx(xr,{className:"w-4 h-4"})})]},Be.id)}),l.jsx("div",{ref:ce})]}),v.length>0&&l.jsx("div",{className:"p-3 border-t border-slate-200 bg-white overflow-x-auto custom-scrollbar-chat-horizontal z-15",children:l.jsx("div",{className:"flex space-x-2",children:v.map((Be,We)=>l.jsxs("div",{className:"relative flex-shrink-0",children:[l.jsx("img",{src:Be,alt:`${p.IMAGE_PREVIEW_CHAT_ALT} ${We+1}`,className:"h-24 w-24 object-cover rounded-md border border-slate-300"}),l.jsx("button",{onClick:()=>nt(We),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 leading-none hover:bg-red-600 focus:outline-none focus:ring-1 focus:ring-red-300","aria-label":`  ${We+1} `,children:l.jsx(Wc,{className:"w-3.5 h-3.5"})})]},We))})}),F&&l.jsxs("div",{className:"p-3 border-t border-slate-200 bg-white flex items-center space-x-2 z-15",children:[l.jsx("audio",{controls:!0,src:F.url,className:"flex-grow",children:p.AUDIO_PREVIEW_LABEL}),l.jsx("span",{className:"text-xs text-slate-500",children:Je(F.duration)}),l.jsx("button",{onClick:ut,className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-100 transition-colors",title:p.REMOVE_AUDIO_PREVIEW_TOOLTIP,"aria-label":p.REMOVE_AUDIO_PREVIEW_TOOLTIP,children:l.jsx(xr,{className:"w-4 h-4"})})]}),Z&&l.jsxs("div",{className:"p-2 text-center text-sm text-red-600 bg-red-50 border-t border-red-200 z-15",children:[p.RECORDING_LABEL," ",Je(K)]}),l.jsx("div",{className:"p-3 border-t border-slate-200 bg-white rounded-b-xl sticky bottom-0 z-10",children:l.jsxs("div",{className:"relative",children:[" ",C&&l.jsx("div",{ref:Y,className:"absolute bottom-[calc(100%+0.5rem)] right-0 z-30 bg-white border border-slate-300 rounded-lg shadow-xl p-2 grid grid-cols-8 sm:grid-cols-10 gap-1 max-h-48 overflow-y-auto custom-scrollbar-chat w-80 sm:w-96",style:{animation:"fadeInScaleUp 0.1s ease-out forwards"},children:Bb.map(Be=>l.jsx("button",{onClick:()=>st(Be),className:"p-1.5 text-3xl rounded-md hover:bg-slate-100 focus:bg-slate-200 focus:outline-none",title:Be,"aria-label":` ${Be}`,children:Be},Be))}),l.jsxs("div",{className:"flex items-end space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>{var Be;return(Be=k.current)==null?void 0:Be.click()},className:"p-2.5 text-slate-500 hover:text-teal-600 rounded-full hover:bg-teal-50 transition-colors",title:p.ATTACH_IMAGE_TOOLTIP,"aria-label":p.ATTACH_IMAGE_TOOLTIP,disabled:Z,children:l.jsx(C3,{className:"w-5 h-5"})}),l.jsx("input",{type:"file",ref:k,onChange:Pe,accept:Gx.join(","),className:"hidden",multiple:!0,disabled:Z}),l.jsx("button",{id:"emoji-picker-button",type:"button",onClick:()=>L(Be=>!Be),className:`p-2.5 rounded-full transition-colors ${C?"bg-yellow-100 text-yellow-700":"text-slate-500 hover:text-yellow-600 hover:bg-yellow-50"}`,title:p.EMOJI_PICKER_TOOLTIP,"aria-label":p.EMOJI_PICKER_TOOLTIP,"aria-expanded":C,disabled:Z,children:l.jsx(f2,{className:"w-5 h-5"})}),l.jsx("button",{type:"button",onClick:Fe,className:`p-2.5 rounded-full transition-colors ${Z?"bg-red-100 text-red-600 animate-pulse":"text-slate-500 hover:text-red-600 hover:bg-red-50"}`,title:Z?p.STOP_RECORDING_TOOLTIP:p.RECORD_VOICE_TOOLTIP,"aria-label":Z?p.STOP_RECORDING_TOOLTIP:p.RECORD_VOICE_TOOLTIP,children:Z?l.jsx(L3,{className:"w-5 h-5"}):l.jsx(t5,{className:"w-5 h-5"})}),l.jsx("textarea",{ref:M,value:f,onChange:Be=>h(Be.target.value),onKeyDown:Be=>{Be.key==="Enter"&&!Be.shiftKey&&(Be.preventDefault(),Pt())},placeholder:p.TYPE_YOUR_MESSAGE,className:"flex-grow p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none text-sm min-h-[44px] max-h-28 custom-scrollbar-chat",rows:1,"aria-label":p.TYPE_YOUR_MESSAGE,disabled:Z}),l.jsx("button",{type:"button",onClick:Pt,className:"p-2.5 bg-teal-600 hover:bg-teal-700 text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 disabled:opacity-50",title:p.SEND_MESSAGE_BTN,"aria-label":p.SEND_MESSAGE_BTN,disabled:!f.trim()&&_.length===0&&!F||Z,children:l.jsx(e5,{className:"w-5 h-5"})})]})]})})]}),l.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .custom-scrollbar-chat::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar-chat::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar { height: 6px; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar-track { background: #f1f5f9; border-radius:3px; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar-thumb { background: #94a3b8; border-radius:3px; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar-thumb:hover { background: #64748b; }
      `})]}),he&&ae&&l.jsx(n5,{isOpen:he,onClose:()=>{ue(!1),V(null)},imageUrl:ae.url,imageName:ae.name})]})},O3=({isOpen:n,onClose:e,currentUser:t,persons:s,messages:r,onOpenChat:i,onOpenImageViewer:c,onDeleteChatHistory:d})=>{if(!n)return null;const f=D.useMemo(()=>{if(!t.id)return[];const v=new Map;return r.filter(C=>C.userId===t.id&&!C.isDeleted).forEach(C=>{let L;if(C.actualSenderId===t.id)L=C.actualReceiverId;else if(C.actualReceiverId===t.id)L=C.actualSenderId;else return;if(!L)return;const R=s.find(I=>I.systemUserId===L&&!I.isDeleted);if(R){const I=v.get(R.id);(!I||new Date(C.timestamp)>new Date(I.lastMessage.timestamp))&&v.set(R.id,{person:R,lastMessage:C,unreadCount:0})}}),v.forEach(C=>{const L=C.person.systemUserId;if(!L||!t.id)return;const R=[t.id,L].sort().join("_");C.unreadCount=r.filter(I=>I.userId===t.id&&I.threadId===R&&I.actualReceiverId===t.id&&I.actualSenderId===L&&!I.isRead&&!I.isDeleted).length}),Array.from(v.values()).sort((C,L)=>new Date(L.lastMessage.timestamp).getTime()-new Date(C.lastMessage.timestamp).getTime())},[r,s,t]),h=v=>{const T=new Date(v),C=new Date,L=new Date(C);return L.setDate(C.getDate()-1),T.toDateString()===C.toDateString()?T.toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0}):T.toDateString()===L.toDateString()?"":T.toLocaleDateString("bn-BD",{day:"numeric",month:"short"})},_=v=>{if(!v)return"";const T=v.split(" ");return T.length>1&&T[0]&&T[T.length-1]?`${T[0][0]}${T[T.length-1][0]}`.toUpperCase():v.substring(0,2).toUpperCase()},b=v=>{const C=v.actualSenderId===t.id?`${p.MESSAGE_FROM_YOU}: `:"";return l.jsxs("div",{className:"text-xs flex items-baseline",children:[C&&l.jsx("span",{className:"mr-1 flex-shrink-0",children:C}),l.jsxs("div",{className:"truncate flex-grow min-w-0 flex items-baseline",children:[" ",v.audioContent&&l.jsx("span",{className:"italic text-slate-500 mr-1 flex-shrink-0",children:p.AUDIO_MESSAGE_LABEL}),v.imageContent&&l.jsx("span",{className:"italic text-slate-500 mr-1 flex-shrink-0",children:"[]"}),v.content?l.jsx("span",{className:"truncate",children:v.content}):!v.audioContent&&!v.imageContent?l.jsx("span",{className:"italic text-slate-400",children:"[ ]"}):null]})]})};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-2 sm:p-4 z-[100]",role:"dialog","aria-modal":"true","aria-labelledby":"inbox-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-2xl w-full max-w-md md:max-w-lg h-[85vh] sm:h-[90vh] flex flex-col",onClick:v=>v.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 bg-white rounded-t-xl sticky top-0",children:[l.jsx("h2",{id:"inbox-modal-title",className:"text-lg font-semibold text-slate-700",children:p.INBOX_MODAL_TITLE}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:l.jsx(Wc,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-chat",children:f.length===0?l.jsx("p",{className:"text-center text-slate-500 py-10",children:p.NO_INCOMING_MESSAGES}):l.jsx("ul",{className:"divide-y divide-slate-100",children:f.map(v=>l.jsxs("li",{className:"p-3 hover:bg-teal-50 cursor-pointer flex items-start space-x-3 transition-colors duration-150 group","aria-label":`${p.VIEW_CHAT_HISTORY_WITH_PERSON.replace("{personName}",v.person.customAlias||v.person.name)}${v.unreadCount>0?`. ${v.unreadCount}   `:""}`,children:[l.jsx("div",{className:"flex-shrink-0 pt-1",onClick:()=>{if(!v.person.systemUserId){alert(p.CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",v.person.customAlias||v.person.name));return}i(v.person),e()},children:v.person.profileImage?l.jsx("img",{src:v.person.profileImage,alt:v.person.customAlias||v.person.name,className:"h-10 w-10 rounded-full object-cover"}):l.jsx("span",{className:"h-10 w-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 font-medium text-sm",children:_(v.person.customAlias||v.person.name)})}),l.jsxs("div",{className:"flex-grow min-w-0",onClick:()=>{if(!v.person.systemUserId){alert(p.CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",v.person.customAlias||v.person.name));return}i(v.person),e()},children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h3",{className:`text-sm font-semibold truncate ${v.unreadCount>0?"text-teal-600":"text-slate-700"}`,children:[v.person.customAlias||v.person.name,v.person.systemUserId?"":l.jsx("span",{className:"text-xs text-orange-500 ml-1",children:"()"})]}),l.jsx("span",{className:`text-xs ${v.unreadCount>0?"text-teal-500 font-medium":"text-slate-400"}`,children:h(v.lastMessage.timestamp)})]}),l.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[l.jsx("div",{className:`min-w-0 ${v.unreadCount>0?"text-slate-600 font-medium":"text-slate-500"}`,children:b(v.lastMessage)}),v.unreadCount>0&&l.jsx("span",{className:"ml-2 bg-red-500 text-white text-[10px] font-bold rounded-full h-4 w-4 min-w-[16px] flex items-center justify-center p-0.5",children:v.unreadCount>9?"9+":v.unreadCount})]}),v.lastMessage.imageContent&&!v.lastMessage.audioContent&&l.jsx("button",{onClick:T=>{T.stopPropagation(),c(v.lastMessage.imageContent)},className:"mt-1 p-0 focus:outline-none focus:ring-1 focus:ring-sky-400 rounded","aria-label":"   ",children:l.jsx("img",{src:v.lastMessage.imageContent.base64Data,alt:" ",className:"max-h-16 max-w-[64px] rounded border border-slate-300 object-cover"})})]}),l.jsx("div",{className:"flex-shrink-0 self-center",children:l.jsx("button",{onClick:T=>{T.stopPropagation(),d(v.person)},className:"p-2 text-slate-400 hover:text-red-600 rounded-full opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-150 hover:bg-red-50",title:p.DELETE_CHAT_HISTORY_TOOLTIP,"aria-label":p.DELETE_CHAT_HISTORY_TOOLTIP,children:l.jsx(xr,{className:"w-4 h-4"})})})]},v.person.id))})})]}),l.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
         .custom-scrollbar-chat::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar-chat::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})},P3=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3zM2.25 2.25l19.5 19.5"})}),M3=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M12 18.75H4.5A2.25 2.25 0 012.25 16.5V7.5A2.25 2.25 0 014.5 5.25H12m3 13.5V12M12 12V5.25M12 12h3.75m0 0A2.25 2.25 0 0118 14.25v2.25M12 12h3.75m-3.75 0A2.25 2.25 0 009.75 14.25v2.25m0 0A2.25 2.25 0 017.5 18.75M12 5.25A2.25 2.25 0 009.75 7.5M12 5.25A2.25 2.25 0 0114.25 7.5"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3l18 18"})]}),k3=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3l18 18"})]}),j3=({isOpen:n,onClose:e,targetPerson:t,currentUser:s})=>{const[r,i]=D.useState(null),[c,d]=D.useState(!1),[f,h]=D.useState(!1),[_,b]=D.useState(null),[v,T]=D.useState(!0),C=D.useRef(null),L=D.useRef(null);D.useEffect(()=>{if(!n){r&&(r.getTracks().forEach(U=>U.stop()),i(null)),b(null),T(!0),d(!1),h(!1);return}return(async()=>{T(!0),b(null);try{const U=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});i(U),C.current&&(C.current.srcObject=U),T(!1)}catch(U){U.name==="NotFoundError"||U.name==="DevicesNotFoundError"?b(p.VIDEO_CALL_DEVICE_ERROR):U.name==="NotAllowedError"||U.name==="PermissionDeniedError"?b(p.VIDEO_CALL_PERMISSION_ERROR):b(`${p.VIDEO_CALL_DEVICE_ERROR} (${U.message})`),T(!1)}})(),()=>{r&&r.getTracks().forEach(U=>U.stop())}},[n]),D.useEffect(()=>{r&&C.current&&(C.current.srcObject=r)},[r]);const R=()=>{r&&(r.getAudioTracks().forEach(O=>{O.enabled=!O.enabled}),d(!c))},I=()=>{r&&(r.getVideoTracks().forEach(O=>{O.enabled=!O.enabled}),h(!f))},j=()=>{e()};return p.VIDEO_CALL_WITH_PERSON_TITLE.replace("{personName}",t.customAlias||t.name),l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-2 z-[105]",role:"dialog","aria-modal":"true","aria-labelledby":"video-call-modal-title",onClick:e,children:[l.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl h-[90vh] flex flex-col relative overflow-hidden",onClick:O=>O.stopPropagation(),children:[l.jsxs("div",{className:"flex-grow bg-black flex items-center justify-center relative rounded-t-xl",children:[l.jsx("video",{ref:L,playsInline:!0,autoPlay:!0,className:"w-full h-full object-cover hidden","aria-label":p.REMOTE_VIDEO_ARIA}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 p-4",children:[v&&!_&&l.jsx("p",{className:"text-lg animate-pulse",children:p.CONNECTING_VIDEO_CALL}),!v&&!_&&!r&&l.jsx("p",{className:"text-lg",children:p.VIDEO_CALL_DEVICE_ERROR}),!v&&!_&&r&&l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xl font-semibold text-slate-300",children:t.customAlias||t.name}),l.jsx("p",{className:"text-sm text-slate-500",children:p.WAITING_FOR_PERSON_VIDEO.replace("{personName}",t.customAlias||t.name)})]})]}),_&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6 bg-slate-900 bg-opacity-80",children:l.jsx("p",{className:"text-center text-red-400 text-md",children:_})})]}),r&&!f&&l.jsx("div",{className:"absolute bottom-20 right-4 sm:bottom-24 sm:right-6 w-32 h-44 sm:w-40 sm:h-56 bg-black rounded-lg shadow-lg overflow-hidden border-2 border-slate-600",children:l.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]","aria-label":p.LOCAL_VIDEO_PREVIEW_ARIA})}),r&&f&&l.jsx("div",{className:"absolute bottom-20 right-4 sm:bottom-24 sm:right-6 w-32 h-44 sm:w-40 sm:h-56 bg-slate-700 rounded-lg shadow-lg border-2 border-slate-600 flex items-center justify-center text-slate-400 text-xs p-2",children:" "}),l.jsxs("div",{className:"bg-slate-900 p-3 sm:p-4 flex justify-center items-center space-x-3 sm:space-x-4 rounded-b-xl",children:[l.jsx("button",{onClick:R,className:`p-2 sm:p-3 rounded-full transition-colors ${c?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,title:c?p.UNMUTE_MIC_BTN:p.MUTE_MIC_BTN,disabled:!r||!!_,children:c?l.jsx(P3,{className:"w-5 h-5 sm:w-6 sm:h-6"}):l.jsx(t5,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),l.jsx("button",{onClick:I,className:`p-2 sm:p-3 rounded-full transition-colors ${f?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,title:f?p.START_VIDEO_BTN:p.STOP_VIDEO_BTN,disabled:!r||!!_,children:f?l.jsx(M3,{className:"w-5 h-5 sm:w-6 sm:h-6"}):l.jsx(J_,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),l.jsx("button",{onClick:j,className:"p-2 sm:p-3 bg-red-600 hover:bg-red-700 text-white rounded-full transition-colors",title:p.END_CALL_BTN,children:l.jsx(k3,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]}),l.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},Di=({className:n,isFilled:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:1.5,className:`w-4 h-4 ${n}`,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.374H8.958a1.313 1.313 0 01-1.242-1.528l.763-4.578a3.06 3.06 0 00-.716-2.539l-.008-.008a3.06 3.06 0 00-2.54-1.066H3.75V9.75a2.25 2.25 0 012.25-2.25h12a2.25 2.25 0 012.25 2.25v1.906a3.06 3.06 0 00-2.54 1.066l-.008.008a3.06 3.06 0 00-.716 2.539l.763 4.578a1.313 1.313 0 01-1.242 1.528zM12 3.375v6"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.374H8.958a1.313 1.313 0 01-1.242-1.528l.763-4.578a3.06 3.06 0 00-.716-2.539l-.008-.008a3.06 3.06 0 00-2.54-1.066H3.75V9.75a2.25 2.25 0 012.25-2.25h12a2.25 2.25 0 012.25 2.25v1.906a3.06 3.06 0 00-2.54 1.066l-.008.008a3.06 3.06 0 00-.716 2.539l.763 4.578a1.313 1.313 0 01-1.242 1.528zM12 3.375v6"})}),s5=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})}),a5=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"})}),xc=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Yh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),qh=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),Yc={productName:"",description:"",quantity:1,unitPrice:0,total:0,selectedPriceType:"custom",unit:""},h2={productName:!0,description:!0,quantity:!0,unitPrice:!0,totalPrice:!0,unit:!0},D0=[{key:"productName",label:p.PRODUCT_SERVICE_NAME_LABEL,defaultGridSpan:"minmax(0, 2.5fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"},{key:"description",label:p.ITEM_DESCRIPTION_LABEL,defaultGridSpan:"minmax(0, 1.5fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"},{key:"quantity",label:p.QUANTITY_INVOICE_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unitPrice",label:p.UNIT_PRICE_LABEL,defaultGridSpan:"minmax(0, 1.2fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"totalPrice",label:p.ITEM_TOTAL_LABEL,defaultGridSpan:"minmax(0, 1fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unit",label:p.PRODUCT_UNIT_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"}],B3=({isOpen:n,onClose:e,onSaveInvoice:t,persons:s,products:r,companyProfiles:i,onOpenSelectPersonModal:c,onPersonAdded:d,isGlobalPhoneticModeActive:f,onOpenManageProductsModal:h,editingInvoiceData:_,aiPreRenderData:b,onAIInvoiceDataProcessed:v,onOpenConfirmationModal:T})=>{const{addNotification:C}=ur(),{currentUser:L,updateCurrentUserData:R}=Nc(),I=!!_,j=D.useRef(!1),[O,U]=D.useState(!1),[se,Z]=D.useState(""),[ee,J]=D.useState(new Date().toISOString().split("T")[0]),[oe,xe]=D.useState(""),[F,H]=D.useState(null),[re,K]=D.useState(""),[Te,G]=D.useState([]),[he,ue]=D.useState(!1),[ae,V]=D.useState(null),[ce,M]=D.useState(void 0),[k,Y]=D.useState([{...Yc,id:Date.now().toString(),quantity:1,unitPrice:0}]),[Q,fe]=D.useState(()=>localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp"),[ve,de]=D.useState(null),[Ne,Ue]=D.useState(0),[we,Je]=D.useState(null),[Ze,Qe]=D.useState(0),[je,ge]=D.useState(""),[Fe,ut]=D.useState(Ht.PENDING),[Pe,nt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_INVOICE_PAYMENT_STATUS)==="true"),[it,st]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_INVOICE_DATE)==="true"),[Nt,Pt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_DUE_DATE)==="true"),[Rt,Ft]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_COMPANY_PROFILE)==="true"),[Yt,Be]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_DISCOUNT_TYPE)==="true"),[We,Lt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_TAX_TYPE)==="true"),[pe,yt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_PAYMENT_METHOD)==="true"),[At,Kt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_PAYMENT_NOTES)==="true"),[Gt,xn]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_INVOICE_NOTES)==="true"),[rs,Cn]=D.useState(""),[Ws,Un]=D.useState("Cash"),[js,ln]=D.useState(""),[ls,un]=D.useState(0),[Mn,qa]=D.useState(0),[gs,ca]=D.useState(0),[vn,Xt]=D.useState(0),Ln=D.useRef(null),kn=D.useRef(null),Fn=D.useRef(null),Rn=D.useRef(null),_s=D.useRef(null),hs=D.useRef(null),er=D.useRef(null),Ca=D.useRef(null),En=D.useRef([]),bs=D.useRef([]),Qt=D.useRef([]),Ls=D.useRef([]),Ts=D.useRef([]),$n=D.useRef([]),La=D.useRef([]),[ua,Bs]=D.useState(()=>k.map(()=>[])),[ms,wa]=D.useState(()=>k.map(()=>!1)),[Is,ka]=D.useState(null),Wn=D.useRef({}),[Ns,da]=D.useState(()=>{const le=localStorage.getItem(Tt.INVOICE_COLUMN_VISIBILITY_SALES_V1);try{return le?JSON.parse(le):h2}catch(_e){return console.error("Failed to parse sales column visibility from localStorage",_e),h2}}),[ws,tr]=D.useState(()=>localStorage.getItem(Tt.INVOICE_ITEM_FONT_SIZE_SALES_V1)||"sm");D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_COLUMN_VISIBILITY_SALES_V1,JSON.stringify(Ns))},[Ns]),D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_ITEM_FONT_SIZE_SALES_V1,ws)},[ws]);const Ta=le=>{da(_e=>({..._e,[le]:!_e[le]}))},sa=le=>{tr(le)},Gr=le=>{const _e=["xs","sm","base","lg","xl","2xl"],tt=_e.indexOf(ws);le==="increase"?tt<_e.length-1&&tr(_e[tt+1]):tt>0&&tr(_e[tt-1])},mn=le=>({xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"})[ws]||"text-sm",[Hr,Ds]=D.useState(!1),ea=D.useRef(null),Yr=D.useRef(null),wr=D.useMemo(()=>{const le=D0.filter(_e=>Ns[_e.key]).map(_e=>_e.defaultGridSpan);return le.push("auto"),{gridTemplateColumns:le.join(" ")}},[Ns]);D.useEffect(()=>{const le=_e=>{Yr.current&&!Yr.current.contains(_e.target)&&ea.current&&!ea.current.contains(_e.target)&&Ds(!1)};return Hr&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[Hr]);const dr=()=>U(le=>!le),vs=D.useCallback((le,_e,tt,Xe,rt,_t,mt)=>async()=>{le(Bt=>{const kt=!Bt;if(localStorage.setItem(_e,String(kt)),L){const Ct={};kt?(Ct[tt]=Xe,rt&&_t!=null&&(Ct[rt]=_t),mt&&C(`${mt} ${p.DEFAULT_VALUE_PINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"success",2e3)):(Ct[tt]=null,rt&&(Ct[rt]=null),mt&&C(`${mt} ${p.DEFAULT_VALUE_UNPINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"info",2e3)),Object.keys(Ct).length>0&&R(Ct)}return kt})},[L,R,C]),Ia=D.useCallback(()=>vs(nt,Tt.PIN_SALES_INVOICE_PAYMENT_STATUS,"defaultSalesPaymentStatus",Fe,void 0,void 0,p.PAYMENT_STATUS_LABEL)(),[vs,Fe]),li=D.useCallback(()=>{const le=new Date;le.setHours(0,0,0,0);const _e=new Date(ee);_e.setHours(0,0,0,0);const tt=Math.round((_e.getTime()-le.getTime())/(1e3*60*60*24));vs(st,Tt.PIN_SALES_INVOICE_DATE,"defaultSalesInvoiceDateOffset",tt,void 0,void 0,p.INVOICE_DATE_LABEL)()},[vs,ee]),cs=D.useCallback(()=>{if(ee&&oe){const le=new Date(ee);le.setHours(0,0,0,0);const _e=new Date(oe);_e.setHours(0,0,0,0);const tt=Math.round((_e.getTime()-le.getTime())/(1e3*60*60*24));vs(Pt,Tt.PIN_SALES_DUE_DATE,"defaultSalesDueDateOffset",tt,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()}else vs(Pt,Tt.PIN_SALES_DUE_DATE,"defaultSalesDueDateOffset",30,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()},[vs,ee,oe]),qr=D.useCallback(()=>vs(Ft,Tt.PIN_SALES_COMPANY_PROFILE,"defaultSalesCompanyProfileId",ce,void 0,void 0," ")(),[vs,ce]),_i=D.useCallback(()=>vs(Be,Tt.PIN_SALES_DISCOUNT_TYPE,"defaultSalesDiscountType",ve,"defaultSalesDiscountValue",Ne,p.DISCOUNT_TYPE_LABEL)(),[vs,ve,Ne]),bi=D.useCallback(()=>vs(Lt,Tt.PIN_SALES_TAX_TYPE,"defaultSalesTaxType",we,"defaultSalesTaxValue",Ze,p.TAX_TYPE_LABEL)(),[vs,we,Ze]),Er=D.useCallback(()=>vs(yt,Tt.PIN_SALES_PAYMENT_METHOD,"defaultSalesPaymentMethod",Ws,void 0,void 0,p.PAYMENT_METHOD_LABEL)(),[vs,Ws]),ci=D.useCallback(()=>vs(Kt,Tt.PIN_SALES_PAYMENT_NOTES,"defaultSalesPaymentNotes",js.trim()||null,void 0,void 0,p.PAYMENT_NOTES_LABEL)(),[vs,js]),Ti=D.useCallback(()=>vs(xn,Tt.PIN_SALES_INVOICE_NOTES,"defaultSalesInvoiceNotes",je.trim()||null,void 0,void 0,p.NOTES_TERMS_LABEL)(),[vs,je]);D.useEffect(()=>{Fe===Ht.PAID?(Cn(vn.toString()),I||((!pe||!(L!=null&&L.defaultSalesPaymentMethod))&&Un("Cash"),(!At||!(L!=null&&L.defaultSalesPaymentNotes))&&ln(p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE))):Fe!==Ht.PARTIALLY_PAID&&((!pe||!(L!=null&&L.defaultSalesPaymentMethod))&&Un("Cash"),(!At||!(L!=null&&L.defaultSalesPaymentNotes))&&ln(""),Cn(""))},[Fe,vn,I,pe,At,L]),D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_GLOBAL_PRICE_TYPE,Q)},[Q]);const za=le=>{const _e=le.getFullYear(),tt=(le.getMonth()+1).toString().padStart(2,"0"),Xe=le.getDate().toString().padStart(2,"0");return`${_e}-${tt}-${Xe}`},ui=D.useCallback(()=>{const le=i.find(Ct=>Ct.isDefault)||(i.length>0?i[0]:null),_e=(le==null?void 0:le.companyName.substring(0,3).toUpperCase().replace(/\s/g,""))||"CMP",tt="INV",Xe="CUST",rt=new Date,_t=rt.getFullYear().toString().slice(-2),mt=(rt.getMonth()+1).toString().padStart(2,"0"),Bt=rt.getDate().toString().padStart(2,"0"),kt=Math.random().toString(36).substring(2,6).toUpperCase();return`${tt}-${_e}-${Xe}${_t}${mt}${Bt}-${kt}`},[i]),Ir=D.useCallback(()=>{var Bn,Kn;const le=localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp";fe(le);const _e=localStorage.getItem(Tt.PIN_SALES_INVOICE_PAYMENT_STATUS)==="true",tt=localStorage.getItem(Tt.PIN_SALES_INVOICE_DATE)==="true",Xe=localStorage.getItem(Tt.PIN_SALES_DUE_DATE)==="true",rt=localStorage.getItem(Tt.PIN_SALES_COMPANY_PROFILE)==="true",_t=localStorage.getItem(Tt.PIN_SALES_DISCOUNT_TYPE)==="true",mt=localStorage.getItem(Tt.PIN_SALES_TAX_TYPE)==="true",Bt=localStorage.getItem(Tt.PIN_SALES_PAYMENT_METHOD)==="true",kt=localStorage.getItem(Tt.PIN_SALES_PAYMENT_NOTES)==="true",Ct=localStorage.getItem(Tt.PIN_SALES_INVOICE_NOTES)==="true";if(nt(_e),st(tt),Pt(Xe),Ft(rt),Be(_t),Lt(mt),yt(Bt),Kt(kt),xn(Ct),I&&_){Z(_.invoiceNumber);const Xn=new Date(_.invoiceDate);if(J(za(new Date(Xn.getUTCFullYear(),Xn.getUTCMonth(),Xn.getUTCDate()))),_.dueDate){const bn=new Date(_.dueDate);xe(za(new Date(bn.getUTCFullYear(),bn.getUTCMonth(),bn.getUTCDate())))}else xe("");const zn=s.find(bn=>bn.id===_.personId);H((zn==null?void 0:zn.id)||null),K(zn?zn.customAlias||zn.name:""),M(_.companyProfileId),de(_.discountType||null),Ue(_.discountValue||0),Je(_.taxType||null),Qe(_.taxValue||0),ge(_.notes||""),ut(_.paymentStatus);const ha=_.items.map(bn=>{const Gs=r.find(dn=>dn.name===bn.productName||dn.id&&bn.originalProductId===dn.id);let aa="custom";return Gs&&(bn.unitPrice===Gs.mrp?aa="mrp":bn.unitPrice===Gs.wholesalePrice?aa="wholesale":bn.unitPrice===Gs.unitPrice&&(aa="sales")),{...bn,unit:bn.unit||"",quantity:bn.quantity||1,unitPrice:bn.unitPrice||0,selectedPriceType:aa,originalProductId:Gs==null?void 0:Gs.id,availablePrices:Gs?{sales:Gs.unitPrice,mrp:Gs.mrp,wholesale:Gs.wholesalePrice}:void 0}});if(Y(ha.length>0?ha:[{...Yc,id:Date.now().toString(),quantity:1,unitPrice:0,selectedPriceType:le}]),_.paymentStatus===Ht.PAID){Cn(_.totalAmount.toString());const bn=(Bn=_.paymentsReceived)==null?void 0:Bn[0];bn&&bn.amount===_.totalAmount&&bn.notes===p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE?(Un(bn.paymentMethod||"Cash"),ln(bn.notes||p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE)):bn?(Un(bn.paymentMethod||"Cash"),ln(bn.notes||"")):(Un("Cash"),ln(p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE))}else if(_.paymentStatus===Ht.PARTIALLY_PAID&&_.paymentsReceived&&_.paymentsReceived.length>0){const bn=_.paymentsReceived[0];Cn(bn.amount.toString()),Un(bn.paymentMethod||"Cash"),ln(bn.notes||"")}else Cn(""),Un("Cash"),ln("")}else{Z(ui());let Xn=new Date;tt&&(L==null?void 0:L.defaultSalesInvoiceDateOffset)!==null&&(L==null?void 0:L.defaultSalesInvoiceDateOffset)!==void 0&&Xn.setDate(Xn.getDate()+L.defaultSalesInvoiceDateOffset);const zn=za(Xn);J(zn);const[ha,bn,Gs]=zn.split("-").map(Number);let aa=new Date(ha,bn-1,Gs);Xe&&(L==null?void 0:L.defaultSalesDueDateOffset)!==null&&(L==null?void 0:L.defaultSalesDueDateOffset)!==void 0?aa.setDate(aa.getDate()+L.defaultSalesDueDateOffset):aa.setDate(aa.getDate()+30),xe(za(aa)),H(null),K(""),rt&&(L!=null&&L.defaultSalesCompanyProfileId)&&i.find(ys=>ys.id===L.defaultSalesCompanyProfileId)?M(L.defaultSalesCompanyProfileId):M(((Kn=i.find(ys=>ys.isDefault))==null?void 0:Kn.id)||(i.length>0?i[0].id:void 0));const dn={...Yc,id:Date.now().toString(),quantity:1,unitPrice:0};dn.selectedPriceType=le,Y([dn]),_t&&(L!=null&&L.defaultSalesDiscountType)?(de(L.defaultSalesDiscountType),Ue(L.defaultSalesDiscountValue??0)):(de(null),Ue(0)),mt&&(L!=null&&L.defaultSalesTaxType)?(Je(L.defaultSalesTaxType),Qe(L.defaultSalesTaxValue??0)):(Je(null),Qe(0)),Ct&&(L!=null&&L.defaultSalesInvoiceNotes)?ge(L.defaultSalesInvoiceNotes):ge(""),_e&&(L!=null&&L.defaultSalesPaymentStatus)?ut(L.defaultSalesPaymentStatus):ut(Ht.PENDING),Cn(""),Bt&&(L!=null&&L.defaultSalesPaymentMethod)?Un(L.defaultSalesPaymentMethod):Un("Cash"),kt&&(L!=null&&L.defaultSalesPaymentNotes)?ln(L.defaultSalesPaymentNotes):ln("")}const $t=I&&_?_.items:[{...Yc,id:Date.now().toString(),selectedPriceType:le}];Bs($t.map(()=>[])),wa($t.map(()=>!1)),ka(null),V(null),Wn.current={}},[I,_,L,s,r,i,ui]);D.useEffect(()=>{if(n)if(b&&!I&&!j.current){if(Ir(),b.customerName){Wn.current.customerSearch=!0,K(b.customerName);const _e=s.find(tt=>(tt.customAlias||tt.name).toLowerCase()===b.customerName.toLowerCase());_e&&H(_e.id)}if(b.items&&b.items.length>0){const _e=localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp",tt=b.items.map((Xe,rt)=>{const _t=r.find(kt=>kt.name.toLowerCase()===Xe.productName.toLowerCase());let mt=Xe.unitPrice||0,Bt="custom";return _t&&(_e==="mrp"&&_t.mrp!==void 0?(mt=_t.mrp,Bt="mrp"):_e==="wholesale"&&_t.wholesalePrice!==void 0?(mt=_t.wholesalePrice,Bt="wholesale"):_e==="sales"&&_t.unitPrice!==void 0?(mt=_t.unitPrice,Bt="sales"):_t.mrp!==void 0?(mt=_t.mrp,Bt="mrp"):_t.unitPrice!==void 0&&(mt=_t.unitPrice,Bt="sales")),{id:`ai_item_${Date.now()}_${rt}`,productName:Xe.productName,description:"",quantity:Xe.quantity||1,unitPrice:mt,total:(Xe.quantity||1)*mt,unit:Xe.unit||(_t==null?void 0:_t.unit)||"",selectedPriceType:Bt,originalProductId:_t==null?void 0:_t.id,availablePrices:_t?{sales:_t.unitPrice,mrp:_t.mrp,wholesale:_t.wholesalePrice}:void 0}});Y(tt.length>0?tt:[{...Yc,id:Date.now().toString()}])}else Y([{...Yc,id:Date.now().toString()}]);b.notes&&(Wn.current.notes=!0,ge(b.notes)),j.current=!0,v()}else j.current||(Ir(),j.current=!0);else j.current=!1},[n,b,I,_,v,Ir,s,r]),D.useEffect(()=>{if(!I&&Nt&&(L==null?void 0:L.defaultSalesDueDateOffset)!==null&&(L==null?void 0:L.defaultSalesDueDateOffset)!==void 0&&ee){const[le,_e,tt]=ee.split("-").map(Number);let Xe=new Date(le,_e-1,tt);Xe.setDate(Xe.getDate()+L.defaultSalesDueDateOffset),xe(za(Xe))}},[ee,Nt,L==null?void 0:L.defaultSalesDueDateOffset,I]),D.useEffect(()=>{const le=k.reduce((rt,_t)=>rt+(Number(_t.total)||0),0);un(le);let _e=0;ve==="percentage"&&Ne>0?_e=le*Ne/100:ve==="fixed"&&Ne>0&&(_e=Ne),_e=Math.max(0,Math.min(_e,le)),qa(_e);const tt=le-_e;let Xe=0;we==="percentage"&&Ze>0?Xe=tt*Ze/100:we==="fixed"&&Ze>0&&(Xe=Ze),ca(Xe),Xt(tt+Xe)},[k,ve,Ne,we,Ze]);const Da=(le,_e,tt,Xe)=>{const rt=`${_e}-${le}`;Xe&&(Wn.current[rt]=!0);const _t=[...k],mt=_t[le];if(_e==="productName"||_e==="description"||_e==="unit")mt[_e]=tt;else if(_e==="quantity"||_e==="unitPrice"||_e==="total"){const Bt=parseFloat(tt);mt[_e]=isNaN(Bt)||Bt<0?0:Bt,_e==="unitPrice"&&mt.selectedPriceType!=="custom"&&(mt.selectedPriceType="custom"),_e==="total"&&mt.selectedPriceType!=="custom"&&(mt.selectedPriceType="custom")}(Q!=="custom"||mt.selectedPriceType!=="custom")&&(_e==="quantity"||_e==="unitPrice")&&(mt.total=(Number(mt.quantity)||0)*(Number(mt.unitPrice)||0)),Y(_t)},Ni=(le,_e)=>{const tt=[...k],Xe=tt[le];if(Xe.selectedPriceType=_e,_e!=="custom"){if(Xe.availablePrices){let rt;_e==="sales"?rt=Xe.availablePrices.sales:_e==="mrp"?rt=Xe.availablePrices.mrp:_e==="wholesale"&&(rt=Xe.availablePrices.wholesale),Xe.unitPrice=rt!==void 0?rt:Xe.unitPrice||0}}(Q!=="custom"||_e!=="custom")&&(Xe.total=Xe.quantity*Xe.unitPrice),Y(tt)},be=(le,_e)=>{const tt=`productName-${le}`;if(Wn.current[tt]?(Da(le,"productName",_e),Wn.current[tt]=!1):Da(le,"productName",_e),_e.trim()){const Xe=r.filter(rt=>!rt.isDeleted&&rt.name.toLowerCase().includes(_e.toLowerCase())).slice(0,5);Bs(rt=>{const _t=[...rt];return _t[le]=Xe,_t}),wa(rt=>{const _t=[...rt];return _t[le]=!0,_t}),ka({itemIndex:le,suggestionIndex:-1})}else{const Xe=[...k],rt=Xe[le];rt.description="",rt.unitPrice=0,rt.total=0,rt.unit="",rt.selectedPriceType=Q==="custom"?"custom":localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp",rt.originalProductId=void 0,rt.availablePrices=void 0,Y(Xe),Bs(_t=>{const mt=[..._t];return mt[le]=[],mt}),wa(_t=>{const mt=[..._t];return mt[le]=!1,mt}),ka(null)}},Re=(le,_e)=>{var Xn,zn;const tt=[...k],Xe=tt[le],rt=`productName-${le}`,_t=`description-${le}`,mt=`unit-${le}`;Wn.current[rt]=!0;const Bt=_e.description||"";Bt&&(Wn.current[_t]=!0),Xe.description=Bt,Xe.productName=_e.name,_e.unit&&(Wn.current[mt]=!0),Xe.unit=_e.unit||"",Xe.originalProductId=_e.id,Xe.availablePrices={sales:_e.unitPrice,mrp:_e.mrp,wholesale:_e.wholesalePrice};let kt=0,Ct="custom";const $t=_e.mrp!==void 0&&_e.mrp!==null,Bn=_e.wholesalePrice!==void 0&&_e.wholesalePrice!==null,Kn=_e.unitPrice!==void 0&&_e.unitPrice!==null;Q==="mrp"&&$t?(kt=_e.mrp,Ct="mrp"):Q==="wholesale"&&Bn?(kt=_e.wholesalePrice,Ct="wholesale"):Q==="sales"&&Kn?(kt=_e.unitPrice,Ct="sales"):Q==="custom"?($t?kt=_e.mrp:Bn?kt=_e.wholesalePrice:Kn&&(kt=_e.unitPrice),Ct="custom"):$t?(kt=_e.mrp,Ct="mrp"):Bn?(kt=_e.wholesalePrice,Ct="wholesale"):Kn?(kt=_e.unitPrice,Ct="sales"):(kt=0,Ct="custom"),Xe.unitPrice=kt,Xe.selectedPriceType=Ct,Xe.total=Xe.quantity*Xe.unitPrice,Y(tt),Bs(ha=>{const bn=[...ha];return bn[le]=[],bn}),wa(ha=>{const bn=[...ha];return bn[le]=!1,bn}),ka(null),(Xn=bs.current[le])==null||Xn.focus(),(zn=bs.current[le])==null||zn.select()};D.useEffect(()=>{const le=_e=>{La.current.forEach((tt,Xe)=>{var rt;tt&&!tt.contains(_e.target)&&En.current[Xe]&&!((rt=En.current[Xe])!=null&&rt.contains(_e.target))&&wa(_t=>{const mt=[..._t];return mt[Xe]&&(mt[Xe]=!1),mt})})};return ms.some(_e=>_e)&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[ms]);const ze=le=>{var _e,tt;se.trim()&&ee.trim()&&le&&vn>0?(_e=Ca.current)==null||_e.focus():k.length>0&&En.current[0]&&((tt=En.current[0])==null||tt.focus())},dt=le=>{const _e=le.target.value;if(Wn.current.customerSearch?(K(_e),Wn.current.customerSearch=!1):K(_e),H(null),_e.trim()){const tt=_e.toLowerCase(),Xe=s.filter(rt=>!rt.isDeleted&&(rt.customAlias&&rt.customAlias.toLowerCase().includes(tt)||rt.name.toLowerCase().includes(tt)||rt.mobileNumber&&rt.mobileNumber.includes(_e))).slice(0,5);G(Xe),ue(!0),V(-1)}else G([]),ue(!1),V(null)},bt=le=>{var _e,tt,Xe;if(he&&Te.length>0)if(le.key==="ArrowDown")le.preventDefault(),V(rt=>{var mt,Bt;const _t=rt===null||rt>=Te.length-1?0:rt+1;return(Bt=(mt=Fn.current)==null?void 0:mt.children[_t])==null||Bt.scrollIntoView({block:"nearest"}),_t});else if(le.key==="ArrowUp")le.preventDefault(),V(rt=>{var mt,Bt;const _t=rt===null||rt<=0?Te.length-1:rt-1;return(Bt=(mt=Fn.current)==null?void 0:mt.children[_t])==null||Bt.scrollIntoView({block:"nearest"}),_t});else if(le.key==="Enter")if(ae!==null&&ae>=0&&ae<Te.length)le.preventDefault(),wt(Te[ae]);else{le.preventDefault(),ue(!1),V(null);const rt=re.trim();if(rt){const _t=s.find(mt=>!mt.isDeleted&&(mt.customAlias&&mt.customAlias.toLowerCase()===rt.toLowerCase()||mt.name.toLowerCase()===rt.toLowerCase()||mt.mobileNumber&&mt.mobileNumber===rt));_t?(H(_t.id),ze(_t.id)):k.length>0&&En.current[0]&&((_e=En.current[0])==null||_e.focus())}else k.length>0&&En.current[0]&&((tt=En.current[0])==null||tt.focus())}else le.key==="Escape"&&(ue(!1),V(null));else if(le.key==="Enter"){le.preventDefault(),ue(!1),V(null);const rt=re.trim();let _t=!1;if(rt){const mt=s.find(Bt=>!Bt.isDeleted&&(Bt.customAlias&&Bt.customAlias.toLowerCase()===rt.toLowerCase()||Bt.name.toLowerCase()===rt.toLowerCase()||Bt.mobileNumber&&Bt.mobileNumber===rt));mt&&(H(mt.id),ze(mt.id),_t=!0)}_t||k.length>0&&En.current[0]&&((Xe=En.current[0])==null||Xe.focus())}else{if(Wn.current.customerSearch)return;if(f&&le.key===" "){le.preventDefault();const rt=kn.current||le.target,_t=rt.value,mt=rt.selectionStart||0;let Bt=mt-1;for(;Bt>=0&&_t[Bt]!==" ";)Bt--;Bt++;const kt=_t.substring(Bt,mt);if(kt.trim()){const Ct=cr(kt),$t=_t.substring(0,Bt)+Ct+" "+_t.substring(mt);K($t),setTimeout(()=>{const Bn=Bt+Ct.length+1;rt.setSelectionRange(Bn,Bn)},0)}else{const Ct=_t.substring(0,mt)+" "+_t.substring(mt);K(Ct),setTimeout(()=>{rt.setSelectionRange(mt+1,mt+1)},0)}ue(!1),V(null)}}},Dt=le=>{if(Wn.current.customerSearch){Wn.current.customerSearch=!1;return}if(f){le.preventDefault();const _e=le.clipboardData.getData("text"),tt=cr(_e),Xe=kn.current||le.target,rt=Xe.selectionStart||0,_t=Xe.selectionEnd||0,mt=Xe.value,Bt=mt.substring(0,rt)+tt+mt.substring(_t);K(Bt),setTimeout(()=>{const kt=rt+tt.length;Xe.setSelectionRange(kt,kt)},0),ue(!1),V(null)}},wt=le=>{Wn.current.customerSearch=!0,K(le.customAlias||le.name),H(le.id),G([]),ue(!1),V(null),ze(le.id)},xt=le=>{const _e=s.find(tt=>tt.id===le);_e&&(Wn.current.customerSearch=!0,K(_e.customAlias||_e.name),H(_e.id),G([]),ue(!1),V(null),ze(_e.id))};D.useEffect(()=>{const le=_e=>{Fn.current&&!Fn.current.contains(_e.target)&&kn.current&&!kn.current.contains(_e.target)&&(ue(!1),V(null))};return he&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[he]);const Zt=(le,_e,tt)=>Xe=>{var Bt,kt;const rt=`${_e}-${le}`,_t=k[le],mt=!_t.productName.trim()&&_t.total===0;if(ms[le]&&ua[le]&&ua[le].length>0){if(Xe.key==="ArrowDown"){Xe.preventDefault(),ka(Ct=>{var Bn,Kn;const $t=(Ct==null?void 0:Ct.itemIndex)!==le||Ct.suggestionIndex===null||Ct.suggestionIndex>=ua[le].length-1?0:Ct.suggestionIndex+1;return(Kn=(Bn=La.current[le])==null?void 0:Bn.children[$t])==null||Kn.scrollIntoView({block:"nearest"}),{itemIndex:le,suggestionIndex:$t}});return}else if(Xe.key==="ArrowUp"){Xe.preventDefault(),ka(Ct=>{var Bn,Kn;const $t=(Ct==null?void 0:Ct.itemIndex)!==le||Ct.suggestionIndex===null||Ct.suggestionIndex<=0?ua[le].length-1:Ct.suggestionIndex-1;return(Kn=(Bn=La.current[le])==null?void 0:Bn.children[$t])==null||Kn.scrollIntoView({block:"nearest"}),{itemIndex:le,suggestionIndex:$t}});return}else if(Xe.key==="Enter"){if((Is==null?void 0:Is.itemIndex)===le&&Is.suggestionIndex>=0&&Is.suggestionIndex<ua[le].length)Xe.preventDefault(),Re(le,ua[le][Is.suggestionIndex]);else{if(Xe.preventDefault(),mt&&le===k.length-1){fr();return}le===k.length-1?Dr():(Bt=En.current[le+1])==null||Bt.focus()}return}else if(Xe.key==="Escape"){wa(Ct=>{const $t=[...Ct];return $t[le]=!1,$t}),ka(null);return}}if(Xe.key==="Enter"){if(Xe.preventDefault(),mt&&le===k.length-1){fr();return}const $t=["productName","description","quantity","unitPrice","totalPrice","unit"].filter(Xn=>Ns[Xn]||Xn==="productName");let Kn=$t.indexOf(_e)+1;for(;Kn<$t.length&&!Ns[$t[Kn]];)Kn++;if(Kn<$t.length){const Xn=$t[Kn];let zn=null;Xn==="quantity"?zn=bs.current[le]:Xn==="totalPrice"?zn=$n.current[le]:Xn==="unitPrice"?zn=Qt.current[le]:Xn==="unit"?zn=Ls.current[le]:Xn==="description"&&(zn=Ts.current[le]),zn&&(zn.focus(),(zn instanceof HTMLInputElement||zn instanceof HTMLTextAreaElement)&&((kt=zn.select)==null||kt.call(zn)))}else if(le===k.length-1)Dr();else{const Xn=En.current[le+1];Xn&&(Xn.focus(),Xn.select())}return}if(!Wn.current[rt]&&f&&Xe.key===" "){if(_e==="productName"&&ms[le])return;Xe.preventDefault();const Ct=tt.current[le]||Xe.target,$t=Ct.value,Bn=Ct.selectionStart||0;let Kn=Bn-1;for(;Kn>=0&&$t[Kn]!==" ";)Kn--;Kn++;const Xn=$t.substring(Kn,Bn);if(Xn.trim()){const zn=cr(Xn),ha=$t.substring(0,Kn)+zn+" "+$t.substring(Bn);Da(le,_e,ha,!0),setTimeout(()=>{const bn=Kn+zn.length+1;Ct.setSelectionRange(bn,bn)},0)}else{const zn=$t.substring(0,Bn)+" "+$t.substring(Bn);Da(le,_e,zn,!0),setTimeout(()=>{Ct.setSelectionRange(Bn+1,Bn+1)},0)}}},_n=(le,_e)=>tt=>{if(tt.key==="Enter"){tt.preventDefault();const Xe=k[le];if(!Xe.productName.trim()&&Xe.total===0&&le===k.length-1){fr();return}const mt=["quantity","totalPrice","unitPrice","unit","description"].filter(Ct=>Ns[Ct]);let Bt=mt.indexOf(_e);Bt===-1&&_e==="quantity"&&Ns.quantity&&(Bt=0);let kt=Bt+1;if(kt<mt.length){const Ct=mt[kt];let $t=null;Ct==="quantity"?$t=bs.current[le]:Ct==="totalPrice"?$t=$n.current[le]:Ct==="unitPrice"?$t=Qt.current[le]:Ct==="unit"?$t=Ls.current[le]:Ct==="description"&&($t=Ts.current[le]),$t&&($t.focus(),($t instanceof HTMLInputElement||$t instanceof HTMLTextAreaElement)&&$t.type!=="button"&&$t.type!=="submit"&&$t.type!=="reset"&&$t.type!=="hidden"&&$t.select())}else if(le===k.length-1)Dr();else{const Ct=En.current[le+1];Ct&&(Ct.focus(),Ct.select())}}},on=(le,_e,tt)=>Xe=>{const rt=`${_e}-${le}`;if(Wn.current[rt]){Wn.current[rt]=!1;return}if(f){Xe.preventDefault();const _t=Xe.clipboardData.getData("text"),mt=cr(_t),Bt=tt.current[le]||Xe.target,kt=Bt.selectionStart||0,Ct=Bt.selectionEnd||0,$t=Bt.value,Bn=$t.substring(0,kt)+mt+$t.substring(Ct);Da(le,_e,Bn,!0),setTimeout(()=>{const Kn=kt+mt.length;Bt.setSelectionRange(Kn,Kn)},0)}},ts=le=>{if(!Wn.current.notes&&f&&le.key===" "){le.preventDefault();const _e=Ln.current||le.target,tt=_e.value,Xe=_e.selectionStart||0;let rt=Xe-1;for(;rt>=0&&tt[rt]!==" ";)rt--;rt++;const _t=tt.substring(rt,Xe);if(_t.trim()){const mt=cr(_t),Bt=tt.substring(0,rt)+mt+" "+tt.substring(Xe);ge(Bt),setTimeout(()=>{const kt=rt+mt.length+1;_e.setSelectionRange(kt,kt)},0)}else{const mt=tt.substring(0,Xe)+" "+tt.substring(Xe);ge(mt),setTimeout(()=>{_e.setSelectionRange(Xe+1,Xe+1)},0)}}},Yn=le=>{if(Wn.current.notes){Wn.current.notes=!1;return}if(f){le.preventDefault();const _e=le.clipboardData.getData("text"),tt=cr(_e),Xe=Ln.current||le.target,rt=Xe.selectionStart||0,_t=Xe.selectionEnd||0,mt=Xe.value,Bt=mt.substring(0,rt)+tt+mt.substring(_t);ge(Bt),setTimeout(()=>{const kt=rt+tt.length;Xe.setSelectionRange(kt,kt)},0)}},jn=le=>{if(!Wn.current.paymentNotes&&f&&le.key===" "){le.preventDefault();const _e=Rn.current||le.target,tt=_e.value,Xe=_e.selectionStart||0;let rt=Xe-1;for(;rt>=0&&tt[rt]!==" ";)rt--;rt++;const _t=tt.substring(rt,Xe);if(_t.trim()){const mt=cr(_t),Bt=tt.substring(0,rt)+mt+" "+tt.substring(Xe);ln(Bt),setTimeout(()=>{const kt=rt+mt.length+1;_e.setSelectionRange(kt,kt)},0)}else{const mt=tt.substring(0,Xe)+" "+tt.substring(Xe);ln(mt),setTimeout(()=>{_e.setSelectionRange(Xe+1,Xe+1)},0)}}},yn=le=>{if(Wn.current.paymentNotes){Wn.current.paymentNotes=!1;return}if(f){le.preventDefault();const _e=le.clipboardData.getData("text"),tt=cr(_e),Xe=Rn.current||le.target,rt=Xe.selectionStart||0,_t=Xe.selectionEnd||0,mt=Xe.value,Bt=mt.substring(0,rt)+tt+mt.substring(_t);ln(Bt),setTimeout(()=>{const kt=rt+tt.length;Xe.setSelectionRange(kt,kt)},0)}},Dr=()=>{const le={...Yc,quantity:1,unitPrice:0,selectedPriceType:Q==="custom"?"custom":localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp"},_e=Date.now().toString();Y(tt=>[...tt,{...le,id:_e}]),Bs(tt=>[...tt,[]]),wa(tt=>[...tt,!1]),requestAnimationFrame(()=>{var Xe;const tt=k.length;En.current[tt]&&((Xe=En.current[tt])==null||Xe.focus())})},zr=le=>{const _e=k.filter((tt,Xe)=>Xe!==le);Y(_e),Bs(tt=>tt.filter((Xe,rt)=>rt!==le)),wa(tt=>tt.filter((Xe,rt)=>rt!==le))},fr=async()=>{var mt,Bt;let le=null;se.trim()||(C(p.INVOICE_NUMBER_LABEL+" "+p.FIELD_IS_REQUIRED.toLowerCase(),"error"),!le&&_s.current&&(le=_s.current)),ee||(C(p.INVOICE_DATE_REQUIRED_ERROR,"error"),!le&&hs.current&&(le=hs.current)),!F&&!re.trim()&&(C(p.INVOICE_CUSTOMER_REQUIRED_ERROR,"error"),!le&&kn.current&&(le=kn.current)),vn<=0&&(C(p.INVOICE_TOTAL_MUST_BE_POSITIVE_ERROR,"error"),!le&&k.length>0&&bs.current[0]&&(le=bs.current[0]));const _e=k.filter(kt=>kt.productName.trim()!==""||(kt.description||"").trim()!==""||(kt.quantity||0)>0||(kt.unitPrice||0)>0);_e.length===0&&(C(p.INVOICE_NO_ITEMS_ERROR,"error"),!le&&En.current[0]&&(le=En.current[0]));const tt=_e.findIndex(kt=>kt.productName.trim()!==""&&((kt.quantity||0)<=0||(kt.unitPrice||0)<0));if(tt!==-1&&(C(p.INVOICE_ITEM_VALIDATION_ERROR,"error"),le||(bs.current[tt]&&(_e[tt].quantity||0)<=0?le=bs.current[tt]:Qt.current[tt]&&(_e[tt].unitPrice||0)<0?le=Qt.current[tt]:En.current[tt]&&(le=En.current[tt]))),(le===_s.current&&kn.current||le===hs.current&&kn.current)&&(le=kn.current),le){le.focus(),typeof le.select=="function"&&le.select();return}const Xe=_e;let rt=F;if(!rt&&re.trim()){const kt=s.find(Ct=>(Ct.customAlias||Ct.name).toLowerCase()===re.trim().toLowerCase());if(kt)rt=kt.id;else try{const Ct=await d({name:re.trim()});if(Ct)rt=Ct.id,C(p.PERSON_ADDED_IMPLICITLY_INVOICE.replace("{personName}",re.trim()).replace("{personType}",p.PERSON_TYPE_CUSTOMER),"success");else throw new Error("New person creation returned null")}catch(Ct){console.error("Error adding person implicitly:",Ct),C(p.INVOICE_CUSTOMER_CREATION_ERROR,"error"),(mt=kn.current)==null||mt.focus();return}}if(!rt){C(p.INVOICE_CUSTOMER_REQUIRED_ERROR,"error"),(Bt=kn.current)==null||Bt.focus();return}const _t={invoiceNumber:se,invoiceType:Sa.SALES,invoiceDate:ee,dueDate:oe||void 0,personId:rt,companyProfileId:ce,items:Xe.map(({selectedPriceType:kt,originalProductId:Ct,availablePrices:$t,...Bn})=>({...Bn,originalProductId:Ct||void 0})),subtotal:ls,discountType:ve||void 0,discountValue:Ne||void 0,discountAmount:Mn||void 0,taxType:we||void 0,taxValue:Ze||void 0,taxAmount:gs||void 0,totalAmount:vn,notes:je.trim()||void 0,paymentStatus:Fe};if(!I){if(Fe===Ht.PAID)_t.initialPayment={paymentDate:new Date().toISOString(),amount:vn,paymentMethod:Ws,notes:js.trim()||p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE};else if(Fe===Ht.PARTIALLY_PAID){const kt=parseFloat(rs);if(isNaN(kt)||kt<=0){C(p.PAYMENT_AMOUNT_INVALID_FOR_PARTIAL,"error");return}kt>=vn&&C(p.PARTIAL_PAYMENT_CANT_BE_FULL,"warning"),_t.initialPayment={paymentDate:new Date().toISOString(),amount:kt,paymentMethod:Ws,notes:js.trim()||void 0}}}T(p.CONFIRM_CREATE_INVOICE_TITLE,p.CONFIRM_CREATE_INVOICE_MSG,async()=>{if(await t(_t,_==null?void 0:_.id))if(C(I?p.INVOICE_UPDATED_SUCCESS:p.INVOICE_CREATED_SUCCESS,"success"),I)e();else{if(L){const Ct={};if(Pe&&(Ct.defaultSalesPaymentStatus=Fe),it){const $t=new Date;$t.setHours(0,0,0,0);const Bn=new Date(ee);Bn.setHours(0,0,0,0),Ct.defaultSalesInvoiceDateOffset=Math.round((Bn.getTime()-$t.getTime())/(1e3*60*60*24))}if(Nt&&oe){const $t=new Date(ee);$t.setHours(0,0,0,0);const Bn=new Date(oe);Bn.setHours(0,0,0,0),Ct.defaultSalesDueDateOffset=Math.round((Bn.getTime()-$t.getTime())/(1e3*60*60*24))}Rt&&(Ct.defaultSalesCompanyProfileId=ce),Yt&&(Ct.defaultSalesDiscountType=ve,Ct.defaultSalesDiscountValue=Ne),We&&(Ct.defaultSalesTaxType=we,Ct.defaultSalesTaxValue=Ze),pe&&(Ct.defaultSalesPaymentMethod=Ws),At&&(Ct.defaultSalesPaymentNotes=js.trim()||null),Gt&&(Ct.defaultSalesInvoiceNotes=je.trim()||null),Object.keys(Ct).length>0&&await R(Ct)}Ir(),j.current=!1,requestAnimationFrame(()=>{var Ct;En.current[0]&&((Ct=En.current[0])==null||Ct.focus())})}},p.CONFIRM_BTN_YES_CREATE,p.CONFIRM_BTN_COLOR_CREATE)},di=I?p.EDIT_INVOICE_MODAL_TITLE:p.CREATE_SALES_INVOICE_MODAL_TITLE,nr=p.BILLED_TO_LABEL,fi=p.CUSTOMER_SEARCH_PLACEHOLDER,fa=p.SELECT_CUSTOMER_BTN_LABEL,sr=I?p.SAVE_INVOICE_BTN_LABEL:p.CREATE_INVOICE_BTN_LABEL,_r=!I&&(Fe===Ht.PARTIALLY_PAID||Fe===Ht.PAID),br=!I&&Fe===Ht.PAID,Pi=Fe===Ht.PENDING||Fe===Ht.PARTIALLY_PAID||Fe===Ht.OVERDUE,Zi=l.jsx("button",{onClick:dr,className:"text-slate-500 hover:text-teal-600 p-1.5 rounded-full hover:bg-teal-50 transition-colors",title:O?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,"aria-label":O?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,children:O?l.jsx(a5,{className:"w-5 h-5"}):l.jsx(s5,{className:"w-5 h-5"})});return l.jsx(Ya,{isOpen:n,onClose:e,title:di,size:O?"screen":"3xl",headerActions:Zi,children:l.jsxs("div",{className:`flex flex-col ${O?"h-full":""}`,children:[l.jsxs("div",{className:`p-1 ${O?"flex-grow overflow-y-auto custom-scrollbar-modal pr-2 pb-20":"space-y-4 pb-20"}`,children:[l.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"companyProfile",className:"block text-xs font-medium text-slate-600 mb-0.5",children:"  ()"}),l.jsxs("div",{className:"flex items-end",children:[l.jsxs("select",{id:"companyProfile",value:ce||"",onChange:le=>M(le.target.value||void 0),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",children:[l.jsx("option",{value:"",children:"--   --"}),i.filter(le=>!le.isDeleted).map(le=>l.jsx("option",{value:le.id,children:le.companyName},le.id))]}),!I&&l.jsx("button",{type:"button",onClick:qr,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Rt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Rt?p.UNPIN_COMPANY_PROFILE_DEFAULT:p.PIN_COMPANY_PROFILE_DEFAULT,children:l.jsx(Di,{isFilled:Rt})})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"invoiceNumber",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_NUMBER_LABEL}),l.jsx("input",{ref:_s,type:"text",id:"invoiceNumber",value:se,onChange:le=>Z(le.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",onKeyDown:le=>{var _e;le.key==="Enter"&&(le.preventDefault(),(_e=hs.current)==null||_e.focus())}})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"invoiceDate",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_DATE_LABEL}),l.jsxs("div",{className:"flex items-end",children:[l.jsx("input",{ref:hs,type:"date",id:"invoiceDate",value:ee,onChange:le=>J(le.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",required:!0,onKeyDown:le=>{var _e;le.key==="Enter"&&(le.preventDefault(),Pi&&er.current?er.current.focus():k.length>0&&En.current[0]&&((_e=En.current[0])==null||_e.focus()))}}),!I&&l.jsx("button",{type:"button",onClick:li,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${it?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:it?p.UNPIN_INVOICE_DATE_DEFAULT:p.PIN_INVOICE_DATE_DEFAULT,children:l.jsx(Di,{isFilled:it})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("label",{htmlFor:"customerSearch",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[nr," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{ref:kn,type:"text",id:"customerSearch",value:re,onChange:dt,onKeyDown:bt,onPaste:Dt,onFocus:()=>re.trim()&&ue(!0),placeholder:fi,className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",autoComplete:"off"}),l.jsx("button",{type:"button",onClick:()=>c(xt),className:"p-2 bg-teal-500 hover:bg-teal-600 text-white rounded-md shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:fa,children:l.jsx(kl,{className:"w-4 h-4"})})]}),he&&l.jsx("ul",{ref:Fn,className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto custom-scrollbar-modal",children:Te.length>0?Te.map((le,_e)=>l.jsxs("li",{onClick:()=>wt(le),className:`px-3 py-2 hover:bg-teal-50 cursor-pointer text-xs ${ae===_e?"bg-teal-100":""}`,onMouseEnter:()=>V(_e),role:"option","aria-selected":ae===_e,children:[le.customAlias||le.name," ",le.mobileNumber&&`(${le.mobileNumber})`]},le.id)):re.trim()&&l.jsx("li",{className:"px-3 py-2 text-xs text-slate-500",children:p.NO_CUSTOMER_SUGGESTIONS})})]})]}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("section",{className:`${O?"":"border-t pt-3 mt-3"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:`text-md font-semibold text-slate-700 ${mn()}`,children:p.INVOICE_ITEMS_LABEL}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{type:"button",onClick:()=>Gr("decrease"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:ws==="xs",children:l.jsx(Yh,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>sa("sm"),title:" ",className:"p-1 rounded hover:bg-slate-200 text-slate-600",children:l.jsx(qh,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>Gr("increase"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:ws==="2xl",children:l.jsx(xc,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:ea,type:"button",onClick:()=>Ds(le=>!le),className:"text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:" ","aria-haspopup":"true","aria-expanded":Hr,children:[l.jsx(vp,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:""})]}),Hr&&l.jsxs("div",{ref:Yr,className:"absolute right-0 mt-1 w-60 bg-white border border-slate-300 rounded-md shadow-lg z-30 py-1",role:"menu",children:[l.jsx("div",{className:"px-3 pt-2 pb-1 border-b",children:l.jsx("p",{className:"text-xs font-medium text-slate-500",children:" /"})}),D0.map(({key:le,label:_e})=>l.jsxs("label",{className:"flex items-center space-x-2 px-3 py-1.5 hover:bg-slate-50 cursor-pointer text-xs",children:[l.jsx("input",{type:"checkbox",checked:Ns[le],onChange:()=>Ta(le),className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-400 rounded focus:ring-teal-500"}),l.jsx("span",{className:"text-slate-700",children:_e})]},le)),l.jsx("div",{className:"px-3 pt-2 pb-1 border-t mt-1",children:l.jsx("p",{className:"text-xs font-medium text-slate-500",children:" "})}),l.jsxs("div",{className:"flex justify-around items-center px-3 py-1.5",children:[l.jsx("button",{onClick:()=>sa("xs"),title:"",className:`p-1 rounded hover:bg-slate-100 ${ws==="xs"?"text-teal-600":"text-slate-500"}`,children:l.jsx(Yh,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>sa("sm"),title:"",className:`p-1 rounded hover:bg-slate-100 ${ws==="sm"?"text-teal-600":"text-slate-500"}`,children:l.jsx(qh,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>sa("base"),title:"",className:`p-1 rounded hover:bg-slate-100 ${ws==="base"?"text-teal-600":"text-slate-500"}`,children:l.jsx(xc,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>sa("lg"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${ws==="lg"?"text-teal-600":"text-slate-500"}`,children:l.jsx(xc,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>sa("xl"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${ws==="xl"?"text-teal-600":"text-slate-500"}`,children:l.jsx(xc,{className:"w-6 h-6"})})]})]})]}),l.jsxs("button",{type:"button",onClick:()=>{e(),h()},className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,children:[l.jsx(Wd,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:p.MANAGE_PRODUCTS_STOCK_NAV_BTN})]})]})]}),l.jsxs("div",{className:"p-3 bg-slate-100 rounded-md mb-3",children:[l.jsxs("label",{className:`block text-xs font-medium text-slate-600 mb-1.5 ${mn()}`,children:[p.PRICE_TYPE_LABEL," ()"]}),l.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1.5 text-xs",children:["mrp","wholesale","sales","custom"].map(le=>l.jsxs("label",{className:"flex items-center space-x-1 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"globalPriceType",value:le,checked:Q===le,onChange:()=>fe(le),className:"form-radio h-3.5 w-3.5 text-teal-600 focus:ring-teal-500 border-slate-400"}),l.jsx("span",{className:`${Q===le?"text-teal-700 font-medium":"text-slate-600"} ${mn()}`,children:le==="mrp"?p.PRICE_TYPE_MRP:le==="wholesale"?p.PRICE_TYPE_WHOLESALE:le==="sales"?p.PRICE_TYPE_SALES:p.PRICE_TYPE_CUSTOM})]},le))})]})]}),l.jsxs("div",{className:`grid gap-x-2 items-end mb-1.5 print:hidden font-medium text-slate-600 ${mn()}`,style:wr,children:[D0.map(le=>l.jsx("div",{className:`${Ns[le.key]?"":"hidden"} ${le.headerTextAlign||"text-left"}`,children:l.jsx("label",{children:le.label})},le.key)),l.jsx("div",{className:"text-center",children:l.jsx("label",{children:""})})]}),l.jsx("div",{className:`space-y-3 mb-3 ${O?"pr-1":"max-h-[65vh] overflow-y-auto custom-scrollbar-modal pr-1"}`,children:k.map((le,_e)=>{var rt,_t,mt,Bt,kt,Ct,$t,Bn,Kn,Xn,zn,ha,bn,Gs,aa;const tt=Q==="custom"&&le.selectedPriceType==="custom";let Xe=!1;return Xe=!tt&&le.selectedPriceType!=="custom"&&!!le.originalProductId&&(le.selectedPriceType==="mrp"&&((rt=le.availablePrices)==null?void 0:rt.mrp)!==void 0||le.selectedPriceType==="wholesale"&&((_t=le.availablePrices)==null?void 0:_t.wholesale)!==void 0||le.selectedPriceType==="sales"&&((mt=le.availablePrices)==null?void 0:mt.sales)!==void 0),l.jsxs("div",{className:"grid gap-x-2 gap-y-1 items-start py-2 border-b border-slate-100 group",style:wr,children:[l.jsxs("div",{className:`relative ${Ns.productName?"":"hidden"}`,children:[l.jsx("input",{ref:dn=>{En.current[_e]=dn},type:"text",id:`item-name-${_e}`,value:le.productName,onChange:dn=>be(_e,dn.target.value),onKeyDown:Zt(_e,"productName",En),onPaste:on(_e,"productName",En),onFocus:()=>{if(le.productName.trim()){const dn=r.filter(ys=>!ys.isDeleted&&ys.name.toLowerCase().includes(le.productName.toLowerCase())).slice(0,5);Bs(ys=>{const Tr=[...ys];return Tr[_e]=dn,Tr})}else Bs(dn=>{const ys=[...dn];return ys[_e]=r.filter(Tr=>!Tr.isDeleted).slice(0,5),ys});wa(dn=>{const ys=[...dn];return ys[_e]=!0,ys}),ka({itemIndex:_e,suggestionIndex:-1})},className:`w-full px-3 py-1.5 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()} ${ms[_e]?"border-teal-500":"border-slate-300"}`,placeholder:p.PRODUCT_NAME_PLACEHOLDER,autoComplete:"off","aria-activedescendant":(Is==null?void 0:Is.itemIndex)===_e&&Is.suggestionIndex!==-1?`product-suggestion-${_e}-${Is.suggestionIndex}`:void 0}),ms[_e]&&ua[_e]&&ua[_e].length>0&&l.jsx("ul",{ref:dn=>{La.current[_e]=dn},className:"absolute z-30 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto custom-scrollbar-modal",role:"listbox",children:ua[_e].map((dn,ys)=>l.jsx("li",{id:`product-suggestion-${_e}-${ys}`,onClick:()=>Re(_e,dn),onMouseDown:Tr=>Tr.preventDefault(),className:`px-3 py-2 hover:bg-teal-50 cursor-pointer ${mn()} ${(Is==null?void 0:Is.itemIndex)===_e&&Is.suggestionIndex===ys?"bg-teal-100":""}`,onMouseEnter:()=>ka({itemIndex:_e,suggestionIndex:ys}),role:"option","aria-selected":(Is==null?void 0:Is.itemIndex)===_e&&Is.suggestionIndex===ys,children:dn.name},dn.id))})]}),l.jsx("div",{className:`${Ns.description?"":"hidden"}`,children:l.jsx("textarea",{ref:dn=>{Ts.current[_e]=dn},id:`item-short-desc-${_e}`,value:le.description,onChange:dn=>Da(_e,"description",dn.target.value,Wn.current[`description-${_e}`]),onKeyDown:Zt(_e,"description",Ts),onPaste:on(_e,"description",Ts),placeholder:p.ITEM_DESCRIPTION_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${mn()}`,rows:1})}),l.jsx("div",{className:`${Ns.quantity?"":"hidden"}`,children:l.jsx("input",{ref:dn=>{bs.current[_e]=dn},type:"number",id:`item-quantity-${_e}`,value:le.quantity,onChange:dn=>Da(_e,"quantity",dn.target.value),onKeyDown:_n(_e,"quantity"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-20 text-right ${mn()}`,min:"0",step:"any"})}),l.jsxs("div",{className:`relative ${Ns.unitPrice?"":"hidden"}`,children:[l.jsx("input",{ref:dn=>{Qt.current[_e]=dn},type:"number",id:`item-unitprice-${_e}`,value:le.unitPrice,onChange:dn=>Da(_e,"unitPrice",dn.target.value),onKeyDown:_n(_e,"unitPrice"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-24 text-right ${mn()}`,min:"0",step:"any",readOnly:Xe}),le.originalProductId&&l.jsxs("select",{value:le.selectedPriceType,onChange:dn=>Ni(_e,dn.target.value),className:`absolute right-1 bottom-1 text-[9px] bg-slate-100 text-slate-600 px-1 py-0.5 rounded-sm border border-slate-300 focus:outline-none focus:ring-1 focus:ring-teal-400 ${mn()==="text-xs"?"text-[8px]":mn()==="text-base"?"text-[10px]":"text-[9px]"}`,children:[l.jsxs("option",{value:"mrp",disabled:((Bt=le.availablePrices)==null?void 0:Bt.mrp)===void 0||((kt=le.availablePrices)==null?void 0:kt.mrp)===null,children:[p.PRICE_TYPE_MRP," ",((Ct=le.availablePrices)==null?void 0:Ct.mrp)===void 0||(($t=le.availablePrices)==null?void 0:$t.mrp)===null?` (${p.PRICE_NOT_AVAILABLE})`:""]}),l.jsxs("option",{value:"wholesale",disabled:((Bn=le.availablePrices)==null?void 0:Bn.wholesale)===void 0||((Kn=le.availablePrices)==null?void 0:Kn.wholesale)===null,children:[p.PRICE_TYPE_WHOLESALE," ",((Xn=le.availablePrices)==null?void 0:Xn.wholesale)===void 0||((zn=le.availablePrices)==null?void 0:zn.wholesale)===null?` (${p.PRICE_NOT_AVAILABLE})`:""]}),l.jsxs("option",{value:"sales",disabled:((ha=le.availablePrices)==null?void 0:ha.sales)===void 0||((bn=le.availablePrices)==null?void 0:bn.sales)===null,children:[p.PRICE_TYPE_SALES," ",((Gs=le.availablePrices)==null?void 0:Gs.sales)===void 0||((aa=le.availablePrices)==null?void 0:aa.sales)===null?` (${p.PRICE_NOT_AVAILABLE})`:""]}),l.jsx("option",{value:"custom",children:p.PRICE_TYPE_CUSTOM})]})]}),l.jsx("div",{className:`${Ns.totalPrice?"":"hidden"}`,children:tt?l.jsx("input",{ref:dn=>{$n.current[_e]=dn},type:"number",value:le.total,onChange:dn=>Da(_e,"total",dn.target.value),onKeyDown:_n(_e,"totalPrice"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md text-slate-700 font-medium text-right focus:ring-teal-500 focus:border-teal-500 ${mn()}`,min:"0",step:"any"}):l.jsx("input",{ref:dn=>{$n.current[_e]=dn},type:"text",value:(le.total||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),onKeyDown:_n(_e,"totalPrice"),className:`w-full px-3 py-1.5 border-0 bg-slate-50 rounded-md text-slate-700 font-medium text-right ${mn()}`,readOnly:!0})}),l.jsxs("div",{className:`${Ns.unit?"":"hidden"}`,children:[l.jsx("input",{ref:dn=>{Ls.current[_e]=dn},type:"text",id:`item-unit-${_e}`,value:le.unit||"",onChange:dn=>Da(_e,"unit",dn.target.value,Wn.current[`unit-${_e}`]),onKeyDown:Zt(_e,"unit",Ls),onPaste:on(_e,"unit",Ls),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`,placeholder:": ",list:`common-units-datalist-item-${_e}`}),l.jsx("datalist",{id:`common-units-datalist-item-${_e}`,children:Wi.map(dn=>l.jsx("option",{value:dn},dn))})]}),l.jsx("div",{className:"flex items-center justify-center h-full",children:k.length>1&&l.jsx("button",{type:"button",onClick:()=>zr(_e),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50",title:p.REMOVE_ITEM_BTN_LABEL,children:l.jsx(xr,{className:"w-4 h-4"})})})]},le.id)})}),l.jsxs("button",{type:"button",onClick:Dr,className:`w-full text-teal-600 hover:text-teal-700 font-medium py-2 px-3 border-2 border-dashed border-teal-300 hover:border-teal-400 rounded-md flex items-center justify-center space-x-1.5 transition-colors ${mn()}`,children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsx("span",{children:p.ADD_ITEM_BTN_LABEL})]})]}),l.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${mn()} ${O?"":"mt-4 pt-3 border-t"}`,children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"discountType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.DISCOUNT_TYPE_LABEL}),l.jsxs("select",{id:"discountType",value:ve||"",onChange:le=>de(le.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:[l.jsxs("option",{value:"",children:["-- ",p.DISCOUNT_LABEL,"  --"]}),l.jsx("option",{value:"percentage",children:p.DISCOUNT_PERCENTAGE_LABEL}),l.jsx("option",{value:"fixed",children:p.DISCOUNT_FIXED_AMOUNT_LABEL})]})]}),!I&&l.jsx("button",{type:"button",onClick:_i,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Yt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Yt?p.UNPIN_DISCOUNT_TYPE_DEFAULT:p.PIN_DISCOUNT_TYPE_DEFAULT,children:l.jsx(Di,{isFilled:Yt})})]}),ve&&l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"discountValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:[p.DISCOUNT_LABEL," ",ve==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),l.jsx("input",{type:"number",id:"discountValue",value:Ne,onChange:le=>Ue(parseFloat(le.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`,min:"0",step:"any"})]}),l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"taxType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.TAX_TYPE_LABEL}),l.jsxs("select",{id:"taxType",value:we||"",onChange:le=>Je(le.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:[l.jsxs("option",{value:"",children:["-- ",p.TAX_LABEL,"  --"]}),l.jsx("option",{value:"percentage",children:p.TAX_PERCENTAGE_LABEL}),l.jsx("option",{value:"fixed",children:p.TAX_FIXED_AMOUNT_LABEL})]})]}),!I&&l.jsx("button",{type:"button",onClick:bi,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${We?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:We?p.UNPIN_TAX_TYPE_DEFAULT:p.PIN_TAX_TYPE_DEFAULT,children:l.jsx(Di,{isFilled:We})})]}),we&&l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"taxValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:[p.TAX_LABEL," ",we==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),l.jsx("input",{type:"number",id:"taxValue",value:Ze,onChange:le=>Qe(parseFloat(le.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`,min:"0",step:"any"})]})]}),l.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border border-slate-200 space-y-1 text-right",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-slate-600",children:[p.SUBTOTAL_LABEL,":"]})," ",l.jsxs("span",{className:"font-medium",children:[p.BDT_SYMBOL," ",ls.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),Mn>0&&l.jsxs("div",{className:"flex justify-between text-red-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.DISCOUNT_LABEL," (",ve==="percentage"?`${Ne}%`:p.BDT_SYMBOL+Ne,"):"]})," ",l.jsxs("span",{className:"font-medium",children:["- ",p.BDT_SYMBOL," ",Mn.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),gs>0&&l.jsxs("div",{className:"flex justify-between text-green-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.TAX_LABEL," (",we==="percentage"?`${Ze}%`:p.BDT_SYMBOL+Ze,"):"]})," ",l.jsxs("span",{className:"font-medium",children:["+ ",p.BDT_SYMBOL," ",gs.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-1 mt-1",children:[l.jsxs("span",{className:"text-slate-700",children:[p.GRAND_TOTAL_LABEL,":"]})," ",l.jsxs("span",{children:[p.BDT_SYMBOL," ",vn.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]})]})]}),l.jsxs("section",{className:"mt-4",children:[l.jsx("label",{htmlFor:"invoiceNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.NOTES_TERMS_LABEL}),l.jsxs("div",{className:"flex items-end",children:[l.jsx("textarea",{ref:Ln,id:"invoiceNotes",value:je,onChange:le=>{Wn.current.notes?(ge(le.target.value),Wn.current.notes=!1):ge(le.target.value)},onKeyDown:ts,onPaste:Yn,rows:O?3:2,placeholder:p.NOTES_TERMS_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${mn()}`}),!I&&l.jsx("button",{type:"button",onClick:Ti,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Gt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Gt?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:l.jsx(Di,{isFilled:Gt})})]})]}),l.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 items-end mt-4 pt-3 border-t ${mn()}`,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"paymentStatus",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.PAYMENT_STATUS_LABEL}),l.jsxs("div",{className:"flex items-end",children:[l.jsx("div",{className:"flex-grow",children:l.jsxs("select",{id:"paymentStatus",value:Fe,onChange:le=>ut(le.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:[l.jsx("option",{value:Ht.PENDING,children:p.PAYMENT_STATUS_PENDING}),l.jsx("option",{value:Ht.PARTIALLY_PAID,children:p.PAYMENT_STATUS_PARTIALLY_PAID}),l.jsx("option",{value:Ht.PAID,children:p.PAYMENT_STATUS_PAID}),l.jsx("option",{value:Ht.OVERDUE,children:p.PAYMENT_STATUS_OVERDUE}),l.jsx("option",{value:Ht.CANCELLED,children:p.PAYMENT_STATUS_CANCELLED})]})}),!I&&l.jsx("button",{type:"button",onClick:Ia,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400
                        ${Pe?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Pe?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:l.jsx(Di,{isFilled:Pe})})]})]}),Pi&&l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"dueDate",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.DUE_DATE_INVOICE_LABEL}),l.jsx("input",{ref:er,type:"date",id:"dueDate",value:oe,onChange:le=>xe(le.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,onKeyDown:le=>{var _e;le.key==="Enter"&&(le.preventDefault(),k.length>0&&En.current[0]&&((_e=En.current[0])==null||_e.focus()))}})]}),!I&&l.jsx("button",{type:"button",onClick:cs,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Nt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Nt?p.UNPIN_DUE_DATE_DEFAULT:p.PIN_DUE_DATE_DEFAULT,children:l.jsx(Di,{isFilled:Nt})})]})]}),_r&&l.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 border-t pt-3 mt-2 ${mn()}`,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"initialPaidAmount",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.INITIAL_PAID_AMOUNT_LABEL}),l.jsx("input",{type:"number",id:"initialPaidAmount",value:rs,onChange:le=>Cn(le.target.value),className:`w-full px-3 py-1.5 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()} ${br?"border-slate-200 bg-slate-100 text-slate-500 cursor-not-allowed":"border-slate-300 bg-white"}`,min:"0.01",step:"0.01",max:Fe===Ht.PARTIALLY_PAID&&vn>0?vn-.01:void 0,readOnly:br})]}),l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"initialPaymentMethod",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.PAYMENT_METHOD_LABEL}),l.jsx("select",{id:"initialPaymentMethod",value:Ws,onChange:le=>Un(le.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:["Cash","Bank Transfer","bKash","Nagad","Rocket","Card","Cheque","Other"].map(le=>l.jsx("option",{value:le,children:p[`PAYMENT_METHOD_${le.toUpperCase().replace(" ","_")}`]||le},le))})]}),!I&&l.jsx("button",{type:"button",onClick:Er,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${pe?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:pe?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:l.jsx(Di,{isFilled:pe})})]}),l.jsxs("div",{className:"md:col-span-2 flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"initialPaymentNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.PAYMENT_NOTES_LABEL}),l.jsx("input",{ref:Rn,type:"text",id:"initialPaymentNotes",value:js,onChange:le=>{Wn.current.paymentNotes?(ln(le.target.value),Wn.current.paymentNotes=!1):ln(le.target.value)},onKeyDown:jn,onPaste:yn,placeholder:p.PAYMENT_NOTES_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`})]}),!I&&l.jsx("button",{type:"button",onClick:ci,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${At?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:At?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:l.jsx(Di,{isFilled:At})})]})]})]}),l.jsxs("div",{className:`pt-3 border-t bg-white rounded-b-xl
                         ${O?"sticky bottom-0 left-0 right-0 z-10 px-4 pb-4 sm:px-6 sm:pb-5":"px-1"}
                         flex justify-end space-x-3`,children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),l.jsx("button",{ref:Ca,type:"button",onClick:fr,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:sr})]})]})})},Hd={productName:"",description:"",quantity:1,unitPrice:0,total:0,selectedPriceType:"custom",unit:""},m2={productName:!0,quantity:!0,total:!0,unitPrice:!0,unit:!0},R0=[{key:"productName",label:p.PRODUCT_SERVICE_NAME_LABEL,defaultGridSpan:"minmax(0, 2.5fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"},{key:"quantity",label:p.QUANTITY_INVOICE_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"total",label:p.ITEM_TOTAL_LABEL,defaultGridSpan:"minmax(0, 1fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unitPrice",label:"  ()",defaultGridSpan:"minmax(0, 1.2fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unit",label:p.PRODUCT_UNIT_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"}],U3=({isOpen:n,onClose:e,onSaveInvoice:t,persons:s,products:r,companyProfiles:i,onOpenSelectPersonModal:c,onPersonAdded:d,isGlobalPhoneticModeActive:f,onOpenManageProductsModal:h,editingInvoiceData:_})=>{const{addNotification:b}=ur(),{currentUser:v,updateCurrentUserData:T}=Nc(),C=!!_,L=D.useRef(!1),[R,I]=D.useState(!1),[j,O]=D.useState(""),[U,se]=D.useState(new Date().toISOString().split("T")[0]),[Z,ee]=D.useState(""),[J,oe]=D.useState(null),[xe,F]=D.useState(""),[H,re]=D.useState([]),[K,Te]=D.useState(!1),[G,he]=D.useState(void 0),[ue,ae]=D.useState([{...Hd,id:Date.now().toString()}]),[V,ce]=D.useState(null),[M,k]=D.useState(0),[Y,Q]=D.useState(null),[fe,ve]=D.useState(0),[de,Ne]=D.useState(""),[Ue,we]=D.useState(Ht.PENDING),[Je,Ze]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_BILL_DATE)==="true"),[Qe,je]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_DUE_DATE)==="true"),[ge,Fe]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_COMPANY_PROFILE)==="true"),[ut,Pe]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_DISCOUNT_TYPE)==="true"),[nt,it]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_TAX_TYPE)==="true"),[st,Nt]=D.useState(""),[Pt,Rt]=D.useState("Cash"),[Ft,Yt]=D.useState(""),[Be,We]=D.useState(0),[Lt,pe]=D.useState(0),[yt,At]=D.useState(0),[Kt,Gt]=D.useState(0),xn=D.useRef(null),rs=D.useRef(null),Cn=D.useRef(null),Ws=D.useRef(null),Un=D.useRef(null),js=D.useRef(null),ln=D.useRef([]),ls=D.useRef([]),un=D.useRef([]),Mn=D.useRef([]),qa=D.useRef([]),gs=D.useRef([]),ca=D.useRef([]),vn=D.useRef({}),[Xt,Ln]=D.useState(()=>ue.map(()=>[])),[kn,Fn]=D.useState(()=>ue.map(()=>!1)),[Rn,_s]=D.useState(()=>{const be=localStorage.getItem(Tt.INVOICE_COLUMN_VISIBILITY_PURCHASE_V1);try{return be?JSON.parse(be):m2}catch(Re){return console.error("Failed to parse purchase column visibility from localStorage",Re),m2}}),[hs,er]=D.useState(()=>localStorage.getItem(Tt.INVOICE_ITEM_FONT_SIZE_PURCHASE_V1)||"sm");D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_COLUMN_VISIBILITY_PURCHASE_V1,JSON.stringify(Rn))},[Rn]),D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_ITEM_FONT_SIZE_PURCHASE_V1,hs)},[hs]);const Ca=be=>{_s(Re=>({...Re,[be]:!Re[be]}))},En=be=>{er(be)},bs=be=>{const Re=["xs","sm","base","lg","xl","2xl"],ze=Re.indexOf(hs);be==="increase"?ze<Re.length-1&&er(Re[ze+1]):ze>0&&er(Re[ze-1])},Qt=be=>({xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"})[hs]||"text-sm",[Ls,Ts]=D.useState(!1),$n=D.useRef(null),La=D.useRef(null),ua=D.useMemo(()=>({gridTemplateColumns:[...R0.filter(ze=>Rn[ze.key]).map(ze=>ze.defaultGridSpan),"minmax(0, 1.5fr)","auto"].join(" ")}),[Rn]);D.useEffect(()=>{const be=Re=>{La.current&&!La.current.contains(Re.target)&&$n.current&&!$n.current.contains(Re.target)&&Ts(!1)};return Ls&&document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[Ls]);const Bs=()=>I(be=>!be),ms=D.useCallback((be,Re,ze,dt,bt,Dt,wt)=>async()=>{be(xt=>{const Zt=!xt;if(localStorage.setItem(Re,String(Zt)),v){const _n={};Zt?(_n[ze]=dt,bt&&Dt!=null&&(_n[bt]=Dt),wt&&b(`${wt} ${p.DEFAULT_VALUE_PINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"success",2e3)):(_n[ze]=null,bt&&(_n[bt]=null),wt&&b(`${wt} ${p.DEFAULT_VALUE_UNPINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"info",2e3)),Object.keys(_n).length>0&&T(_n)}return Zt})},[v,T,b]),wa=D.useCallback(()=>{const be=new Date;be.setHours(0,0,0,0);const Re=new Date(U);Re.setHours(0,0,0,0);const ze=Math.round((Re.getTime()-be.getTime())/(1e3*60*60*24));ms(Ze,Tt.PIN_PURCHASE_BILL_DATE,"defaultPurchaseBillDateOffset",ze,void 0,void 0,p.INVOICE_DATE_LABEL.replace("/",""))()},[ms,U]),Is=D.useCallback(()=>{if(U&&Z){const be=new Date(U);be.setHours(0,0,0,0);const Re=new Date(Z);Re.setHours(0,0,0,0);const ze=Math.round((Re.getTime()-be.getTime())/(1e3*60*60*24));ms(je,Tt.PIN_PURCHASE_DUE_DATE,"defaultPurchaseDueDateOffset",ze,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()}else ms(je,Tt.PIN_PURCHASE_DUE_DATE,"defaultPurchaseDueDateOffset",0,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()},[ms,U,Z]),ka=D.useCallback(()=>ms(Fe,Tt.PIN_PURCHASE_COMPANY_PROFILE,"defaultPurchaseCompanyProfileId",G,void 0,void 0," ()")(),[ms,G]),Wn=D.useCallback(()=>ms(Pe,Tt.PIN_PURCHASE_DISCOUNT_TYPE,"defaultPurchaseDiscountType",V,"defaultPurchaseDiscountValue",M,p.DISCOUNT_TYPE_LABEL)(),[ms,V,M]),Ns=D.useCallback(()=>ms(it,Tt.PIN_PURCHASE_TAX_TYPE,"defaultPurchaseTaxType",Y,"defaultPurchaseTaxValue",fe,p.TAX_TYPE_LABEL)(),[ms,Y,fe]);D.useEffect(()=>{Ue!==Ht.PARTIALLY_PAID&&Ue!==Ht.PAID&&(Nt(""),Rt("Cash"),Yt(""))},[Ue]);const da=be=>{const Re=be.getFullYear(),ze=(be.getMonth()+1).toString().padStart(2,"0"),dt=be.getDate().toString().padStart(2,"0");return`${Re}-${ze}-${dt}`},ws=D.useCallback(()=>{const be=i.find(_n=>_n.isDefault)||(i.length>0?i[0]:null),Re=(be==null?void 0:be.companyName.substring(0,3).toUpperCase().replace(/\s/g,""))||"CMP",ze="BILL",dt="SUPP",bt=new Date,Dt=bt.getFullYear().toString().slice(-2),wt=(bt.getMonth()+1).toString().padStart(2,"0"),xt=bt.getDate().toString().padStart(2,"0"),Zt=Math.random().toString(36).substring(2,6).toUpperCase();return`${ze}-${Re}-${dt}${Dt}${wt}${xt}-${Zt}`},[i]),tr=D.useCallback(()=>{const be=localStorage.getItem(Tt.PIN_PURCHASE_BILL_DATE)==="true",Re=localStorage.getItem(Tt.PIN_PURCHASE_DUE_DATE)==="true",ze=localStorage.getItem(Tt.PIN_PURCHASE_COMPANY_PROFILE)==="true",dt=localStorage.getItem(Tt.PIN_PURCHASE_DISCOUNT_TYPE)==="true",bt=localStorage.getItem(Tt.PIN_PURCHASE_TAX_TYPE)==="true";if(Ze(be),je(Re),Fe(ze),Pe(dt),it(bt),C&&_){O(_.invoiceNumber),L.current=!0;const wt=new Date(_.invoiceDate);if(se(da(new Date(wt.getUTCFullYear(),wt.getUTCMonth(),wt.getUTCDate()))),_.dueDate){const _n=new Date(_.dueDate);ee(da(new Date(_n.getUTCFullYear(),_n.getUTCMonth(),_n.getUTCDate())))}else ee("");const xt=s.find(_n=>_n.id===_.personId);xt?(oe(xt.id),F(xt.customAlias||xt.name)):(oe(null),F("")),he(_.companyProfileId);const Zt=_.items.map(_n=>{var on;return{..._n,unit:_n.unit||"",quantity:_n.quantity||1,unitPrice:_n.unitPrice||0,selectedPriceType:"custom",originalProductId:(on=r.find(ts=>ts.name===_n.productName||ts.id&&_n.originalProductId===ts.id))==null?void 0:on.id}});ae(Zt.length>0?Zt:[{...Hd,id:Date.now().toString()}]),ce(_.discountType||null),k(_.discountValue||0),Q(_.taxType||null),ve(_.taxValue||0),Ne(_.notes||""),we(_.paymentStatus),Nt(""),Rt("Cash"),Yt("")}else{let wt=new Date;be&&(v==null?void 0:v.defaultPurchaseBillDateOffset)!==null&&(v==null?void 0:v.defaultPurchaseBillDateOffset)!==void 0&&wt.setDate(wt.getDate()+v.defaultPurchaseBillDateOffset);const xt=da(wt);se(xt);const[Zt,_n,on]=xt.split("-").map(Number);let ts=new Date(Zt,_n-1,on);if(Re&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==null&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==void 0&&ts.setDate(ts.getDate()+v.defaultPurchaseDueDateOffset),ee(da(ts)),ze&&(v!=null&&v.defaultPurchaseCompanyProfileId)&&i.find(Yn=>Yn.id===v.defaultPurchaseCompanyProfileId))he(v.defaultPurchaseCompanyProfileId);else{const Yn=i.find(jn=>jn.isDefault)||(i.length>0?i[0]:null);he(Yn==null?void 0:Yn.id)}L.current||(O(ws()),L.current=!0),oe(null),F(""),ae([{...Hd,id:Date.now().toString(),selectedPriceType:"custom",unit:""}]),dt&&(v!=null&&v.defaultPurchaseDiscountType)?(ce(v.defaultPurchaseDiscountType),k(v.defaultPurchaseDiscountValue??0)):(ce(null),k(0)),bt&&(v!=null&&v.defaultPurchaseTaxType)?(Q(v.defaultPurchaseTaxType),ve(v.defaultPurchaseTaxValue??0)):(Q(null),ve(0)),Ne(""),we(Ht.PENDING),Nt(""),Rt("Cash"),Yt("")}const Dt=C&&_?_.items:[{...Hd,id:Date.now().toString()}];Ln(Dt.map(()=>[])),Fn(Dt.map(()=>!1)),vn.current={}},[C,_,v,s,r,i,ws]);D.useEffect(()=>{n?tr():(L.current=!1,O(""))},[n,tr]),D.useEffect(()=>{if(!C&&Qe&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==null&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==void 0&&U){const[be,Re,ze]=U.split("-").map(Number);let dt=new Date(be,Re-1,ze);dt.setDate(dt.getDate()+v.defaultPurchaseDueDateOffset),ee(da(dt))}},[U,Qe,v==null?void 0:v.defaultPurchaseDueDateOffset,C]),D.useEffect(()=>{const be=ue.reduce((bt,Dt)=>bt+(Number(Dt.total)||0),0);We(be);let Re=0;V==="percentage"&&M>0?Re=be*M/100:V==="fixed"&&M>0&&(Re=M),Re=Math.max(0,Math.min(Re,be)),pe(Re);const ze=be-Re;let dt=0;Y==="percentage"&&fe>0?dt=ze*fe/100:Y==="fixed"&&fe>0&&(dt=fe),At(dt),Gt(ze+dt)},[ue,V,M,Y,fe]);const Ta=(be,Re,ze,dt)=>{const bt=`${Re}-${be}`;dt&&(vn.current[bt]=!0);const Dt=[...ue],wt=Dt[be];if(Re==="productName"||Re==="description"||Re==="unit")wt[Re]=ze;else if(Re==="quantity"||Re==="unitPrice"||Re==="total"){const xt=parseFloat(ze);wt[Re]=isNaN(xt)||xt<0?0:xt}(Re==="quantity"||Re==="unitPrice")&&(wt.total=(Number(wt.quantity)||0)*(Number(wt.unitPrice)||0)),ae(Dt)},sa=(be,Re)=>{const ze=`productName-${be}`;if(vn.current[ze]?(Ta(be,"productName",Re),vn.current[ze]=!1):Ta(be,"productName",Re),Re.trim()){const dt=r.filter(bt=>!bt.isDeleted&&bt.name.toLowerCase().includes(Re.toLowerCase())).slice(0,5);Ln(bt=>{const Dt=[...bt];return Dt[be]=dt,Dt}),Fn(bt=>{const Dt=[...bt];return Dt[be]=!0,Dt})}else{const dt=[...ue],bt=dt[be];bt.description="",bt.unitPrice=0,bt.total=0,bt.unit="",bt.selectedPriceType="custom",bt.originalProductId=void 0,bt.availablePrices=void 0,ae(dt),Ln(Dt=>{const wt=[...Dt];return wt[be]=[],wt}),Fn(Dt=>{const wt=[...Dt];return wt[be]=!1,wt})}},Gr=(be,Re)=>{var xt,Zt;const ze=[...ue],dt=ze[be],bt=`productName-${be}`,Dt=`description-${be}`,wt=`unit-${be}`;vn.current[bt]=!0,Re.description&&(vn.current[Dt]=!0),Re.unit&&(vn.current[wt]=!0),dt.productName=Re.name,dt.description=Re.description||"",dt.unit=Re.unit||"",dt.originalProductId=Re.id,dt.availablePrices={sales:Re.unitPrice,mrp:Re.mrp,wholesale:Re.wholesalePrice},dt.unitPrice=Re.wholesalePrice??0,dt.selectedPriceType="custom",dt.total=dt.quantity*dt.unitPrice,ae(ze),Ln(_n=>{const on=[..._n];return on[be]=[],on}),Fn(_n=>{const on=[..._n];return on[be]=!1,on}),(xt=un.current[be])==null||xt.focus(),(Zt=un.current[be])==null||Zt.select()};D.useEffect(()=>{const be=Re=>{ls.current.forEach((ze,dt)=>{var bt;ze&&!ze.contains(Re.target)&&ln.current[dt]&&!((bt=ln.current[dt])!=null&&bt.contains(Re.target))&&Fn(Dt=>{const wt=[...Dt];return wt[dt]&&(wt[dt]=!1),wt})})};return kn.some(Re=>Re)&&document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[kn]);const mn=be=>{const Re=be.target.value;if(vn.current.supplierSearch?(F(Re),vn.current.supplierSearch=!1):F(Re),oe(null),Re.trim()){const ze=Re.toLowerCase(),dt=s.filter(bt=>!bt.isDeleted&&(bt.customAlias&&bt.customAlias.toLowerCase().includes(ze)||bt.name.toLowerCase().includes(ze)||bt.mobileNumber&&bt.mobileNumber.includes(Re))).slice(0,5);re(dt),Te(!0)}else re([]),Te(!1)},Hr=be=>{var Re,ze;if(K&&H.length>0)be.key==="ArrowDown"||be.key==="ArrowUp"||(be.key==="Enter"?(be.preventDefault(),Te(!1),ue.length>0&&ln.current[0]&&((Re=ln.current[0])==null||Re.focus())):be.key==="Escape"&&Te(!1));else if(be.key==="Enter")be.preventDefault(),Te(!1),ue.length>0&&ln.current[0]&&((ze=ln.current[0])==null||ze.focus());else{if(vn.current.supplierSearch)return;if(f&&be.key===" "){be.preventDefault();const dt=rs.current||be.target,bt=dt.value,Dt=dt.selectionStart||0;let wt=Dt-1;for(;wt>=0&&bt[wt]!==" ";)wt--;wt++;const xt=bt.substring(wt,Dt);if(xt.trim()){const Zt=cr(xt),_n=bt.substring(0,wt)+Zt+" "+bt.substring(Dt);F(_n),setTimeout(()=>{const on=wt+Zt.length+1;dt.setSelectionRange(on,on)},0)}else{const Zt=bt.substring(0,Dt)+" "+bt.substring(Dt);F(Zt),setTimeout(()=>{dt.setSelectionRange(Dt+1,Dt+1)},0)}Te(!1)}}},Ds=be=>{if(vn.current.supplierSearch){vn.current.supplierSearch=!1;return}if(f){be.preventDefault();const Re=be.clipboardData.getData("text"),ze=cr(Re),dt=rs.current||be.target,bt=dt.selectionStart||0,Dt=dt.selectionEnd||0,wt=dt.value,xt=wt.substring(0,bt)+ze+wt.substring(Dt);F(xt),setTimeout(()=>{const Zt=bt+ze.length;dt.setSelectionRange(Zt,Zt)},0),Te(!1)}},ea=be=>{var Re,ze;vn.current.supplierSearch=!0,F(be.customAlias||be.name),oe(be.id),re([]),Te(!1),ue.length>0&&ln.current[0]?(Re=ln.current[0])==null||Re.focus():(ze=Un.current)==null||ze.focus()},Yr=be=>{var ze;const Re=s.find(dt=>dt.id===be);Re&&(vn.current.supplierSearch=!0,F(Re.customAlias||Re.name),oe(Re.id),re([]),Te(!1),ue.length>0&&ln.current[0]&&((ze=ln.current[0])==null||ze.focus()))};D.useEffect(()=>{const be=Re=>{Cn.current&&!Cn.current.contains(Re.target)&&rs.current&&!rs.current.contains(Re.target)&&Te(!1)};return K&&document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[K]);const wr=(be,Re,ze)=>dt=>{var Dt,wt,xt,Zt;const bt=`${Re}-${be}`;if(vn.current[bt]){if(dt.key==="Enter"){dt.preventDefault();const on=["productName","quantity","total","unitPrice","unit","description"].filter(jn=>jn==="description"||Rn[jn]||jn==="productName");let Yn=on.indexOf(Re)+1;for(;Yn<on.length&&on[Yn]!=="description"&&!Rn[on[Yn]];)Yn++;if(Yn<on.length){const jn=on[Yn];let yn=null;jn==="quantity"?yn=un.current[be]:jn==="total"?yn=qa.current[be]:jn==="unitPrice"?yn=Mn.current[be]:jn==="unit"?yn=gs.current[be]:jn==="description"&&(yn=ca.current[be]),yn&&(yn.focus(),(yn instanceof HTMLInputElement||yn instanceof HTMLTextAreaElement)&&((Dt=yn.select)==null||Dt.call(yn)))}else be===ue.length-1?cs():(wt=ln.current[be+1])==null||wt.focus()}return}if(f&&dt.key===" "){if(Re==="productName"&&kn[be])return;dt.preventDefault();const _n=ze.current[be]||dt.target,on=_n.value,ts=_n.selectionStart||0;let Yn=ts-1;for(;Yn>=0&&on[Yn]!==" ";)Yn--;Yn++;const jn=on.substring(Yn,ts);if(jn.trim()){const yn=cr(jn),Dr=on.substring(0,Yn)+yn+" "+on.substring(ts);Ta(be,Re,Dr,!0),setTimeout(()=>{const zr=Yn+yn.length+1;_n.setSelectionRange(zr,zr)},0)}else{const yn=on.substring(0,ts)+" "+on.substring(ts);Ta(be,Re,yn,!0),setTimeout(()=>{_n.setSelectionRange(ts+1,ts+1)},0)}}else if(dt.key==="Enter"){dt.preventDefault();const on=["productName","quantity","total","unitPrice","unit","description"].filter(jn=>jn==="description"||Rn[jn]||jn==="productName");let Yn=on.indexOf(Re)+1;for(;Yn<on.length&&on[Yn]!=="description"&&!Rn[on[Yn]];)Yn++;if(Yn<on.length){const jn=on[Yn];let yn=null;jn==="quantity"?yn=un.current[be]:jn==="total"?yn=qa.current[be]:jn==="unitPrice"?yn=Mn.current[be]:jn==="unit"?yn=gs.current[be]:jn==="description"&&(yn=ca.current[be]),yn&&(yn.focus(),(yn instanceof HTMLInputElement||yn instanceof HTMLTextAreaElement)&&((xt=yn.select)==null||xt.call(yn)))}else be===ue.length-1?cs():(Zt=ln.current[be+1])==null||Zt.focus()}},dr=(be,Re)=>ze=>{if(ze.key==="Enter"){ze.preventDefault();const bt=["quantity","total","unitPrice","unit","description"].filter(xt=>xt==="description"||Rn[xt]);let Dt=bt.indexOf(Re);Dt===-1&&Re==="quantity"&&Rn.quantity&&(Dt=0);let wt=Dt+1;if(wt<bt.length){const xt=bt[wt];let Zt=null;xt==="quantity"?Zt=un.current[be]:xt==="total"?Zt=qa.current[be]:xt==="unitPrice"?Zt=Mn.current[be]:xt==="unit"?Zt=gs.current[be]:xt==="description"&&(Zt=ca.current[be]),Zt&&(Zt.focus(),(Zt instanceof HTMLInputElement||Zt instanceof HTMLTextAreaElement)&&Zt.type!=="button"&&Zt.type!=="submit"&&Zt.type!=="reset"&&Zt.type!=="hidden"&&Zt.select())}else if(be===ue.length-1)cs();else{const xt=ln.current[be+1];xt&&(xt.focus(),xt.select())}}},vs=(be,Re,ze)=>dt=>{const bt=`${Re}-${be}`;if(vn.current[bt]){vn.current[bt]=!1;return}if(f){dt.preventDefault();const Dt=dt.clipboardData.getData("text"),wt=cr(Dt),xt=ze.current[be]||dt.target,Zt=xt.selectionStart||0,_n=xt.selectionEnd||0,on=xt.value,ts=on.substring(0,Zt)+wt+on.substring(_n);Ta(be,Re,ts,!0),setTimeout(()=>{const Yn=Zt+wt.length;xt.setSelectionRange(Yn,Yn)},0)}},Ia=be=>{if(!vn.current.notes&&f&&be.key===" "){be.preventDefault();const Re=xn.current||be.target,ze=Re.value,dt=Re.selectionStart||0;let bt=dt-1;for(;bt>=0&&ze[bt]!==" ";)bt--;bt++;const Dt=ze.substring(bt,dt);if(Dt.trim()){const wt=cr(Dt),xt=ze.substring(0,bt)+wt+" "+ze.substring(dt);Ne(xt),setTimeout(()=>{const Zt=bt+wt.length+1;Re.setSelectionRange(Zt,Zt)},0)}else{const wt=ze.substring(0,dt)+" "+ze.substring(dt);Ne(wt),setTimeout(()=>{Re.setSelectionRange(dt+1,dt+1)},0)}}},li=be=>{if(vn.current.notes){vn.current.notes=!1;return}if(f){be.preventDefault();const Re=be.clipboardData.getData("text"),ze=cr(Re),dt=xn.current||be.target,bt=dt.selectionStart||0,Dt=dt.selectionEnd||0,wt=dt.value,xt=wt.substring(0,bt)+ze+wt.substring(Dt);Ne(xt),setTimeout(()=>{const Zt=bt+ze.length;dt.setSelectionRange(Zt,Zt)},0)}},cs=()=>{const be={...Hd,selectedPriceType:"custom",unit:""},Re=Date.now().toString();ae(ze=>[...ze,{...be,id:Re}]),Ln(ze=>[...ze,[]]),Fn(ze=>[...ze,!1]),requestAnimationFrame(()=>{var dt;const ze=ue.length;ln.current[ze]&&((dt=ln.current[ze])==null||dt.focus())})},qr=be=>{const Re=ue.filter((ze,dt)=>dt!==be);ae(Re),Ln(ze=>ze.filter((dt,bt)=>bt!==be)),Fn(ze=>ze.filter((dt,bt)=>bt!==be))},_i=async()=>{let be=null;j.trim()||(b(p.INVOICE_NUMBER_LABEL.replace("","")+" "+p.FIELD_IS_REQUIRED.toLowerCase(),"error"),!be&&Ws.current&&(be=Ws.current)),!J&&!xe.trim()&&(b(p.INVOICE_CUSTOMER_REQUIRED_ERROR.replace("",""),"error"),!be&&rs.current&&(be=rs.current)),U||(b(p.INVOICE_DATE_REQUIRED_ERROR.replace("",""),"error"),!be&&Un.current&&(be=Un.current));const Re=ue.filter(Dt=>{const wt=Dt.productName.trim()!=="",xt=(Dt.quantity||0)>0,Zt=(Dt.unitPrice||0)>=0;return wt&&xt&&Zt});if(Re.length===0&&(b(p.INVOICE_NO_ITEMS_ERROR.replace("",""),"error"),!be&&ln.current[0]&&(be=ln.current[0])),(be===Ws.current&&rs.current||be===Un.current&&rs.current)&&(be=rs.current),be){be.focus(),typeof be.select=="function"&&be.select();return}let ze=J;if(!ze&&xe.trim()){const Dt=s.find(wt=>(wt.customAlias||wt.name).toLowerCase()===xe.trim().toLowerCase());if(Dt)ze=Dt.id;else try{const wt=await d({name:xe.trim()});if(wt)ze=wt.id,b(p.PERSON_ADDED_IMPLICITLY_INVOICE.replace("{personName}",xe.trim()).replace("{personType}",p.PERSON_TYPE_SUPPLIER),"success");else throw new Error("New person creation returned null")}catch(wt){console.error("Error adding person implicitly:",wt),b(p.INVOICE_CUSTOMER_CREATION_ERROR.replace("",""),"error");return}}if(!ze){b(p.INVOICE_CUSTOMER_REQUIRED_ERROR.replace("",""),"error");return}const dt={invoiceNumber:j,invoiceType:Sa.PURCHASE,invoiceDate:U,dueDate:Z||void 0,personId:ze,companyProfileId:G,items:Re.map(({selectedPriceType:Dt,originalProductId:wt,availablePrices:xt,...Zt})=>({...Zt,originalProductId:wt||void 0})),subtotal:Be,discountType:V||void 0,discountValue:M||void 0,discountAmount:Lt||void 0,taxType:Y||void 0,taxValue:fe||void 0,taxAmount:yt||void 0,totalAmount:Kt,notes:de.trim()||void 0,paymentStatus:Ue};if((Ue===Ht.PAID||Ue===Ht.PARTIALLY_PAID)&&!C){const Dt=parseFloat(st);if(isNaN(Dt)||Dt<=0){if(Ue===Ht.PAID&&Kt>0)dt.initialPayment={paymentDate:new Date().toISOString(),amount:Kt,paymentMethod:Pt,notes:Ft.trim()||p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE.replace("","")};else if(Ue===Ht.PARTIALLY_PAID){b(p.PAYMENT_AMOUNT_INVALID_FOR_PARTIAL,"error");return}}else Dt>=Kt&&Ue===Ht.PARTIALLY_PAID&&b(p.PARTIAL_PAYMENT_CANT_BE_FULL,"warning"),dt.initialPayment={paymentDate:new Date().toISOString(),amount:Dt,paymentMethod:Pt,notes:Ft.trim()||void 0}}if(await t(dt,_==null?void 0:_.id))if(b(C?p.INVOICE_UPDATED_SUCCESS.replace("",""):p.INVOICE_CREATED_SUCCESS.replace("",""),"success"),C)e();else{if(v){const Dt={};if(Je){const wt=new Date;wt.setHours(0,0,0,0);const xt=new Date(U);xt.setHours(0,0,0,0),Dt.defaultPurchaseBillDateOffset=Math.round((xt.getTime()-wt.getTime())/(1e3*60*60*24))}if(Qe&&Z){const wt=new Date(U);wt.setHours(0,0,0,0);const xt=new Date(Z);xt.setHours(0,0,0,0),Dt.defaultPurchaseDueDateOffset=Math.round((xt.getTime()-wt.getTime())/(1e3*60*60*24))}ge&&(Dt.defaultPurchaseCompanyProfileId=G),ut&&(Dt.defaultPurchaseDiscountType=V,Dt.defaultPurchaseDiscountValue=M),nt&&(Dt.defaultPurchaseTaxType=Y,Dt.defaultPurchaseTaxValue=fe),Object.keys(Dt).length>0&&await T(Dt)}tr(),requestAnimationFrame(()=>{var Dt;ln.current[0]&&((Dt=ln.current[0])==null||Dt.focus())})}},bi=C?p.EDIT_INVOICE_MODAL_TITLE.replace("",""):p.CREATE_PURCHASE_BILL_MODAL_TITLE,Er=p.SUPPLIER_LABEL,ci=p.SUPPLIER_SEARCH_PLACEHOLDER,Ti=p.SELECT_SUPPLIER_BTN_LABEL,za=C?p.SAVE_INVOICE_BTN_LABEL.replace("",""):p.CREATE_INVOICE_BTN_LABEL.replace("",""),ui=!C&&(Ue===Ht.PARTIALLY_PAID||Ue===Ht.PAID),Ir=!C&&Ue===Ht.PAID,Da=Ue===Ht.PENDING||Ue===Ht.PARTIALLY_PAID||Ue===Ht.OVERDUE,Ni=l.jsx("button",{onClick:Bs,className:"text-slate-500 hover:text-teal-600 p-1.5 rounded-full hover:bg-teal-50 transition-colors",title:R?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,"aria-label":R?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,children:R?l.jsx(a5,{className:"w-5 h-5"}):l.jsx(s5,{className:"w-5 h-5"})});return l.jsx(Ya,{isOpen:n,onClose:e,title:bi,size:R?"screen":"3xl",headerActions:Ni,children:l.jsxs("div",{className:`flex flex-col ${R?"h-full":""}`,children:[l.jsxs("div",{className:`p-1 ${R?"flex-grow overflow-y-auto custom-scrollbar-modal pr-2 pb-20":"space-y-4 pb-20"}`,children:[l.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"purchaseCompanyProfile",className:"block text-xs font-medium text-slate-600 mb-0.5",children:" ( )"}),l.jsxs("div",{className:"flex items-end",children:[l.jsxs("select",{id:"purchaseCompanyProfile",value:G||"",onChange:be=>he(be.target.value||void 0),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",children:[l.jsx("option",{value:"",children:"--     --"}),i.filter(be=>!be.isDeleted).map(be=>l.jsx("option",{value:be.id,children:be.companyName},be.id))]}),!C&&l.jsx("button",{type:"button",onClick:ka,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${ge?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:ge?p.UNPIN_COMPANY_PROFILE_DEFAULT:p.PIN_COMPANY_PROFILE_DEFAULT,children:l.jsx(Di,{isFilled:ge})})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"billNumber",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_NUMBER_LABEL.replace("","")}),l.jsx("input",{ref:Ws,type:"text",id:"billNumber",value:j,onChange:be=>O(be.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",onKeyDown:be=>{var Re;be.key==="Enter"&&(be.preventDefault(),(Re=Un.current)==null||Re.focus())}})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"billDate",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_DATE_LABEL.replace("/","")}),l.jsxs("div",{className:"flex items-end",children:[l.jsx("input",{ref:Un,type:"date",id:"billDate",value:U,onChange:be=>se(be.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",required:!0,onKeyDown:be=>{var Re;be.key==="Enter"&&(be.preventDefault(),Da&&js.current?js.current.focus():ue.length>0&&ln.current[0]&&((Re=ln.current[0])==null||Re.focus()))}}),!C&&l.jsx("button",{type:"button",onClick:wa,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Je?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Je?p.UNPIN_INVOICE_DATE_DEFAULT:p.PIN_INVOICE_DATE_DEFAULT,children:l.jsx(Di,{isFilled:Je})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("label",{htmlFor:"supplierSearch",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[Er," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{ref:rs,type:"text",id:"supplierSearch",value:xe,onChange:mn,onKeyDown:Hr,onPaste:Ds,onFocus:()=>xe.trim()&&Te(!0),placeholder:ci,className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",autoComplete:"off"}),l.jsx("button",{type:"button",onClick:()=>c(Yr),className:"p-2 bg-teal-500 hover:bg-teal-600 text-white rounded-md shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:Ti,children:l.jsx(kl,{className:"w-4 h-4"})})]}),K&&l.jsx("ul",{ref:Cn,className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto custom-scrollbar-modal",children:H.length>0?H.map(be=>l.jsxs("li",{onClick:()=>ea(be),className:"px-3 py-2 hover:bg-teal-50 cursor-pointer text-xs",children:[be.customAlias||be.name," ",be.mobileNumber&&`(${be.mobileNumber})`]},be.id)):xe.trim()&&l.jsx("li",{className:"px-3 py-2 text-xs text-slate-500",children:p.NO_SUPPLIER_SUGGESTIONS})})]})]}),l.jsxs("div",{className:"relative z-10",children:[" ",l.jsx("section",{className:`${R?"":"border-t pt-3 mt-3"}`,children:l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:`text-md font-semibold text-slate-700 ${Qt()}`,children:p.INVOICE_ITEMS_LABEL}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{type:"button",onClick:()=>bs("decrease"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:hs==="xs",children:l.jsx(Yh,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>En("sm"),title:" ",className:"p-1 rounded hover:bg-slate-200 text-slate-600",children:l.jsx(qh,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>bs("increase"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:hs==="2xl",children:l.jsx(xc,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:$n,type:"button",onClick:()=>Ts(be=>!be),className:"text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:" ","aria-haspopup":"true","aria-expanded":Ls,children:[l.jsx(vp,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:""})]}),Ls&&l.jsxs("div",{ref:La,className:"absolute right-0 mt-1 w-60 bg-white border border-slate-300 rounded-md shadow-lg z-30 py-1",role:"menu",children:[l.jsx("div",{className:"px-3 pt-2 pb-1 border-b",children:l.jsx("p",{className:"text-xs font-medium text-slate-500",children:" /"})}),R0.map(({key:be,label:Re})=>l.jsxs("label",{className:"flex items-center space-x-2 px-3 py-1.5 hover:bg-slate-50 cursor-pointer text-xs",children:[l.jsx("input",{type:"checkbox",checked:Rn[be],onChange:()=>Ca(be),className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-400 rounded focus:ring-teal-500"}),l.jsx("span",{className:"text-slate-700",children:Re})]},be)),l.jsx("div",{className:"px-3 pt-2 pb-1 border-t mt-1",children:l.jsx("p",{className:"text-xs font-medium text-slate-500",children:" "})}),l.jsxs("div",{className:"flex justify-around items-center px-3 py-1.5",children:[l.jsx("button",{onClick:()=>En("xs"),title:"",className:`p-1 rounded hover:bg-slate-100 ${hs==="xs"?"text-teal-600":"text-slate-500"}`,children:l.jsx(Yh,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>En("sm"),title:"",className:`p-1 rounded hover:bg-slate-100 ${hs==="sm"?"text-teal-600":"text-slate-500"}`,children:l.jsx(qh,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>En("base"),title:"",className:`p-1 rounded hover:bg-slate-100 ${hs==="base"?"text-teal-600":"text-slate-500"}`,children:l.jsx(xc,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>En("lg"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${hs==="lg"?"text-teal-600":"text-slate-500"}`,children:l.jsx(xc,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>En("xl"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${hs==="xl"?"text-teal-600":"text-slate-500"}`,children:l.jsx(xc,{className:"w-6 h-6"})})]})]})]}),l.jsxs("button",{type:"button",onClick:()=>{e(),h()},className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,children:[l.jsx(Wd,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:p.MANAGE_PRODUCTS_STOCK_NAV_BTN})]})]})]})}),l.jsxs("div",{className:`grid gap-x-2 items-end mb-1.5 print:hidden font-medium text-slate-600 ${Qt()}`,style:ua,children:[R0.map(be=>l.jsx("div",{className:`${Rn[be.key]?"":"hidden"} ${be.headerTextAlign||"text-left"}`,children:l.jsx("label",{children:be.label})},be.key)),l.jsx("div",{className:"text-left",children:l.jsx("label",{children:p.ITEM_DESCRIPTION_LABEL})}),l.jsx("div",{className:"text-center",children:l.jsx("label",{children:""})})]}),l.jsx("div",{className:`space-y-3 mb-3 ${R?"pr-1":"max-h-[65vh] overflow-y-auto custom-scrollbar-modal pr-1"}`,children:ue.map((be,Re)=>l.jsxs("div",{className:"grid gap-x-2 gap-y-1 items-start py-2 border-b border-slate-100 group",style:ua,children:[l.jsxs("div",{className:`relative ${Rn.productName?"":"hidden"}`,children:[l.jsx("input",{ref:ze=>{ln.current[Re]=ze},type:"text",id:`purchase-item-name-${Re}`,value:be.productName,onChange:ze=>sa(Re,ze.target.value),onKeyDown:wr(Re,"productName",ln),onPaste:vs(Re,"productName",ln),onFocus:()=>{if(be.productName.trim()){const ze=r.filter(dt=>!dt.isDeleted&&dt.name.toLowerCase().includes(be.productName.toLowerCase())).slice(0,5);Ln(dt=>{const bt=[...dt];return bt[Re]=ze,bt})}else Ln(ze=>{const dt=[...ze];return dt[Re]=r.filter(bt=>!bt.isDeleted).slice(0,5),dt});Fn(ze=>{const dt=[...ze];return dt[Re]=!0,dt})},className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,placeholder:p.PRODUCT_NAME_PLACEHOLDER,autoComplete:"off"}),kn[Re]&&Xt[Re]&&Xt[Re].length>0&&l.jsx("ul",{ref:ze=>{ls.current[Re]=ze},className:"absolute z-30 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto custom-scrollbar-modal",children:Xt[Re].map(ze=>l.jsx("li",{onClick:()=>Gr(Re,ze),onMouseDown:dt=>dt.preventDefault(),className:`px-3 py-2 hover:bg-teal-50 cursor-pointer ${Qt()}`,children:ze.name},ze.id))})]}),l.jsx("div",{className:`${Rn.quantity?"":"hidden"}`,children:l.jsx("input",{ref:ze=>{un.current[Re]=ze},type:"number",id:`purchase-item-quantity-${Re}`,value:be.quantity,onChange:ze=>Ta(Re,"quantity",ze.target.value),onKeyDown:dr(Re,"quantity"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-20 text-right ${Qt()}`,min:"0",step:"any"})}),l.jsx("div",{className:`${Rn.total?"":"hidden"}`,children:l.jsx("input",{ref:ze=>{qa.current[Re]=ze},type:"number",value:be.total,onChange:ze=>Ta(Re,"total",ze.target.value),onKeyDown:dr(Re,"total"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md text-slate-700 font-medium text-right focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,min:"0",step:"any"})}),l.jsx("div",{className:`${Rn.unitPrice?"":"hidden"}`,children:l.jsx("input",{ref:ze=>{Mn.current[Re]=ze},type:"number",id:`purchase-item-unitprice-${Re}`,value:be.unitPrice,onChange:ze=>Ta(Re,"unitPrice",ze.target.value),onKeyDown:dr(Re,"unitPrice"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-24 text-right ${Qt()}`,min:"0",step:"any"})}),l.jsxs("div",{className:`${Rn.unit?"":"hidden"}`,children:[l.jsx("input",{ref:ze=>{gs.current[Re]=ze},type:"text",id:`purchase-item-unit-${Re}`,value:be.unit||"",onChange:ze=>Ta(Re,"unit",ze.target.value,vn.current[`unit-${Re}`]),onKeyDown:wr(Re,"unit",gs),onPaste:vs(Re,"unit",gs),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,placeholder:": ",list:`purchase-common-units-datalist-item-${Re}`}),l.jsx("datalist",{id:`purchase-common-units-datalist-item-${Re}`,children:Wi.map(ze=>l.jsx("option",{value:ze},ze))})]}),l.jsxs("div",{className:"col-span-1",children:[" ",l.jsx("textarea",{ref:ze=>{ca.current[Re]=ze},id:`purchase-item-desc-${Re}`,value:be.description,onChange:ze=>Ta(Re,"description",ze.target.value,vn.current[`description-${Re}`]),onKeyDown:wr(Re,"description",ca),onPaste:vs(Re,"description",ca),placeholder:p.ITEM_DESCRIPTION_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${Qt()}`,rows:1})]}),l.jsx("div",{className:"flex items-center justify-center h-full",children:ue.length>1&&l.jsx("button",{type:"button",onClick:()=>qr(Re),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50",title:p.REMOVE_ITEM_BTN_LABEL,children:l.jsx(xr,{className:"w-4 h-4"})})})]},be.id))}),l.jsxs("button",{type:"button",onClick:cs,className:`w-full text-teal-600 hover:text-teal-700 font-medium py-2 px-3 border-2 border-dashed border-teal-300 hover:border-teal-400 rounded-md flex items-center justify-center space-x-1.5 transition-colors ${Qt()}`,children:[l.jsx(Ri,{className:"w-4 h-4"}),l.jsx("span",{children:p.ADD_ITEM_BTN_LABEL})]})]})," ",l.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${Qt()} ${R?"":"mt-4 pt-3 border-t"}`,children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"purchaseDiscountType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.DISCOUNT_TYPE_LABEL}),l.jsxs("select",{id:"purchaseDiscountType",value:V||"",onChange:be=>ce(be.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:[l.jsxs("option",{value:"",children:["-- ",p.DISCOUNT_LABEL,"  --"]}),l.jsx("option",{value:"percentage",children:p.DISCOUNT_PERCENTAGE_LABEL}),l.jsx("option",{value:"fixed",children:p.DISCOUNT_FIXED_AMOUNT_LABEL})]})]}),!C&&l.jsx("button",{type:"button",onClick:Wn,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${ut?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:ut?p.UNPIN_DISCOUNT_TYPE_DEFAULT:p.PIN_DISCOUNT_TYPE_DEFAULT,children:l.jsx(Di,{isFilled:ut})})]}),V&&l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"purchaseDiscountValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:[p.DISCOUNT_LABEL," ",V==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),l.jsx("input",{type:"number",id:"purchaseDiscountValue",value:M,onChange:be=>k(parseFloat(be.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,min:"0",step:"any"})]}),l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"purchaseTaxType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.TAX_TYPE_LABEL}),l.jsxs("select",{id:"purchaseTaxType",value:Y||"",onChange:be=>Q(be.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:[l.jsxs("option",{value:"",children:["-- ",p.TAX_LABEL,"  --"]}),l.jsx("option",{value:"percentage",children:p.TAX_PERCENTAGE_LABEL}),l.jsx("option",{value:"fixed",children:p.TAX_FIXED_AMOUNT_LABEL})]})]}),!C&&l.jsx("button",{type:"button",onClick:Ns,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${nt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:nt?p.UNPIN_TAX_TYPE_DEFAULT:p.PIN_TAX_TYPE_DEFAULT,children:l.jsx(Di,{isFilled:nt})})]}),Y&&l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"purchaseTaxValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:[p.TAX_LABEL," ",Y==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),l.jsx("input",{type:"number",id:"purchaseTaxValue",value:fe,onChange:be=>ve(parseFloat(be.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,min:"0",step:"any"})]})]}),l.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border border-slate-200 space-y-1 text-right",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-slate-600",children:[p.SUBTOTAL_LABEL,":"]})," ",l.jsxs("span",{className:"font-medium",children:[p.BDT_SYMBOL," ",Be.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),Lt>0&&l.jsxs("div",{className:"flex justify-between text-red-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.DISCOUNT_LABEL," (",V==="percentage"?`${M}%`:p.BDT_SYMBOL+M,"):"]})," ",l.jsxs("span",{className:"font-medium",children:["- ",p.BDT_SYMBOL," ",Lt.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),yt>0&&l.jsxs("div",{className:"flex justify-between text-green-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.TAX_LABEL," (",Y==="percentage"?`${fe}%`:p.BDT_SYMBOL+fe,"):"]})," ",l.jsxs("span",{className:"font-medium",children:["+ ",p.BDT_SYMBOL," ",yt.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-1 mt-1",children:[l.jsxs("span",{className:"text-slate-700",children:[p.GRAND_TOTAL_LABEL,":"]})," ",l.jsxs("span",{children:[p.BDT_SYMBOL," ",Kt.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]})]})]}),l.jsxs("section",{className:"mt-4",children:[l.jsx("label",{htmlFor:"purchaseBillNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.NOTES_TERMS_LABEL}),l.jsx("textarea",{ref:xn,id:"purchaseBillNotes",value:de,onChange:be=>{vn.current.notes?(Ne(be.target.value),vn.current.notes=!1):Ne(be.target.value)},onKeyDown:Ia,onPaste:li,rows:R?3:2,placeholder:p.NOTES_TERMS_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${Qt()}`})]}),l.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 items-end mt-4 pt-3 border-t ${Qt()}`,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"purchasePaymentStatus",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.PAYMENT_STATUS_LABEL}),l.jsx("div",{className:"flex items-end",children:l.jsxs("select",{id:"purchasePaymentStatus",value:Ue,onChange:be=>we(be.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:[l.jsx("option",{value:Ht.PENDING,children:p.PAYMENT_STATUS_PENDING}),l.jsx("option",{value:Ht.PARTIALLY_PAID,children:p.PAYMENT_STATUS_PARTIALLY_PAID}),l.jsx("option",{value:Ht.PAID,children:p.PAYMENT_STATUS_PAID}),l.jsx("option",{value:Ht.OVERDUE,children:p.PAYMENT_STATUS_OVERDUE}),l.jsx("option",{value:Ht.CANCELLED,children:p.PAYMENT_STATUS_CANCELLED})]})})]}),Da&&l.jsxs("div",{className:"flex items-end",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"purchaseDueDate",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.DUE_DATE_INVOICE_LABEL}),l.jsx("input",{ref:js,type:"date",id:"purchaseDueDate",value:Z,onChange:be=>ee(be.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,onKeyDown:be=>{var Re;be.key==="Enter"&&(be.preventDefault(),ue.length>0&&ln.current[0]&&((Re=ln.current[0])==null||Re.focus()))}})]}),!C&&l.jsx("button",{type:"button",onClick:Is,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Qe?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Qe?p.UNPIN_DUE_DATE_DEFAULT:p.PIN_DUE_DATE_DEFAULT,children:l.jsx(Di,{isFilled:Qe})})]})]}),ui&&l.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 border-t pt-3 mt-2 ${Qt()}`,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"purchaseInitialPaidAmount",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.INITIAL_PAID_AMOUNT_LABEL}),l.jsx("input",{type:"number",id:"purchaseInitialPaidAmount",value:st,onChange:be=>Nt(be.target.value),className:`w-full px-3 py-1.5 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()} ${Ir?"border-slate-200 bg-slate-100 text-slate-500 cursor-not-allowed":"border-slate-300 bg-white"}`,min:"0.01",step:"0.01",max:Ue===Ht.PARTIALLY_PAID&&Kt>0?Kt-.01:void 0,readOnly:Ir})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"purchaseInitialPaymentMethod",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.PAYMENT_METHOD_LABEL}),l.jsx("select",{id:"purchaseInitialPaymentMethod",value:Pt,onChange:be=>Rt(be.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:["Cash","Bank Transfer","bKash","Nagad","Rocket","Card","Cheque","Other"].map(be=>l.jsx("option",{value:be,children:p[`PAYMENT_METHOD_${be.toUpperCase().replace(" ","_")}`]||be},be))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"purchaseInitialPaymentNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.PAYMENT_NOTES_LABEL}),l.jsx("input",{type:"text",id:"purchaseInitialPaymentNotes",value:Ft,onChange:be=>Yt(be.target.value),placeholder:p.PAYMENT_NOTES_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`})]})]})]}),l.jsxs("div",{className:`pt-3 border-t bg-white rounded-b-xl
                         ${R?"sticky bottom-0 left-0 right-0 z-10 px-4 pb-4 sm:px-6 sm:pb-5":"px-1"}
                         flex justify-end space-x-3`,children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),l.jsx("button",{type:"button",onClick:_i,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:za})]})]})})},F3=({invoice:n,customerName:e,onViewInvoice:t,onEditInvoice:s,onDeleteInvoice:r})=>{var v;const i=T=>{try{return new Date(T).toLocaleDateString("bn-BD",{day:"2-digit",month:"long",year:"numeric"})}catch{return T}},c=T=>{let C="bg-slate-200",L="text-slate-700",R;switch(T){case Ht.PENDING:C="bg-yellow-100",L="text-yellow-700",R=p.PAYMENT_STATUS_PENDING;break;case Ht.PARTIALLY_PAID:C="bg-blue-100",L="text-blue-700",R=p.PAYMENT_STATUS_PARTIALLY_PAID;break;case Ht.PAID:C="bg-green-100",L="text-green-700",R=p.PAYMENT_STATUS_PAID;break;case Ht.OVERDUE:C="bg-red-100",L="text-red-700",R=p.PAYMENT_STATUS_OVERDUE;break;case Ht.CANCELLED:C="bg-slate-200",L="text-slate-600 line-through",R=p.PAYMENT_STATUS_CANCELLED;break;default:R=T}return l.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C} ${L}`,children:R})},d=n.totalAmount||0,f=((v=n.paymentsReceived)==null?void 0:v.reduce((T,C)=>T+(C.amount||0),0))||0,h=d-f,_=n.invoiceType===Sa.SALES?p.INVOICE_TYPE_SALES_SHORT:p.INVOICE_TYPE_PURCHASE_SHORT,b=n.invoiceType===Sa.SALES?"text-purple-600 bg-purple-50":"text-indigo-600 bg-indigo-50";return l.jsxs("li",{className:`bg-white p-3 sm:p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-150 border-l-4 ${n.isDeleted?"border-slate-400 opacity-70":n.invoiceType===Sa.SALES?"border-purple-500":"border-indigo-500"}`,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[l.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("h3",{className:`text-sm sm:text-base font-semibold ${n.isDeleted?"text-slate-500 line-through":n.invoiceType===Sa.SALES?"text-purple-700":"text-indigo-700"}`,children:n.invoiceNumber}),l.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded-full ${b}`,children:_})]}),l.jsxs("span",{className:`text-xs ${n.isDeleted?"text-slate-400":"text-slate-500"} sm:border-l sm:pl-2 ${n.isDeleted,"sm:border-slate-300"}`,children:[n.invoiceType===Sa.SALES?p.BILLED_TO_LABEL:p.SUPPLIER_LABEL,": ",e]})]}),l.jsxs("p",{className:`text-xs ${n.isDeleted?"text-slate-400":"text-slate-500"} mt-0.5`,children:[p.INVOICE_DATE_LABEL,": ",i(n.invoiceDate),n.dueDate&&l.jsxs("span",{className:"ml-2",children:["| ",p.DUE_DATE_INVOICE_LABEL,": ",i(n.dueDate)]})]})]}),l.jsxs("div",{className:"flex flex-col items-start sm:items-end space-y-1 sm:space-y-0 sm:min-w-[160px]",children:[l.jsxs("p",{className:`text-sm sm:text-base font-semibold ${n.isDeleted?"text-slate-400 line-through":"text-slate-800"}`,children:[p.BDT_SYMBOL," ",(n.totalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]}),c(n.paymentStatus)]})]}),(n.paymentStatus===Ht.PENDING||n.paymentStatus===Ht.PARTIALLY_PAID||n.paymentStatus===Ht.OVERDUE)&&h>.009&&!n.isDeleted&&l.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[p.REMAINING_AMOUNT_LABEL,": ",p.BDT_SYMBOL," ",(h||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.isDeleted&&n.deletedAt&&l.jsxs("p",{className:"text-xs text-orange-600 font-medium mt-1",children:[p.DELETED_ON," ",i(n.deletedAt)," (",p.STATUS_ARCHIVED,")"]}),l.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100 flex justify-end space-x-1.5",children:!n.isDeleted&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>t(n),className:"p-1.5 text-xs text-sky-600 hover:text-sky-700 bg-sky-50 hover:bg-sky-100 rounded-md flex items-center space-x-1",title:p.INVOICE_VIEW_DETAILS,children:[l.jsx(em,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:""})]}),s&&n.invoiceType===Sa.SALES&&l.jsxs("button",{onClick:()=>s(n),className:"p-1.5 text-xs text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-md flex items-center space-x-1",title:p.EDIT_INVOICE_MODAL_TITLE,children:[l.jsx(hl,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:""})]})]})})]})},dh=10,V3=({isOpen:n,onClose:e,invoices:t,persons:s,onViewInvoice:r,onEditInvoice:i,onDeleteInvoice:c,onCreateNewInvoice:d,onOpenEditInvoiceModal:f})=>{const[h,_]=D.useState(""),[b,v]=D.useState("all"),[T,C]=D.useState("all"),[L,R]=D.useState(1),I=H=>{const re=s.find(K=>K.id===H);return re?re.customAlias||re.name:p.UNKNOWN_PERSON},j=D.useMemo(()=>{const H=h.toLowerCase();return t.filter(re=>{if(re.isDeleted||!(b==="all"||re.invoiceType===b)||!(T==="all"||re.paymentStatus===T))return!1;const G=I(re.personId).toLowerCase(),he=re.invoiceNumber.toLowerCase().includes(H),ue=G.includes(H);return he||ue}).sort((re,K)=>new Date(K.createdAt).getTime()-new Date(re.createdAt).getTime())},[t,s,h,b,T]);D.useEffect(()=>{R(1)},[h,b,T]);const O=j.length,U=Math.max(1,Math.ceil(O/dh));D.useEffect(()=>{L>U&&R(U)},[L,U]);const se=D.useMemo(()=>{const H=(L-1)*dh,re=H+dh;return j.slice(H,re)},[j,L]),Z=()=>{R(H=>Math.max(1,H-1))},ee=()=>{R(H=>Math.min(U,H+1))},J=H=>{v(H)},oe=H=>{C(H)},xe=H=>`px-3 py-1.5 text-xs sm:text-sm rounded-md transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-opacity-50 whitespace-nowrap ${H?"bg-teal-600 text-white focus:ring-teal-400":"bg-slate-200 text-slate-700 hover:bg-slate-300 focus:ring-slate-400"}`,F={[Ht.PENDING]:p.PAYMENT_STATUS_PENDING,[Ht.PARTIALLY_PAID]:p.PAYMENT_STATUS_PARTIALLY_PAID,[Ht.PAID]:p.PAYMENT_STATUS_PAID,[Ht.OVERDUE]:p.PAYMENT_STATUS_OVERDUE,[Ht.CANCELLED]:p.PAYMENT_STATUS_CANCELLED};return n?l.jsx(Ya,{isOpen:n,onClose:e,title:p.INVOICE_LIST_MODAL_TITLE,size:"3xl",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"mb-4 space-y-3",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[l.jsx("input",{type:"text",placeholder:p.SEARCH_INVOICE_PLACEHOLDER,value:h,onChange:H=>_(H.target.value),className:"w-full sm:flex-grow px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500","aria-label":" "}),l.jsxs("button",{onClick:d,className:"flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-md transition duration-150 w-full sm:w-auto flex-shrink-0",children:[l.jsx(Ri,{className:"w-5 h-5"}),l.jsx("span",{children:p.CREATE_SALES_INVOICE_NAV_BTN})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[l.jsx("button",{onClick:()=>J("all"),className:xe(b==="all"),children:p.FILTER_ALL_INVOICES}),l.jsx("button",{onClick:()=>J(Sa.SALES),className:xe(b===Sa.SALES),children:p.FILTER_SALES_INVOICES}),l.jsx("button",{onClick:()=>J(Sa.PURCHASE),className:xe(b===Sa.PURCHASE),children:p.FILTER_PURCHASE_BILLS})]}),l.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[l.jsxs("span",{className:"text-xs text-slate-500 font-medium mr-1 whitespace-nowrap",children:[p.PAYMENT_STATUS_LABEL,":"]}),l.jsx("button",{onClick:()=>oe("all"),className:xe(T==="all"),children:p.FILTER_ALL_STATUSES}),Object.values(Ht).map(H=>l.jsx("button",{onClick:()=>oe(H),className:xe(T===H),children:F[H]},H))]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:se.length===0?l.jsx("p",{className:"text-slate-500 text-center py-10",children:h||b!=="all"||T!=="all"?p.NO_ITEMS_FOR_FILTER:p.NO_INVOICES_FOUND}):l.jsx("ul",{className:"space-y-3",children:se.map(H=>l.jsx(F3,{invoice:H,customerName:I(H.personId),onViewInvoice:r,onEditInvoice:f,onDeleteInvoice:c},H.id))})}),O>dh&&l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 flex flex-col sm:flex-row justify-between items-center text-sm text-slate-600",children:[l.jsxs("p",{className:"mb-2 sm:mb-0",children:[p.PAGE_LABEL," ",L.toLocaleString("bn-BD")," ",p.OF_LABEL," ",U.toLocaleString("bn-BD")," | ",p.TOTAL_ITEMS_LABEL,": ",O.toLocaleString("bn-BD")]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:Z,disabled:L===1,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":p.PREVIOUS_PAGE_BTN,children:[l.jsx(M2,{className:"w-4 h-4 mr-1"}),p.PREVIOUS_PAGE_BTN]}),l.jsxs("button",{onClick:ee,disabled:L===U,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":p.NEXT_PAGE_BTN,children:[p.NEXT_PAGE_BTN,l.jsx(k2,{className:"w-4 h-4 ml-1"})]})]})]})]})}):null},G3=({className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0c1.281.21 2.072 1.13 2.072 2.182V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5v-.14c0-1.052.79-1.972 2.072-2.182m11.318 0-1.895-1.895c-.342-.342-.342-.895 0-1.238l.444-.443c.34-.34.896-.34 1.237 0l1.896 1.896a.608.608 0 0 1 0 .858l-.443.443c-.343.343-.896.343-1.238 0Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})]}),H3=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),Y3=({isOpen:n,onClose:e,invoice:t,persons:s,companyProfiles:r,onRecordPayment:i,currentUserName:c})=>{const[d,f]=D.useState(!1),[h,_]=D.useState(""),[b,v]=D.useState(new Date().toISOString().split("T")[0]),[T,C]=D.useState("Cash"),[L,R]=D.useState(""),[I,j]=D.useState(!1);D.useEffect(()=>{n&&t&&(f(!1),_(""),v(new Date().toISOString().split("T")[0]),C("Cash"),R(""),j(!1))},[n,t]);const O=D.useMemo(()=>t?s.find(we=>we.id===t.personId):null,[t,s]),U=D.useMemo(()=>{if(!t||!t.companyProfileId){const we=r.find(Je=>Je.isDefault);return we||(r.length>0?r[0]:null)}return r.find(we=>we.id===t.companyProfileId)},[t,r]),se=D.useMemo(()=>!t||!t.paymentsReceived?0:t.paymentsReceived.reduce((we,Je)=>we+(Je.amount||0),0),[t]),Z=t?(t.totalAmount||0)-se:0,ee=t&&(t.paymentStatus===Ht.PENDING||t.paymentStatus===Ht.PARTIALLY_PAID||t.paymentStatus===Ht.OVERDUE)&&Z>.009;if(!n||!t)return null;const J=we=>we?new Date(we).toLocaleDateString("bn-BD",{day:"2-digit",month:"long",year:"numeric"}):"N/A",oe=we=>we?new Date(we).toLocaleString("bn-BD",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",xe=["Cash","Bank Transfer","bKash","Nagad","Rocket","Card","Cheque","Other"],F={Cash:p.PAYMENT_METHOD_CASH,"Bank Transfer":p.PAYMENT_METHOD_BANK_TRANSFER,bKash:p.PAYMENT_METHOD_BKASH,Nagad:p.PAYMENT_METHOD_NAGAD,Rocket:p.PAYMENT_METHOD_ROCKET,Card:p.PAYMENT_METHOD_CARD,Cheque:p.PAYMENT_METHOD_CHEQUE,Other:p.PAYMENT_METHOD_OTHER},re=(we=>{switch(we){case Ht.PENDING:return{text:p.PAYMENT_STATUS_PENDING,color:"text-yellow-600",bgColor:"bg-yellow-100",printClass:"status-pending",tooltip:p.INVOICE_STATUS_PENDING_TOOLTIP};case Ht.PARTIALLY_PAID:return{text:p.PAYMENT_STATUS_PARTIALLY_PAID,color:"text-blue-600",bgColor:"bg-blue-100",printClass:"status-partially-paid",tooltip:p.INVOICE_STATUS_PARTIALLY_PAID_TOOLTIP};case Ht.PAID:return{text:p.PAYMENT_STATUS_PAID,color:"text-green-600",bgColor:"bg-green-100",printClass:"status-paid",tooltip:p.INVOICE_STATUS_PAID_TOOLTIP};case Ht.OVERDUE:return{text:p.PAYMENT_STATUS_OVERDUE,color:"text-red-600",bgColor:"bg-red-100",printClass:"status-overdue",tooltip:p.INVOICE_STATUS_OVERDUE_TOOLTIP};case Ht.CANCELLED:return{text:p.PAYMENT_STATUS_CANCELLED,color:"text-slate-600 line-through",bgColor:"bg-slate-100",printClass:"status-cancelled",tooltip:p.INVOICE_STATUS_CANCELLED_TOOLTIP};default:return{text:we,color:"text-slate-700",bgColor:"bg-slate-100",printClass:"status-default",tooltip:""}}})(t.paymentStatus),K=t.invoiceType===Sa.PURCHASE,Te=K?(O==null?void 0:O.customAlias)||(O==null?void 0:O.name)||p.UNKNOWN_PERSON:(U==null?void 0:U.companyName)||c||p.APP_TITLE,G=K?O==null?void 0:O.address:U==null?void 0:U.address,he=K?O==null?void 0:O.mobileNumber:U==null?void 0:U.phone,ue=K?O==null?void 0:O.email:U==null?void 0:U.email,ae=K?"":U==null?void 0:U.taxId,V=K?p.SUPPLIER_MOBILE_LABEL:U!=null&&U.phone?"":p.PERSON_MOBILE_NUMBER,ce=K?(U==null?void 0:U.companyName)||c||p.APP_TITLE:(O==null?void 0:O.customAlias)||(O==null?void 0:O.name)||p.UNKNOWN_PERSON,M=K?U==null?void 0:U.address:O==null?void 0:O.address,k=K?U==null?void 0:U.phone:O==null?void 0:O.mobileNumber,Y=K?U==null?void 0:U.email:O==null?void 0:O.email,Q=K?U==null?void 0:U.taxId:"",fe=K?U!=null&&U.phone?"":p.PERSON_MOBILE_NUMBER:p.CUSTOMER_MOBILE_LABEL,ve=(U==null?void 0:U.companyName)||c||p.APP_TITLE,de=U==null?void 0:U.logoBase64,Ne=()=>{const we=window.open("","_blank");if(we){const Je=K?p.BILL_TITLE_FOR_PRINT:`${p.INVOICE_TITLE_FOR_PRINT} - ${t.invoiceNumber}`,Ze=K?p.BILL_TITLE_FOR_PRINT:p.INVOICE_TITLE_FOR_PRINT;let Qe=`
        <html>
          <head>
            <meta charset="UTF-8">
            <title>${Je}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap" rel="stylesheet">
            <style>
              body { font-family: "Noto Sans Bengali", sans-serif; margin: 20px; color: #333; line-height: 1.4; font-size: 10pt; }
              .print-container { max-width: 800px; margin: auto; padding:10px; border: 1px solid #eee; }
              .print-header { text-align: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee;}
              .company-logo-print { display: block; margin: 0 auto 10px auto; max-width: 160px; max-height: 70px; object-fit: contain; }
              .print-header h1 { font-size: 1.6em; margin: 0; color: #111; }
              .print-header h2.invoice-title { font-size: 1.3em; margin: 5px 0 0 0; color: #444; font-weight: normal; }
              
              .addresses { display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 0.9em; }
              .address-block { width: 48%; }
              .address-block h4 { margin-top: 0; font-size: 0.95em; color: #555; border-bottom: 1px solid #eee; padding-bottom: 4px; margin-bottom: 6px; font-weight: 600; }
              .address-block p { margin: 2px 0; }
              .address-block .label { font-weight: 500; color: #444; padding-right: 5px;}

              .invoice-meta { background-color: #f9f9f9; padding: 10px; border-radius: 4px; margin-bottom: 20px; font-size: 0.9em; }
              .invoice-meta table { width: 100%; }
              .invoice-meta td { padding: 3px 0; }
              .invoice-meta .label { font-weight: 500; color: #444; padding-right: 10px; }
              
              .status-chip { display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 0.8em; font-weight: 500; border: 1px solid transparent; }
              .status-pending { background-color: #fffbeb; color: #b45309; border-color: #fde68a; }
              .status-partially-paid { background-color: #eff6ff; color: #2563eb; border-color: #bfdbfe; }
              .status-paid { background-color: #f0fdf4; color: #16a34a; border-color: #bbf7d0; }
              .status-overdue { background-color: #fef2f2; color: #dc2626; border-color: #fecaca; }
              .status-cancelled { background-color: #f1f5f9; color: #475569; text-decoration: line-through; border-color: #e2e8f0;}
              .status-default { background-color: #f8fafc; color: #334155; border-color: #e2e8f0;}

              .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              .items-table th, .items-table td { border: 1px solid #ccc; padding: 7px; font-size: 0.85rem; vertical-align: top; }
              .items-table th { background-color: #f0f0f0; font-weight: 600; }
              .items-table .text-right { text-align: right; }
              .items-table .item-description { font-size: 0.75em; color: #555; padding-left: 8px; margin-top: 2px; white-space: pre-wrap; }
              
              .totals-section { margin-left: auto; width: 55%; max-width: 300px; margin-top: 10px; font-size: 0.9em; }
              .totals-section table { width: 100%; }
              .totals-section td { padding: 3px 0; }
              .totals-section .label { text-align: right; padding-right: 15px; color: #444; }
              .totals-section .value { text-align: right; font-weight: 500; }
              .totals-section .grand-total td { font-weight: bold; font-size: 1.05em; color: #000; border-top: 2px solid #555; padding-top: 5px; }
              
              .notes-section, .payment-history-section { margin-top: 20px; padding-top:10px; border-top: 1px dashed #ccc; font-size: 0.85em; }
              .notes-section h4, .payment-history-section h4 { font-size: 1em; color: #555; margin-bottom: 5px; font-weight: 600; }
              .notes-section p { white-space: pre-wrap; }
              .payment-history-section ul { list-style: none; padding: 0; }
              .payment-history-section li { background-color: #f9f9f9; padding: 5px 8px; border-radius: 3px; margin-bottom: 4px; border: 1px solid #eee;}
              .payment-history-section li div { display: flex; justify-content: space-between; }
              .payment-history-section li .payment-notes { font-size: 0.9em; color: #666; margin-top: 2px; }

              .footer-print { text-align: center; font-size: 0.8em; color: #777; margin-top: 30px; padding-top: 10px; border-top: 1px solid #eee; }
              .no-print { display: none !important; }
              @media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }
            </style>
          </head>
          <body>
            <div class="print-container">
      `;Qe+='<div class="print-header">',de&&(Qe+=`<img src="${de}" alt="${ve} ${p.LOGO_TEXT}" class="company-logo-print" />`),Qe+=`<h1>${ve}</h1>`,Qe+=`<h2 class="invoice-title">${Ze}</h2>`,Qe+="</div>",Qe+='<div class="addresses">',Qe+=`<div class="address-block"><h4>${K?p.SUPPLIER_LABEL:p.INVOICE_FROM_LABEL}:</h4>`,Qe+=`<p class="font-semibold">${Te}</p>`,G&&(Qe+=`<p>${G}</p>`),he&&(Qe+=`<p><span class="label">${V}:</span> ${he}</p>`),ue&&(Qe+=`<p><span class="label">${p.EMAIL}:</span> ${ue}</p>`),ae&&!K&&(Qe+=`<p><span class="label">${p.TAX_LABEL} ${p.ID_LABEL}:</span> ${ae}</p>`),Qe+="</div>",Qe+=`<div class="address-block" style="text-align: right;"><h4>${K?" ( )":p.BILLED_TO_LABEL}:</h4>`,Qe+=`<p class="font-semibold">${ce}</p>`,M&&(Qe+=`<p>${M}</p>`),k&&(Qe+=`<p><span class="label">${fe}:</span> ${k}</p>`),Y&&(Qe+=`<p><span class="label">${p.EMAIL}:</span> ${Y}</p>`),Q&&K&&(Qe+=`<p><span class="label">${p.TAX_LABEL} ${p.ID_LABEL}:</span> ${Q}</p>`),Qe+="</div></div>",Qe+='<div class="invoice-meta"><table><tr>',Qe+=`<td><span class="label">${p.INVOICE_NUMBER_LABEL}:</span> ${t.invoiceNumber}</td>`,Qe+=`<td><span class="label">${p.INVOICE_DATE_LABEL}:</span> ${J(t.invoiceDate)}</td></tr><tr>`,t.dueDate&&(Qe+=`<td><span class="label">${p.DUE_DATE_INVOICE_LABEL}:</span> ${J(t.dueDate)}</td>`),Qe+=`<td ${t.dueDate?"":'colspan="2"'}><span class="label">${p.PAYMENT_STATUS_LABEL}:</span> <span class="status-chip ${re.printClass}">${re.text}</span></td>`,Qe+="</tr></table></div>",Qe+=`<table class="items-table"><thead><tr>
        <th>${p.INVOICE_ITEMS_TABLE_HEADER_PRODUCT}</th>
        <th class="text-right">${p.INVOICE_ITEMS_TABLE_HEADER_QTY}</th>
        <th class="text-right">${p.INVOICE_ITEMS_TABLE_HEADER_UNIT_PRICE}</th>
        <th class="text-right">${p.INVOICE_ITEMS_TABLE_HEADER_TOTAL}</th>
      </tr></thead><tbody>`,t.items.forEach(je=>{Qe+=`<tr>
          <td>${je.productName}${je.description?`<p class="item-description">${je.description}</p>`:""}</td>
          <td class="text-right">${(je.quantity||0).toLocaleString("bn-BD")}${je.unit?` ${je.unit}`:""}</td>
          <td class="text-right">${(je.unitPrice||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
          <td class="text-right font-semibold">${(je.total||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
        </tr>`}),Qe+="</tbody></table>",Qe+='<div class="totals-section"><table>',Qe+=`<tr><td class="label">${p.SUBTOTAL_LABEL}:</td><td class="value">${p.BDT_SYMBOL} ${(t.subtotal||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`,(t.discountAmount||0)>0&&(Qe+=`<tr><td class="label">${p.DISCOUNT_LABEL} (${t.discountType==="percentage"?`${t.discountValue}%`:p.BDT_SYMBOL+t.discountValue}):</td><td class="value" style="color: red;">- ${p.BDT_SYMBOL} ${(t.discountAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`),(t.taxAmount||0)>0&&(Qe+=`<tr><td class="label">${p.TAX_LABEL} (${t.taxType==="percentage"?`${t.taxValue}%`:p.BDT_SYMBOL+t.taxValue}):</td><td class="value" style="color: green;">+ ${p.BDT_SYMBOL} ${(t.taxAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`),Qe+=`<tr class="grand-total"><td class="label">${p.GRAND_TOTAL_LABEL}:</td><td class="value">${p.BDT_SYMBOL} ${(t.totalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`,t.paymentsReceived&&t.paymentsReceived.length>0&&(Qe+=`<tr><td class="label">${p.PAID_AMOUNT_LABEL}:</td><td class="value" style="color: green;">${p.BDT_SYMBOL} ${(se||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`,Qe+=`<tr><td class="label">${p.REMAINING_AMOUNT_LABEL}:</td><td class="value" style="${Z>.009?"color: red;":"color: green;"}">${p.BDT_SYMBOL} ${(Z||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`),Qe+='</table></div><div style="clear:both;"></div>',t.paymentsReceived&&t.paymentsReceived.length>0&&(Qe+=`<div class="payment-history-section"><h4>${p.PAYMENT_HISTORY_LABEL}</h4><ul>`,t.paymentsReceived.forEach(je=>{Qe+=`<li><div><span>${oe(je.paymentDate)} - ${p.BDT_SYMBOL} ${(je.amount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</span><span class="payment-method">${je.paymentMethod?F[je.paymentMethod]:""}</span></div>`,je.notes&&(Qe+=`<p class="payment-notes">${p.NOTES_LABEL}: ${je.notes}</p>`),Qe+="</li>"}),Qe+="</ul></div>"),t.notes&&(Qe+=`<div class="notes-section"><h4>${p.NOTES_TERMS_LABEL}:</h4><p>${t.notes}</p></div>`),Qe+=`<div class="footer-print">${p.APP_TITLE}  </div>`,Qe+="</div></body></html>",we.document.write(Qe),we.document.close(),we.focus(),setTimeout(()=>{we.print(),we.close()},500)}else alert("     -   ")},Ue=async we=>{if(we.preventDefault(),I)return;const Je=parseFloat(h);if(isNaN(Je)||Je<=0){alert(p.FORM_VALIDATION_ERROR);return}if(Je>Z+.001){alert(p.PAYMENT_AMOUNT_EXCEEDS_REMAINING_ERROR);return}if(!b){alert(p.PAYMENT_DATE_REQUIRED_ERROR);return}j(!0);try{await i(t.id,{paymentDate:b,amount:Je,paymentMethod:T||void 0,notes:L.trim()||void 0}),f(!1),_(""),v(new Date().toISOString().split("T")[0]),C("Cash"),R("")}catch(Ze){console.error("Payment recording failed:",Ze)}finally{j(!1)}};return l.jsxs(Ya,{isOpen:n,onClose:e,title:`${K?p.BILL_TITLE_FOR_PRINT:p.VIEW_INVOICE_MODAL_TITLE} - ${t.invoiceNumber}`,size:"2xl",children:[l.jsxs("div",{id:"invoice-display-area",className:"p-1",children:[l.jsxs("header",{className:"mb-6 text-center",children:[de?l.jsx("img",{src:de,alt:`${ve} ${p.LOGO_TEXT}`,className:"mx-auto mb-2 max-w-[180px] max-h-[80px] object-contain"}):l.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:ve}),l.jsx("p",{className:"text-sm text-slate-500",children:K?p.BILL_TITLE_FOR_PRINT:p.INVOICE_TITLE_FOR_PRINT})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-sm",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 mb-1",children:K?p.SUPPLIER_LABEL:p.INVOICE_FROM_LABEL}),l.jsx("p",{className:"font-semibold",children:Te}),G&&l.jsx("p",{className:"text-xs",children:G}),he&&l.jsxs("p",{className:"text-xs",children:[V,": ",he]}),ue&&l.jsxs("p",{className:"text-xs",children:[p.EMAIL,": ",ue]}),ae&&!K&&l.jsxs("p",{className:"text-xs",children:[p.TAX_LABEL," ",p.ID_LABEL,": ",ae]})]}),l.jsxs("div",{className:"sm:text-right",children:[l.jsx("h4",{className:"font-semibold text-slate-700 mb-1",children:K?" ( )":p.BILLED_TO_LABEL}),l.jsx("p",{className:"font-semibold",children:ce}),M&&l.jsx("p",{className:"text-xs",children:M}),k&&l.jsxs("p",{className:"text-xs",children:[fe,": ",k]}),Y&&l.jsxs("p",{className:"text-xs",children:[p.EMAIL,": ",Y]}),Q&&K&&l.jsxs("p",{className:"text-xs",children:[p.TAX_LABEL," ",p.ID_LABEL,": ",Q]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 mb-6 text-sm border-b pb-3",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"font-semibold",children:[p.INVOICE_NUMBER_LABEL,":"]})," ",t.invoiceNumber]}),l.jsxs("div",{children:[l.jsxs("span",{className:"font-semibold",children:[p.INVOICE_DATE_LABEL,":"]})," ",J(t.invoiceDate)]}),t.dueDate&&l.jsxs("div",{children:[l.jsxs("span",{className:"font-semibold",children:[p.DUE_DATE_INVOICE_LABEL,":"]})," ",J(t.dueDate)]}),l.jsxs("div",{className:"col-span-2 sm:col-span-1 mt-1",children:[l.jsxs("span",{className:"font-semibold",children:[p.PAYMENT_STATUS_LABEL,":"]}),l.jsx("span",{title:re.tooltip,className:`ml-1 px-2 py-0.5 text-xs font-medium rounded-full ${re.bgColor} ${re.color}`,children:re.text})]})]}),l.jsx("h4",{className:"text-md font-semibold text-slate-700 mb-2",children:p.INVOICE_ITEMS_LABEL}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm mb-6 min-w-[500px]",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 text-left font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_PRODUCT}),l.jsx("th",{className:"p-2 text-right font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_QTY}),l.jsx("th",{className:"p-2 text-right font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_UNIT_PRICE}),l.jsx("th",{className:"p-2 text-right font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_TOTAL})]})}),l.jsx("tbody",{children:t.items.map(we=>l.jsxs("tr",{className:"border-b border-slate-100",children:[l.jsxs("td",{className:"p-2",children:[we.productName,we.description&&l.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:we.description})]}),l.jsxs("td",{className:"p-2 text-right",children:[(we.quantity||0).toLocaleString("bn-BD"),we.unit?` ${we.unit}`:""]}),l.jsx("td",{className:"p-2 text-right",children:(we.unitPrice||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}),l.jsx("td",{className:"p-2 text-right font-medium",children:(we.total||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})})]},we.id))})]})}),l.jsx("div",{className:"flex justify-end mb-6",children:l.jsxs("div",{className:"w-full sm:w-1/2 md:w-2/5 space-y-1 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-slate-600",children:[p.SUBTOTAL_LABEL,":"]})," ",l.jsxs("span",{children:[p.BDT_SYMBOL," ",(t.subtotal||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),(t.discountAmount||0)>0&&l.jsxs("div",{className:"flex justify-between text-red-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.DISCOUNT_LABEL," (",t.discountType==="percentage"?`${t.discountValue}%`:p.BDT_SYMBOL+t.discountValue,"):"]})," ",l.jsxs("span",{children:["- ",p.BDT_SYMBOL," ",(t.discountAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),(t.taxAmount||0)>0&&l.jsxs("div",{className:"flex justify-between text-green-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.TAX_LABEL," (",t.taxType==="percentage"?`${t.taxValue}%`:p.BDT_SYMBOL+t.taxValue,"):"]})," ",l.jsxs("span",{children:["+ ",p.BDT_SYMBOL," ",(t.taxAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-1 mt-1",children:[l.jsxs("span",{className:"text-slate-700",children:[p.GRAND_TOTAL_LABEL,":"]})," ",l.jsxs("span",{children:[p.BDT_SYMBOL," ",(t.totalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),t.paymentsReceived&&t.paymentsReceived.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between text-green-600",children:[l.jsxs("span",{className:"text-slate-600",children:[p.PAID_AMOUNT_LABEL,":"]})," ",l.jsxs("span",{children:[p.BDT_SYMBOL," ",(se||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:`flex justify-between font-semibold ${Z>.009?"text-red-600":"text-green-600"}`,children:[l.jsxs("span",{className:"text-slate-600",children:[p.REMAINING_AMOUNT_LABEL,":"]})," ",l.jsxs("span",{children:[p.BDT_SYMBOL," ",(Z||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]})]})]})}),t.notes&&l.jsxs("div",{className:"mb-6 text-sm",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 mb-1",children:[p.NOTES_TERMS_LABEL,":"]}),l.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:t.notes})]}),t.paymentsReceived&&t.paymentsReceived.length>0&&l.jsxs("div",{className:"mb-6 text-sm",children:[l.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:p.PAYMENT_HISTORY_LABEL}),l.jsx("ul",{className:"space-y-1.5",children:t.paymentsReceived.map(we=>l.jsxs("li",{className:"p-2 bg-slate-50 rounded border border-slate-200 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{children:[oe(we.paymentDate)," - ",p.BDT_SYMBOL," ",(we.amount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]}),l.jsx("span",{className:"text-slate-500",children:we.paymentMethod?F[we.paymentMethod]:""})]}),we.notes&&l.jsxs("p",{className:"text-slate-500 mt-0.5 text-[11px]",children:[p.NOTES_LABEL,": ",we.notes]})]},we.id))})]})]}),!d&&ee&&l.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 text-center no-print",children:l.jsxs("button",{onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow-sm flex items-center justify-center space-x-2 mx-auto",disabled:I,children:[l.jsx(H3,{className:"w-4 h-4"}),l.jsx("span",{children:p.RECORD_PAYMENT_BTN_LABEL})]})}),t.paymentStatus===Ht.PAID&&l.jsx("p",{className:"text-center text-green-600 text-sm mt-4 no-print",children:p.INVOICE_ALREADY_PAID_INFO}),t.paymentStatus===Ht.CANCELLED&&l.jsx("p",{className:"text-center text-slate-500 text-sm mt-4 no-print",children:p.INVOICE_CANCELLED_NO_PAYMENT}),d&&ee&&l.jsxs("form",{onSubmit:Ue,className:"mt-4 pt-4 border-t border-slate-200 space-y-3 text-sm no-print",children:[l.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:p.PAYMENT_RECORD_FOR_INVOICE_TITLE.replace("{invoiceNumber}",t.invoiceNumber)}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"paymentAmount",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[p.PAYMENT_AMOUNT_LABEL," (",p.REMAINING_AMOUNT_LABEL,": ",Z.toLocaleString("bn-BD"),")"]}),l.jsx("input",{type:"number",id:"paymentAmount",value:h,onChange:we=>_(we.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",min:"0.01",step:"0.01",max:Z,required:!0,disabled:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"paymentDateModal",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PAYMENT_DATE_LABEL}),l.jsx("input",{type:"date",id:"paymentDateModal",value:b,onChange:we=>v(we.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,disabled:I})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"paymentMethod",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PAYMENT_METHOD_LABEL}),l.jsx("select",{id:"paymentMethod",value:T,onChange:we=>C(we.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",disabled:I,children:xe.map(we=>l.jsx("option",{value:we,children:F[we]},we))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"paymentNotes",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PAYMENT_NOTES_LABEL}),l.jsx("textarea",{id:"paymentNotes",value:L,onChange:we=>R(we.target.value),placeholder:p.PAYMENT_NOTES_PLACEHOLDER,rows:2,className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",disabled:I})]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-3 py-1.5 text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",disabled:I,children:p.CANCEL}),l.jsxs("button",{type:"submit",className:"px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-md shadow-sm flex items-center space-x-1 disabled:opacity-70",disabled:I,children:[l.jsx(Ri,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:I?p.LOADING:p.ADD_PAYMENT_BTN_LABEL})]})]})]}),l.jsxs("div",{className:"mt-6 pt-4 text-right border-t border-slate-200 flex justify-end space-x-3 no-print",children:[l.jsxs("button",{type:"button",onClick:Ne,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md flex items-center space-x-2",children:[l.jsx(G3,{className:"w-4 h-4"}),l.jsx("span",{children:p.PRINT_INVOICE_BTN})]}),l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-200 hover:bg-slate-300 rounded-lg",children:p.CLOSE_BTN})]})]})},p2=512*1024,q3=({initialData:n,onSave:e,onCancel:t})=>{const[s,r]=D.useState(""),[i,c]=D.useState(""),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[T,C]=D.useState(void 0),[L,R]=D.useState(!1),I=D.useRef(null);D.useEffect(()=>{n?(r(n.companyName),c(n.address||""),f(n.phone||""),_(n.email||""),v(n.taxId||""),C(n.logoBase64),R(n.isDefault||!1)):(r(""),c(""),f(""),_(""),v(""),C(void 0),R(!1))},[n]);const j=Z=>{var J;const ee=(J=Z.target.files)==null?void 0:J[0];if(ee){if(ee.size>p2){alert(`   ${p2/1024}KB     `),I.current&&(I.current.value="");return}const oe=new FileReader;oe.onloadend=()=>{C(oe.result)},oe.readAsDataURL(ee)}},O=()=>{C(void 0),I.current&&(I.current.value="")},U=async Z=>{if(Z.preventDefault(),!s.trim()){alert("  ");return}await e({companyName:s,address:i||void 0,phone:d||void 0,email:h||void 0,taxId:b||void 0,logoBase64:T,isDefault:L},n==null?void 0:n.id)},se="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm";return l.jsxs("form",{onSubmit:U,className:"space-y-4 p-1",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"companyName",className:"block text-xs font-medium text-slate-600 mb-0.5",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"companyName",value:s,onChange:Z=>r(Z.target.value),className:se,required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"companyPhone",className:"block text-xs font-medium text-slate-600 mb-0.5",children:" "}),l.jsx("input",{type:"tel",id:"companyPhone",value:d,onChange:Z=>f(Z.target.value),className:se})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"companyEmail",className:"block text-xs font-medium text-slate-600 mb-0.5",children:""}),l.jsx("input",{type:"email",id:"companyEmail",value:h,onChange:Z=>_(Z.target.value),className:se})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"companyAddress",className:"block text-xs font-medium text-slate-600 mb-0.5",children:""}),l.jsx("textarea",{id:"companyAddress",value:i,onChange:Z=>c(Z.target.value),rows:2,className:se})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"companyTaxId",className:"block text-xs font-medium text-slate-600 mb-0.5",children:"  / BIN"}),l.jsx("input",{type:"text",id:"companyTaxId",value:b,onChange:Z=>v(Z.target.value),className:se})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"  ()"}),l.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[l.jsx("span",{className:"inline-block h-16 w-16 rounded-md overflow-hidden bg-slate-100 ring-1 ring-slate-200",children:T?l.jsx("img",{src:T,alt:" ",className:"h-full w-full object-contain"}):l.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-300",children:l.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M19.5 6h-15A2.5 2.5 0 002 8.5v7A2.5 2.5 0 004.5 18h15a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0019.5 6zM4 8.5H20v7H4v-7zm6 5.5l-2-2.5h8l-2.5 3-1.5-1.5z"})})})}),l.jsxs("div",{className:"flex flex-col space-y-1.5",children:[l.jsxs("button",{type:"button",onClick:()=>{var Z;return(Z=I.current)==null?void 0:Z.click()},className:"inline-flex items-center px-2.5 py-1 border border-slate-300 text-xs font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50",children:[l.jsx(Pp,{className:"w-4 h-4 mr-1.5 text-slate-500"}),T?"  ":"  "]}),l.jsx("input",{type:"file",ref:I,onChange:j,accept:"image/png, image/jpeg, image/svg+xml",className:"hidden"}),T&&l.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center px-2.5 py-1 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200",children:[l.jsx(xr,{className:"w-4 h-4 mr-1.5"})," "]})]})]})]}),l.jsx("div",{className:"pt-2",children:l.jsxs("label",{htmlFor:"isDefaultCompany",className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",id:"isDefaultCompany",checked:L,onChange:Z=>R(Z.target.checked),className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),l.jsx("span",{className:"text-sm text-slate-700",children:"     "})]})}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:n?p.SAVE_CHANGES:"  "})]})]})},z3=({isOpen:n,onClose:e,companyProfiles:t,onAddProfile:s,onUpdateProfile:r,onDeleteProfile:i})=>{const[c,d]=D.useState(!1),[f,h]=D.useState(null),_=T=>{h(T||null),d(!0)},b=async(T,C)=>{C?await r(C,T):await s(T),d(!1),h(null)},v=async T=>{console.log("Set default profile:",T);const C=t.find(L=>L.isDefault);C&&C.id!==T&&await r(C.id,{isDefault:!1}),await r(T,{isDefault:!0})};return n?l.jsx(Ya,{isOpen:n,onClose:e,title:p.MANAGE_COMPANY_PROFILES_MODAL_TITLE,size:"xl",children:l.jsx("div",{className:"p-1",children:c?l.jsx(q3,{initialData:f,onSave:b,onCancel:()=>{d(!1),h(null)}}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 flex justify-end",children:l.jsxs("button",{onClick:()=>_(),className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-lg shadow-sm flex items-center space-x-2 text-sm",children:[l.jsx(Ri,{className:"w-5 h-5"}),l.jsx("span",{children:"    "})]})}),t.length===0?l.jsx("p",{className:"text-slate-500 text-center py-6",children:"      "}):l.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar-modal pr-2",children:t.map(T=>l.jsx("li",{className:"p-3 bg-white rounded-md border border-slate-200 shadow-sm hover:shadow-md group",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[l.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[l.jsxs("h3",{className:"text-md font-semibold text-slate-700 flex items-center",children:[T.companyName,T.isDefault&&l.jsxs("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full flex items-center",children:[l.jsx(Bh,{className:"w-3 h-3 mr-1"}),""]})]}),T.address&&l.jsx("p",{className:"text-xs text-slate-500",children:T.address}),T.phone&&l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",T.phone]}),T.email&&l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",T.email]})]}),l.jsxs("div",{className:"flex space-x-1.5 self-start sm:self-center opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[!T.isDefault&&l.jsxs("button",{onClick:()=>v(T.id),className:"p-1.5 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 text-xs flex items-center",title:"   ",children:[l.jsx(Bh,{className:"w-4 h-4 mr-1"}),"  "]}),l.jsx("button",{onClick:()=>_(T),className:"p-1.5 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50",title:" ",children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>i(T.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:" ",children:l.jsx(xr,{className:"w-4 h-4"})})]})]})},T.id))})]})})}):null},$3=({isOpen:n,onClose:e,products:t,currentUser:s,onAddNewProductClick:r,onEditProductClick:i,onAddProduct:c,onUpdateProduct:d,onDeleteProduct:f,onRestoreProduct:h,onAdjustStock:_,onViewStockHistory:b})=>{const[v,T]=D.useState("");if(!n)return null;const C=t.filter(L=>!L.isDeleted&&(L.name.toLowerCase().includes(v.toLowerCase())||L.description&&L.description.toLowerCase().includes(v.toLowerCase()))).sort((L,R)=>L.name.localeCompare(R.name,"bn-BD"));return l.jsx(Ya,{isOpen:n,onClose:e,title:p.MANAGE_PRODUCTS_MODAL_TITLE,size:"3xl",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[l.jsx("input",{type:"text",placeholder:p.SEARCH_PRODUCT_PLACEHOLDER,value:v,onChange:L=>T(L.target.value),className:"w-full sm:w-auto flex-grow px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500","aria-label":" "}),l.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-md transition duration-150 w-full sm:w-auto",children:[l.jsx(Ri,{className:"w-5 h-5"}),l.jsx("span",{children:p.ADD_NEW_PRODUCT_BTN})]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:C.length===0?l.jsx("p",{className:"text-slate-500 text-center py-10",children:v?`"${v}"      `:p.NO_PRODUCTS_FOUND}):l.jsx("ul",{className:"space-y-3",children:C.map(L=>l.jsxs("li",{className:"p-3 bg-white rounded-md border border-slate-200 flex items-start space-x-3 group",children:[L.productImage?l.jsx("img",{src:L.productImage,alt:L.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0 border border-slate-100"}):l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-md flex items-center justify-center text-slate-400 text-xs flex-shrink-0 border border-slate-200",children:" "}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("button",{onClick:()=>i(L),className:"font-medium text-slate-700 hover:text-teal-600 hover:underline text-left",title:`${p.EDIT_PRODUCT_BTN}: ${L.name}`,children:L.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[": ",L.currentStock.toLocaleString("bn-BD")," ",L.stockUnit||p.DEFAULT_UNIT_PIECE,L.unitPrice!==void 0&&` | ${p.SALES_PRICE_LABEL.split(" ")[0]}: ${L.unitPrice.toLocaleString("bn-BD")}`,L.mrp!==void 0&&` | MRP: ${L.mrp.toLocaleString("bn-BD")}`,L.wholesalePrice!==void 0&&` | : ${L.wholesalePrice.toLocaleString("bn-BD")}`]}),L.description&&l.jsx("p",{className:"text-xs text-slate-400 truncate max-w-md",children:L.description})]}),l.jsx("div",{className:"flex-shrink-0 flex items-center space-x-1 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:l.jsx("button",{onClick:()=>i(L),className:"p-1.5 text-blue-600 hover:text-blue-700 rounded-full hover:bg-blue-50",title:p.EDIT_PRODUCT_BTN,"aria-label":p.EDIT_PRODUCT_BTN,children:l.jsx(hl,{className:"w-4 h-4"})})})]},L.id))})})]})})},W3=({isOpen:n,onClose:e,onSave:t,initialData:s,isGlobalPhoneticModeActive:r})=>{const[i,c]=D.useState(""),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[T,C]=D.useState(""),[L,R]=D.useState(void 0),[I,j]=D.useState(""),[O,U]=D.useState(0),[se,Z]=D.useState(Wi.find(Pe=>Pe==="")||Wi[0]||""),[ee,J]=D.useState(5),{addNotification:oe}=ur(),xe=D.useRef(null),F=D.useRef(null),H=D.useRef(null),re=D.useRef(null),K=D.useRef(null),Te=D.useRef({}),G=!!s;D.useEffect(()=>{n&&(s?(c(s.name),f(s.description||""),_(s.unitPrice!==void 0?s.unitPrice:""),v(s.mrp!==void 0?s.mrp:""),C(s.wholesalePrice!==void 0?s.wholesalePrice:""),R(s.productImage),j(s.unit||""),Z(s.stockUnit||Wi.find(Pe=>Pe==="")||Wi[0]||""),J(s.lowStockThreshold!==void 0?s.lowStockThreshold:5),U(0)):(c(""),f(""),_(""),v(""),C(""),R(void 0),j(""),U(0),Z(Wi.find(Pe=>Pe==="")||Wi[0]||""),J(5)),Te.current={},setTimeout(()=>{var Pe;return(Pe=xe.current)==null?void 0:Pe.focus()},50))},[n,s]);const he=Pe=>{var it;const nt=(it=Pe.target.files)==null?void 0:it[0];if(nt){if(nt.size>Fb){oe(p.PRODUCT_IMAGE_SIZE_TOO_LARGE,"error"),K.current&&(K.current.value="");return}const st=new FileReader;st.onloadend=()=>{R(st.result)},st.readAsDataURL(nt)}},ue=()=>{R(void 0),K.current&&(K.current.value="")},ae=(Pe,nt)=>it=>{const st=it.target.value;Te.current[nt]?(Pe(st),Te.current[nt]=!1):Pe(st)},V=(Pe,nt,it)=>st=>{if(!Te.current[nt]&&r&&st.key===" "){st.preventDefault();const Nt=(it==null?void 0:it.current)||st.target,Pt=Nt.value,Rt=Nt.selectionStart||0;let Ft=Rt-1;for(;Ft>=0&&Pt[Ft]!==" ";)Ft--;Ft++;const Yt=Pt.substring(Ft,Rt);if(Yt.trim()){const Be=cr(Yt),We=Pt.substring(0,Ft)+Be+" "+Pt.substring(Rt);Pe(We),setTimeout(()=>{const Lt=Ft+Be.length+1;Nt.setSelectionRange(Lt,Lt)},0)}else{const Be=Pt.substring(0,Rt)+" "+Pt.substring(Rt);Pe(Be),setTimeout(()=>{Nt.setSelectionRange(Rt+1,Rt+1)},0)}}},ce=(Pe,nt,it)=>st=>{if(Te.current[nt]){Te.current[nt]=!1;return}if(r){st.preventDefault();const Nt=st.clipboardData.getData("text"),Pt=cr(Nt),Rt=(it==null?void 0:it.current)||st.target,Ft=Rt.selectionStart||0,Yt=Rt.selectionEnd||0,Be=Rt.value,We=Be.substring(0,Ft)+Pt+Be.substring(Yt);Pe(We),setTimeout(()=>{const Lt=Ft+Pt.length;Rt.setSelectionRange(Lt,Lt)},0)}},M=ae(c,"name"),k=V(c,"name",xe),Y=ce(c,"name",xe),Q=ae(f,"description"),fe=V(f,"description",F),ve=ce(f,"description",F),de=ae(j,"unit"),Ne=V(j,"unit",H),Ue=ce(j,"unit",H),we=ae(Z,"stockUnit"),Je=V(Z,"stockUnit",re),Ze=ce(Z,"stockUnit",re),Qe=Pe=>{if(Pe.preventDefault(),!i.trim()){oe(p.PRODUCT_NAME_REQUIRED,"error");return}const nt=h===""?void 0:parseFloat(String(h)),it=b===""?void 0:parseFloat(String(b)),st=T===""?void 0:parseFloat(String(T)),Nt=O===""?0:parseFloat(String(O)),Pt=ee===""?5:parseFloat(String(ee));if(nt!==void 0&&(isNaN(nt)||nt<0)){oe(p.INVALID_UNIT_PRICE_ERROR,"error");return}if(it!==void 0&&(isNaN(it)||it<0)){oe(p.INVALID_MRP_ERROR,"error");return}if(st!==void 0&&(isNaN(st)||st<0)){oe(p.INVALID_WHOLESALE_PRICE_ERROR,"error");return}if(!G&&(isNaN(Nt)||Nt<0)){oe(p.INVALID_INITIAL_STOCK_ERROR,"error");return}if(isNaN(Pt)||Pt<0){oe(p.INVALID_LOW_STOCK_THRESHOLD_ERROR,"error");return}t({name:i.trim(),description:d.trim()||void 0,unitPrice:nt,mrp:it,wholesalePrice:st,productImage:L,unit:I.trim()||void 0},{initialStock:Nt,stockUnit:se.trim()||Wi.find(Rt=>Rt==="")||Wi[0]||"",lowStockThreshold:Pt},s==null?void 0:s.id)},je=G?p.PRODUCT_FORM_MODAL_TITLE_EDIT:p.PRODUCT_FORM_MODAL_TITLE_ADD,ge=G?p.SAVE_CHANGES:p.SAVE_PRODUCT_BTN,Fe="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white";return l.jsx(Ya,{isOpen:n,onClose:e,title:je,size:"lg",children:l.jsxs("form",{onSubmit:Qe,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"product-name",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[p.PRODUCT_NAME_LABEL," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{ref:xe,type:"text",id:"product-name",value:i,onChange:M,onKeyDown:k,onPaste:Y,className:Fe,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:p.PRODUCT_IMAGE_LABEL}),l.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[l.jsx("span",{className:"inline-block h-20 w-20 rounded-md overflow-hidden bg-slate-100 ring-1 ring-slate-200",children:L?l.jsx("img",{src:L,alt:p.PRODUCT_IMAGE_PREVIEW_ALT,className:"h-full w-full object-cover"}):l.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-300",children:l.jsx("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M19.5 6h-15A2.5 2.5 0 002 8.5v7A2.5 2.5 0 004.5 18h15a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0019.5 6zM4 8.5H20v7H4v-7zm6 5.5l-2-2.5h8l-2.5 3-1.5-1.5z"})})})}),l.jsxs("div",{className:"flex flex-col space-y-1.5",children:[l.jsxs("button",{type:"button",onClick:()=>{var Pe;return(Pe=K.current)==null?void 0:Pe.click()},className:"inline-flex items-center px-2.5 py-1 border border-slate-300 text-xs font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50",children:[l.jsx(Pp,{className:"w-4 h-4 mr-1.5 text-slate-500"}),L?p.CHANGE_PRODUCT_IMAGE_BTN:p.UPLOAD_PRODUCT_IMAGE_BTN]}),l.jsx("input",{type:"file",ref:K,onChange:he,accept:"image/*",className:"hidden"}),L&&l.jsxs("button",{type:"button",onClick:ue,className:"inline-flex items-center px-2.5 py-1 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200",children:[l.jsx(xr,{className:"w-4 h-4 mr-1.5"}),p.REMOVE_PRODUCT_IMAGE_BTN]})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product-description",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PRODUCT_DESCRIPTION_LABEL}),l.jsx("textarea",{ref:F,id:"product-description",value:d,onChange:Q,onKeyDown:fe,onPaste:ve,rows:2,className:Fe})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product-sales-price",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.SALES_PRICE_LABEL}),l.jsx("input",{type:"number",id:"product-sales-price",value:h,onChange:Pe=>_(Pe.target.value),min:"0",step:"any",className:Fe})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product-mrp",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.MRP_LABEL}),l.jsx("input",{type:"number",id:"product-mrp",value:b,onChange:Pe=>v(Pe.target.value),min:"0",step:"any",className:Fe})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product-wholesale-price",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.WHOLESALE_PRICE_LABEL}),l.jsx("input",{type:"number",id:"product-wholesale-price",value:T,onChange:Pe=>C(Pe.target.value),min:"0",step:"any",className:Fe})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product-unit",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PRODUCT_UNIT_LABEL}),l.jsx("input",{ref:H,type:"text",id:"product-unit",value:I,onChange:de,onKeyDown:Ne,onPaste:Ue,placeholder:p.PRODUCT_UNIT_PLACEHOLDER,className:Fe,list:"product-common-units"}),l.jsx("datalist",{id:"product-common-units",children:Wi.map(Pe=>l.jsx("option",{value:Pe},`prod-unit-${Pe}`))})]}),!G&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"initial-stock",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INITIAL_STOCK_LABEL}),l.jsx("input",{type:"number",id:"initial-stock",value:O,onChange:Pe=>U(Pe.target.value),min:"0",step:"any",className:Fe,disabled:G})]}),G&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"current-stock-display",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.CURRENT_STOCK_LABEL}),l.jsx("input",{type:"text",id:"current-stock-display",value:`${(s==null?void 0:s.currentStock.toLocaleString("bn-BD"))||"0"} ${(s==null?void 0:s.stockUnit)||p.DEFAULT_UNIT_PIECE}`,className:"w-full px-3 py-1.5 border border-slate-200 bg-slate-100 text-slate-500 rounded-md text-sm cursor-not-allowed",disabled:!0}),l.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"   ' '   "})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stock-unit",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.STOCK_UNIT_LABEL}),l.jsx("input",{ref:re,type:"text",id:"stock-unit",value:se,onChange:we,onKeyDown:Je,onPaste:Ze,placeholder:p.PRODUCT_UNIT_PLACEHOLDER,className:Fe,list:"stock-common-units"}),l.jsx("datalist",{id:"stock-common-units",children:Wi.map(Pe=>l.jsx("option",{value:Pe},`stock-unit-${Pe}`))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"low-stock-threshold",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.LOW_STOCK_THRESHOLD_LABEL}),l.jsx("input",{type:"number",id:"low-stock-threshold",value:ee,onChange:Pe=>J(Pe.target.value),min:"0",step:"any",className:Fe})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:ge})]})]})})},K3=({isOpen:n,onClose:e,products:t,invoices:s})=>{const[r,i]=D.useState(""),[c,d]=D.useState("all"),[f,h]=D.useState(!1),_=D.useRef(null),b=D.useRef(null),{addNotification:v}=ur();D.useEffect(()=>{n||(i(""),d("all"),h(!1))},[n]);const T=(O,U)=>O<=0?{text:p.STOCK_STATUS_OUT_OF_STOCK,colorClass:"text-red-600",chipColorClass:"bg-red-100 text-red-700"}:U!==void 0&&O<=U?{text:p.STOCK_STATUS_LOW_STOCK,colorClass:"text-orange-600",chipColorClass:"bg-orange-100 text-orange-700"}:{text:p.STOCK_STATUS_IN_STOCK,colorClass:"text-green-600",chipColorClass:"bg-green-100 text-green-700"},C=D.useMemo(()=>{const O={};return t.forEach(U=>O[U.id]=0),s.forEach(U=>{U.invoiceType===Sa.SALES&&!U.isDeleted&&U.paymentStatus!==Ht.PAID&&U.paymentStatus!==Ht.CANCELLED&&U.items.forEach(se=>{const Z=t.find(ee=>ee.id===se.originalProductId||ee.name===se.productName);Z&&(O[Z.id]=(O[Z.id]||0)+se.quantity)})}),O},[s,t]),L=D.useMemo(()=>t.filter(O=>!O.isDeleted).map(O=>{const U=C[O.id]||0,se=O.currentStock-U,Z=T(O.currentStock,O.lowStockThreshold),ee=T(se,O.lowStockThreshold);return{...O,committedStockForSales:U,availableForSale:se,currentStockStatusInfo:Z,availableForSaleStatusInfo:ee}}).filter(O=>{const U=r.toLowerCase(),se=O.name.toLowerCase().includes(U),Z=O.description&&O.description.toLowerCase().includes(U);let ee=!0;return c!=="all"&&(c==="in_stock"?ee=O.currentStockStatusInfo.text===p.STOCK_STATUS_IN_STOCK&&O.availableForSaleStatusInfo.text===p.STOCK_STATUS_IN_STOCK:c==="low_stock"?ee=O.currentStockStatusInfo.text===p.STOCK_STATUS_LOW_STOCK||O.availableForSaleStatusInfo.text===p.STOCK_STATUS_LOW_STOCK:c==="out_of_stock"&&(ee=O.currentStockStatusInfo.text===p.STOCK_STATUS_OUT_OF_STOCK||O.availableForSaleStatusInfo.text===p.STOCK_STATUS_OUT_OF_STOCK)),(se||Z)&&ee}).sort((O,U)=>O.name.localeCompare(U.name,"bn-BD")),[t,r,c,C]);D.useEffect(()=>{const O=U=>{_.current&&!_.current.contains(U.target)&&b.current&&!b.current.contains(U.target)&&h(!1)};return f&&document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[f]);const R=(O,U,se)=>{const Z=new Blob([O],{type:se}),ee=document.createElement("a");ee.href=URL.createObjectURL(Z),ee.download=U,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(ee.href)},I=()=>{if(L.length===0){v(p.NO_PRODUCTS_FOR_REPORT,"warning");return}const U=[[p.SERIAL_NO_COLUMN,p.COLUMN_PRODUCT_NAME,p.COLUMN_CURRENT_STOCK,p.COLUMN_COMMITTED_FOR_SALES,p.COLUMN_AVAILABLE_FOR_SALE,p.COLUMN_STOCK_UNIT,p.COLUMN_LOW_STOCK_THRESHOLD,`${p.COLUMN_CURRENT_STOCK} (${p.COLUMN_STOCK_STATUS})`,`${p.COLUMN_AVAILABLE_FOR_SALE} (${p.COLUMN_STOCK_STATUS})`].join(",")];L.forEach((Z,ee)=>{U.push([(ee+1).toLocaleString("bn-BD"),`"${Z.name.replace(/"/g,'""')}"`,Z.currentStock.toLocaleString("bn-BD"),Z.committedStockForSales.toLocaleString("bn-BD"),Z.availableForSale.toLocaleString("bn-BD"),Z.stockUnit||p.DEFAULT_UNIT_PIECE,(Z.lowStockThreshold||0).toLocaleString("bn-BD"),Z.currentStockStatusInfo.text,Z.availableForSaleStatusInfo.text].join(","))});const se="\uFEFF"+U.join(`
`);R(se,"Stock_Report.csv","text/csv;charset=utf-8;"),v("CSV    ","success")},j=()=>{if(L.length===0){v(p.NO_PRODUCTS_FOR_REPORT,"warning");return}const O=new Nn({orientation:"landscape"});O.addFont("https://fonts.gstatic.com/s/notosansbengali/v21/Cn-SJs6VTz3I6DdhgmkAaqAPU79fP_7D80y2z3g.ttf","Noto Sans Bengali","normal"),O.setFont("Noto Sans Bengali"),O.setFontSize(16),O.text(p.STOCK_REPORT_MODAL_TITLE,14,18),O.setFontSize(10),O.setTextColor(100),O.text(`${p.REPORT_FOR_PERIOD} ${new Date().toLocaleDateString("bn-BD")}`,14,25);const U=[[p.SERIAL_NO_COLUMN,p.COLUMN_PRODUCT_NAME,p.COLUMN_CURRENT_STOCK,p.COLUMN_COMMITTED_FOR_SALES,p.COLUMN_AVAILABLE_FOR_SALE,p.COLUMN_STOCK_UNIT,p.COLUMN_LOW_STOCK_THRESHOLD,`${p.COLUMN_CURRENT_STOCK.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`,`${p.COLUMN_AVAILABLE_FOR_SALE.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`]],se=L.map((Z,ee)=>[(ee+1).toLocaleString("bn-BD"),Z.name,Z.currentStock.toLocaleString("bn-BD"),Z.committedStockForSales.toLocaleString("bn-BD"),Z.availableForSale.toLocaleString("bn-BD"),Z.stockUnit||p.DEFAULT_UNIT_PIECE,(Z.lowStockThreshold||0).toLocaleString("bn-BD"),Z.currentStockStatusInfo.text,Z.availableForSaleStatusInfo.text]);X_(O,{startY:30,head:U,body:se,theme:"striped",headStyles:{fillColor:[22,160,133],font:"Noto Sans Bengali",fontStyle:"bold",fontSize:7},bodyStyles:{font:"Noto Sans Bengali",fontSize:7},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{halign:"center",cellWidth:8},1:{cellWidth:"auto"},2:{halign:"right",cellWidth:18},3:{halign:"right",cellWidth:18},4:{halign:"right",cellWidth:18},5:{cellWidth:12},6:{halign:"right",cellWidth:18},7:{halign:"center",cellWidth:22},8:{halign:"center",cellWidth:22}},didDrawPage:Z=>{let ee=" "+O.getNumberOfPages();O.setFontSize(10),O.setFont("Noto Sans Bengali","normal"),O.text(ee,Z.settings.margin.left,O.internal.pageSize.height-10)}}),O.save("Stock_Report.pdf"),v("PDF    ","success")};return l.jsx(Ya,{isOpen:n,onClose:e,title:p.STOCK_REPORT_MODAL_TITLE,size:"3xl",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200 flex flex-col sm:flex-row justify-between items-center gap-3",children:[l.jsx("input",{type:"text",placeholder:p.SEARCH_PRODUCTS_PLACEHOLDER,value:r,onChange:O=>i(O.target.value),className:"w-full sm:flex-grow px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm"}),l.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[180px]",children:[l.jsxs("button",{ref:b,type:"button",onClick:()=>h(O=>!O),className:"w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm text-sm bg-white text-slate-700 hover:border-slate-400 focus:border-teal-500 focus:ring-1 focus:ring-teal-500","aria-haspopup":"listbox","aria-expanded":f,children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(h_,{className:"w-4 h-4 mr-2 text-slate-400"}),c==="all"?p.FILTER_BY_STOCK_STATUS:T(c==="in_stock"?10:c==="low_stock"?1:0,c==="low_stock"?2:void 0).text]}),l.jsx(zh,{className:`w-4 h-4 transition-transform ${f?"rotate-180":""} text-slate-400`})]}),f&&l.jsx("div",{ref:_,className:"absolute z-20 mt-1 w-full bg-white border border-slate-300 rounded-md shadow-lg max-h-60 overflow-y-auto custom-scrollbar-modal",role:"listbox",children:["all","in_stock","low_stock","out_of_stock"].map(O=>l.jsx("button",{onClick:()=>{d(O),h(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",role:"option","aria-selected":c===O,children:O==="all"?p.ALL_PRODUCTS_FILTER:T(O==="in_stock"?10:O==="low_stock"?1:0,O==="low_stock"?2:void 0).text},O))})]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:L.length===0?l.jsx("p",{className:"text-slate-500 text-center py-10",children:p.NO_PRODUCTS_FOR_REPORT}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.SERIAL_NO_COLUMN}),l.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.COLUMN_PRODUCT_NAME}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_CURRENT_STOCK}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_COMMITTED_FOR_SALES}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_AVAILABLE_FOR_SALE}),l.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.COLUMN_STOCK_UNIT}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_LOW_STOCK_THRESHOLD}),l.jsx("th",{className:"px-2 py-2 text-center font-medium text-slate-600",children:`${p.COLUMN_CURRENT_STOCK.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`}),l.jsx("th",{className:"px-2 py-2 text-center font-medium text-slate-600",children:`${p.COLUMN_AVAILABLE_FOR_SALE.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:L.map((O,U)=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-500",children:(U+1).toLocaleString("bn-BD")}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-medium text-slate-700",children:O.name}),l.jsx("td",{className:`px-2 py-2 whitespace-nowrap text-right font-semibold ${O.currentStockStatusInfo.colorClass}`,children:O.currentStock.toLocaleString("bn-BD")}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-slate-500",children:O.committedStockForSales.toLocaleString("bn-BD")}),l.jsx("td",{className:`px-2 py-2 whitespace-nowrap text-right font-semibold ${O.availableForSaleStatusInfo.colorClass}`,children:O.availableForSale.toLocaleString("bn-BD")}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-500",children:O.stockUnit||p.DEFAULT_UNIT_PIECE}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-slate-500",children:(O.lowStockThreshold||0).toLocaleString("bn-BD")}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:l.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded-full ${O.currentStockStatusInfo.chipColorClass}`,children:O.currentStockStatusInfo.text})}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:l.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded-full ${O.availableForSaleStatusInfo.chipColorClass}`,children:O.availableForSaleStatusInfo.text})})]},O.id))})]})})}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[L.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:I,className:"flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx(sf,{className:"w-4 h-4"})," ",l.jsx("span",{children:"CSV"})]}),l.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500",children:[l.jsx(sf,{className:"w-4 h-4"})," ",l.jsx("span",{children:"PDF"})]})]}),l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-500 hover:bg-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CLOSE_BTN})]})]})})},X3=({isOpen:n,onClose:e,currentSettings:t,onSaveSettings:s})=>{const[r,i]=D.useState(t.model),[c,d]=D.useState(t.temperature??Bo.temperature),[f,h]=D.useState(t.topK??Bo.topK),[_,b]=D.useState(t.topP??Bo.topP),{addNotification:v}=ur();D.useEffect(()=>{n&&(i(t.model),d(t.temperature??Bo.temperature),h(t.topK??Bo.topK),b(t.topP??Bo.topP))},[n,t]);const T=()=>{s({model:r,temperature:Number(c),topK:Number(f),topP:Number(_)}),v(p.GEMINI_SETTINGS_SAVED_SUCCESS,"success"),e()},C=()=>{i(Bo.model),d(Bo.temperature),h(Bo.topK),b(Bo.topP),v(p.GEMINI_SETTINGS_RESET_SUCCESS,"info")},L="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",R="appearance-none w-full h-1.5 bg-slate-200 rounded-full outline-none slider-thumb",I="cursor-pointer";return l.jsxs(Ya,{isOpen:n,onClose:e,title:p.GEMINI_AI_SETTINGS_MODAL_TITLE,size:"lg",children:[l.jsxs("div",{className:"space-y-6 p-1",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"gemini-model",className:"block text-sm font-medium text-slate-700 mb-1",children:p.GEMINI_MODEL_LABEL}),l.jsx("select",{id:"gemini-model",value:r,onChange:j=>i(j.target.value),className:L,children:l.jsx("option",{value:"gemini-2.5-flash-preview-04-17",children:"gemini-2.5-flash-preview-04-17"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"gemini-temperature",className:"block text-sm font-medium text-slate-700 mb-1",children:[p.GEMINI_TEMPERATURE_LABEL,": ",l.jsx("span",{className:"font-mono text-teal-600",children:c.toFixed(2)})]}),l.jsx("input",{type:"range",id:"gemini-temperature",min:"0",max:"1",step:"0.01",value:c,onChange:j=>d(parseFloat(j.target.value)),className:`${R} ${I}`})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"gemini-topk",className:"block text-sm font-medium text-slate-700 mb-1",children:[p.GEMINI_TOP_K_LABEL,": ",l.jsx("span",{className:"font-mono text-teal-600",children:f})]}),l.jsx("input",{type:"number",id:"gemini-topk",min:"1",max:"100",step:"1",value:f,onChange:j=>h(parseInt(j.target.value,10)),className:L})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"gemini-topp",className:"block text-sm font-medium text-slate-700 mb-1",children:[p.GEMINI_TOP_P_LABEL,": ",l.jsx("span",{className:"font-mono text-teal-600",children:_.toFixed(2)})]}),l.jsx("input",{type:"range",id:"gemini-topp",min:"0",max:"1",step:"0.01",value:_,onChange:j=>b(parseFloat(j.target.value)),className:`${R} ${I}`})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-200",children:[l.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-orange-700 bg-orange-100 hover:bg-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",children:p.RESET_GEMINI_SETTINGS_BTN}),l.jsxs("div",{className:"space-x-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),l.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.SAVE_GEMINI_SETTINGS_BTN})]})]})]}),l.jsx("style",{children:`
        /* Custom styles for slider thumbs - WebKit */
        input[type=range].slider-thumb::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 16px;
          height: 16px;
          background: #14b8a6; /* teal-500 */
          cursor: pointer;
          border-radius: 50%;
          margin-top: -6px; /* Adjust to center thumb on track */
        }

        /* Custom styles for slider thumbs - Mozilla */
        input[type=range].slider-thumb::-moz-range-thumb {
          width: 16px;
          height: 16px;
          background: #14b8a6; /* teal-500 */
          cursor: pointer;
          border-radius: 50%;
          border: none;
        }
      `})]})},Z3=({isOpen:n,onClose:e})=>{const{currentUser:t,updateCurrentUserData:s,isAuthLoading:r}=Nc(),{addNotification:i}=ur(),[c,d]=D.useState(!0),[f,h]=D.useState(!0);D.useEffect(()=>{n&&t&&(d(t.enableSchemaCheckOnStartup??!0),h(t.enableDataFetchOnStartup??!0))},[n,t]);const _=async()=>{if(!t)return;const C={};if(c!==(t.enableSchemaCheckOnStartup??!0)&&(C.enableSchemaCheckOnStartup=c),f!==(t.enableDataFetchOnStartup??!0)&&(C.enableDataFetchOnStartup=f),Object.keys(C).length>0)try{await s(C),i(p.ADMIN_SETTINGS_SAVED_SUCCESS,"success")}catch(L){i(L.message||p.AUTH_ERROR_GENERAL,"error")}e()},b="flex items-center space-x-3 cursor-pointer",v="form-checkbox h-5 w-5 text-teal-600 border-slate-300 rounded focus:ring-teal-500 cursor-pointer",T="text-xs text-slate-500 ml-8 mt-1";return l.jsx(Ya,{isOpen:n,onClose:e,title:p.APP_ADMIN_SETTINGS_MODAL_TITLE,size:"lg",children:l.jsxs("div",{className:"space-y-6 p-1",children:[l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsxs("label",{className:b,children:[l.jsx("input",{type:"checkbox",checked:c,onChange:C=>d(C.target.checked),className:v}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:p.ENABLE_SCHEMA_CHECK_LABEL})]}),l.jsx("p",{className:T,children:p.ENABLE_SCHEMA_CHECK_DESCRIPTION})]}),l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsxs("label",{className:b,children:[l.jsx("input",{type:"checkbox",checked:f,onChange:C=>h(C.target.checked),className:v}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:p.ENABLE_DATA_FETCH_LABEL})]}),l.jsx("p",{className:T,children:p.ENABLE_DATA_FETCH_DESCRIPTION})]}),l.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-slate-200 space-x-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",disabled:r,children:p.CANCEL}),l.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",disabled:r,children:r?p.LOADING:p.SAVE_CHANGES})]})]})})},J3=({isOpen:n,onClose:e,logs:t,onClearLogs:s,isAIAssistantListening:r,isAICommandProcessing:i,onToggleAIAssistantListening:c,currentAILanguage:d,onSetAILanguage:f,currentAIScope:h,onSetAIScope:_,onSendCommand:b,aiVoiceReplayEnabled:v,onSetAiVoiceReplayEnabled:T,isAdminUser:C})=>{var ue;const L=D.useRef(null),[R,I]=D.useState(!1),j=D.useRef(null),O=D.useRef(null),[U,se]=D.useState(""),Z=D.useRef(null),ee=_p.useMemo(()=>[...t].sort((ae,V)=>new Date(V.timestamp).getTime()-new Date(ae.timestamp).getTime()),[t]);D.useEffect(()=>{var ae;n&&L.current&&(L.current.scrollTop=0),n&&((ae=Z.current)==null||ae.focus())},[ee,n]),D.useEffect(()=>{const ae=V=>{j.current&&!j.current.contains(V.target)&&O.current&&!O.current.contains(V.target)&&I(!1)};return R&&document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[R]);const J=ae=>{try{return new Date(ae).toLocaleString("bn-BD",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return ae}},oe=ae=>{switch(ae){case"command":return"bg-sky-50 border-sky-200";case"response":return"bg-teal-50 border-teal-200";case"error":return"bg-red-50 border-red-200";default:return"bg-slate-50 border-slate-200"}},xe=ae=>{switch(ae){case"command":return p.AI_LOG_TYPE_COMMAND;case"response":return p.AI_LOG_TYPE_RESPONSE;case"error":return p.AI_LOG_TYPE_ERROR;default:return ae}};let F=p.AI_ASSISTANT_BUTTON_LABEL,H=l.jsx(Lh,{className:"w-4 h-4"}),re="bg-cyan-500 hover:bg-cyan-600",K="";i?(F=p.AI_ASSISTANT_PROCESSING,H=l.jsx(xh,{className:"w-4 h-4 animate-spin"}),re="bg-purple-500 hover:bg-purple-600",K="animate-pulse"):r&&(F=p.AI_ASSISTANT_LISTENING,H=l.jsx(Lh,{className:"w-4 h-4"}),re="bg-red-500 hover:bg-red-600",K="animate-pulse");const Te="text-white hover:bg-opacity-80 font-medium py-2 px-3 rounded-md transition duration-150 flex items-center space-x-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-opacity-75",G=()=>{const ae=U.trim();ae&&(b(ae,d),se(""))},he=C?l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:O,onClick:()=>I(ae=>!ae),className:"text-xs text-slate-500 hover:text-slate-700 bg-slate-100 hover:bg-slate-200 px-2.5 py-1 rounded-md flex items-center space-x-1","aria-haspopup":"true","aria-expanded":R,title:"  ",children:[l.jsx("span",{children:((ue=P0.find(ae=>ae.code===d))==null?void 0:ue.label)||d}),l.jsx(zh,{className:"w-3 h-3"})]}),R&&l.jsx("div",{ref:j,className:"absolute right-0 mt-1 w-32 bg-white border border-slate-300 rounded-md shadow-lg z-10 py-1",children:P0.map(ae=>l.jsx("button",{onClick:()=>{f(ae.code),I(!1)},className:`block w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 ${d===ae.code?"bg-teal-50 text-teal-700 font-medium":"text-slate-700"}`,children:ae.label},ae.code))})]}):null;return l.jsx(Ya,{isOpen:n,onClose:e,title:p.AI_LOG_MODAL_TITLE,size:"2xl",headerActions:he,children:l.jsxs("div",{className:"flex flex-col h-[70vh]",children:[C&&l.jsxs("div",{className:"mb-3 p-3 border border-slate-200 rounded-md bg-slate-50",children:[l.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1.5",children:p.AI_ASSISTANT_SCOPE_LABEL}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[l.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"ai-scope",value:"app",checked:h==="app",onChange:()=>_("app"),className:"form-radio h-3.5 w-3.5 text-teal-600 focus:ring-teal-500 border-slate-400"}),l.jsx("span",{className:"text-xs text-slate-700",children:p.AI_ASSISTANT_SCOPE_APP_SPECIFIC})]}),l.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"ai-scope",value:"global",checked:h==="global",onChange:()=>_("global"),className:"form-radio h-3.5 w-3.5 text-teal-600 focus:ring-teal-500 border-slate-400"}),l.jsx("span",{className:"text-xs text-slate-700",children:p.AI_ASSISTANT_SCOPE_GLOBAL})]})]})]}),l.jsx("div",{ref:L,className:"flex-grow overflow-y-auto space-y-3 p-2 bg-slate-100 rounded-md custom-scrollbar-modal mb-4 min-h-20",children:ee.length===0?l.jsx("p",{className:"text-center text-slate-500 py-10",children:p.AI_LOG_NO_LOGS}):ee.map(ae=>l.jsxs("div",{className:`p-3 rounded-md border ${oe(ae.type)} shadow-sm text-sm`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-xs font-semibold text-slate-600",children:xe(ae.type)}),l.jsx("span",{className:"text-xs text-slate-400",children:J(ae.timestamp)})]}),ae.commandText&&l.jsxs("p",{className:"text-slate-700",children:[l.jsxs("strong",{className:"text-slate-500",children:[p.AI_LOG_USER_COMMAND_LABEL,":"]})," ",ae.commandText]}),ae.type==="response"&&ae.responseText&&l.jsxs("p",{className:"mt-1 text-slate-800",children:[l.jsxs("strong",{className:"text-slate-500",children:[p.AI_LOG_AI_RESPONSE_LABEL,":"]})," ",ae.responseText]}),ae.type==="response"&&ae.parsedIntent&&l.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[l.jsxs("strong",{className:"text-slate-500",children:[p.AI_LOG_INTENT_LABEL,":"]})," ",ae.parsedIntent]}),ae.type==="response"&&ae.actionDetails&&Object.keys(ae.actionDetails).length>0&&l.jsxs("details",{className:"mt-1 text-xs",children:[l.jsx("summary",{className:"cursor-pointer text-slate-500 hover:text-slate-700",children:p.AI_LOG_ACTION_DETAILS_LABEL}),l.jsx("pre",{className:"bg-slate-200 p-1.5 rounded text-slate-600 text-[11px] overflow-x-auto custom-scrollbar-modal",children:JSON.stringify(ae.actionDetails,null,2)})]}),ae.type==="error"&&ae.errorMessage&&l.jsxs("p",{className:"mt-1 text-red-700",children:[l.jsxs("strong",{className:"text-red-500",children:[p.AI_LOG_TYPE_ERROR,":"]})," ",ae.errorMessage]}),ae.rawAIResponse&&l.jsxs("details",{className:"mt-1 text-xs",children:[l.jsx("summary",{className:"cursor-pointer text-slate-500 hover:text-slate-700",children:p.AI_LOG_RAW_RESPONSE_LABEL}),l.jsx("pre",{className:"bg-slate-200 p-1.5 rounded text-slate-600 text-[11px] overflow-x-auto custom-scrollbar-modal",children:ae.rawAIResponse})]})]},ae.id))}),l.jsx("div",{className:"mb-2",children:l.jsx("textarea",{ref:Z,value:U,onChange:ae=>se(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),G())},placeholder:"AI      ...",className:"w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none text-sm min-h-[40px]",rows:1,"aria-label":"  ",disabled:i})}),l.jsxs("div",{className:"pt-3 border-t border-slate-200 flex flex-wrap justify-between items-center gap-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:c,className:`${Te} ${re} ${K} focus:ring-current`,title:p.AI_ASSISTANT_BUTTON_LABEL,"aria-label":p.AI_ASSISTANT_BUTTON_LABEL,disabled:!("SpeechRecognition"in window||"webkitSpeechRecognition"in window)||i&&!r,children:[H,l.jsx("span",{children:F})]}),l.jsxs("button",{onClick:G,className:`${Te} bg-teal-600 hover:bg-teal-700 focus:ring-teal-400`,disabled:!U.trim()||i,title:" ","aria-label":" ",children:[l.jsx(e5,{className:"w-4 h-4"}),l.jsx("span",{children:""})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[C&&l.jsxs("div",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"checkbox",id:"ai-voice-replay-toggle-modal",className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-400 rounded focus:ring-teal-500 cursor-pointer",checked:v,onChange:ae=>T(ae.target.checked)}),l.jsx("label",{htmlFor:"ai-voice-replay-toggle-modal",className:"text-xs text-slate-600 cursor-pointer",children:p.AI_VOICE_REPLAY_ENABLE_LABEL})]}),l.jsxs("button",{onClick:s,disabled:t.length===0,className:"flex items-center space-x-1.5 bg-red-500 hover:bg-red-600 text-white text-xs font-medium py-2 px-3 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-400 disabled:opacity-50",children:[l.jsx(xr,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:p.AI_LOG_CLEAR_BTN})]})]})]})]})})},Q3=({className:n})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 ${n}`,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})}),eR=({isOpen:n,onClose:e,bankAccounts:t,onOpenBankAccountForm:s,onDeleteBankAccount:r,onSetDefaultBankAccount:i})=>{const[c,d]=D.useState(""),[f,h]=D.useState(!1),{activeAccounts:_,deletedAccounts:b}=D.useMemo(()=>{const R=[],I=[],j=c.toLowerCase();return t.forEach(O=>{const U=O.accountName.toLowerCase().includes(j),se=O.accountNumber&&O.accountNumber.toLowerCase().includes(j),Z=O.bankName&&O.bankName.toLowerCase().includes(j);(U||se||Z)&&(O.isDeleted?I.push(O):R.push(O))}),R.sort((O,U)=>O.accountName.localeCompare(U.accountName,"bn-BD")),I.sort((O,U)=>new Date(U.deletedAt||U.lastModified).getTime()-new Date(O.deletedAt||O.lastModified).getTime()),{activeAccounts:R,deletedAccounts:I}},[t,c]),v=f?[..._,...b]:_,T=b.length,C=(R,I="BDT")=>`${p.BDT_SYMBOL} ${R.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,L=R=>b2[R]||R;return l.jsx(Ya,{isOpen:n,onClose:e,title:p.MANAGE_BANK_ACCOUNTS_MODAL_TITLE,size:"xl",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[l.jsx("input",{type:"text",placeholder:" ,     ...",value:c,onChange:R=>d(R.target.value),className:"w-full sm:w-auto flex-grow px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm"}),l.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[T>0&&l.jsx("button",{onClick:()=>h(!f),className:"text-xs text-teal-600 hover:text-teal-700 underline focus:outline-none py-2 px-2 whitespace-nowrap",children:f?p.HIDE_DELETED_ITEMS_BTN:`${p.SHOW_DELETED_ITEMS_BTN} (${T})`}),l.jsxs("button",{onClick:()=>s(),className:"flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-4 rounded-lg shadow-md transition duration-150 w-full sm:w-auto",children:[l.jsx(Ri,{className:"w-5 h-5"}),l.jsx("span",{children:p.ADD_NEW_BANK_ACCOUNT_BTN})]})]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:v.length===0?l.jsx("p",{className:"text-slate-500 text-center py-10",children:c?`"${c}"     `:f&&T===0?"   ":p.NO_BANK_ACCOUNTS_FOUND}):l.jsx("ul",{className:"space-y-3",children:v.map(R=>l.jsx("li",{className:`p-3 bg-white rounded-md border border-slate-200 group hover:shadow-sm transition-shadow ${R.isDeleted?"opacity-70":""}`,children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start",children:[l.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[l.jsxs("h3",{className:`text-md font-semibold flex items-center ${R.isDeleted?"text-slate-500 line-through":"text-slate-700"}`,children:[R.accountName,R.isDefault&&!R.isDeleted&&l.jsxs("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full flex items-center",children:[l.jsx(Bh,{className:"w-3 h-3 mr-1"}),""]})]}),l.jsxs("p",{className:"text-xs text-slate-500",children:[L(R.accountType),R.bankName&&` - ${R.bankName}`,R.accountNumber&&` (***${R.accountNumber.slice(-4)})`]}),l.jsxs("p",{className:`text-sm font-medium ${R.initialBalance>=0?"text-green-600":"text-red-600"}`,children:[" : ",C(R.initialBalance,R.currency)]}),R.isDeleted&&R.deletedAt&&l.jsxs("p",{className:"text-xs text-orange-500 mt-1",children:[" : ",new Date(R.deletedAt).toLocaleDateString("bn-BD")]})]}),l.jsxs("div",{className:"flex space-x-1 self-start sm:self-center opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[!R.isDefault&&!R.isDeleted&&l.jsxs("button",{onClick:()=>i(R.id),className:"p-1.5 text-green-600 hover:text-green-700 rounded-full hover:bg-green-50 text-xs flex items-center",title:"   ",children:[l.jsx(Q3,{className:"w-3.5 h-3.5 mr-0.5"}),"  "]}),!R.isDeleted&&l.jsx("button",{onClick:()=>s(R),className:"p-1.5 text-blue-600 hover:text-blue-700 rounded-full hover:bg-blue-50",title:p.EDIT_BANK_ACCOUNT_BTN,children:l.jsx(hl,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>r(R.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:R.isDeleted?"  ( )":p.DELETE_BANK_ACCOUNT_BTN,disabled:R.isDeleted,children:l.jsx(xr,{className:"w-4 h-4"})})]})]})},R.id))})})]})})},tR=({isOpen:n,onClose:e,onSave:t,initialData:s})=>{const[r,i]=D.useState(""),[c,d]=D.useState(""),[f,h]=D.useState(""),[_,b]=D.useState(""),[v,T]=D.useState(""),[C,L]=D.useState(""),[R,I]=D.useState(""),[j,O]=D.useState("BDT"),[U,se]=D.useState(""),[Z,ee]=D.useState(!1),{addNotification:J}=ur(),oe=D.useRef(null),xe=!!s;D.useEffect(()=>{n&&(s?(i(s.accountName),d(s.accountNumber||""),h(s.bankName||""),b(s.branchName||""),T(s.accountType),L(s.initialBalance),I(new Date(s.balanceEffectiveDate).toISOString().split("T")[0]),O(s.currency),se(s.notes||""),ee(s.isDefault||!1)):(i(""),d(""),h(""),b(""),T(""),L(""),I(new Date().toISOString().split("T")[0]),O("BDT"),se(""),ee(!1)),setTimeout(()=>{var K;return(K=oe.current)==null?void 0:K.focus()},50))},[n,s]);const F=async K=>{if(K.preventDefault(),!r.trim()){J(p.BANK_ACCOUNT_NAME_REQUIRED,"error");return}if(v===""){J(p.SELECT_ACCOUNT_TYPE_PLACEHOLDER,"error");return}const Te=parseFloat(String(C));if(isNaN(Te)){J(p.INITIAL_BALANCE_REQUIRED,"error");return}if(!R){J(p.BALANCE_EFFECTIVE_DATE_REQUIRED,"error");return}await t({accountName:r.trim(),accountNumber:c.trim()||void 0,bankName:f.trim()||void 0,branchName:_.trim()||void 0,accountType:v,initialBalance:Te,balanceEffectiveDate:new Date(R).toISOString(),currency:j,notes:U.trim()||void 0,isDefault:Z},s==null?void 0:s.id)},H="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",re="block text-xs font-medium text-slate-600 mb-0.5";return l.jsx(Ya,{isOpen:n,onClose:e,title:xe?p.BANK_ACCOUNT_FORM_MODAL_TITLE_EDIT:p.BANK_ACCOUNT_FORM_MODAL_TITLE_ADD,size:"lg",children:l.jsxs("form",{onSubmit:F,className:"space-y-4 p-1",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"accountName",className:re,children:[p.ACCOUNT_NAME_LABEL," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{ref:oe,type:"text",id:"accountName",value:r,onChange:K=>i(K.target.value),className:H,required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"accountNumber",className:re,children:p.ACCOUNT_NUMBER_LABEL}),l.jsx("input",{type:"text",id:"accountNumber",value:c,onChange:K=>d(K.target.value),className:H,placeholder:p.ACCOUNT_NUMBER_PLACEHOLDER})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"accountType",className:re,children:[p.ACCOUNT_TYPE_LABEL," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{id:"accountType",value:v,onChange:K=>T(K.target.value),className:H,required:!0,children:[l.jsx("option",{value:"",disabled:!0,children:p.SELECT_ACCOUNT_TYPE_PLACEHOLDER}),Object.entries(b2).map(([K,Te])=>l.jsx("option",{value:K,children:Te},K))]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bankName",className:re,children:p.BANK_NAME_LABEL}),l.jsx("input",{type:"text",id:"bankName",value:f,onChange:K=>h(K.target.value),className:H,placeholder:p.BANK_NAME_PLACEHOLDER})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"branchName",className:re,children:p.BRANCH_NAME_LABEL}),l.jsx("input",{type:"text",id:"branchName",value:_,onChange:K=>b(K.target.value),className:H,placeholder:p.BRANCH_NAME_PLACEHOLDER})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"initialBalance",className:re,children:[p.INITIAL_BALANCE_LABEL," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",id:"initialBalance",value:C,onChange:K=>L(K.target.value),className:H,step:"any",required:!0,placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"balanceEffectiveDate",className:re,children:[p.BALANCE_EFFECTIVE_DATE_LABEL," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",id:"balanceEffectiveDate",value:R,onChange:K=>I(K.target.value),className:H,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currency",className:re,children:p.CURRENCY_LABEL}),l.jsx("select",{id:"currency",value:j,onChange:K=>O(K.target.value),className:H,children:Object.entries(Vb).map(([K,Te])=>l.jsx("option",{value:K,children:Te},K))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"accountNotes",className:re,children:p.ACCOUNT_NOTES_LABEL}),l.jsx("textarea",{id:"accountNotes",value:U,onChange:K=>se(K.target.value),rows:2,className:H,placeholder:p.ACCOUNT_NOTES_PLACEHOLDER})]}),l.jsx("div",{className:"pt-2",children:l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:Z,onChange:K=>ee(K.target.checked),className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),l.jsx("span",{className:"text-sm text-slate-700",children:p.SET_AS_DEFAULT_ACCOUNT_LABEL})]})}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:xe?p.SAVE_CHANGES:p.SAVE_BANK_ACCOUNT_BTN})]})]})})},nR=({isOpen:n,onClose:e,transactions:t,invoices:s,persons:r,bankAccounts:i,debts:c})=>{const d=new Date,f=new Date(d.getFullYear(),d.getMonth(),1),[h,_]=D.useState("all"),[b,v]=D.useState(f.toISOString().split("T")[0]),[T,C]=D.useState(d.toISOString().split("T")[0]),[L,R]=D.useState(!0),[I,j]=D.useState(!0),[O,U]=D.useState(!0),[se,Z]=D.useState(!0),[ee,J]=D.useState([]),[oe,xe]=D.useState(0),[F,H]=D.useState(0),[re,K]=D.useState(0),[Te,G]=D.useState(0),he=ae=>{var V;return((V=r.find(ce=>ce.id===ae))==null?void 0:V.name)||p.UNKNOWN_PERSON},ue=()=>{if(!b||!T){alert(p.SELECT_DATE_RANGE);return}const ae=new Date(b);ae.setHours(0,0,0,0);const V=new Date(T);V.setHours(23,59,59,999);let ce=0;const M=[],k=i.find(de=>de.id===h);k?(ce=k.initialBalance,t.forEach(de=>{de.bankAccountId===k.id&&new Date(de.date)<ae&&(ce+=de.type===fs.INCOME?de.amount:-de.amount)}),s.forEach(de=>{var Ne;(Ne=de.paymentsReceived)==null||Ne.forEach(Ue=>{Ue.bankAccountId===k.id&&new Date(Ue.paymentDate)<ae&&(ce+=de.invoiceType===Sa.SALES?Ue.amount:-Ue.amount)})})):h==="all"&&i.filter(de=>!de.isDeleted).forEach(de=>{ce+=de.initialBalance,t.forEach(Ne=>{Ne.bankAccountId===de.id&&new Date(Ne.date)<ae&&(ce+=Ne.type===fs.INCOME?Ne.amount:-Ne.amount)}),s.forEach(Ne=>{var Ue;(Ue=Ne.paymentsReceived)==null||Ue.forEach(we=>{we.bankAccountId===de.id&&new Date(we.paymentDate)<ae&&(ce+=Ne.invoiceType===Sa.SALES?we.amount:-we.amount)})})}),L&&t.filter(de=>(h==="all"?!!de.bankAccountId:de.bankAccountId===h)&&new Date(de.date)>=ae&&new Date(de.date)<=V&&!de.isDeleted).forEach(de=>{M.push({id:`tx-${de.id}`,date:de.date,description:de.description,typeLabel:de.type===fs.INCOME?p.ENTRY_TYPE_INCOME:p.ENTRY_TYPE_EXPENSE,credit:de.type===fs.INCOME?de.amount:0,debit:de.type===fs.EXPENSE?de.amount:0,runningBalance:0,originalItemType:"transaction",originalItemId:de.id})}),I&&s.filter(de=>de.invoiceType===Sa.SALES&&!de.isDeleted).forEach(de=>{var Ne;(Ne=de.paymentsReceived)==null||Ne.forEach(Ue=>{(h==="all"?Ue.bankAccountId:Ue.bankAccountId===h)&&new Date(Ue.paymentDate)>=ae&&new Date(Ue.paymentDate)<=V&&M.push({id:`invp-${de.id}-${Ue.id}`,date:Ue.paymentDate,description:`${p.ENTRY_TYPE_SALES_PAYMENT} (${de.invoiceNumber} - ${he(de.personId)})`,typeLabel:p.ENTRY_TYPE_SALES_PAYMENT,credit:Ue.amount,debit:0,runningBalance:0,originalItemType:"invoice_payment",originalItemId:de.id})})}),O&&s.filter(de=>de.invoiceType===Sa.PURCHASE&&!de.isDeleted).forEach(de=>{var Ne;(Ne=de.paymentsReceived)==null||Ne.forEach(Ue=>{(h==="all"?Ue.bankAccountId:Ue.bankAccountId===h)&&new Date(Ue.paymentDate)>=ae&&new Date(Ue.paymentDate)<=V&&M.push({id:`invp-${de.id}-${Ue.id}`,date:Ue.paymentDate,description:`${p.ENTRY_TYPE_PURCHASE_PAYMENT} (${de.invoiceNumber} - ${he(de.personId)})`,typeLabel:p.ENTRY_TYPE_PURCHASE_PAYMENT,credit:0,debit:Ue.amount,runningBalance:0,originalItemType:"invoice_payment",originalItemId:de.id})})}),se&&t.filter(de=>{var Ne;return((Ne=de.linkedLedgerEntryId)==null?void 0:Ne.startsWith("debt_settle_"))&&(h==="all"?!!de.bankAccountId:de.bankAccountId===h)&&new Date(de.date)>=ae&&new Date(de.date)<=V&&!de.isDeleted}).forEach(de=>{const Ne=de.type===fs.INCOME?p.ENTRY_TYPE_DEBT_RECEIVED_TO_BANK:p.ENTRY_TYPE_DEBT_PAID_FROM_BANK;M.push({id:`debt-tx-${de.id}`,date:de.date,description:de.description,typeLabel:Ne,credit:de.type===fs.INCOME?de.amount:0,debit:de.type===fs.EXPENSE?de.amount:0,runningBalance:0,originalItemType:"debt_settlement",originalItemId:de.linkedLedgerEntryId||de.id})}),M.sort((de,Ne)=>new Date(de.date).getTime()-new Date(Ne.date).getTime());let Y=ce,Q=0,fe=0;const ve=M.map(de=>(Y=Y+de.credit-de.debit,Q+=de.credit,fe+=de.debit,{...de,runningBalance:Y}));xe(ce),J(ve),G(Q),K(fe),H(Y)};return D.useEffect(()=>{n&&ue()},[n,h,b,T,L,I,O,se]),l.jsx(Ya,{isOpen:n,onClose:e,title:p.BANK_REPORT_MODAL_TITLE,size:"3xl",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200 mb-4 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bankAccountFilter",className:"block text-xs font-medium text-slate-500 mb-1",children:p.SELECT_BANK_ACCOUNT_LABEL}),l.jsxs("select",{id:"bankAccountFilter",value:h,onChange:ae=>_(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",children:[l.jsx("option",{value:"all",children:p.ALL_BANK_ACCOUNTS_OPTION}),i.filter(ae=>!ae.isDeleted).map(ae=>l.jsx("option",{value:ae.id,children:ae.accountName},ae.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reportStartDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.START_DATE}),l.jsx("input",{type:"date",id:"reportStartDate",value:b,onChange:ae=>v(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reportEndDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.END_DATE}),l.jsx("input",{type:"date",id:"reportEndDate",value:T,onChange:ae=>C(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1.5",children:p.FILTER_BY_ENTRY_TYPE_LABEL}),l.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1.5 text-xs",children:[{label:p.INCLUDE_DIRECT_TRANSACTIONS_LABEL,state:L,setter:R},{label:p.INCLUDE_SALES_INVOICE_PAYMENTS_LABEL,state:I,setter:j},{label:p.INCLUDE_PURCHASE_BILL_PAYMENTS_LABEL,state:O,setter:U},{label:p.INCLUDE_DEBT_SETTLEMENTS_LABEL,state:se,setter:Z}].map(ae=>l.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ae.state,onChange:V=>ae.setter(V.target.checked),className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),l.jsx("span",{className:"text-slate-700",children:ae.label})]},ae.label))})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:[l.jsxs("div",{className:"mb-3 p-2.5 bg-sky-50 rounded-md border border-sky-200 text-xs",children:[l.jsx("h3",{className:"font-semibold text-sky-700 mb-1",children:p.REPORT_SUMMARY_TITLE}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-2 gap-y-0.5",children:[l.jsxs("span",{children:[p.OPENING_BALANCE_LABEL,":"]})," ",l.jsxs("span",{className:"text-right font-medium",children:[oe.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]}),l.jsxs("span",{children:[p.TOTAL_CREDITS_LABEL,":"]})," ",l.jsxs("span",{className:"text-right font-medium text-green-600",children:["+",Te.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]}),l.jsxs("span",{children:[p.TOTAL_DEBITS_LABEL,":"]})," ",l.jsxs("span",{className:"text-right font-medium text-red-600",children:["-",re.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]}),l.jsxs("span",{className:"font-semibold",children:[p.CLOSING_BALANCE_LABEL,":"]})," ",l.jsxs("span",{className:`text-right font-semibold ${F>=0?"text-sky-700":"text-red-700"}`,children:[F.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]})]})]}),ee.length===0?l.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_BANK_ACTIVITIES_FOR_PERIOD}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.REPORT_TABLE_DATE_HEADER}),l.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.REPORT_TABLE_DESCRIPTION_HEADER}),l.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.REPORT_TABLE_TYPE_HEADER}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.REPORT_TABLE_CREDIT_HEADER}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.REPORT_TABLE_DEBIT_HEADER}),l.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.REPORT_TABLE_BALANCE_HEADER})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:ee.map(ae=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-500",children:new Date(ae.date).toLocaleDateString("bn-BD")}),l.jsx("td",{className:"px-2 py-2 whitespace-normal break-words max-w-xs text-slate-700",children:ae.description}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-600",children:ae.typeLabel}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-green-600",children:ae.credit>0?ae.credit.toLocaleString("bn-BD",{minimumFractionDigits:2}):"-"}),l.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-red-600",children:ae.debit>0?ae.debit.toLocaleString("bn-BD",{minimumFractionDigits:2}):"-"}),l.jsx("td",{className:`px-2 py-2 whitespace-nowrap text-right font-medium ${ae.runningBalance>=0?"text-slate-800":"text-red-700"}`,children:ae.runningBalance.toLocaleString("bn-BD",{minimumFractionDigits:2})})]},ae.id))})]})})]}),l.jsx("div",{className:"mt-5 pt-4 border-t border-slate-200 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-500 hover:bg-slate-600 rounded-lg shadow-sm",children:p.CLOSE_BTN})})]})})};let O0=0,g2=0;const x2=()=>{const n=Date.now();return n===g2?O0++:(O0=0,g2=n),`pay_${n}_${O0}_${Math.random().toString(36).substring(2,9)}`},sR=()=>{const n=Nc(),e=!1,t="previewUserSSR";let s,r;s=n.currentUser,r=n.isAuthLoading;const{authError:i,clearAuthError:c,login:d,signup:f,logout:h,requestPasswordReset:_,resetPasswordWithCode:b,changePassword:v,updateCurrentUserData:T}=n,{addNotification:C}=ur(),[L,R]=D.useState([]),[I,j]=D.useState([]),[O,U]=D.useState([]),[se,Z]=D.useState([]),[ee,J]=D.useState([]),[oe,xe]=D.useState([]),[F,H]=D.useState([]),[re,K]=D.useState([]),[Te,G]=D.useState([]),[he,ue]=D.useState([]),[ae,V]=D.useState([]),[ce,M]=D.useState([]),[k,Y]=D.useState(()=>{const $=localStorage.getItem(Tt.GEMINI_SETTINGS);if($)try{return JSON.parse($)}catch(Se){console.error("Failed to parse Gemini settings from localStorage",Se)}return Bo}),[Q,fe]=D.useState(!0),[ve,de]=D.useState(null),[Ne,Ue]=D.useState("bn-BD"),[we,Je]=D.useState(()=>{const $=localStorage.getItem(Tt.AI_VOICE_REPLAY_ENABLED);return $?JSON.parse($):!1}),[Ze,Qe]=D.useState(()=>localStorage.getItem(Tt.AI_ASSISTANT_SCOPE)||"app"),[je,ge]=D.useState(!1),Fe=D.useRef(null),[ut,Pe]=D.useState(!1),[nt,it]=D.useState(null),[st,Nt]=D.useState(()=>{const $=localStorage.getItem(Tt.AI_ASSISTANT_LOGS);try{return $?JSON.parse($):[]}catch(Se){return console.error("Failed to parse AI logs from localStorage",Se),[]}}),[Pt,Rt]=D.useState(!1),[Ft,Yt]=D.useState(()=>{const $=localStorage.getItem(Tt.EXPENSE_FIELD_REQUIREMENTS);if($)try{return JSON.parse($)}catch(Se){console.error("Failed to parse expense field requirements from localStorage",Se)}return{quantityRequired:!1,unitRequired:!1,notesRequired:!1}}),[Be,We]=D.useState(()=>{const $=localStorage.getItem(Tt.GLOBAL_PHONETIC_MODE);if($)try{return JSON.parse($)}catch(Se){return console.error("Failed to parse global phonetic mode from localStorage",Se),!1}return!1}),[Lt,pe]=D.useState(!1),[yt,At]=D.useState(null),[Kt,Gt]=D.useState(!1),[xn,rs]=D.useState(null),[Cn,Ws]=D.useState(!1),[Un,js]=D.useState(!1),[ln,ls]=D.useState(!1),[un,Mn]=D.useState(null),[qa,gs]=D.useState(!1),[ca,vn]=D.useState(null),[Xt,Ln]=D.useState(!1),[kn,Fn]=D.useState(!1),[Rn,_s]=D.useState(null),[hs,er]=D.useState(!1),[Ca,En]=D.useState(null),[bs,Qt]=D.useState(!1),[Ls,Ts]=D.useState(null),[$n,La]=D.useState(!1),[ua,Bs]=D.useState(!1),[ms,wa]=D.useState(null),[Is,ka]=D.useState(!1),[Wn,Ns]=D.useState(!1),[da,ws]=D.useState(null),[tr,Ta]=D.useState(!1),[sa,Gr]=D.useState(null),[mn,Hr]=D.useState(!1),[Ds,ea]=D.useState(!1),[Yr,wr]=D.useState(!1),[dr,vs]=D.useState(!1),[Ia,li]=D.useState(!1),[cs,qr]=D.useState(!1),[_i,bi]=D.useState(!1),[Er,ci]=D.useState(!1),[Ti,za]=D.useState(!1),[ui,Ir]=D.useState(!1),[Da,Ni]=D.useState(!1),[be,Re]=D.useState(!1),[ze,dt]=D.useState(!1),[bt,Dt]=D.useState(!1),[wt,xt]=D.useState(!1),[Zt,_n]=D.useState(!1),[on,ts]=D.useState(null),[Yn,jn]=D.useState(null),[yn,Dr]=D.useState(!1),[zr,fr]=D.useState(!1),[di,nr]=D.useState(!1),[fi,fa]=D.useState(null),[sr,_r]=D.useState(!1),[br,Pi]=D.useState(!1),[Zi,le]=D.useState(null),[_e,tt]=D.useState(null),[Xe,rt]=D.useState(!1),[_t,mt]=D.useState(null),[Bt,kt]=D.useState(!1),[Ct,$t]=D.useState(!1),[Bn,Kn]=D.useState(null),[Xn,zn]=D.useState(!1),[ha,bn]=D.useState(null),[Gs,aa]=D.useState("login"),[dn,ys]=D.useState(!1),[Tr,Yo]=D.useState(),[Mi,_o]=D.useState(!1),[S,q]=D.useState(!1),[Ee,Ae]=D.useState(!1),[Me,et]=D.useState({title:"",message:"",onConfirmAction:()=>Promise.resolve(),confirmButtonText:void 0,confirmButtonColor:void 0}),[vt,Vt]=D.useState(!1),Jt=D.useMemo(()=>(s==null?void 0:s.email)===Mb,[s]),pn=D.useCallback($=>{const Se={id:Date.now().toString()+Math.random().toString(16).substring(2),timestamp:new Date().toISOString(),...$};Nt(ot=>{const at=[...ot,Se];try{localStorage.setItem(Tt.AI_ASSISTANT_LOGS,JSON.stringify(at))}catch(St){console.error("Failed to save AI logs to localStorage:",St)}return at})},[]),wn=D.useCallback(()=>{Nt([]),localStorage.removeItem(Tt.AI_ASSISTANT_LOGS),C(p.AI_LOG_CLEARED_SUCCESS,"success")},[C]),as=$=>{Je($)};D.useEffect(()=>{localStorage.setItem(Tt.AI_VOICE_REPLAY_ENABLED,JSON.stringify(we))},[we]);const Ks=$=>{Qe($)};D.useEffect(()=>{localStorage.setItem(Tt.AI_ASSISTANT_SCOPE,Ze)},[Ze]);const Xs=D.useCallback(async()=>{if(!(!s||!s.id||e)){if(s.enableDataFetchOnStartup===!1){console.log("Data fetch on startup is disabled by admin setting. Skipping data load."),fe(!1),C("     ","info",5e3);return}fe(!0);try{const[$,Se,ot,at,St,Mt,It,sn,Wt,an,rn,is]=await Promise.all([ri("transactions",s.id),ri("debts",s.id),ri("persons",s.id),ri("person_ledger_entries",s.id),rT(s.id),ri("budgetCategories",s.id),ri("budgets",s.id),ri("messages",s.id),ri("invoices",s.id),ri("products",s.id),ri("company_profiles",s.id),ri("bank_accounts",s.id)]);R($),j(Se),U(ot),Z(at),J(St),xe(Mt),H(It),K(sn),G(Wt),ue(an),V(rn),M(is);const ga=localStorage.getItem(Tt.DEFAULT_BANK_ACCOUNT_ID);s.defaultBankAccountId?tt(s.defaultBankAccountId):ga&&tt(ga)}catch($){console.error("Error loading data:",$),de(`    : ${$.message}`),C(`    : ${$.message}`,"error")}finally{fe(!1)}}},[s,C,e]);D.useEffect(()=>{s&&s.id?Xs():(R([]),j([]),U([]),Z([]),J([]),xe([]),H([]),K([]),G([]),ue([]),V([]),M([]),r||fe(!1))},[s,Xs,e,r]),D.useEffect(()=>{localStorage.setItem(Tt.EXPENSE_FIELD_REQUIREMENTS,JSON.stringify(Ft))},[Ft]),D.useEffect(()=>{localStorage.setItem(Tt.GLOBAL_PHONETIC_MODE,JSON.stringify(Be))},[Be]),D.useEffect(()=>{localStorage.setItem(Tt.GEMINI_SETTINGS,JSON.stringify(k))},[k]),D.useEffect(()=>{_e?localStorage.setItem(Tt.DEFAULT_BANK_ACCOUNT_ID,_e):localStorage.removeItem(Tt.DEFAULT_BANK_ACCOUNT_ID)},[_e]);const ma=()=>{We($=>{const Se=!$;return C(Se?p.PHONETIC_BANGLA_ACTIVE:p.PHONETIC_ENGLISH_ACTIVE,"info",3e3),Se})},Hs=async $=>{if(!s||!s.id||s.id===t)return C((s==null?void 0:s.id)===t?"       ":p.AUTH_ERROR_GENERAL,"info"),!1;const Se=`tx_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,ot=new Date().toISOString(),at={...$,id:Se,userId:s.id,originalDate:$.date,lastModified:ot,editHistory:[{timestamp:ot,action:"created",userId:s.id,snapshot:{date:$.date,description:$.description,amount:$.amount,type:$.type,originalDate:$.date,linkedLedgerEntryId:$.linkedLedgerEntryId,bankAccountId:$.bankAccountId,bankAccountName:$.bankAccountName,isDeleted:!1,deletedAt:void 0}}]},St={...at};try{const Mt=await Du("transactions",s.id,at);return Mt.success?(R(It=>[St,...It.filter(sn=>sn.id!==St.id)]),C(p.TRANSACTION_ADDED_SUCCESS||"   !","success"),!0):(console.error("Error adding transaction (backend success:false):",Mt.error,Mt.sql),C(`    : ${Mt.error||" "}`,"error"),!1)}catch(Mt){return console.error("Error adding transaction (exception):",Mt),C(`    : ${Mt.message}`,"error"),!1}},ja=async $=>{if(!s||!s.id||s.id===t){C((s==null?void 0:s.id)===t?"      ":p.AUTH_ERROR_GENERAL,"info"),pe(!1),At(null);return}const Se=new Date().toISOString(),ot={...$,lastModified:Se,editHistory:[...$.editHistory||[],{timestamp:Se,action:"updated",userId:s.id,snapshot:{date:$.date,description:$.description,amount:$.amount,type:$.type,originalDate:$.originalDate,linkedLedgerEntryId:$.linkedLedgerEntryId,bankAccountId:$.bankAccountId,bankAccountName:$.bankAccountName,isDeleted:$.isDeleted,deletedAt:$.deletedAt}}]};try{R(at=>at.map(St=>St.id===ot.id?ot:St)),await gi("transactions",s.id,ot,`id = '${ot.id}'`),C(p.TRANSACTION_UPDATED,"success"),pe(!1),At(null)}catch(at){console.error("Error saving transaction:",at),C(`    : ${at.message}`,"error"),R(St=>St.map(Mt=>Mt.id===$.id?$:Mt))}},Rr=async $=>{if(!s||!s.id||s.id===t){C((s==null?void 0:s.id)===t?"     ":p.AUTH_ERROR_GENERAL,"info");return}const Se=L.find(ot=>ot.id===$);if(Se){const ot=new Date().toISOString(),at={date:Se.date,description:Se.description,amount:Se.amount,type:Se.type,originalDate:Se.originalDate,linkedLedgerEntryId:Se.linkedLedgerEntryId,bankAccountId:Se.bankAccountId,bankAccountName:Se.bankAccountName,isDeleted:!0,deletedAt:ot},St={...Se,isDeleted:!0,deletedAt:ot,lastModified:new Date().toISOString(),editHistory:[...Se.editHistory||[],{timestamp:new Date().toISOString(),action:"deleted",userId:s.id,snapshot:at}]};R(Mt=>Mt.map(It=>It.id===$?St:It)),await gi("transactions",s.id,{isDeleted:1,deletedAt:St.deletedAt,lastModified:St.lastModified,editHistory:JSON.stringify(St.editHistory)},`id = '${$}'`),C(p.ITEM_DELETED,"success")}},hr=async $=>{console.log("Restore transaction",$)},Or=$=>{rs($),Gt(!0)},qo=async($,Se)=>{if(!s||!s.id||s.id===t){C((s==null?void 0:s.id)===t?"  /    ":p.AUTH_ERROR_GENERAL,"info"),Se?ls(!1):js(!1);return}let ot=$.explicitSelectedPersonId;if(!ot&&$.personNameValue.trim()){const Mt=O.find(It=>!It.isDeleted&&(It.customAlias&&It.customAlias.toLowerCase()===$.personNameValue.trim().toLowerCase()||It.name.toLowerCase()===$.personNameValue.trim().toLowerCase()));if(Mt)ot=Mt.id;else{C("                   ","warning");const It=await $r({name:$.personNameValue.trim()});if(It&&It.id)ot=It.id,C(p.PERSON_ADDED_IMPLICITLY_DEBT.replace("{personName}",$.personNameValue.trim()),"success");else{C("         ","error");return}}}if(!ot){C(p.PERSON_NAME_REQUIRED,"error");return}const at=new Date().toISOString(),St=$.formPurpose===ps.CREATE_PAYABLE?_a.PAYABLE:$.formPurpose===ps.CREATE_RECEIVABLE?_a.RECEIVABLE:null;if(!St&&!Se){C("/    ","error");return}if(Se){const Mt=I.find(an=>an.id===Se);if(!Mt){C("  /   ","error");return}const It={personId:ot,originalAmount:$.amount,remainingAmount:$.amount-(Mt.originalAmount-Mt.remainingAmount),description:$.description,type:$.debtType||Mt.type,dueDate:$.dueDate||void 0,lastModified:at};It.remainingAmount<0&&(C("        ","warning"),It.remainingAmount=0),It.remainingAmount===0&&Mt.isSettled;const sn={timestamp:at,action:"updated",userId:s.id,snapshot:{personId:It.personId,originalAmount:It.originalAmount,remainingAmount:It.remainingAmount,description:It.description,type:It.type,dueDate:It.dueDate,isSettled:Mt.isSettled,creationDate:Mt.creationDate,settledDate:Mt.settledDate}},Wt={...Mt,...It,editHistory:[...Mt.editHistory||[],sn]};try{j(an=>an.map(rn=>rn.id===Se?Wt:rn)),await gi("debts",s.id,Wt,`id = '${Se}'`),C(p.DEBT_UPDATED,"success"),ls(!1),Mn(null)}catch(an){console.error("Error updating debt:",an),C(`/   : ${an.message}`,"error"),j(rn=>rn.map(is=>is.id===Se?Mt:is))}}else{if(!St){C(" /   ","error");return}const Mt=`debt_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,It={id:Mt,userId:s.id,personId:ot,originalAmount:$.amount,remainingAmount:$.amount,description:$.description,type:St,dueDate:$.dueDate||void 0,isSettled:!1,creationDate:at,lastModified:at,editHistory:[{timestamp:at,action:"created",userId:s.id,snapshot:{personId:ot,originalAmount:$.amount,remainingAmount:$.amount,description:$.description,type:St,dueDate:$.dueDate||void 0,isSettled:!1,creationDate:at}}]};try{j(sn=>[It,...sn]),await Du("debts",s.id,It),C(p.DEBT_ADDED,"success"),js(!1)}catch(sn){console.error("Error adding debt:",sn),C(`/   : ${sn.message}`,"error"),j(Wt=>Wt.filter(an=>an.id!==Mt))}}},hi=async $=>{console.log("Delete debt",$)},mi=async $=>{var sn;if(!s||!s.id||s.id===t){C("           ","info");return}const Se=I.findIndex(Wt=>Wt.id===$);if(Se===-1)return;const ot=I[Se],at=new Date().toISOString(),Mt=!ot.isSettled,It={...ot,isSettled:Mt,settledDate:Mt?at:void 0,remainingAmount:Mt?0:ot.originalAmount,lastModified:at,editHistory:[...ot.editHistory||[],{timestamp:at,action:"updated",userId:s.id,snapshot:{...ot,isSettled:Mt,settledDate:Mt?at:void 0,remainingAmount:Mt?0:ot.originalAmount}}]};j(Wt=>Wt.map(an=>an.id===$?It:an));try{if(await gi("debts",s.id,It,`id = '${$}'`),C(Mt?"/     ":"/     ","success"),Mt&&ot.remainingAmount>0){const Wt=O.find(is=>is.id===ot.personId),an=Wt?Wt.customAlias||Wt.name:p.UNKNOWN_PERSON,rn={date:ot.settledDate||at,amount:ot.remainingAmount,type:ot.type===_a.PAYABLE?fs.EXPENSE:fs.INCOME,description:ot.type===_a.PAYABLE?` : ${an} (${ot.description})`:` : ${an} (${ot.description})`,linkedLedgerEntryId:`debt_settle_${ot.id}`,bankAccountId:_e||void 0,bankAccountName:_e?(sn=ce.find(is=>is.id===_e))==null?void 0:sn.accountName:void 0};await Hs(rn)}}catch(Wt){console.error("Error updating debt settlement status:",Wt),C(`/   : ${Wt.message}`,"error"),j(an=>an.map(rn=>rn.id===$?ot:rn))}},Ji=$=>{vn($),gs(!0)},$r=async($,Se)=>(console.log("Save person",$,Se),null),zo=async $=>{console.log("Delete person",$)},Qi=async $=>{console.log("Restore person",$)},Na=$=>{En($),er(!0)},ki=async($,Se,ot,at)=>{var rn;if(!s||!s.id||s.id===t)return;const St=he.find(is=>is.id===$);if(!St){console.error(`Product with ID ${$} not found for stock adjustment.`);return}const Mt=new Date().toISOString(),It=at||Mt,sn=(St.currentStock||0)+Se,Wt={id:`sh_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,date:It,type:"purchase_received",quantityChange:Se,newStockLevel:sn,notes:`  #${ot}  `,relatedInvoiceId:(rn=Te.find(is=>is.invoiceNumber===ot))==null?void 0:rn.id,userId:s.id},an={...St,currentStock:sn,stockHistory:[...St.stockHistory||[],Wt],lastModified:Mt};ue(is=>is.map(ga=>ga.id===$?an:ga));try{await gi("products",s.id,{currentStock:an.currentStock,stockHistory:JSON.stringify(an.stockHistory),lastModified:an.lastModified},`id = '${$}'`),C(`'${St.name}'   ${Se.toLocaleString("bn-BD")} ${St.stockUnit||""}   `,"success")}catch(is){C(`'${St.name}'     : ${is.message}`,"error"),ue(ga=>ga.map(Gl=>Gl.id===$?St:Gl))}},ji=async($,Se,ot)=>{if(!s||!s.id||s.id===t)return C((s==null?void 0:s.id)===t?"   /   ":"   ","error"),null;const at=new Date().toISOString();if(ot){const St=he.find(It=>It.id===ot);if(!St)return C("   ","error"),null;const Mt={...St,...$,stockUnit:(Se==null?void 0:Se.stockUnit)||St.stockUnit||p.DEFAULT_UNIT_PIECE,lowStockThreshold:(Se==null?void 0:Se.lowStockThreshold)??St.lowStockThreshold??5,lastModified:at};return ue(It=>It.map(sn=>sn.id===ot?Mt:sn)),await gi("products",s.id,Mt,`id = '${ot}'`),C(p.PRODUCT_UPDATED_SUCCESS,"success"),nr(!1),fa(null),fr(!0),Mt}else{const St={id:`prod_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,userId:s.id,...$,createdAt:at,lastModified:at,currentStock:(Se==null?void 0:Se.initialStock)??0,stockUnit:(Se==null?void 0:Se.stockUnit)||p.DEFAULT_UNIT_PIECE,lowStockThreshold:(Se==null?void 0:Se.lowStockThreshold)??5,stockHistory:Se!=null&&Se.initialStock&&Se.initialStock>0?[{id:`sh_${Date.now()}`,date:at,type:"initial",quantityChange:Se.initialStock,newStockLevel:Se.initialStock,userId:s.id}]:[]};return ue(Mt=>[St,...Mt]),await Du("products",s.id,St),C(p.PRODUCT_ADDED_SUCCESS,"success"),nr(!1),fr(!0),St}},bo=async $=>{console.log("Delete product",$)},$o=async $=>{console.log("Restore product",$)},mr=async($,Se)=>{if(!s||!s.id||s.id===t)return C((s==null?void 0:s.id)===t?"   /   ":"   ","error"),null;const ot=new Date().toISOString();if(Se){const at=Te.find(It=>It.id===Se);if(!at)return C(p.INVOICE_NOT_FOUND_ERROR||"   ","error"),null;const St=at.invoiceType,Mt={...at,...$,invoiceType:St,lastModified:ot,editHistory:[...at.editHistory||[],{timestamp:ot,action:"updated",userId:s.id,snapshot:{invoiceNumber:$.invoiceNumber,invoiceType:St,invoiceDate:$.invoiceDate,dueDate:$.dueDate,personId:$.personId,companyProfileId:$.companyProfileId,items:$.items,subtotal:$.subtotal,totalAmount:$.totalAmount,paymentStatus:$.paymentStatus}}]};delete Mt.initialPayment,G(It=>It.map(sn=>sn.id===Se?Mt:sn)),jn(null);try{return await gi("invoices",s.id,Mt,`id = '${Se}'`),C(p.INVOICE_UPDATED_SUCCESS,"success"),Mt}catch(It){return C(p.INVOICE_CREATION_ERROR.replace("{error}",It.message).replace("",""),"error"),G(sn=>sn.map(Wt=>Wt.id===Se?at:Wt)),null}}else{if(!$.invoiceType)return C("  (/)   ","error"),null;const at=`inv_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`;let St=[],Mt=$.paymentStatus;if($.initialPayment){const sn={...$.initialPayment,id:x2(),recordedAt:ot};St.push(sn),sn.amount>=$.totalAmount?Mt=Ht.PAID:sn.amount>0&&(Mt=Ht.PARTIALLY_PAID)}const It={...$,id:at,userId:s.id,createdAt:ot,lastModified:ot,paymentsReceived:St,paymentStatus:Mt,editHistory:[],isDeleted:!1};G(sn=>[It,...sn]);try{if(await Du("invoices",s.id,It),C(p.INVOICE_CREATED_SUCCESS,"success"),(It.paymentStatus===Ht.PAID||It.paymentStatus===Ht.PARTIALLY_PAID)&&It.initialPayment&&It.initialPayment.amount>0){const sn=It.initialPayment.amount;let Wt="",an;It.invoiceType===Sa.SALES?(Wt=p.INVOICE_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",It.invoiceNumber).replace("{amount}",sn.toLocaleString("bn-BD")),an=fs.INCOME):(Wt=p.BILL_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",It.invoiceNumber).replace("{amount}",sn.toLocaleString("bn-BD")),an=fs.EXPENSE);const rn={date:It.initialPayment.paymentDate||ot,description:Wt,amount:sn,type:an,linkedLedgerEntryId:`invoice_${It.id}_payment_initial`,bankAccountId:It.initialPayment.bankAccountId,bankAccountName:It.initialPayment.bankAccountName};await Hs(rn)}if(It.invoiceType===Sa.PURCHASE)for(const sn of It.items)if(sn.originalProductId)await ki(sn.originalProductId,sn.quantity,It.invoiceNumber,It.invoiceDate);else{const Wt=he.find(an=>an.name===sn.productName);Wt?await ki(Wt.id,sn.quantity,It.invoiceNumber,It.invoiceDate):console.warn(`Could not adjust stock for item '${sn.productName}' in purchase bill ${It.invoiceNumber} as product ID was missing or product not found by name.`)}return It}catch(sn){return C(p.INVOICE_CREATION_ERROR.replace("{error}",sn.message),"error"),G(Wt=>Wt.filter(an=>an.id!==at)),null}}},Ac=async($,Se)=>{if(!s||!s.id||s.id===t){C((s==null?void 0:s.id)===t?"      ":"   ","error");return}const ot=Te.findIndex(rn=>rn.id===$);if(ot===-1){C(p.INVOICE_NOT_FOUND_ERROR||"   ","error");return}const at=Te[ot],St=new Date().toISOString(),Mt={...Se,id:x2(),recordedAt:St},It=[...at.paymentsReceived||[],Mt],sn=It.reduce((rn,is)=>rn+is.amount,0);let Wt=at.paymentStatus;Math.abs(sn-at.totalAmount)<.001?Wt=Ht.PAID:sn>0?Wt=Ht.PARTIALLY_PAID:Wt=Ht.PENDING;const an={...at,paymentsReceived:It,paymentStatus:Wt,lastModified:St,editHistory:[...at.editHistory||[],{timestamp:St,action:"payment_recorded",userId:s.id,snapshot:{...at,items:at.items,paymentsReceived:It,paymentStatus:Wt,invoiceType:at.invoiceType}}]};G(rn=>rn.map(is=>is.id===$?an:is));try{await gi("invoices",s.id,an,`id = '${$}'`),C(p.PAYMENT_RECORDED_SUCCESS,"success");let rn="",is;an.invoiceType===Sa.SALES?(rn=p.INVOICE_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",an.invoiceNumber).replace("{amount}",Se.amount.toLocaleString("bn-BD")),is=fs.INCOME):(rn=p.BILL_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",an.invoiceNumber).replace("{amount}",Se.amount.toLocaleString("bn-BD")),is=fs.EXPENSE);const ga={date:Se.paymentDate,description:rn,amount:Se.amount,type:is,linkedLedgerEntryId:`invoice_${$}_payment_${Mt.id}`,bankAccountId:Se.bankAccountId,bankAccountName:Se.bankAccountName};await Hs(ga)}catch(rn){C(p.PAYMENT_RECORDING_ERROR.replace("{error}",rn.message),"error"),G(is=>is.map(ga=>ga.id===$?at:ga))}},gl=async($,Se)=>(console.log("Save company profile",$,Se),null),Fl=async($,Se)=>{console.log("Update company profile",$,Se)},Wr=async $=>{console.log("Delete company profile",$)},Ba=()=>_r(!0),eo=()=>{_r(!1),le(null),Pi(!0)},xl=$=>{_r(!1),le($),Pi(!0)},vi=()=>{Pi(!1),le(null),_r(!0)},to=async($,Se)=>{var at;if(!s||!s.id||s.id===t){C((s==null?void 0:s.id)===t?"       ":"   ","error");return}const ot=new Date().toISOString();if(Se){const St=ce.find(It=>It.id===Se);if(!St){C("    ","error");return}const Mt={...St,...$,lastModified:ot,editHistory:[...St.editHistory||[],{timestamp:ot,action:"updated",userId:s.id,snapshot:{...$,isDeleted:St.isDeleted,deletedAt:St.deletedAt}}]};M(It=>It.map(sn=>sn.id===Se?Mt:sn)),await gi("bank_accounts",s.id,Mt,`id = '${Se}'`),C(p.BANK_ACCOUNT_UPDATED_SUCCESS,"success")}else{const Mt={id:`bank_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,userId:s.id,...$,createdAt:ot,lastModified:ot,editHistory:[{timestamp:ot,action:"created",userId:s.id,snapshot:{...$,isDeleted:!1}}]};M(It=>[Mt,...It]),await Du("bank_accounts",s.id,Mt),C(p.BANK_ACCOUNT_ADDED_SUCCESS,"success")}$.isDefault?await va(Se||((at=ce.find(St=>St.accountName===$.accountName))==null?void 0:at.id)||""):Se&&_e===Se&&!$.isDefault&&await va(""),vi()},pr=async $=>{!s||!s.id||s.id===t||kr(p.CONFIRM_DELETE_BANK_ACCOUNT_MSG.split("?")[0]+"?",p.CONFIRM_DELETE_BANK_ACCOUNT_MSG.split("?")[1],async()=>{const Se=ce.find(St=>St.id===$);if(!Se)return;const ot=new Date().toISOString(),at={...Se,isDeleted:!0,deletedAt:ot,lastModified:ot,editHistory:[...Se.editHistory||[],{timestamp:ot,action:"deleted",userId:s.id,snapshot:{...Se,isDeleted:!0,deletedAt:ot}}]};M(St=>St.map(Mt=>Mt.id===$?at:Mt)),await gi("bank_accounts",s.id,{isDeleted:1,deletedAt:ot,lastModified:ot,editHistory:JSON.stringify(at.editHistory)},`id = '${$}'`),C(p.BANK_ACCOUNT_DELETED_SUCCESS,"success"),_e===$&&await va("")},p.CONFIRM_BTN_YES_DELETE,"bg-red-600 hover:bg-red-700 focus:ring-red-500")},va=async $=>{if(!s)return;const Se=ce.find(at=>at.isDefault),ot=ce.find(at=>at.id===$);M(at=>at.map(St=>({...St,isDefault:St.id===$}))),tt($||null);try{await T({defaultBankAccountId:$||null}),Se&&Se.id!==$&&await gi("bank_accounts",s.id,{isDefault:0},`id = '${Se.id}'`),ot&&ot.id!==(Se==null?void 0:Se.id)&&await gi("bank_accounts",s.id,{isDefault:1},`id = '${ot.id}'`),ot?C(p.BANK_ACCOUNT_SET_AS_DEFAULT_SUCCESS.replace("{accountName}",ot.accountName),"success"):Se&&C(p.BANK_ACCOUNT_REMOVED_AS_DEFAULT_SUCCESS.replace("{accountName}",Se.accountName),"info")}catch(at){C(`     : ${at.message}`,"error"),M(St=>St.map(Mt=>({...Mt,isDefault:Mt.id===(Se==null?void 0:Se.id)}))),tt((Se==null?void 0:Se.id)||null)}},Kr=D.useMemo(()=>L.filter($=>$.type===fs.INCOME&&!$.isDeleted).reduce(($,Se)=>$+Se.amount,0),[L]),Ua=D.useMemo(()=>L.filter($=>$.type===fs.EXPENSE&&!$.isDeleted).reduce(($,Se)=>$+Se.amount,0),[L]),Nr=D.useMemo(()=>Kr-Ua,[Kr,Ua]),Xr=D.useMemo(()=>I.filter($=>$.type===_a.PAYABLE&&!$.isSettled).reduce(($,Se)=>$+Se.remainingAmount,0),[I]),Pr=D.useMemo(()=>I.filter($=>$.type===_a.RECEIVABLE&&!$.isSettled).reduce(($,Se)=>$+Se.remainingAmount,0),[I]),Us=D.useMemo(()=>{const $=[...fh,...hh,...ee.map(Se=>Se.text)];return[...new Set($)].sort((Se,ot)=>Se.localeCompare(ot,"bn-BD"))},[ee]),ar=D.useCallback($=>{const Se=se.filter(at=>at.personId===$);if(Se.length===0)return 0;const ot=Se.sort((at,St)=>new Date(St.date).getTime()-new Date(at.date).getTime())[0];return(ot==null?void 0:ot.balanceAfterEntry)||0},[se]),ya=()=>{fr(!1),fa(null),nr(!0)},vr=$=>{fr(!1),fa($),nr(!0)},To=()=>{nr(!1),fa(null),fr(!0)},yi=D.useMemo(()=>!s||!s.id?0:re.filter($=>$.actualReceiverId===s.id&&!$.isRead&&!$.isDeleted).length,[re,s]),Wo=D.useCallback($=>{const Se=ar($),ot=I.filter(St=>St.personId===$&&!St.isSettled);let at=0;return ot.forEach(St=>{St.type===_a.RECEIVABLE?at+=St.remainingAmount:at-=St.remainingAmount}),Se+at},[ar,I]),no=$=>{Gr($),Ta(!0)},so=()=>_o(!0),ao=()=>q(!0),No=()=>wr(!0),Ko=()=>Ln(!0),ro=()=>js(!0),Bi=()=>vs(!0),vo=()=>li(!0),ra=()=>qr(!0),Mr=()=>bi(!0),Zn=()=>ci(!0),Jn=()=>Ir(!0),Fs=()=>za(!0),pa=()=>kt(!0),Zr=()=>Ws(!0),io=()=>Ni(!0),oo=()=>Re(!0),Ui=()=>Rt(!0),Vl=()=>{jn(null),it(null),dt(!0)},yo=()=>{jn(null),it(null),Dt(!0)},Ra=()=>xt(!0),yr=()=>fr(!0),rr=()=>Dr(!0),Xo=$=>{jn($),$.invoiceType===Sa.SALES?dt(!0):$.invoiceType===Sa.PURCHASE&&Dt(!0),xt(!1)},Ai=()=>{et({title:p.RESET_APP_DATA_BTN,message:p.CONFIRM_RESET_APP_DATA_MSG,onConfirmAction:async()=>{Object.values(Tt).forEach($=>localStorage.removeItem($)),C(p.APP_DATA_RESET_SUCCESS,"success"),setTimeout(()=>window.location.reload(),2e3)},confirmButtonText:p.CONFIRM_BTN_YES_DELETE,confirmButtonColor:"bg-red-600 hover:bg-red-700 focus:ring-red-500"}),Ae(!0)},lo=$=>{Ts(()=>$),Qt(!0)},Ao=()=>{Qt(!1),La(!0),_s(null),Fn(!0)},Fi=async($,Se)=>{const ot=await $r($,Se);ot&&Ls&&Ls(ot.id),Fn(!1),La(!1),Ts(null)},El=()=>{Fn(!1),La(!1),Ls&&Qt(!0),Ts(null)},_l=($,Se)=>{Kn({url:$,name:Se}),$t(!0)},Si=$=>{mt($),rt(!0)},Ci=$=>{bn($),zn(!0)},So=D.useCallback(async($,Se=Ne)=>{if(console.log("[AI Assistant Debug - App.tsx] ENTERING handleProcessAICommand. Transcript:",`"${$}"`,"CurrentUser ID:",s?s.id:"NULL","Language:",Se,"Scope:",Ze),!$||!s){pn({type:"error",commandText:$,errorMessage:"Transcript or currentUser was null for processing."}),Pe(!1);return}pn({type:"command",commandText:$,rawAIResponse:"Processing command..."}),u_(),Pe(!0),C(p.AI_ASSISTANT_PROCESSING,"info",3e3);const ot={totalIncome:Kr,totalExpense:Ua,balance:Nr,totalPayable:Xr,totalReceivable:Pr,activeTransactionsCount:L.filter(at=>!at.isDeleted).length,personsCount:O.filter(at=>!at.isDeleted).length,featureList:[p.APP_FEATURE_TRANSACTION_TRACKING,p.APP_FEATURE_DEBT_MANAGEMENT,p.APP_FEATURE_PERSON_MANAGEMENT,p.APP_FEATURE_BUDGETING,p.APP_FEATURE_INVOICING,p.APP_FEATURE_PRODUCT_MANAGEMENT,p.APP_FEATURE_AI_FINANCIAL_TIPS,p.APP_FEATURE_CHAT_WITH_CONTACTS,p.APP_FEATURE_DATA_REPORTS,p.APP_FEATURE_USER_PROFILE_SETTINGS,p.APP_FEATURE_DATA_QUERY_AI]};try{const at=await cI($,ot,k,Se,Ze),St=at==null?void 0:at.intent;let Mt=(at==null?void 0:at.responseText)||(Se==="bn-BD"?p.AI_REPLY_CANNOT_UNDERSTAND:"Sorry, I couldn't understand your request.");const It=at==null?void 0:at.actionDetails,sn=(at==null?void 0:at.rawResponse)||JSON.stringify(at);let Wt=Mt;St==="perform_action"&&(It!=null&&It.actionType)?Wt=Se==="bn-BD"?p.AI_ACTION_PERFORMED:"Okay, initiating that action for you.":St==="query_app_data"&&It||(St==="explain_feature"?Wt=at.responseText||(Se==="bn-BD"?"     ":"I'm unable to explain that feature."):St==="general_query"?Wt=at.responseText||(Se==="bn-BD"?",      ":"Sorry, I don't have an answer for that question."):Wt=at.responseText||(Se==="bn-BD"?p.AI_FALLBACK_RESPONSE:"Sorry, I can only assist with matters related to this application.")),we&&np(Wt,Se),pn({type:at!=null&&at.error?"error":"response",commandText:$,responseText:Wt,parsedIntent:St,actionDetails:It,rawAIResponse:sn,errorMessage:at!=null&&at.error?`AI Service Error: ${at.error}`:void 0})}catch(at){console.error("[AI Assistant Debug - App.tsx] CATCH BLOCK in handleProcessAICommand. Error:",at);const St=at.message||p.AI_ASSISTANT_ERROR_UNKNOWN;C(St,"error");const Mt=Se==="bn-BD"?p.AI_REPLY_GENERAL_ERROR:"Sorry, an error occurred.";we&&np(Mt,Se),pn({type:"error",commandText:$,errorMessage:`Error in handleProcessAICommand: ${St}`,rawAIResponse:at.toString()}),it(null)}finally{console.log("[AI Assistant Debug - App.tsx] FINALLY block in handleProcessAICommand. Setting processingAICommand to false."),Pe(!1)}},[s,pn,C,k,Kr,Ua,Nr,Xr,Pr,L,O,I,Ne,we,Ze]),bl=D.useCallback(()=>{var Se;if(ut){console.log("[AI Assistant Debug - App.tsx] AI is currently processing a command, ignoring toggle."),pn({type:"error",errorMessage:"AI command processing in progress. Cannot start new listening session now."});return}if(je&&Fe.current){console.log("[AI Assistant Debug - App.tsx] User explicitly stopped listening."),Fe.current.stop(),ge(!1);return}const $=window.SpeechRecognition||window.webkitSpeechRecognition;if(!$){const ot=p.AI_ASSISTANT_ERROR_SERVICE_UNAVAILABLE;C(ot,"error"),pn({type:"error",errorMessage:`SpeechRecognitionAPI not available: ${ot}`});return}Fe.current||(console.log("[AI Assistant Debug - App.tsx] Initializing SpeechRecognition."),Fe.current=new $,Fe.current.continuous=!0,Fe.current.interimResults=!1,Fe.current.onstart=()=>{console.log("[AI Assistant Debug - App.tsx] Speech recognition started."),ge(!0),C(p.AI_ASSISTANT_LISTENING,"info",3e3)},Fe.current.onresult=ot=>{},Fe.current.onerror=ot=>{},Fe.current.onend=()=>{}),Fe.current&&(Fe.current.lang=Ne);try{console.log("[AI Assistant Debug - App.tsx] Attempting to start speech recognition with language:",Ne),(Se=Fe.current)==null||Se.start()}catch{}},[je,ut,pn,C,So,Ne]);D.useEffect(()=>()=>{Fe.current&&(console.log("[AI Assistant Debug - App.tsx] Cleaning up speech recognition service on unmount/logout."),Fe.current.stop(),Fe.current.onstart=null,Fe.current.onresult=null,Fe.current.onerror=null,Fe.current.onend=null,Fe.current=null),ge(!1)},[s]);const kr=D.useCallback(($,Se,ot,at,St)=>{et({title:$,message:Se,onConfirmAction:ot,confirmButtonText:at,confirmButtonColor:St}),Ae(!0)},[]);return l.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-800 flex flex-col",children:[l.jsx(TI,{}),l.jsx(_T,{isAdminUser:Jt,onAddIncomeClick:so,onAddExpenseClick:ao,onViewTransactionsClick:No,onManagePersonsClick:Ko,onAddDebtClick:ro,onViewReportClick:Bi,onOpenBankReportModal:vo,onOpenStockReportModal:ra,onBudgetClick:Mr,onArchiveClick:Zn,onEditProfileClick:Jn,onChangePasswordClick:Fs,onOpenInboxModal:pa,onManageSuggestionsClick:Zr,onCreateSalesInvoiceClick:Vl,onCreatePurchaseBillClick:yo,onOpenInvoiceListModal:Ra,onManageProductsClick:yr,onManageBankAccountsClick:Ba,onSwitchAuthMode:$=>{aa($),ys(!0)},unreadMessagesCount:yi,onResetAppDataClick:Ai,isGlobalPhoneticModeActive:Be,onToggleGlobalPhoneticMode:ma,onManageCompanyProfilesClick:rr,onOpenGeminiSettingsModal:io,onOpenAdminAppSettingsModal:oo,onOpenAILogModal:Ui,isProcessingAICommand:ut,isAIAssistantListening:je,onToggleAIAssistantListening:bl}),l.jsxs("main",{className:"container mx-auto p-4 flex-grow pt-20 sm:pt-24",children:[r&&l.jsx("div",{className:"text-center py-20 text-slate-600 text-lg",children:p.LOADING}),!s&&!r&&l.jsx(m3,{onSwitchAuthMode:$=>{aa($),ys(!0)},onOpenInvoiceListModal:Ra}),s&&!r&&l.jsxs(l.Fragment,{children:[Q&&l.jsx("div",{className:"text-center py-10 text-slate-500",children:p.LOADING}),!Q&&l.jsxs(l.Fragment,{children:[l.jsx(bT,{totalIncome:Kr,totalExpense:Ua,balance:Nr,totalPayable:Xr,totalReceivable:Pr,onOpenReceivablePersonsModal:()=>Hr(!0),onOpenPayablePersonsModal:()=>ea(!0)}),Jt&&l.jsx(fI,{balance:Nr,geminiSettings:k}),l.jsx(c3,{debts:I,persons:O,onDeleteDebt:hi,onToggleSettle:mi,onEditDebt:$=>{Mn($),ls(!0)},onViewHistory:Ji,onViewPersonFinancialOverview:no})]})]})]}),dn&&l.jsxs(Ya,{isOpen:dn,onClose:()=>ys(!1),title:Gs==="login"?p.LOGIN:Gs==="signup"?p.SIGNUP:p.FORGOT_PASSWORD_TITLE,children:[" ",l.jsx(pI,{mode:Gs,initialEmail:Tr,onClose:()=>ys(!1),onSwitchMode:($,Se)=>{aa($),Se&&Yo(Se)}})," "]}),Mi&&l.jsxs(Ya,{isOpen:Mi,onClose:()=>_o(!1),title:p.MODAL_TITLE_ADD_INCOME,children:[" ",l.jsx(l1,{transactionType:fs.INCOME,onAddTransaction:Hs,suggestionsList:Us.filter($=>fh.includes($)||ee.find(Se=>Se.text===$&&Se.type==="income")),onOpenManageSuggestions:()=>{_o(!1),Ws(!0)},formTitle:p.MODAL_TITLE_ADD_INCOME,expenseFieldRequirements:Ft,onUpdateExpenseFieldRequirements:()=>{},isGlobalPhoneticModeActive:Be,bankAccounts:ce,defaultBankAccountId:_e})," "]}),S&&l.jsxs(Ya,{isOpen:S,onClose:()=>q(!1),title:p.MODAL_TITLE_ADD_EXPENSE,children:[" ",l.jsx(l1,{transactionType:fs.EXPENSE,onAddTransaction:Hs,suggestionsList:Us.filter($=>hh.includes($)||ee.find(Se=>Se.text===$&&Se.type==="expense")),onOpenManageSuggestions:()=>{q(!1),Ws(!0)},formTitle:p.MODAL_TITLE_ADD_EXPENSE,expenseFieldRequirements:Ft,onUpdateExpenseFieldRequirements:$=>Yt(Se=>({...Se,...$})),isGlobalPhoneticModeActive:Be,bankAccounts:ce,defaultBankAccountId:_e})," "]}),Lt&&yt&&l.jsx(hI,{isOpen:Lt,onClose:()=>{pe(!1),At(null)},transaction:yt,onSave:ja,allSuggestions:Us,onOpenManageSuggestions:()=>{pe(!1),Ws(!0)},isGlobalPhoneticModeActive:Be,bankAccounts:ce}),Kt&&xn&&l.jsx(xI,{isOpen:Kt,onClose:()=>Gt(!1),transaction:xn}),Cn&&l.jsx(A3,{isOpen:Cn,onClose:()=>Ws(!1),userSuggestions:ee,predefinedIncomeSuggestions:fh,predefinedExpenseSuggestions:hh,onAddSuggestion:async($,Se)=>{},onEditSuggestion:async($,Se)=>{},onDeleteSuggestion:async $=>{}}),Un&&l.jsxs(Ya,{isOpen:Un,onClose:()=>js(!1),title:p.MODAL_TITLE_ADD_DEBT,children:[" ",l.jsx(mI,{onAddDebt:qo,persons:O.filter($=>!$.isDeleted),debts:I,onOpenSelectPersonModal:lo,getCompositePersonBalance:Wo})," "]}),ln&&un&&l.jsx(gI,{isOpen:ln,onClose:()=>ls(!1),debt:un,onSave:qo,persons:O.filter($=>!$.isDeleted),onOpenSelectPersonModal:lo}),qa&&ca&&l.jsx(EI,{isOpen:qa,onClose:()=>gs(!1),debt:ca,persons:O}),Xt&&l.jsxs(Ya,{isOpen:Xt,onClose:()=>Ln(!1),title:p.MANAGE_PERSONS_MODAL_TITLE,size:"xl",children:[" ",l.jsx(Q_,{persons:O,onEditPerson:$=>{_s($),Fn(!0),Ln(!1)},onDeletePerson:zo,onViewPersonHistory:Na,onAddNewPerson:()=>{_s(null),Fn(!0),Ln(!1)},onViewPersonDebtsHistory:$=>{wa($),Bs(!0)},onViewPersonLedger:$=>{ws($),Ns(!0)},getPersonNetLedgerBalance:ar,onRestorePerson:Qi,onOpenChat:Si,onOpenVideoCall:Ci})," "]}),kn&&l.jsxs(Ya,{isOpen:kn,onClose:()=>{Fn(!1),$n?El():Ln(!0)},title:Rn?p.EDIT_PERSON_MODAL_TITLE:p.ADD_PERSON_MODAL_TITLE,children:[" ",l.jsx(g3,{initialData:Rn,onSave:$n?Fi:async($,Se)=>{await $r($,Se),Fn(!1),Ln(!0)},onCancel:()=>{Fn(!1),$n?El():Ln(!0)},allPersons:O,onUserDetailsImported:$=>{}})," "]}),hs&&Ca&&l.jsx(x3,{isOpen:hs,onClose:()=>er(!1),person:Ca}),bs&&Ls&&l.jsx(E3,{isOpen:bs,onClose:()=>{Qt(!1),Ts(null)},persons:O.filter($=>!$.isDeleted),onSelectPerson:$=>{Ls($),Qt(!1),Ts(null)},onAddNewPerson:Ao}),ua&&ms&&l.jsx(_3,{isOpen:ua,onClose:()=>Bs(!1),person:ms,personDebts:I.filter($=>$.personId===ms.id),allPersons:O,onDeleteDebt:hi,onToggleSettle:mi,onEditDebt:$=>{ls(!0),Mn($),Bs(!1)},onViewDebtHistory:Ji}),Is&&da&&l.jsx(b3,{isOpen:Is,onClose:()=>ka(!1),person:da,onAddEntry:async $=>{console.log($)}}),Wn&&da&&l.jsx(T3,{isOpen:Wn,onClose:()=>Ns(!1),person:da,ledgerEntries:se.filter($=>$.personId===da.id),currentNetBalance:ar(da.id),onAddEntryClick:$=>{ka(!0),ws($)},onDeleteEntry:async($,Se)=>{}}),tr&&sa&&l.jsx(N3,{isOpen:tr,onClose:()=>Ta(!1),person:sa,personDebts:I.filter($=>$.personId===sa.id),personLedgerEntries:se.filter($=>$.personId===sa.id),currentNetLedgerBalance:ar(sa.id),allPersons:O,onDeleteDebt:hi,onToggleSettle:mi,onEditDebt:$=>{ls(!0),Mn($)},onViewDebtHistory:Ji,onAddLedgerEntryClick:$=>{ka(!0),ws($)},onDeleteLedgerEntry:async($,Se)=>{}}),mn&&l.jsx(v3,{isOpen:mn,onClose:()=>Hr(!1),receivablePersons:O.map($=>({personId:$.id,personName:$.customAlias||$.name,personMobile:$.mobileNumber,totalReceivableAmount:I.filter(Se=>Se.personId===$.id&&Se.type===_a.RECEIVABLE&&!Se.isSettled).reduce((Se,ot)=>Se+ot.remainingAmount,0)})).filter($=>$.totalReceivableAmount>0),onViewPersonDetails:$=>{Gr(O.find(Se=>Se.id===$.id)),Ta(!0),Hr(!1)},persons:O}),Ds&&l.jsx(y3,{isOpen:Ds,onClose:()=>ea(!1),payablePersons:O.map($=>({personId:$.id,personName:$.customAlias||$.name,personMobile:$.mobileNumber,totalPayableAmount:I.filter(Se=>Se.personId===$.id&&Se.type===_a.PAYABLE&&!Se.isSettled).reduce((Se,ot)=>Se+ot.remainingAmount,0)})).filter($=>$.totalPayableAmount>0),onViewPersonDetails:$=>{Gr(O.find(Se=>Se.id===$.id)),Ta(!0),ea(!1)},persons:O}),Yr&&l.jsxs(Ya,{isOpen:Yr,onClose:()=>wr(!1),title:p.MODAL_TITLE_TRANSACTION_HISTORY,size:"3xl",children:[" ",l.jsx(yp,{transactions:L,onDeleteTransaction:Rr,onEditTransaction:$=>{At($),pe(!0),wr(!1)},onViewHistory:Or,onRestoreTransaction:hr,initialShowDeleted:!1})," "]}),dr&&l.jsx(a3,{isOpen:dr,onClose:()=>vs(!1),transactions:L,allDescriptions:Us,onDeleteTransaction:Rr,onEditTransaction:$=>{At($),pe(!0),vs(!1)},onViewHistory:Or,onRestoreTransaction:hr}),Ia&&s&&l.jsx(nR,{isOpen:Ia,onClose:()=>li(!1),transactions:L,invoices:Te,persons:O,bankAccounts:ce,debts:I}),cs&&s&&l.jsx(K3,{isOpen:cs,onClose:()=>qr(!1),products:he,invoices:Te}),_i&&s&&l.jsx(S3,{isOpen:_i,onClose:()=>bi(!1),categories:oe,budgets:F,transactions:L,allTransactionSuggestions:Us,userCustomSuggestions:ee.map($=>$.text),onAddCategory:async($,Se)=>{},onUpdateCategory:async($,Se,ot)=>{},onDeleteCategory:async $=>{},onAddBudget:async($,Se,ot,at,St)=>{},onUpdateBudget:async($,Se)=>{},onDeleteBudget:async $=>{},calculateBudgetUsage:($,Se)=>({spent:0,remaining:0,percentageUsed:0})}),Er&&l.jsx(l3,{isOpen:Er,onClose:()=>ci(!1),allTransactions:L,persons:O,onRestoreTransaction:hr,onRestorePerson:Qi,onViewTransactionHistory:Or,onViewPersonHistory:Na,onEditPerson:$=>{_s($),Fn(!0),ci(!1)},onViewPersonDebtsHistory:$=>{wa($),Bs(!0)},onViewPersonLedger:$=>{ws($),Ns(!0)},getPersonNetLedgerBalance:ar,onDeleteTransaction:Rr,onEditTransaction:$=>{At($),pe(!0),ci(!1)},onOpenChat:Si,onOpenVideoCall:Ci}),Ti&&l.jsx(d3,{isOpen:Ti,onClose:()=>za(!1)}),ui&&l.jsx(f3,{isOpen:ui,onClose:()=>Ir(!1)}),Da&&Jt&&l.jsx(X3,{isOpen:Da,onClose:()=>Ni(!1),currentSettings:k,onSaveSettings:Y}),be&&Jt&&l.jsx(Z3,{isOpen:be,onClose:()=>Re(!1)}),Pt&&s&&l.jsx(J3,{isAdminUser:Jt,isOpen:Pt,onClose:()=>Rt(!1),logs:st,onClearLogs:wn,isAIAssistantListening:je,isAICommandProcessing:ut,onToggleAIAssistantListening:bl,currentAILanguage:Ne,onSetAILanguage:Ue,currentAIScope:Ze,onSetAIScope:Ks,onSendCommand:So,aiVoiceReplayEnabled:we,onSetAiVoiceReplayEnabled:as}),ze&&s&&l.jsx(B3,{isOpen:ze,onClose:()=>{dt(!1),jn(null),it(null)},onSaveInvoice:mr,persons:O.filter($=>!$.isDeleted),products:he.filter($=>!$.isDeleted),companyProfiles:ae.filter($=>!$.isDeleted),onOpenSelectPersonModal:lo,onPersonAdded:async $=>await $r($),isGlobalPhoneticModeActive:Be,onOpenManageProductsModal:yr,editingInvoiceData:Yn,aiPreRenderData:vt?nt:void 0,onAIInvoiceDataProcessed:()=>{it(null),Vt(!1)},onOpenConfirmationModal:kr}),bt&&s&&l.jsx(U3,{isOpen:bt,onClose:()=>{Dt(!1),jn(null),it(null)},onSaveInvoice:mr,persons:O.filter($=>!$.isDeleted),products:he.filter($=>!$.isDeleted),companyProfiles:ae.filter($=>!$.isDeleted),onOpenSelectPersonModal:lo,onPersonAdded:async $=>await $r($),isGlobalPhoneticModeActive:Be,onOpenManageProductsModal:yr,editingInvoiceData:Yn}),wt&&l.jsx(V3,{isOpen:wt,onClose:()=>xt(!1),invoices:Te,persons:O,onViewInvoice:$=>{ts($),_n(!0),xt(!1)},onCreateNewInvoice:()=>{jn(null),dt(!0),xt(!1)},onOpenEditInvoiceModal:Xo}),Zt&&on&&l.jsx(Y3,{isOpen:Zt,onClose:()=>{_n(!1),ts(null)},invoice:on,persons:O,companyProfiles:ae.filter($=>!$.isDeleted),onRecordPayment:Ac,currentUserName:s==null?void 0:s.name}),yn&&s&&l.jsx(z3,{isOpen:yn,onClose:()=>Dr(!1),companyProfiles:ae,onAddProfile:gl,onUpdateProfile:Fl,onDeleteProfile:Wr}),zr&&s&&l.jsx($3,{isOpen:zr,onClose:()=>fr(!1),products:he,currentUser:s,onAddNewProductClick:ya,onEditProductClick:vr,onAddProduct:async $=>{const{initialStock:Se,stockUnit:ot,lowStockThreshold:at,...St}=$;return ji(St,{initialStock:Se,stockUnit:ot,lowStockThreshold:at})},onUpdateProduct:async($,Se)=>{await ji(Se,void 0,$)},onDeleteProduct:bo,onRestoreProduct:$o,onAdjustStock:async($,Se)=>{if(!s||!s.id||s.id===t)return;const ot=he.find(sn=>sn.id===$);if(!ot)return;const at=new Date().toISOString(),St=(ot.currentStock||0)+Se.quantityChange,Mt={id:`sh_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,date:at,type:Se.type,quantityChange:Se.quantityChange,newStockLevel:St,notes:Se.notes,userId:s.id},It={...ot,currentStock:St,stockHistory:[...ot.stockHistory||[],Mt],lastModified:at};ue(sn=>sn.map(Wt=>Wt.id===$?It:Wt)),await gi("products",s.id,{currentStock:It.currentStock,stockHistory:JSON.stringify(It.stockHistory),lastModified:It.lastModified},`id = '${$}'`)},onViewStockHistory:async $=>{}}),di&&l.jsx(W3,{isOpen:di,onClose:To,onSave:ji,initialData:fi,isGlobalPhoneticModeActive:Be}),sr&&s&&l.jsx(eR,{isOpen:sr,onClose:()=>_r(!1),bankAccounts:ce,onOpenBankAccountForm:$=>$?xl($):eo(),onDeleteBankAccount:pr,onSetDefaultBankAccount:va}),br&&s&&l.jsx(tR,{isOpen:br,onClose:vi,onSave:to,initialData:Zi}),Xe&&_t&&s&&l.jsx(R3,{isOpen:Xe,onClose:()=>rt(!1),person:_t,currentUser:s,messages:re.filter($=>$.threadId===[s.id,_t.systemUserId].sort().join("_")),onSendMessage:async($,Se,ot,at)=>{},onReactToMessage:async($,Se)=>{},onDeleteMessage:async $=>{}}),Bt&&s&&l.jsx(O3,{isOpen:Bt,onClose:()=>kt(!1),currentUser:s,persons:O,messages:re,onOpenChat:Si,onOpenImageViewer:$=>$&&_l($.base64Data,$.fileName),onDeleteChatHistory:async $=>{}}),Ct&&Bn&&l.jsx(n5,{isOpen:Ct,onClose:()=>$t(!1),imageUrl:Bn.url,imageName:Bn.name}),Xn&&ha&&s&&l.jsx(j3,{isOpen:Xn,onClose:()=>zn(!1),targetPerson:ha,currentUser:s}),ve&&l.jsx(u3,{isOpen:!!ve,onClose:()=>de(null),message:ve}),Ee&&l.jsx(_I,{isOpen:Ee,onClose:()=>Ae(!1),onConfirm:async()=>{await Me.onConfirmAction(),Ae(!1)},title:String(Me.title),message:Me.message,confirmButtonText:Me.confirmButtonText,confirmButtonColor:Me.confirmButtonColor})]})},r5=document.getElementById("root");if(!r5)throw new Error("Could not find root element to mount to");const aR=Eb.createRoot(r5);aR.render(l.jsx(_p.StrictMode,{children:l.jsxs(gT,{children:[" ",l.jsx(xT,{children:l.jsx(sR,{})})]})}));export{$s as _,rR as c,E2 as g};
