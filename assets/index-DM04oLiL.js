(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();var oR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l0={exports:{}},Md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function lb(){if(Ox)return Md;Ox=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:c,ref:r!==void 0?r:null,props:l}}return Md.Fragment=e,Md.jsx=n,Md.jsxs=n,Md}var Px;function cb(){return Px||(Px=1,l0.exports=lb()),l0.exports}var o=cb(),c0={exports:{}},es={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function ub(){if(Mx)return es;Mx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,L={};function O(V,ce,M){this.props=V,this.context=ce,this.refs=L,this.updater=M||y}O.prototype.isReactComponent={},O.prototype.setState=function(V,ce){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ce,"setState")},O.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function I(){}I.prototype=O.prototype;function j(V,ce,M){this.props=V,this.context=ce,this.refs=L,this.updater=M||y}var R=j.prototype=new I;R.constructor=j,C(R,O.prototype),R.isPureReactComponent=!0;var U=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function ne(V,ce,M,k,Y,Z){return M=Z.ref,{$$typeof:t,type:V,key:ce,ref:M!==void 0?M:null,props:Z}}function J(V,ce){return ne(V.type,ce,void 0,void 0,void 0,V.props)}function oe(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function xe(V){var ce={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(M){return ce[M]})}var F=/\/+/g;function H(V,ce){return typeof V=="object"&&V!==null&&V.key!=null?xe(""+V.key):ce.toString(36)}function re(){}function K(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(re,re):(V.status="pending",V.then(function(ce){V.status==="pending"&&(V.status="fulfilled",V.value=ce)},function(ce){V.status==="pending"&&(V.status="rejected",V.reason=ce)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Te(V,ce,M,k,Y){var Z=typeof V;(Z==="undefined"||Z==="boolean")&&(V=null);var fe=!1;if(V===null)fe=!0;else switch(Z){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(V.$$typeof){case t:case e:fe=!0;break;case _:return fe=V._init,Te(fe(V._payload),ce,M,k,Y)}}if(fe)return Y=Y(V),fe=k===""?"."+H(V,0):k,U(Y)?(M="",fe!=null&&(M=fe.replace(F,"$&/")+"/"),Te(Y,ce,M,"",function(ye){return ye})):Y!=null&&(oe(Y)&&(Y=J(Y,M+(Y.key==null||V&&V.key===Y.key?"":(""+Y.key).replace(F,"$&/")+"/")+fe)),ce.push(Y)),1;fe=0;var Ne=k===""?".":k+":";if(U(V))for(var de=0;de<V.length;de++)k=V[de],Z=Ne+H(k,de),fe+=Te(k,ce,M,Z,Y);else if(de=v(V),typeof de=="function")for(V=de.call(V),de=0;!(k=V.next()).done;)k=k.value,Z=Ne+H(k,de++),fe+=Te(k,ce,M,Z,Y);else if(Z==="object"){if(typeof V.then=="function")return Te(K(V),ce,M,k,Y);throw ce=String(V),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return fe}function G(V,ce,M){if(V==null)return V;var k=[],Y=0;return Te(V,k,"","",function(Z){return ce.call(M,Z,Y++)}),k}function he(V){if(V._status===-1){var ce=V._result;ce=ce(),ce.then(function(M){(V._status===0||V._status===-1)&&(V._status=1,V._result=M)},function(M){(V._status===0||V._status===-1)&&(V._status=2,V._result=M)}),V._status===-1&&(V._status=0,V._result=ce)}if(V._status===1)return V._result.default;throw V._result}var ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ae(){}return es.Children={map:G,forEach:function(V,ce,M){G(V,function(){ce.apply(this,arguments)},M)},count:function(V){var ce=0;return G(V,function(){ce++}),ce},toArray:function(V){return G(V,function(ce){return ce})||[]},only:function(V){if(!oe(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},es.Component=O,es.Fragment=n,es.Profiler=r,es.PureComponent=j,es.StrictMode=s,es.Suspense=f,es.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,es.__COMPILER_RUNTIME={__proto__:null,c:function(V){return te.H.useMemoCache(V)}},es.cache=function(V){return function(){return V.apply(null,arguments)}},es.cloneElement=function(V,ce,M){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var k=C({},V.props),Y=V.key,Z=void 0;if(ce!=null)for(fe in ce.ref!==void 0&&(Z=void 0),ce.key!==void 0&&(Y=""+ce.key),ce)!Q.call(ce,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ce.ref===void 0||(k[fe]=ce[fe]);var fe=arguments.length-2;if(fe===1)k.children=M;else if(1<fe){for(var Ne=Array(fe),de=0;de<fe;de++)Ne[de]=arguments[de+2];k.children=Ne}return ne(V.type,Y,void 0,void 0,Z,k)},es.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},es.createElement=function(V,ce,M){var k,Y={},Z=null;if(ce!=null)for(k in ce.key!==void 0&&(Z=""+ce.key),ce)Q.call(ce,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(Y[k]=ce[k]);var fe=arguments.length-2;if(fe===1)Y.children=M;else if(1<fe){for(var Ne=Array(fe),de=0;de<fe;de++)Ne[de]=arguments[de+2];Y.children=Ne}if(V&&V.defaultProps)for(k in fe=V.defaultProps,fe)Y[k]===void 0&&(Y[k]=fe[k]);return ne(V,Z,void 0,void 0,null,Y)},es.createRef=function(){return{current:null}},es.forwardRef=function(V){return{$$typeof:d,render:V}},es.isValidElement=oe,es.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:he}},es.memo=function(V,ce){return{$$typeof:h,type:V,compare:ce===void 0?null:ce}},es.startTransition=function(V){var ce=te.T,M={};te.T=M;try{var k=V(),Y=te.S;Y!==null&&Y(M,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(ae,ue)}catch(Z){ue(Z)}finally{te.T=ce}},es.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},es.use=function(V){return te.H.use(V)},es.useActionState=function(V,ce,M){return te.H.useActionState(V,ce,M)},es.useCallback=function(V,ce){return te.H.useCallback(V,ce)},es.useContext=function(V){return te.H.useContext(V)},es.useDebugValue=function(){},es.useDeferredValue=function(V,ce){return te.H.useDeferredValue(V,ce)},es.useEffect=function(V,ce,M){var k=te.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return k.useEffect(V,ce)},es.useId=function(){return te.H.useId()},es.useImperativeHandle=function(V,ce,M){return te.H.useImperativeHandle(V,ce,M)},es.useInsertionEffect=function(V,ce){return te.H.useInsertionEffect(V,ce)},es.useLayoutEffect=function(V,ce){return te.H.useLayoutEffect(V,ce)},es.useMemo=function(V,ce){return te.H.useMemo(V,ce)},es.useOptimistic=function(V,ce){return te.H.useOptimistic(V,ce)},es.useReducer=function(V,ce,M){return te.H.useReducer(V,ce,M)},es.useRef=function(V){return te.H.useRef(V)},es.useState=function(V){return te.H.useState(V)},es.useSyncExternalStore=function(V,ce,M){return te.H.useSyncExternalStore(V,ce,M)},es.useTransition=function(){return te.H.useTransition()},es.version="19.1.0",es}var kx;function Tp(){return kx||(kx=1,c0.exports=ub()),c0.exports}var D=Tp();const yp=_2(D);var u0={exports:{}},kd={},d0={exports:{}},f0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function db(){return jx||(jx=1,function(t){function e(G,he){var ue=G.length;G.push(he);e:for(;0<ue;){var ae=ue-1>>>1,V=G[ae];if(0<r(V,he))G[ae]=he,G[ue]=V,ue=ae;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var he=G[0],ue=G.pop();if(ue!==he){G[0]=ue;e:for(var ae=0,V=G.length,ce=V>>>1;ae<ce;){var M=2*(ae+1)-1,k=G[M],Y=M+1,Z=G[Y];if(0>r(k,ue))Y<V&&0>r(Z,k)?(G[ae]=Z,G[Y]=ue,ae=Y):(G[ae]=k,G[M]=ue,ae=M);else if(Y<V&&0>r(Z,ue))G[ae]=Z,G[Y]=ue,ae=Y;else break e}}return he}function r(G,he){var ue=G.sortIndex-he.sortIndex;return ue!==0?ue:G.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],h=[],_=1,b=null,v=3,y=!1,C=!1,L=!1,O=!1,I=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function U(G){for(var he=n(h);he!==null;){if(he.callback===null)s(h);else if(he.startTime<=G)s(h),he.sortIndex=he.expirationTime,e(f,he);else break;he=n(h)}}function te(G){if(L=!1,U(G),!C)if(n(f)!==null)C=!0,Q||(Q=!0,H());else{var he=n(h);he!==null&&Te(te,he.startTime-G)}}var Q=!1,ne=-1,J=5,oe=-1;function xe(){return O?!0:!(t.unstable_now()-oe<J)}function F(){if(O=!1,Q){var G=t.unstable_now();oe=G;var he=!0;try{e:{C=!1,L&&(L=!1,j(ne),ne=-1),y=!0;var ue=v;try{t:{for(U(G),b=n(f);b!==null&&!(b.expirationTime>G&&xe());){var ae=b.callback;if(typeof ae=="function"){b.callback=null,v=b.priorityLevel;var V=ae(b.expirationTime<=G);if(G=t.unstable_now(),typeof V=="function"){b.callback=V,U(G),he=!0;break t}b===n(f)&&s(f),U(G)}else s(f);b=n(f)}if(b!==null)he=!0;else{var ce=n(h);ce!==null&&Te(te,ce.startTime-G),he=!1}}break e}finally{b=null,v=ue,y=!1}he=void 0}}finally{he?H():Q=!1}}}var H;if(typeof R=="function")H=function(){R(F)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,K=re.port2;re.port1.onmessage=F,H=function(){K.postMessage(null)}}else H=function(){I(F,0)};function Te(G,he){ne=I(function(){G(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var ue=v;v=he;try{return G()}finally{v=ue}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=v;v=G;try{return he()}finally{v=ue}},t.unstable_scheduleCallback=function(G,he,ue){var ae=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ae+ue:ae):ue=ae,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ue+V,G={id:_++,callback:he,priorityLevel:G,startTime:ue,expirationTime:V,sortIndex:-1},ue>ae?(G.sortIndex=ue,e(h,G),n(f)===null&&G===n(h)&&(L?(j(ne),ne=-1):L=!0,Te(te,ue-ae))):(G.sortIndex=V,e(f,G),C||y||(C=!0,Q||(Q=!0,H()))),G},t.unstable_shouldYield=xe,t.unstable_wrapCallback=function(G){var he=v;return function(){var ue=v;v=he;try{return G.apply(this,arguments)}finally{v=ue}}}}(f0)),f0}var Bx;function fb(){return Bx||(Bx=1,d0.exports=db()),d0.exports}var h0={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function hb(){if(Ux)return ei;Ux=1;var t=Tp();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,h,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:f,containerInfo:h,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ei.createPortal=function(f,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,_)},ei.flushSync=function(f){var h=c.T,_=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=h,s.p=_,s.d.f()}},ei.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(f,h))},ei.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ei.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var _=h.as,b=d(_,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?s.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:y}):_==="script"&&s.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ei.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);s.d.M(f,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(f)},ei.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,b=d(_,h.crossOrigin);s.d.L(f,_,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ei.preloadModule=function(f,h){if(typeof f=="string")if(h){var _=d(h.as,h.crossOrigin);s.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(f)},ei.requestFormReset=function(f){s.d.r(f)},ei.unstable_batchedUpdates=function(f,h){return f(h)},ei.useFormState=function(f,h,_){return c.H.useFormState(f,h,_)},ei.useFormStatus=function(){return c.H.useHostTransitionStatus()},ei.version="19.1.0",ei}var Fx;function mb(){if(Fx)return h0.exports;Fx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),h0.exports=hb(),h0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function pb(){if(Vx)return kd;Vx=1;var t=fb(),e=Tp(),n=mb();function s(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var i=a,u=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(u=i.return),a=i.return;while(a)}return i.tag===3?u:null}function c(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function d(a){if(l(a)!==a)throw Error(s(188))}function f(a){var i=a.alternate;if(!i){if(i=l(a),i===null)throw Error(s(188));return i!==a?null:a}for(var u=a,m=i;;){var T=u.return;if(T===null)break;var A=T.alternate;if(A===null){if(m=T.return,m!==null){u=m;continue}break}if(T.child===A.child){for(A=T.child;A;){if(A===u)return d(T),a;if(A===m)return d(T),i;A=A.sibling}throw Error(s(188))}if(u.return!==m.return)u=T,m=A;else{for(var B=!1,se=T.child;se;){if(se===u){B=!0,u=T,m=A;break}if(se===m){B=!0,m=T,u=A;break}se=se.sibling}if(!B){for(se=A.child;se;){if(se===u){B=!0,u=A,m=T;break}if(se===m){B=!0,m=A,u=T;break}se=se.sibling}if(!B)throw Error(s(189))}}if(u.alternate!==m)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:i}function h(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=h(a),i!==null)return i;a=a.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),R=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var re=Symbol.for("react.client.reference");function K(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===re?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case O:return"Profiler";case L:return"StrictMode";case te:return"Suspense";case Q:return"SuspenseList";case oe:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case R:return(a.displayName||"Context")+".Provider";case j:return(a._context.displayName||"Context")+".Consumer";case U:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ne:return i=a.displayName||null,i!==null?i:K(a.type)||"Memo";case J:i=a._payload,a=a._init;try{return K(a(i))}catch{}}return null}var Te=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ae=[],V=-1;function ce(a){return{current:a}}function M(a){0>V||(a.current=ae[V],ae[V]=null,V--)}function k(a,i){V++,ae[V]=a.current,a.current=i}var Y=ce(null),Z=ce(null),fe=ce(null),Ne=ce(null);function de(a,i){switch(k(fe,i),k(Z,a),k(Y,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?ox(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=ox(i),a=lx(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}M(Y),k(Y,a)}function ye(){M(Y),M(Z),M(fe)}function Ue(a){a.memoizedState!==null&&k(Ne,a);var i=Y.current,u=lx(i,a.type);i!==u&&(k(Z,a),k(Y,u))}function we(a){Z.current===a&&(M(Y),M(Z)),Ne.current===a&&(M(Ne),Id._currentValue=ue)}var Ze=Object.prototype.hasOwnProperty,Je=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,je=t.unstable_shouldYield,ge=t.unstable_requestPaint,Fe=t.unstable_now,ut=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,nt=t.unstable_UserBlockingPriority,it=t.unstable_NormalPriority,st=t.unstable_LowPriority,yt=t.unstable_IdlePriority,Pt=t.log,Rt=t.unstable_setDisableYieldValue,Ft=null,Yt=null;function Be(a){if(typeof Pt=="function"&&Rt(a),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Ft,a)}catch{}}var We=Math.clz32?Math.clz32:vt,Lt=Math.log,pe=Math.LN2;function vt(a){return a>>>=0,a===0?32:31-(Lt(a)/pe|0)|0}var At=256,Kt=4194304;function Gt(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xn(a,i,u){var m=a.pendingLanes;if(m===0)return 0;var T=0,A=a.suspendedLanes,B=a.pingedLanes;a=a.warmLanes;var se=m&134217727;return se!==0?(m=se&~A,m!==0?T=Gt(m):(B&=se,B!==0?T=Gt(B):u||(u=se&~a,u!==0&&(T=Gt(u))))):(se=m&~A,se!==0?T=Gt(se):B!==0?T=Gt(B):u||(u=m&~a,u!==0&&(T=Gt(u)))),T===0?0:i!==0&&i!==T&&(i&A)===0&&(A=T&-T,u=i&-i,A>=u||A===32&&(u&4194048)!==0)?i:T}function rs(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function Cn(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(){var a=At;return At<<=1,(At&4194048)===0&&(At=256),a}function Un(){var a=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),a}function js(a){for(var i=[],u=0;31>u;u++)i.push(a);return i}function ln(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ls(a,i,u,m,T,A){var B=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var se=a.entanglements,ve=a.expirationTimes,Ye=a.hiddenUpdates;for(u=B&~u;0<u;){var ct=31-We(u),Et=1<<ct;se[ct]=0,ve[ct]=-1;var qe=Ye[ct];if(qe!==null)for(Ye[ct]=null,ct=0;ct<qe.length;ct++){var $e=qe[ct];$e!==null&&($e.lane&=-536870913)}u&=~Et}m!==0&&un(a,m,0),A!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=A&~(B&~i))}function un(a,i,u){a.pendingLanes|=i,a.suspendedLanes&=~i;var m=31-We(i);a.entangledLanes|=i,a.entanglements[m]=a.entanglements[m]|1073741824|u&4194090}function Mn(a,i){var u=a.entangledLanes|=i;for(a=a.entanglements;u;){var m=31-We(u),T=1<<m;T&i|a[m]&i&&(a[m]|=i),u&=~T}}function qa(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function gs(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ca(){var a=he.p;return a!==0?a:(a=window.event,a===void 0?32:Cx(a.type))}function Nn(a,i){var u=he.p;try{return he.p=a,i()}finally{he.p=u}}var Xt=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Xt,kn="__reactProps$"+Xt,Fn="__reactContainer$"+Xt,Rn="__reactEvents$"+Xt,_s="__reactListeners$"+Xt,hs="__reactHandles$"+Xt,er="__reactResources$"+Xt,Ca="__reactMarker$"+Xt;function En(a){delete a[Ln],delete a[kn],delete a[Rn],delete a[_s],delete a[hs]}function bs(a){var i=a[Ln];if(i)return i;for(var u=a.parentNode;u;){if(i=u[Fn]||u[Ln]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(a=fx(a);a!==null;){if(u=a[Ln])return u;a=fx(a)}return i}a=u,u=a.parentNode}return null}function Qt(a){if(a=a[Ln]||a[Fn]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function Ls(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(s(33))}function Ts(a){var i=a[er];return i||(i=a[er]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $n(a){a[Ca]=!0}var La=new Set,ua={};function Bs(a,i){ms(a,i),ms(a+"Capture",i)}function ms(a,i){for(ua[a]=i,a=0;a<i.length;a++)La.add(i[a])}var wa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Is={},ka={};function Wn(a){return Ze.call(ka,a)?!0:Ze.call(Is,a)?!1:wa.test(a)?ka[a]=!0:(Is[a]=!0,!1)}function ys(a,i,u){if(Wn(i))if(u===null)a.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var m=i.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+u)}}function da(a,i,u){if(u===null)a.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+u)}}function ws(a,i,u,m){if(m===null)a.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(i,u,""+m)}}var tr,Ta;function sa(a){if(tr===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);tr=i&&i[1]||"",Ta=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tr+a+Ta}var Gr=!1;function mn(a,i){if(!a||Gr)return"";Gr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch($e){var qe=$e}Reflect.construct(a,[],Et)}else{try{Et.call()}catch($e){qe=$e}a.call(Et.prototype)}}else{try{throw Error()}catch($e){qe=$e}(Et=a())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch($e){if($e&&qe&&typeof $e.stack=="string")return[$e.stack,qe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),B=A[0],se=A[1];if(B&&se){var ve=B.split(`
`),Ye=se.split(`
`);for(T=m=0;m<ve.length&&!ve[m].includes("DetermineComponentFrameRoot");)m++;for(;T<Ye.length&&!Ye[T].includes("DetermineComponentFrameRoot");)T++;if(m===ve.length||T===Ye.length)for(m=ve.length-1,T=Ye.length-1;1<=m&&0<=T&&ve[m]!==Ye[T];)T--;for(;1<=m&&0<=T;m--,T--)if(ve[m]!==Ye[T]){if(m!==1||T!==1)do if(m--,T--,0>T||ve[m]!==Ye[T]){var ct=`
`+ve[m].replace(" at new "," at ");return a.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",a.displayName)),ct}while(1<=m&&0<=T);break}}}finally{Gr=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?sa(u):""}function Hr(a){switch(a.tag){case 26:case 27:case 5:return sa(a.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 15:return mn(a.type,!1);case 11:return mn(a.type.render,!1);case 1:return mn(a.type,!0);case 31:return sa("Activity");default:return""}}function Ds(a){try{var i="";do i+=Hr(a),a=a.return;while(a);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function ea(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Yr(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wr(a){var i=Yr(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),m=""+a[i];if(!a.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var T=u.get,A=u.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return T.call(this)},set:function(B){m=""+B,A.call(this,B)}}),Object.defineProperty(a,i,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(B){m=""+B},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function dr(a){a._valueTracker||(a._valueTracker=wr(a))}function Ns(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var u=i.getValue(),m="";return a&&(m=Yr(a)?a.checked?"true":"false":a.value),a=m,a!==u?(i.setValue(a),!0):!1}function Ia(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var li=/[\n"\\]/g;function cs(a){return a.replace(li,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function qr(a,i,u,m,T,A,B,se){a.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.type=B:a.removeAttribute("type"),i!=null?B==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+ea(i)):a.value!==""+ea(i)&&(a.value=""+ea(i)):B!=="submit"&&B!=="reset"||a.removeAttribute("value"),i!=null?bi(a,B,ea(i)):u!=null?bi(a,B,ea(u)):m!=null&&a.removeAttribute("value"),T==null&&A!=null&&(a.defaultChecked=!!A),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?a.name=""+ea(se):a.removeAttribute("name")}function _i(a,i,u,m,T,A,B,se){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.type=A),i!=null||u!=null){if(!(A!=="submit"&&A!=="reset"||i!=null))return;u=u!=null?""+ea(u):"",i=i!=null?""+ea(i):u,se||i===a.value||(a.value=i),a.defaultValue=i}m=m??T,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=se?a.checked:!!m,a.defaultChecked=!!m,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(a.name=B)}function bi(a,i,u){i==="number"&&Ia(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Er(a,i,u,m){if(a=a.options,i){i={};for(var T=0;T<u.length;T++)i["$"+u[T]]=!0;for(u=0;u<a.length;u++)T=i.hasOwnProperty("$"+a[u].value),a[u].selected!==T&&(a[u].selected=T),T&&m&&(a[u].defaultSelected=!0)}else{for(u=""+ea(u),i=null,T=0;T<a.length;T++){if(a[T].value===u){a[T].selected=!0,m&&(a[T].defaultSelected=!0);return}i!==null||a[T].disabled||(i=a[T])}i!==null&&(i.selected=!0)}}function ci(a,i,u){if(i!=null&&(i=""+ea(i),i!==a.value&&(a.value=i),u==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=u!=null?""+ea(u):""}function Ti(a,i,u,m){if(i==null){if(m!=null){if(u!=null)throw Error(s(92));if(Te(m)){if(1<m.length)throw Error(s(93));m=m[0]}u=m}u==null&&(u=""),i=u}u=ea(i),a.defaultValue=u,m=a.textContent,m===u&&m!==""&&m!==null&&(a.value=m)}function za(a,i){if(i){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=i;return}}a.textContent=i}var ui=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ir(a,i,u){var m=i.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":m?a.setProperty(i,u):typeof u!="number"||u===0||ui.has(i)?i==="float"?a.cssFloat=u:a[i]=(""+u).trim():a[i]=u+"px"}function Da(a,i,u){if(i!=null&&typeof i!="object")throw Error(s(62));if(a=a.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||i!=null&&i.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var T in i)m=i[T],i.hasOwnProperty(T)&&u[T]!==m&&Ir(a,T,m)}else for(var A in i)i.hasOwnProperty(A)&&Ir(a,A,i[A])}function yi(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Re=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ze(a){return Re.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var dt=null;function bt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Dt=null,wt=null;function xt(a){var i=Qt(a);if(i&&(a=i.stateNode)){var u=a[kn]||null;e:switch(a=i.stateNode,i.type){case"input":if(qr(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),i=u.name,u.type==="radio"&&i!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+cs(""+i)+'"][type="radio"]'),i=0;i<u.length;i++){var m=u[i];if(m!==a&&m.form===a.form){var T=m[kn]||null;if(!T)throw Error(s(90));qr(m,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(i=0;i<u.length;i++)m=u[i],m.form===a.form&&Ns(m)}break e;case"textarea":ci(a,u.value,u.defaultValue);break e;case"select":i=u.value,i!=null&&Er(a,!!u.multiple,i,!1)}}}var Jt=!1;function _n(a,i,u){if(Jt)return a(i,u);Jt=!0;try{var m=a(i);return m}finally{if(Jt=!1,(Dt!==null||wt!==null)&&(jf(),Dt&&(i=Dt,a=wt,wt=Dt=null,xt(i),a)))for(i=0;i<a.length;i++)xt(a[i])}}function on(a,i){var u=a.stateNode;if(u===null)return null;var m=u[kn]||null;if(m===null)return null;u=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(s(231,i,typeof u));return u}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(ts)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Yn=!1}var vn=null,Dr=null,zr=null;function fr(){if(zr)return zr;var a,i=Dr,u=i.length,m,T="value"in vn?vn.value:vn.textContent,A=T.length;for(a=0;a<u&&i[a]===T[a];a++);var B=u-a;for(m=1;m<=B&&i[u-m]===T[A-m];m++);return zr=T.slice(a,1<m?1-m:void 0)}function di(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function nr(){return!0}function fi(){return!1}function fa(a){function i(u,m,T,A,B){this._reactName=u,this._targetInst=T,this.type=m,this.nativeEvent=A,this.target=B,this.currentTarget=null;for(var se in a)a.hasOwnProperty(se)&&(u=a[se],this[se]=u?u(A):A[se]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?nr:fi,this.isPropagationStopped=fi,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),i}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_r=fa(sr),br=_({},sr,{view:0,detail:0}),Pi=fa(br),Ji,le,_e,tt=_({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==_e&&(_e&&a.type==="mousemove"?(Ji=a.screenX-_e.screenX,le=a.screenY-_e.screenY):le=Ji=0,_e=a),Ji)},movementY:function(a){return"movementY"in a?a.movementY:le}}),Xe=fa(tt),rt=_({},tt,{dataTransfer:0}),_t=fa(rt),mt=_({},br,{relatedTarget:0}),Bt=fa(mt),kt=_({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ct=fa(kt),$t=_({},sr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Bn=fa($t),Kn=_({},sr,{data:0}),Xn=fa(Kn),zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gs(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=bn[a])?!!i[a]:!1}function aa(){return Gs}var dn=_({},br,{key:function(a){if(a.key){var i=zn[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=di(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ha[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(a){return a.type==="keypress"?di(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?di(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),vs=fa(dn),Tr=_({},tt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=fa(Tr),Mi=_({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),_o=fa(Mi),S=_({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=fa(S),Ee=_({},tt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ae=fa(Ee),Me=_({},sr,{newState:0,oldState:0}),et=fa(Me),Nt=[9,13,27,32],Vt=ts&&"CompositionEvent"in window,Zt=null;ts&&"documentMode"in document&&(Zt=document.documentMode);var pn=ts&&"TextEvent"in window&&!Zt,wn=ts&&(!Vt||Zt&&8<Zt&&11>=Zt),as=" ",Ks=!1;function Xs(a,i){switch(a){case"keyup":return Nt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ma(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Hs=!1;function ja(a,i){switch(a){case"compositionend":return ma(i);case"keypress":return i.which!==32?null:(Ks=!0,as);case"textInput":return a=i.data,a===as&&Ks?null:a;default:return null}}function Rr(a,i){if(Hs)return a==="compositionend"||!Vt&&Xs(a,i)?(a=fr(),zr=Dr=vn=null,Hs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wn&&i.locale!=="ko"?null:i.data;default:return null}}var hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!hr[a.type]:i==="textarea"}function qo(a,i,u,m){Dt?wt?wt.push(m):wt=[m]:Dt=m,i=Hf(i,"onChange"),0<i.length&&(u=new _r("onChange","change",null,u,m),a.push({event:u,listeners:i}))}var hi=null,mi=null;function Zi(a){nx(a,0)}function $r(a){var i=Ls(a);if(Ns(i))return a}function zo(a,i){if(a==="change")return i}var Qi=!1;if(ts){var ya;if(ts){var ki="oninput"in document;if(!ki){var ji=document.createElement("div");ji.setAttribute("oninput","return;"),ki=typeof ji.oninput=="function"}ya=ki}else ya=!1;Qi=ya&&(!document.documentMode||9<document.documentMode)}function bo(){hi&&(hi.detachEvent("onpropertychange",$o),mi=hi=null)}function $o(a){if(a.propertyName==="value"&&$r(mi)){var i=[];qo(i,mi,a,bt(a)),_n(Zi,i)}}function mr(a,i,u){a==="focusin"?(bo(),hi=i,mi=u,hi.attachEvent("onpropertychange",$o)):a==="focusout"&&bo()}function Ac(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $r(mi)}function gl(a,i){if(a==="click")return $r(i)}function Vl(a,i){if(a==="input"||a==="change")return $r(i)}function Wr(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Ba=typeof Object.is=="function"?Object.is:Wr;function eo(a,i){if(Ba(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var u=Object.keys(a),m=Object.keys(i);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var T=u[m];if(!Ze.call(i,T)||!Ba(a[T],i[T]))return!1}return!0}function xl(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ni(a,i){var u=xl(a);a=0;for(var m;u;){if(u.nodeType===3){if(m=a+u.textContent.length,a<=i&&m>=i)return{node:u,offset:i-a};a=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xl(u)}}function to(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?to(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function pr(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=Ia(a.document);i instanceof a.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)a=i.contentWindow;else break;i=Ia(a.document)}return i}function Na(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var Kr=ts&&"documentMode"in document&&11>=document.documentMode,Ua=null,yr=null,Xr=null,Pr=!1;function Us(a,i,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Pr||Ua==null||Ua!==Ia(m)||(m=Ua,"selectionStart"in m&&Na(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Xr&&eo(Xr,m)||(Xr=m,m=Hf(yr,"onSelect"),0<m.length&&(i=new _r("onSelect","select",null,i,u),a.push({event:i,listeners:m}),i.target=Ua)))}function ar(a,i){var u={};return u[a.toLowerCase()]=i.toLowerCase(),u["Webkit"+a]="webkit"+i,u["Moz"+a]="moz"+i,u}var va={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionrun:ar("Transition","TransitionRun"),transitionstart:ar("Transition","TransitionStart"),transitioncancel:ar("Transition","TransitionCancel"),transitionend:ar("Transition","TransitionEnd")},Nr={},To={};ts&&(To=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function vi(a){if(Nr[a])return Nr[a];if(!va[a])return a;var i=va[a],u;for(u in i)if(i.hasOwnProperty(u)&&u in To)return Nr[a]=i[u];return a}var Wo=vi("animationend"),no=vi("animationiteration"),so=vi("animationstart"),ao=vi("transitionrun"),yo=vi("transitionstart"),Ko=vi("transitioncancel"),ro=vi("transitionend"),Bi=new Map,No="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");No.push("scrollEnd");function ra(a,i){Bi.set(a,i),Bs(i,[a])}var Mr=new WeakMap;function Jn(a,i){if(typeof a=="object"&&a!==null){var u=Mr.get(a);return u!==void 0?u:(i={value:a,source:i,stack:Ds(i)},Mr.set(a,i),i)}return{value:a,source:i,stack:Ds(i)}}var Zn=[],Fs=0,pa=0;function Jr(){for(var a=Fs,i=pa=Fs=0;i<a;){var u=Zn[i];Zn[i++]=null;var m=Zn[i];Zn[i++]=null;var T=Zn[i];Zn[i++]=null;var A=Zn[i];if(Zn[i++]=null,m!==null&&T!==null){var B=m.pending;B===null?T.next=T:(T.next=B.next,B.next=T),m.pending=T}A!==0&&Gl(u,T,A)}}function io(a,i,u,m){Zn[Fs++]=a,Zn[Fs++]=i,Zn[Fs++]=u,Zn[Fs++]=m,pa|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function oo(a,i,u,m){return io(a,i,u,m),vo(a)}function Ui(a,i){return io(a,null,null,i),vo(a)}function Gl(a,i,u){a.lanes|=u;var m=a.alternate;m!==null&&(m.lanes|=u);for(var T=!1,A=a.return;A!==null;)A.childLanes|=u,m=A.alternate,m!==null&&(m.childLanes|=u),A.tag===22&&(a=A.stateNode,a===null||a._visibility&1||(T=!0)),a=A,A=A.return;return a.tag===3?(A=a.stateNode,T&&i!==null&&(T=31-We(u),a=A.hiddenUpdates,m=a[T],m===null?a[T]=[i]:m.push(i),i.lane=u|536870912),A):null}function vo(a){if(50<yd)throw yd=0,Rm=null,Error(s(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Ra={};function vr(a,i,u,m){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(a,i,u,m){return new vr(a,i,u,m)}function Xo(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ai(a,i){var u=a.alternate;return u===null?(u=rr(a.tag,i,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=i,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,i=a.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function lo(a,i){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,i=u.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function Ao(a,i,u,m,T,A){var B=0;if(m=a,typeof a=="function")Xo(a)&&(B=1);else if(typeof a=="string")B=K5(a,u,Y.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case oe:return a=rr(31,u,i,T),a.elementType=oe,a.lanes=A,a;case C:return Fi(u.children,T,A,i);case L:B=8,T|=24;break;case O:return a=rr(12,u,i,T|2),a.elementType=O,a.lanes=A,a;case te:return a=rr(13,u,i,T),a.elementType=te,a.lanes=A,a;case Q:return a=rr(19,u,i,T),a.elementType=Q,a.lanes=A,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:case R:B=10;break e;case j:B=9;break e;case U:B=11;break e;case ne:B=14;break e;case J:B=16,m=null;break e}B=29,u=Error(s(130,a===null?"null":typeof a,"")),m=null}return i=rr(B,u,i,T),i.elementType=a,i.type=m,i.lanes=A,i}function Fi(a,i,u,m){return a=rr(7,a,m,i),a.lanes=u,a}function El(a,i,u){return a=rr(6,a,null,i),a.lanes=u,a}function _l(a,i,u){return i=rr(4,a.children!==null?a.children:[],a.key,i),i.lanes=u,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var Si=[],Ci=0,So=null,bl=0,kr=[],$=0,Se=null,ot=1,at="";function St(a,i){Si[Ci++]=bl,Si[Ci++]=So,So=a,bl=i}function Mt(a,i,u){kr[$++]=ot,kr[$++]=at,kr[$++]=Se,Se=a;var m=ot;a=at;var T=32-We(m)-1;m&=~(1<<T),u+=1;var A=32-We(i)+T;if(30<A){var B=T-T%5;A=(m&(1<<B)-1).toString(32),m>>=B,T-=B,ot=1<<32-We(i)+T|u<<T|m,at=A+a}else ot=1<<A|u<<T|m,at=a}function It(a){a.return!==null&&(St(a,1),Mt(a,1,0))}function sn(a){for(;a===So;)So=Si[--Ci],Si[Ci]=null,bl=Si[--Ci],Si[Ci]=null;for(;a===Se;)Se=kr[--$],kr[$]=null,at=kr[--$],kr[$]=null,ot=kr[--$],kr[$]=null}var Wt=null,an=null,rn=!1,is=null,ga=!1,Hl=Error(s(519));function Tl(a){var i=Error(s(418,""));throw Yl(Jn(i,a)),Hl}function lf(a){var i=a.stateNode,u=a.type,m=a.memoizedProps;switch(i[Ln]=a,i[kn]=m,u){case"dialog":ds("cancel",i),ds("close",i);break;case"iframe":case"object":case"embed":ds("load",i);break;case"video":case"audio":for(u=0;u<vd.length;u++)ds(vd[u],i);break;case"source":ds("error",i);break;case"img":case"image":case"link":ds("error",i),ds("load",i);break;case"details":ds("toggle",i);break;case"input":ds("invalid",i),_i(i,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),dr(i);break;case"select":ds("invalid",i);break;case"textarea":ds("invalid",i),Ti(i,m.value,m.defaultValue,m.children),dr(i)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||i.textContent===""+u||m.suppressHydrationWarning===!0||ix(i.textContent,u)?(m.popover!=null&&(ds("beforetoggle",i),ds("toggle",i)),m.onScroll!=null&&ds("scroll",i),m.onScrollEnd!=null&&ds("scrollend",i),m.onClick!=null&&(i.onclick=Yf),i=!0):i=!1,i||Tl(a)}function Co(a){for(Wt=a.return;Wt;)switch(Wt.tag){case 5:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:Wt=Wt.return}}function jr(a){if(a!==Wt)return!1;if(!rn)return Co(a),rn=!0,!1;var i=a.tag,u;if((u=i!==3&&i!==27)&&((u=i===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Wm(a.type,a.memoizedProps)),u=!u),u&&an&&Tl(a),Co(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(i===0){an=Mo(a.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++;a=a.nextSibling}an=null}}else i===27?(i=an,oc(a.type)?(a=Zm,Zm=null,an=a):an=i):an=Wt?Mo(a.stateNode.nextSibling):null;return!0}function pi(){an=Wt=null,rn=!1}function cf(){var a=is;return a!==null&&(Ii===null?Ii=a:Ii.push.apply(Ii,a),is=null),a}function Yl(a){is===null?is=[a]:is.push(a)}var co=ce(null),ir=null,Lo=null;function Jo(a,i,u){k(co,i._currentValue),i._currentValue=u}function uo(a){a._currentValue=co.current,M(co)}function eu(a,i,u){for(;a!==null;){var m=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),a===u)break;a=a.return}}function tu(a,i,u,m){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var A=T.dependencies;if(A!==null){var B=T.child;A=A.firstContext;e:for(;A!==null;){var se=A;A=T;for(var ve=0;ve<i.length;ve++)if(se.context===i[ve]){A.lanes|=u,se=A.alternate,se!==null&&(se.lanes|=u),eu(A.return,u,a),m||(B=null);break e}A=se.next}}else if(T.tag===18){if(B=T.return,B===null)throw Error(s(341));B.lanes|=u,A=B.alternate,A!==null&&(A.lanes|=u),eu(B,u,a),B=null}else B=T.child;if(B!==null)B.return=T;else for(B=T;B!==null;){if(B===a){B=null;break}if(T=B.sibling,T!==null){T.return=B.return,B=T;break}B=B.return}T=B}}function ql(a,i,u,m){a=null;for(var T=i,A=!1;T!==null;){if(!A){if((T.flags&524288)!==0)A=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var B=T.alternate;if(B===null)throw Error(s(387));if(B=B.memoizedProps,B!==null){var se=T.type;Ba(T.pendingProps.value,B.value)||(a!==null?a.push(se):a=[se])}}else if(T===Ne.current){if(B=T.alternate,B===null)throw Error(s(387));B.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Id):a=[Id])}T=T.return}a!==null&&tu(i,a,u,m),i.flags|=262144}function nu(a){for(a=a.firstContext;a!==null;){if(!Ba(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fo(a){ir=a,Lo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function $a(a){return su(ir,a)}function Zo(a,i){return ir===null&&fo(a),su(a,i)}function su(a,i){var u=i._currentValue;if(i={context:i,memoizedValue:u,next:null},Lo===null){if(a===null)throw Error(s(308));Lo=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else Lo=Lo.next=i;return u}var sm=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(u,m){a.push(m)}};this.abort=function(){i.aborted=!0,a.forEach(function(u){return u()})}},uf=t.unstable_scheduleCallback,am=t.unstable_NormalPriority,Wa={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qu(){return{controller:new sm,data:new Map,refCount:0}}function Sc(a){a.refCount--,a.refCount===0&&uf(am,function(){a.controller.abort()})}var Cc=null,ed=0,yl=0,wo=null;function rm(a,i){if(Cc===null){var u=Cc=[];ed=0,yl=Um(),wo={status:"pending",value:void 0,then:function(m){u.push(m)}}}return ed++,i.then(df,df),i}function df(){if(--ed===0&&Cc!==null){wo!==null&&(wo.status="fulfilled");var a=Cc;Cc=null,yl=0,wo=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function ff(a,i){var u=[],m={status:"pending",value:null,reason:null,then:function(T){u.push(T)}};return a.then(function(){m.status="fulfilled",m.value=i;for(var T=0;T<u.length;T++)(0,u[T])(i)},function(T){for(m.status="rejected",m.reason=T,T=0;T<u.length;T++)(0,u[T])(void 0)}),m}var E=G.S;G.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&rm(a,i),E!==null&&E(a,i)};var N=ce(null);function w(){var a=N.current;return a!==null?a:oa.pooledCache}function P(a,i){i===null?k(N,N.current):k(N,i.pool)}function z(){var a=w();return a===null?null:{parent:Wa._currentValue,pool:a}}var W=Error(s(460)),X=Error(s(474)),ee=Error(s(542)),ie={then:function(){}};function me(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ce(){}function He(a,i,u){switch(u=a[u],u===void 0?a.push(i):u!==i&&(i.then(Ce,Ce),i=u),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,pt(a),a;default:if(typeof i.status=="string")i.then(Ce,Ce);else{if(a=oa,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=i,a.status="pending",a.then(function(m){if(i.status==="pending"){var T=i;T.status="fulfilled",T.value=m}},function(m){if(i.status==="pending"){var T=i;T.status="rejected",T.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,pt(a),a}throw Ve=i,W}}var Ve=null;function Oe(){if(Ve===null)throw Error(s(459));var a=Ve;return Ve=null,a}function pt(a){if(a===W||a===ee)throw Error(s(483))}var Ke=!1;function Le(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function De(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function lt(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function gt(a,i,u){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(qs&2)!==0){var T=m.pending;return T===null?i.next=i:(i.next=T.next,T.next=i),m.pending=i,i=vo(a),Gl(a,null,u),i}return io(a,m,i,u),vo(a)}function ft(a,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194048)!==0)){var m=i.lanes;m&=a.pendingLanes,u|=m,i.lanes=u,Mn(a,u)}}function qt(a,i){var u=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var T=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var B={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};A===null?T=A=B:A=A.next=B,u=u.next}while(u!==null);A===null?T=A=i:A=A.next=i}else T=A=i;u={baseState:m.baseState,firstBaseUpdate:T,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=i:a.next=i,u.lastBaseUpdate=i}var jt=!1;function fn(){if(jt){var a=wo;if(a!==null)throw a}}function Ut(a,i,u,m){jt=!1;var T=a.updateQueue;Ke=!1;var A=T.firstBaseUpdate,B=T.lastBaseUpdate,se=T.shared.pending;if(se!==null){T.shared.pending=null;var ve=se,Ye=ve.next;ve.next=null,B===null?A=Ye:B.next=Ye,B=ve;var ct=a.alternate;ct!==null&&(ct=ct.updateQueue,se=ct.lastBaseUpdate,se!==B&&(se===null?ct.firstBaseUpdate=Ye:se.next=Ye,ct.lastBaseUpdate=ve))}if(A!==null){var Et=T.baseState;B=0,ct=Ye=ve=null,se=A;do{var qe=se.lane&-536870913,$e=qe!==se.lane;if($e?(Cs&qe)===qe:(m&qe)===qe){qe!==0&&qe===yl&&(jt=!0),ct!==null&&(ct=ct.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var On=a,Tn=se;qe=i;var Zs=u;switch(Tn.tag){case 1:if(On=Tn.payload,typeof On=="function"){Et=On.call(Zs,Et,qe);break e}Et=On;break e;case 3:On.flags=On.flags&-65537|128;case 0:if(On=Tn.payload,qe=typeof On=="function"?On.call(Zs,Et,qe):On,qe==null)break e;Et=_({},Et,qe);break e;case 2:Ke=!0}}qe=se.callback,qe!==null&&(a.flags|=64,$e&&(a.flags|=8192),$e=T.callbacks,$e===null?T.callbacks=[qe]:$e.push(qe))}else $e={lane:qe,tag:se.tag,payload:se.payload,callback:se.callback,next:null},ct===null?(Ye=ct=$e,ve=Et):ct=ct.next=$e,B|=qe;if(se=se.next,se===null){if(se=T.shared.pending,se===null)break;$e=se,se=$e.next,$e.next=null,T.lastBaseUpdate=$e,T.shared.pending=null}}while(!0);ct===null&&(ve=Et),T.baseState=ve,T.firstBaseUpdate=Ye,T.lastBaseUpdate=ct,A===null&&(T.shared.lanes=0),sc|=B,a.lanes=B,a.memoizedState=Et}}function As(a,i){if(typeof a!="function")throw Error(s(191,a));a.call(i)}function Rs(a,i){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)As(u[a],i)}var ns=ce(null),Qn=ce(0);function Vs(a,i){a=Rl,k(Qn,a),k(ns,i),Rl=a|i.baseLanes}function Os(){k(Qn,Rl),k(ns,ns.current)}function Vn(){Rl=Qn.current,M(ns),M(Qn)}var Ys=0,gn=null,In=null,xs=null,Ss=!1,or=!1,Ka=!1,Oa=0,Pa=0,Fa=null,Li=0;function Ps(){throw Error(s(321))}function Va(a,i){if(i===null)return!1;for(var u=0;u<i.length&&u<a.length;u++)if(!Ba(a[u],i[u]))return!1;return!0}function Vi(a,i,u,m,T,A){return Ys=A,gn=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=a===null||a.memoizedState===null?Fp:Vp,Ka=!1,A=u(m,T),Ka=!1,or&&(A=Nl(i,u,m,T)),Qo(a),A}function Qo(a){G.H=vf;var i=In!==null&&In.next!==null;if(Ys=0,xs=In=gn=null,Ss=!1,Pa=0,Fa=null,i)throw Error(s(300));a===null||Ar||(a=a.dependencies,a!==null&&nu(a)&&(Ar=!0))}function Nl(a,i,u,m){gn=a;var T=0;do{if(or&&(Fa=null),Pa=0,or=!1,25<=T)throw Error(s(301));if(T+=1,xs=In=null,a.updateQueue!=null){var A=a.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}G.H=i5,A=i(u,m)}while(or);return A}function el(){var a=G.H,i=a.useState()[0];return i=typeof i.then=="function"?tl(i):i,a=a.useState()[0],(In!==null?In.memoizedState:null)!==a&&(gn.flags|=1024),i}function ia(){var a=Oa!==0;return Oa=0,a}function Lc(a,i,u){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~u}function au(a){if(Ss){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Ss=!1}Ys=0,xs=In=gn=null,or=!1,Pa=Oa=0,Fa=null}function Br(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xs===null?gn.memoizedState=xs=a:xs=xs.next=a,xs}function xa(){if(In===null){var a=gn.alternate;a=a!==null?a.memoizedState:null}else a=In.next;var i=xs===null?gn.memoizedState:xs.next;if(i!==null)xs=i,In=a;else{if(a===null)throw gn.alternate===null?Error(s(467)):Error(s(310));In=a,a={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},xs===null?gn.memoizedState=xs=a:xs=xs.next=a}return xs}function vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(a){var i=Pa;return Pa+=1,Fa===null&&(Fa=[]),a=He(Fa,a,i),i=gn,(xs===null?i.memoizedState:xs.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Fp:Vp),a}function Zr(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return tl(a);if(a.$$typeof===R)return $a(a)}throw Error(s(438,String(a)))}function nl(a){var i=null,u=gn.updateQueue;if(u!==null&&(i=u.memoCache),i==null){var m=gn.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(T){return T.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),u===null&&(u=vl(),gn.updateQueue=u),u.memoCache=i,u=i.data[i.index],u===void 0)for(u=i.data[i.index]=Array(a),m=0;m<a;m++)u[m]=xe;return i.index++,u}function Qr(a,i){return typeof i=="function"?i(a):i}function wc(a){var i=xa();return zl(i,In,a)}function zl(a,i,u){var m=a.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=u;var T=a.baseQueue,A=m.pending;if(A!==null){if(T!==null){var B=T.next;T.next=A.next,A.next=B}i.baseQueue=T=A,m.pending=null}if(A=a.baseState,T===null)a.memoizedState=A;else{i=T.next;var se=B=null,ve=null,Ye=i,ct=!1;do{var Et=Ye.lane&-536870913;if(Et!==Ye.lane?(Cs&Et)===Et:(Ys&Et)===Et){var qe=Ye.revertLane;if(qe===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),Et===yl&&(ct=!0);else if((Ys&qe)===qe){Ye=Ye.next,qe===yl&&(ct=!0);continue}else Et={lane:0,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ve===null?(se=ve=Et,B=A):ve=ve.next=Et,gn.lanes|=qe,sc|=qe;Et=Ye.action,Ka&&u(A,Et),A=Ye.hasEagerState?Ye.eagerState:u(A,Et)}else qe={lane:Et,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ve===null?(se=ve=qe,B=A):ve=ve.next=qe,gn.lanes|=Et,sc|=Et;Ye=Ye.next}while(Ye!==null&&Ye!==i);if(ve===null?B=A:ve.next=se,!Ba(A,a.memoizedState)&&(Ar=!0,ct&&(u=wo,u!==null)))throw u;a.memoizedState=A,a.baseState=B,a.baseQueue=ve,m.lastRenderedState=A}return T===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function ru(a){var i=xa(),u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var m=u.dispatch,T=u.pending,A=i.memoizedState;if(T!==null){u.pending=null;var B=T=T.next;do A=a(A,B.action),B=B.next;while(B!==T);Ba(A,i.memoizedState)||(Ar=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),u.lastRenderedState=A}return[A,m]}function Ic(a,i,u){var m=gn,T=xa(),A=rn;if(A){if(u===void 0)throw Error(s(407));u=u()}else u=i();var B=!Ba((In||T).memoizedState,u);B&&(T.memoizedState=u,Ar=!0),T=T.queue;var se=$l.bind(null,m,T,a);if(Xl(2048,8,se,[a]),T.getSnapshot!==i||B||xs!==null&&xs.memoizedState.tag&1){if(m.flags|=2048,Do(9,Pc(),Dc.bind(null,m,T,u,i),null),oa===null)throw Error(s(349));A||(Ys&124)!==0||iu(m,i,u)}return u}function iu(a,i,u){a.flags|=16384,a={getSnapshot:i,value:u},i=gn.updateQueue,i===null?(i=vl(),gn.updateQueue=i,i.stores=[a]):(u=i.stores,u===null?i.stores=[a]:u.push(a))}function Dc(a,i,u,m){i.value=u,i.getSnapshot=m,hf(i)&&mf(a)}function $l(a,i,u){return u(function(){hf(i)&&mf(a)})}function hf(a){var i=a.getSnapshot;a=a.value;try{var u=i();return!Ba(a,u)}catch{return!0}}function mf(a){var i=Ui(a,2);i!==null&&$i(i,a,2)}function Rc(a){var i=Br();if(typeof a=="function"){var u=a;if(a=u(),Ka){Be(!0);try{u()}finally{Be(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:a},i}function Io(a,i,u,m){return a.baseState=u,zl(a,In,typeof m=="function"?m:Qr)}function im(a,i,u,m,T){if(Nf(a))throw Error(s(485));if(a=i.action,a!==null){var A={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){A.listeners.push(B)}};G.T!==null?u(!0):A.isTransition=!1,m(A),u=i.pending,u===null?(A.next=i.pending=A,pf(i,A)):(A.next=u.next,i.pending=u.next=A)}}function pf(a,i){var u=i.action,m=i.payload,T=a.state;if(i.isTransition){var A=G.T,B={};G.T=B;try{var se=u(T,m),ve=G.S;ve!==null&&ve(B,se),gf(a,i,se)}catch(Ye){Wl(a,i,Ye)}finally{G.T=A}}else try{A=u(T,m),gf(a,i,A)}catch(Ye){Wl(a,i,Ye)}}function gf(a,i,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){td(a,i,m)},function(m){return Wl(a,i,m)}):td(a,i,u)}function td(a,i,u){i.status="fulfilled",i.value=u,nd(i),a.state=u,i=a.pending,i!==null&&(u=i.next,u===i?a.pending=null:(u=u.next,i.next=u,pf(a,u)))}function Wl(a,i,u){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=u,nd(i),i=i.next;while(i!==m)}a.action=null}function nd(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function sd(a,i){return i}function Oc(a,i){if(rn){var u=oa.formState;if(u!==null){e:{var m=gn;if(rn){if(an){t:{for(var T=an,A=ga;T.nodeType!==8;){if(!A){T=null;break t}if(T=Mo(T.nextSibling),T===null){T=null;break t}}A=T.data,T=A==="F!"||A==="F"?T:null}if(T){an=Mo(T.nextSibling),m=T.data==="F!";break e}}Tl(m)}m=!1}m&&(i=u[0])}}return u=Br(),u.memoizedState=u.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:i},u.queue=m,u=jp.bind(null,gn,m),m.dispatch=u,m=Rc(!1),A=om.bind(null,gn,!1,m.queue),m=Br(),T={state:i,dispatch:null,action:a,pending:null},m.queue=T,u=im.bind(null,gn,T,A,u),T.dispatch=u,m.memoizedState=a,[i,u,!1]}function ou(a){var i=xa();return Kl(i,In,a)}function Kl(a,i,u){if(i=zl(a,i,sd)[0],a=wc(Qr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=tl(i)}catch(B){throw B===W?ee:B}else m=i;i=xa();var T=i.queue,A=T.dispatch;return u!==i.memoizedState&&(gn.flags|=2048,Do(9,Pc(),xf.bind(null,T,u),null)),[m,A,a]}function xf(a,i){a.action=i}function Ef(a){var i=xa(),u=In;if(u!==null)return Kl(i,u,a);xa(),i=i.memoizedState,u=xa();var m=u.queue.dispatch;return u.memoizedState=a,[i,m,!1]}function Do(a,i,u,m){return a={tag:a,create:u,deps:m,inst:i,next:null},i=gn.updateQueue,i===null&&(i=vl(),gn.updateQueue=i),u=i.lastEffect,u===null?i.lastEffect=a.next=a:(m=u.next,u.next=a,a.next=m,i.lastEffect=a),a}function Pc(){return{destroy:void 0,resource:void 0}}function lu(){return xa().memoizedState}function Gi(a,i,u,m){var T=Br();m=m===void 0?null:m,gn.flags|=a,T.memoizedState=Do(1|i,Pc(),u,m)}function Xl(a,i,u,m){var T=xa();m=m===void 0?null:m;var A=T.memoizedState.inst;In!==null&&m!==null&&Va(m,In.memoizedState.deps)?T.memoizedState=Do(i,A,u,m):(gn.flags|=a,T.memoizedState=Do(1|i,A,u,m))}function ad(a,i){Gi(8390656,8,a,i)}function _f(a,i){Xl(2048,8,a,i)}function rd(a,i){return Xl(4,2,a,i)}function Al(a,i){return Xl(4,4,a,i)}function bf(a,i){if(typeof i=="function"){a=a();var u=i(a);return function(){typeof u=="function"?u():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function id(a,i,u){u=u!=null?u.concat([a]):null,Xl(4,4,bf.bind(null,i,a),u)}function od(){}function ld(a,i){var u=xa();i=i===void 0?null:i;var m=u.memoizedState;return i!==null&&Va(i,m[1])?m[0]:(u.memoizedState=[a,i],a)}function Tf(a,i){var u=xa();i=i===void 0?null:i;var m=u.memoizedState;if(i!==null&&Va(i,m[1]))return m[0];if(m=a(),Ka){Be(!0);try{a()}finally{Be(!1)}}return u.memoizedState=[m,i],m}function Sl(a,i,u){return u===void 0||(Ys&1073741824)!==0?a.memoizedState=i:(a.memoizedState=u,a=Og(),gn.lanes|=a,sc|=a,u)}function cu(a,i,u,m){return Ba(u,i)?u:ns.current!==null?(a=Sl(a,u,m),Ba(a,i)||(Ar=!0),a):(Ys&42)===0?(Ar=!0,a.memoizedState=u):(a=Og(),gn.lanes|=a,sc|=a,i)}function Mc(a,i,u,m,T){var A=he.p;he.p=A!==0&&8>A?A:8;var B=G.T,se={};G.T=se,om(a,!1,i,u);try{var ve=T(),Ye=G.S;if(Ye!==null&&Ye(se,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var ct=ff(ve,m);fd(a,i,ct,zi(a))}else fd(a,i,m,zi(a))}catch(Et){fd(a,i,{then:function(){},status:"rejected",reason:Et},zi())}finally{he.p=A,G.T=B}}function Ro(){}function ho(a,i,u,m){if(a.tag!==5)throw Error(s(476));var T=Oo(a).queue;Mc(a,T,i,ue,u===null?Ro:function(){return kc(a),u(m)})}function Oo(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:ue},next:null};var u={};return i.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:u},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function kc(a){var i=Oo(a).next.queue;fd(a,i,{},zi())}function jc(){return $a(Id)}function cd(){return xa().memoizedState}function yf(){return xa().memoizedState}function ud(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var u=zi();a=lt(u);var m=gt(i,a,u);m!==null&&($i(m,i,u),ft(m,i,u)),i={cache:Qu()},a.payload=i;return}i=i.return}}function dd(a,i,u){var m=zi();u={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Nf(a)?Bp(i,u):(u=oo(a,i,u,m),u!==null&&($i(u,a,m),Up(u,i,m)))}function jp(a,i,u){var m=zi();fd(a,i,u,m)}function fd(a,i,u,m){var T={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Nf(a))Bp(i,T);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var B=i.lastRenderedState,se=A(B,u);if(T.hasEagerState=!0,T.eagerState=se,Ba(se,B))return io(a,i,T,0),oa===null&&Jr(),!1}catch{}finally{}if(u=oo(a,i,T,m),u!==null)return $i(u,a,m),Up(u,i,m),!0}return!1}function om(a,i,u,m){if(m={lane:2,revertLane:Um(),action:m,hasEagerState:!1,eagerState:null,next:null},Nf(a)){if(i)throw Error(s(479))}else i=oo(a,u,m,2),i!==null&&$i(i,a,2)}function Nf(a){var i=a.alternate;return a===gn||i!==null&&i===gn}function Bp(a,i){or=Ss=!0;var u=a.pending;u===null?i.next=i:(i.next=u.next,u.next=i),a.pending=i}function Up(a,i,u){if((u&4194048)!==0){var m=i.lanes;m&=a.pendingLanes,u|=m,i.lanes=u,Mn(a,u)}}var vf={readContext:$a,use:Zr,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps},Fp={readContext:$a,use:Zr,useCallback:function(a,i){return Br().memoizedState=[a,i===void 0?null:i],a},useContext:$a,useEffect:ad,useImperativeHandle:function(a,i,u){u=u!=null?u.concat([a]):null,Gi(4194308,4,bf.bind(null,i,a),u)},useLayoutEffect:function(a,i){return Gi(4194308,4,a,i)},useInsertionEffect:function(a,i){Gi(4,2,a,i)},useMemo:function(a,i){var u=Br();i=i===void 0?null:i;var m=a();if(Ka){Be(!0);try{a()}finally{Be(!1)}}return u.memoizedState=[m,i],m},useReducer:function(a,i,u){var m=Br();if(u!==void 0){var T=u(i);if(Ka){Be(!0);try{u(i)}finally{Be(!1)}}}else T=i;return m.memoizedState=m.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},m.queue=a,a=a.dispatch=dd.bind(null,gn,a),[m.memoizedState,a]},useRef:function(a){var i=Br();return a={current:a},i.memoizedState=a},useState:function(a){a=Rc(a);var i=a.queue,u=jp.bind(null,gn,i);return i.dispatch=u,[a.memoizedState,u]},useDebugValue:od,useDeferredValue:function(a,i){var u=Br();return Sl(u,a,i)},useTransition:function(){var a=Rc(!1);return a=Mc.bind(null,gn,a.queue,!0,!1),Br().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,u){var m=gn,T=Br();if(rn){if(u===void 0)throw Error(s(407));u=u()}else{if(u=i(),oa===null)throw Error(s(349));(Cs&124)!==0||iu(m,i,u)}T.memoizedState=u;var A={value:u,getSnapshot:i};return T.queue=A,ad($l.bind(null,m,A,a),[a]),m.flags|=2048,Do(9,Pc(),Dc.bind(null,m,A,u,i),null),u},useId:function(){var a=Br(),i=oa.identifierPrefix;if(rn){var u=at,m=ot;u=(m&~(1<<32-We(m)-1)).toString(32)+u,i=""+i+"R"+u,u=Oa++,0<u&&(i+="H"+u.toString(32)),i+=""}else u=Li++,i=""+i+"r"+u.toString(32)+"";return a.memoizedState=i},useHostTransitionStatus:jc,useFormState:Oc,useActionState:Oc,useOptimistic:function(a){var i=Br();i.memoizedState=i.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=u,i=om.bind(null,gn,!0,u),u.dispatch=i,[a,i]},useMemoCache:nl,useCacheRefresh:function(){return Br().memoizedState=ud.bind(null,gn)}},Vp={readContext:$a,use:Zr,useCallback:ld,useContext:$a,useEffect:_f,useImperativeHandle:id,useInsertionEffect:rd,useLayoutEffect:Al,useMemo:Tf,useReducer:wc,useRef:lu,useState:function(){return wc(Qr)},useDebugValue:od,useDeferredValue:function(a,i){var u=xa();return cu(u,In.memoizedState,a,i)},useTransition:function(){var a=wc(Qr)[0],i=xa().memoizedState;return[typeof a=="boolean"?a:tl(a),i]},useSyncExternalStore:Ic,useId:cd,useHostTransitionStatus:jc,useFormState:ou,useActionState:ou,useOptimistic:function(a,i){var u=xa();return Io(u,In,a,i)},useMemoCache:nl,useCacheRefresh:yf},i5={readContext:$a,use:Zr,useCallback:ld,useContext:$a,useEffect:_f,useImperativeHandle:id,useInsertionEffect:rd,useLayoutEffect:Al,useMemo:Tf,useReducer:ru,useRef:lu,useState:function(){return ru(Qr)},useDebugValue:od,useDeferredValue:function(a,i){var u=xa();return In===null?Sl(u,a,i):cu(u,In.memoizedState,a,i)},useTransition:function(){var a=ru(Qr)[0],i=xa().memoizedState;return[typeof a=="boolean"?a:tl(a),i]},useSyncExternalStore:Ic,useId:cd,useHostTransitionStatus:jc,useFormState:Ef,useActionState:Ef,useOptimistic:function(a,i){var u=xa();return In!==null?Io(u,In,a,i):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:nl,useCacheRefresh:yf},uu=null,hd=0;function Af(a){var i=hd;return hd+=1,uu===null&&(uu=[]),He(uu,a,i)}function md(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function Sf(a,i){throw i.$$typeof===b?Error(s(525)):(a=Object.prototype.toString.call(i),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function Gp(a){var i=a._init;return i(a._payload)}function Hp(a){function i(ke,Ie){if(a){var Ge=ke.deletions;Ge===null?(ke.deletions=[Ie],ke.flags|=16):Ge.push(Ie)}}function u(ke,Ie){if(!a)return null;for(;Ie!==null;)i(ke,Ie),Ie=Ie.sibling;return null}function m(ke){for(var Ie=new Map;ke!==null;)ke.key!==null?Ie.set(ke.key,ke):Ie.set(ke.index,ke),ke=ke.sibling;return Ie}function T(ke,Ie){return ke=Ai(ke,Ie),ke.index=0,ke.sibling=null,ke}function A(ke,Ie,Ge){return ke.index=Ge,a?(Ge=ke.alternate,Ge!==null?(Ge=Ge.index,Ge<Ie?(ke.flags|=67108866,Ie):Ge):(ke.flags|=67108866,Ie)):(ke.flags|=1048576,Ie)}function B(ke){return a&&ke.alternate===null&&(ke.flags|=67108866),ke}function se(ke,Ie,Ge,ht){return Ie===null||Ie.tag!==6?(Ie=El(Ge,ke.mode,ht),Ie.return=ke,Ie):(Ie=T(Ie,Ge),Ie.return=ke,Ie)}function ve(ke,Ie,Ge,ht){var en=Ge.type;return en===C?ct(ke,Ie,Ge.props.children,ht,Ge.key):Ie!==null&&(Ie.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===J&&Gp(en)===Ie.type)?(Ie=T(Ie,Ge.props),md(Ie,Ge),Ie.return=ke,Ie):(Ie=Ao(Ge.type,Ge.key,Ge.props,null,ke.mode,ht),md(Ie,Ge),Ie.return=ke,Ie)}function Ye(ke,Ie,Ge,ht){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ge.containerInfo||Ie.stateNode.implementation!==Ge.implementation?(Ie=_l(Ge,ke.mode,ht),Ie.return=ke,Ie):(Ie=T(Ie,Ge.children||[]),Ie.return=ke,Ie)}function ct(ke,Ie,Ge,ht,en){return Ie===null||Ie.tag!==7?(Ie=Fi(Ge,ke.mode,ht,en),Ie.return=ke,Ie):(Ie=T(Ie,Ge),Ie.return=ke,Ie)}function Et(ke,Ie,Ge){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=El(""+Ie,ke.mode,Ge),Ie.return=ke,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case v:return Ge=Ao(Ie.type,Ie.key,Ie.props,null,ke.mode,Ge),md(Ge,Ie),Ge.return=ke,Ge;case y:return Ie=_l(Ie,ke.mode,Ge),Ie.return=ke,Ie;case J:var ht=Ie._init;return Ie=ht(Ie._payload),Et(ke,Ie,Ge)}if(Te(Ie)||H(Ie))return Ie=Fi(Ie,ke.mode,Ge,null),Ie.return=ke,Ie;if(typeof Ie.then=="function")return Et(ke,Af(Ie),Ge);if(Ie.$$typeof===R)return Et(ke,Zo(ke,Ie),Ge);Sf(ke,Ie)}return null}function qe(ke,Ie,Ge,ht){var en=Ie!==null?Ie.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return en!==null?null:se(ke,Ie,""+Ge,ht);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case v:return Ge.key===en?ve(ke,Ie,Ge,ht):null;case y:return Ge.key===en?Ye(ke,Ie,Ge,ht):null;case J:return en=Ge._init,Ge=en(Ge._payload),qe(ke,Ie,Ge,ht)}if(Te(Ge)||H(Ge))return en!==null?null:ct(ke,Ie,Ge,ht,null);if(typeof Ge.then=="function")return qe(ke,Ie,Af(Ge),ht);if(Ge.$$typeof===R)return qe(ke,Ie,Zo(ke,Ge),ht);Sf(ke,Ge)}return null}function $e(ke,Ie,Ge,ht,en){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ke=ke.get(Ge)||null,se(Ie,ke,""+ht,en);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case v:return ke=ke.get(ht.key===null?Ge:ht.key)||null,ve(Ie,ke,ht,en);case y:return ke=ke.get(ht.key===null?Ge:ht.key)||null,Ye(Ie,ke,ht,en);case J:var os=ht._init;return ht=os(ht._payload),$e(ke,Ie,Ge,ht,en)}if(Te(ht)||H(ht))return ke=ke.get(Ge)||null,ct(Ie,ke,ht,en,null);if(typeof ht.then=="function")return $e(ke,Ie,Ge,Af(ht),en);if(ht.$$typeof===R)return $e(ke,Ie,Ge,Zo(Ie,ht),en);Sf(Ie,ht)}return null}function On(ke,Ie,Ge,ht){for(var en=null,os=null,hn=Ie,An=Ie=0,Cr=null;hn!==null&&An<Ge.length;An++){hn.index>An?(Cr=hn,hn=null):Cr=hn.sibling;var Ms=qe(ke,hn,Ge[An],ht);if(Ms===null){hn===null&&(hn=Cr);break}a&&hn&&Ms.alternate===null&&i(ke,hn),Ie=A(Ms,Ie,An),os===null?en=Ms:os.sibling=Ms,os=Ms,hn=Cr}if(An===Ge.length)return u(ke,hn),rn&&St(ke,An),en;if(hn===null){for(;An<Ge.length;An++)hn=Et(ke,Ge[An],ht),hn!==null&&(Ie=A(hn,Ie,An),os===null?en=hn:os.sibling=hn,os=hn);return rn&&St(ke,An),en}for(hn=m(hn);An<Ge.length;An++)Cr=$e(hn,ke,An,Ge[An],ht),Cr!==null&&(a&&Cr.alternate!==null&&hn.delete(Cr.key===null?An:Cr.key),Ie=A(Cr,Ie,An),os===null?en=Cr:os.sibling=Cr,os=Cr);return a&&hn.forEach(function(fc){return i(ke,fc)}),rn&&St(ke,An),en}function Tn(ke,Ie,Ge,ht){if(Ge==null)throw Error(s(151));for(var en=null,os=null,hn=Ie,An=Ie=0,Cr=null,Ms=Ge.next();hn!==null&&!Ms.done;An++,Ms=Ge.next()){hn.index>An?(Cr=hn,hn=null):Cr=hn.sibling;var fc=qe(ke,hn,Ms.value,ht);if(fc===null){hn===null&&(hn=Cr);break}a&&hn&&fc.alternate===null&&i(ke,hn),Ie=A(fc,Ie,An),os===null?en=fc:os.sibling=fc,os=fc,hn=Cr}if(Ms.done)return u(ke,hn),rn&&St(ke,An),en;if(hn===null){for(;!Ms.done;An++,Ms=Ge.next())Ms=Et(ke,Ms.value,ht),Ms!==null&&(Ie=A(Ms,Ie,An),os===null?en=Ms:os.sibling=Ms,os=Ms);return rn&&St(ke,An),en}for(hn=m(hn);!Ms.done;An++,Ms=Ge.next())Ms=$e(hn,ke,An,Ms.value,ht),Ms!==null&&(a&&Ms.alternate!==null&&hn.delete(Ms.key===null?An:Ms.key),Ie=A(Ms,Ie,An),os===null?en=Ms:os.sibling=Ms,os=Ms);return a&&hn.forEach(function(ob){return i(ke,ob)}),rn&&St(ke,An),en}function Zs(ke,Ie,Ge,ht){if(typeof Ge=="object"&&Ge!==null&&Ge.type===C&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case v:e:{for(var en=Ge.key;Ie!==null;){if(Ie.key===en){if(en=Ge.type,en===C){if(Ie.tag===7){u(ke,Ie.sibling),ht=T(Ie,Ge.props.children),ht.return=ke,ke=ht;break e}}else if(Ie.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===J&&Gp(en)===Ie.type){u(ke,Ie.sibling),ht=T(Ie,Ge.props),md(ht,Ge),ht.return=ke,ke=ht;break e}u(ke,Ie);break}else i(ke,Ie);Ie=Ie.sibling}Ge.type===C?(ht=Fi(Ge.props.children,ke.mode,ht,Ge.key),ht.return=ke,ke=ht):(ht=Ao(Ge.type,Ge.key,Ge.props,null,ke.mode,ht),md(ht,Ge),ht.return=ke,ke=ht)}return B(ke);case y:e:{for(en=Ge.key;Ie!==null;){if(Ie.key===en)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ge.containerInfo&&Ie.stateNode.implementation===Ge.implementation){u(ke,Ie.sibling),ht=T(Ie,Ge.children||[]),ht.return=ke,ke=ht;break e}else{u(ke,Ie);break}else i(ke,Ie);Ie=Ie.sibling}ht=_l(Ge,ke.mode,ht),ht.return=ke,ke=ht}return B(ke);case J:return en=Ge._init,Ge=en(Ge._payload),Zs(ke,Ie,Ge,ht)}if(Te(Ge))return On(ke,Ie,Ge,ht);if(H(Ge)){if(en=H(Ge),typeof en!="function")throw Error(s(150));return Ge=en.call(Ge),Tn(ke,Ie,Ge,ht)}if(typeof Ge.then=="function")return Zs(ke,Ie,Af(Ge),ht);if(Ge.$$typeof===R)return Zs(ke,Ie,Zo(ke,Ge),ht);Sf(ke,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Ie!==null&&Ie.tag===6?(u(ke,Ie.sibling),ht=T(Ie,Ge),ht.return=ke,ke=ht):(u(ke,Ie),ht=El(Ge,ke.mode,ht),ht.return=ke,ke=ht),B(ke)):u(ke,Ie)}return function(ke,Ie,Ge,ht){try{hd=0;var en=Zs(ke,Ie,Ge,ht);return uu=null,en}catch(hn){if(hn===W||hn===ee)throw hn;var os=rr(29,hn,null,ke.mode);return os.lanes=ht,os.return=ke,os}finally{}}}var du=Hp(!0),Yp=Hp(!1),mo=ce(null),sl=null;function Jl(a){var i=a.alternate;k(gr,gr.current&1),k(mo,a),sl===null&&(i===null||ns.current!==null||i.memoizedState!==null)&&(sl=a)}function qp(a){if(a.tag===22){if(k(gr,gr.current),k(mo,a),sl===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(sl=a)}}else Zl()}function Zl(){k(gr,gr.current),k(mo,mo.current)}function Cl(a){M(mo),sl===a&&(sl=null),M(gr)}var gr=ce(0);function Cf(a){for(var i=a;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Jm(u)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function lm(a,i,u,m){i=a.memoizedState,u=u(m,i),u=u==null?i:_({},i,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var cm={enqueueSetState:function(a,i,u){a=a._reactInternals;var m=zi(),T=lt(m);T.payload=i,u!=null&&(T.callback=u),i=gt(a,T,m),i!==null&&($i(i,a,m),ft(i,a,m))},enqueueReplaceState:function(a,i,u){a=a._reactInternals;var m=zi(),T=lt(m);T.tag=1,T.payload=i,u!=null&&(T.callback=u),i=gt(a,T,m),i!==null&&($i(i,a,m),ft(i,a,m))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var u=zi(),m=lt(u);m.tag=2,i!=null&&(m.callback=i),i=gt(a,m,u),i!==null&&($i(i,a,u),ft(i,a,u))}};function zp(a,i,u,m,T,A,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,A,B):i.prototype&&i.prototype.isPureReactComponent?!eo(u,m)||!eo(T,A):!0}function $p(a,i,u,m){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,m),i.state!==a&&cm.enqueueReplaceState(i,i.state,null)}function Bc(a,i){var u=i;if("ref"in i){u={};for(var m in i)m!=="ref"&&(u[m]=i[m])}if(a=a.defaultProps){u===i&&(u=_({},u));for(var T in a)u[T]===void 0&&(u[T]=a[T])}return u}var Lf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Wp(a){Lf(a)}function Kp(a){console.error(a)}function Xp(a){Lf(a)}function wf(a,i){try{var u=a.onUncaughtError;u(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function Jp(a,i,u){try{var m=a.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function um(a,i,u){return u=lt(u),u.tag=3,u.payload={element:null},u.callback=function(){wf(a,i)},u}function Zp(a){return a=lt(a),a.tag=3,a}function Qp(a,i,u,m){var T=u.type.getDerivedStateFromError;if(typeof T=="function"){var A=m.value;a.payload=function(){return T(A)},a.callback=function(){Jp(i,u,m)}}var B=u.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(a.callback=function(){Jp(i,u,m),typeof T!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var se=m.stack;this.componentDidCatch(m.value,{componentStack:se!==null?se:""})})}function o5(a,i,u,m,T){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=u.alternate,i!==null&&ql(i,u,T,!0),u=mo.current,u!==null){switch(u.tag){case 13:return sl===null?Pm():u.alternate===null&&Ga===0&&(Ga=3),u.flags&=-257,u.flags|=65536,u.lanes=T,m===ie?u.flags|=16384:(i=u.updateQueue,i===null?u.updateQueue=new Set([m]):i.add(m),km(a,m,T)),!1;case 22:return u.flags|=65536,m===ie?u.flags|=16384:(i=u.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=i):(u=i.retryQueue,u===null?i.retryQueue=new Set([m]):u.add(m)),km(a,m,T)),!1}throw Error(s(435,u.tag))}return km(a,m,T),Pm(),!1}if(rn)return i=mo.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=T,m!==Hl&&(a=Error(s(422),{cause:m}),Yl(Jn(a,u)))):(m!==Hl&&(i=Error(s(423),{cause:m}),Yl(Jn(i,u))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,m=Jn(m,u),T=um(a.stateNode,m,T),qt(a,T),Ga!==4&&(Ga=2)),!1;var A=Error(s(520),{cause:m});if(A=Jn(A,u),Td===null?Td=[A]:Td.push(A),Ga!==4&&(Ga=2),i===null)return!0;m=Jn(m,u),u=i;do{switch(u.tag){case 3:return u.flags|=65536,a=T&-T,u.lanes|=a,a=um(u.stateNode,m,a),qt(u,a),!1;case 1:if(i=u.type,A=u.stateNode,(u.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ac===null||!ac.has(A))))return u.flags|=65536,T&=-T,u.lanes|=T,T=Zp(T),Qp(T,a,u,m),qt(u,T),!1}u=u.return}while(u!==null);return!1}var eg=Error(s(461)),Ar=!1;function Ur(a,i,u,m){i.child=a===null?Yp(i,null,u,m):du(i,a.child,u,m)}function tg(a,i,u,m,T){u=u.render;var A=i.ref;if("ref"in m){var B={};for(var se in m)se!=="ref"&&(B[se]=m[se])}else B=m;return fo(i),m=Vi(a,i,u,B,A,T),se=ia(),a!==null&&!Ar?(Lc(a,i,T),Ll(a,i,T)):(rn&&se&&It(i),i.flags|=1,Ur(a,i,m,T),i.child)}function ng(a,i,u,m,T){if(a===null){var A=u.type;return typeof A=="function"&&!Xo(A)&&A.defaultProps===void 0&&u.compare===null?(i.tag=15,i.type=A,sg(a,i,A,m,T)):(a=Ao(u.type,null,m,i,i.mode,T),a.ref=i.ref,a.return=i,i.child=a)}if(A=a.child,!Em(a,T)){var B=A.memoizedProps;if(u=u.compare,u=u!==null?u:eo,u(B,m)&&a.ref===i.ref)return Ll(a,i,T)}return i.flags|=1,a=Ai(A,m),a.ref=i.ref,a.return=i,i.child=a}function sg(a,i,u,m,T){if(a!==null){var A=a.memoizedProps;if(eo(A,m)&&a.ref===i.ref)if(Ar=!1,i.pendingProps=m=A,Em(a,T))(a.flags&131072)!==0&&(Ar=!0);else return i.lanes=a.lanes,Ll(a,i,T)}return dm(a,i,u,m,T)}function ag(a,i,u){var m=i.pendingProps,T=m.children,A=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((i.flags&128)!==0){if(m=A!==null?A.baseLanes|u:u,a!==null){for(T=i.child=a.child,A=0;T!==null;)A=A|T.lanes|T.childLanes,T=T.sibling;i.childLanes=A&~m}else i.childLanes=0,i.child=null;return rg(a,i,m,u)}if((u&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&P(i,A!==null?A.cachePool:null),A!==null?Vs(i,A):Os(),qp(i);else return i.lanes=i.childLanes=536870912,rg(a,i,A!==null?A.baseLanes|u:u,u)}else A!==null?(P(i,A.cachePool),Vs(i,A),Zl(),i.memoizedState=null):(a!==null&&P(i,null),Os(),Zl());return Ur(a,i,T,u),i.child}function rg(a,i,u,m){var T=w();return T=T===null?null:{parent:Wa._currentValue,pool:T},i.memoizedState={baseLanes:u,cachePool:T},a!==null&&P(i,null),Os(),qp(i),a!==null&&ql(a,i,m,!0),null}function If(a,i){var u=i.ref;if(u===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(a===null||a.ref!==u)&&(i.flags|=4194816)}}function dm(a,i,u,m,T){return fo(i),u=Vi(a,i,u,m,void 0,T),m=ia(),a!==null&&!Ar?(Lc(a,i,T),Ll(a,i,T)):(rn&&m&&It(i),i.flags|=1,Ur(a,i,u,T),i.child)}function ig(a,i,u,m,T,A){return fo(i),i.updateQueue=null,u=Nl(i,m,u,T),Qo(a),m=ia(),a!==null&&!Ar?(Lc(a,i,A),Ll(a,i,A)):(rn&&m&&It(i),i.flags|=1,Ur(a,i,u,A),i.child)}function og(a,i,u,m,T){if(fo(i),i.stateNode===null){var A=Ra,B=u.contextType;typeof B=="object"&&B!==null&&(A=$a(B)),A=new u(m,A),i.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=cm,i.stateNode=A,A._reactInternals=i,A=i.stateNode,A.props=m,A.state=i.memoizedState,A.refs={},Le(i),B=u.contextType,A.context=typeof B=="object"&&B!==null?$a(B):Ra,A.state=i.memoizedState,B=u.getDerivedStateFromProps,typeof B=="function"&&(lm(i,u,B,m),A.state=i.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(B=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),B!==A.state&&cm.enqueueReplaceState(A,A.state,null),Ut(i,m,A,T),fn(),A.state=i.memoizedState),typeof A.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(a===null){A=i.stateNode;var se=i.memoizedProps,ve=Bc(u,se);A.props=ve;var Ye=A.context,ct=u.contextType;B=Ra,typeof ct=="object"&&ct!==null&&(B=$a(ct));var Et=u.getDerivedStateFromProps;ct=typeof Et=="function"||typeof A.getSnapshotBeforeUpdate=="function",se=i.pendingProps!==se,ct||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(se||Ye!==B)&&$p(i,A,m,B),Ke=!1;var qe=i.memoizedState;A.state=qe,Ut(i,m,A,T),fn(),Ye=i.memoizedState,se||qe!==Ye||Ke?(typeof Et=="function"&&(lm(i,u,Et,m),Ye=i.memoizedState),(ve=Ke||zp(i,u,ve,m,qe,Ye,B))?(ct||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=Ye),A.props=m,A.state=Ye,A.context=B,m=ve):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{A=i.stateNode,De(a,i),B=i.memoizedProps,ct=Bc(u,B),A.props=ct,Et=i.pendingProps,qe=A.context,Ye=u.contextType,ve=Ra,typeof Ye=="object"&&Ye!==null&&(ve=$a(Ye)),se=u.getDerivedStateFromProps,(Ye=typeof se=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B!==Et||qe!==ve)&&$p(i,A,m,ve),Ke=!1,qe=i.memoizedState,A.state=qe,Ut(i,m,A,T),fn();var $e=i.memoizedState;B!==Et||qe!==$e||Ke||a!==null&&a.dependencies!==null&&nu(a.dependencies)?(typeof se=="function"&&(lm(i,u,se,m),$e=i.memoizedState),(ct=Ke||zp(i,u,ct,m,qe,$e,ve)||a!==null&&a.dependencies!==null&&nu(a.dependencies))?(Ye||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,$e,ve),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,$e,ve)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=$e),A.props=m,A.state=$e,A.context=ve,m=ct):(typeof A.componentDidUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&qe===a.memoizedState||(i.flags|=1024),m=!1)}return A=m,If(a,i),m=(i.flags&128)!==0,A||m?(A=i.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:A.render(),i.flags|=1,a!==null&&m?(i.child=du(i,a.child,null,T),i.child=du(i,null,u,T)):Ur(a,i,u,T),i.memoizedState=A.state,a=i.child):a=Ll(a,i,T),a}function lg(a,i,u,m){return pi(),i.flags|=256,Ur(a,i,u,m),i.child}var fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(a){return{baseLanes:a,cachePool:z()}}function mm(a,i,u){return a=a!==null?a.childLanes&~u:0,i&&(a|=po),a}function cg(a,i,u){var m=i.pendingProps,T=!1,A=(i.flags&128)!==0,B;if((B=A)||(B=a!==null&&a.memoizedState===null?!1:(gr.current&2)!==0),B&&(T=!0,i.flags&=-129),B=(i.flags&32)!==0,i.flags&=-33,a===null){if(rn){if(T?Jl(i):Zl(),rn){var se=an,ve;if(ve=se){e:{for(ve=se,se=ga;ve.nodeType!==8;){if(!se){se=null;break e}if(ve=Mo(ve.nextSibling),ve===null){se=null;break e}}se=ve}se!==null?(i.memoizedState={dehydrated:se,treeContext:Se!==null?{id:ot,overflow:at}:null,retryLane:536870912,hydrationErrors:null},ve=rr(18,null,null,0),ve.stateNode=se,ve.return=i,i.child=ve,Wt=i,an=null,ve=!0):ve=!1}ve||Tl(i)}if(se=i.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return Jm(se)?i.lanes=32:i.lanes=536870912,null;Cl(i)}return se=m.children,m=m.fallback,T?(Zl(),T=i.mode,se=Df({mode:"hidden",children:se},T),m=Fi(m,T,u,null),se.return=i,m.return=i,se.sibling=m,i.child=se,T=i.child,T.memoizedState=hm(u),T.childLanes=mm(a,B,u),i.memoizedState=fm,m):(Jl(i),pm(i,se))}if(ve=a.memoizedState,ve!==null&&(se=ve.dehydrated,se!==null)){if(A)i.flags&256?(Jl(i),i.flags&=-257,i=gm(a,i,u)):i.memoizedState!==null?(Zl(),i.child=a.child,i.flags|=128,i=null):(Zl(),T=m.fallback,se=i.mode,m=Df({mode:"visible",children:m.children},se),T=Fi(T,se,u,null),T.flags|=2,m.return=i,T.return=i,m.sibling=T,i.child=m,du(i,a.child,null,u),m=i.child,m.memoizedState=hm(u),m.childLanes=mm(a,B,u),i.memoizedState=fm,i=T);else if(Jl(i),Jm(se)){if(B=se.nextSibling&&se.nextSibling.dataset,B)var Ye=B.dgst;B=Ye,m=Error(s(419)),m.stack="",m.digest=B,Yl({value:m,source:null,stack:null}),i=gm(a,i,u)}else if(Ar||ql(a,i,u,!1),B=(u&a.childLanes)!==0,Ar||B){if(B=oa,B!==null&&(m=u&-u,m=(m&42)!==0?1:qa(m),m=(m&(B.suspendedLanes|u))!==0?0:m,m!==0&&m!==ve.retryLane))throw ve.retryLane=m,Ui(a,m),$i(B,a,m),eg;se.data==="$?"||Pm(),i=gm(a,i,u)}else se.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=ve.treeContext,an=Mo(se.nextSibling),Wt=i,rn=!0,is=null,ga=!1,a!==null&&(kr[$++]=ot,kr[$++]=at,kr[$++]=Se,ot=a.id,at=a.overflow,Se=i),i=pm(i,m.children),i.flags|=4096);return i}return T?(Zl(),T=m.fallback,se=i.mode,ve=a.child,Ye=ve.sibling,m=Ai(ve,{mode:"hidden",children:m.children}),m.subtreeFlags=ve.subtreeFlags&65011712,Ye!==null?T=Ai(Ye,T):(T=Fi(T,se,u,null),T.flags|=2),T.return=i,m.return=i,m.sibling=T,i.child=m,m=T,T=i.child,se=a.child.memoizedState,se===null?se=hm(u):(ve=se.cachePool,ve!==null?(Ye=Wa._currentValue,ve=ve.parent!==Ye?{parent:Ye,pool:Ye}:ve):ve=z(),se={baseLanes:se.baseLanes|u,cachePool:ve}),T.memoizedState=se,T.childLanes=mm(a,B,u),i.memoizedState=fm,m):(Jl(i),u=a.child,a=u.sibling,u=Ai(u,{mode:"visible",children:m.children}),u.return=i,u.sibling=null,a!==null&&(B=i.deletions,B===null?(i.deletions=[a],i.flags|=16):B.push(a)),i.child=u,i.memoizedState=null,u)}function pm(a,i){return i=Df({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Df(a,i){return a=rr(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function gm(a,i,u){return du(i,a.child,null,u),a=pm(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function ug(a,i,u){a.lanes|=i;var m=a.alternate;m!==null&&(m.lanes|=i),eu(a.return,i,u)}function xm(a,i,u,m,T){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:T}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=u,A.tailMode=T)}function dg(a,i,u){var m=i.pendingProps,T=m.revealOrder,A=m.tail;if(Ur(a,i,m.children,u),m=gr.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ug(a,u,i);else if(a.tag===19)ug(a,u,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(k(gr,m),T){case"forwards":for(u=i.child,T=null;u!==null;)a=u.alternate,a!==null&&Cf(a)===null&&(T=u),u=u.sibling;u=T,u===null?(T=i.child,i.child=null):(T=u.sibling,u.sibling=null),xm(i,!1,T,u,A);break;case"backwards":for(u=null,T=i.child,i.child=null;T!==null;){if(a=T.alternate,a!==null&&Cf(a)===null){i.child=T;break}a=T.sibling,T.sibling=u,u=T,T=a}xm(i,!0,u,null,A);break;case"together":xm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ll(a,i,u){if(a!==null&&(i.dependencies=a.dependencies),sc|=i.lanes,(u&i.childLanes)===0)if(a!==null){if(ql(a,i,u,!1),(u&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(s(153));if(i.child!==null){for(a=i.child,u=Ai(a,a.pendingProps),i.child=u,u.return=i;a.sibling!==null;)a=a.sibling,u=u.sibling=Ai(a,a.pendingProps),u.return=i;u.sibling=null}return i.child}function Em(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&nu(a)))}function l5(a,i,u){switch(i.tag){case 3:de(i,i.stateNode.containerInfo),Jo(i,Wa,a.memoizedState.cache),pi();break;case 27:case 5:Ue(i);break;case 4:de(i,i.stateNode.containerInfo);break;case 10:Jo(i,i.type,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(Jl(i),i.flags|=128,null):(u&i.child.childLanes)!==0?cg(a,i,u):(Jl(i),a=Ll(a,i,u),a!==null?a.sibling:null);Jl(i);break;case 19:var T=(a.flags&128)!==0;if(m=(u&i.childLanes)!==0,m||(ql(a,i,u,!1),m=(u&i.childLanes)!==0),T){if(m)return dg(a,i,u);i.flags|=128}if(T=i.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),k(gr,gr.current),m)break;return null;case 22:case 23:return i.lanes=0,ag(a,i,u);case 24:Jo(i,Wa,a.memoizedState.cache)}return Ll(a,i,u)}function fg(a,i,u){if(a!==null)if(a.memoizedProps!==i.pendingProps)Ar=!0;else{if(!Em(a,u)&&(i.flags&128)===0)return Ar=!1,l5(a,i,u);Ar=(a.flags&131072)!==0}else Ar=!1,rn&&(i.flags&1048576)!==0&&Mt(i,bl,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var m=i.elementType,T=m._init;if(m=T(m._payload),i.type=m,typeof m=="function")Xo(m)?(a=Bc(m,a),i.tag=1,i=og(null,i,m,a,u)):(i.tag=0,i=dm(null,i,m,a,u));else{if(m!=null){if(T=m.$$typeof,T===U){i.tag=11,i=tg(null,i,m,a,u);break e}else if(T===ne){i.tag=14,i=ng(null,i,m,a,u);break e}}throw i=K(m)||m,Error(s(306,i,""))}}return i;case 0:return dm(a,i,i.type,i.pendingProps,u);case 1:return m=i.type,T=Bc(m,i.pendingProps),og(a,i,m,T,u);case 3:e:{if(de(i,i.stateNode.containerInfo),a===null)throw Error(s(387));m=i.pendingProps;var A=i.memoizedState;T=A.element,De(a,i),Ut(i,m,null,u);var B=i.memoizedState;if(m=B.cache,Jo(i,Wa,m),m!==A.cache&&tu(i,[Wa],u,!0),fn(),m=B.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:B.cache},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){i=lg(a,i,m,u);break e}else if(m!==T){T=Jn(Error(s(424)),i),Yl(T),i=lg(a,i,m,u);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(an=Mo(a.firstChild),Wt=i,rn=!0,is=null,ga=!0,u=Yp(i,null,m,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(pi(),m===T){i=Ll(a,i,u);break e}Ur(a,i,m,u)}i=i.child}return i;case 26:return If(a,i),a===null?(u=gx(i.type,null,i.pendingProps,null))?i.memoizedState=u:rn||(u=i.type,a=i.pendingProps,m=qf(fe.current).createElement(u),m[Ln]=i,m[kn]=a,Vr(m,u,a),$n(m),i.stateNode=m):i.memoizedState=gx(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return Ue(i),a===null&&rn&&(m=i.stateNode=hx(i.type,i.pendingProps,fe.current),Wt=i,ga=!0,T=an,oc(i.type)?(Zm=T,an=Mo(m.firstChild)):an=T),Ur(a,i,i.pendingProps.children,u),If(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&rn&&((T=m=an)&&(m=k5(m,i.type,i.pendingProps,ga),m!==null?(i.stateNode=m,Wt=i,an=Mo(m.firstChild),ga=!1,T=!0):T=!1),T||Tl(i)),Ue(i),T=i.type,A=i.pendingProps,B=a!==null?a.memoizedProps:null,m=A.children,Wm(T,A)?m=null:B!==null&&Wm(T,B)&&(i.flags|=32),i.memoizedState!==null&&(T=Vi(a,i,el,null,null,u),Id._currentValue=T),If(a,i),Ur(a,i,m,u),i.child;case 6:return a===null&&rn&&((a=u=an)&&(u=j5(u,i.pendingProps,ga),u!==null?(i.stateNode=u,Wt=i,an=null,a=!0):a=!1),a||Tl(i)),null;case 13:return cg(a,i,u);case 4:return de(i,i.stateNode.containerInfo),m=i.pendingProps,a===null?i.child=du(i,null,m,u):Ur(a,i,m,u),i.child;case 11:return tg(a,i,i.type,i.pendingProps,u);case 7:return Ur(a,i,i.pendingProps,u),i.child;case 8:return Ur(a,i,i.pendingProps.children,u),i.child;case 12:return Ur(a,i,i.pendingProps.children,u),i.child;case 10:return m=i.pendingProps,Jo(i,i.type,m.value),Ur(a,i,m.children,u),i.child;case 9:return T=i.type._context,m=i.pendingProps.children,fo(i),T=$a(T),m=m(T),i.flags|=1,Ur(a,i,m,u),i.child;case 14:return ng(a,i,i.type,i.pendingProps,u);case 15:return sg(a,i,i.type,i.pendingProps,u);case 19:return dg(a,i,u);case 31:return m=i.pendingProps,u=i.mode,m={mode:m.mode,children:m.children},a===null?(u=Df(m,u),u.ref=i.ref,i.child=u,u.return=i,i=u):(u=Ai(a.child,m),u.ref=i.ref,i.child=u,u.return=i,i=u),i;case 22:return ag(a,i,u);case 24:return fo(i),m=$a(Wa),a===null?(T=w(),T===null&&(T=oa,A=Qu(),T.pooledCache=A,A.refCount++,A!==null&&(T.pooledCacheLanes|=u),T=A),i.memoizedState={parent:m,cache:T},Le(i),Jo(i,Wa,T)):((a.lanes&u)!==0&&(De(a,i),Ut(i,null,null,u),fn()),T=a.memoizedState,A=i.memoizedState,T.parent!==m?(T={parent:m,cache:m},i.memoizedState=T,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=T),Jo(i,Wa,m)):(m=A.cache,Jo(i,Wa,m),m!==T.cache&&tu(i,[Wa],u,!0))),Ur(a,i,i.pendingProps.children,u),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function wl(a){a.flags|=4}function hg(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Tx(i)){if(i=mo.current,i!==null&&((Cs&4194048)===Cs?sl!==null:(Cs&62914560)!==Cs&&(Cs&536870912)===0||i!==sl))throw Ve=ie,X;a.flags|=8192}}function Rf(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?Un():536870912,a.lanes|=i,pu|=i)}function pd(a,i){if(!rn)switch(a.tailMode){case"hidden":i=a.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Ma(a){var i=a.alternate!==null&&a.alternate.child===a.child,u=0,m=0;if(i)for(var T=a.child;T!==null;)u|=T.lanes|T.childLanes,m|=T.subtreeFlags&65011712,m|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)u|=T.lanes|T.childLanes,m|=T.subtreeFlags,m|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=m,a.childLanes=u,i}function c5(a,i,u){var m=i.pendingProps;switch(sn(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ma(i),null;case 1:return Ma(i),null;case 3:return u=i.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),uo(Wa),ye(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(jr(i)?wl(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cf())),Ma(i),null;case 26:return u=i.memoizedState,a===null?(wl(i),u!==null?(Ma(i),hg(i,u)):(Ma(i),i.flags&=-16777217)):u?u!==a.memoizedState?(wl(i),Ma(i),hg(i,u)):(Ma(i),i.flags&=-16777217):(a.memoizedProps!==m&&wl(i),Ma(i),i.flags&=-16777217),null;case 27:we(i),u=fe.current;var T=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==m&&wl(i);else{if(!m){if(i.stateNode===null)throw Error(s(166));return Ma(i),null}a=Y.current,jr(i)?lf(i):(a=hx(T,m,u),i.stateNode=a,wl(i))}return Ma(i),null;case 5:if(we(i),u=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==m&&wl(i);else{if(!m){if(i.stateNode===null)throw Error(s(166));return Ma(i),null}if(a=Y.current,jr(i))lf(i);else{switch(T=qf(fe.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?T.createElement(u,{is:m.is}):T.createElement(u)}}a[Ln]=i,a[kn]=m;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=a;e:switch(Vr(a,u,m),u){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&wl(i)}}return Ma(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==m&&wl(i);else{if(typeof m!="string"&&i.stateNode===null)throw Error(s(166));if(a=fe.current,jr(i)){if(a=i.stateNode,u=i.memoizedProps,m=null,T=Wt,T!==null)switch(T.tag){case 27:case 5:m=T.memoizedProps}a[Ln]=i,a=!!(a.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||ix(a.nodeValue,u)),a||Tl(i)}else a=qf(a).createTextNode(m),a[Ln]=i,i.stateNode=a}return Ma(i),null;case 13:if(m=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=jr(i),m!==null&&m.dehydrated!==null){if(a===null){if(!T)throw Error(s(318));if(T=i.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(s(317));T[Ln]=i}else pi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ma(i),T=!1}else T=cf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return i.flags&256?(Cl(i),i):(Cl(i),null)}if(Cl(i),(i.flags&128)!==0)return i.lanes=u,i;if(u=m!==null,a=a!==null&&a.memoizedState!==null,u){m=i.child,T=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(T=m.alternate.memoizedState.cachePool.pool);var A=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==T&&(m.flags|=2048)}return u!==a&&u&&(i.child.flags|=8192),Rf(i,i.updateQueue),Ma(i),null;case 4:return ye(),a===null&&Hm(i.stateNode.containerInfo),Ma(i),null;case 10:return uo(i.type),Ma(i),null;case 19:if(M(gr),T=i.memoizedState,T===null)return Ma(i),null;if(m=(i.flags&128)!==0,A=T.rendering,A===null)if(m)pd(T,!1);else{if(Ga!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(A=Cf(a),A!==null){for(i.flags|=128,pd(T,!1),a=A.updateQueue,i.updateQueue=a,Rf(i,a),i.subtreeFlags=0,a=u,u=i.child;u!==null;)lo(u,a),u=u.sibling;return k(gr,gr.current&1|2),i.child}a=a.sibling}T.tail!==null&&Fe()>Mf&&(i.flags|=128,m=!0,pd(T,!1),i.lanes=4194304)}else{if(!m)if(a=Cf(A),a!==null){if(i.flags|=128,m=!0,a=a.updateQueue,i.updateQueue=a,Rf(i,a),pd(T,!0),T.tail===null&&T.tailMode==="hidden"&&!A.alternate&&!rn)return Ma(i),null}else 2*Fe()-T.renderingStartTime>Mf&&u!==536870912&&(i.flags|=128,m=!0,pd(T,!1),i.lanes=4194304);T.isBackwards?(A.sibling=i.child,i.child=A):(a=T.last,a!==null?a.sibling=A:i.child=A,T.last=A)}return T.tail!==null?(i=T.tail,T.rendering=i,T.tail=i.sibling,T.renderingStartTime=Fe(),i.sibling=null,a=gr.current,k(gr,m?a&1|2:a&1),i):(Ma(i),null);case 22:case 23:return Cl(i),Vn(),m=i.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(u&536870912)!==0&&(i.flags&128)===0&&(Ma(i),i.subtreeFlags&6&&(i.flags|=8192)):Ma(i),u=i.updateQueue,u!==null&&Rf(i,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==u&&(i.flags|=2048),a!==null&&M(N),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),uo(Wa),Ma(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function u5(a,i){switch(sn(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return uo(Wa),ye(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return we(i),null;case 13:if(Cl(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(s(340));pi()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return M(gr),null;case 4:return ye(),null;case 10:return uo(i.type),null;case 22:case 23:return Cl(i),Vn(),a!==null&&M(N),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return uo(Wa),null;case 25:return null;default:return null}}function mg(a,i){switch(sn(i),i.tag){case 3:uo(Wa),ye();break;case 26:case 27:case 5:we(i);break;case 4:ye();break;case 13:Cl(i);break;case 19:M(gr);break;case 10:uo(i.type);break;case 22:case 23:Cl(i),Vn(),a!==null&&M(N);break;case 24:uo(Wa)}}function gd(a,i){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var T=m.next;u=T;do{if((u.tag&a)===a){m=void 0;var A=u.create,B=u.inst;m=A(),B.destroy=m}u=u.next}while(u!==T)}}catch(se){ta(i,i.return,se)}}function Ql(a,i,u){try{var m=i.updateQueue,T=m!==null?m.lastEffect:null;if(T!==null){var A=T.next;m=A;do{if((m.tag&a)===a){var B=m.inst,se=B.destroy;if(se!==void 0){B.destroy=void 0,T=i;var ve=u,Ye=se;try{Ye()}catch(ct){ta(T,ve,ct)}}}m=m.next}while(m!==A)}}catch(ct){ta(i,i.return,ct)}}function pg(a){var i=a.updateQueue;if(i!==null){var u=a.stateNode;try{Rs(i,u)}catch(m){ta(a,a.return,m)}}}function gg(a,i,u){u.props=Bc(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(m){ta(a,i,m)}}function xd(a,i){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof u=="function"?a.refCleanup=u(m):u.current=m}}catch(T){ta(a,i,T)}}function al(a,i){var u=a.ref,m=a.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(T){ta(a,i,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(T){ta(a,i,T)}else u.current=null}function xg(a){var i=a.type,u=a.memoizedProps,m=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(T){ta(a,a.return,T)}}function _m(a,i,u){try{var m=a.stateNode;D5(m,a.type,u,i),m[kn]=i}catch(T){ta(a,a.return,T)}}function Eg(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&oc(a.type)||a.tag===4}function bm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Eg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&oc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Tm(a,i,u){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,i):(i=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,i.appendChild(a),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=Yf));else if(m!==4&&(m===27&&oc(a.type)&&(u=a.stateNode,i=null),a=a.child,a!==null))for(Tm(a,i,u),a=a.sibling;a!==null;)Tm(a,i,u),a=a.sibling}function Of(a,i,u){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?u.insertBefore(a,i):u.appendChild(a);else if(m!==4&&(m===27&&oc(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Of(a,i,u),a=a.sibling;a!==null;)Of(a,i,u),a=a.sibling}function _g(a){var i=a.stateNode,u=a.memoizedProps;try{for(var m=a.type,T=i.attributes;T.length;)i.removeAttributeNode(T[0]);Vr(i,m,u),i[Ln]=a,i[kn]=u}catch(A){ta(a,a.return,A)}}var Il=!1,Xa=!1,ym=!1,bg=typeof WeakSet=="function"?WeakSet:Set,Sr=null;function d5(a,i){if(a=a.containerInfo,zm=Jf,a=pr(a),Na(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var T=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{u.nodeType,A.nodeType}catch{u=null;break e}var B=0,se=-1,ve=-1,Ye=0,ct=0,Et=a,qe=null;t:for(;;){for(var $e;Et!==u||T!==0&&Et.nodeType!==3||(se=B+T),Et!==A||m!==0&&Et.nodeType!==3||(ve=B+m),Et.nodeType===3&&(B+=Et.nodeValue.length),($e=Et.firstChild)!==null;)qe=Et,Et=$e;for(;;){if(Et===a)break t;if(qe===u&&++Ye===T&&(se=B),qe===A&&++ct===m&&(ve=B),($e=Et.nextSibling)!==null)break;Et=qe,qe=Et.parentNode}Et=$e}u=se===-1||ve===-1?null:{start:se,end:ve}}else u=null}u=u||{start:0,end:0}}else u=null;for($m={focusedElem:a,selectionRange:u},Jf=!1,Sr=i;Sr!==null;)if(i=Sr,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,Sr=a;else for(;Sr!==null;){switch(i=Sr,A=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&A!==null){a=void 0,u=i,T=A.memoizedProps,A=A.memoizedState,m=u.stateNode;try{var On=Bc(u.type,T,u.elementType===u.type);a=m.getSnapshotBeforeUpdate(On,A),m.__reactInternalSnapshotBeforeUpdate=a}catch(Tn){ta(u,u.return,Tn)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,u=a.nodeType,u===9)Xm(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Xm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=i.sibling,a!==null){a.return=i.return,Sr=a;break}Sr=i.return}}function Tg(a,i,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:ec(a,u),m&4&&gd(5,u);break;case 1:if(ec(a,u),m&4)if(a=u.stateNode,i===null)try{a.componentDidMount()}catch(B){ta(u,u.return,B)}else{var T=Bc(u.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(T,i,a.__reactInternalSnapshotBeforeUpdate)}catch(B){ta(u,u.return,B)}}m&64&&pg(u),m&512&&xd(u,u.return);break;case 3:if(ec(a,u),m&64&&(a=u.updateQueue,a!==null)){if(i=null,u.child!==null)switch(u.child.tag){case 27:case 5:i=u.child.stateNode;break;case 1:i=u.child.stateNode}try{Rs(a,i)}catch(B){ta(u,u.return,B)}}break;case 27:i===null&&m&4&&_g(u);case 26:case 5:ec(a,u),i===null&&m&4&&xg(u),m&512&&xd(u,u.return);break;case 12:ec(a,u);break;case 13:ec(a,u),m&4&&vg(a,u),m&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=b5.bind(null,u),B5(a,u))));break;case 22:if(m=u.memoizedState!==null||Il,!m){i=i!==null&&i.memoizedState!==null||Xa,T=Il;var A=Xa;Il=m,(Xa=i)&&!A?tc(a,u,(u.subtreeFlags&8772)!==0):ec(a,u),Il=T,Xa=A}break;case 30:break;default:ec(a,u)}}function yg(a){var i=a.alternate;i!==null&&(a.alternate=null,yg(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&En(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Aa=null,wi=!1;function Dl(a,i,u){for(u=u.child;u!==null;)Ng(a,i,u),u=u.sibling}function Ng(a,i,u){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Ft,u)}catch{}switch(u.tag){case 26:Xa||al(u,i),Dl(a,i,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Xa||al(u,i);var m=Aa,T=wi;oc(u.type)&&(Aa=u.stateNode,wi=!1),Dl(a,i,u),Sd(u.stateNode),Aa=m,wi=T;break;case 5:Xa||al(u,i);case 6:if(m=Aa,T=wi,Aa=null,Dl(a,i,u),Aa=m,wi=T,Aa!==null)if(wi)try{(Aa.nodeType===9?Aa.body:Aa.nodeName==="HTML"?Aa.ownerDocument.body:Aa).removeChild(u.stateNode)}catch(A){ta(u,i,A)}else try{Aa.removeChild(u.stateNode)}catch(A){ta(u,i,A)}break;case 18:Aa!==null&&(wi?(a=Aa,dx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Pd(a)):dx(Aa,u.stateNode));break;case 4:m=Aa,T=wi,Aa=u.stateNode.containerInfo,wi=!0,Dl(a,i,u),Aa=m,wi=T;break;case 0:case 11:case 14:case 15:Xa||Ql(2,u,i),Xa||Ql(4,u,i),Dl(a,i,u);break;case 1:Xa||(al(u,i),m=u.stateNode,typeof m.componentWillUnmount=="function"&&gg(u,i,m)),Dl(a,i,u);break;case 21:Dl(a,i,u);break;case 22:Xa=(m=Xa)||u.memoizedState!==null,Dl(a,i,u),Xa=m;break;default:Dl(a,i,u)}}function vg(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Pd(a)}catch(u){ta(i,i.return,u)}}function f5(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new bg),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new bg),i;default:throw Error(s(435,a.tag))}}function Nm(a,i){var u=f5(a);i.forEach(function(m){var T=T5.bind(null,a,m);u.has(m)||(u.add(m),m.then(T,T))})}function Hi(a,i){var u=i.deletions;if(u!==null)for(var m=0;m<u.length;m++){var T=u[m],A=a,B=i,se=B;e:for(;se!==null;){switch(se.tag){case 27:if(oc(se.type)){Aa=se.stateNode,wi=!1;break e}break;case 5:Aa=se.stateNode,wi=!1;break e;case 3:case 4:Aa=se.stateNode.containerInfo,wi=!0;break e}se=se.return}if(Aa===null)throw Error(s(160));Ng(A,B,T),Aa=null,wi=!1,A=T.alternate,A!==null&&(A.return=null),T.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ag(i,a),i=i.sibling}var Po=null;function Ag(a,i){var u=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Hi(i,a),Yi(a),m&4&&(Ql(3,a,a.return),gd(3,a),Ql(5,a,a.return));break;case 1:Hi(i,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),m&64&&Il&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var T=Po;if(Hi(i,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),m&4){var A=u!==null?u.memoizedState:null;if(m=a.memoizedState,u===null)if(m===null)if(a.stateNode===null){e:{m=a.type,u=a.memoizedProps,T=T.ownerDocument||T;t:switch(m){case"title":A=T.getElementsByTagName("title")[0],(!A||A[Ca]||A[Ln]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=T.createElement(m),T.head.insertBefore(A,T.querySelector("head > title"))),Vr(A,m,u),A[Ln]=a,$n(A),m=A;break e;case"link":var B=_x("link","href",T).get(m+(u.href||""));if(B){for(var se=0;se<B.length;se++)if(A=B[se],A.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&A.getAttribute("rel")===(u.rel==null?null:u.rel)&&A.getAttribute("title")===(u.title==null?null:u.title)&&A.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){B.splice(se,1);break t}}A=T.createElement(m),Vr(A,m,u),T.head.appendChild(A);break;case"meta":if(B=_x("meta","content",T).get(m+(u.content||""))){for(se=0;se<B.length;se++)if(A=B[se],A.getAttribute("content")===(u.content==null?null:""+u.content)&&A.getAttribute("name")===(u.name==null?null:u.name)&&A.getAttribute("property")===(u.property==null?null:u.property)&&A.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&A.getAttribute("charset")===(u.charSet==null?null:u.charSet)){B.splice(se,1);break t}}A=T.createElement(m),Vr(A,m,u),T.head.appendChild(A);break;default:throw Error(s(468,m))}A[Ln]=a,$n(A),m=A}a.stateNode=m}else bx(T,a.type,a.stateNode);else a.stateNode=Ex(T,m,a.memoizedProps);else A!==m?(A===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):A.count--,m===null?bx(T,a.type,a.stateNode):Ex(T,m,a.memoizedProps)):m===null&&a.stateNode!==null&&_m(a,a.memoizedProps,u.memoizedProps)}break;case 27:Hi(i,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),u!==null&&m&4&&_m(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Hi(i,a),Yi(a),m&512&&(Xa||u===null||al(u,u.return)),a.flags&32){T=a.stateNode;try{za(T,"")}catch($e){ta(a,a.return,$e)}}m&4&&a.stateNode!=null&&(T=a.memoizedProps,_m(a,T,u!==null?u.memoizedProps:T)),m&1024&&(ym=!0);break;case 6:if(Hi(i,a),Yi(a),m&4){if(a.stateNode===null)throw Error(s(162));m=a.memoizedProps,u=a.stateNode;try{u.nodeValue=m}catch($e){ta(a,a.return,$e)}}break;case 3:if(Wf=null,T=Po,Po=zf(i.containerInfo),Hi(i,a),Po=T,Yi(a),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Pd(i.containerInfo)}catch($e){ta(a,a.return,$e)}ym&&(ym=!1,Sg(a));break;case 4:m=Po,Po=zf(a.stateNode.containerInfo),Hi(i,a),Yi(a),Po=m;break;case 12:Hi(i,a),Yi(a);break;case 13:Hi(i,a),Yi(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(wm=Fe()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Nm(a,m)));break;case 22:T=a.memoizedState!==null;var ve=u!==null&&u.memoizedState!==null,Ye=Il,ct=Xa;if(Il=Ye||T,Xa=ct||ve,Hi(i,a),Xa=ct,Il=Ye,Yi(a),m&8192)e:for(i=a.stateNode,i._visibility=T?i._visibility&-2:i._visibility|1,T&&(u===null||ve||Il||Xa||Uc(a)),u=null,i=a;;){if(i.tag===5||i.tag===26){if(u===null){ve=u=i;try{if(A=ve.stateNode,T)B=A.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{se=ve.stateNode;var Et=ve.memoizedProps.style,qe=Et!=null&&Et.hasOwnProperty("display")?Et.display:null;se.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch($e){ta(ve,ve.return,$e)}}}else if(i.tag===6){if(u===null){ve=i;try{ve.stateNode.nodeValue=T?"":ve.memoizedProps}catch($e){ta(ve,ve.return,$e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;u===i&&(u=null),i=i.return}u===i&&(u=null),i.sibling.return=i.return,i=i.sibling}m&4&&(m=a.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,Nm(a,u))));break;case 19:Hi(i,a),Yi(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Nm(a,m)));break;case 30:break;case 21:break;default:Hi(i,a),Yi(a)}}function Yi(a){var i=a.flags;if(i&2){try{for(var u,m=a.return;m!==null;){if(Eg(m)){u=m;break}m=m.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var T=u.stateNode,A=bm(a);Of(a,A,T);break;case 5:var B=u.stateNode;u.flags&32&&(za(B,""),u.flags&=-33);var se=bm(a);Of(a,se,B);break;case 3:case 4:var ve=u.stateNode.containerInfo,Ye=bm(a);Tm(a,Ye,ve);break;default:throw Error(s(161))}}catch(ct){ta(a,a.return,ct)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function Sg(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;Sg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function ec(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Tg(a,i.alternate,i),i=i.sibling}function Uc(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Ql(4,i,i.return),Uc(i);break;case 1:al(i,i.return);var u=i.stateNode;typeof u.componentWillUnmount=="function"&&gg(i,i.return,u),Uc(i);break;case 27:Sd(i.stateNode);case 26:case 5:al(i,i.return),Uc(i);break;case 22:i.memoizedState===null&&Uc(i);break;case 30:Uc(i);break;default:Uc(i)}a=a.sibling}}function tc(a,i,u){for(u=u&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,T=a,A=i,B=A.flags;switch(A.tag){case 0:case 11:case 15:tc(T,A,u),gd(4,A);break;case 1:if(tc(T,A,u),m=A,T=m.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Ye){ta(m,m.return,Ye)}if(m=A,T=m.updateQueue,T!==null){var se=m.stateNode;try{var ve=T.shared.hiddenCallbacks;if(ve!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ve.length;T++)As(ve[T],se)}catch(Ye){ta(m,m.return,Ye)}}u&&B&64&&pg(A),xd(A,A.return);break;case 27:_g(A);case 26:case 5:tc(T,A,u),u&&m===null&&B&4&&xg(A),xd(A,A.return);break;case 12:tc(T,A,u);break;case 13:tc(T,A,u),u&&B&4&&vg(T,A);break;case 22:A.memoizedState===null&&tc(T,A,u),xd(A,A.return);break;case 30:break;default:tc(T,A,u)}i=i.sibling}}function vm(a,i){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Sc(u))}function Am(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Sc(a))}function rl(a,i,u,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cg(a,i,u,m),i=i.sibling}function Cg(a,i,u,m){var T=i.flags;switch(i.tag){case 0:case 11:case 15:rl(a,i,u,m),T&2048&&gd(9,i);break;case 1:rl(a,i,u,m);break;case 3:rl(a,i,u,m),T&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Sc(a)));break;case 12:if(T&2048){rl(a,i,u,m),a=i.stateNode;try{var A=i.memoizedProps,B=A.id,se=A.onPostCommit;typeof se=="function"&&se(B,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ve){ta(i,i.return,ve)}}else rl(a,i,u,m);break;case 13:rl(a,i,u,m);break;case 23:break;case 22:A=i.stateNode,B=i.alternate,i.memoizedState!==null?A._visibility&2?rl(a,i,u,m):Ed(a,i):A._visibility&2?rl(a,i,u,m):(A._visibility|=2,fu(a,i,u,m,(i.subtreeFlags&10256)!==0)),T&2048&&vm(B,i);break;case 24:rl(a,i,u,m),T&2048&&Am(i.alternate,i);break;default:rl(a,i,u,m)}}function fu(a,i,u,m,T){for(T=T&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var A=a,B=i,se=u,ve=m,Ye=B.flags;switch(B.tag){case 0:case 11:case 15:fu(A,B,se,ve,T),gd(8,B);break;case 23:break;case 22:var ct=B.stateNode;B.memoizedState!==null?ct._visibility&2?fu(A,B,se,ve,T):Ed(A,B):(ct._visibility|=2,fu(A,B,se,ve,T)),T&&Ye&2048&&vm(B.alternate,B);break;case 24:fu(A,B,se,ve,T),T&&Ye&2048&&Am(B.alternate,B);break;default:fu(A,B,se,ve,T)}i=i.sibling}}function Ed(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var u=a,m=i,T=m.flags;switch(m.tag){case 22:Ed(u,m),T&2048&&vm(m.alternate,m);break;case 24:Ed(u,m),T&2048&&Am(m.alternate,m);break;default:Ed(u,m)}i=i.sibling}}var _d=8192;function hu(a){if(a.subtreeFlags&_d)for(a=a.child;a!==null;)Lg(a),a=a.sibling}function Lg(a){switch(a.tag){case 26:hu(a),a.flags&_d&&a.memoizedState!==null&&J5(Po,a.memoizedState,a.memoizedProps);break;case 5:hu(a);break;case 3:case 4:var i=Po;Po=zf(a.stateNode.containerInfo),hu(a),Po=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=_d,_d=16777216,hu(a),_d=i):hu(a));break;default:hu(a)}}function wg(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function bd(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var u=0;u<i.length;u++){var m=i[u];Sr=m,Dg(m,a)}wg(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ig(a),a=a.sibling}function Ig(a){switch(a.tag){case 0:case 11:case 15:bd(a),a.flags&2048&&Ql(9,a,a.return);break;case 3:bd(a);break;case 12:bd(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Pf(a)):bd(a);break;default:bd(a)}}function Pf(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var u=0;u<i.length;u++){var m=i[u];Sr=m,Dg(m,a)}wg(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Ql(8,i,i.return),Pf(i);break;case 22:u=i.stateNode,u._visibility&2&&(u._visibility&=-3,Pf(i));break;default:Pf(i)}a=a.sibling}}function Dg(a,i){for(;Sr!==null;){var u=Sr;switch(u.tag){case 0:case 11:case 15:Ql(8,u,i);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Sc(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Sr=m;else e:for(u=a;Sr!==null;){m=Sr;var T=m.sibling,A=m.return;if(yg(m),m===u){Sr=null;break e}if(T!==null){T.return=A,Sr=T;break e}Sr=A}}}var h5={getCacheForType:function(a){var i=$a(Wa),u=i.data.get(a);return u===void 0&&(u=a(),i.data.set(a,u)),u}},m5=typeof WeakMap=="function"?WeakMap:Map,qs=0,oa=null,us=null,Cs=0,zs=0,qi=null,nc=!1,mu=!1,Sm=!1,Rl=0,Ga=0,sc=0,Fc=0,Cm=0,po=0,pu=0,Td=null,Ii=null,Lm=!1,wm=0,Mf=1/0,kf=null,ac=null,Fr=0,rc=null,gu=null,xu=0,Im=0,Dm=null,Rg=null,yd=0,Rm=null;function zi(){if((qs&2)!==0&&Cs!==0)return Cs&-Cs;if(G.T!==null){var a=yl;return a!==0?a:Um()}return ca()}function Og(){po===0&&(po=(Cs&536870912)===0||rn?Ws():536870912);var a=mo.current;return a!==null&&(a.flags|=32),po}function $i(a,i,u){(a===oa&&(zs===2||zs===9)||a.cancelPendingCommit!==null)&&(Eu(a,0),ic(a,Cs,po,!1)),ln(a,u),((qs&2)===0||a!==oa)&&(a===oa&&((qs&2)===0&&(Fc|=u),Ga===4&&ic(a,Cs,po,!1)),il(a))}function Pg(a,i,u){if((qs&6)!==0)throw Error(s(327));var m=!u&&(i&124)===0&&(i&a.expiredLanes)===0||rs(a,i),T=m?x5(a,i):Mm(a,i,!0),A=m;do{if(T===0){mu&&!m&&ic(a,i,0,!1);break}else{if(u=a.current.alternate,A&&!p5(u)){T=Mm(a,i,!1),A=!1;continue}if(T===2){if(A=i,a.errorRecoveryDisabledLanes&A)var B=0;else B=a.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){i=B;e:{var se=a;T=Td;var ve=se.current.memoizedState.isDehydrated;if(ve&&(Eu(se,B).flags|=256),B=Mm(se,B,!1),B!==2){if(Sm&&!ve){se.errorRecoveryDisabledLanes|=A,Fc|=A,T=4;break e}A=Ii,Ii=T,A!==null&&(Ii===null?Ii=A:Ii.push.apply(Ii,A))}T=B}if(A=!1,T!==2)continue}}if(T===1){Eu(a,0),ic(a,i,0,!0);break}e:{switch(m=a,A=T,A){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ic(m,i,po,!nc);break e;case 2:Ii=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(T=wm+300-Fe(),10<T)){if(ic(m,i,po,!nc),xn(m,0,!0)!==0)break e;m.timeoutHandle=cx(Mg.bind(null,m,u,Ii,kf,Lm,i,po,Fc,pu,nc,A,2,-0,0),T);break e}Mg(m,u,Ii,kf,Lm,i,po,Fc,pu,nc,A,0,-0,0)}}break}while(!0);il(a)}function Mg(a,i,u,m,T,A,B,se,ve,Ye,ct,Et,qe,$e){if(a.timeoutHandle=-1,Et=i.subtreeFlags,(Et&8192||(Et&16785408)===16785408)&&(wd={stylesheets:null,count:0,unsuspend:X5},Lg(i),Et=Z5(),Et!==null)){a.cancelPendingCommit=Et(Gg.bind(null,a,i,A,u,m,T,B,se,ve,ct,1,qe,$e)),ic(a,A,B,!Ye);return}Gg(a,i,A,u,m,T,B,se,ve)}function p5(a){for(var i=a;;){var u=i.tag;if((u===0||u===11||u===15)&&i.flags&16384&&(u=i.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var T=u[m],A=T.getSnapshot;T=T.value;try{if(!Ba(A(),T))return!1}catch{return!1}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ic(a,i,u,m){i&=~Cm,i&=~Fc,a.suspendedLanes|=i,a.pingedLanes&=~i,m&&(a.warmLanes|=i),m=a.expirationTimes;for(var T=i;0<T;){var A=31-We(T),B=1<<A;m[A]=-1,T&=~B}u!==0&&un(a,u,i)}function jf(){return(qs&6)===0?(Nd(0),!1):!0}function Om(){if(us!==null){if(zs===0)var a=us.return;else a=us,Lo=ir=null,au(a),uu=null,hd=0,a=us;for(;a!==null;)mg(a.alternate,a),a=a.return;us=null}}function Eu(a,i){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,O5(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Om(),oa=a,us=u=Ai(a.current,null),Cs=i,zs=0,qi=null,nc=!1,mu=rs(a,i),Sm=!1,pu=po=Cm=Fc=sc=Ga=0,Ii=Td=null,Lm=!1,(i&8)!==0&&(i|=i&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=i;0<m;){var T=31-We(m),A=1<<T;i|=a[T],m&=~A}return Rl=i,Jr(),u}function kg(a,i){gn=null,G.H=vf,i===W||i===ee?(i=Oe(),zs=3):i===X?(i=Oe(),zs=4):zs=i===eg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,qi=i,us===null&&(Ga=1,wf(a,Jn(i,a.current)))}function jg(){var a=G.H;return G.H=vf,a===null?vf:a}function Bg(){var a=G.A;return G.A=h5,a}function Pm(){Ga=4,nc||(Cs&4194048)!==Cs&&mo.current!==null||(mu=!0),(sc&134217727)===0&&(Fc&134217727)===0||oa===null||ic(oa,Cs,po,!1)}function Mm(a,i,u){var m=qs;qs|=2;var T=jg(),A=Bg();(oa!==a||Cs!==i)&&(kf=null,Eu(a,i)),i=!1;var B=Ga;e:do try{if(zs!==0&&us!==null){var se=us,ve=qi;switch(zs){case 8:Om(),B=6;break e;case 3:case 2:case 9:case 6:mo.current===null&&(i=!0);var Ye=zs;if(zs=0,qi=null,_u(a,se,ve,Ye),u&&mu){B=0;break e}break;default:Ye=zs,zs=0,qi=null,_u(a,se,ve,Ye)}}g5(),B=Ga;break}catch(ct){kg(a,ct)}while(!0);return i&&a.shellSuspendCounter++,Lo=ir=null,qs=m,G.H=T,G.A=A,us===null&&(oa=null,Cs=0,Jr()),B}function g5(){for(;us!==null;)Ug(us)}function x5(a,i){var u=qs;qs|=2;var m=jg(),T=Bg();oa!==a||Cs!==i?(kf=null,Mf=Fe()+500,Eu(a,i)):mu=rs(a,i);e:do try{if(zs!==0&&us!==null){i=us;var A=qi;t:switch(zs){case 1:zs=0,qi=null,_u(a,i,A,1);break;case 2:case 9:if(me(A)){zs=0,qi=null,Fg(i);break}i=function(){zs!==2&&zs!==9||oa!==a||(zs=7),il(a)},A.then(i,i);break e;case 3:zs=7;break e;case 4:zs=5;break e;case 7:me(A)?(zs=0,qi=null,Fg(i)):(zs=0,qi=null,_u(a,i,A,7));break;case 5:var B=null;switch(us.tag){case 26:B=us.memoizedState;case 5:case 27:var se=us;if(!B||Tx(B)){zs=0,qi=null;var ve=se.sibling;if(ve!==null)us=ve;else{var Ye=se.return;Ye!==null?(us=Ye,Bf(Ye)):us=null}break t}}zs=0,qi=null,_u(a,i,A,5);break;case 6:zs=0,qi=null,_u(a,i,A,6);break;case 8:Om(),Ga=6;break e;default:throw Error(s(462))}}E5();break}catch(ct){kg(a,ct)}while(!0);return Lo=ir=null,G.H=m,G.A=T,qs=u,us!==null?0:(oa=null,Cs=0,Jr(),Ga)}function E5(){for(;us!==null&&!je();)Ug(us)}function Ug(a){var i=fg(a.alternate,a,Rl);a.memoizedProps=a.pendingProps,i===null?Bf(a):us=i}function Fg(a){var i=a,u=i.alternate;switch(i.tag){case 15:case 0:i=ig(u,i,i.pendingProps,i.type,void 0,Cs);break;case 11:i=ig(u,i,i.pendingProps,i.type.render,i.ref,Cs);break;case 5:au(i);default:mg(u,i),i=us=lo(i,Rl),i=fg(u,i,Rl)}a.memoizedProps=a.pendingProps,i===null?Bf(a):us=i}function _u(a,i,u,m){Lo=ir=null,au(i),uu=null,hd=0;var T=i.return;try{if(o5(a,T,i,u,Cs)){Ga=1,wf(a,Jn(u,a.current)),us=null;return}}catch(A){if(T!==null)throw us=T,A;Ga=1,wf(a,Jn(u,a.current)),us=null;return}i.flags&32768?(rn||m===1?a=!0:mu||(Cs&536870912)!==0?a=!1:(nc=a=!0,(m===2||m===9||m===3||m===6)&&(m=mo.current,m!==null&&m.tag===13&&(m.flags|=16384))),Vg(i,a)):Bf(i)}function Bf(a){var i=a;do{if((i.flags&32768)!==0){Vg(i,nc);return}a=i.return;var u=c5(i.alternate,i,Rl);if(u!==null){us=u;return}if(i=i.sibling,i!==null){us=i;return}us=i=a}while(i!==null);Ga===0&&(Ga=5)}function Vg(a,i){do{var u=u5(a.alternate,a);if(u!==null){u.flags&=32767,us=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!i&&(a=a.sibling,a!==null)){us=a;return}us=a=u}while(a!==null);Ga=6,us=null}function Gg(a,i,u,m,T,A,B,se,ve){a.cancelPendingCommit=null;do Uf();while(Fr!==0);if((qs&6)!==0)throw Error(s(327));if(i!==null){if(i===a.current)throw Error(s(177));if(A=i.lanes|i.childLanes,A|=pa,ls(a,u,A,B,se,ve),a===oa&&(us=oa=null,Cs=0),gu=i,rc=a,xu=u,Im=A,Dm=T,Rg=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,y5(it,function(){return $g(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,T=he.p,he.p=2,B=qs,qs|=4;try{d5(a,i,u)}finally{qs=B,he.p=T,G.T=m}}Fr=1,Hg(),Yg(),qg()}}function Hg(){if(Fr===1){Fr=0;var a=rc,i=gu,u=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var m=he.p;he.p=2;var T=qs;qs|=4;try{Ag(i,a);var A=$m,B=pr(a.containerInfo),se=A.focusedElem,ve=A.selectionRange;if(B!==se&&se&&se.ownerDocument&&to(se.ownerDocument.documentElement,se)){if(ve!==null&&Na(se)){var Ye=ve.start,ct=ve.end;if(ct===void 0&&(ct=Ye),"selectionStart"in se)se.selectionStart=Ye,se.selectionEnd=Math.min(ct,se.value.length);else{var Et=se.ownerDocument||document,qe=Et&&Et.defaultView||window;if(qe.getSelection){var $e=qe.getSelection(),On=se.textContent.length,Tn=Math.min(ve.start,On),Zs=ve.end===void 0?Tn:Math.min(ve.end,On);!$e.extend&&Tn>Zs&&(B=Zs,Zs=Tn,Tn=B);var ke=Ni(se,Tn),Ie=Ni(se,Zs);if(ke&&Ie&&($e.rangeCount!==1||$e.anchorNode!==ke.node||$e.anchorOffset!==ke.offset||$e.focusNode!==Ie.node||$e.focusOffset!==Ie.offset)){var Ge=Et.createRange();Ge.setStart(ke.node,ke.offset),$e.removeAllRanges(),Tn>Zs?($e.addRange(Ge),$e.extend(Ie.node,Ie.offset)):(Ge.setEnd(Ie.node,Ie.offset),$e.addRange(Ge))}}}}for(Et=[],$e=se;$e=$e.parentNode;)$e.nodeType===1&&Et.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<Et.length;se++){var ht=Et[se];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Jf=!!zm,$m=zm=null}finally{qs=T,he.p=m,G.T=u}}a.current=i,Fr=2}}function Yg(){if(Fr===2){Fr=0;var a=rc,i=gu,u=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var m=he.p;he.p=2;var T=qs;qs|=4;try{Tg(a,i.alternate,i)}finally{qs=T,he.p=m,G.T=u}}Fr=3}}function qg(){if(Fr===4||Fr===3){Fr=0,ge();var a=rc,i=gu,u=xu,m=Rg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Fr=5:(Fr=0,gu=rc=null,zg(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(ac=null),gs(u),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Ft,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=G.T,T=he.p,he.p=2,G.T=null;try{for(var A=a.onRecoverableError,B=0;B<m.length;B++){var se=m[B];A(se.value,{componentStack:se.stack})}}finally{G.T=i,he.p=T}}(xu&3)!==0&&Uf(),il(a),T=a.pendingLanes,(u&4194090)!==0&&(T&42)!==0?a===Rm?yd++:(yd=0,Rm=a):yd=0,Nd(0)}}function zg(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,Sc(i)))}function Uf(a){return Hg(),Yg(),qg(),$g()}function $g(){if(Fr!==5)return!1;var a=rc,i=Im;Im=0;var u=gs(xu),m=G.T,T=he.p;try{he.p=32>u?32:u,G.T=null,u=Dm,Dm=null;var A=rc,B=xu;if(Fr=0,gu=rc=null,xu=0,(qs&6)!==0)throw Error(s(331));var se=qs;if(qs|=4,Ig(A.current),Cg(A,A.current,B,u),qs=se,Nd(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Ft,A)}catch{}return!0}finally{he.p=T,G.T=m,zg(a,i)}}function Wg(a,i,u){i=Jn(u,i),i=um(a.stateNode,i,2),a=gt(a,i,2),a!==null&&(ln(a,2),il(a))}function ta(a,i,u){if(a.tag===3)Wg(a,a,u);else for(;i!==null;){if(i.tag===3){Wg(i,a,u);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ac===null||!ac.has(m))){a=Jn(u,a),u=Zp(2),m=gt(i,u,2),m!==null&&(Qp(u,m,i,a),ln(m,2),il(m));break}}i=i.return}}function km(a,i,u){var m=a.pingCache;if(m===null){m=a.pingCache=new m5;var T=new Set;m.set(i,T)}else T=m.get(i),T===void 0&&(T=new Set,m.set(i,T));T.has(u)||(Sm=!0,T.add(u),a=_5.bind(null,a,i,u),i.then(a,a))}function _5(a,i,u){var m=a.pingCache;m!==null&&m.delete(i),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,oa===a&&(Cs&u)===u&&(Ga===4||Ga===3&&(Cs&62914560)===Cs&&300>Fe()-wm?(qs&2)===0&&Eu(a,0):Cm|=u,pu===Cs&&(pu=0)),il(a)}function Kg(a,i){i===0&&(i=Un()),a=Ui(a,i),a!==null&&(ln(a,i),il(a))}function b5(a){var i=a.memoizedState,u=0;i!==null&&(u=i.retryLane),Kg(a,u)}function T5(a,i){var u=0;switch(a.tag){case 13:var m=a.stateNode,T=a.memoizedState;T!==null&&(u=T.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(i),Kg(a,u)}function y5(a,i){return Je(a,i)}var Ff=null,bu=null,jm=!1,Vf=!1,Bm=!1,Vc=0;function il(a){a!==bu&&a.next===null&&(bu===null?Ff=bu=a:bu=bu.next=a),Vf=!0,jm||(jm=!0,v5())}function Nd(a,i){if(!Bm&&Vf){Bm=!0;do for(var u=!1,m=Ff;m!==null;){if(a!==0){var T=m.pendingLanes;if(T===0)var A=0;else{var B=m.suspendedLanes,se=m.pingedLanes;A=(1<<31-We(42|a)+1)-1,A&=T&~(B&~se),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(u=!0,Qg(m,A))}else A=Cs,A=xn(m,m===oa?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||rs(m,A)||(u=!0,Qg(m,A));m=m.next}while(u);Bm=!1}}function N5(){Xg()}function Xg(){Vf=jm=!1;var a=0;Vc!==0&&(R5()&&(a=Vc),Vc=0);for(var i=Fe(),u=null,m=Ff;m!==null;){var T=m.next,A=Jg(m,i);A===0?(m.next=null,u===null?Ff=T:u.next=T,T===null&&(bu=u)):(u=m,(a!==0||(A&3)!==0)&&(Vf=!0)),m=T}Nd(a)}function Jg(a,i){for(var u=a.suspendedLanes,m=a.pingedLanes,T=a.expirationTimes,A=a.pendingLanes&-62914561;0<A;){var B=31-We(A),se=1<<B,ve=T[B];ve===-1?((se&u)===0||(se&m)!==0)&&(T[B]=Cn(se,i)):ve<=i&&(a.expiredLanes|=se),A&=~se}if(i=oa,u=Cs,u=xn(a,a===i?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,u===0||a===i&&(zs===2||zs===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Qe(m),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||rs(a,u)){if(i=u&-u,i===a.callbackPriority)return i;switch(m!==null&&Qe(m),gs(u)){case 2:case 8:u=nt;break;case 32:u=it;break;case 268435456:u=yt;break;default:u=it}return m=Zg.bind(null,a),u=Je(u,m),a.callbackPriority=i,a.callbackNode=u,i}return m!==null&&m!==null&&Qe(m),a.callbackPriority=2,a.callbackNode=null,2}function Zg(a,i){if(Fr!==0&&Fr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Uf()&&a.callbackNode!==u)return null;var m=Cs;return m=xn(a,a===oa?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(Pg(a,m,i),Jg(a,Fe()),a.callbackNode!=null&&a.callbackNode===u?Zg.bind(null,a):null)}function Qg(a,i){if(Uf())return null;Pg(a,i,!0)}function v5(){P5(function(){(qs&6)!==0?Je(Pe,N5):Xg()})}function Um(){return Vc===0&&(Vc=Ws()),Vc}function ex(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ze(""+a)}function tx(a,i){var u=i.ownerDocument.createElement("input");return u.name=i.name,u.value=i.value,a.id&&u.setAttribute("form",a.id),i.parentNode.insertBefore(u,i),a=new FormData(a),u.parentNode.removeChild(u),a}function A5(a,i,u,m,T){if(i==="submit"&&u&&u.stateNode===T){var A=ex((T[kn]||null).action),B=m.submitter;B&&(i=(i=B[kn]||null)?ex(i.formAction):B.getAttribute("formAction"),i!==null&&(A=i,B=null));var se=new _r("action","action",null,m,T);a.push({event:se,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Vc!==0){var ve=B?tx(T,B):new FormData(T);ho(u,{pending:!0,data:ve,method:T.method,action:A},null,ve)}}else typeof A=="function"&&(se.preventDefault(),ve=B?tx(T,B):new FormData(T),ho(u,{pending:!0,data:ve,method:T.method,action:A},A,ve))},currentTarget:T}]})}}for(var Fm=0;Fm<No.length;Fm++){var Vm=No[Fm],S5=Vm.toLowerCase(),C5=Vm[0].toUpperCase()+Vm.slice(1);ra(S5,"on"+C5)}ra(Wo,"onAnimationEnd"),ra(no,"onAnimationIteration"),ra(so,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(ao,"onTransitionRun"),ra(yo,"onTransitionStart"),ra(Ko,"onTransitionCancel"),ra(ro,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vd));function nx(a,i){i=(i&4)!==0;for(var u=0;u<a.length;u++){var m=a[u],T=m.event;m=m.listeners;e:{var A=void 0;if(i)for(var B=m.length-1;0<=B;B--){var se=m[B],ve=se.instance,Ye=se.currentTarget;if(se=se.listener,ve!==A&&T.isPropagationStopped())break e;A=se,T.currentTarget=Ye;try{A(T)}catch(ct){Lf(ct)}T.currentTarget=null,A=ve}else for(B=0;B<m.length;B++){if(se=m[B],ve=se.instance,Ye=se.currentTarget,se=se.listener,ve!==A&&T.isPropagationStopped())break e;A=se,T.currentTarget=Ye;try{A(T)}catch(ct){Lf(ct)}T.currentTarget=null,A=ve}}}}function ds(a,i){var u=i[Rn];u===void 0&&(u=i[Rn]=new Set);var m=a+"__bubble";u.has(m)||(sx(i,a,2,!1),u.add(m))}function Gm(a,i,u){var m=0;i&&(m|=4),sx(u,a,m,i)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function Hm(a){if(!a[Gf]){a[Gf]=!0,La.forEach(function(u){u!=="selectionchange"&&(L5.has(u)||Gm(u,!1,a),Gm(u,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[Gf]||(i[Gf]=!0,Gm("selectionchange",!1,i))}}function sx(a,i,u,m){switch(Cx(i)){case 2:var T=tb;break;case 8:T=nb;break;default:T=s0}u=T.bind(null,i,u,a),T=void 0,!Yn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(T=!0),m?T!==void 0?a.addEventListener(i,u,{capture:!0,passive:T}):a.addEventListener(i,u,!0):T!==void 0?a.addEventListener(i,u,{passive:T}):a.addEventListener(i,u,!1)}function Ym(a,i,u,m,T){var A=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var B=m.tag;if(B===3||B===4){var se=m.stateNode.containerInfo;if(se===T)break;if(B===4)for(B=m.return;B!==null;){var ve=B.tag;if((ve===3||ve===4)&&B.stateNode.containerInfo===T)return;B=B.return}for(;se!==null;){if(B=bs(se),B===null)return;if(ve=B.tag,ve===5||ve===6||ve===26||ve===27){m=A=B;continue e}se=se.parentNode}}m=m.return}_n(function(){var Ye=A,ct=bt(u),Et=[];e:{var qe=Bi.get(a);if(qe!==void 0){var $e=_r,On=a;switch(a){case"keypress":if(di(u)===0)break e;case"keydown":case"keyup":$e=vs;break;case"focusin":On="focus",$e=Bt;break;case"focusout":On="blur",$e=Bt;break;case"beforeblur":case"afterblur":$e=Bt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=Xe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=_t;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=_o;break;case Wo:case no:case so:$e=Ct;break;case ro:$e=q;break;case"scroll":case"scrollend":$e=Pi;break;case"wheel":$e=Ae;break;case"copy":case"cut":case"paste":$e=Bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Yo;break;case"toggle":case"beforetoggle":$e=et}var Tn=(i&4)!==0,Zs=!Tn&&(a==="scroll"||a==="scrollend"),ke=Tn?qe!==null?qe+"Capture":null:qe;Tn=[];for(var Ie=Ye,Ge;Ie!==null;){var ht=Ie;if(Ge=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Ge===null||ke===null||(ht=on(Ie,ke),ht!=null&&Tn.push(Ad(Ie,ht,Ge))),Zs)break;Ie=Ie.return}0<Tn.length&&(qe=new $e(qe,On,null,u,ct),Et.push({event:qe,listeners:Tn}))}}if((i&7)===0){e:{if(qe=a==="mouseover"||a==="pointerover",$e=a==="mouseout"||a==="pointerout",qe&&u!==dt&&(On=u.relatedTarget||u.fromElement)&&(bs(On)||On[Fn]))break e;if(($e||qe)&&(qe=ct.window===ct?ct:(qe=ct.ownerDocument)?qe.defaultView||qe.parentWindow:window,$e?(On=u.relatedTarget||u.toElement,$e=Ye,On=On?bs(On):null,On!==null&&(Zs=l(On),Tn=On.tag,On!==Zs||Tn!==5&&Tn!==27&&Tn!==6)&&(On=null)):($e=null,On=Ye),$e!==On)){if(Tn=Xe,ht="onMouseLeave",ke="onMouseEnter",Ie="mouse",(a==="pointerout"||a==="pointerover")&&(Tn=Yo,ht="onPointerLeave",ke="onPointerEnter",Ie="pointer"),Zs=$e==null?qe:Ls($e),Ge=On==null?qe:Ls(On),qe=new Tn(ht,Ie+"leave",$e,u,ct),qe.target=Zs,qe.relatedTarget=Ge,ht=null,bs(ct)===Ye&&(Tn=new Tn(ke,Ie+"enter",On,u,ct),Tn.target=Ge,Tn.relatedTarget=Zs,ht=Tn),Zs=ht,$e&&On)t:{for(Tn=$e,ke=On,Ie=0,Ge=Tn;Ge;Ge=Tu(Ge))Ie++;for(Ge=0,ht=ke;ht;ht=Tu(ht))Ge++;for(;0<Ie-Ge;)Tn=Tu(Tn),Ie--;for(;0<Ge-Ie;)ke=Tu(ke),Ge--;for(;Ie--;){if(Tn===ke||ke!==null&&Tn===ke.alternate)break t;Tn=Tu(Tn),ke=Tu(ke)}Tn=null}else Tn=null;$e!==null&&ax(Et,qe,$e,Tn,!1),On!==null&&Zs!==null&&ax(Et,Zs,On,Tn,!0)}}e:{if(qe=Ye?Ls(Ye):window,$e=qe.nodeName&&qe.nodeName.toLowerCase(),$e==="select"||$e==="input"&&qe.type==="file")var en=zo;else if(Or(qe))if(Qi)en=Vl;else{en=Ac;var os=mr}else $e=qe.nodeName,!$e||$e.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Ye&&yi(Ye.elementType)&&(en=zo):en=gl;if(en&&(en=en(a,Ye))){qo(Et,en,u,ct);break e}os&&os(a,qe,Ye),a==="focusout"&&Ye&&qe.type==="number"&&Ye.memoizedProps.value!=null&&bi(qe,"number",qe.value)}switch(os=Ye?Ls(Ye):window,a){case"focusin":(Or(os)||os.contentEditable==="true")&&(Ua=os,yr=Ye,Xr=null);break;case"focusout":Xr=yr=Ua=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,Us(Et,u,ct);break;case"selectionchange":if(Kr)break;case"keydown":case"keyup":Us(Et,u,ct)}var hn;if(Vt)e:{switch(a){case"compositionstart":var An="onCompositionStart";break e;case"compositionend":An="onCompositionEnd";break e;case"compositionupdate":An="onCompositionUpdate";break e}An=void 0}else Hs?Xs(a,u)&&(An="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(An="onCompositionStart");An&&(wn&&u.locale!=="ko"&&(Hs||An!=="onCompositionStart"?An==="onCompositionEnd"&&Hs&&(hn=fr()):(vn=ct,Dr="value"in vn?vn.value:vn.textContent,Hs=!0)),os=Hf(Ye,An),0<os.length&&(An=new Xn(An,a,null,u,ct),Et.push({event:An,listeners:os}),hn?An.data=hn:(hn=ma(u),hn!==null&&(An.data=hn)))),(hn=pn?ja(a,u):Rr(a,u))&&(An=Hf(Ye,"onBeforeInput"),0<An.length&&(os=new Xn("onBeforeInput","beforeinput",null,u,ct),Et.push({event:os,listeners:An}),os.data=hn)),A5(Et,a,Ye,u,ct)}nx(Et,i)})}function Ad(a,i,u){return{instance:a,listener:i,currentTarget:u}}function Hf(a,i){for(var u=i+"Capture",m=[];a!==null;){var T=a,A=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||A===null||(T=on(a,u),T!=null&&m.unshift(Ad(a,T,A)),T=on(a,i),T!=null&&m.push(Ad(a,T,A))),a.tag===3)return m;a=a.return}return[]}function Tu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function ax(a,i,u,m,T){for(var A=i._reactName,B=[];u!==null&&u!==m;){var se=u,ve=se.alternate,Ye=se.stateNode;if(se=se.tag,ve!==null&&ve===m)break;se!==5&&se!==26&&se!==27||Ye===null||(ve=Ye,T?(Ye=on(u,A),Ye!=null&&B.unshift(Ad(u,Ye,ve))):T||(Ye=on(u,A),Ye!=null&&B.push(Ad(u,Ye,ve)))),u=u.return}B.length!==0&&a.push({event:i,listeners:B})}var w5=/\r\n?/g,I5=/\u0000|\uFFFD/g;function rx(a){return(typeof a=="string"?a:""+a).replace(w5,`
`).replace(I5,"")}function ix(a,i){return i=rx(i),rx(a)===i}function Yf(){}function Js(a,i,u,m,T,A){switch(u){case"children":typeof m=="string"?i==="body"||i==="textarea"&&m===""||za(a,m):(typeof m=="number"||typeof m=="bigint")&&i!=="body"&&za(a,""+m);break;case"className":da(a,"class",m);break;case"tabIndex":da(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":da(a,u,m);break;case"style":Da(a,m,A);break;case"data":if(i!=="object"){da(a,"data",m);break}case"src":case"href":if(m===""&&(i!=="a"||u!=="href")){a.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(u);break}m=ze(""+m),a.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(u==="formAction"?(i!=="input"&&Js(a,i,"name",T.name,T,null),Js(a,i,"formEncType",T.formEncType,T,null),Js(a,i,"formMethod",T.formMethod,T,null),Js(a,i,"formTarget",T.formTarget,T,null)):(Js(a,i,"encType",T.encType,T,null),Js(a,i,"method",T.method,T,null),Js(a,i,"target",T.target,T,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(u);break}m=ze(""+m),a.setAttribute(u,m);break;case"onClick":m!=null&&(a.onclick=Yf);break;case"onScroll":m!=null&&ds("scroll",a);break;case"onScrollEnd":m!=null&&ds("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(T.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}u=ze(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,""+m):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":m===!0?a.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,m):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(u,m):a.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(u):a.setAttribute(u,m);break;case"popover":ds("beforetoggle",a),ds("toggle",a),ys(a,"popover",m);break;case"xlinkActuate":ws(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ws(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ws(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ws(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ws(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ws(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ws(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ws(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ws(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ys(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=be.get(u)||u,ys(a,u,m))}}function qm(a,i,u,m,T,A){switch(u){case"style":Da(a,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(T.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"children":typeof m=="string"?za(a,m):(typeof m=="number"||typeof m=="bigint")&&za(a,""+m);break;case"onScroll":m!=null&&ds("scroll",a);break;case"onScrollEnd":m!=null&&ds("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Yf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(T=u.endsWith("Capture"),i=u.slice(2,T?u.length-7:void 0),A=a[kn]||null,A=A!=null?A[u]:null,typeof A=="function"&&a.removeEventListener(i,A,T),typeof m=="function")){typeof A!="function"&&A!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(i,m,T);break e}u in a?a[u]=m:m===!0?a.setAttribute(u,""):ys(a,u,m)}}}function Vr(a,i,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ds("error",a),ds("load",a);var m=!1,T=!1,A;for(A in u)if(u.hasOwnProperty(A)){var B=u[A];if(B!=null)switch(A){case"src":m=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Js(a,i,A,B,u,null)}}T&&Js(a,i,"srcSet",u.srcSet,u,null),m&&Js(a,i,"src",u.src,u,null);return;case"input":ds("invalid",a);var se=A=B=T=null,ve=null,Ye=null;for(m in u)if(u.hasOwnProperty(m)){var ct=u[m];if(ct!=null)switch(m){case"name":T=ct;break;case"type":B=ct;break;case"checked":ve=ct;break;case"defaultChecked":Ye=ct;break;case"value":A=ct;break;case"defaultValue":se=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,i));break;default:Js(a,i,m,ct,u,null)}}_i(a,A,se,ve,Ye,B,T,!1),dr(a);return;case"select":ds("invalid",a),m=B=A=null;for(T in u)if(u.hasOwnProperty(T)&&(se=u[T],se!=null))switch(T){case"value":A=se;break;case"defaultValue":B=se;break;case"multiple":m=se;default:Js(a,i,T,se,u,null)}i=A,u=B,a.multiple=!!m,i!=null?Er(a,!!m,i,!1):u!=null&&Er(a,!!m,u,!0);return;case"textarea":ds("invalid",a),A=T=m=null;for(B in u)if(u.hasOwnProperty(B)&&(se=u[B],se!=null))switch(B){case"value":m=se;break;case"defaultValue":T=se;break;case"children":A=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(91));break;default:Js(a,i,B,se,u,null)}Ti(a,m,T,A),dr(a);return;case"option":for(ve in u)if(u.hasOwnProperty(ve)&&(m=u[ve],m!=null))switch(ve){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Js(a,i,ve,m,u,null)}return;case"dialog":ds("beforetoggle",a),ds("toggle",a),ds("cancel",a),ds("close",a);break;case"iframe":case"object":ds("load",a);break;case"video":case"audio":for(m=0;m<vd.length;m++)ds(vd[m],a);break;case"image":ds("error",a),ds("load",a);break;case"details":ds("toggle",a);break;case"embed":case"source":case"link":ds("error",a),ds("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in u)if(u.hasOwnProperty(Ye)&&(m=u[Ye],m!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Js(a,i,Ye,m,u,null)}return;default:if(yi(i)){for(ct in u)u.hasOwnProperty(ct)&&(m=u[ct],m!==void 0&&qm(a,i,ct,m,u,void 0));return}}for(se in u)u.hasOwnProperty(se)&&(m=u[se],m!=null&&Js(a,i,se,m,u,null))}function D5(a,i,u,m){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,A=null,B=null,se=null,ve=null,Ye=null,ct=null;for($e in u){var Et=u[$e];if(u.hasOwnProperty($e)&&Et!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":ve=Et;default:m.hasOwnProperty($e)||Js(a,i,$e,null,m,Et)}}for(var qe in m){var $e=m[qe];if(Et=u[qe],m.hasOwnProperty(qe)&&($e!=null||Et!=null))switch(qe){case"type":A=$e;break;case"name":T=$e;break;case"checked":Ye=$e;break;case"defaultChecked":ct=$e;break;case"value":B=$e;break;case"defaultValue":se=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(s(137,i));break;default:$e!==Et&&Js(a,i,qe,$e,m,Et)}}qr(a,B,se,ve,Ye,ct,A,T);return;case"select":$e=B=se=qe=null;for(A in u)if(ve=u[A],u.hasOwnProperty(A)&&ve!=null)switch(A){case"value":break;case"multiple":$e=ve;default:m.hasOwnProperty(A)||Js(a,i,A,null,m,ve)}for(T in m)if(A=m[T],ve=u[T],m.hasOwnProperty(T)&&(A!=null||ve!=null))switch(T){case"value":qe=A;break;case"defaultValue":se=A;break;case"multiple":B=A;default:A!==ve&&Js(a,i,T,A,m,ve)}i=se,u=B,m=$e,qe!=null?Er(a,!!u,qe,!1):!!m!=!!u&&(i!=null?Er(a,!!u,i,!0):Er(a,!!u,u?[]:"",!1));return;case"textarea":$e=qe=null;for(se in u)if(T=u[se],u.hasOwnProperty(se)&&T!=null&&!m.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Js(a,i,se,null,m,T)}for(B in m)if(T=m[B],A=u[B],m.hasOwnProperty(B)&&(T!=null||A!=null))switch(B){case"value":qe=T;break;case"defaultValue":$e=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:T!==A&&Js(a,i,B,T,m,A)}ci(a,qe,$e);return;case"option":for(var On in u)if(qe=u[On],u.hasOwnProperty(On)&&qe!=null&&!m.hasOwnProperty(On))switch(On){case"selected":a.selected=!1;break;default:Js(a,i,On,null,m,qe)}for(ve in m)if(qe=m[ve],$e=u[ve],m.hasOwnProperty(ve)&&qe!==$e&&(qe!=null||$e!=null))switch(ve){case"selected":a.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Js(a,i,ve,qe,m,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tn in u)qe=u[Tn],u.hasOwnProperty(Tn)&&qe!=null&&!m.hasOwnProperty(Tn)&&Js(a,i,Tn,null,m,qe);for(Ye in m)if(qe=m[Ye],$e=u[Ye],m.hasOwnProperty(Ye)&&qe!==$e&&(qe!=null||$e!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(s(137,i));break;default:Js(a,i,Ye,qe,m,$e)}return;default:if(yi(i)){for(var Zs in u)qe=u[Zs],u.hasOwnProperty(Zs)&&qe!==void 0&&!m.hasOwnProperty(Zs)&&qm(a,i,Zs,void 0,m,qe);for(ct in m)qe=m[ct],$e=u[ct],!m.hasOwnProperty(ct)||qe===$e||qe===void 0&&$e===void 0||qm(a,i,ct,qe,m,$e);return}}for(var ke in u)qe=u[ke],u.hasOwnProperty(ke)&&qe!=null&&!m.hasOwnProperty(ke)&&Js(a,i,ke,null,m,qe);for(Et in m)qe=m[Et],$e=u[Et],!m.hasOwnProperty(Et)||qe===$e||qe==null&&$e==null||Js(a,i,Et,qe,m,$e)}var zm=null,$m=null;function qf(a){return a.nodeType===9?a:a.ownerDocument}function ox(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lx(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function Wm(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Km=null;function R5(){var a=window.event;return a&&a.type==="popstate"?a===Km?!1:(Km=a,!0):(Km=null,!1)}var cx=typeof setTimeout=="function"?setTimeout:void 0,O5=typeof clearTimeout=="function"?clearTimeout:void 0,ux=typeof Promise=="function"?Promise:void 0,P5=typeof queueMicrotask=="function"?queueMicrotask:typeof ux<"u"?function(a){return ux.resolve(null).then(a).catch(M5)}:cx;function M5(a){setTimeout(function(){throw a})}function oc(a){return a==="head"}function dx(a,i){var u=i,m=0,T=0;do{var A=u.nextSibling;if(a.removeChild(u),A&&A.nodeType===8)if(u=A.data,u==="/$"){if(0<m&&8>m){u=m;var B=a.ownerDocument;if(u&1&&Sd(B.documentElement),u&2&&Sd(B.body),u&4)for(u=B.head,Sd(u),B=u.firstChild;B;){var se=B.nextSibling,ve=B.nodeName;B[Ca]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&B.rel.toLowerCase()==="stylesheet"||u.removeChild(B),B=se}}if(T===0){a.removeChild(A),Pd(i);return}T--}else u==="$"||u==="$?"||u==="$!"?T++:m=u.charCodeAt(0)-48;else m=0;u=A}while(u);Pd(i)}function Xm(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var u=i;switch(i=i.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Xm(u),En(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function k5(a,i,u,m){for(;a.nodeType===1;){var T=u;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Ca])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(A=a.getAttribute("rel"),A==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(A!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(A=a.getAttribute("src"),(A!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&A&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var A=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===A)return a}else return a;if(a=Mo(a.nextSibling),a===null)break}return null}function j5(a,i,u){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Mo(a.nextSibling),a===null))return null;return a}function Jm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function B5(a,i){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")i();else{var m=function(){i(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Mo(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var Zm=null;function fx(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return a;i--}else u==="/$"&&i++}a=a.previousSibling}return null}function hx(a,i,u){switch(i=qf(u),a){case"html":if(a=i.documentElement,!a)throw Error(s(452));return a;case"head":if(a=i.head,!a)throw Error(s(453));return a;case"body":if(a=i.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function Sd(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);En(a)}var go=new Map,mx=new Set;function zf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ol=he.d;he.d={f:U5,r:F5,D:V5,C:G5,L:H5,m:Y5,X:z5,S:q5,M:$5};function U5(){var a=Ol.f(),i=jf();return a||i}function F5(a){var i=Qt(a);i!==null&&i.tag===5&&i.type==="form"?kc(i):Ol.r(a)}var yu=typeof document>"u"?null:document;function px(a,i,u){var m=yu;if(m&&typeof i=="string"&&i){var T=cs(i);T='link[rel="'+a+'"][href="'+T+'"]',typeof u=="string"&&(T+='[crossorigin="'+u+'"]'),mx.has(T)||(mx.add(T),a={rel:a,crossOrigin:u,href:i},m.querySelector(T)===null&&(i=m.createElement("link"),Vr(i,"link",a),$n(i),m.head.appendChild(i)))}}function V5(a){Ol.D(a),px("dns-prefetch",a,null)}function G5(a,i){Ol.C(a,i),px("preconnect",a,i)}function H5(a,i,u){Ol.L(a,i,u);var m=yu;if(m&&a&&i){var T='link[rel="preload"][as="'+cs(i)+'"]';i==="image"&&u&&u.imageSrcSet?(T+='[imagesrcset="'+cs(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(T+='[imagesizes="'+cs(u.imageSizes)+'"]')):T+='[href="'+cs(a)+'"]';var A=T;switch(i){case"style":A=Nu(a);break;case"script":A=vu(a)}go.has(A)||(a=_({rel:"preload",href:i==="image"&&u&&u.imageSrcSet?void 0:a,as:i},u),go.set(A,a),m.querySelector(T)!==null||i==="style"&&m.querySelector(Cd(A))||i==="script"&&m.querySelector(Ld(A))||(i=m.createElement("link"),Vr(i,"link",a),$n(i),m.head.appendChild(i)))}}function Y5(a,i){Ol.m(a,i);var u=yu;if(u&&a){var m=i&&typeof i.as=="string"?i.as:"script",T='link[rel="modulepreload"][as="'+cs(m)+'"][href="'+cs(a)+'"]',A=T;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=vu(a)}if(!go.has(A)&&(a=_({rel:"modulepreload",href:a},i),go.set(A,a),u.querySelector(T)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ld(A)))return}m=u.createElement("link"),Vr(m,"link",a),$n(m),u.head.appendChild(m)}}}function q5(a,i,u){Ol.S(a,i,u);var m=yu;if(m&&a){var T=Ts(m).hoistableStyles,A=Nu(a);i=i||"default";var B=T.get(A);if(!B){var se={loading:0,preload:null};if(B=m.querySelector(Cd(A)))se.loading=5;else{a=_({rel:"stylesheet",href:a,"data-precedence":i},u),(u=go.get(A))&&Qm(a,u);var ve=B=m.createElement("link");$n(ve),Vr(ve,"link",a),ve._p=new Promise(function(Ye,ct){ve.onload=Ye,ve.onerror=ct}),ve.addEventListener("load",function(){se.loading|=1}),ve.addEventListener("error",function(){se.loading|=2}),se.loading|=4,$f(B,i,m)}B={type:"stylesheet",instance:B,count:1,state:se},T.set(A,B)}}}function z5(a,i){Ol.X(a,i);var u=yu;if(u&&a){var m=Ts(u).hoistableScripts,T=vu(a),A=m.get(T);A||(A=u.querySelector(Ld(T)),A||(a=_({src:a,async:!0},i),(i=go.get(T))&&e0(a,i),A=u.createElement("script"),$n(A),Vr(A,"link",a),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(T,A))}}function $5(a,i){Ol.M(a,i);var u=yu;if(u&&a){var m=Ts(u).hoistableScripts,T=vu(a),A=m.get(T);A||(A=u.querySelector(Ld(T)),A||(a=_({src:a,async:!0,type:"module"},i),(i=go.get(T))&&e0(a,i),A=u.createElement("script"),$n(A),Vr(A,"link",a),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(T,A))}}function gx(a,i,u,m){var T=(T=fe.current)?zf(T):null;if(!T)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(i=Nu(u.href),u=Ts(T).hoistableStyles,m=u.get(i),m||(m={type:"style",instance:null,count:0,state:null},u.set(i,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=Nu(u.href);var A=Ts(T).hoistableStyles,B=A.get(a);if(B||(T=T.ownerDocument||T,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(a,B),(A=T.querySelector(Cd(a)))&&!A._p&&(B.instance=A,B.state.loading=5),go.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},go.set(a,u),A||W5(T,a,u,B.state))),i&&m===null)throw Error(s(528,""));return B}if(i&&m!==null)throw Error(s(529,""));return null;case"script":return i=u.async,u=u.src,typeof u=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vu(u),u=Ts(T).hoistableScripts,m=u.get(i),m||(m={type:"script",instance:null,count:0,state:null},u.set(i,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function Nu(a){return'href="'+cs(a)+'"'}function Cd(a){return'link[rel="stylesheet"]['+a+"]"}function xx(a){return _({},a,{"data-precedence":a.precedence,precedence:null})}function W5(a,i,u,m){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?m.loading=1:(i=a.createElement("link"),m.preload=i,i.addEventListener("load",function(){return m.loading|=1}),i.addEventListener("error",function(){return m.loading|=2}),Vr(i,"link",u),$n(i),a.head.appendChild(i))}function vu(a){return'[src="'+cs(a)+'"]'}function Ld(a){return"script[async]"+a}function Ex(a,i,u){if(i.count++,i.instance===null)switch(i.type){case"style":var m=a.querySelector('style[data-href~="'+cs(u.href)+'"]');if(m)return i.instance=m,$n(m),m;var T=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),$n(m),Vr(m,"style",T),$f(m,u.precedence,a),i.instance=m;case"stylesheet":T=Nu(u.href);var A=a.querySelector(Cd(T));if(A)return i.state.loading|=4,i.instance=A,$n(A),A;m=xx(u),(T=go.get(T))&&Qm(m,T),A=(a.ownerDocument||a).createElement("link"),$n(A);var B=A;return B._p=new Promise(function(se,ve){B.onload=se,B.onerror=ve}),Vr(A,"link",m),i.state.loading|=4,$f(A,u.precedence,a),i.instance=A;case"script":return A=vu(u.src),(T=a.querySelector(Ld(A)))?(i.instance=T,$n(T),T):(m=u,(T=go.get(A))&&(m=_({},u),e0(m,T)),a=a.ownerDocument||a,T=a.createElement("script"),$n(T),Vr(T,"link",m),a.head.appendChild(T),i.instance=T);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(m=i.instance,i.state.loading|=4,$f(m,u.precedence,a));return i.instance}function $f(a,i,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=m.length?m[m.length-1]:null,A=T,B=0;B<m.length;B++){var se=m[B];if(se.dataset.precedence===i)A=se;else if(A!==T)break}A?A.parentNode.insertBefore(a,A.nextSibling):(i=u.nodeType===9?u.head:u,i.insertBefore(a,i.firstChild))}function Qm(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function e0(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var Wf=null;function _x(a,i,u){if(Wf===null){var m=new Map,T=Wf=new Map;T.set(u,m)}else T=Wf,m=T.get(u),m||(m=new Map,T.set(u,m));if(m.has(a))return m;for(m.set(a,null),u=u.getElementsByTagName(a),T=0;T<u.length;T++){var A=u[T];if(!(A[Ca]||A[Ln]||a==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var B=A.getAttribute(i)||"";B=a+B;var se=m.get(B);se?se.push(A):m.set(B,[A])}}return m}function bx(a,i,u){a=a.ownerDocument||a,a.head.insertBefore(u,i==="title"?a.querySelector("head > title"):null)}function K5(a,i,u){if(u===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Tx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var wd=null;function X5(){}function J5(a,i,u){if(wd===null)throw Error(s(475));var m=wd;if(i.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var T=Nu(u.href),A=a.querySelector(Cd(T));if(A){a=A._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Kf.bind(m),a.then(m,m)),i.state.loading|=4,i.instance=A,$n(A);return}A=a.ownerDocument||a,u=xx(u),(T=go.get(T))&&Qm(u,T),A=A.createElement("link"),$n(A);var B=A;B._p=new Promise(function(se,ve){B.onload=se,B.onerror=ve}),Vr(A,"link",u),i.instance=A}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(m.count++,i=Kf.bind(m),a.addEventListener("load",i),a.addEventListener("error",i))}}function Z5(){if(wd===null)throw Error(s(475));var a=wd;return a.stylesheets&&a.count===0&&t0(a,a.stylesheets),0<a.count?function(i){var u=setTimeout(function(){if(a.stylesheets&&t0(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(u)}}:null}function Kf(){if(this.count--,this.count===0){if(this.stylesheets)t0(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Xf=null;function t0(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Xf=new Map,i.forEach(Q5,a),Xf=null,Kf.call(a))}function Q5(a,i){if(!(i.state.loading&4)){var u=Xf.get(a);if(u)var m=u.get(null);else{u=new Map,Xf.set(a,u);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<T.length;A++){var B=T[A];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(u.set(B.dataset.precedence,B),m=B)}m&&u.set(null,m)}T=i.instance,B=T.getAttribute("data-precedence"),A=u.get(B)||m,A===m&&u.set(null,T),u.set(B,T),this.count++,m=Kf.bind(this),T.addEventListener("load",m),T.addEventListener("error",m),A?A.parentNode.insertBefore(T,A.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),i.state.loading|=4}}var Id={$$typeof:R,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function eb(a,i,u,m,T,A,B,se){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.hiddenUpdates=js(null),this.identifierPrefix=m,this.onUncaughtError=T,this.onCaughtError=A,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function yx(a,i,u,m,T,A,B,se,ve,Ye,ct,Et){return a=new eb(a,i,u,B,se,ve,Ye,Et),i=1,A===!0&&(i|=24),A=rr(3,null,null,i),a.current=A,A.stateNode=a,i=Qu(),i.refCount++,a.pooledCache=i,i.refCount++,A.memoizedState={element:m,isDehydrated:u,cache:i},Le(A),a}function Nx(a){return a?(a=Ra,a):Ra}function vx(a,i,u,m,T,A){T=Nx(T),m.context===null?m.context=T:m.pendingContext=T,m=lt(i),m.payload={element:u},A=A===void 0?null:A,A!==null&&(m.callback=A),u=gt(a,m,i),u!==null&&($i(u,a,i),ft(u,a,i))}function Ax(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<i?u:i}}function n0(a,i){Ax(a,i),(a=a.alternate)&&Ax(a,i)}function Sx(a){if(a.tag===13){var i=Ui(a,67108864);i!==null&&$i(i,a,67108864),n0(a,67108864)}}var Jf=!0;function tb(a,i,u,m){var T=G.T;G.T=null;var A=he.p;try{he.p=2,s0(a,i,u,m)}finally{he.p=A,G.T=T}}function nb(a,i,u,m){var T=G.T;G.T=null;var A=he.p;try{he.p=8,s0(a,i,u,m)}finally{he.p=A,G.T=T}}function s0(a,i,u,m){if(Jf){var T=a0(m);if(T===null)Ym(a,i,m,Zf,u),Lx(a,m);else if(ab(T,a,i,u,m))m.stopPropagation();else if(Lx(a,m),i&4&&-1<sb.indexOf(a)){for(;T!==null;){var A=Qt(T);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var B=Gt(A.pendingLanes);if(B!==0){var se=A;for(se.pendingLanes|=2,se.entangledLanes|=2;B;){var ve=1<<31-We(B);se.entanglements[1]|=ve,B&=~ve}il(A),(qs&6)===0&&(Mf=Fe()+500,Nd(0))}}break;case 13:se=Ui(A,2),se!==null&&$i(se,A,2),jf(),n0(A,2)}if(A=a0(m),A===null&&Ym(a,i,m,Zf,u),A===T)break;T=A}T!==null&&m.stopPropagation()}else Ym(a,i,m,null,u)}}function a0(a){return a=bt(a),r0(a)}var Zf=null;function r0(a){if(Zf=null,a=bs(a),a!==null){var i=l(a);if(i===null)a=null;else{var u=i.tag;if(u===13){if(a=c(i),a!==null)return a;a=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Zf=a,null}function Cx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case Pe:return 2;case nt:return 8;case it:case st:return 32;case yt:return 268435456;default:return 32}default:return 32}}var i0=!1,lc=null,cc=null,uc=null,Dd=new Map,Rd=new Map,dc=[],sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lx(a,i){switch(a){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":cc=null;break;case"mouseover":case"mouseout":uc=null;break;case"pointerover":case"pointerout":Dd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(i.pointerId)}}function Od(a,i,u,m,T,A){return a===null||a.nativeEvent!==A?(a={blockedOn:i,domEventName:u,eventSystemFlags:m,nativeEvent:A,targetContainers:[T]},i!==null&&(i=Qt(i),i!==null&&Sx(i)),a):(a.eventSystemFlags|=m,i=a.targetContainers,T!==null&&i.indexOf(T)===-1&&i.push(T),a)}function ab(a,i,u,m,T){switch(i){case"focusin":return lc=Od(lc,a,i,u,m,T),!0;case"dragenter":return cc=Od(cc,a,i,u,m,T),!0;case"mouseover":return uc=Od(uc,a,i,u,m,T),!0;case"pointerover":var A=T.pointerId;return Dd.set(A,Od(Dd.get(A)||null,a,i,u,m,T)),!0;case"gotpointercapture":return A=T.pointerId,Rd.set(A,Od(Rd.get(A)||null,a,i,u,m,T)),!0}return!1}function wx(a){var i=bs(a.target);if(i!==null){var u=l(i);if(u!==null){if(i=u.tag,i===13){if(i=c(u),i!==null){a.blockedOn=i,Nn(a.priority,function(){if(u.tag===13){var m=zi();m=qa(m);var T=Ui(u,m);T!==null&&$i(T,u,m),n0(u,m)}});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Qf(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var u=a0(a.nativeEvent);if(u===null){u=a.nativeEvent;var m=new u.constructor(u.type,u);dt=m,u.target.dispatchEvent(m),dt=null}else return i=Qt(u),i!==null&&Sx(i),a.blockedOn=u,!1;i.shift()}return!0}function Ix(a,i,u){Qf(a)&&u.delete(i)}function rb(){i0=!1,lc!==null&&Qf(lc)&&(lc=null),cc!==null&&Qf(cc)&&(cc=null),uc!==null&&Qf(uc)&&(uc=null),Dd.forEach(Ix),Rd.forEach(Ix)}function eh(a,i){a.blockedOn===i&&(a.blockedOn=null,i0||(i0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rb)))}var th=null;function Dx(a){th!==a&&(th=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){th===a&&(th=null);for(var i=0;i<a.length;i+=3){var u=a[i],m=a[i+1],T=a[i+2];if(typeof m!="function"){if(r0(m||u)===null)continue;break}var A=Qt(u);A!==null&&(a.splice(i,3),i-=3,ho(A,{pending:!0,data:T,method:u.method,action:m},m,T))}}))}function Pd(a){function i(ve){return eh(ve,a)}lc!==null&&eh(lc,a),cc!==null&&eh(cc,a),uc!==null&&eh(uc,a),Dd.forEach(i),Rd.forEach(i);for(var u=0;u<dc.length;u++){var m=dc[u];m.blockedOn===a&&(m.blockedOn=null)}for(;0<dc.length&&(u=dc[0],u.blockedOn===null);)wx(u),u.blockedOn===null&&dc.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var T=u[m],A=u[m+1],B=T[kn]||null;if(typeof A=="function")B||Dx(u);else if(B){var se=null;if(A&&A.hasAttribute("formAction")){if(T=A,B=A[kn]||null)se=B.formAction;else if(r0(T)!==null)continue}else se=B.action;typeof se=="function"?u[m+1]=se:(u.splice(m,3),m-=3),Dx(u)}}}function o0(a){this._internalRoot=a}nh.prototype.render=o0.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(s(409));var u=i.current,m=zi();vx(u,m,a,i,null,null)},nh.prototype.unmount=o0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;vx(a.current,2,null,a,null,null),jf(),i[Fn]=null}};function nh(a){this._internalRoot=a}nh.prototype.unstable_scheduleHydration=function(a){if(a){var i=ca();a={blockedOn:null,target:a,priority:i};for(var u=0;u<dc.length&&i!==0&&i<dc[u].priority;u++);dc.splice(u,0,a),u===0&&wx(a)}};var Rx=e.version;if(Rx!=="19.1.0")throw Error(s(527,Rx,"19.1.0"));he.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=f(i),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var ib={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{Ft=sh.inject(ib),Yt=sh}catch{}}return kd.createRoot=function(a,i){if(!r(a))throw Error(s(299));var u=!1,m="",T=Wp,A=Kp,B=Xp,se=null;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onUncaughtError!==void 0&&(T=i.onUncaughtError),i.onCaughtError!==void 0&&(A=i.onCaughtError),i.onRecoverableError!==void 0&&(B=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(se=i.unstable_transitionCallbacks)),i=yx(a,1,!1,null,null,u,m,T,A,B,se,null),a[Fn]=i.current,Hm(a),new o0(i)},kd.hydrateRoot=function(a,i,u){if(!r(a))throw Error(s(299));var m=!1,T="",A=Wp,B=Kp,se=Xp,ve=null,Ye=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(T=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(B=u.onCaughtError),u.onRecoverableError!==void 0&&(se=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ve=u.unstable_transitionCallbacks),u.formState!==void 0&&(Ye=u.formState)),i=yx(a,1,!0,i,u??null,m,T,A,B,se,ve,Ye),i.context=Nx(null),u=i.current,m=zi(),m=qa(m),T=lt(m),T.callback=null,gt(u,T,m),u=m,i.current.lanes=u,ln(i,u),il(i),a[Fn]=i.current,Hm(a),new nh(i)},kd.version="19.1.0",kd}var Gx;function gb(){if(Gx)return u0.exports;Gx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),u0.exports=pb(),u0.exports}var xb=gb();const Eb=_2(xb);var fs=(t=>(t.INCOME="INCOME",t.EXPENSE="EXPENSE",t))(fs||{}),_a=(t=>(t.PAYABLE="PAYABLE",t.RECEIVABLE="RECEIVABLE",t))(_a||{}),ps=(t=>(t.CREATE_PAYABLE="createPayable",t.CREATE_RECEIVABLE="createReceivable",t.RECORD_PERSON_PAYMENT="recordPersonPayment",t.RECORD_USER_PAYMENT_TO_PERSON="recordUserPaymentToPerson",t))(ps||{}),xo=(t=>(t.DEBIT="DEBIT",t.CREDIT="CREDIT",t))(xo||{}),Qs=(t=>(t.MONTHLY="MONTHLY",t.WEEKLY="WEEKLY",t.QUARTERLY="QUARTERLY",t.YEARLY="YEARLY",t.CUSTOM="CUSTOM",t))(Qs||{}),Sa=(t=>(t.SALES="SALES",t.PURCHASE="PURCHASE",t))(Sa||{}),Ht=(t=>(t.PENDING="PENDING",t.PARTIALLY_PAID="PARTIALLY_PAID",t.PAID="PAID",t.OVERDUE="OVERDUE",t.CANCELLED="CANCELLED",t))(Ht||{});const j0=[{code:"bn-BD",label:" (Experimental)",geminiLang:"Bengali"},{code:"en-US",label:"English",geminiLang:"English"}],_b=t=>{const e=j0.find(n=>n.code===t);return e?e.geminiLang:"English"},bb={APP_TITLE:" - ",LOADING:" ...",SAVE_CHANGES:"  ",CANCEL:"",CLOSE_BTN:" ",BDT_SYMBOL:"",AMOUNT_PLACEHOLDER:"1000",DATE:"",VIEW_HISTORY_TOOLTIP:"  ",HISTORY_TITLE_PREFIX:" :",HISTORY_LOG_FOR_ITEM:"'{itemName}'    :",NO_HISTORY:"     ",VERSION_AT_TIMESTAMP:", :",ACTION_CREATED:" ",ACTION_UPDATED:" ",ACTION_DELETED:" ",ACTION_RESTORED:"  ",FIELD_CHANGES_FROM_TO:"'{field}'   '{oldValue}'  '{newValue}'",EDITED_BY_ON:"{userId}    {timestamp} ",INITIAL_STATE:" ",UNKNOWN_PERSON:" ",NO_SUGGESTIONS_FOUND:"   ",FORM_VALIDATION_ERROR:"    ",PHONETIC_TYPING_TOGGLE_TOOLTIP:" /   ",PHONETIC_BANGLA_ACTIVE:"  ",PHONETIC_ENGLISH_ACTIVE:"  ",LAST_MODIFIED_ON:" :",CREATED_ON:" :",FIELD_IS_REQUIRED:"",DELETED_ON:" :",MODAL_TITLE_CONFIRM_DELETE:"   ",CONFIRM_BTN_YES_DELETE:", ",CONFIRM_BTN_YES_RESTORE:",  ",CONFIRM_CREATE_INVOICE_TITLE:"   ",CONFIRM_CREATE_INVOICE_MSG:"      ?",CONFIRM_BTN_YES_CREATE:",  ",CONFIRM_BTN_COLOR_CREATE:"bg-teal-600 hover:bg-teal-700 focus:ring-teal-500",ID_LABEL:"",LOGO_TEXT:"",DEFAULT_UNIT_PIECE:"",PAGE_LABEL:"",OF_LABEL:"",TOTAL_ITEMS_LABEL:"",PREVIOUS_PAGE_BTN:"",NEXT_PAGE_BTN:"",EXPAND_MODAL_FULL_SCREEN:"  ",RESTORE_MODAL_DEFAULT_SIZE:"  ",WELCOME_TO_APP_MAIN_TITLE:" - ",WELCOME_TO_APP_SUBTITLE:"              ",KEY_FEATURES_TITLE:"  :",FEATURE_TRANSACTION_TRACKING_TITLE:" - ",FEATURE_TRANSACTION_TRACKING_DESC:"           ",FEATURE_DEBT_MANAGEMENT_TITLE:"- ",FEATURE_DEBT_MANAGEMENT_DESC:"        ,    ",FEATURE_BUDGETING_TITLE:"   ",FEATURE_BUDGETING_DESC:"            ",FEATURE_AI_ADVICE_TITLE:"AI  ",FEATURE_AI_ADVICE_DESC:"       AI    ",AI_ASSISTANT_BUTTON_LABEL:"",AI_ASSISTANT_LISTENING:"...",AI_ASSISTANT_PROCESSING:"...",AI_ASSISTANT_TRANSCRIPT_LABEL:" :",AI_ASSISTANT_ERROR_PERMISSION:"   ",AI_ASSISTANT_ERROR_NO_SPEECH:"        ",AI_ASSISTANT_ERROR_NETWORK:"       ",AI_ASSISTANT_ERROR_SERVICE_UNAVAILABLE:"     ",AI_ASSISTANT_ERROR_UNKNOWN:"       ",AI_COMMAND_INVOICE_EXTRACTED_SUCCESS:"    Modal  ...",AI_COMMAND_INVOICE_EXTRACT_FAILED:",        ",AI_ACTION_PERFORMED:"     ...",AI_INFO_PROVIDED:"  :",AI_FALLBACK_RESPONSE:",            ",AI_ACTION_ADD_INCOME:"     ...",AI_ACTION_ADD_EXPENSE:"     ...",AI_LOG_MODAL_TITLE:"AI  ",AI_LOG_CLEAR_BTN:" ",AI_LOG_TYPE_COMMAND:" ",AI_LOG_TYPE_RESPONSE:"AI  ",AI_LOG_TYPE_ERROR:"",AI_LOG_USER_COMMAND_LABEL:" ",AI_LOG_AI_RESPONSE_LABEL:"AI ",AI_LOG_INTENT_LABEL:"",AI_LOG_ACTION_DETAILS_LABEL:" ",AI_LOG_RAW_RESPONSE_LABEL:"  (Raw)",AI_LOG_NO_LOGS:"  AI    ",AI_LOG_CLEARED_SUCCESS:"AI    ",AI_VOICE_REPLAY_ENABLE_LABEL:"AI    ",AI_ASSISTANT_SCOPE_LABEL:"AI  ",AI_ASSISTANT_SCOPE_APP_SPECIFIC:"  ",AI_ASSISTANT_SCOPE_GLOBAL:"   ()",SPEECH_SYNTHESIS_NOT_SUPPORTED:"      ",SPEECH_SYNTHESIS_NOT_INITIALIZED:"    ",SPEECH_SYNTHESIS_ERROR:"   ",AI_SPEAKING_NOTIFICATION:"AI   ...",AI_SPEAKING_ERROR_NOTIFICATION:"AI    ",AI_REPLY_INVOICE_PREFILL_CONFIRM:"        ",AI_REPLY_COMMAND_UNDERSTOOD_PROCESSING:"   ,  ",AI_REPLY_CANNOT_UNDERSTAND:",        ?",AI_REPLY_GENERAL_ERROR:",      ",APP_FEATURE_TRANSACTION_TRACKING:"- ",APP_FEATURE_DEBT_MANAGEMENT:"- ",APP_FEATURE_PERSON_MANAGEMENT:" ",APP_FEATURE_BUDGETING:" ",APP_FEATURE_INVOICING:"/  (  )",APP_FEATURE_PRODUCT_MANAGEMENT:"   ",APP_FEATURE_AI_FINANCIAL_TIPS:"AI  ",APP_FEATURE_CHAT_WITH_CONTACTS:"   ",APP_FEATURE_DATA_REPORTS:" ",APP_FEATURE_USER_PROFILE_SETTINGS:"   ",APP_FEATURE_DATA_QUERY_AI:"  (  ,   /)"},Tb={ADD_NEW_TRANSACTION:"   ",DESCRIPTION:"",AMOUNT:" ",TRANSACTION_TYPE:" ",INCOME:"",EXPENSE:"",ADD_TRANSACTION_BTN:"  ",TRANSACTION_HISTORY:" ",NO_TRANSACTIONS:"     ",DELETE_TRANSACTION_TOOLTIP:" ",CONFIRM_DELETE_MSG:"       ?",DESCRIPTION_PLACEHOLDER:":  , ",ITEM_DELETED:"   ",EDIT_TRANSACTION:"  ",EDIT_TRANSACTION_TOOLTIP:"  ",TRANSACTION_UPDATED:"    ",TRANSACTION_ADDED_SUCCESS:"   !",TRANSACTION_HISTORY_MODAL_TITLE:"  ",FIELD_NAME_DESCRIPTION:"",FIELD_NAME_AMOUNT:" ",FIELD_NAME_TYPE:"",FIELD_NAME_DATE:"",FIELD_NAME_IS_DELETED:"  ?",FIELD_NAME_DELETED_AT:" ",FIELD_VALUE_TRUE:"",FIELD_VALUE_FALSE:"",MODAL_TITLE_ADD_TRANSACTION:"   ",MODAL_TITLE_ADD_INCOME:"   ",MODAL_TITLE_ADD_EXPENSE:"   ",ADD_INCOME_BTN_TEXT:"  ",ADD_EXPENSE_BTN_TEXT:"  ",HEADER_ADD_INCOME_BTN:" ",HEADER_ADD_EXPENSE_BTN:" ",MODAL_TITLE_TRANSACTION_HISTORY:" ",TRANSACTION_DESCRIPTION_NO_SUGGESTIONS:"  ",CONFIRM_RESTORE_TRANSACTION_MSG:"      ?",NO_DELETED_TRANSACTIONS:"   ",DELETED_TRANSACTIONS_TAB:" ",QUANTITY_LABEL:" ()",UNIT_LABEL:"",ADDITIONAL_NOTES_LABEL:"  ()",UNIT_PLACEHOLDER:": , ",ADDITIONAL_NOTES_PLACEHOLDER:"  ...",FIELD_REQUIRED_TOGGLE:"",SUMMARY_TOTAL_INCOME:" ",SUMMARY_TOTAL_EXPENSE:" ",SUMMARY_CURRENT_BALANCE:" ",TOTAL_TRANSACTIONS_LABEL:" ",SELECT_BANK_ACCOUNT_TRANSACTION_LABEL:"  ()",SELECT_BANK_ACCOUNT_PLACEHOLDER:"--     --",TRANSACTION_LINKED_TO_BANK_ACCOUNT:": {bankAccountName}"},yb={DEBT_MANAGEMENT_TITLE:"- ",ADD_NEW_DEBT:" /  ",DEBT_TYPE:"/ ",PAYABLE:"   ()",RECEIVABLE:"  ()",DUE_DATE:"   ()",ADD_DEBT_BTN:"/  ",DEBT_LIST_TITLE:"/ ",RECEIVABLES_SUBTITLE:"  (  )",PAYABLES_SUBTITLE:"  (    )",NO_DEBTS_PAYABLE:"   ",NO_DEBTS_RECEIVABLE:"   ",MARK_AS_SETTLED:"   ",MARK_AS_UNSETTLED:"   ",SETTLED_ON:" :",DUE_ON:" :",STATUS:"",SETTLED_STATUS:"",UNSETTLED_STATUS:"",DELETE_DEBT_TOOLTIP:"/ ",CONFIRM_DELETE_DEBT_MSG:"   /    ?      ",DEBT_ADDED:"/   ",DEBT_UPDATED:"/    ",DEBT_DELETED:"/   ",DEBT_SETTLED_INCOME_DESC:"{personName}      ({description})  ",DEBT_SETTLED_EXPENSE_DESC:"{personName}    ({description})    ",DEBT_DESCRIPTION_PLACEHOLDER:": , ",EDIT_DEBT_MODAL_TITLE:"/  ",EDIT_DEBT_TOOLTIP:"/  ",DEBT_HISTORY_MODAL_TITLE:"/  ",FIELD_NAME_ORIGINAL_AMOUNT:" ",FIELD_NAME_REMAINING_AMOUNT:" ",FIELD_NAME_DUE_DATE:" ",FIELD_NAME_IS_SETTLED:" ",FIELD_NAME_CREATION_DATE:" ",FIELD_NAME_SETTLED_DATE:" ",MODAL_TITLE_ADD_DEBT:" /  ",DEBTS_SECTION_TITLE:"- ",TOTAL_PAYABLE:"  ()",TOTAL_RECEIVABLE:"  ()",ENTRY_NATURE_LABEL:" ",DEBT_PAYABLE_USER_OWES:"   ( )",DEBT_RECEIVABLE_USER_IS_OWED:"  ( )",PAYMENT_DATE:" ",ADD_ENTRY_BTN:"  ",DEBT_FORM_ALERT_PAYMENT_DATE_REQUIRED:"     ",PERSON_OWES_YOU_NET_DEBT_LABEL:"     ( ):",YOU_OWE_PERSON_NET_DEBT_LABEL:"     ( ):",NET_DEBT_BALANCE_ZERO_LABEL:"      ",DEBT_HISTORY_PAID_BY_LEDGER_CREDIT:"(  ()  {amount} )",DEBT_HISTORY_PAID_BY_LEDGER_DEBIT:"(  ()  {amount} )"},Nb={PERSON_NAME:" ",PERSON_NAME_PLACEHOLDER:":  ",PERSON_LIST_TITLE:" ",ADD_NEW_PERSON_BTN:"   ",EDIT_PERSON_BTN_LABEL:"  ",DELETE_PERSON_BTN_LABEL:" ",PERSON_MOBILE_NUMBER:" ",PERSON_ADDRESS:"",PERSON_SHOP_NAME:"  ( )",PERSON_EMAIL_LABEL:" ()",PERSON_EMAIL_PLACEHOLDER:"person@example.com",PERSON_PROFILE_IMAGE:" ",UPLOAD_IMAGE_BTN:"  ",CHANGE_IMAGE_BTN:"  ",REMOVE_IMAGE_BTN:" ",IMAGE_PREVIEW_ALT:"  ",IMAGE_SIZE_TOO_LARGE_ERROR:"   1MB     ",FIELD_NAME_PERSON_PROFILE_IMAGE:" ",PROFILE_IMAGE_UPDATED:"    ",PROFILE_IMAGE_REMOVED:"   ",PROFILE_IMAGE_ADDED:"    ",PERSON_MOBILE_PLACEHOLDER:"01XXXXXXXXX",PERSON_ADDRESS_PLACEHOLDER:" ",PERSON_SHOP_NAME_PLACEHOLDER:" ",SAVE_PERSON_BTN:"  ",NO_PERSONS_FOUND:"     ",CONFIRM_DELETE_PERSON_MSG:"        ?          /    ",PERSON_ADDED_SUCCESS:"     ",PERSON_UPDATED_SUCCESS:"     ",PERSON_DELETED_SUCCESS:"     ",SEARCH_PERSON_PLACEHOLDER:"     ...",MANAGE_PERSONS_MODAL_TITLE:" ",ADD_PERSON_MODAL_TITLE:"   ",EDIT_PERSON_MODAL_TITLE:"  ",PERSON_HISTORY_MODAL_TITLE:"   ",SELECT_PERSON_MODAL_TITLE:"  ",SELECT_PERSON_BTN_TITLE:"  ",PERSON_NOT_SELECTED_PLACEHOLDER:"    ",FIELD_NAME_PERSON_ID:" ",FIELD_NAME_PERSON_NAME:" ",FIELD_NAME_PERSON_MOBILE:" ",FIELD_NAME_PERSON_EMAIL:"",FIELD_NAME_PERSON_ADDRESS:"",FIELD_NAME_PERSON_SHOP_NAME:" ",FIELD_NAME_CUSTOM_ALIAS:"  ()",CUSTOM_ALIAS_PLACEHOLDER:"      ",SYSTEM_LINKED_NAME_LABEL:"-   ( )",SYSTEM_NAME_INDICATOR:"( )",SYSTEM_USER_UNLINKED_FORM_EDITABLE:"        ",PERSON_DETAILS:" ",PERSON_NAME_REQUIRED:"            ",PERSON_ADDED_IMPLICITLY_DEBT:'"{personName}"        /    ',PERSON_ADDED_IMPLICITLY_FOR_ENTRY:'"{personName}"            ',PERSON_SAVED_AFTER_IMPORT:"      ",PERSON_DEBTS_HISTORY_MODAL_TITLE:"{personName}  - ",VIEW_PERSON_DEBTS_HISTORY_TOOLTIP:" -  ",NO_DEBTS_FOR_PERSON:"    /   ",MOBILE_NUMBER_DUPLICATE:"   ({mobileNumber})  {personNamesString}          ",PERSON_EMAIL_DUPLICATE:"   ({email})   {personNamesString}                ",INVALID_EMAIL_FORMAT:"      ",INVALID_MOBILE_NUMBER_FORMAT:"        (: 01XXXXXXXXX)",IMPORT_SYSTEM_USER_PROMPT:"         ?",CONFIRM_SAVE_IMPORTED_PERSON:"  ({USER_NAME}, {USER_EMAIL})         ?",IMPORT_USER_DETAILS_BTN:"  ",USER_DETAILS_IMPORTED:"     ",PERSON_RESTORED_SUCCESS:"    ",CONFIRM_RESTORE_PERSON_MSG:"      ?",NO_DELETED_PERSONS:"   ",DELETED_PERSONS_TAB:" ",PERSON_PAYMENT_RECEIVED_LEDGER_CREDIT:"   (  )",PERSON_PAYMENT_MADE_BY_USER_LEDGER_DEBIT:"   (  )",LEDGER_ENTRY_FROM_DEBT_FORM_SUCCESS:"      ",LEDGER_ENTRY_USER_PAYMENT_SUCCESS:"       ",VIEW_PERSON_LEDGER_TOOLTIP:"   ()",ADD_LEDGER_ENTRY_MODAL_TITLE:"     ",PERSON_LEDGER_HISTORY_MODAL_TITLE:"{personName}    ()",LEDGER_ENTRY_TYPE_LABEL:"  ()",LEDGER_TYPE_CREDIT_PERSON:" (     )",LEDGER_TYPE_DEBIT_PERSON:" (        )",LEDGER_BALANCE_AFTER_ENTRY:"   ",CURRENT_NET_LEDGER_BALANCE_LABEL:"  ",LEDGER_BALANCE_STATUS_DEBIT:"{amount}  ( )",LEDGER_BALANCE_STATUS_CREDIT:"{amount}  ( )",LEDGER_BALANCE_STATUS_ZERO:" ",ADD_LEDGER_ENTRY_BTN:"   ",NO_LEDGER_ENTRIES_FOUND:"       ",CONFIRM_DELETE_LEDGER_ENTRY_MSG:"       ?             ",LEDGER_ENTRY_DELETED_SUCCESS:"    ",LEDGER_ENTRY_ADDED_SUCCESS:"      ",LEDGER_ENTRY_DESCRIPTION_PLACEHOLDER:":  ,   ",LEDGER_ENTRIES_SECTION_TITLE:"  ()",LEDGER_CREDIT_INCOME_DESC:"{personName}     : {description}",LEDGER_DEBIT_EXPENSE_DESC:"{personName}    : {description}",PERSON_FINANCIAL_OVERVIEW_MODAL_TITLE:"{personName}    ",VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP:"    ",UNIFIED_FINANCIAL_HISTORY_TITLE:"   - ",NO_FINANCIAL_ACTIVITY:"       ",RECEIVABLE_PERSONS_MODAL_TITLE:"    ",TOTAL_RECEIVABLE_FROM_PERSON_LABEL:" :",NO_PERSONS_WITH_RECEIVABLES:"       ",VIEW_DETAILS_FOR_PERSON_RECEIVABLE_TOOLTIP:"{personName}   ",PAYABLE_PERSONS_MODAL_TITLE:"     ",TOTAL_PAYABLE_TO_PERSON_LABEL:" :",NO_PERSONS_WITH_PAYABLES:"         ",VIEW_DETAILS_FOR_PERSON_PAYABLE_TOOLTIP:"{personName}   ",FEATURE_PERSON_LEDGER_TITLE:" ",FEATURE_PERSON_LEDGER_DESC:"     -      "},vb={LOGIN:"",SIGNUP:"",LOGOUT:"",EMAIL:"",EMAIL_OR_MOBILE:"   ",PASSWORD:"",NAME:"",NAME_PLACEHOLDER:" ",EMAIL_PLACEHOLDER:"user@example.com  01XXXXXXXXX",PASSWORD_PLACEHOLDER:"********",DONT_HAVE_ACCOUNT:" ?",ALREADY_HAVE_ACCOUNT:"  ?",LOGIN_SUCCESS:"  ",SIGNUP_SUCCESS:"  ",LOGOUT_SUCCESS:"  ",AUTH_ERROR_GENERAL:"       ",AUTH_ERROR_INVALID_CREDENTIALS:"/    ",AUTH_ERROR_EMAIL_EXISTS:"       ",WELCOME_EMAIL_SUBJECT:"-  !",MOCKED_AUTH_WARNING_TITLE:" :",MOCKED_AUTH_WARNING_DESC:"    /          ",PLEASE_CONFIGURE_APIS:"   API  ",USER_NOT_LOGGED_IN_DATA:"  -        ",WELCOME_TO_APP:" ",PLEASE_LOGIN_SIGNUP_TO_PROCEED:"       ",PLEASE_CONFIGURE_APIS_FIRST_IF_PROBLEM:"   ,    API   ",FORGOT_PASSWORD_LINK:"  ?",FORGOT_PASSWORD_TITLE:" ",FORGOT_PASSWORD_INSTRUCTIONS:"               ",SEND_RESET_CODE_BTN:"  ",RESET_CODE_SENT_SUCCESS:"     ,          ",RESET_CODE_SENT_FAIL:"         ",RESET_CODE_LABEL:" ",RESET_CODE_PLACEHOLDER:"   ",NEW_PASSWORD_LABEL:"  (  )",CONFIRM_NEW_PASSWORD_LABEL:"   ",RESET_PASSWORD_BTN:"  ",PASSWORD_RESET_SUCCESS_AUTO_LOGIN:"           ",PASSWORDS_DONT_MATCH:"     ",INVALID_RESET_CODE:"        ",EMAIL_NOT_FOUND_ALERT:"       ",RESET_CODE_EMAIL_SUBJECT:"  ",RESET_CODE_EMAIL_MESSAGE_HTML:`
    <div style="font-family: Arial, sans-serif; color: #333;">
      <p> ,</p>
      <p>            :</p>
      <p style="font-size: 24px; font-weight: bold; color: #007bff; letter-spacing: 2px; border: 1px dashed #007bff; padding: 10px; display: inline-block;">
        {CODE}
      </p>
      <p>             ,     </p>
      <p>,<br/>{APP_TITLE} </p>
    </div>
  `.trim(),PASSWORD_CHANGED_EMAIL_SUBJECT:"    ",PASSWORD_CHANGED_EMAIL_MESSAGE_HTML:`
    <div style="font-family: Arial, sans-serif; color: #333;">
      <p> {USER_NAME},</p>
      <p> {APP_TITLE}      </p>
      <p>      ,       </p>
      <p>,<br/>{APP_TITLE} </p>
    </div>
  `.trim(),RESET_CODE_EMAIL_BODY_INTRO:" {userName},",RESET_CODE_EMAIL_BODY_REQUEST_INFO:"  {appName}       ",RESET_CODE_EMAIL_BODY_CODE_INFO:"    : ",RESET_CODE_EMAIL_BODY_EXPIRY_INFO:"      ",RESET_CODE_EMAIL_BODY_IGNORE_INFO:"      ,     ",RESET_CODE_EMAIL_BODY_THANKS:",",RESET_CODE_EMAIL_BODY_TEAM_NAME:"{appName} ",BACK_TO_LOGIN_LINK:"  ",REMEMBER_ME:"  ",CHANGE_PASSWORD_MODAL_TITLE:"  ",CURRENT_PASSWORD_LABEL:" ",ERROR_CURRENT_PASSWORD_INCORRECT:"    ",PASSWORD_CHANGE_SUCCESS:"     ",EDIT_PROFILE_MODAL_TITLE:"  ",EDIT_PROFILE_NAV_BTN_TEXT:"",EMAIL_NOT_EDITABLE:" ( )",PROFILE_UPDATE_SUCCESS:"     ",MOBILE_NUMBER_ALREADY_IN_USE:"   ({mobileNumber})            ",FACEBOOK_PROFILE_URL:"   ()",FACEBOOK_PROFILE_URL_PLACEHOLDER:"https://facebook.com/yourprofile",INVALID_FACEBOOK_URL:"       ",WELCOME_TO_APP_MAIN_TITLE:" !",WELCOME_TO_APP_SUBTITLE:"              !",KEY_FEATURES_TITLE:"  :",FEATURE_TRANSACTION_TRACKING_TITLE:" - ",FEATURE_TRANSACTION_TRACKING_DESC:"       ",FEATURE_DEBT_MANAGEMENT_TITLE:"- ",FEATURE_DEBT_MANAGEMENT_DESC:"        ,   ",FEATURE_PERSON_LEDGER_TITLE:" ",FEATURE_PERSON_LEDGER_DESC:"       ",FEATURE_BUDGETING_TITLE:"   ",FEATURE_BUDGETING_DESC:"         ",FEATURE_REPORTS_TITLE:" ",FEATURE_REPORTS_DESC:"   -  ",FEATURE_AI_ADVICE_TITLE:"AI  ",FEATURE_AI_ADVICE_DESC:"      Gemini AI   "},Ab={FINANCIAL_ADVICE_SECTION_TITLE:"  (Gemini AI)",GET_ADVICE_BTN:" ",ADVICE_ERROR:"      API        ",API_KEY_INFO:"AI    Gemini API  ",API_KEY_NOT_CONFIGURED:"Gemini API     AI   ",ADVICE_FROM_GEMINI:"Gemini AI  :"},Sb={ARCHIVE_MODAL_TITLE:" ( )",ARCHIVE_NAV_BTN:"",ITEM_ARCHIVED:"   ",STATUS_ARCHIVED:"  ",SHOW_DELETED_ITEMS_BTN:"  ",HIDE_DELETED_ITEMS_BTN:"  ",RESTORE_ITEM_TOOLTIP:"  ",ITEM_RESTORED_SUCCESS:"    "},Cb={BUDGET_MANAGEMENT_TITLE:" ",BUDGET_SETUP_MODAL_TITLE:"   ",BUDGET_CATEGORIES_SECTION_TITLE:"  ",ADD_NEW_BUDGET_CATEGORY_BTN:"   ",EDIT_BUDGET_CATEGORY_BTN:"  ",DELETE_BUDGET_CATEGORY_BTN:" ",BUDGET_CATEGORY_NAME_LABEL:" ",BUDGET_CATEGORY_NAME_PLACEHOLDER:":  , ",SAVE_BUDGET_CATEGORY_BTN:"  ",NO_BUDGET_CATEGORIES_FOUND:"      ",CONFIRM_DELETE_BUDGET_CATEGORY_MSG:"       ?       ",BUDGET_CATEGORY_ADDED_SUCCESS:"     ",BUDGET_CATEGORY_UPDATED_SUCCESS:"     ",BUDGET_CATEGORY_DELETED_SUCCESS:"     ",BUDGET_CATEGORY_NAME_REQUIRED:"  ",BUDGET_CATEGORY_EXISTS_ERROR:"     ",BUDGET_CATEGORY_HAS_BUDGETS_ERROR:"            ",BUDGETS_SECTION_TITLE:" ",ADD_NEW_BUDGET_BTN:"   ",EDIT_BUDGET_BTN:"  ",DELETE_BUDGET_BTN:" ",SELECT_BUDGET_CATEGORY_LABEL:"   ",BUDGET_AMOUNT_LABEL:" ",BUDGET_PERIOD_LABEL:"",BUDGET_START_MONTH_LABEL:" ",BUDGET_START_WEEK_LABEL:"  (,  )",BUDGET_START_QUARTER_LABEL:"  (, )",BUDGET_START_YEAR_LABEL:"",BUDGET_CUSTOM_START_DATE_LABEL:"  ()",BUDGET_CUSTOM_END_DATE_LABEL:"  ()",BUDGET_MONTHLY_PERIOD:"",BUDGET_WEEKLY_PERIOD:"",BUDGET_QUARTERLY_PERIOD:"",BUDGET_YEARLY_PERIOD:"",BUDGET_CUSTOM_PERIOD_LABEL:" ",QUARTER_1:"  (-)",QUARTER_2:"  (-)",QUARTER_3:"  (-)",QUARTER_4:"  (-)",SAVE_BUDGET_BTN:"  ",NO_BUDGETS_FOUND:"     ",CONFIRM_DELETE_BUDGET_MSG:"      ?",BUDGET_ADDED_SUCCESS:"    ",BUDGET_UPDATED_SUCCESS:"    ",BUDGET_DELETED_SUCCESS:"    ",BUDGET_SELECT_CATEGORY_PLACEHOLDER:"--    --",BUDGET_FOR_PERIOD_LABEL:"{periodDisplay}   ",BUDGET_SPENT_LABEL:" ",BUDGET_REMAINING_LABEL:"",BUDGET_PERCENTAGE_USED_LABEL:"{percentage}% ",BUDGET_OVERSPENT_LABEL:" ",BUDGET_TARGET_LABEL:"",BUDGET_EXISTS_FOR_CATEGORY_MONTH_ERROR:"        ",BUDGET_INVALID_START_DATE:"       ",BUDGET_INVALID_CUSTOM_DATE_RANGE:"         ",BUDGET_INVALID_AMOUNT:"      ",BUDGET_CATEGORY_NOT_SELECTED:"      ",MANAGE_BUDGETS_NAV_BTN:""},Lb={CHAT_WITH_PERSON_TITLE:"{personName}   ",TYPE_YOUR_MESSAGE:"  ...",SEND_MESSAGE_BTN:" ",NO_MESSAGES_YET:"{personName}      - ",MESSAGE_SENT_SUCCESS:"   ",MESSAGE_SEND_ERROR:"   ",MESSAGE_FROM_YOU:"",OPEN_CHAT_TOOLTIP:"{personName}    ",CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON:"{personName}    ,       ",INBOX_MODAL_TITLE:" ",NO_INCOMING_MESSAGES:"     ",VIEW_CHAT_HISTORY_WITH_PERSON:"{personName}    ",UNREAD_MESSAGES_FROM_PERSON:"{personName}     ",LAST_MESSAGE_FROM:"  ({personName} ):",LAST_MESSAGE_TO:"  ({personName}  ):",MESSAGES_NAV_BTN:"",MESSAGE_FAILED_TO_MARK_AS_READ:"      ",ATTACH_IMAGE_TOOLTIP:"  ",EMOJI_PICKER_TOOLTIP:"  ",IMAGE_PREVIEW_CHAT_ALT:"  ",IMAGE_SEND_ERROR:"   ",INVALID_IMAGE_FILE:"    PNG, JPG, GIF ",IMAGE_TOO_LARGE_CHAT:"  2MB     ",ADD_REACTION_TOOLTIP:"  ",MESSAGE_REACTION_ERROR:"    ",IMAGE_VIEWER_TITLE:" ",DOWNLOAD_IMAGE_BTN:"  ",CONFIRM_DELETE_MESSAGE_MSG:"      ?     ",MESSAGE_DELETED_SUCCESS:"   ",MESSAGE_DELETE_ERROR:"   ",DELETE_MESSAGE_TOOLTIP:" ",YOU_DELETED_A_MESSAGE:"    ",MESSAGE_WAS_DELETED:"   ",DELETE_CHAT_HISTORY_TOOLTIP:"  ",CONFIRM_DELETE_CHAT_HISTORY_MSG:"     {personName}        ?             ",MESSAGE_ACTION_HISTORY_DELETED:"  ",CHAT_HISTORY_DELETED_SUCCESS:"    ",RECORD_VOICE_TOOLTIP:"  ",STOP_RECORDING_TOOLTIP:"  ",AUDIO_PREVIEW_LABEL:" ",REMOVE_AUDIO_PREVIEW_TOOLTIP:" ",AUDIO_MESSAGE_LABEL:"[ ]",MAX_RECORDING_DURATION_REACHED:"    ",ERROR_AUDIO_RECORDING:"    ",RECORDING_LABEL:":",AUDIO_SEND_ERROR:"   ",VIDEO_CALL_WITH_PERSON_TITLE:"{personName}    ",LOCAL_VIDEO_PREVIEW_ARIA:"   ",REMOTE_VIDEO_ARIA:" ",MUTE_MIC_BTN:"  ",UNMUTE_MIC_BTN:"  ",START_VIDEO_BTN:"  ",STOP_VIDEO_BTN:"  ",END_CALL_BTN:"  ",VIDEO_CALL_PERMISSION_ERROR:"           ",VIDEO_CALL_DEVICE_ERROR:"            ",WAITING_FOR_PERSON_VIDEO:"{personName}     ...",OPEN_VIDEO_CALL_TOOLTIP:"{personName}     ",VIDEO_CALL_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON:"{personName}    ,        ",CONNECTING_VIDEO_CALL:"  ..."},wb={REPORT_MODAL_TITLE:"- ",MODAL_TITLE_REPORTS:" ",SELECT_DATE_RANGE:"  :",START_DATE:" ",END_DATE:" ",GENERATE_REPORT_BTN:"  ",REPORT_FOR_PERIOD:" :",TO_DATE:"",NET_BALANCE_FOR_PERIOD:"   :",NO_TRANSACTIONS_IN_RANGE:"      ",REPORT_SUMMARY_TITLE:"",SELECT_DESCRIPTIONS_BTN_TEXT:"   ()",DESCRIPTIONS_SELECTED_COUNT_TEXT:"{count}   ",SEARCH_DESCRIPTIONS_PLACEHOLDER:" ...",CLEAR_SELECTION_BTN_TEXT:"  ",REPORT_FOR_DESCRIPTIONS:"  :",NO_DESCRIPTIONS_AVAILABLE:"   ",SELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL:"   ",DESELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL:"   ",DOWNLOAD_CSV_BTN_TEXT:"CSV  ",DOWNLOAD_PDF_BTN_TEXT:"PDF  ",BANK_REPORT_MODAL_TITLE:" ",SELECT_BANK_ACCOUNT_LABEL:"   ",ALL_BANK_ACCOUNTS_OPTION:"  ",FILTER_BY_ENTRY_TYPE_LABEL:"    :",INCLUDE_DIRECT_TRANSACTIONS_LABEL:" ",INCLUDE_SALES_INVOICE_PAYMENTS_LABEL:"   ",INCLUDE_PURCHASE_BILL_PAYMENTS_LABEL:"  ",INCLUDE_DEBT_SETTLEMENTS_LABEL:"/ ",OPENING_BALANCE_LABEL:" ",CLOSING_BALANCE_LABEL:" ",TOTAL_DEBITS_LABEL:"  ()",TOTAL_CREDITS_LABEL:"  ()",REPORT_TABLE_DATE_HEADER:"",REPORT_TABLE_DESCRIPTION_HEADER:"",REPORT_TABLE_TYPE_HEADER:"",REPORT_TABLE_DEBIT_HEADER:" ()",REPORT_TABLE_CREDIT_HEADER:" ()",REPORT_TABLE_BALANCE_HEADER:"  ()",ENTRY_TYPE_INCOME:"",ENTRY_TYPE_EXPENSE:"",ENTRY_TYPE_SALES_PAYMENT:"  ",ENTRY_TYPE_PURCHASE_PAYMENT:"  ",ENTRY_TYPE_DEBT_PAID_FROM_BANK:"  ()",ENTRY_TYPE_DEBT_RECEIVED_TO_BANK:"  ()",NO_BANK_ACTIVITIES_FOR_PERIOD:"        ",BANK_ACCOUNT_INITIAL_BALANCE_DESC:"  ({date})"},Ib={RESET_APP_DATA_BTN:"   ",CONFIRM_RESET_APP_DATA_MSG:"          ?         , -    ",APP_DATA_RESET_SUCCESS:"        ...",MANAGE_SUGGESTIONS_MODAL_TITLE:"    ",MANAGE_SUGGESTIONS_BTN_TEXT:"   ",SUGGESTIONS_INCOME_TAB:" ",SUGGESTIONS_EXPENSE_TAB:" ",ADD_NEW_SUGGESTION_LABEL:"   :",ADD_SUGGESTION_BTN:"  ",SUGGESTION_PLACEHOLDER:":  ",USER_SUGGESTIONS_TITLE_INCOME:"   :",USER_SUGGESTIONS_TITLE_EXPENSE:"   :",PREDEFINED_SUGGESTIONS_TITLE_INCOME:"   (  ):",PREDEFINED_SUGGESTIONS_TITLE_EXPENSE:"   (  ):",NO_USER_SUGGESTIONS_FOR_TYPE:"         ",EDIT_SUGGESTION_TOOLTIP:"  ",DELETE_SUGGESTION_TOOLTIP:" ",CONFIRM_DELETE_SUGGESTION_MSG:"     ?",SUGGESTION_ADDED_SUCCESS:"    ",SUGGESTION_UPDATED_SUCCESS:"    ",SUGGESTION_DELETED_SUCCESS:"   ",SUGGESTION_EXISTS_ERROR:"     ",SUGGESTION_CANNOT_BE_EMPTY:"    ",SUGGESTION_ALREADY_EXISTS:"     ",EDIT_SUGGESTION_MODAL_TITLE:"  ",SELECT_ALL_SUGGESTIONS_LABEL:"  ",DESELECT_ALL_SUGGESTIONS_LABEL:"  ",MANAGE_COMPANY_PROFILES_BTN:"  ",MANAGE_COMPANY_PROFILES_MODAL_TITLE:"   ",SETTINGS_NAV_ITEM_GEMINI:"Gemini AI ",GEMINI_AI_SETTINGS_MODAL_TITLE:"Gemini AI ",GEMINI_MODEL_LABEL:" ",GEMINI_TEMPERATURE_LABEL:" ()",GEMINI_TOP_K_LABEL:"-",GEMINI_TOP_P_LABEL:"-",SAVE_GEMINI_SETTINGS_BTN:"  ",RESET_GEMINI_SETTINGS_BTN:"  ",GEMINI_SETTINGS_SAVED_SUCCESS:"Gemini    ",GEMINI_SETTINGS_RESET_SUCCESS:"Gemini         ",APP_ADMIN_SETTINGS_MODAL_TITLE:"  ",APP_ADMIN_SETTINGS_NAV_ITEM:"  ",ENABLE_SCHEMA_CHECK_LABEL:"     ",ENABLE_SCHEMA_CHECK_DESCRIPTION:" ,             /        ,           ",ENABLE_DATA_FETCH_LABEL:"     ",ENABLE_DATA_FETCH_DESCRIPTION:" ,      , -         ,           ",ADMIN_SETTINGS_SAVED_SUCCESS:"    "},Db={CREATE_SALES_INVOICE_MODAL_TITLE:"    ",CREATE_PURCHASE_BILL_MODAL_TITLE:"    ",EDIT_INVOICE_MODAL_TITLE:"  ",VIEW_INVOICE_MODAL_TITLE:"/ ",INVOICE_LIST_MODAL_TITLE:"   ",CREATE_SALES_INVOICE_NAV_BTN:"  ",CREATE_PURCHASE_BILL_NAV_BTN:"   ",VIEW_INVOICES_NAV_BTN:"/ ",INVOICE_NUMBER_LABEL:"/ ",INVOICE_DATE_LABEL:"/ ",DUE_DATE_INVOICE_LABEL:"  ",BILLED_TO_LABEL:" ()",SUPPLIER_LABEL:"",SELECT_CUSTOMER_BTN_LABEL:"  ",SELECT_SUPPLIER_BTN_LABEL:"  ",ADD_NEW_CUSTOMER_BTN_LABEL:"   ",ADD_NEW_SUPPLIER_BTN_LABEL:"   ",CUSTOMER_DETAILS_LABEL:" ",SUPPLIER_DETAILS_LABEL:" ",INVOICE_ITEMS_LABEL:" ",ADD_ITEM_BTN_LABEL:" /  ",PRODUCT_SERVICE_NAME_LABEL:" / ",PRODUCT_NAME_PLACEHOLDER:": ,  ",ITEM_DESCRIPTION_LABEL:"  ()",ITEM_DESCRIPTION_PLACEHOLDER:" ",QUANTITY_INVOICE_LABEL:"",UNIT_PRICE_LABEL:" ",ITEM_TOTAL_LABEL:" ",REMOVE_ITEM_BTN_LABEL:"",SUBTOTAL_LABEL:"",DISCOUNT_LABEL:" ()",DISCOUNT_TYPE_LABEL:" ",DISCOUNT_PERCENTAGE_LABEL:" (%)",DISCOUNT_FIXED_AMOUNT_LABEL:"  ()",DISCOUNT_VALUE_PLACEHOLDER:":   ",TAX_LABEL:"/ ()",TAX_TYPE_LABEL:" ",TAX_PERCENTAGE_LABEL:" (%)",TAX_FIXED_AMOUNT_LABEL:"  ()",TAX_VALUE_PLACEHOLDER:":   ",GRAND_TOTAL_LABEL:" ",NOTES_TERMS_LABEL:"   ()",NOTES_TERMS_PLACEHOLDER:"     ...",PAYMENT_STATUS_LABEL:" ",PAYMENT_STATUS_PENDING:"",PAYMENT_STATUS_PARTIALLY_PAID:" ",PAYMENT_STATUS_PAID:"",PAYMENT_STATUS_OVERDUE:"",PAYMENT_STATUS_CANCELLED:"",CREATE_INVOICE_BTN_LABEL:"/  ",SAVE_INVOICE_BTN_LABEL:"  ",INVOICE_CREATED_SUCCESS:"/    ",INVOICE_UPDATED_SUCCESS:"    ",INVOICE_DELETED_SUCCESS:"/   ",INVOICE_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}      : {amount}",BILL_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}      : {amount}",INVOICE_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}    : {amount}",BILL_PAYMENT_TRANSACTION_CREATED_DESC:" #{invoiceNumber}    : {amount}",INVOICE_TYPE_SALES_TRANSACTION:" ",INVOICE_TYPE_PURCHASE_TRANSACTION:" ",INVOICE_CREATION_ERROR:"/    : {error}",PAYMENT_RECORDED_SUCCESS:"    ",PAYMENT_RECORDING_ERROR:"    : {error}",INVOICE_NO_ITEMS_ERROR:"/   /   ",INVOICE_ITEM_VALIDATION_ERROR:"             ",PERSON_ADDED_IMPLICITLY_INVOICE:'"{personName}"   {personType}     /   ',PERSON_TYPE_CUSTOMER:"",PERSON_TYPE_SUPPLIER:"",INVOICE_CUSTOMER_CREATION_ERROR:"/    ",INVOICE_CUSTOMER_REQUIRED_ERROR:"   /      ",INVOICE_DATE_REQUIRED_ERROR:"/  ",PAYMENT_METHOD_CASH:"",PAYMENT_METHOD_BANK_TRANSFER:" ",PAYMENT_METHOD_BKASH:"",PAYMENT_METHOD_NAGAD:" ()",PAYMENT_METHOD_ROCKET:"",PAYMENT_METHOD_CARD:"",PAYMENT_METHOD_CHEQUE:"",PAYMENT_METHOD_OTHER:"",CUSTOMER_SEARCH_PLACEHOLDER:"     ...",SUPPLIER_SEARCH_PLACEHOLDER:"     ...",NO_CUSTOMER_SUGGESTIONS:"           ",NO_SUPPLIER_SUGGESTIONS:"           ",INITIAL_PAID_AMOUNT_LABEL:"  ",PAYMENT_METHOD_LABEL:" ",PAYMENT_NOTES_LABEL:"  ()",PAYMENT_NOTES_PLACEHOLDER:":  ",REMAINING_AMOUNT_LABEL:" ",INVOICE_VIEW_DETAILS:"/  ",SEARCH_INVOICE_PLACEHOLDER:"  /   ...",NO_INVOICES_FOUND:"  /   ",INVOICE_TITLE_FOR_PRINT:"",BILL_TITLE_FOR_PRINT:" ",PAYMENT_AMOUNT_EXCEEDS_REMAINING_ERROR:"        ",PAYMENT_DATE_REQUIRED_ERROR:"  ",PAYMENT_DATE_LABEL:" ",INVOICE_STATUS_PENDING_TOOLTIP:" /    ",INVOICE_STATUS_PARTIALLY_PAID_TOOLTIP:" /     ",INVOICE_STATUS_PAID_TOOLTIP:" /  ",INVOICE_STATUS_OVERDUE_TOOLTIP:" /    ",INVOICE_STATUS_CANCELLED_TOOLTIP:" /   ",INVOICE_FROM_LABEL:"",PURCHASE_FROM_LABEL:" ",CUSTOMER_MOBILE_LABEL:" ",CUSTOMER_ADDRESS_LABEL:" ",SUPPLIER_MOBILE_LABEL:" ",SUPPLIER_ADDRESS_LABEL:" ",INVOICE_ITEMS_TABLE_HEADER_PRODUCT:"/",INVOICE_ITEMS_TABLE_HEADER_QTY:"",INVOICE_ITEMS_TABLE_HEADER_UNIT_PRICE:" ",INVOICE_ITEMS_TABLE_HEADER_TOTAL:"",PAID_AMOUNT_LABEL:" ",PAYMENT_HISTORY_LABEL:" ",RECORD_PAYMENT_BTN_LABEL:"  ",RECORD_PAYMENT_RECEIVED_BTN_LABEL:"   ",RECORD_PAYMENT_MADE_BTN_LABEL:"   ",INVOICE_ALREADY_PAID_INFO:" /   ",INVOICE_CANCELLED_NO_PAYMENT:" /      ",PAYMENT_RECORD_FOR_INVOICE_TITLE:"{invoiceNumber}  /   ",PAYMENT_AMOUNT_LABEL:" ",ADD_PAYMENT_BTN_LABEL:"  ",PRINT_INVOICE_BTN:" ",INVOICE_HOME_CARD_SUBTITLE:"        ",TOTAL_INVOICES_COUNT_LABEL:" /",NOTES_LABEL:"",ID_LABEL:"",LOGO_TEXT:"",INVOICE_TYPE_LABEL:" ",INVOICE_TYPE_SALES_LABEL:" ",INVOICE_TYPE_PURCHASE_LABEL:" ",INVOICE_TYPE_SALES_SHORT:"",INVOICE_TYPE_PURCHASE_SHORT:"",PRICE_TYPE_LABEL:" ",PRICE_TYPE_SALES:" ",PRICE_TYPE_MRP:"MRP",PRICE_TYPE_WHOLESALE:" ",PRICE_TYPE_CUSTOM:" ",PRICE_NOT_AVAILABLE:"",INVOICE_NOT_FOUND_ERROR:"   ",FILTER_ALL_INVOICES:" /",FILTER_SALES_INVOICES:" ",FILTER_PURCHASE_BILLS:" ",TOTAL_ITEMS_LABEL:" ",NO_ITEMS_FOR_FILTER:"    /  ",FILTER_ALL_STATUSES:" ",AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE:"  ()",PAYMENT_AMOUNT_INVALID_FOR_PARTIAL:"     ",PARTIAL_PAYMENT_CANT_BE_FULL:"          ",PIN_TO_REMEMBER_AS_DEFAULT:"   ",UNPIN_DEFAULT:" ",DEFAULT_VALUE_PINNED_SUCCESS:"     ",DEFAULT_VALUE_UNPINNED_SUCCESS:"    ",PIN_INVOICE_DATE_DEFAULT:"     ",UNPIN_INVOICE_DATE_DEFAULT:"   ",PIN_DUE_DATE_DEFAULT:"      ",UNPIN_DUE_DATE_DEFAULT:"    ",PIN_COMPANY_PROFILE_DEFAULT:"     ",UNPIN_COMPANY_PROFILE_DEFAULT:"   ",PIN_DISCOUNT_TYPE_DEFAULT:"     ",UNPIN_DISCOUNT_TYPE_DEFAULT:"   ",PIN_TAX_TYPE_DEFAULT:"     ",UNPIN_TAX_TYPE_DEFAULT:"   ",INVOICE_TOTAL_MUST_BE_POSITIVE_ERROR:"       "},Rb={MANAGE_PRODUCTS_MODAL_TITLE:"   ",ADD_NEW_PRODUCT_BTN:"   ",EDIT_PRODUCT_BTN:"  ",DELETE_PRODUCT_BTN:" ",PRODUCT_NAME_LABEL:" ",PRODUCT_DESCRIPTION_LABEL:"  ()",PRODUCT_UNIT_PRICE_LABEL:"  ()",SALES_PRICE_LABEL:"  /   ()",MRP_LABEL:"   (MRP) ()",WHOLESALE_PRICE_LABEL:"  ()",PRODUCT_IMAGE_LABEL:"  ()",UPLOAD_PRODUCT_IMAGE_BTN:"   ",CHANGE_PRODUCT_IMAGE_BTN:"  ",REMOVE_PRODUCT_IMAGE_BTN:" ",PRODUCT_IMAGE_PREVIEW_ALT:"  ",PRODUCT_IMAGE_SIZE_TOO_LARGE:"   512KB     ",PRODUCT_UNIT_LABEL:"",PRODUCT_UNIT_PLACEHOLDER:": , , ",NO_PRODUCTS_FOUND:"     ",CONFIRM_DELETE_PRODUCT_MSG:"      ?      ",PRODUCT_ADDED_SUCCESS:"    ",PRODUCT_UPDATED_SUCCESS:"     ",PRODUCT_DELETED_SUCCESS:"   ",PRODUCT_NAME_REQUIRED:"  ",PRODUCT_EXISTS_ERROR:"     ",SEARCH_PRODUCT_PLACEHOLDER:"   ...",CURRENT_STOCK_LABEL:" ",STOCK_UNIT_LABEL:" ",LOW_STOCK_THRESHOLD_LABEL:"  ",STOCK_HISTORY_LABEL:"  ",INITIAL_STOCK_LABEL:" ",STOCK_ADJUSTMENT_TYPE_INITIAL:" ",STOCK_ADJUSTMENT_TYPE_SALE:"",STOCK_ADJUSTMENT_TYPE_PURCHASE_RECEIVED:" ",STOCK_ADJUSTMENT_TYPE_MANUAL_IN:" ",STOCK_ADJUSTMENT_TYPE_MANUAL_OUT:" ",STOCK_ADJUSTMENT_TYPE_RETURN_CUSTOMER:" ",STOCK_ADJUSTMENT_TYPE_RETURN_SUPPLIER:" ",ADJUST_STOCK_BTN:"  ",LOW_STOCK_ALERT:" !",STOCK_QUANTITY_CHANGE_LABEL:" ",STOCK_ADJUSTMENT_NOTES_LABEL:"  ",STOCK_ADJUSTMENT_SUCCESS:"    ",MANAGE_PRODUCTS_STOCK_NAV_BTN:"  ",PRODUCT_FORM_MODAL_TITLE_ADD:"   ",PRODUCT_FORM_MODAL_TITLE_EDIT:"  ",SAVE_PRODUCT_BTN:"  ",INVALID_UNIT_PRICE_ERROR:"       (   )",INVALID_MRP_ERROR:"    MRP  (   )",INVALID_WHOLESALE_PRICE_ERROR:"       (   )",INVALID_INITIAL_STOCK_ERROR:"        (   )",INVALID_LOW_STOCK_THRESHOLD_ERROR:"         (   )",DEFAULT_UNIT_PIECE:"",STOCK_REPORT_MODAL_TITLE:" ",STOCK_REPORT_NAV_BTN:" ",COLUMN_PRODUCT_NAME:" ",COLUMN_CURRENT_STOCK:" ",COLUMN_STOCK_UNIT:"",COLUMN_LOW_STOCK_THRESHOLD:"  ",COLUMN_STOCK_STATUS:"",STOCK_STATUS_IN_STOCK:" ",STOCK_STATUS_LOW_STOCK:" ",STOCK_STATUS_OUT_OF_STOCK:" ",FILTER_BY_STOCK_STATUS:" ",ALL_PRODUCTS_FILTER:" ",SEARCH_PRODUCTS_PLACEHOLDER:"   ...",NO_PRODUCTS_FOR_REPORT:"     ",SERIAL_NO_COLUMN:" ",COLUMN_COMMITTED_FOR_SALES:" ( )",COLUMN_AVAILABLE_FOR_SALE:"  "},Ob={MANAGE_BANK_ACCOUNTS_MODAL_TITLE:"  ",MANAGE_BANK_ACCOUNTS_NAV_BTN:" ",ADD_NEW_BANK_ACCOUNT_BTN:"    ",EDIT_BANK_ACCOUNT_BTN:"   ",DELETE_BANK_ACCOUNT_BTN:"  ",BANK_ACCOUNT_FORM_MODAL_TITLE_ADD:"  ",BANK_ACCOUNT_FORM_MODAL_TITLE_EDIT:"  ",ACCOUNT_NAME_LABEL:" ",ACCOUNT_NAME_PLACEHOLDER:":  ,  ",ACCOUNT_NUMBER_LABEL:"  ()",ACCOUNT_NUMBER_PLACEHOLDER:" ",BANK_NAME_LABEL:"  ()",BANK_NAME_PLACEHOLDER:":    ",BRANCH_NAME_LABEL:"  ()",BRANCH_NAME_PLACEHOLDER:":  ",ACCOUNT_TYPE_LABEL:" ",INITIAL_BALANCE_LABEL:" ",BALANCE_EFFECTIVE_DATE_LABEL:"   ",CURRENCY_LABEL:"",ACCOUNT_NOTES_LABEL:" ()",ACCOUNT_NOTES_PLACEHOLDER:"   ...",SET_AS_DEFAULT_ACCOUNT_LABEL:"     ",SAVE_BANK_ACCOUNT_BTN:"  ",NO_BANK_ACCOUNTS_FOUND:"      ",CONFIRM_DELETE_BANK_ACCOUNT_MSG:"       ?             ",BANK_ACCOUNT_ADDED_SUCCESS:"     ",BANK_ACCOUNT_UPDATED_SUCCESS:"     ",BANK_ACCOUNT_DELETED_SUCCESS:"    ",BANK_ACCOUNT_SET_AS_DEFAULT_SUCCESS:"{accountName}       ",BANK_ACCOUNT_REMOVED_AS_DEFAULT_SUCCESS:"{accountName}    ",ACCOUNT_TYPE_SAVINGS:" ",ACCOUNT_TYPE_CURRENT:" ",ACCOUNT_TYPE_MOBILE_BANKING:" ",ACCOUNT_TYPE_CARD:" (/)",ACCOUNT_TYPE_CASH_IN_HAND:" ",ACCOUNT_TYPE_OTHER:"",BANK_ACCOUNT_NAME_REQUIRED:"  ",INITIAL_BALANCE_REQUIRED:"  ",BALANCE_EFFECTIVE_DATE_REQUIRED:"    ",SELECT_ACCOUNT_TYPE_PLACEHOLDER:"--     --",SELECT_BANK_ACCOUNT_TRANSACTION_LABEL:"  ()",SELECT_BANK_ACCOUNT_PLACEHOLDER:"--     --",TRANSACTION_LINKED_TO_BANK_ACCOUNT:": {bankAccountName}"},Pb={...bb,...Tb,...yb,...Nb,...vb,...Ab,...Sb,...Cb,...Lb,...wb,...Ib,...Db,...Rb,...Ob},p=Pb,b2="Bengali",Hx=p.APP_TITLE,Mb="shadik.netmow@gmail.com",Bo={model:"gemini-2.5-flash-preview-04-17",temperature:1,topK:64,topP:.95},Tt={TRANSACTIONS:"transactions_v5_api_backed",DEBTS:"debts_v6_api_backed",PERSONS:"persons_v1_api_backed",USER:"currentUser_v3_api_backed",PERSON_LEDGER_ENTRIES:"person_ledger_entries_v1_api_backed",USER_TRANSACTION_SUGGESTIONS:"user_transaction_suggestions_v2_api_backed",BUDGET_CATEGORIES:"budget_categories_v1_api_backed",BUDGETS:"budgets_v1_api_backed",MESSAGES:"messages_v2_api_backed",INVOICES:"invoices_v1_api_backed",PRODUCTS:"products_v1_api_backed",COMPANY_PROFILES:"company_profiles_v1_api_backed",BANK_ACCOUNTS:"bank_accounts_v1_api_backed",REMEMBER_USER:"rememberUserPreference_v1",REMEMBERED_EMAIL_OR_MOBILE:"rememberedEmailOrMobile_v1",REMEMBERED_PASSWORD:"rememberedPassword_v1",EXPENSE_FIELD_REQUIREMENTS:"expense_field_requirements_v1",GLOBAL_PHONETIC_MODE:"global_phonetic_mode_v1",INVOICE_GLOBAL_PRICE_TYPE:"invoice_global_price_type_v1",GEMINI_SETTINGS:"gemini_settings_v1",AI_ASSISTANT_LOGS:"aiAssistantLogs_v1",AI_VOICE_REPLAY_ENABLED:"aiVoiceReplayEnabled_v1",AI_ASSISTANT_SCOPE:"aiAssistantScope_v1",DEFAULT_BANK_ACCOUNT_ID:"defaultBankAccountId_v1",PIN_SALES_INVOICE_PAYMENT_STATUS:"pin_sales_invoice_payment_status_v1",PIN_SALES_INVOICE_DATE:"pin_sales_invoice_date_v1",PIN_SALES_DUE_DATE:"pin_sales_due_date_v1",PIN_SALES_COMPANY_PROFILE:"pin_sales_company_profile_v1",PIN_SALES_DISCOUNT_TYPE:"pin_sales_discount_type_v1",PIN_SALES_TAX_TYPE:"pin_sales_tax_type_v1",PIN_SALES_PAYMENT_METHOD:"pin_sales_payment_method_v1",PIN_SALES_PAYMENT_NOTES:"pin_sales_payment_notes_v1",PIN_SALES_INVOICE_NOTES:"pin_sales_invoice_notes_v1",PIN_PURCHASE_BILL_DATE:"pin_purchase_bill_date_v1",PIN_PURCHASE_DUE_DATE:"pin_purchase_due_date_v1",PIN_PURCHASE_COMPANY_PROFILE:"pin_purchase_company_profile_v1",PIN_PURCHASE_DISCOUNT_TYPE:"pin_purchase_discount_type_v1",PIN_PURCHASE_TAX_TYPE:"pin_purchase_tax_type_v1",INVOICE_COLUMN_VISIBILITY_SALES_V1:"invoiceColumnVisibility_sales_v1",INVOICE_COLUMN_VISIBILITY_PURCHASE_V1:"invoiceColumnVisibility_purchase_v1",INVOICE_ITEM_FONT_SIZE_SALES_V1:"invoiceItemFontSize_sales_v1",INVOICE_ITEM_FONT_SIZE_PURCHASE_V1:"invoiceItemFontSize_purchase_v1"},fh=["  | Salary Received","   | Business Income","  | Freelancing Income","   | Rent Received","  | Bonus Received","  | Commission Received","  () | Gift Received (Money)","  | Award/Prize Money","    | Stock Market Profit","   | Sale of Old Items","//  | bKash/Nagad/Rocket Cash In","   | Bank Withdrawal","   | Dues Recovered","   | Investment Profit"," | Scholarship","  | Consultancy Fee"," | Dividend","  | Government Grant","    | Savings Withdrawal","  | Other Income"],hh=["  | Groceries"," | Rice"," | Lentils","/ | Flour/Wheat"," (/) | Oil (Soybean/Mustard)"," | Salt"," | Sugar"," | Onion"," | Garlic"," | Ginger"," | Potato"," | Tomato"," | Eggplant/Brinjal"," | Bottle Gourd"," | Pumpkin"," | Green Chili","  | Coriander Leaves","  | Other Vegetables"," | Fish","  | Chicken","  | Beef","  | Mutton"," | Eggs"," | Milk"," | Yogurt"," | Cheese"," | Ghee","  | Turmeric Powder","  | Chili Powder","  | Cumin Powder","  | Coriander Powder","  | Garam Masala","  | Other Spices"," (/) | Sauce (Tomato/Chili)"," | Pickle"," | Biscuits"," | Chanachur/Bombay Mix","/ | Cake/Pastry"," | Bread","/ | Noodles/Pasta"," | Chips"," / | Tea Leaves/Coffee","/ | Coca-Cola/Pepsi"," | Juice","  | Mineral Water"," | Baby Food","  | House Rent","  | Electricity Bill","  | Gas Bill","  | Water Bill","  | Internet Bill","/   | Dish/Cable TV Bill","  | Trash/Waste Bill","   | Domestic Help Salary","  | Security Guard Bill","  | House Repair","  | Plumbing Cost","  | Electrical Work","  | Painting","  | Furniture Purchase"," | Refrigerator"," | Television","  | Washing Machine"," | Air Conditioner","/ | Blender/Mixer","/ | Oven/Microwave","   | Other Home Appliances"," () | Beddings (Bed Sheet, Pillow)","  | Curtains","- | Kitchenware/Utensils","   | House Cleaning Supplies (Detergent, Soap)","  | Air Freshener","  / | Mosquito Repellent Coil/Spray","  | Gardening Expense"," (/) | Soap (Body/Face)"," | Shampoo"," | Conditioner"," | Toothpaste"," | Toothbrush","/  | Deodorant/Body Spray","/ | Perfume","  | Makeup Items","  | Skin Care Products"," / | Hair Oil/Serum","  | Shaving Kit"," / | Sanitary Napkin/Tampon","/  | Salon/Beauty Parlor","  | Barber Shop"," | Shirt","/ | Pants/Trousers","- | T-Shirt"," | Panjabi"," | Saree","  | Salwar Kameez"," | Shoes","/ | Sandals/Slippers"," | Socks"," | Underwear"," | Watch","/ | Bag/Purse"," | Jewelry","/  | Eyeglasses/Contact Lens","  | Tailoring Cost","/ | Laundry/Ironing","  | Rickshaw Fare","  | Bus Fare","/  | CNG/Auto Rickshaw Fare","  | Train Ticket","/  | Launch/Steamer Ticket","  | Air Ticket"," // | Car Fuel (Petrol/Diesel)"," / | Car CNG/LPG","  | Motorcycle Fuel","  | Car Servicing","  | Car Repair"," / | Tire Change/Repair","   | Engine Oil Change","  | Car Insurance","  | Parking Fee","  | Toll Payment","  | Driver's Salary","/  | Uber/Pathao Fare","/  | Bicycle/Motorcycle Repair","  | Doctor's Fee","  | Medicine Purchase","/  | Hospital/Clinic Bill","  | Diagnostic Test (Blood Test, X-Ray, Ultrasound)","  | Pathology Test","   | Health Insurance Premium","  | Dentist Fee","  | Eye Specialist Fee"," / | Eyeglasses Purchase/Repair","/  | Vitamins/Supplements","   | First Aid Kit"," | Physiotherapy","  | Ambulance Fare","/  | School/College Fees","  | University Fees","/  | Tuition/Coaching Fees"," | Books","- | Notebooks & Pens","/  | Pencils/Color Pencils","   | Other Stationery","  | School Uniform"," () | Shoes (School)","  | School Bag"," /  | Tiffin Box/Water Bottle","  | Children's Clothing","  | Children's Toys"," | Diapers","   | Baby Wipes","   | School Tiffin Cost","   | Excursion/Study Tour Cost","   | Online Course Fee","  | Library Fee","  | Exam Fee","/  | Hostel/Residential Fee","/  | Movie Ticket","/  | Concert/Drama Ticket","  | Sports Event Ticket"," /  | Theme Park/Amusement Center","  (, ) | Streaming Service (Netflix, Hoichoi)","  () | Book Purchase (Recreational)","/ | Magazine/Comics","/   | Music/Music App Subscription","  | Video Game Purchase/Subscription","  ( , ) | Hobby Supplies (Painting, Music)","  ( /) | Travel/Vacation Cost (Local/International)","/  | Hotel/Resort Bill","   | Tourist Spot Ticket","/   | Gym/Fitness Center Membership","  | Sports Equipment","   | Club Membership Fee","  / | Outing/Food with Friends","  | Family Outing","/  | Cafe/Coffee Shop"," / | Bank Charges/Fees","   | ATM Withdrawal Charge","   | Personal Loan EMI","   | Car Loan EMI","    | Credit Card Bill Payment","   | Life Insurance Premium","   | General Insurance Premium","/  | DPS/Sanchayapatra Installment","   | Stock Market Investment","   | Mutual Fund Investment","  | Income Tax Payment","  | VAT Payment","  | Passport Fee","   | Driving License Fee","   | Trade License Fee","   | Other Government Fees","  | Lawyer Fee","   | Document Preparation Cost","  | Social Contribution/Subscription","//  | Donation to Mosque/Temple/Church","   | Charity Donation","  | Other Donations","//  /  | bKash/Nagad/Rocket Send Money/Cash Out","   | Mobile Banking Charge","  | Birthday Gift","  | Wedding Gift","  | Anniversary Gift","  | Other Gifts"," / | Eid Salami/Gift"," / | Puja Expense/Gift"," / | Christmas Expense/Gift","   | Pohela Boishakh Expense","   | Family Event Hosting","   | Party for Friends","  (/) | Flower Purchase (Gift/Decoration)","  | Greeting Card","  () | Sweets Purchase (Occasional)","   | Pet Food","   | Pet Toys","  / | Pet Grooming","  | Vet Fees","   | Pet Medicine","  / | Pet Bed/Cage","   | Pet Vaccination","  | Mobile Recharge","   () | Mobile Phone Bill (Postpaid)","  (/) | Stationery Items (Office/Home)"," / | Newspaper/Magazine","   | Electronic Gadget Repair","/  | Shoe/Bag Repair","/ / | Software/App Purchase/Subscription","  () | Online Shopping (General)","/  | Courier/Postage Fee","/ | Tips","/ | Fines/Penalties","   | Compensation for Lost Items","/  | Emergency/Unexpected Expense","/ | Photocopy/Print","  | Battery Purchase","   | SIM Card Purchase","/  | Pendrive/Memory Card"," / | Website Domain/Hosting"," () | Subscription (Other)","  () | Membership Fee (Other)"," / | Miscellaneous Taxi/Fare","  | Other Repairs","  | Miscellaneous Drinks","  | Miscellaneous Food","   | Other Personal Expenses","   | Other Transportation Costs","   | Other Household Costs","   | Other Educational Costs","   | Other Office Expenses","   | Miscellaneous Official Expenses","  | Miscellaneous Electronics","  | Miscellaneous Gifts"," | Others"];[...fh,...hh].filter((t,e,n)=>n.indexOf(t)===e).sort((t,e)=>t.localeCompare(e,"bn-BD"));const kb=2*1024*1024,Yx=["image/png","image/jpeg","image/gif"],jb=60*1e3,m0="audio/webm",Bb=["","","","","","","","","","","","","","","","","","","",""],Ub=["","","","","","",""],Fb=512*1024,Wi=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].sort((t,e)=>t.localeCompare(e,"bn-BD")),qx={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""," ":"","":"",:""},Gc={k:"",kh:"",g:"",gh:"",ng:"",c:"",ch:"",Ch:"",chh:"",j:"",jh:"",z:"",NG:"",T:"",Th:"",D:"",Dh:"",N:"",t:"",th:"",d:"",dh:"",n:"",p:"",f:"",ph:"",b:"",bh:"",v:"",m:"",y:"",Y:"",J:"",r:"",R:"",l:"",s:"",S:"",sh:"",Sh:"",h:"",DD:"",DH:"",tt:"",NN:"",HH:"",CN:"",rN:"",o:"",a:"",aa:"",A:"",i:"",ee:"",I:"",u:"",oo:"",U:"",rri:"",e:"",E:"",oi:"",OI:"",O:"",ou:"",OU:"",amar:"",bangla:"",desh:"",taka:"",kemon:"",acchen:"",bhalo:"",dhonnobad:"",groceries:" ",salary:"",bajar:"",khoroch:"",barir:"",bhara:"",pani:"",bill:"",internet:"",mobile:"",recharge:"",jatayat:"",shikkha:"",khabar:"",oshudh:"",biddut:"",poriman:"",electric:"",".":"","?":"?","!":"!"},T2={SAVINGS:" ",CURRENT:" ",MOBILE_BANKING:" ",CARD:" (/)",CASH_IN_HAND:" ",OTHER:""},Vb={BDT:"BDT -  "},Gb={};var B0=null;function Hb(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return Gb.randomBytes(t)}catch{}if(!B0)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return B0(t)}function Yb(t){B0=t}function Np(t,e){if(t=t||vp,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var n=[];return n.push("$2b$"),t<10&&n.push("0"),n.push(t.toString()),n.push("$"),n.push(Ah(Hb(Zd),Zd)),n.join("")}function y2(t,e,n){if(typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof t>"u")t=vp;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function s(r){Fo(function(){try{r(null,Np(t))}catch(l){r(l)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(r,l){s(function(c,d){if(c){l(c);return}r(d)})})}function N2(t,e){if(typeof e>"u"&&(e=vp),typeof e=="number"&&(e=Np(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return U0(t,e)}function v2(t,e,n,s){function r(l){typeof t=="string"&&typeof e=="number"?y2(e,function(c,d){U0(t,d,l,s)}):typeof t=="string"&&typeof e=="string"?U0(t,e,l,s):Fo(l.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(l,c){r(function(d,f){if(d){c(d);return}l(f)})})}function A2(t,e){for(var n=t.length^e.length,s=0;s<t.length;++s)n|=t.charCodeAt(s)^e.charCodeAt(s);return n===0}function qb(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:A2(N2(t,e.substring(0,e.length-31)),e)}function zb(t,e,n,s){function r(l){if(typeof t!="string"||typeof e!="string"){Fo(l.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){Fo(l.bind(this,null,!1));return}v2(t,e.substring(0,29),function(c,d){c?l(c):l(null,A2(d,e))},s)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(l,c){r(function(d,f){if(d){c(d);return}l(f)})})}function $b(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function Wb(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function Kb(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return S2(t)>72}var Fo=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function S2(t){for(var e=0,n=0,s=0;s<t.length;++s)n=t.charCodeAt(s),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(s+1)&64512)===56320?(++s,e+=4):e+=3;return e}function Xb(t){for(var e=0,n,s,r=new Array(S2(t)),l=0,c=t.length;l<c;++l)n=t.charCodeAt(l),n<128?r[e++]=n:n<2048?(r[e++]=n>>6|192,r[e++]=n&63|128):(n&64512)===55296&&((s=t.charCodeAt(l+1))&64512)===56320?(n=65536+((n&1023)<<10)+(s&1023),++l,r[e++]=n>>18|240,r[e++]=n>>12&63|128,r[e++]=n>>6&63|128,r[e++]=n&63|128):(r[e++]=n>>12|224,r[e++]=n>>6&63|128,r[e++]=n&63|128);return r}var Au="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),hc=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Ah(t,e){var n=0,s=[],r,l;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;n<e;){if(r=t[n++]&255,s.push(Au[r>>2&63]),r=(r&3)<<4,n>=e){s.push(Au[r&63]);break}if(l=t[n++]&255,r|=l>>4&15,s.push(Au[r&63]),r=(l&15)<<2,n>=e){s.push(Au[r&63]);break}l=t[n++]&255,r|=l>>6&3,s.push(Au[r&63]),s.push(Au[l&63])}return s.join("")}function C2(t,e){var n=0,s=t.length,r=0,l=[],c,d,f,h,_,b;if(e<=0)throw Error("Illegal len: "+e);for(;n<s-1&&r<e&&(b=t.charCodeAt(n++),c=b<hc.length?hc[b]:-1,b=t.charCodeAt(n++),d=b<hc.length?hc[b]:-1,!(c==-1||d==-1||(_=c<<2>>>0,_|=(d&48)>>4,l.push(String.fromCharCode(_)),++r>=e||n>=s)||(b=t.charCodeAt(n++),f=b<hc.length?hc[b]:-1,f==-1)||(_=(d&15)<<4>>>0,_|=(f&60)>>2,l.push(String.fromCharCode(_)),++r>=e||n>=s)));)b=t.charCodeAt(n++),h=b<hc.length?hc[b]:-1,_=(f&3)<<6>>>0,_|=h,l.push(String.fromCharCode(_)),++r;var v=[];for(n=0;n<r;n++)v.push(l[n].charCodeAt(0));return v}var Zd=16,vp=10,Jb=16,Zb=100,zx=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],$x=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],L2=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Qd(t,e,n,s){var r,l=t[e],c=t[e+1];return l^=n[0],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[1],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[2],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[3],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[4],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[5],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[6],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[7],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[8],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[9],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[10],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[11],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[12],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[13],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[14],r=s[l>>>24],r+=s[256|l>>16&255],r^=s[512|l>>8&255],r+=s[768|l&255],c^=r^n[15],r=s[c>>>24],r+=s[256|c>>16&255],r^=s[512|c>>8&255],r+=s[768|c&255],l^=r^n[16],t[e]=c^n[Jb+1],t[e+1]=l,t}function Iu(t,e){for(var n=0,s=0;n<4;++n)s=s<<8|t[e]&255,e=(e+1)%t.length;return{key:s,offp:e}}function Wx(t,e,n){for(var s=0,r=[0,0],l=e.length,c=n.length,d,f=0;f<l;f++)d=Iu(t,s),s=d.offp,e[f]=e[f]^d.key;for(f=0;f<l;f+=2)r=Qd(r,0,e,n),e[f]=r[0],e[f+1]=r[1];for(f=0;f<c;f+=2)r=Qd(r,0,e,n),n[f]=r[0],n[f+1]=r[1]}function Qb(t,e,n,s){for(var r=0,l=[0,0],c=n.length,d=s.length,f,h=0;h<c;h++)f=Iu(e,r),r=f.offp,n[h]=n[h]^f.key;for(r=0,h=0;h<c;h+=2)f=Iu(t,r),r=f.offp,l[0]^=f.key,f=Iu(t,r),r=f.offp,l[1]^=f.key,l=Qd(l,0,n,s),n[h]=l[0],n[h+1]=l[1];for(h=0;h<d;h+=2)f=Iu(t,r),r=f.offp,l[0]^=f.key,f=Iu(t,r),r=f.offp,l[1]^=f.key,l=Qd(l,0,n,s),s[h]=l[0],s[h+1]=l[1]}function Kx(t,e,n,s,r){var l=L2.slice(),c=l.length,d;if(n<4||n>31)if(d=Error("Illegal number of rounds (4-31): "+n),s){Fo(s.bind(this,d));return}else throw d;if(e.length!==Zd)if(d=Error("Illegal salt length: "+e.length+" != "+Zd),s){Fo(s.bind(this,d));return}else throw d;n=1<<n>>>0;var f,h,_=0,b;typeof Int32Array=="function"?(f=new Int32Array(zx),h=new Int32Array($x)):(f=zx.slice(),h=$x.slice()),Qb(e,t,f,h);function v(){if(r&&r(_/n),_<n)for(var C=Date.now();_<n&&(_=_+1,Wx(t,f,h),Wx(e,f,h),!(Date.now()-C>Zb)););else{for(_=0;_<64;_++)for(b=0;b<c>>1;b++)Qd(l,b<<1,f,h);var L=[];for(_=0;_<c;_++)L.push((l[_]>>24&255)>>>0),L.push((l[_]>>16&255)>>>0),L.push((l[_]>>8&255)>>>0),L.push((l[_]&255)>>>0);if(s){s(null,L);return}else return L}s&&Fo(v)}if(typeof s<"u")v();else for(var y;;)if(typeof(y=v())<"u")return y||[]}function U0(t,e,n,s){var r;if(typeof t!="string"||typeof e!="string")if(r=Error("Invalid string / salt: Not a string"),n){Fo(n.bind(this,r));return}else throw r;var l,c;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(r=Error("Invalid salt version: "+e.substring(0,2)),n){Fo(n.bind(this,r));return}else throw r;if(e.charAt(2)==="$")l="\0",c=3;else{if(l=e.charAt(2),l!=="a"&&l!=="b"&&l!=="y"||e.charAt(3)!=="$")if(r=Error("Invalid salt revision: "+e.substring(2,4)),n){Fo(n.bind(this,r));return}else throw r;c=4}if(e.charAt(c+2)>"$")if(r=Error("Missing salt rounds"),n){Fo(n.bind(this,r));return}else throw r;var d=parseInt(e.substring(c,c+1),10)*10,f=parseInt(e.substring(c+1,c+2),10),h=d+f,_=e.substring(c+3,c+25);t+=l>="a"?"\0":"";var b=Xb(t),v=C2(_,Zd);function y(C){var L=[];return L.push("$2"),l>="a"&&L.push(l),L.push("$"),h<10&&L.push("0"),L.push(h.toString()),L.push("$"),L.push(Ah(v,v.length)),L.push(Ah(C,L2.length*4-1)),L.join("")}if(typeof n>"u")return y(Kx(b,v,h));Kx(b,v,h,function(C,L){C?n(C,null):n(null,y(L))},s)}function eT(t,e){return Ah(t,e)}function tT(t,e){return C2(t,e)}const ef={setRandomFallback:Yb,genSaltSync:Np,genSalt:y2,hashSync:N2,hash:v2,compareSync:qb,compare:zb,getRounds:$b,getSalt:Wb,truncates:Kb,encodeBase64:eT,decodeBase64:tT},Xx="https://live.medha4u.com/",nT="DzhIpz0ALDkOKCx6Bqvg4RYNgrwQWpyk";async function Xi(t){var e;try{const n=await fetch(Xx,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${nT}`},body:JSON.stringify(t)}),s=await n.json();if(!n.ok||s.success===!1){console.error("API Request Failed. Status:",n.status,n.statusText,`
Backend Response:`,JSON.stringify(s,null,2),`
Original Payload:`,JSON.stringify(t,null,2));let r=s.error||`API request failed with status ${n.status}.`;throw s.success===!1&&!s.error&&(r+=" The backend indicated failure but did not provide a specific error message. Check backend logs and ensure the backend's JSON response includes an 'error' field on failure."),t.method==="tableCreate"&&s.sql&&(r+=` Attempted SQL: ${s.sql||"N/A"}`),t.method==="requestPasswordReset"&&((e=s.error)!=null&&e.includes("User not found")),new Error(r)}return s}catch(n){throw console.error("Exception during API Request. Error:",n,`
Original Payload:`,JSON.stringify(t,null,2)),n instanceof TypeError&&n.message==="Failed to fetch"?new Error(`Network error: Failed to fetch from API (${Xx}). Check API server status and CORS configuration.`):n}}async function sT(t,e,n="utf8mb4"){return Xi({method:"tableCreate",table:t,columns:e,charset:n})}const Sh={users:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"name",type:"VARCHAR(255)",options:"NOT NULL"},{name:"email",type:"VARCHAR(255)",options:"NOT NULL UNIQUE"},{name:"mobileNumber",type:"VARCHAR(255)",options:"NULL UNIQUE"},{name:"facebookProfileUrl",type:"TEXT",options:"NULL"},{name:"hashed_password",type:"VARCHAR(255)",options:"NOT NULL"},{name:"created_at",type:"TIMESTAMP",options:"DEFAULT CURRENT_TIMESTAMP"},{name:"reset_code",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"reset_token_expiry",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"enableSchemaCheckOnStartup",type:"INTEGER",options:"DEFAULT 1"},{name:"enableDataFetchOnStartup",type:"INTEGER",options:"DEFAULT 1"},{name:"defaultSalesPaymentStatus",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesInvoiceDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultSalesDueDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultSalesCompanyProfileId",type:"VARCHAR(255)",options:"NULL DEFAULT NULL"},{name:"defaultSalesDiscountType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesDiscountValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultSalesTaxType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesTaxValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultSalesPaymentMethod",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesPaymentNotes",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultSalesInvoiceNotes",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseBillDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseDueDateOffset",type:"INTEGER",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseCompanyProfileId",type:"VARCHAR(255)",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseDiscountType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseDiscountValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseTaxType",type:"TEXT",options:"NULL DEFAULT NULL"},{name:"defaultPurchaseTaxValue",type:"REAL",options:"NULL DEFAULT NULL"},{name:"defaultBankAccountId",type:"VARCHAR(255)",options:"NULL DEFAULT NULL"}],company_profiles:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"companyName",type:"TEXT",options:"NOT NULL"},{name:"address",type:"TEXT",options:"NULL"},{name:"phone",type:"TEXT",options:"NULL"},{name:"email",type:"TEXT",options:"NULL"},{name:"logoBase64",type:"MEDIUMTEXT",options:"NULL"},{name:"taxId",type:"TEXT",options:"NULL"},{name:"isDefault",type:"INTEGER",options:"DEFAULT 0"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"}],transactions:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"date",type:"TEXT"},{name:"description",type:"TEXT"},{name:"amount",type:"REAL"},{name:"type",type:"TEXT"},{name:"originalDate",type:"TEXT"},{name:"lastModified",type:"TEXT"},{name:"editHistory",type:"MEDIUMTEXT"},{name:"linkedLedgerEntryId",type:"TEXT"},{name:"bankAccountId",type:"TEXT",options:"NULL"},{name:"bankAccountName",type:"TEXT",options:"NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"}],persons:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"name",type:"TEXT"},{name:"customAlias",type:"TEXT",options:"NULL"},{name:"mobileNumber",type:"TEXT"},{name:"address",type:"TEXT"},{name:"shopName",type:"TEXT"},{name:"email",type:"TEXT",options:"NULL"},{name:"profileImage",type:"MEDIUMTEXT",options:"NULL"},{name:"systemUserId",type:"VARCHAR(255)",options:"NULL"},{name:"createdAt",type:"TEXT"},{name:"lastModified",type:"TEXT"},{name:"editHistory",type:"MEDIUMTEXT"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"}],debts:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"personId",type:"TEXT"},{name:"originalAmount",type:"REAL"},{name:"remainingAmount",type:"REAL"},{name:"description",type:"TEXT"},{name:"type",type:"TEXT"},{name:"dueDate",type:"TEXT"},{name:"isSettled",type:"INTEGER"},{name:"creationDate",type:"TEXT"},{name:"settledDate",type:"TEXT"},{name:"lastModified",type:"TEXT"},{name:"editHistory",type:"MEDIUMTEXT"}],person_ledger_entries:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"personId",type:"TEXT"},{name:"date",type:"TEXT"},{name:"type",type:"TEXT"},{name:"amount",type:"REAL"},{name:"description",type:"TEXT"},{name:"balanceAfterEntry",type:"REAL"}],user_transaction_suggestions:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"text",type:"TEXT",options:"NOT NULL"},{name:"type",type:"TEXT",options:"NOT NULL"}],budgetCategories:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"name",type:"TEXT",options:"NOT NULL"},{name:"associatedSuggestions",type:"TEXT"},{name:"createdAt",type:"TEXT"},{name:"lastModified",type:"TEXT"}],budgets:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"categoryId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"amount",type:"REAL",options:"NOT NULL"},{name:"period",type:"TEXT",options:"NOT NULL"},{name:"startDate",type:"TEXT",options:"NOT NULL"},{name:"endDate",type:"TEXT",options:"NOT NULL"},{name:"createdAt",type:"TEXT"},{name:"lastModified",type:"TEXT"}],messages:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"threadId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"actualSenderId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"actualReceiverId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"content",type:"TEXT",options:"NOT NULL"},{name:"imageContent",type:"MEDIUMTEXT",options:"NULL"},{name:"audioContent",type:"MEDIUMTEXT",options:"NULL"},{name:"timestamp",type:"TEXT",options:"NOT NULL"},{name:"isRead",type:"INTEGER",options:"NOT NULL DEFAULT 0"},{name:"reactions",type:"TEXT",options:"NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"},{name:"editHistory",type:"MEDIUMTEXT",options:"NULL"}],invoices:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"invoiceNumber",type:"VARCHAR(255)",options:"NOT NULL"},{name:"invoiceType",type:"TEXT",options:"NOT NULL"},{name:"invoiceDate",type:"TEXT",options:"NOT NULL"},{name:"dueDate",type:"TEXT"},{name:"personId",type:"VARCHAR(255)",options:"NOT NULL"},{name:"companyProfileId",type:"VARCHAR(255)",options:"NULL"},{name:"items",type:"MEDIUMTEXT",options:"NOT NULL"},{name:"subtotal",type:"REAL",options:"NOT NULL"},{name:"discountType",type:"TEXT"},{name:"discountValue",type:"REAL"},{name:"discountAmount",type:"REAL"},{name:"taxType",type:"TEXT"},{name:"taxValue",type:"REAL"},{name:"taxAmount",type:"REAL"},{name:"totalAmount",type:"REAL",options:"NOT NULL"},{name:"notes",type:"TEXT"},{name:"paymentStatus",type:"TEXT",options:"NOT NULL"},{name:"paymentsReceived",type:"MEDIUMTEXT",options:"NULL"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"editHistory",type:"MEDIUMTEXT"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT"}],products:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"name",type:"TEXT",options:"NOT NULL"},{name:"description",type:"TEXT",options:"NULL"},{name:"unitPrice",type:"REAL",options:"NULL"},{name:"unit",type:"TEXT",options:"NULL"},{name:"productImage",type:"MEDIUMTEXT",options:"NULL"},{name:"mrp",type:"REAL",options:"NULL"},{name:"wholesalePrice",type:"REAL",options:"NULL"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"},{name:"currentStock",type:"REAL",options:"DEFAULT 0"},{name:"stockUnit",type:"TEXT",options:"NULL"},{name:"lowStockThreshold",type:"REAL",options:"DEFAULT 0"},{name:"stockHistory",type:"MEDIUMTEXT",options:"NULL"}],bank_accounts:[{name:"id",type:"VARCHAR(255)",options:"PRIMARY KEY"},{name:"user_id",type:"VARCHAR(255)",options:"NOT NULL"},{name:"accountName",type:"TEXT",options:"NOT NULL"},{name:"accountNumber",type:"TEXT",options:"NULL"},{name:"bankName",type:"TEXT",options:"NULL"},{name:"branchName",type:"TEXT",options:"NULL"},{name:"accountType",type:"TEXT",options:"NOT NULL"},{name:"initialBalance",type:"REAL",options:"NOT NULL DEFAULT 0"},{name:"balanceEffectiveDate",type:"TEXT",options:"NOT NULL"},{name:"currency",type:"TEXT",options:"NOT NULL"},{name:"notes",type:"TEXT",options:"NULL"},{name:"isDefault",type:"INTEGER",options:"DEFAULT 0"},{name:"createdAt",type:"TEXT",options:"NOT NULL"},{name:"lastModified",type:"TEXT",options:"NOT NULL"},{name:"isDeleted",type:"INTEGER",options:"DEFAULT 0"},{name:"deletedAt",type:"TEXT",options:"NULL"},{name:"editHistory",type:"MEDIUMTEXT",options:"NULL"}]};function aT(t,e){const{userId:n,...s}=t;return{...s,user_id:e}}function w2(t,e){return`user_id = '${e.replace(/'/g,"''")}' AND (${t})`}function I2(t){const e={...t};return e.hasOwnProperty("userId")&&delete e.userId,["editHistory","associatedSuggestions","imageContent","audioContent","reactions","items","paymentsReceived","logoBase64","stockHistory","productImage"].forEach(c=>{e[c]&&(Array.isArray(e[c])||typeof e[c]=="object")?e[c]=JSON.stringify(e[c]):e[c]===void 0&&(c==="items"||c==="paymentsReceived"||c==="editHistory"||c==="associatedSuggestions"||c==="stockHistory")&&(e[c]=JSON.stringify([]))}),["isSettled","isDeleted","isRead","isDefault","enableSchemaCheckOnStartup","enableDataFetchOnStartup"].forEach(c=>{typeof e[c]=="boolean"?e[c]=e[c]?1:0:e[c]===void 0&&(c==="enableSchemaCheckOnStartup"||c==="enableDataFetchOnStartup")&&(e[c]=1)}),["customAlias","systemUserId","profileImage","productImage","email","facebookProfileUrl","deletedAt","linkedLedgerEntryId","originalDate","dueDate","settledDate","reset_code","reset_token_expiry","defaultSalesPaymentStatus","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesCompanyProfileId","defaultSalesDiscountType","defaultSalesDiscountValue","defaultSalesTaxType","defaultSalesTaxValue","defaultSalesPaymentMethod","defaultSalesPaymentNotes","defaultSalesInvoiceNotes","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseCompanyProfileId","defaultPurchaseDiscountType","defaultPurchaseDiscountValue","defaultPurchaseTaxType","defaultPurchaseTaxValue","defaultBankAccountId","imageContent","audioContent","reactions","editHistory","discountType","discountValue","discountAmount","taxType","taxValue","taxAmount","notes","paymentsReceived","description","unitPrice","unit","address","phone","logoBase64","taxId","companyProfileId","stockUnit","lowStockThreshold","stockHistory","mrp","wholesalePrice","accountNumber","bankName","branchName","bankAccountId","bankAccountName"].forEach(c=>{e.hasOwnProperty(c)&&e[c]===void 0&&(c==="paymentsReceived"||c==="items"||c==="editHistory"||c==="associatedSuggestions"||c==="stockHistory"?e[c]=JSON.stringify([]):(typeof c=="string"&&(String(c).endsWith("Value")||String(c).endsWith("Offset")||c==="defaultSalesPaymentMethod"||c==="defaultSalesPaymentNotes"||c==="defaultSalesInvoiceNotes")&&e[c],e[c]=null))}),["currentStock","lowStockThreshold","initialBalance"].forEach(c=>{e[c]===void 0&&(e[c]=0)}),e}function D2(t){const e={...t};return e.user_id&&!e.userId&&(e.userId=e.user_id,delete e.user_id),["editHistory","associatedSuggestions","imageContent","audioContent","reactions","items","paymentsReceived","logoBase64","stockHistory","productImage"].forEach(c=>{if(e[c]&&typeof e[c]=="string")try{e[c]=JSON.parse(e[c])}catch(d){console.error(`Failed to parse ${c} for item:`,t,d.message),c==="imageContent"||c==="reactions"||c==="audioContent"||c==="logoBase64"||c==="productImage"?e[c]=void 0:e[c]=[]}else(e[c]===null||e[c]===void 0)&&(c==="editHistory"||c==="associatedSuggestions"||c==="items"||c==="paymentsReceived"||c==="stockHistory"?e[c]=[]:(c==="imageContent"||c==="reactions"||c==="audioContent"||c==="logoBase64"||c==="productImage")&&(e[c]=void 0))}),["isSettled","isDeleted","isRead","isDefault","enableSchemaCheckOnStartup","enableDataFetchOnStartup"].forEach(c=>{e[c]!==void 0&&e[c]!==null?e[c]=!!Number(e[c]):(c==="enableSchemaCheckOnStartup"||c==="enableDataFetchOnStartup")&&(e[c]=!0)}),e.paymentsReceived&&Array.isArray(e.paymentsReceived)&&(e.paymentsReceived=e.paymentsReceived.map(c=>{const d=parseFloat(c.amount);return{...c,amount:isNaN(d)?0:d}})),e.items&&Array.isArray(e.items)&&(e.items=e.items.map(c=>{const d=parseFloat(c.quantity),f=parseFloat(c.unitPrice),h=parseFloat(c.total);return{...c,quantity:isNaN(d)?0:d,unitPrice:isNaN(f)?0:f,total:isNaN(h)?0:h}})),["amount","originalAmount","remainingAmount","balanceAfterEntry","subtotal","discountValue","discountAmount","taxValue","taxAmount","totalAmount","unitPrice","mrp","wholesalePrice","currentStock","lowStockThreshold","initialBalance","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesDiscountValue","defaultSalesTaxValue","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseDiscountValue","defaultPurchaseTaxValue"].forEach(c=>{if(e[c]!==void 0&&e[c]!==null){const d=parseFloat(e[c]);isNaN(d)?["unitPrice","mrp","wholesalePrice","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesDiscountValue","defaultSalesTaxValue","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseDiscountValue","defaultPurchaseTaxValue"].includes(c)?e[c]=void 0:e[c]=0:e[c]=d}else["currentStock","lowStockThreshold","initialBalance"].includes(c)?e[c]=0:["unitPrice","mrp","wholesalePrice","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesDiscountValue","defaultSalesTaxValue","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseDiscountValue","defaultPurchaseTaxValue"].includes(c)?e[c]=void 0:e[c]=0}),["customAlias","systemUserId","profileImage","productImage","email","facebookProfileUrl","defaultSalesPaymentStatus","defaultSalesInvoiceDateOffset","defaultSalesDueDateOffset","defaultSalesCompanyProfileId","defaultSalesDiscountType","defaultSalesDiscountValue","defaultSalesTaxType","defaultSalesTaxValue","defaultSalesPaymentMethod","defaultSalesPaymentNotes","defaultSalesInvoiceNotes","defaultPurchaseBillDateOffset","defaultPurchaseDueDateOffset","defaultPurchaseCompanyProfileId","defaultPurchaseDiscountType","defaultPurchaseDiscountValue","defaultPurchaseTaxType","defaultPurchaseTaxValue","defaultBankAccountId","deletedAt","linkedLedgerEntryId","originalDate","dueDate","settledDate","reset_code","reset_token_expiry","imageContent","audioContent","reactions","editHistory","discountType","discountValue","discountAmount","taxType","taxValue","taxAmount","notes","items","paymentsReceived","description","unitPrice","unit","address","phone","logoBase64","taxId","companyProfileId","stockUnit","stockHistory","mrp","wholesalePrice","accountNumber","bankName","branchName","bankAccountId","bankAccountName"].forEach(c=>{e[c]===null&&(c==="editHistory"||c==="items"||c==="paymentsReceived"||c==="associatedSuggestions"||c==="stockHistory"?e[c]=[]:(String(c).endsWith("Value")||String(c).endsWith("Offset")||["unitPrice","logoBase64","stockUnit","productImage","mrp","wholesalePrice","defaultSalesPaymentMethod","defaultSalesPaymentNotes","defaultSalesInvoiceNotes"].includes(c),e[c]=void 0))}),e.hasOwnProperty("stockUnit")&&(e.stockUnit===void 0||e.stockUnit===null)&&(e.stockUnit=""),!e.hasOwnProperty("stockUnit")&&t.hasOwnProperty("name")&&(e.stockUnit=""),e}async function ri(t,e,n="1",s=!1){if(!e&&t!=="users")throw new Error("User ID context required for fetching records from non-user tables.");let r=t==="users"?n:w2(n,e);["transactions","persons","invoices","products","company_profiles","bank_accounts"].includes(t)&&!s&&(r=`${r} AND (isDeleted IS NULL OR isDeleted = 0)`);const c=await Xi({method:"tableFetch",table:t,where:r});return c.success&&c.data&&Array.isArray(c.data)?c.data.map(d=>D2(d)):[]}async function Du(t,e,n){let s=n;if(t!=="users"){if(!e)throw new Error("User ID context required for inserting records into non-user tables.");s=aT(s,e)}let r=I2(s);const l=Sh[t];if(l){const c=new Set(l.map(f=>f.name.toLowerCase())),d={};for(const f in r)c.has(f.toLowerCase())&&(d[f]=r[f]);r=d}else console.warn(`Schema not found for table ${t} in apiService.insertRecord. Sending all processed fields.`);if((t==="messages"||t==="invoices"||t==="transactions"||t==="persons"||t==="debts"||t==="bank_accounts")&&!r.editHistory){const c={isDeleted:!1};let d=new Date().toISOString();t==="transactions"?(c.date=r.date,c.description=r.description,c.amount=r.amount,c.type=r.type,c.bankAccountId=r.bankAccountId,c.bankAccountName=r.bankAccountName,d=r.lastModified||r.date||d):t==="persons"?(c.name=r.name,c.mobileNumber=r.mobileNumber,c.email=r.email,d=r.lastModified||r.createdAt||d):t==="debts"?(c.personId=r.personId,c.originalAmount=r.originalAmount,c.remainingAmount=r.remainingAmount,c.type=r.type,c.isSettled=r.isSettled,c.creationDate=r.creationDate,d=r.lastModified||r.creationDate||d):t==="messages"?(c.content=r.content,c.imageContent=r.imageContent?JSON.parse(r.imageContent):void 0,c.audioContent=r.audioContent?JSON.parse(r.audioContent):void 0,d=r.timestamp||d):t==="invoices"?(c.invoiceNumber=r.invoiceNumber,c.invoiceType=r.invoiceType,c.invoiceDate=r.invoiceDate,c.dueDate=r.dueDate,c.personId=r.personId,c.companyProfileId=r.companyProfileId,c.items=r.items?JSON.parse(r.items):[],c.subtotal=r.subtotal,c.totalAmount=r.totalAmount,c.paymentStatus=r.paymentStatus,c.paymentsReceived=r.paymentsReceived?JSON.parse(r.paymentsReceived):[],d=r.lastModified||r.createdAt||d):t==="bank_accounts"&&(c.accountName=r.accountName,c.accountType=r.accountType,c.initialBalance=r.initialBalance,c.balanceEffectiveDate=r.balanceEffectiveDate,c.isDefault=r.isDefault,c.currency=r.currency,d=r.lastModified||r.createdAt||d);const f={timestamp:d,action:"created",userId:e,snapshot:c};r.editHistory=JSON.stringify([f])}return Xi({method:"tableInsert",table:t,fields:r})}async function gi(t,e,n,s){if(!e&&t!=="users")throw new Error("User ID context required for updating records in non-user tables.");let r=I2(n);const l=Sh[t];if(l){const d=new Set(l.map(h=>h.name.toLowerCase())),f={};for(const h in r)d.has(h.toLowerCase())&&(f[h]=r[h]);r=f}else console.warn(`Schema not found for table ${t} in apiService.updateRecord. Sending all processed fields.`);const c=t==="users"?s:w2(s,e);return Xi({method:"tableUpdate",table:t,fields:r,where:c})}async function rT(t){if(!t)throw new Error("User ID required for fetching suggestions.");const e="user_transaction_suggestions";try{return await ri(e,t,"1")}catch(n){return console.warn(`Could not fetch suggestions for user ${t}. Error: ${n.message}`),[]}}let p0="pending";async function iT(){console.log("Starting shared table initialization and schema check..."),p0="pending";const t=[];for(const e in Sh){const n=Sh[e],s=(async()=>{var r,l;try{const c=await sT(e,n);if(console.log(`Shared table ${e} creation/check response: SQL: ${c.sql||"N/A"}, Success: ${c.success}, MySQL Error: ${c.error||"N/A"}`),c.success===!1&&!((r=c.error)!=null&&r.toLowerCase().includes("already exists")||(l=c.error)!=null&&l.toLowerCase().includes("table exist")))throw new Error(c.error||`Backend reported failure for table ${e}. SQL: ${c.sql||"N/A"}`);const d=await Xi({method:"describeTable",table:e});if(!d.success||!Array.isArray(d.structure))throw console.warn(`Could not describe table '${e}'. Skipping column check. Response:`,d),new Error(`Failed to describe table '${e}'. Cannot verify or add columns.`);const f=d.structure.map(h=>h.Field.toLowerCase());for(const h of n)if(!f.includes(h.name.toLowerCase())){console.log(`Column '${h.name}' missing in table '${e}'. Attempting to add.`);const _=await Xi({method:"columnAdd",table:e,column:{name:h.name,type:h.type,options:h.options||""}});if(console.log(`Add column '${h.name}' to '${e}': Success: ${_.success}, SQL: ${_.sql||"N/A"}, Error: ${_.error||"N/A"}`),_.success===!1){if(console.warn(`Failed to add column '${h.name}' to table '${e}'. Error: ${_.error}. This might cause issues.`),(e==="transactions"||e==="persons"||e==="debts"||e==="messages"||e==="invoices"||e==="company_profiles"||e==="products"||e==="bank_accounts")&&(h.name==="editHistory"||h.name==="logoBase64"||h.name==="stockHistory"||h.name==="productImage"))throw new Error(`Critical column '${h.name}' (MEDIUMTEXT) could not be added to '${e}'.`);if(e==="persons"&&(h.name==="profileImage"||h.name==="email"||h.name==="customAlias"||h.name==="systemUserId"))throw new Error(`Critical column '${h.name}' could not be added to 'persons' table.`);if(e==="users"&&(h.name==="reset_code"||h.name==="reset_token_expiry"||h.name.startsWith("defaultSales")||h.name.startsWith("defaultPurchase")||h.name==="defaultBankAccountId"))throw new Error(`Critical column '${h.name}' could not be added to 'users' table.`);if(e==="users"&&h.name==="mobileNumber")throw new Error("Critical column 'mobileNumber' could not be added to 'users' table.");if(e==="users"&&h.name==="facebookProfileUrl")throw new Error("Critical column 'facebookProfileUrl' could not be added to 'users' table.");if(e==="messages"&&(h.name==="threadId"||h.name==="actualSenderId"||h.name==="actualReceiverId"||h.name==="imageContent"||h.name==="reactions"||h.name==="audioContent"||h.name==="isDeleted"||h.name==="deletedAt"))throw new Error(`Critical column '${h.name}' could not be added to 'messages' table.`);if(e==="invoices"&&(h.name==="items"||h.name==="paymentsReceived"||h.name==="companyProfileId"||h.name==="invoiceType"))throw new Error(`Critical column '${h.name}' could not be added to 'invoices' table.`);if(e==="products"&&(h.name==="currentStock"||h.name==="stockUnit"||h.name==="lowStockThreshold"||h.name==="stockHistory"||h.name==="productImage"||h.name==="mrp"||h.name==="wholesalePrice"))throw new Error(`Critical column '${h.name}' could not be added to 'products' table.`);if(e==="transactions"&&(h.name==="bankAccountId"||h.name==="bankAccountName"))throw new Error(`Critical column '${h.name}' could not be added to 'transactions' table.`)}}}catch(c){throw console.error(`Error processing table '${e}':`,c.message),new Error(`Setup failed for table '${e}': ${c.message}`)}})();t.push(s)}try{await Promise.all(t),p0="success",console.log("All shared table initializations and alterations successfully completed or reported success by backend.")}catch(e){throw p0="failed",console.error("One or more shared table initializations/alterations failed:",e),e}}async function oT(t){if(!t||!t.trim())return null;const e=t.trim();try{const n=await Xi({method:"tableFetch",table:"users",where:`mobileNumber = '${e.replace(/'/g,"''")}'`});if(n.success&&n.data&&Array.isArray(n.data)&&n.data.length>0){const s=D2(n.data[0]);return{id:s.id,name:s.name,email:s.email,mobileNumber:s.mobileNumber}}return null}catch(n){return console.error(`Error fetching user by mobile ${e}:`,n.message),null}}const Ap=10,lT=async(t,e,n)=>{const s=e.toLowerCase();try{const r=await ri("users",s,`email = '${s.replace(/'/g,"''")}'`);if(r&&r.length>0)throw new Error(p.AUTH_ERROR_EMAIL_EXISTS);const l=await ef.hash(n,Ap),d={id:"user_"+Date.now().toString()+Math.random().toString(36).substring(2,9),name:t,email:s,hashed_password:l,enableSchemaCheckOnStartup:!0,enableDataFetchOnStartup:!0},f=await Du("users",s,d);if(f.success)return{id:d.id,name:d.name,email:d.email,enableSchemaCheckOnStartup:!0,enableDataFetchOnStartup:!0};throw typeof f.error=="string"&&(f.error.includes("Duplicate entry")&&f.error.toLowerCase().includes("for key")&&f.error.toLowerCase().includes("email")||f.error.includes("1062"))?new Error(p.AUTH_ERROR_EMAIL_EXISTS):new Error(f.error||"User registration failed via tableInsert.")}catch(r){throw r.message===p.AUTH_ERROR_EMAIL_EXISTS?r:typeof r.message=="string"&&(r.message.includes("Duplicate entry")&&r.message.toLowerCase().includes("for key")&&r.message.toLowerCase().includes("email")||r.message.includes("1062"))?new Error(p.AUTH_ERROR_EMAIL_EXISTS):new Error(r.message||p.AUTH_ERROR_GENERAL)}},Jx=async(t,e)=>{const n=t.includes("@")?t.toLowerCase():t;t.includes("@")?`${n.replace(/'/g,"''")}`:`${t.replace(/'/g,"''")}`;const r=n.replace(/'/g,"''"),l=t.replace(/'/g,"''"),c=`(email = '${r}' OR mobileNumber = '${l}')`;try{const d=await ri("users",t,c);if(!d||d.length===0)throw new Error(p.AUTH_ERROR_INVALID_CREDENTIALS);const f=d[0];if(!f.hashed_password)throw new Error(p.AUTH_ERROR_GENERAL+" (User data incomplete)");if(await ef.compare(e,f.hashed_password)){const{hashed_password:_,...b}=f;return b}else throw new Error(p.AUTH_ERROR_INVALID_CREDENTIALS)}catch(d){throw d.message===p.AUTH_ERROR_INVALID_CREDENTIALS||d.message.includes(p.AUTH_ERROR_GENERAL)?d:new Error(p.AUTH_ERROR_INVALID_CREDENTIALS)}},cT=async t=>{const e=t.toLowerCase();try{const n=await Xi({method:"tableFetch",table:"users",where:`email='${e.replace(/'/g,"''")}'`});return n.success&&Array.isArray(n.data)&&n.data.length>0}catch{return!1}},uT=async(t,e)=>{const n=t.toLowerCase(),s=new Date(Date.now()+10*60*1e3);try{const r=await Xi({method:"tableUpdate",table:"users",fields:{reset_code:e,reset_token_expiry:s.toISOString()},where:`email='${n.replace(/'/g,"''")}'`});if(!r.success)throw new Error(r.error||"Failed to store reset code.")}catch(r){throw new Error(r.message||"Failed to store reset code due to an unexpected issue.")}},dT=async(t,e)=>{const n=p.RESET_CODE_EMAIL_SUBJECT,s=p.RESET_CODE_EMAIL_MESSAGE_HTML.replace("{CODE}",e).replace("{APP_TITLE}",Hx),r=`From: "${Hx}" <no-reply@medha4u.com>\r
Content-Type: text/html; charset=UTF-8\r
MIME-Version: 1.0`;try{const l=await Xi({method:"sendEmail",to:t,subject:n,message:s,headers:r});if(!l.success)throw new Error(l.message||l.error||"Failed to send reset email via backend.")}catch(l){throw l.message&&l.message.includes("API Request Failed"),new Error(l.message||"Failed to send reset email due to an unexpected issue.")}},fT=async(t,e,n)=>{var r;const s=t.toLowerCase();try{const l=await ef.hash(n,Ap),c=await Xi({method:"tableUpdate",table:"users",fields:{hashed_password:l,reset_code:null,reset_token_expiry:null},where:`email='${s.replace(/'/g,"''")}' AND reset_code='${e.replace(/'/g,"''")}'`});if(!c.success||c.success&&((r=c.data)==null?void 0:r.affectedRows)===0){let d=p.INVALID_RESET_CODE;throw!c.success&&c.error&&(c.error.toLowerCase().includes("expired")?d=p.INVALID_RESET_CODE:!c.error.toLowerCase().includes("invalid")&&!c.error.toLowerCase().includes("no user found")&&(d=c.error)),new Error(d)}}catch(l){throw l.message===p.INVALID_RESET_CODE||l.message.includes(p.AUTH_ERROR_GENERAL)?l:new Error(p.AUTH_ERROR_GENERAL+(l.message?`: ${l.message}`:""))}},hT=async(t,e,n,s)=>{const r=e.toLowerCase();try{const l=await ri("users",r,`id = '${t.replace(/'/g,"''")}' AND email = '${r.replace(/'/g,"''")}'`);if(!l||l.length===0)throw new Error(p.AUTH_ERROR_GENERAL+" (   )");const c=l[0];if(!c.hashed_password)throw new Error(p.AUTH_ERROR_GENERAL+" (  )");if(!await ef.compare(n,c.hashed_password))throw new Error(p.ERROR_CURRENT_PASSWORD_INCORRECT);const f=await ef.hash(s,Ap),h=await gi("users",r,{hashed_password:f},`id = '${c.id}'`);if(!h.success)throw new Error(h.error||"    ")}catch(l){throw l.message===p.ERROR_CURRENT_PASSWORD_INCORRECT||l.message.includes(p.AUTH_ERROR_GENERAL)?l:new Error(p.AUTH_ERROR_GENERAL+(l.message?`: ${l.message}`:""))}},mT=async(t,e,n)=>{const s={};if(n.name!==void 0&&(s.name=n.name),n.mobileNumber!==void 0&&(s.mobileNumber=n.mobileNumber===null||n.mobileNumber.trim()===""?null:n.mobileNumber.trim()),n.facebookProfileUrl!==void 0&&(s.facebookProfileUrl=n.facebookProfileUrl===null||n.facebookProfileUrl.trim()===""?null:n.facebookProfileUrl.trim()),n.enableSchemaCheckOnStartup!==void 0&&(s.enableSchemaCheckOnStartup=n.enableSchemaCheckOnStartup),n.enableDataFetchOnStartup!==void 0&&(s.enableDataFetchOnStartup=n.enableDataFetchOnStartup),n.defaultSalesPaymentStatus!==void 0&&(s.defaultSalesPaymentStatus=n.defaultSalesPaymentStatus),n.defaultSalesInvoiceDateOffset!==void 0&&(s.defaultSalesInvoiceDateOffset=n.defaultSalesInvoiceDateOffset),n.defaultSalesDueDateOffset!==void 0&&(s.defaultSalesDueDateOffset=n.defaultSalesDueDateOffset),n.defaultSalesCompanyProfileId!==void 0&&(s.defaultSalesCompanyProfileId=n.defaultSalesCompanyProfileId),n.defaultSalesDiscountType!==void 0&&(s.defaultSalesDiscountType=n.defaultSalesDiscountType),n.defaultSalesDiscountValue!==void 0&&(s.defaultSalesDiscountValue=n.defaultSalesDiscountValue),n.defaultSalesTaxType!==void 0&&(s.defaultSalesTaxType=n.defaultSalesTaxType),n.defaultSalesTaxValue!==void 0&&(s.defaultSalesTaxValue=n.defaultSalesTaxValue),n.defaultSalesPaymentMethod!==void 0&&(s.defaultSalesPaymentMethod=n.defaultSalesPaymentMethod),n.defaultSalesPaymentNotes!==void 0&&(s.defaultSalesPaymentNotes=n.defaultSalesPaymentNotes),n.defaultSalesInvoiceNotes!==void 0&&(s.defaultSalesInvoiceNotes=n.defaultSalesInvoiceNotes),n.defaultPurchaseBillDateOffset!==void 0&&(s.defaultPurchaseBillDateOffset=n.defaultPurchaseBillDateOffset),n.defaultPurchaseDueDateOffset!==void 0&&(s.defaultPurchaseDueDateOffset=n.defaultPurchaseDueDateOffset),n.defaultPurchaseCompanyProfileId!==void 0&&(s.defaultPurchaseCompanyProfileId=n.defaultPurchaseCompanyProfileId),n.defaultPurchaseDiscountType!==void 0&&(s.defaultPurchaseDiscountType=n.defaultPurchaseDiscountType),n.defaultPurchaseDiscountValue!==void 0&&(s.defaultPurchaseDiscountValue=n.defaultPurchaseDiscountValue),n.defaultPurchaseTaxType!==void 0&&(s.defaultPurchaseTaxType=n.defaultPurchaseTaxType),n.defaultPurchaseTaxValue!==void 0&&(s.defaultPurchaseTaxValue=n.defaultPurchaseTaxValue),Object.keys(s).length===0)return{};try{if(s.mobileNumber&&s.mobileNumber.trim()!==""){const l=await ri("users",e,`mobileNumber = '${s.mobileNumber.replace(/'/g,"''")}' AND id != '${t.replace(/'/g,"''")}'`);if(l&&l.length>0)throw new Error(p.MOBILE_NUMBER_ALREADY_IN_USE.replace("{mobileNumber}",s.mobileNumber))}const r=await gi("users",e,s,`id = '${t.replace(/'/g,"''")}'`);if(!r.success)throw r.error&&r.error.toLowerCase().includes("duplicate entry")&&r.error.toLowerCase().includes("mobilenumber")?new Error(p.MOBILE_NUMBER_ALREADY_IN_USE.replace("{mobileNumber}",s.mobileNumber||"")):new Error(r.error||"    ");return s}catch(r){throw r}},pT=async(t,e)=>{const n=p.WELCOME_EMAIL_SUBJECT,s=p.APP_TITLE,r=`
    <html>
      <body style="font-family: Arial, sans-serif; line-height: 1.6;">
        <p> ${e},</p>
        <p> '${s}'   !</p>
        <p>             Gemini AI      </p>
        <p>!</p>
        <p>,<br/><strong>${s} </strong></p>
      </body>
    </html>`,l=`From: "${s}" <no-reply@medha4u.com>\r
Content-Type: text/html; charset=UTF-8\r
MIME-Version: 1.0`;try{(await Xi({method:"sendEmail",table:"system_email_action",to:t,subject:n,message:r,headers:l})).success}catch{}},Zx=async(t,e)=>{const n=p.PASSWORD_CHANGED_EMAIL_SUBJECT,s=p.APP_TITLE,r=e||"",l=p.PASSWORD_CHANGED_EMAIL_MESSAGE_HTML.replace(/{USER_NAME}/g,r).replace(/{APP_TITLE}/g,s),c=`From: "${s}" <no-reply@medha4u.com>\r
Content-Type: text/html; charset=UTF-8\r
MIME-Version: 1.0`;try{(await Xi({method:"sendEmail",to:t,subject:n,message:l,headers:c})).success}catch{}},R2=D.createContext(void 0),gT=({children:t})=>{const[e,n]=D.useState([]),s=D.useCallback((l,c,d=5e3)=>{const f=Math.random().toString(36).substring(2,9);n(h=>[...h,{id:f,message:l,type:c,duration:d}]),d>0&&setTimeout(()=>{r(f)},d)},[]),r=D.useCallback(l=>{n(c=>c.filter(d=>d.id!==l))},[]);return o.jsx(R2.Provider,{value:{notifications:e,addNotification:s,removeNotification:r},children:t})},ur=()=>{const t=D.useContext(R2);if(!t)throw new Error("useNotification must be used within a NotificationProvider");return t},O2=D.createContext(void 0),xT=({children:t})=>{const[e,n]=D.useState(null),[s,r]=D.useState(!0),[l,c]=D.useState(null),{addNotification:d}=ur();D.useEffect(()=>{(async()=>{console.log("AuthContext: Initializing authentication and tables..."),r(!0),c(null);let I=null;try{const j=localStorage.getItem(Tt.USER);if(j)try{const R=JSON.parse(j);R.enableSchemaCheckOnStartup=R.enableSchemaCheckOnStartup===void 0?!0:R.enableSchemaCheckOnStartup,R.enableDataFetchOnStartup=R.enableDataFetchOnStartup===void 0?!0:R.enableDataFetchOnStartup,I=R,n(R),console.log("AuthContext: Successfully loaded active user session from localStorage.")}catch(R){console.error("AuthContext: Failed to parse stored user data. Clearing stored session.",R),localStorage.removeItem(Tt.USER),n(null)}else n(null);await iT(),console.log("AuthContext: Shared tables initialized (or skipped based on setting)."),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log('AuthContext: Cleaned up legacy "remember me" keys from localStorage.')}catch(j){console.error("AuthContext: Error during app initialization (auth or tables):",j);const R=`    : ${j.message}.          `;c(R),localStorage.removeItem(Tt.USER),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),n(null)}finally{r(!1),console.log("AuthContext: Initialization complete. isAuthLoading set to false.")}})()},[]);const f=async(O,I)=>{console.log("AuthContext: login called. Email/Mobile:",O),r(!0),c(null);try{const j=await Jx(O,I),R={...j,enableSchemaCheckOnStartup:j.enableSchemaCheckOnStartup===void 0?!0:j.enableSchemaCheckOnStartup,enableDataFetchOnStartup:j.enableDataFetchOnStartup===void 0?!0:j.enableDataFetchOnStartup};return n(R),localStorage.setItem(Tt.USER,JSON.stringify(R)),console.log(`AuthContext: User logged in and "${Tt.USER}" set.`),d(p.LOGIN_SUCCESS,"success"),r(!1),!0}catch(j){let R=j.message;return j.message&&j.message.includes("Initialization failed for table")&&(R=`  ,       : ${j.message}`),c(R),d(R,"error"),n(null),localStorage.removeItem(Tt.USER),console.log("AuthContext: Login failed. Error:",R),r(!1),!1}},h=async(O,I,j)=>{r(!0),c(null);try{const R=await lT(O,I,j),U={...R,enableSchemaCheckOnStartup:R.enableSchemaCheckOnStartup===void 0?!0:R.enableSchemaCheckOnStartup,enableDataFetchOnStartup:R.enableDataFetchOnStartup===void 0?!0:R.enableDataFetchOnStartup};n(U),localStorage.setItem(Tt.USER,JSON.stringify(U)),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log(`AuthContext: Signup successful. "${Tt.USER}" set, and legacy "remember me" keys cleared.`);try{await pT(U.email,U.name||U.email),d(p.SIGNUP_SUCCESS,"success")}catch{d(p.SIGNUP_SUCCESS+" (      )","warning")}return r(!1),!0}catch(R){let U=R.message;return R.message&&R.message.includes("Initialization failed for table")&&(U=`  ,       : ${R.message}`),c(U),d(U,"error"),n(null),localStorage.removeItem(Tt.USER),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log("AuthContext: Signup failed. Cleared all relevant keys. Error:",U),r(!1),!1}},_=()=>{console.log("AuthContext: logout called."),n(null),localStorage.removeItem(Tt.USER),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log('AuthContext: Logged out. Cleared active session and any legacy "remember me" keys.'),d(p.LOGOUT_SUCCESS,"success")},b=()=>{c(null)},v=async O=>{r(!0),c(null);try{if(!await cT(O))return r(!1),{success:!1,message:p.EMAIL_NOT_FOUND_ALERT};const j=Math.floor(1e5+Math.random()*9e5).toString();return await uT(O,j),await dT(O,j),r(!1),{success:!0}}catch(I){let j=I.message||p.RESET_CODE_SENT_FAIL;return c(j),r(!1),{success:!1,message:j}}},y=async(O,I,j)=>{r(!0),c(null);try{await fT(O,I,j);const R=await Jx(O,j),U={...R,enableSchemaCheckOnStartup:R.enableSchemaCheckOnStartup===void 0?!0:R.enableSchemaCheckOnStartup,enableDataFetchOnStartup:R.enableDataFetchOnStartup===void 0?!0:R.enableDataFetchOnStartup};n(U),localStorage.setItem(Tt.USER,JSON.stringify(U)),localStorage.removeItem(Tt.REMEMBER_USER),localStorage.removeItem(Tt.REMEMBERED_EMAIL_OR_MOBILE),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),console.log('AuthContext: Password reset and auto-login. User data stored, legacy "remember me" keys cleared.'),d(p.PASSWORD_RESET_SUCCESS_AUTO_LOGIN,"success",7e3),await Zx(O,U.name)}catch(R){let U=R.message||p.AUTH_ERROR_GENERAL;throw c(U),d(U,"error"),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),R}finally{r(!1)}},C=async(O,I)=>{if(!e||!e.id||!e.email)throw d("   ","error"),new Error("User not logged in");r(!0),c(null);try{await hT(e.id,e.email,O,I),d(p.PASSWORD_CHANGE_SUCCESS,"success"),localStorage.removeItem(Tt.REMEMBERED_PASSWORD),await Zx(e.email,e.name)}catch(j){const R=j.message||p.AUTH_ERROR_GENERAL;throw c(R),d(R,"error"),j}finally{r(!1)}},L=async O=>{if(!e||!e.id)throw d("   ","error"),new Error("User not logged in for profile update.");r(!0),c(null);try{const I=await mT(e.id,e.email,O),j={...e,...I,enableSchemaCheckOnStartup:I.enableSchemaCheckOnStartup===void 0?e.enableSchemaCheckOnStartup===void 0?!0:e.enableSchemaCheckOnStartup:I.enableSchemaCheckOnStartup,enableDataFetchOnStartup:I.enableDataFetchOnStartup===void 0?e.enableDataFetchOnStartup===void 0?!0:e.enableDataFetchOnStartup:I.enableDataFetchOnStartup};n(j),localStorage.setItem(Tt.USER,JSON.stringify(j)),console.log("AuthContext: User profile updated. New data stored in localStorage for key:",Tt.USER),d(p.PROFILE_UPDATE_SUCCESS,"success")}catch(I){const j=I.message||p.AUTH_ERROR_GENERAL;throw c(j),d(j,"error"),I}finally{r(!1)}};return o.jsx(O2.Provider,{value:{currentUser:e,isAuthLoading:s,authError:l,login:f,signup:h,logout:_,clearAuthError:b,requestPasswordReset:v,resetPasswordWithCode:y,changePassword:C,updateCurrentUserData:L},children:t})},Nc=()=>{const t=D.useContext(O2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},tf=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6-2.292m0 0V21M12 12.75H18"})}),kl=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.071M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),Qx=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 3c-.397 0-.789.026-1.175.073M12 3a8.966 8.966 0 0 1-6.284 2.288"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12c0 .082.002.164.005.245M3 12a9 9 0 0 1 2.977-6.739"})]}),mh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ph=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"})}),gh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),ET=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),Wc=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),e1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),F0=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})]}),V0=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H9"})}),Ch=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3.375 19.5h17.25c.621 0 1.125-.504 1.125-1.125V6.375c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125Z"})}),t1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125V6.375c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v.001c0 .621.504 1.125 1.125 1.125Z"})}),n1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),s1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),a1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"})}),xh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),r1=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6.75h.008v.008h-.008V6.75Zm.75 0V12m0 2.25h.008v.008h-.008v-.008Zm0 0V12m2.25-5.25h.008v.008H18.75V6.75Zm.75 0V12m0 2.25h.008v.008h-.008v-.008Zm0 0V12m-2.25 5.25h.008v.008H18.75V17.25Zm.75 0V12M15 6.75H9.75M15 12H9.75M15 17.25H9.75M9 6.75H6.75M9 12H6.75M9 17.25H6.75M6 6.75V12m0 5.25V12"})]}),Sp=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.646.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 1.905c-.007.378.138.75.431.99l1.005.828c.282.231.398.6.258 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.333.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .258-1.43l1.005-.828c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-1.905c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 0 1-.258-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),g0=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75v6m3-3h-6"})]}),Yd=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068M15.75 21H9c-2.625 0-4.875-2.25-4.875-5V7.5c0-2.625 2.25-4.875 4.875-4.875h7.5c2.625 0 4.875 2.25 4.875 4.875v3.75M9 12h9m-9 3h4.5m-4.5 3h1.5"})}),i1=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6M9 15.75h6M5.25 21v-3.375c0-.621.504-1.125 1.125-1.125h11.25c.621 0 1.125.504 1.125 1.125V21"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.75h.008v.008H6V6.75Zm0 4.5h.008v.008H6v-.008Zm0 4.5h.008v.008H6v-.008Zm0 4.5h.008v.008H6V20.25Zm12-13.5h.008v.008h-.008V6.75Zm0 4.5h.008v.008h-.008v-.008Zm0 4.5h.008v.008h-.008v-.008Zm0 4.5h.008v.008h-.008V20.25Z"})]}),Wd=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),x0=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),zh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),Su=({trigger:t,children:e,menuWidthClass:n="w-56",menuMaxHeightClass:s="max-h-96"})=>{const[r,l]=D.useState(!1),c=D.useRef(null),d=f=>{f.stopPropagation(),l(!r)};return D.useEffect(()=>{const f=h=>{c.current&&!c.current.contains(h.target)&&l(!1)};return r?document.addEventListener("mousedown",f):document.removeEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[r]),o.jsxs("div",{className:"relative inline-block text-left",ref:c,children:[o.jsx("div",{onClick:d,className:"cursor-pointer h-full flex items-center",role:"button","aria-haspopup":"true","aria-expanded":r,children:t}),r&&o.jsx("div",{className:`origin-top-right absolute right-0 mt-2 ${n} rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50 transition-all duration-100 ease-out transform ${r?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:o.jsx("div",{className:`py-1 ${s} overflow-y-auto custom-scrollbar-modal`,role:"none",children:D.Children.map(e,f=>{if(D.isValidElement(f)){const h=f.props.onClick;return D.cloneElement(f,{onClick:_=>{h&&h(_),l(!1)}})}return f})})})]})},jd=({text:t,className:e,title:n})=>o.jsxs("button",{type:"button",className:`inline-flex justify-center items-center w-full h-full rounded-md border border-transparent shadow-sm px-3 py-2 bg-transparent text-sm font-medium text-white hover:bg-teal-700/70 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-teal-600 focus:ring-teal-500 transition-colors duration-150 ${e}`,"aria-haspopup":"true",title:n||t,children:[t,o.jsx(zh,{className:"-mr-1 ml-1.5 h-4 w-4 text-white/80"})]}),o1=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 12h9.75m-9.75 6h9.75M3.75 6.75h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Zm0 5.25h.008v.008H6v-.008Zm0 5.25h.008v.008H6v-.008Z"})]}),Lh=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{d:"M11.999 14.942c2.066 0 3.75-1.683 3.75-3.75V6.017c0-2.067-1.684-3.75-3.75-3.75s-3.75 1.683-3.75 3.75v5.175c0 2.067 1.684 3.75 3.75 3.75Z"}),o.jsx("path",{d:"M11.999 18.75c3.444 0 6.25-2.806 6.25-6.25h-1.5c0 2.615-2.135 4.75-4.75 4.75s-4.75-2.135-4.75-4.75h-1.5c0 3.444 2.806 6.25 6.25 6.25Z"}),o.jsx("path",{d:"M11.249 21.75v-2.272a29.196 29.196 0 0 0-4.002-.432 1.072 1.072 0 0 1-.998-1.072V17.25a.75.75 0 0 1 1.5 0v.383c0 .088.07.16.157.171a27.807 27.807 0 0 0 6.587 0c.087-.01.157-.083.157-.172v-.383a.75.75 0 0 1 1.5 0v.723c0 .544-.408 1.005-.941 1.065a29.318 29.318 0 0 0-4.002.432V21.75a.75.75 0 0 1-1.5 0Z"})]}),l1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877m0 0L11.25 7.5M11.42 15.17l2.472-2.472a3.375 3.375 0 000-4.773L6.273 2.273a3.375 3.375 0 00-4.773 0L2.25 1.5l9.542 9.542L3 15.75l-2.25 2.25a4.482 4.482 0 006.338 6.338l2.25-2.25 5.173-5.173L11.42 15.17z"})}),c1=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),qd=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6M5.25 10.5h13.5A2.25 2.25 0 0 1 21 12.75v5.25a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18V12.75A2.25 2.25 0 0 1 5.25 10.5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 15h9"})]}),Sn=({text:t,icon:e,additionalContent:n,badgeCount:s,srText:r})=>o.jsxs(o.Fragment,{children:[yp.cloneElement(e,{className:"w-5 h-5 mr-3 text-teal-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-medium",children:t}),n&&o.jsx("span",{className:"ml-auto text-xs text-slate-500",children:n}),r&&o.jsx("span",{className:"sr-only",children:r}),s&&s>0&&o.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold rounded-full h-4 w-4 flex items-center justify-center",children:s>9?"9+":s})]}),_T=t=>{const{isAdminUser:e,onAddIncomeClick:n,onAddExpenseClick:s,onAddDebtClick:r,onViewTransactionsClick:l,onManagePersonsClick:c,onViewReportClick:d,onOpenBankReportModal:f,onOpenStockReportModal:h,onBudgetClick:_,onArchiveClick:b,onEditProfileClick:v,onChangePasswordClick:y,onOpenInboxModal:C,onManageSuggestionsClick:L,onCreateSalesInvoiceClick:O,onCreatePurchaseBillClick:I,onOpenInvoiceListModal:j,onManageProductsClick:R,onManageBankAccountsClick:U,onSwitchAuthMode:te,unreadMessagesCount:Q,onResetAppDataClick:ne,isGlobalPhoneticModeActive:J,onToggleGlobalPhoneticMode:oe,onManageCompanyProfilesClick:xe,onOpenGeminiSettingsModal:F,onOpenAdminAppSettingsModal:H,onOpenAILogModal:re,isProcessingAICommand:K,isAIAssistantListening:Te,onToggleAIAssistantListening:G}=t,{currentUser:he,logout:ue,isAuthLoading:ae}=Nc(),[V,ce]=D.useState(!1),M=D.useRef(null),k=D.useRef(null);D.useEffect(()=>{const Ze=Je=>{M.current&&!M.current.contains(Je.target)&&k.current&&!k.current.contains(Je.target)&&ce(!1)};return V?(document.addEventListener("mousedown",Ze),document.body.style.overflow="hidden"):document.body.style.overflow="auto",()=>{document.removeEventListener("mousedown",Ze),document.body.style.overflow="auto"}},[V]);const Y="text-white hover:bg-teal-700/70 font-medium py-2 px-3 rounded-md transition duration-150 flex items-center space-x-1.5 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:ring-opacity-75",Z=({onClick:Ze,children:Je,className:Qe})=>o.jsx("button",{onClick:()=>{Ze()},className:`flex items-center w-full px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 transition-colors duration-150 ${Qe}`,role:"menuitem",children:Je}),fe=J?p.PHONETIC_BANGLA_ACTIVE:p.PHONETIC_ENGLISH_ACTIVE,Ne=()=>o.jsxs(o.Fragment,{children:[o.jsx(Z,{onClick:oe,children:o.jsx(Sn,{text:fe,icon:o.jsx(r1,{}),additionalContent:o.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded ${J?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:J?"":"EN"})})}),o.jsx("hr",{className:"my-1 border-slate-100"}),o.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:p.MODAL_TITLE_ADD_TRANSACTION.split(" ")[2]})," ",o.jsx(Z,{onClick:()=>{n(),ce(!1)},children:o.jsx(Sn,{text:p.MODAL_TITLE_ADD_INCOME,icon:o.jsx(mh,{})})}),o.jsx(Z,{onClick:()=>{s(),ce(!1)},children:o.jsx(Sn,{text:p.MODAL_TITLE_ADD_EXPENSE,icon:o.jsx(ph,{})})}),o.jsx(Z,{onClick:()=>{l(),ce(!1)},children:o.jsx(Sn,{text:p.MODAL_TITLE_TRANSACTION_HISTORY,icon:o.jsx(tf,{})})}),o.jsx("hr",{className:"my-1 border-slate-100"}),o.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"  "}),o.jsx(Z,{onClick:()=>{O(),ce(!1)},children:o.jsx(Sn,{text:p.CREATE_SALES_INVOICE_NAV_BTN,icon:o.jsx(g0,{})})}),o.jsx(Z,{onClick:()=>{I(),ce(!1)},children:o.jsx(Sn,{text:p.CREATE_PURCHASE_BILL_NAV_BTN,icon:o.jsx(x0,{})})}),o.jsx(Z,{onClick:()=>{j(),ce(!1)},children:o.jsx(Sn,{text:p.VIEW_INVOICES_NAV_BTN,icon:o.jsx(Yd,{})})}),o.jsx(Z,{onClick:()=>{R(),ce(!1)},children:o.jsx(Sn,{text:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,icon:o.jsx(Wd,{})})}),o.jsx("hr",{className:"my-1 border-slate-100"}),o.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:" "})," ",o.jsx(Z,{onClick:()=>{c(),ce(!1)},children:o.jsx(Sn,{text:p.MANAGE_PERSONS_MODAL_TITLE,icon:o.jsx(kl,{})})}),o.jsx(Z,{onClick:()=>{r(),ce(!1)},children:o.jsx(Sn,{text:p.MODAL_TITLE_ADD_DEBT,icon:o.jsx(gh,{})})}),o.jsx(Z,{onClick:()=>{U(),ce(!1)},children:o.jsx(Sn,{text:p.MANAGE_BANK_ACCOUNTS_NAV_BTN,icon:o.jsx(qd,{})})}),o.jsx("hr",{className:"my-1 border-slate-100"}),o.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"  "}),o.jsx(Z,{onClick:()=>{d(),ce(!1)},children:o.jsx(Sn,{text:p.MODAL_TITLE_REPORTS,icon:o.jsx(Qx,{})})}),o.jsx(Z,{onClick:()=>{f(),ce(!1)},children:o.jsx(Sn,{text:p.BANK_REPORT_MODAL_TITLE,icon:o.jsx(qd,{})})})," ",o.jsx(Z,{onClick:()=>{h(),ce(!1)},children:o.jsx(Sn,{text:p.STOCK_REPORT_NAV_BTN,icon:o.jsx(Yd,{})})}),o.jsx(Z,{onClick:()=>{_(),ce(!1)},children:o.jsx(Sn,{text:p.BUDGET_MANAGEMENT_TITLE,icon:o.jsx(F0,{})})}),o.jsx("hr",{className:"my-1 border-slate-100"}),o.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:""}),o.jsx(Z,{onClick:()=>{C(),ce(!1)},children:o.jsx(Sn,{text:p.MESSAGES_NAV_BTN,icon:o.jsx(a1,{}),badgeCount:Q})}),o.jsx("hr",{className:"my-1 border-slate-100"}),o.jsx("h4",{className:"px-4 pt-3 pb-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:""}),o.jsx(Z,{onClick:()=>{v(),ce(!1)},children:o.jsx(Sn,{text:p.EDIT_PROFILE_MODAL_TITLE,icon:o.jsx(s1,{})})}),o.jsx(Z,{onClick:()=>{y(),ce(!1)},children:o.jsx(Sn,{text:p.CHANGE_PASSWORD_MODAL_TITLE,icon:o.jsx(n1,{})})}),o.jsx(Z,{onClick:()=>{xe(),ce(!1)},children:o.jsx(Sn,{text:p.MANAGE_COMPANY_PROFILES_BTN,icon:o.jsx(i1,{})})}),o.jsx(Z,{onClick:()=>{L(),ce(!1)},children:o.jsx(Sn,{text:p.MANAGE_SUGGESTIONS_BTN_TEXT,icon:o.jsx(kl,{})})}),o.jsx(Z,{onClick:()=>{re(),ce(!1)},children:o.jsx(Sn,{text:p.AI_LOG_MODAL_TITLE,icon:o.jsx(c1,{})})}),e&&o.jsxs(o.Fragment,{children:[o.jsx(Z,{onClick:()=>{F(),ce(!1)},children:o.jsx(Sn,{text:p.SETTINGS_NAV_ITEM_GEMINI,icon:o.jsx(o1,{})})}),o.jsx(Z,{onClick:()=>{H(),ce(!1)},children:o.jsx(Sn,{text:p.APP_ADMIN_SETTINGS_NAV_ITEM,icon:o.jsx(l1,{})})}),o.jsx(Z,{onClick:()=>{ne(),ce(!1)},children:o.jsx(Sn,{text:p.RESET_APP_DATA_BTN,icon:o.jsx(xh,{})})})]}),o.jsx(Z,{onClick:()=>{b(),ce(!1)},children:o.jsx(Sn,{text:p.ARCHIVE_NAV_BTN,icon:o.jsx(t1,{})})})]});let de=p.AI_ASSISTANT_BUTTON_LABEL,ye=o.jsx(Lh,{className:"w-5 h-5"}),Ue="bg-cyan-500 hover:bg-cyan-600",we="";return K?(de=p.AI_ASSISTANT_PROCESSING,ye=o.jsx(xh,{className:"w-5 h-5 animate-spin"}),Ue="bg-purple-500 hover:bg-purple-600 focus:ring-purple-400",we="animate-pulse"):Te&&(de=p.AI_ASSISTANT_LISTENING,ye=o.jsx(Lh,{className:"w-5 h-5"}),Ue="bg-red-500 hover:bg-red-600 focus:ring-red-400",we="animate-pulse"),o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-teal-600 text-white p-3 sm:p-4 shadow-lg sticky top-0 z-50",children:o.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[o.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold whitespace-nowrap truncate",children:p.APP_TITLE}),o.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5 md:space-x-2",children:[ae&&!he?o.jsx("div",{className:"text-xs sm:text-sm animate-pulse p-2",children:p.LOADING}):he?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:oe,className:`${Y} ${J?"bg-orange-500 hover:bg-orange-400 focus:ring-orange-400":"bg-sky-500 hover:bg-sky-400 focus:ring-sky-400"}`,title:fe,"aria-label":p.PHONETIC_TYPING_TOGGLE_TOOLTIP,children:[o.jsx(r1,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden xs:inline ml-1 text-xs sm:text-sm",children:J?"":"EN"})]}),o.jsxs("button",{onClick:G,className:`${Y} ${Ue} ${we}`,title:p.AI_ASSISTANT_BUTTON_LABEL,"aria-label":p.AI_ASSISTANT_BUTTON_LABEL,disabled:!("SpeechRecognition"in window||"webkitSpeechRecognition"in window)||K&&!Te,children:[ye,o.jsx("span",{className:"hidden md:inline text-xs sm:text-sm",children:de})]}),o.jsxs("button",{onClick:re,className:`${Y} bg-slate-500 hover:bg-slate-600 focus:ring-slate-400`,title:p.AI_LOG_MODAL_TITLE,"aria-label":p.AI_LOG_MODAL_TITLE,children:[o.jsx(c1,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs sm:text-sm",children:"AI "})]}),o.jsxs("div",{className:"hidden lg:flex items-center space-x-0.5",children:[o.jsxs(Su,{trigger:o.jsx(jd,{text:p.MODAL_TITLE_ADD_TRANSACTION.split(" ")[2]}),children:[" ",o.jsx(Z,{onClick:n,children:o.jsx(Sn,{text:p.MODAL_TITLE_ADD_INCOME,icon:o.jsx(mh,{})})}),o.jsx(Z,{onClick:s,children:o.jsx(Sn,{text:p.MODAL_TITLE_ADD_EXPENSE,icon:o.jsx(ph,{})})}),o.jsx(Z,{onClick:l,children:o.jsx(Sn,{text:p.MODAL_TITLE_TRANSACTION_HISTORY,icon:o.jsx(tf,{})})})]}),o.jsxs(Su,{trigger:o.jsx(jd,{text:"  "}),children:[o.jsx(Z,{onClick:O,children:o.jsx(Sn,{text:p.CREATE_SALES_INVOICE_NAV_BTN,icon:o.jsx(g0,{})})}),o.jsx(Z,{onClick:I,children:o.jsx(Sn,{text:p.CREATE_PURCHASE_BILL_NAV_BTN,icon:o.jsx(x0,{})})}),o.jsx(Z,{onClick:j,children:o.jsx(Sn,{text:p.VIEW_INVOICES_NAV_BTN,icon:o.jsx(Yd,{})})}),o.jsx(Z,{onClick:R,children:o.jsx(Sn,{text:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,icon:o.jsx(Wd,{})})})]}),o.jsxs(Su,{trigger:o.jsx(jd,{text:" "}),children:[" ",o.jsx(Z,{onClick:c,children:o.jsx(Sn,{text:p.MANAGE_PERSONS_MODAL_TITLE,icon:o.jsx(kl,{})})}),o.jsx(Z,{onClick:r,children:o.jsx(Sn,{text:p.MODAL_TITLE_ADD_DEBT,icon:o.jsx(gh,{})})}),o.jsx(Z,{onClick:U,children:o.jsx(Sn,{text:p.MANAGE_BANK_ACCOUNTS_NAV_BTN,icon:o.jsx(qd,{})})})]}),o.jsxs(Su,{trigger:o.jsx(jd,{text:"  "}),children:[o.jsx(Z,{onClick:d,children:o.jsx(Sn,{text:p.MODAL_TITLE_REPORTS,icon:o.jsx(Qx,{})})}),o.jsx(Z,{onClick:f,children:o.jsx(Sn,{text:p.BANK_REPORT_MODAL_TITLE,icon:o.jsx(qd,{})})})," ",o.jsx(Z,{onClick:h,children:o.jsx(Sn,{text:p.STOCK_REPORT_NAV_BTN,icon:o.jsx(Yd,{})})}),o.jsx(Z,{onClick:_,children:o.jsx(Sn,{text:p.BUDGET_MANAGEMENT_TITLE,icon:o.jsx(F0,{})})})]}),o.jsx(Su,{trigger:o.jsx(jd,{text:p.MESSAGES_NAV_BTN}),children:o.jsx(Z,{onClick:C,children:o.jsx(Sn,{text:p.INBOX_MODAL_TITLE,icon:o.jsx(a1,{}),badgeCount:Q})})})]}),o.jsxs("div",{className:"hidden sm:flex lg:hidden items-center space-x-1",children:[o.jsxs("button",{onClick:n,className:`${Y} bg-green-500 hover:bg-green-400`,title:p.MODAL_TITLE_ADD_INCOME,children:[o.jsx(mh,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),o.jsxs("button",{onClick:s,className:`${Y} bg-red-500 hover:bg-red-400`,title:p.MODAL_TITLE_ADD_EXPENSE,children:[o.jsx(ph,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),o.jsxs("button",{onClick:r,className:`${Y} bg-sky-500 hover:bg-sky-400`,title:p.MODAL_TITLE_ADD_DEBT,children:[o.jsx(gh,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),o.jsxs("button",{onClick:O,className:`${Y} bg-purple-500 hover:bg-purple-400`,title:p.CREATE_SALES_INVOICE_NAV_BTN,children:[o.jsx(g0,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),o.jsxs("button",{onClick:I,className:`${Y} bg-indigo-500 hover:bg-indigo-400`,title:p.CREATE_PURCHASE_BILL_NAV_BTN,children:[o.jsx(x0,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs",children:""})]}),o.jsxs("button",{onClick:R,className:`${Y} bg-orange-500 hover:bg-orange-400`,title:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,children:[o.jsx(Wd,{className:"w-5 h-5"}),o.jsx("span",{className:"hidden md:inline text-xs",children:""})]})]}),o.jsx("div",{className:"hidden lg:flex items-center",children:o.jsxs(Su,{trigger:o.jsx("button",{className:`${Y} p-2`,title:"",children:o.jsx(Sp,{className:"w-5 h-5"})}),children:[o.jsx(Z,{onClick:v,children:o.jsx(Sn,{text:p.EDIT_PROFILE_MODAL_TITLE,icon:o.jsx(s1,{})})}),o.jsx(Z,{onClick:y,children:o.jsx(Sn,{text:p.CHANGE_PASSWORD_MODAL_TITLE,icon:o.jsx(n1,{})})}),o.jsx(Z,{onClick:xe,children:o.jsx(Sn,{text:p.MANAGE_COMPANY_PROFILES_BTN,icon:o.jsx(i1,{})})}),o.jsx(Z,{onClick:L,children:o.jsx(Sn,{text:p.MANAGE_SUGGESTIONS_BTN_TEXT,icon:o.jsx(kl,{})})}),e&&o.jsxs(o.Fragment,{children:[o.jsx(Z,{onClick:F,children:o.jsx(Sn,{text:p.SETTINGS_NAV_ITEM_GEMINI,icon:o.jsx(o1,{})})}),o.jsx(Z,{onClick:H,children:o.jsx(Sn,{text:p.APP_ADMIN_SETTINGS_NAV_ITEM,icon:o.jsx(l1,{})})}),o.jsx(Z,{onClick:ne,children:o.jsx(Sn,{text:p.RESET_APP_DATA_BTN,icon:o.jsx(xh,{})})})]}),o.jsx(Z,{onClick:b,children:o.jsx(Sn,{text:p.ARCHIVE_NAV_BTN,icon:o.jsx(t1,{})})})]})}),o.jsx("span",{className:"text-sm hidden xl:block border-l border-teal-500 pl-3 ml-2 whitespace-nowrap",children:he.name||he.email}),o.jsxs("button",{onClick:ue,className:"hidden lg:flex bg-red-500 hover:bg-red-600 text-white text-xs sm:text-sm font-semibold py-2 px-3 rounded-lg shadow-md transition duration-150 items-center space-x-1.5",title:p.LOGOUT,children:[o.jsx(e1,{className:"w-4 h-4"})," ",o.jsx("span",{children:p.LOGOUT})]})]}):o.jsxs("div",{className:"hidden lg:flex items-center space-x-2",children:[o.jsxs("button",{onClick:()=>te("login"),className:`${Y} bg-green-500 hover:bg-green-600`,children:[o.jsx(V0,{className:"w-4 h-4 mr-1.5"}),p.LOGIN]}),o.jsxs("button",{onClick:()=>te("signup"),className:`${Y} bg-sky-500 hover:bg-sky-600`,children:[o.jsx(Ch,{className:"w-4 h-4 mr-1.5"}),p.SIGNUP]})]}),o.jsxs("button",{ref:k,onClick:()=>ce(!V),className:"lg:hidden p-2 text-white hover:bg-teal-700/70 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-400","aria-controls":"mobile-menu","aria-expanded":V,title:" ",children:[o.jsx("span",{className:"sr-only",children:" "}),V?o.jsx(Wc,{className:"w-6 h-6"}):o.jsx(ET,{className:"w-6 h-6"})]})]})]})}),o.jsxs(o.Fragment,{children:[V&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[55] lg:hidden",onClick:()=>ce(!1),"aria-hidden":"true"}),o.jsxs("div",{id:"mobile-menu",ref:M,className:`fixed top-0 right-0 h-full w-72 sm:w-80 bg-white shadow-xl z-[60] transform transition-transform duration-300 ease-in-out lg:hidden flex flex-col
                      ${V?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 bg-slate-50",children:[o.jsx("h2",{id:"mobile-menu-title",className:"text-lg font-semibold text-teal-700",children:p.APP_TITLE}),o.jsxs("button",{onClick:()=>ce(!1),className:"p-1 text-slate-500 hover:text-slate-700 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",title:"  ",children:[o.jsx(Wc,{className:"w-6 h-6"})," ",o.jsx("span",{className:"sr-only",children:"  "})]})]}),he?o.jsxs(o.Fragment,{children:[o.jsx("nav",{className:"flex-grow py-2 overflow-y-auto",role:"navigation","aria-label":" ",children:Ne()}),o.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700",children:he.name||he.email}),o.jsx("p",{className:"text-xs text-slate-500",children:""})]}),o.jsxs("button",{onClick:()=>{ue(),ce(!1)},className:"w-full flex items-center justify-center bg-red-500 hover:bg-red-600 text-white text-sm font-semibold py-2.5 px-4 rounded-lg shadow-md transition duration-150",children:[o.jsx(e1,{className:"w-4 h-4 mr-2"})," ",p.LOGOUT]})]})]}):o.jsxs("nav",{className:"flex-grow py-3 overflow-y-auto",role:"navigation","aria-label":" ",children:[o.jsx(Z,{onClick:()=>{te("login"),ce(!1)},children:o.jsx(Sn,{text:p.LOGIN,icon:o.jsx(V0,{})})}),o.jsx(Z,{onClick:()=>{te("signup"),ce(!1)},children:o.jsx(Sn,{text:p.SIGNUP,icon:o.jsx(Ch,{})})})]})]})]})]})},Bd=({title:t,amount:e,colorClass:n,onClick:s,isClickable:r,ariaLabelDetails:l})=>o.jsxs("div",{className:`p-4 sm:p-6 rounded-lg shadow-lg text-center ${n} ${r?"cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-200 ease-out":""}`,onClick:s,role:r?"button":void 0,tabIndex:r?0:void 0,onKeyDown:r?c=>{(c.key==="Enter"||c.key===" ")&&(s==null||s())}:void 0,"aria-label":r?`${t}, ${l||` ${e.toLocaleString("bn-BD")} ,    `}`:t,children:[o.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-700 mb-1 sm:mb-2",children:t}),o.jsxs("p",{className:"text-2xl sm:text-3xl font-bold",children:[p.BDT_SYMBOL," ",e.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),bT=({totalIncome:t,totalExpense:e,balance:n,totalPayable:s,totalReceivable:r,onOpenReceivablePersonsModal:l,onOpenPayablePersonsModal:c})=>o.jsxs("section",{"aria-labelledby":"summary-heading",className:"my-8 p-4 md:p-6 bg-white rounded-xl shadow-lg",children:[o.jsx("h2",{id:"summary-heading",className:"sr-only",children:"Financial Summary"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[o.jsx(Bd,{title:p.SUMMARY_TOTAL_INCOME,amount:t,colorClass:"bg-green-100 text-green-700"}),o.jsx(Bd,{title:p.SUMMARY_TOTAL_EXPENSE,amount:e,colorClass:"bg-red-100 text-red-700"}),o.jsx(Bd,{title:p.SUMMARY_CURRENT_BALANCE,amount:n,colorClass:n>=0?"bg-sky-100 text-sky-700":"bg-orange-100 text-orange-700"}),o.jsx(Bd,{title:p.TOTAL_RECEIVABLE,amount:r,colorClass:"bg-green-100 text-green-700",onClick:l,isClickable:!0,ariaLabelDetails:`  ${r.toLocaleString("bn-BD")} ,    `}),o.jsx(Bd,{title:p.TOTAL_PAYABLE,amount:s,colorClass:"bg-red-100 text-red-700",onClick:c,isClickable:!0,ariaLabelDetails:`  ${s.toLocaleString("bn-BD")} ,    `})]})]}),P2=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 12h9.75m-9.75 6h9.75M3.75 6.75h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Zm0 5.25h1.5v1.5h-1.5v-1.5Z"})}),TT="",yT="",NT={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function cr(t){const e=t.split(/(\s+)/);let n="";for(const s of e){if(s.match(/^\s+$/)){n+=s;continue}if(s.length===0)continue;const r=s.toLowerCase();if(Gc.hasOwnProperty(r)&&Gc[r]&&(r.length>3||Gc[r].length>1||r==="a")&&Gc[r].length>1){n+=Gc[r];continue}let l="",c=0;for(;c<s.length;){let d=!1;for(let f=3;f>=1;f--)if(c+f<=s.length){const h=s.substring(c,c+f);if(Gc.hasOwnProperty(h)){const _=Gc[h];TT.includes(_)&&l.length>0&&yT.includes(l[l.length-1])?l+=NT[_]||"":l+=_,c+=f,d=!0;break}}d||(l+=s[c],c+=1)}n+=l}return n}const u1=({transactionType:t,onAddTransaction:e,suggestionsList:n,onOpenManageSuggestions:s,expenseFieldRequirements:r,onUpdateExpenseFieldRequirements:l,isGlobalPhoneticModeActive:c,bankAccounts:d,defaultBankAccountId:f})=>{const[h,_]=D.useState(""),[b,v]=D.useState(""),[y,C]=D.useState(new Date().toISOString().slice(0,16)),[L,O]=D.useState(f||void 0),[I,j]=D.useState(""),[R,U]=D.useState(""),[te,Q]=D.useState(""),[ne,J]=D.useState(n),[oe,xe]=D.useState(!1),F=D.useRef(null),H=D.useRef(null),re=D.useRef(null),K=D.useRef(null),{addNotification:Te}=ur(),G=D.useRef(!1),he=D.useCallback(()=>{G.current=!0,_(""),v(""),j(""),U(""),Q(""),O(f||void 0),J(n),xe(!1),setTimeout(()=>{var Fe;return(Fe=F.current)==null?void 0:Fe.focus()},0)},[n,f]);D.useEffect(()=>{he()},[t,n,he]),D.useEffect(()=>{!L&&f&&O(f)},[f,L]),D.useEffect(()=>{if(t===fs.EXPENSE&&h){const Fe=h.toLowerCase();let ut="";for(const Pe in qx)if(Fe.includes(Pe.toLowerCase())){ut=qx[Pe];break}ut&&!R.trim()&&(G.current=!0,U(ut))}else t!==fs.EXPENSE&&(G.current=!0,U(""))},[h,t,R]);const ue=(Fe,ut)=>Pe=>{const nt=Pe.target.value;G.current?(Fe(nt),G.current=!1):Fe(nt),ut&&ut(nt)},ae=(Fe,ut)=>Pe=>{if(!G.current&&c&&Pe.key===" "){Pe.preventDefault();const nt=(ut==null?void 0:ut.current)||Pe.target,it=nt.value,st=nt.selectionStart||0;let yt=st-1;for(;yt>=0&&it[yt]!==" ";)yt--;yt++;const Pt=it.substring(yt,st);if(Pt.trim()){const Rt=cr(Pt),Ft=it.substring(0,yt)+Rt+" "+it.substring(st);Fe(Ft),setTimeout(()=>{const Yt=yt+Rt.length+1;nt.setSelectionRange(Yt,Yt)},0)}else{const Rt=it.substring(0,st)+" "+it.substring(st);Fe(Rt),setTimeout(()=>{nt.setSelectionRange(st+1,st+1)},0)}Fe===_&&xe(!1)}},V=(Fe,ut)=>Pe=>{if(G.current){G.current=!1;return}if(c){Pe.preventDefault();const nt=Pe.clipboardData.getData("text"),it=cr(nt),st=(ut==null?void 0:ut.current)||Pe.target,yt=st.selectionStart||0,Pt=st.selectionEnd||0,Rt=st.value,Ft=Rt.substring(0,yt)+it+Rt.substring(Pt);Fe(Ft),setTimeout(()=>{const Yt=yt+it.length;st.setSelectionRange(Yt,Yt)},0),Fe===_&&xe(!1)}},M=ue(_,Fe=>{if(Fe.trim()){const ut=n.filter(Pe=>Pe.toLowerCase().includes(Fe.toLowerCase()));J(ut),xe(!0)}else J(n),xe(!0)}),k=ae(_,F),Y=V(_,F),Z=ue(U),fe=ae(U,H),Ne=V(U,H),de=ue(Q),ye=ae(Q,re),Ue=V(Q,re),we=()=>{var ut;const Fe=((ut=F.current)==null?void 0:ut.value)||h;if(Fe.trim()==="")J(n);else{const Pe=n.filter(nt=>nt.toLowerCase().includes(Fe.toLowerCase()));J(Pe)}xe(!0)},Ze=Fe=>{var ut;G.current=!0,_(Fe),xe(!1),(ut=F.current)==null||ut.focus()};D.useEffect(()=>{const Fe=ut=>{F.current&&!F.current.contains(ut.target)&&K.current&&!K.current.contains(ut.target)&&xe(!1)};return document.addEventListener("mousedown",Fe),()=>{document.removeEventListener("mousedown",Fe)}},[]);const Je=async Fe=>{Fe.preventDefault();const ut=parseFloat(b);if(!h.trim()||isNaN(ut)||ut<=0||!y){Te(p.FORM_VALIDATION_ERROR,"error");return}if(t===fs.EXPENSE){if(r.quantityRequired&&!I.trim()){Te(`${p.QUANTITY_LABEL} ${p.FIELD_IS_REQUIRED}`,"error");return}if(r.unitRequired&&!R.trim()){Te(`${p.UNIT_LABEL} ${p.FIELD_IS_REQUIRED}`,"error");return}if(r.notesRequired&&!te.trim()){Te(`${p.ADDITIONAL_NOTES_LABEL.replace("()","").trim()} ${p.FIELD_IS_REQUIRED}`,"error");return}}let Pe=h.trim();if(t===fs.EXPENSE){const st=I.trim(),yt=R.trim(),Pt=te.trim(),Rt=[];if(st||yt){let Ft=st||"";yt&&(Ft=st?`${st} ${yt}`:yt),Ft&&Rt.push(`[${Ft}]`)}Pt&&Rt.push(Pt),Rt.length>0&&(Pe+=` ${Rt.join(" - ")}`)}const nt=d.find(st=>st.id===L);await e({description:Pe,amount:ut,type:t,date:new Date(y).toISOString(),bankAccountId:L||void 0,bankAccountName:(nt==null?void 0:nt.accountName)||void 0})&&he()},Qe=t===fs.INCOME?p.ADD_INCOME_BTN_TEXT:p.ADD_EXPENSE_BTN_TEXT,je=t===fs.EXPENSE&&h.trim()!=="",ge=(Fe,ut)=>o.jsxs("div",{className:"flex items-center space-x-1.5",children:[o.jsx("input",{type:"checkbox",id:`require-${String(Fe)}`,checked:r[Fe],onChange:Pe=>l({[Fe]:Pe.target.checked}),className:"form-checkbox h-3.5 w-3.5 text-teal-500 rounded-sm border-slate-400 focus:ring-teal-400 cursor-pointer","aria-label":`${ut}  `}),o.jsx("label",{htmlFor:`require-${String(Fe)}`,className:"text-xs text-slate-500 cursor-pointer",children:p.FIELD_REQUIRED_TOGGLE})]});return o.jsxs("form",{onSubmit:Je,className:"space-y-5",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex justify-between items-end mb-1",children:[o.jsxs("label",{htmlFor:"s-description",className:"block text-sm font-medium text-slate-600",children:[p.DESCRIPTION," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("button",{type:"button",onClick:s,className:"text-xs text-teal-600 hover:text-teal-800 hover:underline flex items-center space-x-1",title:p.MANAGE_SUGGESTIONS_BTN_TEXT,children:[o.jsx(P2,{className:"w-3 h-3"}),o.jsx("span",{children:p.MANAGE_SUGGESTIONS_BTN_TEXT})]})]}),o.jsx("input",{ref:F,type:"text",id:"s-description",value:h,onChange:M,onKeyDown:k,onPaste:Y,onFocus:we,placeholder:p.DESCRIPTION_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"s-description-suggestions","aria-expanded":oe}),oe&&o.jsx("ul",{ref:K,id:"s-description-suggestions",className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox",children:ne.length>0?ne.map((Fe,ut)=>o.jsx("li",{onClick:()=>Ze(Fe),onMouseDown:Pe=>Pe.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm text-slate-700",role:"option",tabIndex:0,onKeyDown:Pe=>{(Pe.key==="Enter"||Pe.key===" ")&&Ze(Fe)},children:Fe},ut)):h.trim()&&o.jsx("li",{className:"px-4 py-2 text-center text-xs text-slate-500",children:p.TRANSACTION_DESCRIPTION_NO_SUGGESTIONS})})]}),je&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("label",{htmlFor:"s-quantity",className:"block text-sm font-medium text-slate-600",children:[p.QUANTITY_LABEL,r.quantityRequired&&o.jsx("span",{className:"text-red-500",children:"*"})]}),ge("quantityRequired",p.QUANTITY_LABEL)]}),o.jsx("input",{type:"number",id:"s-quantity",value:I,onChange:Fe=>j(Fe.target.value),placeholder:": ",className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",min:"0",step:"any",required:r.quantityRequired})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("label",{htmlFor:"s-unit",className:"block text-sm font-medium text-slate-600",children:[p.UNIT_LABEL,r.unitRequired&&o.jsx("span",{className:"text-red-500",children:"*"})]}),ge("unitRequired",p.UNIT_LABEL)]}),o.jsx("input",{ref:H,type:"text",id:"s-unit",value:R,onChange:Z,onKeyDown:fe,onPaste:Ne,placeholder:p.UNIT_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",list:"common-units-datalist",required:r.unitRequired}),o.jsx("datalist",{id:"common-units-datalist",children:Wi.map(Fe=>o.jsx("option",{value:Fe},Fe))})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("label",{htmlFor:"s-additional-notes",className:"block text-sm font-medium text-slate-600",children:[p.ADDITIONAL_NOTES_LABEL,r.notesRequired&&o.jsx("span",{className:"text-red-500",children:"*"})]}),ge("notesRequired",p.ADDITIONAL_NOTES_LABEL.replace("()","").trim())]}),o.jsx("textarea",{ref:re,id:"s-additional-notes",value:te,onChange:de,onKeyDown:ye,onPaste:Ue,placeholder:p.ADDITIONAL_NOTES_PLACEHOLDER,rows:2,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:r.notesRequired})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"s-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",id:"s-amount",value:b,onChange:Fe=>v(Fe.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"s-transaction-date",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DATE," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"datetime-local",id:"s-transaction-date",value:y,onChange:Fe=>C(Fe.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"s-bank-account",className:"block text-sm font-medium text-slate-600 mb-1",children:p.SELECT_BANK_ACCOUNT_TRANSACTION_LABEL}),o.jsxs("select",{id:"s-bank-account",value:L||"",onChange:Fe=>O(Fe.target.value||void 0),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",children:[o.jsx("option",{value:"",children:p.SELECT_BANK_ACCOUNT_PLACEHOLDER}),d.filter(Fe=>!Fe.isDeleted).map(Fe=>o.jsxs("option",{value:Fe.id,children:[Fe.accountName," ",Fe.bankName&&`(${Fe.bankName})`]},Fe.id))]})]}),o.jsx("button",{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:Qe})]})},xr=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.56 0c1.153 0 2.243.032 3.223.094M7.5 5.25h9M7.5 5.25a2.25 2.25 0 0 1-2.25-2.25H18.75a2.25 2.25 0 0 1-2.25 2.25H7.5Z"})}),hl=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),M2=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),vT=({transaction:t,onDeleteTransaction:e,onEditTransaction:n,onViewHistory:s,onRestoreTransaction:r})=>{const l=t.type===fs.INCOME,c=t.isDeleted?"text-slate-400 line-through":l?"text-green-600":"text-red-600",d=t.isDeleted?"border-slate-400":l?"border-green-500":"border-red-500",f=l?mh:ph,h=t.isDeleted?"text-slate-500 line-through":"text-slate-700",_=(C,L=!1)=>{if(!C)return"N/A";try{const O=new Date(C);if(isNaN(O.getTime()))return C;const I={day:"2-digit",month:"long",year:"numeric"};return L?(I.hour="2-digit",I.minute="2-digit",O.toLocaleString("bn-BD",I)):O.toLocaleDateString("bn-BD",I)}catch{return C}},b=_(t.date,!0),v=t.lastModified&&t.lastModified!==t.date?_(t.lastModified,!0):null,y=t.isDeleted&&t.deletedAt?_(t.deletedAt,!0):null;return o.jsxs("li",{className:`bg-white p-4 rounded-lg shadow-sm border-l-4 ${d} flex flex-col sm:flex-row justify-between items-start sm:items-center hover:shadow-md transition-shadow duration-150 ${t.isDeleted?"opacity-70 hover:opacity-90":""}`,children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-grow",children:[o.jsx(f,{className:`w-8 h-8 ${t.isDeleted?"text-slate-400":l?"text-green-500":"text-red-500"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${h}`,children:t.description}),o.jsxs("p",{className:"text-xs text-slate-500",children:[p.DATE,": ",b]}),t.bankAccountName&&!t.isDeleted&&o.jsxs("p",{className:"text-xs text-sky-600 flex items-center",children:[o.jsx(qd,{className:"w-3 h-3 mr-1"})," ",p.TRANSACTION_LINKED_TO_BANK_ACCOUNT.replace("{bankAccountName}",t.bankAccountName)]}),v&&!t.isDeleted&&o.jsxs("p",{className:"text-xs text-slate-400 italic",children:[p.LAST_MODIFIED_ON," ",v]}),t.isDeleted&&y&&o.jsxs("p",{className:"text-xs text-orange-600 font-medium",children:[p.DELETED_ON," ",y," (",p.STATUS_ARCHIVED,")"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 self-end sm:self-center mt-2 sm:mt-0",children:[o.jsxs("span",{className:`font-semibold text-lg ${c}`,children:[l?"+":"-"," ",p.BDT_SYMBOL," ",(t.amount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.isDeleted?o.jsx("button",{onClick:()=>r(t.id),className:"text-slate-500 hover:text-green-600 p-2 rounded-full hover:bg-green-50 transition duration-150","aria-label":p.RESTORE_ITEM_TOOLTIP,title:p.RESTORE_ITEM_TOOLTIP,children:o.jsx(M2,{className:"w-4 h-4"})}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>s(t),className:"text-slate-500 hover:text-sky-600 p-2 rounded-full hover:bg-sky-50 transition duration-150","aria-label":p.VIEW_HISTORY_TOOLTIP,title:p.VIEW_HISTORY_TOOLTIP,children:o.jsx(tf,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(t),className:"text-slate-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition duration-150","aria-label":p.EDIT_TRANSACTION_TOOLTIP,title:p.EDIT_TRANSACTION_TOOLTIP,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>e(t.id),className:"text-slate-500 hover:text-red-600 p-2 rounded-full hover:bg-red-50 transition duration-150","aria-label":p.DELETE_TRANSACTION_TOOLTIP,title:p.DELETE_TRANSACTION_TOOLTIP,children:o.jsx(xr,{className:"w-4 h-4"})})]})]})]})},k2=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),j2=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),ah=10,Cp=({transactions:t,onDeleteTransaction:e,onEditTransaction:n,onViewHistory:s,onRestoreTransaction:r,showTitle:l=!0,initialShowDeleted:c=!1})=>{const[d,f]=D.useState(c),[h,_]=D.useState(1),{activeTransactions:b,deletedTransactions:v}=D.useMemo(()=>{const Q=[],ne=[];return t.forEach(J=>{J.isDeleted?ne.push(J):Q.push(J)}),Q.sort((J,oe)=>new Date(oe.date).getTime()-new Date(J.date).getTime()),ne.sort((J,oe)=>new Date(oe.deletedAt||oe.date).getTime()-new Date(J.deletedAt||J.date).getTime()),{activeTransactions:Q,deletedTransactions:ne}},[t]),y=D.useMemo(()=>d?[...b,...v]:b,[d,b,v]);D.useEffect(()=>{_(1)},[t,d]);const C=y.length,L=Math.max(1,Math.ceil(C/ah));D.useEffect(()=>{h>L&&_(L)},[h,L]);const O=D.useMemo(()=>{const Q=(h-1)*ah,ne=Q+ah;return y.slice(Q,ne)},[y,h]),I=O.length,j=b.length,R=v.length,U=()=>{_(Q=>Math.max(1,Q-1))},te=()=>{_(Q=>Math.min(L,Q+1))};return j===0&&!d&&R>0?o.jsxs("section",{"aria-labelledby":l?"transaction-history-heading":void 0,className:`${l?"my-8 p-6 bg-white rounded-xl shadow-lg text-center":"text-center py-4"}`,children:[l&&o.jsx("h2",{id:"transaction-history-heading",className:"text-2xl font-semibold text-slate-700 mb-4",children:p.TRANSACTION_HISTORY}),o.jsx("p",{className:"text-slate-500 mb-3",children:p.NO_TRANSACTIONS}),o.jsxs("button",{onClick:()=>f(!0),className:"text-sm text-teal-600 hover:text-teal-700 underline focus:outline-none",children:[p.SHOW_DELETED_ITEMS_BTN," (",R,")"]})]}):j===0&&R===0?o.jsxs("section",{"aria-labelledby":l?"transaction-history-heading":void 0,className:`${l?"my-8 p-6 bg-white rounded-xl shadow-lg text-center":"text-center py-4"}`,children:[l&&o.jsx("h2",{id:"transaction-history-heading",className:"text-2xl font-semibold text-slate-700 mb-6",children:p.TRANSACTION_HISTORY}),o.jsx("p",{className:"text-slate-500",children:p.NO_TRANSACTIONS})]}):o.jsxs("section",{"aria-labelledby":l?"transaction-history-heading":void 0,className:`${l?"my-8 p-4 md:p-6 bg-white rounded-xl shadow-lg":""}`,children:[o.jsxs("div",{className:`flex flex-col sm:flex-row justify-between items-center ${l?"mb-6":"mb-4"}`,children:[l&&o.jsx("h2",{id:"transaction-history-heading",className:"text-2xl font-semibold text-slate-700",children:p.TRANSACTION_HISTORY}),R>0&&o.jsx("button",{onClick:()=>f(!d),className:"text-sm text-teal-600 hover:text-teal-700 underline focus:outline-none mt-2 sm:mt-0",children:d?p.HIDE_DELETED_ITEMS_BTN:`${p.SHOW_DELETED_ITEMS_BTN} (${R})`})]}),I===0&&C>0?o.jsx("p",{className:"text-slate-500 text-center py-4",children:"    "}):I===0&&C===0?o.jsx("p",{className:"text-slate-500 text-center py-4",children:d?p.NO_DELETED_TRANSACTIONS:p.NO_TRANSACTIONS}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"space-y-4",children:O.map(Q=>o.jsx(vT,{transaction:Q,onDeleteTransaction:e,onEditTransaction:n,onViewHistory:s,onRestoreTransaction:r},Q.id))}),C>ah&&o.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center text-sm text-slate-600",children:[o.jsxs("p",{className:"mb-2 sm:mb-0",children:[" ",h.toLocaleString("bn-BD"),"  ",L.toLocaleString("bn-BD")," |  ",C.toLocaleString("bn-BD"),"  "]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:U,disabled:h===1,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":" ",children:[o.jsx(k2,{className:"w-4 h-4 mr-1"}),""]}),o.jsxs("button",{onClick:te,disabled:h===L,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":" ",children:["",o.jsx(j2,{className:"w-4 h-4 ml-1"})]})]})]})]})]})};var ks;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const l={};for(const c of r)l[c]=c;return l},t.getValidEnumValues=r=>{const l=t.objectKeys(r).filter(d=>typeof r[r[d]]!="number"),c={};for(const d of l)c[d]=r[d];return t.objectValues(c)},t.objectValues=r=>t.objectKeys(r).map(function(l){return r[l]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const l=[];for(const c in r)Object.prototype.hasOwnProperty.call(r,c)&&l.push(c);return l},t.find=(r,l)=>{for(const c of r)if(l(c))return c},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,l=" | "){return r.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}t.joinValues=s,t.jsonStringifyReplacer=(r,l)=>typeof l=="bigint"?l.toString():l})(ks||(ks={}));var d1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(d1||(d1={}));const nn=ks.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gc=t=>{switch(typeof t){case"undefined":return nn.undefined;case"string":return nn.string;case"number":return Number.isNaN(t)?nn.nan:nn.number;case"boolean":return nn.boolean;case"function":return nn.function;case"bigint":return nn.bigint;case"symbol":return nn.symbol;case"object":return Array.isArray(t)?nn.array:t===null?nn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?nn.promise:typeof Map<"u"&&t instanceof Map?nn.map:typeof Set<"u"&&t instanceof Set?nn.set:typeof Date<"u"&&t instanceof Date?nn.date:nn.object;default:return nn.unknown}},Ot=ks.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Bl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},s={_errors:[]},r=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(r);else if(c.code==="invalid_return_type")r(c.returnTypeError);else if(c.code==="invalid_arguments")r(c.argumentsError);else if(c.path.length===0)s._errors.push(n(c));else{let d=s,f=0;for(;f<c.path.length;){const h=c.path[f];f===c.path.length-1?(d[h]=d[h]||{_errors:[]},d[h]._errors.push(n(c))):d[h]=d[h]||{_errors:[]},d=d[h],f++}}};return r(this),s}static assert(e){if(!(e instanceof Bl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ks.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}Bl.create=t=>new Bl(t);const G0=(t,e)=>{let n;switch(t.code){case Ot.invalid_type:t.received===nn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ot.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ks.jsonStringifyReplacer)}`;break;case Ot.unrecognized_keys:n=`Unrecognized key(s) in object: ${ks.joinValues(t.keys,", ")}`;break;case Ot.invalid_union:n="Invalid input";break;case Ot.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ks.joinValues(t.options)}`;break;case Ot.invalid_enum_value:n=`Invalid enum value. Expected ${ks.joinValues(t.options)}, received '${t.received}'`;break;case Ot.invalid_arguments:n="Invalid function arguments";break;case Ot.invalid_return_type:n="Invalid function return type";break;case Ot.invalid_date:n="Invalid date";break;case Ot.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ks.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ot.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ot.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ot.custom:n="Invalid input";break;case Ot.invalid_intersection_types:n="Intersection results could not be merged";break;case Ot.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ot.not_finite:n="Number must be finite";break;default:n=e.defaultError,ks.assertNever(t)}return{message:n}};let AT=G0;function ST(){return AT}const CT=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,l=[...n,...r.path||[]],c={...r,path:l};if(r.message!==void 0)return{...r,path:l,message:r.message};let d="";const f=s.filter(h=>!!h).slice().reverse();for(const h of f)d=h(c,{data:e,defaultError:d}).message;return{...r,path:l,message:d}};function zt(t,e){const n=ST(),s=CT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===G0?void 0:G0].filter(r=>!!r)});t.common.issues.push(s)}class Ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Hn;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const r of n){const l=await r.key,c=await r.value;s.push({key:l,value:c})}return Ei.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:l,value:c}=r;if(l.status==="aborted"||c.status==="aborted")return Hn;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||r.alwaysSet)&&(s[l.value]=c.value)}return{status:e.value,value:s}}}const Hn=Object.freeze({status:"aborted"}),zd=t=>({status:"dirty",value:t}),Eo=t=>({status:"valid",value:t}),f1=t=>t.status==="aborted",h1=t=>t.status==="dirty",Yu=t=>t.status==="valid",wh=t=>typeof Promise<"u"&&t instanceof Promise;var cn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(cn||(cn={}));class ml{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const m1=(t,e)=>{if(Yu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Bl(t.common.issues);return this._error=n,this._error}}};function ss(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,d)=>{const{message:f}=t;return c.code==="invalid_enum_value"?{message:f??d.defaultError}:typeof d.data>"u"?{message:f??s??d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:f??n??d.defaultError}},description:r}}class Es{get description(){return this._def.description}_getType(e){return gc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:gc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ei,ctx:{common:e.parent.common,data:e.data,parsedType:gc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(wh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)},r=this._parseSync({data:e,path:s.path,parent:s});return m1(s,r)}"~validate"(e){var s,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:n});return Yu(l)?{value:l.value}:{issues:n.common.issues}}catch(l){(r=(s=l==null?void 0:l.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(l=>Yu(l)?{value:l.value}:{issues:n.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)},r=this._parse({data:e,path:s.path,parent:s}),l=await(wh(r)?r:Promise.resolve(r));return m1(s,l)}refine(e,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,l)=>{const c=e(r),d=()=>l.addIssue({code:Ot.custom,...s(r)});return typeof Promise<"u"&&c instanceof Promise?c.then(f=>f?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new $u({schema:this,typeName:Gn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return _c.create(this,this._def)}nullable(){return Wu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dl.create(this)}promise(){return Ph.create(this,this._def)}or(e){return Dh.create([this,e],this._def)}and(e){return Rh.create(this,e,this._def)}transform(e){return new $u({...ss(this._def),schema:this,typeName:Gn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new z0({...ss(this._def),innerType:this,defaultValue:n,typeName:Gn.ZodDefault})}brand(){return new XT({typeName:Gn.ZodBranded,type:this,...ss(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new $0({...ss(this._def),innerType:this,catchValue:n,typeName:Gn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Lp.create(this,e)}readonly(){return W0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LT=/^c[^\s-]{8,}$/i,wT=/^[0-9a-z]+$/,IT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,DT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RT=/^[a-z0-9_-]{21}$/i,OT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let E0;const jT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,UT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,B2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",HT=new RegExp(`^${B2}$`);function U2(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function YT(t){return new RegExp(`^${U2(t)}$`)}function qT(t){let e=`${B2}T${U2(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function zT(t,e){return!!((e==="v4"||!e)&&jT.test(t)||(e==="v6"||!e)&&UT.test(t))}function $T(t,e){if(!OT.test(t))return!1;try{const[n]=t.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function WT(t,e){return!!((e==="v4"||!e)&&BT.test(t)||(e==="v6"||!e)&&FT.test(t))}class ll extends Es{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==nn.string){const l=this._getOrReturnCtx(e);return zt(l,{code:Ot.invalid_type,expected:nn.string,received:l.parsedType}),Hn}const s=new Ei;let r;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="max")e.data.length>l.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="length"){const c=e.data.length>l.value,d=e.data.length<l.value;(c||d)&&(r=this._getOrReturnCtx(e,r),c?zt(r,{code:Ot.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):d&&zt(r,{code:Ot.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if(l.kind==="email")MT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"email",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="emoji")E0||(E0=new RegExp(kT,"u")),E0.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"emoji",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="uuid")DT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"uuid",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="nanoid")RT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"nanoid",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid")LT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"cuid",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid2")wT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"cuid2",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="ulid")IT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"ulid",code:Ot.invalid_string,message:l.message}),s.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),zt(r,{validation:"url",code:Ot.invalid_string,message:l.message}),s.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"regex",code:Ot.invalid_string,message:l.message}),s.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):l.kind==="datetime"?qT(l).test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:"datetime",message:l.message}),s.dirty()):l.kind==="date"?HT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:"date",message:l.message}),s.dirty()):l.kind==="time"?YT(l).test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.invalid_string,validation:"time",message:l.message}),s.dirty()):l.kind==="duration"?PT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"duration",code:Ot.invalid_string,message:l.message}),s.dirty()):l.kind==="ip"?zT(e.data,l.version)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"ip",code:Ot.invalid_string,message:l.message}),s.dirty()):l.kind==="jwt"?$T(e.data,l.alg)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"jwt",code:Ot.invalid_string,message:l.message}),s.dirty()):l.kind==="cidr"?WT(e.data,l.version)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"cidr",code:Ot.invalid_string,message:l.message}),s.dirty()):l.kind==="base64"?VT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"base64",code:Ot.invalid_string,message:l.message}),s.dirty()):l.kind==="base64url"?GT.test(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{validation:"base64url",code:Ot.invalid_string,message:l.message}),s.dirty()):ks.assertNever(l);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),{validation:n,code:Ot.invalid_string,...cn.errToObj(s)})}_addCheck(e){return new ll({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...cn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...cn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...cn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...cn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...cn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...cn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...cn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...cn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...cn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...cn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...cn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...cn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...cn.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...cn.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...cn.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...cn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...cn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...cn.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...cn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...cn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...cn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...cn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...cn.errToObj(n)})}nonempty(e){return this.min(1,cn.errToObj(e))}trim(){return new ll({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ll({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ll({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ll.create=t=>new ll({checks:[],typeName:Gn.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ss(t)});function KT(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,l=Number.parseInt(t.toFixed(r).replace(".","")),c=Number.parseInt(e.toFixed(r).replace(".",""));return l%c/10**r}class Kc extends Es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==nn.number){const l=this._getOrReturnCtx(e);return zt(l,{code:Ot.invalid_type,expected:nn.number,received:l.parsedType}),Hn}let s;const r=new Ei;for(const l of this._def.checks)l.kind==="int"?ks.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.invalid_type,expected:"integer",received:"float",message:l.message}),r.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="multipleOf"?KT(e.data,l.value)!==0&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.not_finite,message:l.message}),r.dirty()):ks.assertNever(l);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,cn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,cn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,cn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,cn.toString(n))}setLimit(e,n,s,r){return new Kc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:cn.toString(r)}]})}_addCheck(e){return new Kc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:cn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:cn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:cn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:cn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:cn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:cn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ks.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Kc.create=t=>new Kc({checks:[],typeName:Gn.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ss(t)});class Xc extends Es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==nn.bigint)return this._getInvalidInput(e);let s;const r=new Ei;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),zt(s,{code:Ot.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):ks.assertNever(l);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return zt(n,{code:Ot.invalid_type,expected:nn.bigint,received:n.parsedType}),Hn}gte(e,n){return this.setLimit("min",e,!0,cn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,cn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,cn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,cn.toString(n))}setLimit(e,n,s,r){return new Xc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:cn.toString(r)}]})}_addCheck(e){return new Xc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:cn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:cn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Xc.create=t=>new Xc({checks:[],typeName:Gn.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ss(t)});class Ih extends Es{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==nn.boolean){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.boolean,received:s.parsedType}),Hn}return Eo(e.data)}}Ih.create=t=>new Ih({typeName:Gn.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ss(t)});class qu extends Es{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==nn.date){const l=this._getOrReturnCtx(e);return zt(l,{code:Ot.invalid_type,expected:nn.date,received:l.parsedType}),Hn}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return zt(l,{code:Ot.invalid_date}),Hn}const s=new Ei;let r;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),s.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ot.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),s.dirty()):ks.assertNever(l);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:cn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:cn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}qu.create=t=>new qu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Gn.ZodDate,...ss(t)});class p1 extends Es{_parse(e){if(this._getType(e)!==nn.symbol){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.symbol,received:s.parsedType}),Hn}return Eo(e.data)}}p1.create=t=>new p1({typeName:Gn.ZodSymbol,...ss(t)});class g1 extends Es{_parse(e){if(this._getType(e)!==nn.undefined){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.undefined,received:s.parsedType}),Hn}return Eo(e.data)}}g1.create=t=>new g1({typeName:Gn.ZodUndefined,...ss(t)});class x1 extends Es{_parse(e){if(this._getType(e)!==nn.null){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.null,received:s.parsedType}),Hn}return Eo(e.data)}}x1.create=t=>new x1({typeName:Gn.ZodNull,...ss(t)});class E1 extends Es{constructor(){super(...arguments),this._any=!0}_parse(e){return Eo(e.data)}}E1.create=t=>new E1({typeName:Gn.ZodAny,...ss(t)});class H0 extends Es{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Eo(e.data)}}H0.create=t=>new H0({typeName:Gn.ZodUnknown,...ss(t)});class bc extends Es{_parse(e){const n=this._getOrReturnCtx(e);return zt(n,{code:Ot.invalid_type,expected:nn.never,received:n.parsedType}),Hn}}bc.create=t=>new bc({typeName:Gn.ZodNever,...ss(t)});class _1 extends Es{_parse(e){if(this._getType(e)!==nn.undefined){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.void,received:s.parsedType}),Hn}return Eo(e.data)}}_1.create=t=>new _1({typeName:Gn.ZodVoid,...ss(t)});class dl extends Es{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==nn.array)return zt(n,{code:Ot.invalid_type,expected:nn.array,received:n.parsedType}),Hn;if(r.exactLength!==null){const c=n.data.length>r.exactLength.value,d=n.data.length<r.exactLength.value;(c||d)&&(zt(n,{code:c?Ot.too_big:Ot.too_small,minimum:d?r.exactLength.value:void 0,maximum:c?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(zt(n,{code:Ot.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(zt(n,{code:Ot.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((c,d)=>r.type._parseAsync(new ml(n,c,n.path,d)))).then(c=>Ei.mergeArray(s,c));const l=[...n.data].map((c,d)=>r.type._parseSync(new ml(n,c,n.path,d)));return Ei.mergeArray(s,l)}get element(){return this._def.type}min(e,n){return new dl({...this._def,minLength:{value:e,message:cn.toString(n)}})}max(e,n){return new dl({...this._def,maxLength:{value:e,message:cn.toString(n)}})}length(e,n){return new dl({...this._def,exactLength:{value:e,message:cn.toString(n)}})}nonempty(e){return this.min(1,e)}}dl.create=(t,e)=>new dl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Gn.ZodArray,...ss(e)});function Ru(t){if(t instanceof lr){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=_c.create(Ru(s))}return new lr({...t._def,shape:()=>e})}else return t instanceof dl?new dl({...t._def,type:Ru(t.element)}):t instanceof _c?_c.create(Ru(t.unwrap())):t instanceof Wu?Wu.create(Ru(t.unwrap())):t instanceof Jc?Jc.create(t.items.map(e=>Ru(e))):t}class lr extends Es{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ks.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==nn.object){const h=this._getOrReturnCtx(e);return zt(h,{code:Ot.invalid_type,expected:nn.object,received:h.parsedType}),Hn}const{status:s,ctx:r}=this._processInputParams(e),{shape:l,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof bc&&this._def.unknownKeys==="strip"))for(const h in r.data)c.includes(h)||d.push(h);const f=[];for(const h of c){const _=l[h],b=r.data[h];f.push({key:{status:"valid",value:h},value:_._parse(new ml(r,b,r.path,h)),alwaysSet:h in r.data})}if(this._def.catchall instanceof bc){const h=this._def.unknownKeys;if(h==="passthrough")for(const _ of d)f.push({key:{status:"valid",value:_},value:{status:"valid",value:r.data[_]}});else if(h==="strict")d.length>0&&(zt(r,{code:Ot.unrecognized_keys,keys:d}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const _ of d){const b=r.data[_];f.push({key:{status:"valid",value:_},value:h._parse(new ml(r,b,r.path,_)),alwaysSet:_ in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const h=[];for(const _ of f){const b=await _.key,v=await _.value;h.push({key:b,value:v,alwaysSet:_.alwaysSet})}return h}).then(h=>Ei.mergeObjectSync(s,h)):Ei.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return cn.errToObj,new lr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{var l,c;const r=((c=(l=this._def).errorMap)==null?void 0:c.call(l,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:cn.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(e){return new lr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Gn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new lr({...this._def,catchall:e})}pick(e){const n={};for(const s of ks.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new lr({...this._def,shape:()=>n})}omit(e){const n={};for(const s of ks.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new lr({...this._def,shape:()=>n})}deepPartial(){return Ru(this)}partial(e){const n={};for(const s of ks.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new lr({...this._def,shape:()=>n})}required(e){const n={};for(const s of ks.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let l=this.shape[s];for(;l instanceof _c;)l=l._def.innerType;n[s]=l}return new lr({...this._def,shape:()=>n})}keyof(){return F2(ks.objectKeys(this.shape))}}lr.create=(t,e)=>new lr({shape:()=>t,unknownKeys:"strip",catchall:bc.create(),typeName:Gn.ZodObject,...ss(e)});lr.strictCreate=(t,e)=>new lr({shape:()=>t,unknownKeys:"strict",catchall:bc.create(),typeName:Gn.ZodObject,...ss(e)});lr.lazycreate=(t,e)=>new lr({shape:t,unknownKeys:"strip",catchall:bc.create(),typeName:Gn.ZodObject,...ss(e)});class Dh extends Es{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(l){for(const d of l)if(d.result.status==="valid")return d.result;for(const d of l)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const c=l.map(d=>new Bl(d.ctx.common.issues));return zt(n,{code:Ot.invalid_union,unionErrors:c}),Hn}if(n.common.async)return Promise.all(s.map(async l=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(r);{let l;const c=[];for(const f of s){const h={...n,common:{...n.common,issues:[]},parent:null},_=f._parseSync({data:n.data,path:n.path,parent:h});if(_.status==="valid")return _;_.status==="dirty"&&!l&&(l={result:_,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const d=c.map(f=>new Bl(f));return zt(n,{code:Ot.invalid_union,unionErrors:d}),Hn}}get options(){return this._def.options}}Dh.create=(t,e)=>new Dh({options:t,typeName:Gn.ZodUnion,...ss(e)});function Y0(t,e){const n=gc(t),s=gc(e);if(t===e)return{valid:!0,data:t};if(n===nn.object&&s===nn.object){const r=ks.objectKeys(e),l=ks.objectKeys(t).filter(d=>r.indexOf(d)!==-1),c={...t,...e};for(const d of l){const f=Y0(t[d],e[d]);if(!f.valid)return{valid:!1};c[d]=f.data}return{valid:!0,data:c}}else if(n===nn.array&&s===nn.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let l=0;l<t.length;l++){const c=t[l],d=e[l],f=Y0(c,d);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return n===nn.date&&s===nn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Rh extends Es{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(l,c)=>{if(f1(l)||f1(c))return Hn;const d=Y0(l.value,c.value);return d.valid?((h1(l)||h1(c))&&n.dirty(),{status:n.value,value:d.data}):(zt(s,{code:Ot.invalid_intersection_types}),Hn)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([l,c])=>r(l,c)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Rh.create=(t,e,n)=>new Rh({left:t,right:e,typeName:Gn.ZodIntersection,...ss(n)});class Jc extends Es{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.array)return zt(s,{code:Ot.invalid_type,expected:nn.array,received:s.parsedType}),Hn;if(s.data.length<this._def.items.length)return zt(s,{code:Ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Hn;!this._def.rest&&s.data.length>this._def.items.length&&(zt(s,{code:Ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...s.data].map((c,d)=>{const f=this._def.items[d]||this._def.rest;return f?f._parse(new ml(s,c,s.path,d)):null}).filter(c=>!!c);return s.common.async?Promise.all(l).then(c=>Ei.mergeArray(n,c)):Ei.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new Jc({...this._def,rest:e})}}Jc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jc({items:t,typeName:Gn.ZodTuple,rest:null,...ss(e)})};class Oh extends Es{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.object)return zt(s,{code:Ot.invalid_type,expected:nn.object,received:s.parsedType}),Hn;const r=[],l=this._def.keyType,c=this._def.valueType;for(const d in s.data)r.push({key:l._parse(new ml(s,d,s.path,d)),value:c._parse(new ml(s,s.data[d],s.path,d)),alwaysSet:d in s.data});return s.common.async?Ei.mergeObjectAsync(n,r):Ei.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,s){return n instanceof Es?new Oh({keyType:e,valueType:n,typeName:Gn.ZodRecord,...ss(s)}):new Oh({keyType:ll.create(),valueType:e,typeName:Gn.ZodRecord,...ss(n)})}}class b1 extends Es{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.map)return zt(s,{code:Ot.invalid_type,expected:nn.map,received:s.parsedType}),Hn;const r=this._def.keyType,l=this._def.valueType,c=[...s.data.entries()].map(([d,f],h)=>({key:r._parse(new ml(s,d,s.path,[h,"key"])),value:l._parse(new ml(s,f,s.path,[h,"value"]))}));if(s.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const f of c){const h=await f.key,_=await f.value;if(h.status==="aborted"||_.status==="aborted")return Hn;(h.status==="dirty"||_.status==="dirty")&&n.dirty(),d.set(h.value,_.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const f of c){const h=f.key,_=f.value;if(h.status==="aborted"||_.status==="aborted")return Hn;(h.status==="dirty"||_.status==="dirty")&&n.dirty(),d.set(h.value,_.value)}return{status:n.value,value:d}}}}b1.create=(t,e,n)=>new b1({valueType:e,keyType:t,typeName:Gn.ZodMap,...ss(n)});class nf extends Es{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==nn.set)return zt(s,{code:Ot.invalid_type,expected:nn.set,received:s.parsedType}),Hn;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(zt(s,{code:Ot.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(zt(s,{code:Ot.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const l=this._def.valueType;function c(f){const h=new Set;for(const _ of f){if(_.status==="aborted")return Hn;_.status==="dirty"&&n.dirty(),h.add(_.value)}return{status:n.value,value:h}}const d=[...s.data.values()].map((f,h)=>l._parse(new ml(s,f,s.path,h)));return s.common.async?Promise.all(d).then(f=>c(f)):c(d)}min(e,n){return new nf({...this._def,minSize:{value:e,message:cn.toString(n)}})}max(e,n){return new nf({...this._def,maxSize:{value:e,message:cn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}nf.create=(t,e)=>new nf({valueType:t,minSize:null,maxSize:null,typeName:Gn.ZodSet,...ss(e)});class q0 extends Es{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}q0.create=(t,e)=>new q0({getter:t,typeName:Gn.ZodLazy,...ss(e)});class T1 extends Es{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return zt(n,{received:n.data,code:Ot.invalid_literal,expected:this._def.value}),Hn}return{status:"valid",value:e.data}}get value(){return this._def.value}}T1.create=(t,e)=>new T1({value:t,typeName:Gn.ZodLiteral,...ss(e)});function F2(t,e){return new zu({values:t,typeName:Gn.ZodEnum,...ss(e)})}class zu extends Es{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return zt(n,{expected:ks.joinValues(s),received:n.parsedType,code:Ot.invalid_type}),Hn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return zt(n,{received:n.data,code:Ot.invalid_enum_value,options:s}),Hn}return Eo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return zu.create(e,{...this._def,...n})}exclude(e,n=this._def){return zu.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}zu.create=F2;class y1 extends Es{_parse(e){const n=ks.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==nn.string&&s.parsedType!==nn.number){const r=ks.objectValues(n);return zt(s,{expected:ks.joinValues(r),received:s.parsedType,code:Ot.invalid_type}),Hn}if(this._cache||(this._cache=new Set(ks.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=ks.objectValues(n);return zt(s,{received:s.data,code:Ot.invalid_enum_value,options:r}),Hn}return Eo(e.data)}get enum(){return this._def.values}}y1.create=(t,e)=>new y1({values:t,typeName:Gn.ZodNativeEnum,...ss(e)});class Ph extends Es{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==nn.promise&&n.common.async===!1)return zt(n,{code:Ot.invalid_type,expected:nn.promise,received:n.parsedType}),Hn;const s=n.parsedType===nn.promise?n.data:Promise.resolve(n.data);return Eo(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ph.create=(t,e)=>new Ph({type:t,typeName:Gn.ZodPromise,...ss(e)});class $u extends Es{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Gn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,l={addIssue:c=>{zt(s,c),c.fatal?n.abort():n.dirty()},get path(){return s.path}};if(l.addIssue=l.addIssue.bind(l),r.type==="preprocess"){const c=r.transform(s.data,l);if(s.common.async)return Promise.resolve(c).then(async d=>{if(n.value==="aborted")return Hn;const f=await this._def.schema._parseAsync({data:d,path:s.path,parent:s});return f.status==="aborted"?Hn:f.status==="dirty"||n.value==="dirty"?zd(f.value):f});{if(n.value==="aborted")return Hn;const d=this._def.schema._parseSync({data:c,path:s.path,parent:s});return d.status==="aborted"?Hn:d.status==="dirty"||n.value==="dirty"?zd(d.value):d}}if(r.type==="refinement"){const c=d=>{const f=r.refinement(d,l);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(s.common.async===!1){const d=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return d.status==="aborted"?Hn:(d.status==="dirty"&&n.dirty(),c(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(d=>d.status==="aborted"?Hn:(d.status==="dirty"&&n.dirty(),c(d.value).then(()=>({status:n.value,value:d.value}))))}if(r.type==="transform")if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Yu(c))return Hn;const d=r.transform(c.value,l);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>Yu(c)?Promise.resolve(r.transform(c.value,l)).then(d=>({status:n.value,value:d})):Hn);ks.assertNever(r)}}$u.create=(t,e,n)=>new $u({schema:t,typeName:Gn.ZodEffects,effect:e,...ss(n)});$u.createWithPreprocess=(t,e,n)=>new $u({schema:e,effect:{type:"preprocess",transform:t},typeName:Gn.ZodEffects,...ss(n)});class _c extends Es{_parse(e){return this._getType(e)===nn.undefined?Eo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_c.create=(t,e)=>new _c({innerType:t,typeName:Gn.ZodOptional,...ss(e)});class Wu extends Es{_parse(e){return this._getType(e)===nn.null?Eo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wu.create=(t,e)=>new Wu({innerType:t,typeName:Gn.ZodNullable,...ss(e)});class z0 extends Es{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===nn.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}z0.create=(t,e)=>new z0({innerType:t,typeName:Gn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ss(e)});class $0 extends Es{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return wh(r)?r.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Bl(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Bl(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}$0.create=(t,e)=>new $0({innerType:t,typeName:Gn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ss(e)});class N1 extends Es{_parse(e){if(this._getType(e)!==nn.nan){const s=this._getOrReturnCtx(e);return zt(s,{code:Ot.invalid_type,expected:nn.nan,received:s.parsedType}),Hn}return{status:"valid",value:e.data}}}N1.create=t=>new N1({typeName:Gn.ZodNaN,...ss(t)});class XT extends Es{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class Lp extends Es{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Hn:l.status==="dirty"?(n.dirty(),zd(l.value)):this._def.out._parseAsync({data:l.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Hn:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new Lp({in:e,out:n,typeName:Gn.ZodPipeline})}}class W0 extends Es{_parse(e){const n=this._def.innerType._parse(e),s=r=>(Yu(r)&&(r.value=Object.freeze(r.value)),r);return wh(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}W0.create=(t,e)=>new W0({innerType:t,typeName:Gn.ZodReadonly,...ss(e)});var Gn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Gn||(Gn={}));const Hc=ll.create,v1=Kc.create;Xc.create;const JT=Ih.create;qu.create;const A1=H0.create;bc.create;const $d=dl.create,ZT=lr.create,QT=Dh.create;Rh.create;Jc.create;const ey=Oh.create,ty=q0.create,ny=zu.create;Ph.create;_c.create;Wu.create;const Cu={string:t=>ll.create({...t,coerce:!0}),number:t=>Kc.create({...t,coerce:!0}),boolean:t=>Ih.create({...t,coerce:!0}),bigint:t=>Xc.create({...t,coerce:!0}),date:t=>qu.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sy,ay;function ry(){return{geminiUrl:sy,vertexUrl:ay}}function iy(t,e,n){var s,r,l;if(!(!((s=t.httpOptions)===null||s===void 0)&&s.baseUrl)){const c=ry();return t.vertexai?(r=c.vertexUrl)!==null&&r!==void 0?r:e:(l=c.geminiUrl)!==null&&l!==void 0?l:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ju{}function Pn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function x(t,e,n){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const f=t[d];if(Array.isArray(n))for(let h=0;h<f.length;h++){const _=f[h];x(_,e.slice(l+1),n[h])}else for(const h of f)x(h,e.slice(l+1),n)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const f=t[d];x(f[0],e.slice(l+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else t[s]=n}function g(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(c=>g(c,e.slice(n+1))):void 0}else return}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var S1;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(S1||(S1={}));var C1;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(C1||(C1={}));var cl;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(cl||(cl={}));var L1;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(L1||(L1={}));var w1;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(w1||(w1={}));var I1;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(I1||(I1={}));var D1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(D1||(D1={}));var R1;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(R1||(R1={}));var O1;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(O1||(O1={}));var P1;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(P1||(P1={}));var M1;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(M1||(M1={}));var k1;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(k1||(k1={}));var j1;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(j1||(j1={}));var Mh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Mh||(Mh={}));var B1;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(B1||(B1={}));var K0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(K0||(K0={}));var U1;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(U1||(U1={}));var F1;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(F1||(F1={}));var V1;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(V1||(V1={}));var G1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(G1||(G1={}));var H1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(H1||(H1={}));var Y1;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Y1||(Y1={}));var q1;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(q1||(q1={}));var z1;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(z1||(z1={}));var $1;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})($1||($1={}));var W1;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(W1||(W1={}));var K1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(K1||(K1={}));var X1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(X1||(X1={}));var J1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(J1||(J1={}));var Z1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Z1||(Z1={}));var Q1;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Q1||(Q1={}));var eE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(eE||(eE={}));var tE;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tE||(tE={}));var nE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nE||(nE={}));var sE;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(sE||(sE={}));var aE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(aE||(aE={}));var rE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(rE||(rE={}));var iE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iE||(iE={}));var Mu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Mu||(Mu={}));class X0{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ud{get text(){var e,n,s,r,l,c,d,f;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const b=[];for(const v of(f=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[y,C]of Object.entries(v))y!=="text"&&y!=="thought"&&(C!==null||C!==void 0)&&b.push(y);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;_=!0,h+=v.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,s,r,l,c,d,f;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const b of(f=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[v,y]of Object.entries(b))v!=="inlineData"&&(y!==null||y!==void 0)&&_.push(v);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,s,r,l,c,d,f;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,s,r,l,c,d,f,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,s,r,l,c,d,f,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class oE{}class lE{}class oy{}class ly{}class cE{}class uE{}class dE{}class cy{}class fE{}class hE{}class mE{}class uy{}class dy{}class fy{}class hy{get text(){var e,n,s;let r="",l=!1;const c=[];for(const d of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&c.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,s;let r="";const l=[];for(const c of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[d,f]of Object.entries(c))d!=="inlineData"&&f!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class my{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function la(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function V2(t,e){const n=la(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function G2(t){return Array.isArray(t)?t.map(e=>kh(e)):[kh(t)]}function kh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function py(t){const e=kh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gy(t){const e=kh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function H2(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>pE(e)):[pE(t)]}function J0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function gE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function xE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function xi(t){if(t==null)throw new Error("ContentUnion is required");return J0(t)?t:{role:"user",parts:H2(t)}}function Y2(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=xi(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=xi(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>xi(n)):[xi(e)]}function Vo(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(gE(t)||xE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xi(t)]}const e=[],n=[],s=J0(t[0]);for(const r of t){const l=J0(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(gE(r)||xE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:H2(n)}),e}const xy=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),EE=ny(["string","number","integer","object","array","boolean","null"]),Ey=QT([EE,$d(EE)]);function _y(t=!0){const e=ty(()=>{const n=ZT({type:Ey.optional(),format:Hc().optional(),title:Hc().optional(),description:Hc().optional(),default:A1().optional(),items:e.optional(),minItems:Cu.string().optional(),maxItems:Cu.string().optional(),enum:$d(A1()).optional(),properties:ey(Hc(),e).optional(),required:$d(Hc()).optional(),minProperties:Cu.string().optional(),maxProperties:Cu.string().optional(),propertyOrdering:$d(Hc()).optional(),minimum:v1().optional(),maximum:v1().optional(),minLength:Cu.string().optional(),maxLength:Cu.string().optional(),pattern:Hc().optional(),anyOf:$d(e).optional(),additionalProperties:JT().optional()});return t?n.strict():n});return e}function by(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(cl).includes(n[0].toUpperCase())?n[0].toUpperCase():cl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(cl).includes(s.toUpperCase())?s.toUpperCase():cl.TYPE_UNSPECIFIED})}}function ju(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&by(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(cl).includes(d.toUpperCase())?d.toUpperCase():cl.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=ju(d);else if(s.includes(c)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(ju(h))}e[c]=f}else if(r.includes(c)){const f={};for(const[h,_]of Object.entries(d))f[h]=ju(_);e[c]=f}else{if(c==="additionalProperties")continue;e[c]=d}return e}function jh(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=_y().parse(t);return ju(e)}else return ju(t)}function q2(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function wp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function rf(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=jh(e.parameters)),e.response&&(e.response=jh(e.response));return t}function of(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ty(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function vc(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ty(t,e,"cachedContents")}function z2(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Fl(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function yy(t){return t!=null&&typeof t=="object"&&"name"in t}function Ny(t){return t!=null&&typeof t=="object"&&"video"in t}function vy(t){return t!=null&&typeof t=="object"&&"uri"in t}function $2(t){var e;let n;if(yy(t)&&(n=t.name),!(vy(t)&&(n=t.uri,n===void 0))&&!(Ny(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function W2(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function K2(t){for(const e of["models","tunedModels","publisherModels"])if(Ay(t,e))return t[e];return[]}function Ay(t,e){return t!==null&&typeof t=="object"&&e in t}function Sy(t,e={}){const n=t,s={name:n.name,description:n.description,parameters:ju($h(n.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Cy(t,e={}){const n=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=Sy(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Ly(t){const e=[];for(const n of t)e.push($h(n));return e}function wy(t){const e={};for(const[n,s]of Object.entries(t)){const r=s;e[n]=$h(r)}return e}function $h(t){const e=new Set(["items"]),n=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[l,c]of Object.entries(t))if(e.has(l))r[l]=$h(c);else if(n.has(l))r[l]=Ly(c);else if(s.has(l))r[l]=wy(c);else if(l==="type"){const d=c.toUpperCase();r[l]=Object.values(cl).includes(d)?d:cl.TYPE_UNSPECIFIED}else xy.has(l)&&(r[l]=c);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iy(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function Dy(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function Ry(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function Oy(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],Iy(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],Dy(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],Ry(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function _E(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Oy(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function Py(t){const e={},n=g(t,["behavior"]);n!=null&&x(e,["behavior"],n);const s=g(t,["description"]);s!=null&&x(e,["description"],s);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const l=g(t,["parameters"]);l!=null&&x(e,["parameters"],l);const c=g(t,["parametersJsonSchema"]);c!=null&&x(e,["parametersJsonSchema"],c);const d=g(t,["response"]);d!=null&&x(e,["response"],d);const f=g(t,["responseJsonSchema"]);return f!=null&&x(e,["responseJsonSchema"],f),e}function My(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function ky(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],My(n)),e}function jy(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function By(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],jy(n)),e}function Uy(){return{}}function Fy(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>Py(f))),x(e,["functionDeclarations"],d)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=g(t,["googleSearch"]);s!=null&&x(e,["googleSearch"],ky(s));const r=g(t,["googleSearchRetrieval"]);if(r!=null&&x(e,["googleSearchRetrieval"],By(r)),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(t,["urlContext"])!=null&&x(e,["urlContext"],Uy());const c=g(t,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function Vy(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["allowedFunctionNames"]);return s!=null&&x(e,["allowedFunctionNames"],s),e}function Gy(t){const e={},n=g(t,["latitude"]);n!=null&&x(e,["latitude"],n);const s=g(t,["longitude"]);return s!=null&&x(e,["longitude"],s),e}function Hy(t){const e={},n=g(t,["latLng"]);n!=null&&x(e,["latLng"],Gy(n));const s=g(t,["languageCode"]);return s!=null&&x(e,["languageCode"],s),e}function Yy(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],Vy(n));const s=g(t,["retrievalConfig"]);return s!=null&&x(e,["retrievalConfig"],Hy(s)),e}function qy(t,e){const n={},s=g(t,["ttl"]);e!==void 0&&s!=null&&x(e,["ttl"],s);const r=g(t,["expireTime"]);e!==void 0&&r!=null&&x(e,["expireTime"],r);const l=g(t,["displayName"]);e!==void 0&&l!=null&&x(e,["displayName"],l);const c=g(t,["contents"]);if(e!==void 0&&c!=null){let _=Vo(c);Array.isArray(_)&&(_=_.map(b=>_E(b))),x(e,["contents"],_)}const d=g(t,["systemInstruction"]);e!==void 0&&d!=null&&x(e,["systemInstruction"],_E(xi(d)));const f=g(t,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(b=>Fy(b))),x(e,["tools"],_)}const h=g(t,["toolConfig"]);if(e!==void 0&&h!=null&&x(e,["toolConfig"],Yy(h)),g(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function zy(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["model"],V2(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],qy(r,n)),n}function $y(t,e){const n={},s=g(e,["name"]);s!=null&&x(n,["_url","name"],vc(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function Wy(t,e){const n={},s=g(e,["name"]);s!=null&&x(n,["_url","name"],vc(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function Ky(t,e){const n={},s=g(t,["ttl"]);e!==void 0&&s!=null&&x(e,["ttl"],s);const r=g(t,["expireTime"]);return e!==void 0&&r!=null&&x(e,["expireTime"],r),n}function Xy(t,e){const n={},s=g(e,["name"]);s!=null&&x(n,["_url","name"],vc(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],Ky(r,n)),n}function Jy(t,e){const n={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=g(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function Zy(t){const e={},n=g(t,["config"]);return n!=null&&x(e,["config"],Jy(n,e)),e}function Qy(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function eN(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["data"]);s!=null&&x(e,["data"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function tN(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function nN(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],Qy(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],eN(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],tN(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function bE(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>nN(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function sN(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&x(e,["description"],n);const s=g(t,["name"]);s!=null&&x(e,["name"],s);const r=g(t,["parameters"]);r!=null&&x(e,["parameters"],r);const l=g(t,["parametersJsonSchema"]);l!=null&&x(e,["parametersJsonSchema"],l);const c=g(t,["response"]);c!=null&&x(e,["response"],c);const d=g(t,["responseJsonSchema"]);return d!=null&&x(e,["responseJsonSchema"],d),e}function aN(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function rN(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],aN(n)),e}function iN(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function oN(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],iN(n)),e}function lN(){return{}}function cN(t){const e={},n=g(t,["apiKeyString"]);return n!=null&&x(e,["apiKeyString"],n),e}function uN(t){const e={},n=g(t,["apiKeyConfig"]);n!=null&&x(e,["apiKeyConfig"],cN(n));const s=g(t,["authType"]);s!=null&&x(e,["authType"],s);const r=g(t,["googleServiceAccountConfig"]);r!=null&&x(e,["googleServiceAccountConfig"],r);const l=g(t,["httpBasicAuthConfig"]);l!=null&&x(e,["httpBasicAuthConfig"],l);const c=g(t,["oauthConfig"]);c!=null&&x(e,["oauthConfig"],c);const d=g(t,["oidcConfig"]);return d!=null&&x(e,["oidcConfig"],d),e}function dN(t){const e={},n=g(t,["authConfig"]);return n!=null&&x(e,["authConfig"],uN(n)),e}function fN(){return{}}function hN(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>sN(b))),x(e,["functionDeclarations"],_)}const s=g(t,["retrieval"]);s!=null&&x(e,["retrieval"],s);const r=g(t,["googleSearch"]);r!=null&&x(e,["googleSearch"],rN(r));const l=g(t,["googleSearchRetrieval"]);l!=null&&x(e,["googleSearchRetrieval"],oN(l)),g(t,["enterpriseWebSearch"])!=null&&x(e,["enterpriseWebSearch"],lN());const d=g(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],dN(d)),g(t,["urlContext"])!=null&&x(e,["urlContext"],fN());const h=g(t,["codeExecution"]);return h!=null&&x(e,["codeExecution"],h),e}function mN(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["allowedFunctionNames"]);return s!=null&&x(e,["allowedFunctionNames"],s),e}function pN(t){const e={},n=g(t,["latitude"]);n!=null&&x(e,["latitude"],n);const s=g(t,["longitude"]);return s!=null&&x(e,["longitude"],s),e}function gN(t){const e={},n=g(t,["latLng"]);n!=null&&x(e,["latLng"],pN(n));const s=g(t,["languageCode"]);return s!=null&&x(e,["languageCode"],s),e}function xN(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],mN(n));const s=g(t,["retrievalConfig"]);return s!=null&&x(e,["retrievalConfig"],gN(s)),e}function EN(t,e){const n={},s=g(t,["ttl"]);e!==void 0&&s!=null&&x(e,["ttl"],s);const r=g(t,["expireTime"]);e!==void 0&&r!=null&&x(e,["expireTime"],r);const l=g(t,["displayName"]);e!==void 0&&l!=null&&x(e,["displayName"],l);const c=g(t,["contents"]);if(e!==void 0&&c!=null){let b=Vo(c);Array.isArray(b)&&(b=b.map(v=>bE(v))),x(e,["contents"],b)}const d=g(t,["systemInstruction"]);e!==void 0&&d!=null&&x(e,["systemInstruction"],bE(xi(d)));const f=g(t,["tools"]);if(e!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(v=>hN(v))),x(e,["tools"],b)}const h=g(t,["toolConfig"]);e!==void 0&&h!=null&&x(e,["toolConfig"],xN(h));const _=g(t,["kmsKeyName"]);return e!==void 0&&_!=null&&x(e,["encryption_spec","kmsKeyName"],_),n}function _N(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["model"],V2(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],EN(r,n)),n}function bN(t,e){const n={},s=g(e,["name"]);s!=null&&x(n,["_url","name"],vc(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function TN(t,e){const n={},s=g(e,["name"]);s!=null&&x(n,["_url","name"],vc(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function yN(t,e){const n={},s=g(t,["ttl"]);e!==void 0&&s!=null&&x(e,["ttl"],s);const r=g(t,["expireTime"]);return e!==void 0&&r!=null&&x(e,["expireTime"],r),n}function NN(t,e){const n={},s=g(e,["name"]);s!=null&&x(n,["_url","name"],vc(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],yN(r,n)),n}function vN(t,e){const n={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=g(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function AN(t){const e={},n=g(t,["config"]);return n!=null&&x(e,["config"],vN(n,e)),e}function Eh(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["displayName"]);s!=null&&x(e,["displayName"],s);const r=g(t,["model"]);r!=null&&x(e,["model"],r);const l=g(t,["createTime"]);l!=null&&x(e,["createTime"],l);const c=g(t,["updateTime"]);c!=null&&x(e,["updateTime"],c);const d=g(t,["expireTime"]);d!=null&&x(e,["expireTime"],d);const f=g(t,["usageMetadata"]);return f!=null&&x(e,["usageMetadata"],f),e}function SN(){return{}}function CN(t){const e={},n=g(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=g(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Eh(l))),x(e,["cachedContents"],r)}return e}function _h(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["displayName"]);s!=null&&x(e,["displayName"],s);const r=g(t,["model"]);r!=null&&x(e,["model"],r);const l=g(t,["createTime"]);l!=null&&x(e,["createTime"],l);const c=g(t,["updateTime"]);c!=null&&x(e,["updateTime"],c);const d=g(t,["expireTime"]);d!=null&&x(e,["expireTime"],d);const f=g(t,["usageMetadata"]);return f!=null&&x(e,["usageMetadata"],f),e}function LN(){return{}}function wN(t){const e={},n=g(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=g(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>_h(l))),x(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ku;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ku||(Ku={}));class Wh{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};s?typeof s=="object"?c=Object.assign({},s):c=s:c={config:{}},c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IN extends Ju{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Wh(Ku.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=_N(this.apiClient,e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_h(_))}else{const h=zy(this.apiClient,e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Eh(_))}}async get(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=bN(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_h(_))}else{const h=$y(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Eh(_))}}async delete(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=TN(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(()=>{const _=LN(),b=new hE;return Object.assign(b,_),b})}else{const h=Wy(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(()=>{const _=SN(),b=new hE;return Object.assign(b,_),b})}}async update(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=NN(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_h(_))}else{const h=Xy(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Eh(_))}}async listInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=AN(e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=wN(_),v=new mE;return Object.assign(v,b),v})}else{const h=Zy(e);return d=Pn("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=CN(_),v=new mE;return Object.assign(v,b),v})}}}function TE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ea(t){return this instanceof Ea?(this.v=t,this):new Ea(t)}function Bu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(y){return function(C){return Promise.resolve(C).then(y,b)}}function d(y,C){s[y]&&(r[y]=function(L){return new Promise(function(O,I){l.push([y,L,O,I])>1||f(y,L)})},C&&(r[y]=C(r[y])))}function f(y,C){try{h(s[y](C))}catch(L){v(l[0][3],L)}}function h(y){y.value instanceof Ea?Promise.resolve(y.value.v).then(_,b):v(l[0][2],y)}function _(y){f("next",y)}function b(y){f("throw",y)}function v(y,C){y(C),l.shift(),l.length&&f(l[0][0],l[0][1])}}function Kd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof TE=="function"?TE(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(c){return new Promise(function(d,f){c=t[l](c),r(d,f,c.done,c.value)})}}function r(l,c,d,f){Promise.resolve(f).then(function(h){l({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:X2(n)}function X2(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function RN(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function yE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),l&&!X2(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class ON{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new PN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class PN{constructor(e,n,s,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),RN(l)}async sendMessage(e){var n;await this.sendPromise;const s=xi(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,d;const f=await r,h=(c=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,_=f.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let v=[];_!=null&&(v=(d=_.slice(b))!==null&&d!==void 0?d:[]);const y=h?[h]:[];this.recordHistory(s,y,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=xi(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?yE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,r;return Bu(this,arguments,function*(){var c,d,f,h;const _=[];try{for(var b=!0,v=Kd(e),y;y=yield Ea(v.next()),c=y.done,!c;b=!0){h=y.value,b=!1;const C=h;if(DN(C)){const L=(r=(s=C.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;L!==void 0&&_.push(L)}yield yield Ea(C)}}catch(C){d={error:C}}finally{try{!b&&!c&&(f=v.return)&&(yield Ea(f.call(v)))}finally{if(d)throw d.error}}this.recordHistory(n,_)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...yE(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MN(t,e){const n={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=g(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function kN(t){const e={},n=g(t,["config"]);return n!=null&&x(e,["config"],MN(n,e)),e}function jN(t){const e={},n=g(t,["details"]);n!=null&&x(e,["details"],n);const s=g(t,["message"]);s!=null&&x(e,["message"],s);const r=g(t,["code"]);return r!=null&&x(e,["code"],r),e}function BN(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["displayName"]);s!=null&&x(e,["displayName"],s);const r=g(t,["mimeType"]);r!=null&&x(e,["mimeType"],r);const l=g(t,["sizeBytes"]);l!=null&&x(e,["sizeBytes"],l);const c=g(t,["createTime"]);c!=null&&x(e,["createTime"],c);const d=g(t,["expirationTime"]);d!=null&&x(e,["expirationTime"],d);const f=g(t,["updateTime"]);f!=null&&x(e,["updateTime"],f);const h=g(t,["sha256Hash"]);h!=null&&x(e,["sha256Hash"],h);const _=g(t,["uri"]);_!=null&&x(e,["uri"],_);const b=g(t,["downloadUri"]);b!=null&&x(e,["downloadUri"],b);const v=g(t,["state"]);v!=null&&x(e,["state"],v);const y=g(t,["source"]);y!=null&&x(e,["source"],y);const C=g(t,["videoMetadata"]);C!=null&&x(e,["videoMetadata"],C);const L=g(t,["error"]);return L!=null&&x(e,["error"],jN(L)),e}function UN(t){const e={},n=g(t,["file"]);n!=null&&x(e,["file"],BN(n));const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function FN(t){const e={},n=g(t,["name"]);n!=null&&x(e,["_url","file"],$2(n));const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function VN(t){const e={},n=g(t,["name"]);n!=null&&x(e,["_url","file"],$2(n));const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function GN(t){const e={},n=g(t,["details"]);n!=null&&x(e,["details"],n);const s=g(t,["message"]);s!=null&&x(e,["message"],s);const r=g(t,["code"]);return r!=null&&x(e,["code"],r),e}function Z0(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["displayName"]);s!=null&&x(e,["displayName"],s);const r=g(t,["mimeType"]);r!=null&&x(e,["mimeType"],r);const l=g(t,["sizeBytes"]);l!=null&&x(e,["sizeBytes"],l);const c=g(t,["createTime"]);c!=null&&x(e,["createTime"],c);const d=g(t,["expirationTime"]);d!=null&&x(e,["expirationTime"],d);const f=g(t,["updateTime"]);f!=null&&x(e,["updateTime"],f);const h=g(t,["sha256Hash"]);h!=null&&x(e,["sha256Hash"],h);const _=g(t,["uri"]);_!=null&&x(e,["uri"],_);const b=g(t,["downloadUri"]);b!=null&&x(e,["downloadUri"],b);const v=g(t,["state"]);v!=null&&x(e,["state"],v);const y=g(t,["source"]);y!=null&&x(e,["source"],y);const C=g(t,["videoMetadata"]);C!=null&&x(e,["videoMetadata"],C);const L=g(t,["error"]);return L!=null&&x(e,["error"],GN(L)),e}function HN(t){const e={},n=g(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=g(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Z0(l))),x(e,["files"],r)}return e}function YN(){return{}}function qN(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zN extends Ju{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Wh(Ku.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Z0(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kN(e);return l=Pn("files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=HN(f),_=new uy;return Object.assign(_,h),_})}}async createInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UN(e);return l=Pn("upload/v1beta/files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(()=>{const f=YN(),h=new dy;return Object.assign(h,f),h})}}async get(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FN(e);return l=Pn("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>Z0(f))}}async delete(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VN(e);return l=Pn("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(()=>{const f=qN(),h=new fy;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $N(t){const e={},n=g(t,["voiceName"]);return n!=null&&x(e,["voiceName"],n),e}function WN(t){const e={},n=g(t,["voiceName"]);return n!=null&&x(e,["voiceName"],n),e}function J2(t){const e={},n=g(t,["prebuiltVoiceConfig"]);return n!=null&&x(e,["prebuiltVoiceConfig"],$N(n)),e}function KN(t){const e={},n=g(t,["prebuiltVoiceConfig"]);return n!=null&&x(e,["prebuiltVoiceConfig"],WN(n)),e}function XN(t){const e={},n=g(t,["speaker"]);n!=null&&x(e,["speaker"],n);const s=g(t,["voiceConfig"]);return s!=null&&x(e,["voiceConfig"],J2(s)),e}function JN(t){const e={},n=g(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>XN(r))),x(e,["speakerVoiceConfigs"],s)}return e}function ZN(t){const e={},n=g(t,["voiceConfig"]);n!=null&&x(e,["voiceConfig"],J2(n));const s=g(t,["multiSpeakerVoiceConfig"]);s!=null&&x(e,["multiSpeakerVoiceConfig"],JN(s));const r=g(t,["languageCode"]);return r!=null&&x(e,["languageCode"],r),e}function QN(t){const e={},n=g(t,["voiceConfig"]);if(n!=null&&x(e,["voiceConfig"],KN(n)),g(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=g(t,["languageCode"]);return s!=null&&x(e,["languageCode"],s),e}function ev(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function tv(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function nv(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function sv(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["data"]);s!=null&&x(e,["data"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function av(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function rv(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function iv(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],ev(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],nv(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],av(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function ov(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],tv(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],sv(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],rv(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function lv(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>iv(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function cv(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ov(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function uv(t){const e={},n=g(t,["behavior"]);n!=null&&x(e,["behavior"],n);const s=g(t,["description"]);s!=null&&x(e,["description"],s);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const l=g(t,["parameters"]);l!=null&&x(e,["parameters"],l);const c=g(t,["parametersJsonSchema"]);c!=null&&x(e,["parametersJsonSchema"],c);const d=g(t,["response"]);d!=null&&x(e,["response"],d);const f=g(t,["responseJsonSchema"]);return f!=null&&x(e,["responseJsonSchema"],f),e}function dv(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&x(e,["description"],n);const s=g(t,["name"]);s!=null&&x(e,["name"],s);const r=g(t,["parameters"]);r!=null&&x(e,["parameters"],r);const l=g(t,["parametersJsonSchema"]);l!=null&&x(e,["parametersJsonSchema"],l);const c=g(t,["response"]);c!=null&&x(e,["response"],c);const d=g(t,["responseJsonSchema"]);return d!=null&&x(e,["responseJsonSchema"],d),e}function fv(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function hv(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function mv(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],fv(n)),e}function pv(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],hv(n)),e}function gv(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function xv(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function Ev(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],gv(n)),e}function _v(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],xv(n)),e}function bv(){return{}}function Tv(t){const e={},n=g(t,["apiKeyString"]);return n!=null&&x(e,["apiKeyString"],n),e}function yv(t){const e={},n=g(t,["apiKeyConfig"]);n!=null&&x(e,["apiKeyConfig"],Tv(n));const s=g(t,["authType"]);s!=null&&x(e,["authType"],s);const r=g(t,["googleServiceAccountConfig"]);r!=null&&x(e,["googleServiceAccountConfig"],r);const l=g(t,["httpBasicAuthConfig"]);l!=null&&x(e,["httpBasicAuthConfig"],l);const c=g(t,["oauthConfig"]);c!=null&&x(e,["oauthConfig"],c);const d=g(t,["oidcConfig"]);return d!=null&&x(e,["oidcConfig"],d),e}function Nv(t){const e={},n=g(t,["authConfig"]);return n!=null&&x(e,["authConfig"],yv(n)),e}function vv(){return{}}function Av(){return{}}function Sv(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>uv(f))),x(e,["functionDeclarations"],d)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=g(t,["googleSearch"]);s!=null&&x(e,["googleSearch"],mv(s));const r=g(t,["googleSearchRetrieval"]);if(r!=null&&x(e,["googleSearchRetrieval"],Ev(r)),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(t,["urlContext"])!=null&&x(e,["urlContext"],vv());const c=g(t,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function Cv(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>dv(b))),x(e,["functionDeclarations"],_)}const s=g(t,["retrieval"]);s!=null&&x(e,["retrieval"],s);const r=g(t,["googleSearch"]);r!=null&&x(e,["googleSearch"],pv(r));const l=g(t,["googleSearchRetrieval"]);l!=null&&x(e,["googleSearchRetrieval"],_v(l)),g(t,["enterpriseWebSearch"])!=null&&x(e,["enterpriseWebSearch"],bv());const d=g(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],Nv(d)),g(t,["urlContext"])!=null&&x(e,["urlContext"],Av());const h=g(t,["codeExecution"]);return h!=null&&x(e,["codeExecution"],h),e}function Lv(t){const e={},n=g(t,["handle"]);if(n!=null&&x(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wv(t){const e={},n=g(t,["handle"]);n!=null&&x(e,["handle"],n);const s=g(t,["transparent"]);return s!=null&&x(e,["transparent"],s),e}function NE(){return{}}function vE(){return{}}function Iv(t){const e={},n=g(t,["disabled"]);n!=null&&x(e,["disabled"],n);const s=g(t,["startOfSpeechSensitivity"]);s!=null&&x(e,["startOfSpeechSensitivity"],s);const r=g(t,["endOfSpeechSensitivity"]);r!=null&&x(e,["endOfSpeechSensitivity"],r);const l=g(t,["prefixPaddingMs"]);l!=null&&x(e,["prefixPaddingMs"],l);const c=g(t,["silenceDurationMs"]);return c!=null&&x(e,["silenceDurationMs"],c),e}function Dv(t){const e={},n=g(t,["disabled"]);n!=null&&x(e,["disabled"],n);const s=g(t,["startOfSpeechSensitivity"]);s!=null&&x(e,["startOfSpeechSensitivity"],s);const r=g(t,["endOfSpeechSensitivity"]);r!=null&&x(e,["endOfSpeechSensitivity"],r);const l=g(t,["prefixPaddingMs"]);l!=null&&x(e,["prefixPaddingMs"],l);const c=g(t,["silenceDurationMs"]);return c!=null&&x(e,["silenceDurationMs"],c),e}function Rv(t){const e={},n=g(t,["automaticActivityDetection"]);n!=null&&x(e,["automaticActivityDetection"],Iv(n));const s=g(t,["activityHandling"]);s!=null&&x(e,["activityHandling"],s);const r=g(t,["turnCoverage"]);return r!=null&&x(e,["turnCoverage"],r),e}function Ov(t){const e={},n=g(t,["automaticActivityDetection"]);n!=null&&x(e,["automaticActivityDetection"],Dv(n));const s=g(t,["activityHandling"]);s!=null&&x(e,["activityHandling"],s);const r=g(t,["turnCoverage"]);return r!=null&&x(e,["turnCoverage"],r),e}function Pv(t){const e={},n=g(t,["targetTokens"]);return n!=null&&x(e,["targetTokens"],n),e}function Mv(t){const e={},n=g(t,["targetTokens"]);return n!=null&&x(e,["targetTokens"],n),e}function kv(t){const e={},n=g(t,["triggerTokens"]);n!=null&&x(e,["triggerTokens"],n);const s=g(t,["slidingWindow"]);return s!=null&&x(e,["slidingWindow"],Pv(s)),e}function jv(t){const e={},n=g(t,["triggerTokens"]);n!=null&&x(e,["triggerTokens"],n);const s=g(t,["slidingWindow"]);return s!=null&&x(e,["slidingWindow"],Mv(s)),e}function Bv(t){const e={},n=g(t,["proactiveAudio"]);return n!=null&&x(e,["proactiveAudio"],n),e}function Uv(t){const e={},n=g(t,["proactiveAudio"]);return n!=null&&x(e,["proactiveAudio"],n),e}function Fv(t,e){const n={},s=g(t,["generationConfig"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig"],s);const r=g(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const l=g(t,["temperature"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","temperature"],l);const c=g(t,["topP"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topP"],c);const d=g(t,["topK"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topK"],d);const f=g(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const h=g(t,["mediaResolution"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","mediaResolution"],h);const _=g(t,["seed"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","seed"],_);const b=g(t,["speechConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","speechConfig"],ZN(wp(b)));const v=g(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],v);const y=g(t,["systemInstruction"]);e!==void 0&&y!=null&&x(e,["setup","systemInstruction"],lv(xi(y)));const C=g(t,["tools"]);if(e!==void 0&&C!=null){let te=of(C);Array.isArray(te)&&(te=te.map(Q=>Sv(rf(Q)))),x(e,["setup","tools"],te)}const L=g(t,["sessionResumption"]);e!==void 0&&L!=null&&x(e,["setup","sessionResumption"],Lv(L));const O=g(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&x(e,["setup","inputAudioTranscription"],NE());const I=g(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&x(e,["setup","outputAudioTranscription"],NE());const j=g(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&x(e,["setup","realtimeInputConfig"],Rv(j));const R=g(t,["contextWindowCompression"]);e!==void 0&&R!=null&&x(e,["setup","contextWindowCompression"],kv(R));const U=g(t,["proactivity"]);return e!==void 0&&U!=null&&x(e,["setup","proactivity"],Bv(U)),n}function Vv(t,e){const n={},s=g(t,["generationConfig"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig"],s);const r=g(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const l=g(t,["temperature"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","temperature"],l);const c=g(t,["topP"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topP"],c);const d=g(t,["topK"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topK"],d);const f=g(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const h=g(t,["mediaResolution"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","mediaResolution"],h);const _=g(t,["seed"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","seed"],_);const b=g(t,["speechConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","speechConfig"],QN(wp(b)));const v=g(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],v);const y=g(t,["systemInstruction"]);e!==void 0&&y!=null&&x(e,["setup","systemInstruction"],cv(xi(y)));const C=g(t,["tools"]);if(e!==void 0&&C!=null){let te=of(C);Array.isArray(te)&&(te=te.map(Q=>Cv(rf(Q)))),x(e,["setup","tools"],te)}const L=g(t,["sessionResumption"]);e!==void 0&&L!=null&&x(e,["setup","sessionResumption"],wv(L));const O=g(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&x(e,["setup","inputAudioTranscription"],vE());const I=g(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&x(e,["setup","outputAudioTranscription"],vE());const j=g(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&x(e,["setup","realtimeInputConfig"],Ov(j));const R=g(t,["contextWindowCompression"]);e!==void 0&&R!=null&&x(e,["setup","contextWindowCompression"],jv(R));const U=g(t,["proactivity"]);return e!==void 0&&U!=null&&x(e,["setup","proactivity"],Uv(U)),n}function Gv(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["setup","model"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],Fv(r,n)),n}function Hv(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["setup","model"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],Vv(r,n)),n}function Yv(){return{}}function qv(){return{}}function zv(){return{}}function $v(){return{}}function Wv(t){const e={},n=g(t,["media"]);n!=null&&x(e,["mediaChunks"],G2(n));const s=g(t,["audio"]);s!=null&&x(e,["audio"],gy(s));const r=g(t,["audioStreamEnd"]);r!=null&&x(e,["audioStreamEnd"],r);const l=g(t,["video"]);l!=null&&x(e,["video"],py(l));const c=g(t,["text"]);return c!=null&&x(e,["text"],c),g(t,["activityStart"])!=null&&x(e,["activityStart"],Yv()),g(t,["activityEnd"])!=null&&x(e,["activityEnd"],zv()),e}function Kv(t){const e={},n=g(t,["media"]);if(n!=null&&x(e,["mediaChunks"],G2(n)),g(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=g(t,["audioStreamEnd"]);if(s!=null&&x(e,["audioStreamEnd"],s),g(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(t,["activityStart"])!=null&&x(e,["activityStart"],qv()),g(t,["activityEnd"])!=null&&x(e,["activityEnd"],$v()),e}function Z2(t){const e={},n=g(t,["text"]);n!=null&&x(e,["text"],n);const s=g(t,["weight"]);return s!=null&&x(e,["weight"],s),e}function Xv(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Z2(r))),x(e,["weightedPrompts"],s)}return e}function Q2(t){const e={},n=g(t,["temperature"]);n!=null&&x(e,["temperature"],n);const s=g(t,["topK"]);s!=null&&x(e,["topK"],s);const r=g(t,["seed"]);r!=null&&x(e,["seed"],r);const l=g(t,["guidance"]);l!=null&&x(e,["guidance"],l);const c=g(t,["bpm"]);c!=null&&x(e,["bpm"],c);const d=g(t,["density"]);d!=null&&x(e,["density"],d);const f=g(t,["brightness"]);f!=null&&x(e,["brightness"],f);const h=g(t,["scale"]);h!=null&&x(e,["scale"],h);const _=g(t,["muteBass"]);_!=null&&x(e,["muteBass"],_);const b=g(t,["muteDrums"]);b!=null&&x(e,["muteDrums"],b);const v=g(t,["onlyBassAndDrums"]);return v!=null&&x(e,["onlyBassAndDrums"],v),e}function Jv(t){const e={},n=g(t,["musicGenerationConfig"]);return n!=null&&x(e,["musicGenerationConfig"],Q2(n)),e}function e_(t){const e={},n=g(t,["model"]);return n!=null&&x(e,["model"],n),e}function t_(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Z2(r))),x(e,["weightedPrompts"],s)}return e}function Q0(t){const e={},n=g(t,["setup"]);n!=null&&x(e,["setup"],e_(n));const s=g(t,["clientContent"]);s!=null&&x(e,["clientContent"],t_(s));const r=g(t,["musicGenerationConfig"]);r!=null&&x(e,["musicGenerationConfig"],Q2(r));const l=g(t,["playbackControl"]);return l!=null&&x(e,["playbackControl"],l),e}function Zv(){return{}}function Qv(){return{}}function eA(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function tA(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function nA(t){const e={},n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function sA(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["data"]);s!=null&&x(e,["data"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function aA(t){const e={},n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function rA(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function iA(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],eA(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],nA(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],aA(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function oA(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],tA(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],sA(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],rA(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function lA(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>iA(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function cA(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>oA(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function AE(t){const e={},n=g(t,["text"]);n!=null&&x(e,["text"],n);const s=g(t,["finished"]);return s!=null&&x(e,["finished"],s),e}function SE(t){const e={},n=g(t,["text"]);n!=null&&x(e,["text"],n);const s=g(t,["finished"]);return s!=null&&x(e,["finished"],s),e}function uA(t){const e={},n=g(t,["retrievedUrl"]);n!=null&&x(e,["retrievedUrl"],n);const s=g(t,["urlRetrievalStatus"]);return s!=null&&x(e,["urlRetrievalStatus"],s),e}function dA(t){const e={},n=g(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>uA(r))),x(e,["urlMetadata"],s)}return e}function fA(t){const e={},n=g(t,["modelTurn"]);n!=null&&x(e,["modelTurn"],lA(n));const s=g(t,["turnComplete"]);s!=null&&x(e,["turnComplete"],s);const r=g(t,["interrupted"]);r!=null&&x(e,["interrupted"],r);const l=g(t,["groundingMetadata"]);l!=null&&x(e,["groundingMetadata"],l);const c=g(t,["generationComplete"]);c!=null&&x(e,["generationComplete"],c);const d=g(t,["inputTranscription"]);d!=null&&x(e,["inputTranscription"],AE(d));const f=g(t,["outputTranscription"]);f!=null&&x(e,["outputTranscription"],AE(f));const h=g(t,["urlContextMetadata"]);return h!=null&&x(e,["urlContextMetadata"],dA(h)),e}function hA(t){const e={},n=g(t,["modelTurn"]);n!=null&&x(e,["modelTurn"],cA(n));const s=g(t,["turnComplete"]);s!=null&&x(e,["turnComplete"],s);const r=g(t,["interrupted"]);r!=null&&x(e,["interrupted"],r);const l=g(t,["groundingMetadata"]);l!=null&&x(e,["groundingMetadata"],l);const c=g(t,["generationComplete"]);c!=null&&x(e,["generationComplete"],c);const d=g(t,["inputTranscription"]);d!=null&&x(e,["inputTranscription"],SE(d));const f=g(t,["outputTranscription"]);return f!=null&&x(e,["outputTranscription"],SE(f)),e}function mA(t){const e={},n=g(t,["id"]);n!=null&&x(e,["id"],n);const s=g(t,["args"]);s!=null&&x(e,["args"],s);const r=g(t,["name"]);return r!=null&&x(e,["name"],r),e}function pA(t){const e={},n=g(t,["args"]);n!=null&&x(e,["args"],n);const s=g(t,["name"]);return s!=null&&x(e,["name"],s),e}function gA(t){const e={},n=g(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mA(r))),x(e,["functionCalls"],s)}return e}function xA(t){const e={},n=g(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>pA(r))),x(e,["functionCalls"],s)}return e}function EA(t){const e={},n=g(t,["ids"]);return n!=null&&x(e,["ids"],n),e}function _A(t){const e={},n=g(t,["ids"]);return n!=null&&x(e,["ids"],n),e}function rh(t){const e={},n=g(t,["modality"]);n!=null&&x(e,["modality"],n);const s=g(t,["tokenCount"]);return s!=null&&x(e,["tokenCount"],s),e}function ih(t){const e={},n=g(t,["modality"]);n!=null&&x(e,["modality"],n);const s=g(t,["tokenCount"]);return s!=null&&x(e,["tokenCount"],s),e}function bA(t){const e={},n=g(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const s=g(t,["cachedContentTokenCount"]);s!=null&&x(e,["cachedContentTokenCount"],s);const r=g(t,["responseTokenCount"]);r!=null&&x(e,["responseTokenCount"],r);const l=g(t,["toolUsePromptTokenCount"]);l!=null&&x(e,["toolUsePromptTokenCount"],l);const c=g(t,["thoughtsTokenCount"]);c!=null&&x(e,["thoughtsTokenCount"],c);const d=g(t,["totalTokenCount"]);d!=null&&x(e,["totalTokenCount"],d);const f=g(t,["promptTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(y=>rh(y))),x(e,["promptTokensDetails"],v)}const h=g(t,["cacheTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(y=>rh(y))),x(e,["cacheTokensDetails"],v)}const _=g(t,["responseTokensDetails"]);if(_!=null){let v=_;Array.isArray(v)&&(v=v.map(y=>rh(y))),x(e,["responseTokensDetails"],v)}const b=g(t,["toolUsePromptTokensDetails"]);if(b!=null){let v=b;Array.isArray(v)&&(v=v.map(y=>rh(y))),x(e,["toolUsePromptTokensDetails"],v)}return e}function TA(t){const e={},n=g(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const s=g(t,["cachedContentTokenCount"]);s!=null&&x(e,["cachedContentTokenCount"],s);const r=g(t,["candidatesTokenCount"]);r!=null&&x(e,["responseTokenCount"],r);const l=g(t,["toolUsePromptTokenCount"]);l!=null&&x(e,["toolUsePromptTokenCount"],l);const c=g(t,["thoughtsTokenCount"]);c!=null&&x(e,["thoughtsTokenCount"],c);const d=g(t,["totalTokenCount"]);d!=null&&x(e,["totalTokenCount"],d);const f=g(t,["promptTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(C=>ih(C))),x(e,["promptTokensDetails"],y)}const h=g(t,["cacheTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(C=>ih(C))),x(e,["cacheTokensDetails"],y)}const _=g(t,["candidatesTokensDetails"]);if(_!=null){let y=_;Array.isArray(y)&&(y=y.map(C=>ih(C))),x(e,["responseTokensDetails"],y)}const b=g(t,["toolUsePromptTokensDetails"]);if(b!=null){let y=b;Array.isArray(y)&&(y=y.map(C=>ih(C))),x(e,["toolUsePromptTokensDetails"],y)}const v=g(t,["trafficType"]);return v!=null&&x(e,["trafficType"],v),e}function yA(t){const e={},n=g(t,["timeLeft"]);return n!=null&&x(e,["timeLeft"],n),e}function NA(t){const e={},n=g(t,["timeLeft"]);return n!=null&&x(e,["timeLeft"],n),e}function vA(t){const e={},n=g(t,["newHandle"]);n!=null&&x(e,["newHandle"],n);const s=g(t,["resumable"]);s!=null&&x(e,["resumable"],s);const r=g(t,["lastConsumedClientMessageIndex"]);return r!=null&&x(e,["lastConsumedClientMessageIndex"],r),e}function AA(t){const e={},n=g(t,["newHandle"]);n!=null&&x(e,["newHandle"],n);const s=g(t,["resumable"]);s!=null&&x(e,["resumable"],s);const r=g(t,["lastConsumedClientMessageIndex"]);return r!=null&&x(e,["lastConsumedClientMessageIndex"],r),e}function SA(t){const e={};g(t,["setupComplete"])!=null&&x(e,["setupComplete"],Zv());const s=g(t,["serverContent"]);s!=null&&x(e,["serverContent"],fA(s));const r=g(t,["toolCall"]);r!=null&&x(e,["toolCall"],gA(r));const l=g(t,["toolCallCancellation"]);l!=null&&x(e,["toolCallCancellation"],EA(l));const c=g(t,["usageMetadata"]);c!=null&&x(e,["usageMetadata"],bA(c));const d=g(t,["goAway"]);d!=null&&x(e,["goAway"],yA(d));const f=g(t,["sessionResumptionUpdate"]);return f!=null&&x(e,["sessionResumptionUpdate"],vA(f)),e}function CA(t){const e={};g(t,["setupComplete"])!=null&&x(e,["setupComplete"],Qv());const s=g(t,["serverContent"]);s!=null&&x(e,["serverContent"],hA(s));const r=g(t,["toolCall"]);r!=null&&x(e,["toolCall"],xA(r));const l=g(t,["toolCallCancellation"]);l!=null&&x(e,["toolCallCancellation"],_A(l));const c=g(t,["usageMetadata"]);c!=null&&x(e,["usageMetadata"],TA(c));const d=g(t,["goAway"]);d!=null&&x(e,["goAway"],NA(d));const f=g(t,["sessionResumptionUpdate"]);return f!=null&&x(e,["sessionResumptionUpdate"],AA(f)),e}function LA(){return{}}function wA(t){const e={},n=g(t,["text"]);n!=null&&x(e,["text"],n);const s=g(t,["weight"]);return s!=null&&x(e,["weight"],s),e}function IA(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>wA(r))),x(e,["weightedPrompts"],s)}return e}function DA(t){const e={},n=g(t,["temperature"]);n!=null&&x(e,["temperature"],n);const s=g(t,["topK"]);s!=null&&x(e,["topK"],s);const r=g(t,["seed"]);r!=null&&x(e,["seed"],r);const l=g(t,["guidance"]);l!=null&&x(e,["guidance"],l);const c=g(t,["bpm"]);c!=null&&x(e,["bpm"],c);const d=g(t,["density"]);d!=null&&x(e,["density"],d);const f=g(t,["brightness"]);f!=null&&x(e,["brightness"],f);const h=g(t,["scale"]);h!=null&&x(e,["scale"],h);const _=g(t,["muteBass"]);_!=null&&x(e,["muteBass"],_);const b=g(t,["muteDrums"]);b!=null&&x(e,["muteDrums"],b);const v=g(t,["onlyBassAndDrums"]);return v!=null&&x(e,["onlyBassAndDrums"],v),e}function RA(t){const e={},n=g(t,["clientContent"]);n!=null&&x(e,["clientContent"],IA(n));const s=g(t,["musicGenerationConfig"]);return s!=null&&x(e,["musicGenerationConfig"],DA(s)),e}function OA(t){const e={},n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);s!=null&&x(e,["mimeType"],s);const r=g(t,["sourceMetadata"]);return r!=null&&x(e,["sourceMetadata"],RA(r)),e}function PA(t){const e={},n=g(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>OA(r))),x(e,["audioChunks"],s)}return e}function MA(t){const e={},n=g(t,["text"]);n!=null&&x(e,["text"],n);const s=g(t,["filteredReason"]);return s!=null&&x(e,["filteredReason"],s),e}function kA(t){const e={};g(t,["setupComplete"])!=null&&x(e,["setupComplete"],LA());const s=g(t,["serverContent"]);s!=null&&x(e,["serverContent"],PA(s));const r=g(t,["filteredPrompt"]);return r!=null&&x(e,["filteredPrompt"],MA(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jA(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function BA(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function UA(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function FA(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],jA(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],BA(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],UA(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function Xh(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>FA(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function VA(t){const e={},n=g(t,["anyOf"]);n!=null&&x(e,["anyOf"],n);const s=g(t,["default"]);s!=null&&x(e,["default"],s);const r=g(t,["description"]);r!=null&&x(e,["description"],r);const l=g(t,["enum"]);l!=null&&x(e,["enum"],l);const c=g(t,["example"]);c!=null&&x(e,["example"],c);const d=g(t,["format"]);d!=null&&x(e,["format"],d);const f=g(t,["items"]);f!=null&&x(e,["items"],f);const h=g(t,["maxItems"]);h!=null&&x(e,["maxItems"],h);const _=g(t,["maxLength"]);_!=null&&x(e,["maxLength"],_);const b=g(t,["maxProperties"]);b!=null&&x(e,["maxProperties"],b);const v=g(t,["maximum"]);v!=null&&x(e,["maximum"],v);const y=g(t,["minItems"]);y!=null&&x(e,["minItems"],y);const C=g(t,["minLength"]);C!=null&&x(e,["minLength"],C);const L=g(t,["minProperties"]);L!=null&&x(e,["minProperties"],L);const O=g(t,["minimum"]);O!=null&&x(e,["minimum"],O);const I=g(t,["nullable"]);I!=null&&x(e,["nullable"],I);const j=g(t,["pattern"]);j!=null&&x(e,["pattern"],j);const R=g(t,["properties"]);R!=null&&x(e,["properties"],R);const U=g(t,["propertyOrdering"]);U!=null&&x(e,["propertyOrdering"],U);const te=g(t,["required"]);te!=null&&x(e,["required"],te);const Q=g(t,["title"]);Q!=null&&x(e,["title"],Q);const ne=g(t,["type"]);return ne!=null&&x(e,["type"],ne),e}function GA(t){const e={};if(g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=g(t,["category"]);n!=null&&x(e,["category"],n);const s=g(t,["threshold"]);return s!=null&&x(e,["threshold"],s),e}function HA(t){const e={},n=g(t,["behavior"]);n!=null&&x(e,["behavior"],n);const s=g(t,["description"]);s!=null&&x(e,["description"],s);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const l=g(t,["parameters"]);l!=null&&x(e,["parameters"],l);const c=g(t,["parametersJsonSchema"]);c!=null&&x(e,["parametersJsonSchema"],c);const d=g(t,["response"]);d!=null&&x(e,["response"],d);const f=g(t,["responseJsonSchema"]);return f!=null&&x(e,["responseJsonSchema"],f),e}function YA(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function qA(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],YA(n)),e}function zA(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function $A(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],zA(n)),e}function WA(){return{}}function KA(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>HA(f))),x(e,["functionDeclarations"],d)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=g(t,["googleSearch"]);s!=null&&x(e,["googleSearch"],qA(s));const r=g(t,["googleSearchRetrieval"]);if(r!=null&&x(e,["googleSearchRetrieval"],$A(r)),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(t,["urlContext"])!=null&&x(e,["urlContext"],WA());const c=g(t,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function XA(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["allowedFunctionNames"]);return s!=null&&x(e,["allowedFunctionNames"],s),e}function JA(t){const e={},n=g(t,["latitude"]);n!=null&&x(e,["latitude"],n);const s=g(t,["longitude"]);return s!=null&&x(e,["longitude"],s),e}function ZA(t){const e={},n=g(t,["latLng"]);n!=null&&x(e,["latLng"],JA(n));const s=g(t,["languageCode"]);return s!=null&&x(e,["languageCode"],s),e}function QA(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],XA(n));const s=g(t,["retrievalConfig"]);return s!=null&&x(e,["retrievalConfig"],ZA(s)),e}function eS(t){const e={},n=g(t,["voiceName"]);return n!=null&&x(e,["voiceName"],n),e}function n_(t){const e={},n=g(t,["prebuiltVoiceConfig"]);return n!=null&&x(e,["prebuiltVoiceConfig"],eS(n)),e}function tS(t){const e={},n=g(t,["speaker"]);n!=null&&x(e,["speaker"],n);const s=g(t,["voiceConfig"]);return s!=null&&x(e,["voiceConfig"],n_(s)),e}function nS(t){const e={},n=g(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>tS(r))),x(e,["speakerVoiceConfigs"],s)}return e}function sS(t){const e={},n=g(t,["voiceConfig"]);n!=null&&x(e,["voiceConfig"],n_(n));const s=g(t,["multiSpeakerVoiceConfig"]);s!=null&&x(e,["multiSpeakerVoiceConfig"],nS(s));const r=g(t,["languageCode"]);return r!=null&&x(e,["languageCode"],r),e}function aS(t){const e={},n=g(t,["includeThoughts"]);n!=null&&x(e,["includeThoughts"],n);const s=g(t,["thinkingBudget"]);return s!=null&&x(e,["thinkingBudget"],s),e}function rS(t,e,n){const s={},r=g(e,["systemInstruction"]);n!==void 0&&r!=null&&x(n,["systemInstruction"],Xh(xi(r)));const l=g(e,["temperature"]);l!=null&&x(s,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(s,["topP"],c);const d=g(e,["topK"]);d!=null&&x(s,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&x(s,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(s,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&x(s,["stopSequences"],_);const b=g(e,["responseLogprobs"]);b!=null&&x(s,["responseLogprobs"],b);const v=g(e,["logprobs"]);v!=null&&x(s,["logprobs"],v);const y=g(e,["presencePenalty"]);y!=null&&x(s,["presencePenalty"],y);const C=g(e,["frequencyPenalty"]);C!=null&&x(s,["frequencyPenalty"],C);const L=g(e,["seed"]);L!=null&&x(s,["seed"],L);const O=g(e,["responseMimeType"]);O!=null&&x(s,["responseMimeType"],O);const I=g(e,["responseSchema"]);if(I!=null&&x(s,["responseSchema"],VA(jh(I))),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=g(e,["safetySettings"]);if(n!==void 0&&j!=null){let xe=j;Array.isArray(xe)&&(xe=xe.map(F=>GA(F))),x(n,["safetySettings"],xe)}const R=g(e,["tools"]);if(n!==void 0&&R!=null){let xe=of(R);Array.isArray(xe)&&(xe=xe.map(F=>KA(rf(F)))),x(n,["tools"],xe)}const U=g(e,["toolConfig"]);if(n!==void 0&&U!=null&&x(n,["toolConfig"],QA(U)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=g(e,["cachedContent"]);n!==void 0&&te!=null&&x(n,["cachedContent"],vc(t,te));const Q=g(e,["responseModalities"]);Q!=null&&x(s,["responseModalities"],Q);const ne=g(e,["mediaResolution"]);ne!=null&&x(s,["mediaResolution"],ne);const J=g(e,["speechConfig"]);if(J!=null&&x(s,["speechConfig"],sS(q2(J))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=g(e,["thinkingConfig"]);return oe!=null&&x(s,["thinkingConfig"],aS(oe)),s}function CE(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(r);Array.isArray(c)&&(c=c.map(d=>Xh(d))),x(n,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(n,["generationConfig"],rS(t,l,n)),n}function iS(t,e){const n={},s=g(t,["taskType"]);e!==void 0&&s!=null&&x(e,["requests[]","taskType"],s);const r=g(t,["title"]);e!==void 0&&r!=null&&x(e,["requests[]","title"],r);const l=g(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&x(e,["requests[]","outputDimensionality"],l),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function oS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);r!=null&&x(n,["requests[]","content"],Y2(t,r));const l=g(e,["config"]);l!=null&&x(n,["config"],iS(l,n));const c=g(e,["model"]);return c!==void 0&&x(n,["requests[]","model"],la(t,c)),n}function lS(t,e){const n={};if(g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=g(t,["numberOfImages"]);e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s);const r=g(t,["aspectRatio"]);e!==void 0&&r!=null&&x(e,["parameters","aspectRatio"],r);const l=g(t,["guidanceScale"]);if(e!==void 0&&l!=null&&x(e,["parameters","guidanceScale"],l),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&x(e,["parameters","safetySetting"],c);const d=g(t,["personGeneration"]);e!==void 0&&d!=null&&x(e,["parameters","personGeneration"],d);const f=g(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&x(e,["parameters","includeSafetyAttributes"],f);const h=g(t,["includeRaiReason"]);e!==void 0&&h!=null&&x(e,["parameters","includeRaiReason"],h);const _=g(t,["language"]);e!==void 0&&_!=null&&x(e,["parameters","language"],_);const b=g(t,["outputMimeType"]);e!==void 0&&b!=null&&x(e,["parameters","outputOptions","mimeType"],b);const v=g(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&x(e,["parameters","outputOptions","compressionQuality"],v),g(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function cS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["prompt"]);r!=null&&x(n,["instances[0]","prompt"],r);const l=g(e,["config"]);return l!=null&&x(n,["config"],lS(l,n)),n}function uS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","name"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function dS(t,e,n){const s={},r=g(e,["pageSize"]);n!==void 0&&r!=null&&x(n,["_query","pageSize"],r);const l=g(e,["pageToken"]);n!==void 0&&l!=null&&x(n,["_query","pageToken"],l);const c=g(e,["filter"]);n!==void 0&&c!=null&&x(n,["_query","filter"],c);const d=g(e,["queryBase"]);return n!==void 0&&d!=null&&x(n,["_url","models_url"],W2(t,d)),s}function fS(t,e){const n={},s=g(e,["config"]);return s!=null&&x(n,["config"],dS(t,s,n)),n}function hS(t,e){const n={},s=g(t,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const r=g(t,["description"]);e!==void 0&&r!=null&&x(e,["description"],r);const l=g(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&x(e,["defaultCheckpointId"],l),n}function mS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","name"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],hS(r,n)),n}function pS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","name"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function gS(t){const e={};if(g(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(r);Array.isArray(c)&&(c=c.map(d=>Xh(d))),x(n,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(n,["config"],gS(l)),n}function ES(t){const e={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(t,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],Fl(n));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function _S(t,e){const n={},s=g(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s),g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=g(t,["durationSeconds"]);if(e!==void 0&&r!=null&&x(e,["parameters","durationSeconds"],r),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(t,["aspectRatio"]);if(e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l),g(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const c=g(t,["personGeneration"]);if(e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c),g(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=g(t,["negativePrompt"]);e!==void 0&&d!=null&&x(e,["parameters","negativePrompt"],d);const f=g(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&x(e,["parameters","enhancePrompt"],f),g(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(g(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return n}function bS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["prompt"]);r!=null&&x(n,["instances[0]","prompt"],r);const l=g(e,["image"]);if(l!=null&&x(n,["instances[0]","image"],ES(l)),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=g(e,["config"]);return c!=null&&x(n,["config"],_S(c,n)),n}function TS(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function yS(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["data"]);s!=null&&x(e,["data"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function NS(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function vS(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],TS(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],yS(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],NS(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function Zu(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>vS(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function AS(t){const e={},n=g(t,["anyOf"]);n!=null&&x(e,["anyOf"],n);const s=g(t,["default"]);s!=null&&x(e,["default"],s);const r=g(t,["description"]);r!=null&&x(e,["description"],r);const l=g(t,["enum"]);l!=null&&x(e,["enum"],l);const c=g(t,["example"]);c!=null&&x(e,["example"],c);const d=g(t,["format"]);d!=null&&x(e,["format"],d);const f=g(t,["items"]);f!=null&&x(e,["items"],f);const h=g(t,["maxItems"]);h!=null&&x(e,["maxItems"],h);const _=g(t,["maxLength"]);_!=null&&x(e,["maxLength"],_);const b=g(t,["maxProperties"]);b!=null&&x(e,["maxProperties"],b);const v=g(t,["maximum"]);v!=null&&x(e,["maximum"],v);const y=g(t,["minItems"]);y!=null&&x(e,["minItems"],y);const C=g(t,["minLength"]);C!=null&&x(e,["minLength"],C);const L=g(t,["minProperties"]);L!=null&&x(e,["minProperties"],L);const O=g(t,["minimum"]);O!=null&&x(e,["minimum"],O);const I=g(t,["nullable"]);I!=null&&x(e,["nullable"],I);const j=g(t,["pattern"]);j!=null&&x(e,["pattern"],j);const R=g(t,["properties"]);R!=null&&x(e,["properties"],R);const U=g(t,["propertyOrdering"]);U!=null&&x(e,["propertyOrdering"],U);const te=g(t,["required"]);te!=null&&x(e,["required"],te);const Q=g(t,["title"]);Q!=null&&x(e,["title"],Q);const ne=g(t,["type"]);return ne!=null&&x(e,["type"],ne),e}function SS(t){const e={},n=g(t,["featureSelectionPreference"]);return n!=null&&x(e,["featureSelectionPreference"],n),e}function CS(t){const e={},n=g(t,["method"]);n!=null&&x(e,["method"],n);const s=g(t,["category"]);s!=null&&x(e,["category"],s);const r=g(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function LS(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&x(e,["description"],n);const s=g(t,["name"]);s!=null&&x(e,["name"],s);const r=g(t,["parameters"]);r!=null&&x(e,["parameters"],r);const l=g(t,["parametersJsonSchema"]);l!=null&&x(e,["parametersJsonSchema"],l);const c=g(t,["response"]);c!=null&&x(e,["response"],c);const d=g(t,["responseJsonSchema"]);return d!=null&&x(e,["responseJsonSchema"],d),e}function wS(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function IS(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],wS(n)),e}function DS(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function RS(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],DS(n)),e}function OS(){return{}}function PS(t){const e={},n=g(t,["apiKeyString"]);return n!=null&&x(e,["apiKeyString"],n),e}function MS(t){const e={},n=g(t,["apiKeyConfig"]);n!=null&&x(e,["apiKeyConfig"],PS(n));const s=g(t,["authType"]);s!=null&&x(e,["authType"],s);const r=g(t,["googleServiceAccountConfig"]);r!=null&&x(e,["googleServiceAccountConfig"],r);const l=g(t,["httpBasicAuthConfig"]);l!=null&&x(e,["httpBasicAuthConfig"],l);const c=g(t,["oauthConfig"]);c!=null&&x(e,["oauthConfig"],c);const d=g(t,["oidcConfig"]);return d!=null&&x(e,["oidcConfig"],d),e}function kS(t){const e={},n=g(t,["authConfig"]);return n!=null&&x(e,["authConfig"],MS(n)),e}function jS(){return{}}function s_(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>LS(b))),x(e,["functionDeclarations"],_)}const s=g(t,["retrieval"]);s!=null&&x(e,["retrieval"],s);const r=g(t,["googleSearch"]);r!=null&&x(e,["googleSearch"],IS(r));const l=g(t,["googleSearchRetrieval"]);l!=null&&x(e,["googleSearchRetrieval"],RS(l)),g(t,["enterpriseWebSearch"])!=null&&x(e,["enterpriseWebSearch"],OS());const d=g(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],kS(d)),g(t,["urlContext"])!=null&&x(e,["urlContext"],jS());const h=g(t,["codeExecution"]);return h!=null&&x(e,["codeExecution"],h),e}function BS(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["allowedFunctionNames"]);return s!=null&&x(e,["allowedFunctionNames"],s),e}function US(t){const e={},n=g(t,["latitude"]);n!=null&&x(e,["latitude"],n);const s=g(t,["longitude"]);return s!=null&&x(e,["longitude"],s),e}function FS(t){const e={},n=g(t,["latLng"]);n!=null&&x(e,["latLng"],US(n));const s=g(t,["languageCode"]);return s!=null&&x(e,["languageCode"],s),e}function VS(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],BS(n));const s=g(t,["retrievalConfig"]);return s!=null&&x(e,["retrievalConfig"],FS(s)),e}function GS(t){const e={},n=g(t,["voiceName"]);return n!=null&&x(e,["voiceName"],n),e}function HS(t){const e={},n=g(t,["prebuiltVoiceConfig"]);return n!=null&&x(e,["prebuiltVoiceConfig"],GS(n)),e}function YS(t){const e={},n=g(t,["voiceConfig"]);if(n!=null&&x(e,["voiceConfig"],HS(n)),g(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=g(t,["languageCode"]);return s!=null&&x(e,["languageCode"],s),e}function qS(t){const e={},n=g(t,["includeThoughts"]);n!=null&&x(e,["includeThoughts"],n);const s=g(t,["thinkingBudget"]);return s!=null&&x(e,["thinkingBudget"],s),e}function zS(t,e,n){const s={},r=g(e,["systemInstruction"]);n!==void 0&&r!=null&&x(n,["systemInstruction"],Zu(xi(r)));const l=g(e,["temperature"]);l!=null&&x(s,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(s,["topP"],c);const d=g(e,["topK"]);d!=null&&x(s,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&x(s,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(s,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&x(s,["stopSequences"],_);const b=g(e,["responseLogprobs"]);b!=null&&x(s,["responseLogprobs"],b);const v=g(e,["logprobs"]);v!=null&&x(s,["logprobs"],v);const y=g(e,["presencePenalty"]);y!=null&&x(s,["presencePenalty"],y);const C=g(e,["frequencyPenalty"]);C!=null&&x(s,["frequencyPenalty"],C);const L=g(e,["seed"]);L!=null&&x(s,["seed"],L);const O=g(e,["responseMimeType"]);O!=null&&x(s,["responseMimeType"],O);const I=g(e,["responseSchema"]);I!=null&&x(s,["responseSchema"],AS(jh(I)));const j=g(e,["routingConfig"]);j!=null&&x(s,["routingConfig"],j);const R=g(e,["modelSelectionConfig"]);R!=null&&x(s,["modelConfig"],SS(R));const U=g(e,["safetySettings"]);if(n!==void 0&&U!=null){let K=U;Array.isArray(K)&&(K=K.map(Te=>CS(Te))),x(n,["safetySettings"],K)}const te=g(e,["tools"]);if(n!==void 0&&te!=null){let K=of(te);Array.isArray(K)&&(K=K.map(Te=>s_(rf(Te)))),x(n,["tools"],K)}const Q=g(e,["toolConfig"]);n!==void 0&&Q!=null&&x(n,["toolConfig"],VS(Q));const ne=g(e,["labels"]);n!==void 0&&ne!=null&&x(n,["labels"],ne);const J=g(e,["cachedContent"]);n!==void 0&&J!=null&&x(n,["cachedContent"],vc(t,J));const oe=g(e,["responseModalities"]);oe!=null&&x(s,["responseModalities"],oe);const xe=g(e,["mediaResolution"]);xe!=null&&x(s,["mediaResolution"],xe);const F=g(e,["speechConfig"]);F!=null&&x(s,["speechConfig"],YS(q2(F)));const H=g(e,["audioTimestamp"]);H!=null&&x(s,["audioTimestamp"],H);const re=g(e,["thinkingConfig"]);return re!=null&&x(s,["thinkingConfig"],qS(re)),s}function LE(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(r);Array.isArray(c)&&(c=c.map(d=>Zu(d))),x(n,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(n,["generationConfig"],zS(t,l,n)),n}function $S(t,e){const n={},s=g(t,["taskType"]);e!==void 0&&s!=null&&x(e,["instances[]","task_type"],s);const r=g(t,["title"]);e!==void 0&&r!=null&&x(e,["instances[]","title"],r);const l=g(t,["outputDimensionality"]);e!==void 0&&l!=null&&x(e,["parameters","outputDimensionality"],l);const c=g(t,["mimeType"]);e!==void 0&&c!=null&&x(e,["instances[]","mimeType"],c);const d=g(t,["autoTruncate"]);return e!==void 0&&d!=null&&x(e,["parameters","autoTruncate"],d),n}function WS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);r!=null&&x(n,["instances[]","content"],Y2(t,r));const l=g(e,["config"]);return l!=null&&x(n,["config"],$S(l,n)),n}function KS(t,e){const n={},s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const r=g(t,["negativePrompt"]);e!==void 0&&r!=null&&x(e,["parameters","negativePrompt"],r);const l=g(t,["numberOfImages"]);e!==void 0&&l!=null&&x(e,["parameters","sampleCount"],l);const c=g(t,["aspectRatio"]);e!==void 0&&c!=null&&x(e,["parameters","aspectRatio"],c);const d=g(t,["guidanceScale"]);e!==void 0&&d!=null&&x(e,["parameters","guidanceScale"],d);const f=g(t,["seed"]);e!==void 0&&f!=null&&x(e,["parameters","seed"],f);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&x(e,["parameters","safetySetting"],h);const _=g(t,["personGeneration"]);e!==void 0&&_!=null&&x(e,["parameters","personGeneration"],_);const b=g(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&x(e,["parameters","includeSafetyAttributes"],b);const v=g(t,["includeRaiReason"]);e!==void 0&&v!=null&&x(e,["parameters","includeRaiReason"],v);const y=g(t,["language"]);e!==void 0&&y!=null&&x(e,["parameters","language"],y);const C=g(t,["outputMimeType"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","mimeType"],C);const L=g(t,["outputCompressionQuality"]);e!==void 0&&L!=null&&x(e,["parameters","outputOptions","compressionQuality"],L);const O=g(t,["addWatermark"]);e!==void 0&&O!=null&&x(e,["parameters","addWatermark"],O);const I=g(t,["enhancePrompt"]);return e!==void 0&&I!=null&&x(e,["parameters","enhancePrompt"],I),n}function XS(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["prompt"]);r!=null&&x(n,["instances[0]","prompt"],r);const l=g(e,["config"]);return l!=null&&x(n,["config"],KS(l,n)),n}function Jh(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const s=g(t,["imageBytes"]);s!=null&&x(e,["bytesBase64Encoded"],Fl(s));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function JS(t){const e={},n=g(t,["maskMode"]);n!=null&&x(e,["maskMode"],n);const s=g(t,["segmentationClasses"]);s!=null&&x(e,["maskClasses"],s);const r=g(t,["maskDilation"]);return r!=null&&x(e,["dilation"],r),e}function ZS(t){const e={},n=g(t,["controlType"]);n!=null&&x(e,["controlType"],n);const s=g(t,["enableControlImageComputation"]);return s!=null&&x(e,["computeControl"],s),e}function QS(t){const e={},n=g(t,["styleDescription"]);return n!=null&&x(e,["styleDescription"],n),e}function eC(t){const e={},n=g(t,["subjectType"]);n!=null&&x(e,["subjectType"],n);const s=g(t,["subjectDescription"]);return s!=null&&x(e,["subjectDescription"],s),e}function tC(t){const e={},n=g(t,["referenceImage"]);n!=null&&x(e,["referenceImage"],Jh(n));const s=g(t,["referenceId"]);s!=null&&x(e,["referenceId"],s);const r=g(t,["referenceType"]);r!=null&&x(e,["referenceType"],r);const l=g(t,["maskImageConfig"]);l!=null&&x(e,["maskImageConfig"],JS(l));const c=g(t,["controlImageConfig"]);c!=null&&x(e,["controlImageConfig"],ZS(c));const d=g(t,["styleImageConfig"]);d!=null&&x(e,["styleImageConfig"],QS(d));const f=g(t,["subjectImageConfig"]);return f!=null&&x(e,["subjectImageConfig"],eC(f)),e}function nC(t,e){const n={},s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const r=g(t,["negativePrompt"]);e!==void 0&&r!=null&&x(e,["parameters","negativePrompt"],r);const l=g(t,["numberOfImages"]);e!==void 0&&l!=null&&x(e,["parameters","sampleCount"],l);const c=g(t,["aspectRatio"]);e!==void 0&&c!=null&&x(e,["parameters","aspectRatio"],c);const d=g(t,["guidanceScale"]);e!==void 0&&d!=null&&x(e,["parameters","guidanceScale"],d);const f=g(t,["seed"]);e!==void 0&&f!=null&&x(e,["parameters","seed"],f);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&x(e,["parameters","safetySetting"],h);const _=g(t,["personGeneration"]);e!==void 0&&_!=null&&x(e,["parameters","personGeneration"],_);const b=g(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&x(e,["parameters","includeSafetyAttributes"],b);const v=g(t,["includeRaiReason"]);e!==void 0&&v!=null&&x(e,["parameters","includeRaiReason"],v);const y=g(t,["language"]);e!==void 0&&y!=null&&x(e,["parameters","language"],y);const C=g(t,["outputMimeType"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","mimeType"],C);const L=g(t,["outputCompressionQuality"]);e!==void 0&&L!=null&&x(e,["parameters","outputOptions","compressionQuality"],L);const O=g(t,["editMode"]);e!==void 0&&O!=null&&x(e,["parameters","editMode"],O);const I=g(t,["baseSteps"]);return e!==void 0&&I!=null&&x(e,["parameters","editConfig","baseSteps"],I),n}function sC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["prompt"]);r!=null&&x(n,["instances[0]","prompt"],r);const l=g(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>tC(f))),x(n,["instances[0]","referenceImages"],d)}const c=g(e,["config"]);return c!=null&&x(n,["config"],nC(c,n)),n}function aC(t,e){const n={},s=g(t,["includeRaiReason"]);e!==void 0&&s!=null&&x(e,["parameters","includeRaiReason"],s);const r=g(t,["outputMimeType"]);e!==void 0&&r!=null&&x(e,["parameters","outputOptions","mimeType"],r);const l=g(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&x(e,["parameters","outputOptions","compressionQuality"],l);const c=g(t,["numberOfImages"]);e!==void 0&&c!=null&&x(e,["parameters","sampleCount"],c);const d=g(t,["mode"]);return e!==void 0&&d!=null&&x(e,["parameters","mode"],d),n}function rC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["image"]);r!=null&&x(n,["instances[0]","image"],Jh(r));const l=g(e,["upscaleFactor"]);l!=null&&x(n,["parameters","upscaleConfig","upscaleFactor"],l);const c=g(e,["config"]);return c!=null&&x(n,["config"],aC(c,n)),n}function iC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","name"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function oC(t,e,n){const s={},r=g(e,["pageSize"]);n!==void 0&&r!=null&&x(n,["_query","pageSize"],r);const l=g(e,["pageToken"]);n!==void 0&&l!=null&&x(n,["_query","pageToken"],l);const c=g(e,["filter"]);n!==void 0&&c!=null&&x(n,["_query","filter"],c);const d=g(e,["queryBase"]);return n!==void 0&&d!=null&&x(n,["_url","models_url"],W2(t,d)),s}function lC(t,e){const n={},s=g(e,["config"]);return s!=null&&x(n,["config"],oC(t,s,n)),n}function cC(t,e){const n={},s=g(t,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const r=g(t,["description"]);e!==void 0&&r!=null&&x(e,["description"],r);const l=g(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&x(e,["defaultCheckpointId"],l),n}function uC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],cC(r,n)),n}function dC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","name"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],r),n}function fC(t,e){const n={},s=g(t,["systemInstruction"]);e!==void 0&&s!=null&&x(e,["systemInstruction"],Zu(xi(s)));const r=g(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>s_(d))),x(e,["tools"],c)}const l=g(t,["generationConfig"]);return e!==void 0&&l!=null&&x(e,["generationConfig"],l),n}function hC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(r);Array.isArray(c)&&(c=c.map(d=>Zu(d))),x(n,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(n,["config"],fC(l,n)),n}function mC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["contents"]);if(r!=null){let c=Vo(r);Array.isArray(c)&&(c=c.map(d=>Zu(d))),x(n,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(n,["config"],l),n}function pC(t){const e={},n=g(t,["uri"]);n!=null&&x(e,["gcsUri"],n);const s=g(t,["videoBytes"]);s!=null&&x(e,["bytesBase64Encoded"],Fl(s));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function gC(t,e){const n={},s=g(t,["numberOfVideos"]);e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s);const r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const l=g(t,["fps"]);e!==void 0&&l!=null&&x(e,["parameters","fps"],l);const c=g(t,["durationSeconds"]);e!==void 0&&c!=null&&x(e,["parameters","durationSeconds"],c);const d=g(t,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const f=g(t,["aspectRatio"]);e!==void 0&&f!=null&&x(e,["parameters","aspectRatio"],f);const h=g(t,["resolution"]);e!==void 0&&h!=null&&x(e,["parameters","resolution"],h);const _=g(t,["personGeneration"]);e!==void 0&&_!=null&&x(e,["parameters","personGeneration"],_);const b=g(t,["pubsubTopic"]);e!==void 0&&b!=null&&x(e,["parameters","pubsubTopic"],b);const v=g(t,["negativePrompt"]);e!==void 0&&v!=null&&x(e,["parameters","negativePrompt"],v);const y=g(t,["enhancePrompt"]);e!==void 0&&y!=null&&x(e,["parameters","enhancePrompt"],y);const C=g(t,["generateAudio"]);e!==void 0&&C!=null&&x(e,["parameters","generateAudio"],C);const L=g(t,["lastFrame"]);return e!==void 0&&L!=null&&x(e,["instances[0]","lastFrame"],Jh(L)),n}function xC(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["_url","model"],la(t,s));const r=g(e,["prompt"]);r!=null&&x(n,["instances[0]","prompt"],r);const l=g(e,["image"]);l!=null&&x(n,["instances[0]","image"],Jh(l));const c=g(e,["video"]);c!=null&&x(n,["instances[0]","video"],pC(c));const d=g(e,["config"]);return d!=null&&x(n,["config"],gC(d,n)),n}function EC(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function _C(t){const e={},n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function bC(t){const e={},n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function TC(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],EC(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],_C(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],bC(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function yC(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>TC(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function NC(t){const e={},n=g(t,["citationSources"]);return n!=null&&x(e,["citations"],n),e}function vC(t){const e={},n=g(t,["retrievedUrl"]);n!=null&&x(e,["retrievedUrl"],n);const s=g(t,["urlRetrievalStatus"]);return s!=null&&x(e,["urlRetrievalStatus"],s),e}function AC(t){const e={},n=g(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>vC(r))),x(e,["urlMetadata"],s)}return e}function SC(t){const e={},n=g(t,["content"]);n!=null&&x(e,["content"],yC(n));const s=g(t,["citationMetadata"]);s!=null&&x(e,["citationMetadata"],NC(s));const r=g(t,["tokenCount"]);r!=null&&x(e,["tokenCount"],r);const l=g(t,["finishReason"]);l!=null&&x(e,["finishReason"],l);const c=g(t,["urlContextMetadata"]);c!=null&&x(e,["urlContextMetadata"],AC(c));const d=g(t,["avgLogprobs"]);d!=null&&x(e,["avgLogprobs"],d);const f=g(t,["groundingMetadata"]);f!=null&&x(e,["groundingMetadata"],f);const h=g(t,["index"]);h!=null&&x(e,["index"],h);const _=g(t,["logprobsResult"]);_!=null&&x(e,["logprobsResult"],_);const b=g(t,["safetyRatings"]);return b!=null&&x(e,["safetyRatings"],b),e}function wE(t){const e={},n=g(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>SC(d))),x(e,["candidates"],c)}const s=g(t,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const r=g(t,["promptFeedback"]);r!=null&&x(e,["promptFeedback"],r);const l=g(t,["usageMetadata"]);return l!=null&&x(e,["usageMetadata"],l),e}function CC(t){const e={},n=g(t,["values"]);return n!=null&&x(e,["values"],n),e}function LC(){return{}}function wC(t){const e={},n=g(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>CC(l))),x(e,["embeddings"],r)}return g(t,["metadata"])!=null&&x(e,["metadata"],LC()),e}function IC(t){const e={},n=g(t,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],Fl(n));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function a_(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const s=g(t,["safetyAttributes","scores"]);s!=null&&x(e,["scores"],s);const r=g(t,["contentType"]);return r!=null&&x(e,["contentType"],r),e}function DC(t){const e={},n=g(t,["_self"]);n!=null&&x(e,["image"],IC(n));const s=g(t,["raiFilteredReason"]);s!=null&&x(e,["raiFilteredReason"],s);const r=g(t,["_self"]);return r!=null&&x(e,["safetyAttributes"],a_(r)),e}function RC(t){const e={},n=g(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>DC(l))),x(e,["generatedImages"],r)}const s=g(t,["positivePromptSafetyAttributes"]);return s!=null&&x(e,["positivePromptSafetyAttributes"],a_(s)),e}function OC(t){const e={},n=g(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const s=g(t,["createTime"]);s!=null&&x(e,["createTime"],s);const r=g(t,["updateTime"]);return r!=null&&x(e,["updateTime"],r),e}function ep(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["displayName"]);s!=null&&x(e,["displayName"],s);const r=g(t,["description"]);r!=null&&x(e,["description"],r);const l=g(t,["version"]);l!=null&&x(e,["version"],l);const c=g(t,["_self"]);c!=null&&x(e,["tunedModelInfo"],OC(c));const d=g(t,["inputTokenLimit"]);d!=null&&x(e,["inputTokenLimit"],d);const f=g(t,["outputTokenLimit"]);f!=null&&x(e,["outputTokenLimit"],f);const h=g(t,["supportedGenerationMethods"]);return h!=null&&x(e,["supportedActions"],h),e}function PC(t,e){const n={},s=g(e,["nextPageToken"]);s!=null&&x(n,["nextPageToken"],s);const r=g(e,["_self"]);if(r!=null){let l=K2(r);Array.isArray(l)&&(l=l.map(c=>ep(c))),x(n,["models"],l)}return n}function MC(){return{}}function kC(t){const e={},n=g(t,["totalTokens"]);n!=null&&x(e,["totalTokens"],n);const s=g(t,["cachedContentTokenCount"]);return s!=null&&x(e,["cachedContentTokenCount"],s),e}function jC(t){const e={},n=g(t,["video","uri"]);n!=null&&x(e,["uri"],n);const s=g(t,["video","encodedVideo"]);s!=null&&x(e,["videoBytes"],Fl(s));const r=g(t,["encoding"]);return r!=null&&x(e,["mimeType"],r),e}function BC(t){const e={},n=g(t,["_self"]);return n!=null&&x(e,["video"],jC(n)),e}function UC(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>BC(c))),x(e,["generatedVideos"],l)}const s=g(t,["raiMediaFilteredCount"]);s!=null&&x(e,["raiMediaFilteredCount"],s);const r=g(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function FC(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["metadata"]);s!=null&&x(e,["metadata"],s);const r=g(t,["done"]);r!=null&&x(e,["done"],r);const l=g(t,["error"]);l!=null&&x(e,["error"],l);const c=g(t,["response","generateVideoResponse"]);return c!=null&&x(e,["response"],UC(c)),e}function VC(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function GC(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["data"]);s!=null&&x(e,["data"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function HC(t){const e={},n=g(t,["displayName"]);n!=null&&x(e,["displayName"],n);const s=g(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function YC(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],VC(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],GC(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],HC(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function qC(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>YC(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function zC(t){const e={},n=g(t,["citations"]);return n!=null&&x(e,["citations"],n),e}function $C(t){const e={},n=g(t,["retrievedUrl"]);n!=null&&x(e,["retrievedUrl"],n);const s=g(t,["urlRetrievalStatus"]);return s!=null&&x(e,["urlRetrievalStatus"],s),e}function WC(t){const e={},n=g(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>$C(r))),x(e,["urlMetadata"],s)}return e}function KC(t){const e={},n=g(t,["content"]);n!=null&&x(e,["content"],qC(n));const s=g(t,["citationMetadata"]);s!=null&&x(e,["citationMetadata"],zC(s));const r=g(t,["finishMessage"]);r!=null&&x(e,["finishMessage"],r);const l=g(t,["finishReason"]);l!=null&&x(e,["finishReason"],l);const c=g(t,["urlContextMetadata"]);c!=null&&x(e,["urlContextMetadata"],WC(c));const d=g(t,["avgLogprobs"]);d!=null&&x(e,["avgLogprobs"],d);const f=g(t,["groundingMetadata"]);f!=null&&x(e,["groundingMetadata"],f);const h=g(t,["index"]);h!=null&&x(e,["index"],h);const _=g(t,["logprobsResult"]);_!=null&&x(e,["logprobsResult"],_);const b=g(t,["safetyRatings"]);return b!=null&&x(e,["safetyRatings"],b),e}function IE(t){const e={},n=g(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>KC(h))),x(e,["candidates"],f)}const s=g(t,["createTime"]);s!=null&&x(e,["createTime"],s);const r=g(t,["responseId"]);r!=null&&x(e,["responseId"],r);const l=g(t,["modelVersion"]);l!=null&&x(e,["modelVersion"],l);const c=g(t,["promptFeedback"]);c!=null&&x(e,["promptFeedback"],c);const d=g(t,["usageMetadata"]);return d!=null&&x(e,["usageMetadata"],d),e}function XC(t){const e={},n=g(t,["truncated"]);n!=null&&x(e,["truncated"],n);const s=g(t,["token_count"]);return s!=null&&x(e,["tokenCount"],s),e}function JC(t){const e={},n=g(t,["values"]);n!=null&&x(e,["values"],n);const s=g(t,["statistics"]);return s!=null&&x(e,["statistics"],XC(s)),e}function ZC(t){const e={},n=g(t,["billableCharacterCount"]);return n!=null&&x(e,["billableCharacterCount"],n),e}function QC(t){const e={},n=g(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>JC(l))),x(e,["embeddings"],r)}const s=g(t,["metadata"]);return s!=null&&x(e,["metadata"],ZC(s)),e}function eL(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const s=g(t,["bytesBase64Encoded"]);s!=null&&x(e,["imageBytes"],Fl(s));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function r_(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const s=g(t,["safetyAttributes","scores"]);s!=null&&x(e,["scores"],s);const r=g(t,["contentType"]);return r!=null&&x(e,["contentType"],r),e}function Ip(t){const e={},n=g(t,["_self"]);n!=null&&x(e,["image"],eL(n));const s=g(t,["raiFilteredReason"]);s!=null&&x(e,["raiFilteredReason"],s);const r=g(t,["_self"]);r!=null&&x(e,["safetyAttributes"],r_(r));const l=g(t,["prompt"]);return l!=null&&x(e,["enhancedPrompt"],l),e}function tL(t){const e={},n=g(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ip(l))),x(e,["generatedImages"],r)}const s=g(t,["positivePromptSafetyAttributes"]);return s!=null&&x(e,["positivePromptSafetyAttributes"],r_(s)),e}function nL(t){const e={},n=g(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Ip(r))),x(e,["generatedImages"],s)}return e}function sL(t){const e={},n=g(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Ip(r))),x(e,["generatedImages"],s)}return e}function aL(t){const e={},n=g(t,["endpoint"]);n!=null&&x(e,["name"],n);const s=g(t,["deployedModelId"]);return s!=null&&x(e,["deployedModelId"],s),e}function rL(t){const e={},n=g(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&x(e,["baseModel"],n);const s=g(t,["createTime"]);s!=null&&x(e,["createTime"],s);const r=g(t,["updateTime"]);return r!=null&&x(e,["updateTime"],r),e}function iL(t){const e={},n=g(t,["checkpointId"]);n!=null&&x(e,["checkpointId"],n);const s=g(t,["epoch"]);s!=null&&x(e,["epoch"],s);const r=g(t,["step"]);return r!=null&&x(e,["step"],r),e}function tp(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["displayName"]);s!=null&&x(e,["displayName"],s);const r=g(t,["description"]);r!=null&&x(e,["description"],r);const l=g(t,["versionId"]);l!=null&&x(e,["version"],l);const c=g(t,["deployedModels"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(v=>aL(v))),x(e,["endpoints"],b)}const d=g(t,["labels"]);d!=null&&x(e,["labels"],d);const f=g(t,["_self"]);f!=null&&x(e,["tunedModelInfo"],rL(f));const h=g(t,["defaultCheckpointId"]);h!=null&&x(e,["defaultCheckpointId"],h);const _=g(t,["checkpoints"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(v=>iL(v))),x(e,["checkpoints"],b)}return e}function oL(t,e){const n={},s=g(e,["nextPageToken"]);s!=null&&x(n,["nextPageToken"],s);const r=g(e,["_self"]);if(r!=null){let l=K2(r);Array.isArray(l)&&(l=l.map(c=>tp(c))),x(n,["models"],l)}return n}function lL(){return{}}function cL(t){const e={},n=g(t,["totalTokens"]);return n!=null&&x(e,["totalTokens"],n),e}function uL(t){const e={},n=g(t,["tokensInfo"]);return n!=null&&x(e,["tokensInfo"],n),e}function dL(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const s=g(t,["bytesBase64Encoded"]);s!=null&&x(e,["videoBytes"],Fl(s));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function fL(t){const e={},n=g(t,["_self"]);return n!=null&&x(e,["video"],dL(n)),e}function hL(t){const e={},n=g(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>fL(c))),x(e,["generatedVideos"],l)}const s=g(t,["raiMediaFilteredCount"]);s!=null&&x(e,["raiMediaFilteredCount"],s);const r=g(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function mL(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["metadata"]);s!=null&&x(e,["metadata"],s);const r=g(t,["done"]);r!=null&&x(e,["done"],r);const l=g(t,["error"]);l!=null&&x(e,["error"],l);const c=g(t,["response"]);return c!=null&&x(e,["response"],hL(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pL="Content-Type",gL="X-Server-Timeout",xL="User-Agent",np="x-goog-api-client",EL="1.6.0",_L=`google-genai-sdk/${EL}`,bL="v1beta1",TL="v1beta",DE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class yL{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:bL,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:TL,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s){if(n&&n.timeout||s){const r=new AbortController,l=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=l}return n&&n.extraBody!==null&&NL(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await RE(r),new X0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await RE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Bu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:f}=yield Ea(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(f);try{const b=JSON.parse(h);if("error"in b){const v=JSON.parse(JSON.stringify(b.error)),y=v.status,C=v.code,L=`got status: ${y}. ${JSON.stringify(b)}`;if(C>=400&&C<600)throw new Kh({message:L,status:C})}}catch(b){if(b.name==="ApiError")throw b}c+=h;let _=c.match(DE);for(;_;){const b=_[1];try{const v=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ea(new X0(v)),c=c.slice(_[0].length),_=c.match(DE)}catch(v){throw new Error(`exception parsing stream chunk ${b}. ${v}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=_L+" "+this.clientOptions.userAgentExtra;return e[xL]=n,e[np]=n,e[pL]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(gL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const f=await this.fetchUploadUrl(r,n);return l.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var s;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:Pn("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function RE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new Kh({message:r,status:n}):new Error(r)}}function NL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const h=c[f],_=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[f]=s(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vL="mcp_used/unknown";function i_(t){for(const e of t)if(Dp(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function o_(t){var e;const n=(e=t[np])!==null&&e!==void 0?e:"";t[np]=(n+` ${vL}`).trimStart()}function AL(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Dp(r)))!==null&&s!==void 0?s:!1}function SL(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Dp(r)))!==null&&s!==void 0?s:!1}function Dp(t){return t!==null&&typeof t=="object"&&t instanceof Rp}function CL(t,e=100){return Bu(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield Ea(t.listTools({cursor:s}));for(const c of l.tools)yield yield Ea(c),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class Rp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Rp(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const _ of this.mcpClients)try{for(var d=!0,f=(n=void 0,Kd(CL(_))),h;h=await f.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const b=r;c.push(b);const v=b.name;if(l[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);l[v]=_}}catch(b){n={error:b}}finally{try{!d&&!e&&(s=f.return)&&await s.call(f)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Cy(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LL(t,e,n){const s=new my;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const l=kA(r);Object.assign(s,l),e(s)}class wL{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=RL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(R=>{h=R}),b=e.callbacks,v=function(){h({})},y=this.apiClient,C={onopen:v,onmessage:R=>{LL(y,b.onmessage,R)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(R){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(R){}},L=this.webSocketFactory.create(f,DL(c),C);L.connect(),await _;const O=la(this.apiClient,e.model),I=e_({model:O}),j=Q0({setup:I});return L.send(JSON.stringify(j)),new IL(L,this.apiClient)}}class IL{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Xv(e),s=t_(n);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Jv(e),s=Q0(n);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const n=Q0({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Mu.PLAY)}pause(){this.sendPlaybackControl(Mu.PAUSE)}stop(){this.sendPlaybackControl(Mu.STOP)}resetContext(){this.sendPlaybackControl(Mu.RESET_CONTEXT)}close(){this.conn.close()}}function DL(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function RL(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PL(t,e,n){const s=new hy;let r;if(n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),t.isVertexAI()){const l=CA(r);Object.assign(s,l)}else{const l=SA(r);Object.assign(s,l)}e(s)}class ML{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new wL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,l,c,d;const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const b=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&i_(e.config.tools)&&o_(b);const v=UL(b);if(this.apiClient.isVertexAI())_=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const oe=this.apiClient.getApiKey();let xe="BidiGenerateContent",F="key";oe!=null&&oe.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),xe="BidiGenerateContentConstrained",F="access_token"),_=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${xe}?${F}=${oe}`}let y=()=>{};const C=new Promise(oe=>{y=oe}),L=e.callbacks,O=function(){var oe;(oe=L==null?void 0:L.onopen)===null||oe===void 0||oe.call(L),y({})},I=this.apiClient,j={onopen:O,onmessage:oe=>{PL(I,L.onmessage,oe)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(oe){},onclose:(s=L==null?void 0:L.onclose)!==null&&s!==void 0?s:function(oe){}},R=this.webSocketFactory.create(_,BL(v),j);R.connect(),await C;let U=la(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const oe=this.apiClient.getProject(),xe=this.apiClient.getLocation();U=`projects/${oe}/locations/${xe}/`+U}let te={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mh.AUDIO]}:e.config.responseModalities=[Mh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],ne=[];for(const oe of Q)if(this.isCallableTool(oe)){const xe=oe;ne.push(await xe.tool())}else ne.push(oe);ne.length>0&&(e.config.tools=ne);const J={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?te=Hv(this.apiClient,J):te=Gv(this.apiClient,J),delete te.config,R.send(JSON.stringify(te)),new jL(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const kL={turnComplete:!0};class jL{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Vo(n.turns),e.isVertexAI()?s=s.map(r=>Zu(r)):s=s.map(r=>Xh(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(OL)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},kL),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Kv(e)}:n={realtimeInput:Wv(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function BL(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function UL(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OE=10;function PE(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(bh(c)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function bh(t){return"callTool"in t&&typeof t.callTool=="function"}function ME(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FL extends Ju{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,l,c,d;const f=await this.processParamsForMcpUsage(n);if(!AL(n)||PE(n.config))return await this.generateContentInternal(f);if(SL(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,_;const b=Vo(f.contents),v=(l=(r=(s=f.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:OE;let y=0;for(;y<v&&(h=await this.generateContentInternal(f),!(!h.functionCalls||h.functionCalls.length===0));){const C=h.candidates[0].content,L=[];for(const O of(d=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(bh(O)){const j=await O.callTool(h.functionCalls);L.push(...j)}y++,_={role:"user",parts:L},f.contents=Vo(f.contents),f.contents.push(C),f.contents.push(_),ME(f.config)&&(b.push(C),b.push(_))}return ME(f.config)&&(h.automaticFunctionCallingHistory=b),h},this.generateContentStream=async n=>{if(PE(n.config)){const s=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const f of s.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:c.push(f);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l}:d={generatedImages:c},d}),this.list=async n=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Wh(Ku.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var n,s,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const c=await Promise.all(l.map(async f=>bh(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&i_(e.config.tools)){const f=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),o_(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,s,r;const l=new Map;for(const c of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(bh(c)){const d=c,f=await d.tool();for(const h of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var n,s,r;const l=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:OE;let c=!1,d=0;const f=await this.initAfcToolsMap(e);return function(h,_,b){var v,y;return Bu(this,arguments,function*(){for(var C,L,O,I;d<l;){c&&(d++,c=!1);const te=yield Ea(h.processParamsForMcpUsage(b)),Q=yield Ea(h.generateContentStreamInternal(te)),ne=[],J=[];try{for(var j=!0,R=(L=void 0,Kd(Q)),U;U=yield Ea(R.next()),C=U.done,!C;j=!0){I=U.value,j=!1;const oe=I;if(yield yield Ea(oe),oe.candidates&&(!((v=oe.candidates[0])===null||v===void 0)&&v.content)){J.push(oe.candidates[0].content);for(const xe of(y=oe.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(d<l&&xe.functionCall){if(!xe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(xe.functionCall.name)){const F=yield Ea(_.get(xe.functionCall.name).callTool([xe.functionCall]));ne.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${xe.functionCall.name}`)}}}}catch(oe){L={error:oe}}finally{try{!j&&!C&&(O=R.return)&&(yield Ea(O.call(R)))}finally{if(L)throw L.error}}if(ne.length>0){c=!0;const oe=new Ud;oe.candidates=[{content:{role:"user",parts:ne}}],yield yield Ea(oe);const xe=[];xe.push(...J),xe.push({role:"user",parts:ne});const F=Vo(b.contents).concat(xe);b.contents=F}else break}})}(this,f,e)}async generateContentInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=LE(this.apiClient,e);return d=Pn("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=IE(_),v=new Ud;return Object.assign(v,b),v})}else{const h=CE(this.apiClient,e);return d=Pn("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=wE(_),v=new Ud;return Object.assign(v,b),v})}}async generateContentStreamInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=LE(this.apiClient,e);return d=Pn("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(b){return Bu(this,arguments,function*(){var v,y,C,L;try{for(var O=!0,I=Kd(b),j;j=yield Ea(I.next()),v=j.done,!v;O=!0){L=j.value,O=!1;const U=IE(yield Ea(L.json())),te=new Ud;Object.assign(te,U),yield yield Ea(te)}}catch(R){y={error:R}}finally{try{!O&&!v&&(C=I.return)&&(yield Ea(C.call(I)))}finally{if(y)throw y.error}}})})}else{const h=CE(this.apiClient,e);return d=Pn("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(b){return Bu(this,arguments,function*(){var v,y,C,L;try{for(var O=!0,I=Kd(b),j;j=yield Ea(I.next()),v=j.done,!v;O=!0){L=j.value,O=!1;const U=wE(yield Ea(L.json())),te=new Ud;Object.assign(te,U),yield yield Ea(te)}}catch(R){y={error:R}}finally{try{!O&&!v&&(C=I.return)&&(yield Ea(C.call(I)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=WS(this.apiClient,e);return d=Pn("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=QC(_),v=new oE;return Object.assign(v,b),v})}else{const h=oS(this.apiClient,e);return d=Pn("{model}:batchEmbedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=wC(_),v=new oE;return Object.assign(v,b),v})}}async generateImagesInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=XS(this.apiClient,e);return d=Pn("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=tL(_),v=new lE;return Object.assign(v,b),v})}else{const h=cS(this.apiClient,e);return d=Pn("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=RC(_),v=new lE;return Object.assign(v,b),v})}}async editImageInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=sC(this.apiClient,e);return l=Pn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=nL(f),_=new oy;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=rC(this.apiClient,e);return l=Pn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=sL(f),_=new ly;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=iC(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>tp(_))}else{const h=uS(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>ep(_))}}async listInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=lC(this.apiClient,e);return d=Pn("{models_url}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=oL(this.apiClient,_),v=new cE;return Object.assign(v,b),v})}else{const h=fS(this.apiClient,e);return d=Pn("{models_url}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=PC(this.apiClient,_),v=new cE;return Object.assign(v,b),v})}}async update(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=uC(this.apiClient,e);return d=Pn("{model}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>tp(_))}else{const h=mS(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>ep(_))}}async delete(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=dC(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(()=>{const _=lL(),b=new uE;return Object.assign(b,_),b})}else{const h=pS(this.apiClient,e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(()=>{const _=MC(),b=new uE;return Object.assign(b,_),b})}}async countTokens(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=hC(this.apiClient,e);return d=Pn("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=cL(_),v=new dE;return Object.assign(v,b),v})}else{const h=xS(this.apiClient,e);return d=Pn("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=kC(_),v=new dE;return Object.assign(v,b),v})}}async computeTokens(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=mC(this.apiClient,e);return l=Pn("{model}:computeTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const h=uL(f),_=new cy;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=xC(this.apiClient,e);return d=Pn("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>mL(_))}else{const h=bS(this.apiClient,e);return d=Pn("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>FC(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VL(t){const e={},n=g(t,["operationName"]);n!=null&&x(e,["_url","operationName"],n);const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function GL(t){const e={},n=g(t,["operationName"]);n!=null&&x(e,["_url","operationName"],n);const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function HL(t){const e={},n=g(t,["operationName"]);n!=null&&x(e,["operationName"],n);const s=g(t,["resourceName"]);s!=null&&x(e,["_url","resourceName"],s);const r=g(t,["config"]);return r!=null&&x(e,["config"],r),e}function YL(t){const e={},n=g(t,["video","uri"]);n!=null&&x(e,["uri"],n);const s=g(t,["video","encodedVideo"]);s!=null&&x(e,["videoBytes"],Fl(s));const r=g(t,["encoding"]);return r!=null&&x(e,["mimeType"],r),e}function qL(t){const e={},n=g(t,["_self"]);return n!=null&&x(e,["video"],YL(n)),e}function zL(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>qL(c))),x(e,["generatedVideos"],l)}const s=g(t,["raiMediaFilteredCount"]);s!=null&&x(e,["raiMediaFilteredCount"],s);const r=g(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function $L(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["metadata"]);s!=null&&x(e,["metadata"],s);const r=g(t,["done"]);r!=null&&x(e,["done"],r);const l=g(t,["error"]);l!=null&&x(e,["error"],l);const c=g(t,["response","generateVideoResponse"]);return c!=null&&x(e,["response"],zL(c)),e}function WL(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const s=g(t,["bytesBase64Encoded"]);s!=null&&x(e,["videoBytes"],Fl(s));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function KL(t){const e={},n=g(t,["_self"]);return n!=null&&x(e,["video"],WL(n)),e}function XL(t){const e={},n=g(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>KL(c))),x(e,["generatedVideos"],l)}const s=g(t,["raiMediaFilteredCount"]);s!=null&&x(e,["raiMediaFilteredCount"],s);const r=g(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function kE(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["metadata"]);s!=null&&x(e,["metadata"],s);const r=g(t,["done"]);r!=null&&x(e,["done"],r);const l=g(t,["error"]);l!=null&&x(e,["error"],l);const c=g(t,["response"]);return c!=null&&x(e,["response"],XL(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JL extends Ju{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;return s&&"httpOptions"in s&&(l=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:s})}async getVideosOperationInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=GL(e);return d=Pn("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>kE(_))}else{const h=VL(e);return d=Pn("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>$L(_))}}async fetchPredictVideosOperationInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=HL(e);return l=Pn("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>kE(f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZL(t){const e={},n=g(t,["voiceName"]);return n!=null&&x(e,["voiceName"],n),e}function l_(t){const e={},n=g(t,["prebuiltVoiceConfig"]);return n!=null&&x(e,["prebuiltVoiceConfig"],ZL(n)),e}function QL(t){const e={},n=g(t,["speaker"]);n!=null&&x(e,["speaker"],n);const s=g(t,["voiceConfig"]);return s!=null&&x(e,["voiceConfig"],l_(s)),e}function ew(t){const e={},n=g(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>QL(r))),x(e,["speakerVoiceConfigs"],s)}return e}function tw(t){const e={},n=g(t,["voiceConfig"]);n!=null&&x(e,["voiceConfig"],l_(n));const s=g(t,["multiSpeakerVoiceConfig"]);s!=null&&x(e,["multiSpeakerVoiceConfig"],ew(s));const r=g(t,["languageCode"]);return r!=null&&x(e,["languageCode"],r),e}function nw(t){const e={},n=g(t,["fps"]);n!=null&&x(e,["fps"],n);const s=g(t,["endOffset"]);s!=null&&x(e,["endOffset"],s);const r=g(t,["startOffset"]);return r!=null&&x(e,["startOffset"],r),e}function sw(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["data"]);n!=null&&x(e,["data"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function aw(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function rw(t){const e={},n=g(t,["videoMetadata"]);n!=null&&x(e,["videoMetadata"],nw(n));const s=g(t,["thought"]);s!=null&&x(e,["thought"],s);const r=g(t,["inlineData"]);r!=null&&x(e,["inlineData"],sw(r));const l=g(t,["fileData"]);l!=null&&x(e,["fileData"],aw(l));const c=g(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=g(t,["codeExecutionResult"]);d!=null&&x(e,["codeExecutionResult"],d);const f=g(t,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=g(t,["functionCall"]);h!=null&&x(e,["functionCall"],h);const _=g(t,["functionResponse"]);_!=null&&x(e,["functionResponse"],_);const b=g(t,["text"]);return b!=null&&x(e,["text"],b),e}function iw(t){const e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>rw(l))),x(e,["parts"],r)}const s=g(t,["role"]);return s!=null&&x(e,["role"],s),e}function ow(t){const e={},n=g(t,["behavior"]);n!=null&&x(e,["behavior"],n);const s=g(t,["description"]);s!=null&&x(e,["description"],s);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const l=g(t,["parameters"]);l!=null&&x(e,["parameters"],l);const c=g(t,["parametersJsonSchema"]);c!=null&&x(e,["parametersJsonSchema"],c);const d=g(t,["response"]);d!=null&&x(e,["response"],d);const f=g(t,["responseJsonSchema"]);return f!=null&&x(e,["responseJsonSchema"],f),e}function lw(t){const e={},n=g(t,["startTime"]);n!=null&&x(e,["startTime"],n);const s=g(t,["endTime"]);return s!=null&&x(e,["endTime"],s),e}function cw(t){const e={},n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],lw(n)),e}function uw(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const s=g(t,["dynamicThreshold"]);return s!=null&&x(e,["dynamicThreshold"],s),e}function dw(t){const e={},n=g(t,["dynamicRetrievalConfig"]);return n!=null&&x(e,["dynamicRetrievalConfig"],uw(n)),e}function fw(){return{}}function hw(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>ow(f))),x(e,["functionDeclarations"],d)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=g(t,["googleSearch"]);s!=null&&x(e,["googleSearch"],cw(s));const r=g(t,["googleSearchRetrieval"]);if(r!=null&&x(e,["googleSearchRetrieval"],dw(r)),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(t,["urlContext"])!=null&&x(e,["urlContext"],fw());const c=g(t,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function mw(t){const e={},n=g(t,["handle"]);if(n!=null&&x(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jE(){return{}}function pw(t){const e={},n=g(t,["disabled"]);n!=null&&x(e,["disabled"],n);const s=g(t,["startOfSpeechSensitivity"]);s!=null&&x(e,["startOfSpeechSensitivity"],s);const r=g(t,["endOfSpeechSensitivity"]);r!=null&&x(e,["endOfSpeechSensitivity"],r);const l=g(t,["prefixPaddingMs"]);l!=null&&x(e,["prefixPaddingMs"],l);const c=g(t,["silenceDurationMs"]);return c!=null&&x(e,["silenceDurationMs"],c),e}function gw(t){const e={},n=g(t,["automaticActivityDetection"]);n!=null&&x(e,["automaticActivityDetection"],pw(n));const s=g(t,["activityHandling"]);s!=null&&x(e,["activityHandling"],s);const r=g(t,["turnCoverage"]);return r!=null&&x(e,["turnCoverage"],r),e}function xw(t){const e={},n=g(t,["targetTokens"]);return n!=null&&x(e,["targetTokens"],n),e}function Ew(t){const e={},n=g(t,["triggerTokens"]);n!=null&&x(e,["triggerTokens"],n);const s=g(t,["slidingWindow"]);return s!=null&&x(e,["slidingWindow"],xw(s)),e}function _w(t){const e={},n=g(t,["proactiveAudio"]);return n!=null&&x(e,["proactiveAudio"],n),e}function bw(t,e){const n={},s=g(t,["generationConfig"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig"],s);const r=g(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const l=g(t,["temperature"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","temperature"],l);const c=g(t,["topP"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topP"],c);const d=g(t,["topK"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topK"],d);const f=g(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const h=g(t,["mediaResolution"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","mediaResolution"],h);const _=g(t,["seed"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","seed"],_);const b=g(t,["speechConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","speechConfig"],tw(wp(b)));const v=g(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],v);const y=g(t,["systemInstruction"]);e!==void 0&&y!=null&&x(e,["setup","systemInstruction"],iw(xi(y)));const C=g(t,["tools"]);if(e!==void 0&&C!=null){let te=of(C);Array.isArray(te)&&(te=te.map(Q=>hw(rf(Q)))),x(e,["setup","tools"],te)}const L=g(t,["sessionResumption"]);e!==void 0&&L!=null&&x(e,["setup","sessionResumption"],mw(L));const O=g(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&x(e,["setup","inputAudioTranscription"],jE());const I=g(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&x(e,["setup","outputAudioTranscription"],jE());const j=g(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&x(e,["setup","realtimeInputConfig"],gw(j));const R=g(t,["contextWindowCompression"]);e!==void 0&&R!=null&&x(e,["setup","contextWindowCompression"],Ew(R));const U=g(t,["proactivity"]);return e!==void 0&&U!=null&&x(e,["setup","proactivity"],_w(U)),n}function Tw(t,e){const n={},s=g(e,["model"]);s!=null&&x(n,["setup","model"],la(t,s));const r=g(e,["config"]);return r!=null&&x(n,["config"],bw(r,n)),n}function yw(t,e,n){const s={},r=g(e,["expireTime"]);n!==void 0&&r!=null&&x(n,["expireTime"],r);const l=g(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&x(n,["newSessionExpireTime"],l);const c=g(e,["uses"]);n!==void 0&&c!=null&&x(n,["uses"],c);const d=g(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&x(n,["bidiGenerateContentSetup"],Tw(t,d));const f=g(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&x(n,["fieldMask"],f),s}function Nw(t,e){const n={},s=g(e,["config"]);return s!=null&&x(n,["config"],yw(t,s,n)),n}function vw(t){const e={},n=g(t,["name"]);return n!=null&&x(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aw(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function Sw(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=Aw(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const f=[];l&&f.push(l),d.length>0&&f.push(...d),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Cw extends Ju{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=Nw(this.apiClient,e);l=Pn("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=Sw(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>vw(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lw(t){const e={},n=g(t,["name"]);n!=null&&x(e,["_url","name"],n);const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function ww(t,e){const n={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=g(t,["pageToken"]);e!==void 0&&r!=null&&x(e,["_query","pageToken"],r);const l=g(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),n}function Iw(t){const e={},n=g(t,["config"]);return n!=null&&x(e,["config"],ww(n,e)),e}function Dw(t){const e={},n=g(t,["textInput"]);n!=null&&x(e,["textInput"],n);const s=g(t,["output"]);return s!=null&&x(e,["output"],s),e}function Rw(t){const e={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Dw(r))),x(e,["examples","examples"],s)}return e}function Ow(t,e){const n={};if(g(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&x(e,["displayName"],s),g(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=g(t,["epochCount"]);e!==void 0&&r!=null&&x(e,["tuningTask","hyperparameters","epochCount"],r);const l=g(t,["learningRateMultiplier"]);if(l!=null&&x(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=g(t,["batchSize"]);e!==void 0&&c!=null&&x(e,["tuningTask","hyperparameters","batchSize"],c);const d=g(t,["learningRate"]);return e!==void 0&&d!=null&&x(e,["tuningTask","hyperparameters","learningRate"],d),n}function Pw(t){const e={},n=g(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const s=g(t,["trainingDataset"]);s!=null&&x(e,["tuningTask","trainingData"],Rw(s));const r=g(t,["config"]);return r!=null&&x(e,["config"],Ow(r,e)),e}function Mw(t){const e={},n=g(t,["name"]);n!=null&&x(e,["_url","name"],n);const s=g(t,["config"]);return s!=null&&x(e,["config"],s),e}function kw(t,e){const n={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=g(t,["pageToken"]);e!==void 0&&r!=null&&x(e,["_query","pageToken"],r);const l=g(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),n}function jw(t){const e={},n=g(t,["config"]);return n!=null&&x(e,["config"],kw(n,e)),e}function Bw(t,e){const n={},s=g(t,["gcsUri"]);if(e!==void 0&&s!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],s),g(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Uw(t){const e={},n=g(t,["gcsUri"]);return n!=null&&x(e,["validationDatasetUri"],n),e}function Fw(t,e){const n={},s=g(t,["validationDataset"]);e!==void 0&&s!=null&&x(e,["supervisedTuningSpec"],Uw(s));const r=g(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&x(e,["tunedModelDisplayName"],r);const l=g(t,["description"]);e!==void 0&&l!=null&&x(e,["description"],l);const c=g(t,["epochCount"]);e!==void 0&&c!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const d=g(t,["learningRateMultiplier"]);e!==void 0&&d!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const f=g(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const h=g(t,["adapterSize"]);if(e!==void 0&&h!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),g(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Vw(t){const e={},n=g(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const s=g(t,["trainingDataset"]);s!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],Bw(s,e));const r=g(t,["config"]);return r!=null&&x(e,["config"],Fw(r,e)),e}function Gw(t){const e={},n=g(t,["name"]);n!=null&&x(e,["model"],n);const s=g(t,["name"]);return s!=null&&x(e,["endpoint"],s),e}function c_(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["state"]);s!=null&&x(e,["state"],z2(s));const r=g(t,["createTime"]);r!=null&&x(e,["createTime"],r);const l=g(t,["tuningTask","startTime"]);l!=null&&x(e,["startTime"],l);const c=g(t,["tuningTask","completeTime"]);c!=null&&x(e,["endTime"],c);const d=g(t,["updateTime"]);d!=null&&x(e,["updateTime"],d);const f=g(t,["description"]);f!=null&&x(e,["description"],f);const h=g(t,["baseModel"]);h!=null&&x(e,["baseModel"],h);const _=g(t,["_self"]);_!=null&&x(e,["tunedModel"],Gw(_));const b=g(t,["distillationSpec"]);b!=null&&x(e,["distillationSpec"],b);const v=g(t,["experiment"]);v!=null&&x(e,["experiment"],v);const y=g(t,["labels"]);y!=null&&x(e,["labels"],y);const C=g(t,["pipelineJob"]);C!=null&&x(e,["pipelineJob"],C);const L=g(t,["serviceAccount"]);L!=null&&x(e,["serviceAccount"],L);const O=g(t,["tunedModelDisplayName"]);return O!=null&&x(e,["tunedModelDisplayName"],O),e}function Hw(t){const e={},n=g(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=g(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>c_(l))),x(e,["tuningJobs"],r)}return e}function Yw(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["metadata"]);s!=null&&x(e,["metadata"],s);const r=g(t,["done"]);r!=null&&x(e,["done"],r);const l=g(t,["error"]);return l!=null&&x(e,["error"],l),e}function qw(t){const e={},n=g(t,["checkpointId"]);n!=null&&x(e,["checkpointId"],n);const s=g(t,["epoch"]);s!=null&&x(e,["epoch"],s);const r=g(t,["step"]);r!=null&&x(e,["step"],r);const l=g(t,["endpoint"]);return l!=null&&x(e,["endpoint"],l),e}function zw(t){const e={},n=g(t,["model"]);n!=null&&x(e,["model"],n);const s=g(t,["endpoint"]);s!=null&&x(e,["endpoint"],s);const r=g(t,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>qw(c))),x(e,["checkpoints"],l)}return e}function sp(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const s=g(t,["state"]);s!=null&&x(e,["state"],z2(s));const r=g(t,["createTime"]);r!=null&&x(e,["createTime"],r);const l=g(t,["startTime"]);l!=null&&x(e,["startTime"],l);const c=g(t,["endTime"]);c!=null&&x(e,["endTime"],c);const d=g(t,["updateTime"]);d!=null&&x(e,["updateTime"],d);const f=g(t,["error"]);f!=null&&x(e,["error"],f);const h=g(t,["description"]);h!=null&&x(e,["description"],h);const _=g(t,["baseModel"]);_!=null&&x(e,["baseModel"],_);const b=g(t,["tunedModel"]);b!=null&&x(e,["tunedModel"],zw(b));const v=g(t,["supervisedTuningSpec"]);v!=null&&x(e,["supervisedTuningSpec"],v);const y=g(t,["tuningDataStats"]);y!=null&&x(e,["tuningDataStats"],y);const C=g(t,["encryptionSpec"]);C!=null&&x(e,["encryptionSpec"],C);const L=g(t,["partnerModelTuningSpec"]);L!=null&&x(e,["partnerModelTuningSpec"],L);const O=g(t,["distillationSpec"]);O!=null&&x(e,["distillationSpec"],O);const I=g(t,["experiment"]);I!=null&&x(e,["experiment"],I);const j=g(t,["labels"]);j!=null&&x(e,["labels"],j);const R=g(t,["pipelineJob"]);R!=null&&x(e,["pipelineJob"],R);const U=g(t,["serviceAccount"]);U!=null&&x(e,["serviceAccount"],U);const te=g(t,["tunedModelDisplayName"]);return te!=null&&x(e,["tunedModelDisplayName"],te),e}function $w(t){const e={},n=g(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=g(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>sp(l))),x(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ww extends Ju{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Wh(Ku.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const s=await this.tuneMldevInternal(n);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:K0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=Mw(e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>sp(_))}else{const h=Lw(e);return d=Pn("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>c_(_))}}async listInternal(e){var n,s,r,l;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=jw(e);return d=Pn("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const b=$w(_),v=new fE;return Object.assign(v,b),v})}else{const h=Iw(e);return d=Pn("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const b=Hw(_),v=new fE;return Object.assign(v,b),v})}}async tuneInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Vw(e);return l=Pn("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>sp(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Pw(e);return l=Pn("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>Yw(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kw{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Xw=1024*1024*8,Jw=3,Zw=1e3,Qw=2,_0="x-goog-upload-status";async function eI(t,e,n){var s,r,l;let c=0,d=0,f=new X0(new Response),h="upload";for(c=t.size;d<c;){const b=Math.min(Xw,c-d),v=t.slice(d,d+b);d+b>=c&&(h+=", finalize");let y=0,C=Zw;for(;y<Jw&&(f=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(b)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[_0]));)y++,await nI(C),C=C*Qw;if(d+=b,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[_0])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await(f==null?void 0:f.json());if(((l=f==null?void 0:f.headers)===null||l===void 0?void 0:l[_0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function tI(t){return{size:t.size,type:t.type}}function nI(t){return new Promise(e=>setTimeout(e,t))}class sI{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eI(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aI{create(e,n,s){return new rI(e,n,s)}}class rI{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BE="x-goog-api-key";class iI{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(BE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(BE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oI="gl-node/";class lI{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=iy(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new iI(this.apiKey);this.apiClient=new yL({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:oI+"web",uploader:new sI,downloader:new Kw}),this.models=new FL(this.apiClient),this.live=new ML(this.apiClient,r,new aI),this.chats=new ON(this.models,this.apiClient),this.caches=new IN(this.apiClient),this.files=new zN(this.apiClient),this.operations=new JL(this.apiClient),this.authTokens=new Cw(this.apiClient),this.tunings=new Ww(this.apiClient)}}var b0={};let ap;try{typeof process<"u"&&b0&&typeof b0.API_KEY=="string"&&(ap=b0.API_KEY)}catch(t){console.warn("Could not access process.env.API_KEY. This is expected if not in a Node-like environment or if the variable is not set.",t)}let Zc=null;if(ap)try{Zc=new lI({apiKey:ap})}catch(t){console.error("Failed to initialize GoogleGenAI:",t),Zc=null}else console.warn("Gemini API Key is not available. Gemini AI features will be unavailable. This could be due to process.env.API_KEY not being set or inaccessible in the current execution environment.");const cI=()=>!!Zc,uI=async(t,e=b2,n)=>{if(!Zc)throw new Error("Gemini AI service is not initialized. API Key might be missing or inaccessible.");const s=n.model,r=`Based on a current account balance of ${t} BDT, provide one concise and practical financial tip in simple ${e}. The tip should be encouraging and easy to understand. If the balance is low, suggest a small saving habit. If the balance is good, suggest a wise investment or saving goal. Respond in ${e} only. Keep it under 150 characters.`;console.log("[GeminiService Debug] getFinancialTip - Prompt:",r,"Language:",e);const l={};n.temperature!==void 0&&(l.temperature=n.temperature),n.topK!==void 0&&(l.topK=n.topK),n.topP!==void 0&&(l.topP=n.topP);try{const d=(await Zc.models.generateContent({model:s,contents:r,...Object.keys(l).length>0&&{config:l}})).text;if(console.log("[GeminiService Debug] getFinancialTip - Raw Gemini Response Text:",d),!d)throw new Error("No text content in Gemini response.");return d.trim()}catch(c){throw console.error("Error fetching financial tip from Gemini:",c),c instanceof Error?c.message.toLowerCase().includes("api key")?new Error(`Gemini API error: ${c.message}`):new Error(`Gemini API error during tip generation: ${c.message}`):new Error("An unknown error occurred while fetching financial tip.")}},dI=async(t,e,n,s="bn-BD",r="app")=>{if(!Zc)throw new Error("Gemini AI service is not initialized for command processing.");const l=n.model,c=_b(s);console.log("[GeminiService Debug] processUserCommandViaAI - Target Language:",c,"Code:",s,"Scope:",r);let d=`
    You are an AI assistant for the ' - ' (Daily Spending & Earning Tracker) application.
    Your primary role is to assist users with managing their finances within this app.
    You can help create income/expense transactions, sales invoices, answer questions about their financial data (like transaction counts, sums for specific periods for income, expenses, payables, receivables), and explain app features.
    If the user asks for something outside the scope of this application, politely state that you can only assist with matters related to this application or that you are unable to answer that specific query.
  `,f='Possible intents are: "perform_action", "query_app_data", "explain_feature", "out_of_scope".',h=`
    If intent is "perform_action":
      - actionType: "create_sales_invoice", "add_income", "add_expense".
      - entities:
        - For "create_sales_invoice": customerName (string), items (array of {productName, quantity, unitPrice, unit}), notes (string, optional).
        - For "add_income" or "add_expense": description (string), amount (number), date (string, optional, e.g., "", "", "today", "yesterday").
      - responseText: A short confirmation that the action is being initiated.

    If intent is "query_app_data":
      - actionDetails:
        - dataType: "transactions" | "balance" | "debts" 
        - queryType: "count" | "sum_amount" | "get_balance"
        - filters: (object, optional)
          - type: "income" | "expense" (for transactions), or "payable" | "receivable" (for debts)
          - period: "today" | "current_week" | "current_month" | "all_time" (default if not specified for sums/counts)
          - status: "active" | "deleted" | "all" (for transaction counts), or "settled" | "unsettled" | "all" (for debt counts/sums)
      - responseText: A generic acknowledgment that the data is being fetched. Example: " ..." or "Fetching data...". The application will provide the actual data.
        If the query is ambiguous (e.g., "how much debit"), try to infer the most likely dataType and filter. For "debit" or "", prefer dataType "debts" with filter type "payable". For "credit" or "", prefer dataType "debts" with filter type "receivable". For "expense" or "", prefer dataType "transactions" with filter type "expense". For "income" or "", prefer dataType "transactions" with filter type "income".

    If intent is "explain_feature":
      - responseText: Briefly explain the requested app feature in simple terms. If asked "what can you do?", list some key capabilities.
      
    If intent is "out_of_scope":
      - responseText: Politely state that you cannot assist with requests outside this application or that you are unable to answer that specific query. Example: " ,       " or "I am unable to answer that query."
  `;r==="global"&&(d=`
      You are a helpful AI assistant. You can answer general knowledge questions.
      Additionally, you can assist with the ' - ' (Daily Spending & Earning Tracker) application for tasks like creating transactions, invoices, or querying financial data.
      If the user's query is clearly app-related, prioritize app-specific actions. Otherwise, provide a general answer.
    `,f=`Possible intents are: "perform_action", "query_app_data", "explain_feature", "general_query", "out_of_scope".
      - For app-related queries, try to match "perform_action", "query_app_data", or "explain_feature" first.
      - Use "general_query" if the user asks a general knowledge question not related to the app.
      - Use "out_of_scope" only if an app-related query cannot be understood or a general query is truly unanswerable.
    `,h+=`
    
    If intent is "general_query":
      - responseText: Provide a direct answer to the user's general knowledge question. The application will display this text.
    `);const _=`
    ${d}

    User's voice/text command: "${t.replace(/"/g,'\\"')}"

    Current application context (use this for general queries if specific data query is not matched for app-related tasks):
    - Balance: ${e.balance} BDT
    - Total Income (all time): ${e.totalIncome} BDT
    - Total Expense (all time): ${e.totalExpense} BDT
    - Total Receivable (all time, unsettled): ${e.totalReceivable} BDT
    - Total Payable (all time, unsettled): ${e.totalPayable} BDT
    - Active Transactions (current count): ${e.activeTransactionsCount}
    - Managed Persons (current count): ${e.personsCount}
    - Available Features: ${e.featureList.join(", ")}

    Based on the user's command and the app context, determine the intent and extract relevant information.
    ${f}

    ${h}

    IMPORTANT LANGUAGE INSTRUCTION: You MUST provide your entire response, especially the "responseText" field, strictly in the ${c} language. Do not use any other language in the "responseText" field.
    For example, if the target language is English and you are acknowledging a data query, a good responseText would be "Fetching that information for you...".

    Return the information in the following JSON format:
    {
      "intent": "string",
      "actionDetails": { 
        "actionType": "string | null", 
        "entities": {}, 
        "dataType": "string | null", 
        "queryType": "string | null", 
        "filters": {} 
      } | null,
      "responseText": "string", 
      "originalQuery": "${t.replace(/"/g,'\\"')}"
    }
    Ensure quantities and unit prices are numbers for app actions.
    Respond ONLY with the JSON object. Do not add any explanatory text before or after the JSON.
    For date parsing in "add_income"/"add_expense", if user says "" or "", map to "today". If "", map to "yesterday". If no date mentioned, it's optional.
  `,b={responseMimeType:"application/json"};n.temperature!==void 0&&(b.temperature=n.temperature),n.topK!==void 0&&(b.topK=n.topK),n.topP!==void 0&&(b.topP=n.topP);try{console.log("[GeminiService Debug] processUserCommandViaAI - Sending prompt to Gemini for command processing. Language:",c,"Prompt snippet:",_.substring(0,300)+"...");const y=(await Zc.models.generateContent({model:l,contents:_,config:b})).text;if(console.log("[GeminiService Debug] processUserCommandViaAI - Raw Gemini JSON Response:",y),!y)return console.warn("[GeminiService Debug] No text content (JSON) in Gemini response for command processing."),{intent:"out_of_scope",responseText:c==="Bengali"?",      AI    ":"Sorry, I couldn't understand your request. No response from AI.",originalQuery:t,error:"No text content from AI.",rawResponse:"EMPTY_RESPONSE_FROM_AI"};let C=y.trim();const L=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,O=C.match(L);O&&O[2]&&(C=O[2].trim());try{const I=JSON.parse(C);return console.log("[GeminiService Debug] processUserCommandViaAI - Parsed data from Gemini:",I),{...I,rawResponse:y}}catch(I){return console.error("[GeminiService Debug] Failed to parse JSON from Gemini for command processing:",C,I),{intent:"out_of_scope",responseText:c==="Bengali"?", AI     ":"Sorry, an unexpected response was received from the AI.",originalQuery:t,error:"Invalid JSON from AI.",rawResponse:y}}}catch(v){throw console.error("[GeminiService Debug] Error processing command via Gemini:",v),v instanceof Error?new Error(`Gemini API error during command processing: ${v.message}`):new Error("An unknown error occurred during command processing via Gemini.")}};let ii=null,Ml=[];const fI=()=>{if(typeof window<"u"&&"speechSynthesis"in window){ii=window.speechSynthesis;const t=()=>{Ml=(ii==null?void 0:ii.getVoices())||[]};t(),(ii==null?void 0:ii.onvoiceschanged)!==void 0&&(ii.onvoiceschanged=t)}else console.warn(p.SPEECH_SYNTHESIS_NOT_SUPPORTED)};fI();const rp=(t,e="bn-BD")=>(console.log("[SpeechService Debug] speakText - Attempting to speak. Text:",`"${t.substring(0,70)}..."`,"Requested Lang:",e),new Promise((n,s)=>{if(!ii){console.error("[SpeechService Debug] Speech synthesis not initialized."),s(new Error(p.SPEECH_SYNTHESIS_NOT_INITIALIZED));return}ii.speaking&&(ii.cancel(),console.log("[SpeechService Debug] Cancelled ongoing speech."));const r=new SpeechSynthesisUtterance(t);r.lang=e;let l;if(Ml.length>0){const c=Ml.filter(d=>d.lang===e);if(c.length>0&&(l=c.find(d=>d.default)||c[0]),!l&&e.includes("-")){const d=e.split("-")[0],f=Ml.filter(h=>h.lang.startsWith(d));f.length>0&&(l=f.find(h=>h.default)||f[0])}if(!l&&e.startsWith("bn")){const d=Ml.filter(f=>f.lang.startsWith("en-"));d.length>0&&(l=d.find(f=>f.lang==="en-US"&&f.default)||d.find(f=>f.default)||d[0])}if(!l&&e==="en-US"){const d=Ml.filter(f=>f.lang==="en-US");d.length>0&&(l=d.find(f=>f.default)||d[0])}if(!l){const d=Ml.find(f=>f.default);d&&(l=d)}!l&&Ml.length>0&&(l=Ml[0]),l&&(r.voice=l,r.lang=l.lang)}console.log("[SpeechService Debug] speakText - Final voice choice:",r.voice?`${r.voice.name} (${r.voice.lang})`:"Browser Default","Utterance lang:",r.lang),r.pitch=1,r.rate=r.lang&&r.lang.startsWith("bn")?.9:1,r.volume=1,r.onend=()=>{console.log("[SpeechService Debug] Speech synthesis ended successfully."),n()},r.onerror=c=>{var d;console.error("[SpeechService Debug] Speech synthesis error:",c.error,`Utterance: ${c.utterance.text.substring(0,50)}... Lang: ${c.utterance.lang}, Voice: ${(d=c.utterance.voice)==null?void 0:d.name}`),s(c)};try{ii.speak(r)}catch(c){console.error("[SpeechService Debug] Error calling synthesis.speak:",c),s(c)}})),hI=()=>!!ii,u_=()=>{ii&&ii.speaking&&ii.cancel()},d_=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.354a15.055 15.055 0 0 1-3 0M12 3v2.25m0 0a6.01 6.01 0 0 0 1.5.189m-1.5-.189a6.01 6.01 0 0 1-1.5.189M15.75 5.25A6.01 6.01 0 0 0 12 4.5a6.01 6.01 0 0 0-3.75.75M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"})}),mI=({balance:t,geminiSettings:e})=>{const[n,s]=D.useState(null),[r,l]=D.useState(!1),[c,d]=D.useState(null),f=cI(),h=hI(),_=async()=>{if(console.log("[AITipCard Debug] Fetch Tip button clicked."),!f){const b=p.API_KEY_NOT_CONFIGURED;d(b),console.error("[AITipCard Debug] Gemini not ready:",b);return}u_(),l(!0),d(null),s(null),console.log("[AITipCard Debug] Fetching financial tip. Balance:",t,"Settings:",e);try{const b=await uI(t,b2,e);if(console.log("[AITipCard Debug] Fetched financial tip text:",b),s(b),h&&b){console.log('[AITipCard Debug] Attempting to speak financial tip in English: "'+b.substring(0,50)+'..."');try{await rp(b,"en-US"),console.log("[AITipCard Debug] Financial tip speech synthesis initiated successfully.")}catch(v){console.warn("[AITipCard Debug] AI Tip speech synthesis error:",v.message||v)}}else h||console.warn("[AITipCard Debug] Speech synthesis not available, so tip will not be spoken.")}catch(b){const v=b.message||p.ADVICE_ERROR;d(v),console.error("[AITipCard Debug] Error fetching or processing financial tip:",v,b)}finally{l(!1),console.log("[AITipCard Debug] Fetch tip process finished. isLoading:",!1)}};return o.jsxs("section",{"aria-labelledby":"ai-advice-heading",className:"my-8 p-6 bg-white rounded-xl shadow-lg",children:[o.jsxs("h2",{id:"ai-advice-heading",className:"text-2xl font-semibold text-slate-700 mb-4 text-center flex items-center justify-center",children:[o.jsx(d_,{className:"w-7 h-7 mr-2 text-yellow-500"}),p.FINANCIAL_ADVICE_SECTION_TITLE]}),!f&&o.jsx("p",{className:"text-center text-orange-600 bg-orange-50 p-3 rounded-md",children:p.API_KEY_NOT_CONFIGURED}),f&&o.jsx("div",{className:"text-center",children:o.jsx("button",{onClick:_,disabled:r,className:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:r?p.LOADING:p.GET_ADVICE_BTN})}),r&&o.jsxs("div",{className:"mt-4 text-center text-slate-500",children:[o.jsx("div",{role:"status",className:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-yellow-500 border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",children:o.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})}),o.jsx("p",{className:"mt-2",children:p.LOADING})]}),c&&o.jsx("p",{className:"mt-4 text-center text-red-600 bg-red-50 p-3 rounded-md",children:c}),n&&!r&&o.jsxs("div",{className:"mt-6 p-4 bg-sky-50 border border-sky-200 rounded-lg shadow",children:[o.jsx("h3",{className:"text-lg font-medium text-sky-700 mb-2",children:p.ADVICE_FROM_GEMINI}),o.jsx("p",{className:"text-slate-600 leading-relaxed",children:n})]})]})},pI=({isOpen:t,onClose:e,transaction:n,onSave:s,allSuggestions:r,onOpenManageSuggestions:l,isGlobalPhoneticModeActive:c,bankAccounts:d})=>{const[f,h]=D.useState(""),[_,b]=D.useState(""),[v,y]=D.useState(fs.EXPENSE),[C,L]=D.useState(""),[O,I]=D.useState(void 0),[j,R]=D.useState(r),[U,te]=D.useState(!1),Q=D.useRef(null),ne=D.useRef(null),{addNotification:J}=ur(),oe=D.useRef(!1);D.useEffect(()=>{n&&(oe.current=!0,h(n.description),b(n.amount.toString()),y(n.type),L(new Date(n.date).toISOString().slice(0,16)),I(n.bankAccountId||void 0),R(r.filter(G=>G.toLowerCase().includes(n.description.toLowerCase()))))},[n,r,t]);const xe=G=>{const he=G.target.value;if(oe.current?(h(he),oe.current=!1):h(he),he.trim()){const ue=r.filter(ae=>ae.toLowerCase().includes(he.toLowerCase()));R(ue),te(!0)}else R(r),te(!0)},F=G=>{if(!oe.current&&c&&G.key===" "){G.preventDefault();const he=G.target,ue=he.value,ae=he.selectionStart||0;let V=ae-1;for(;V>=0&&ue[V]!==" ";)V--;V++;const ce=ue.substring(V,ae);if(ce.trim()){const M=cr(ce),k=ue.substring(0,V)+M+" "+ue.substring(ae);h(k),setTimeout(()=>{const Y=V+M.length+1;he.setSelectionRange(Y,Y)},0)}else{const M=ue.substring(0,ae)+" "+ue.substring(ae);h(M),setTimeout(()=>{he.setSelectionRange(ae+1,ae+1)},0)}te(!1)}},H=G=>{if(oe.current){oe.current=!1;return}if(c){G.preventDefault();const he=G.clipboardData.getData("text"),ue=cr(he),ae=G.target,V=ae.selectionStart||0,ce=ae.selectionEnd||0,M=ae.value,k=M.substring(0,V)+ue+M.substring(ce);h(k),setTimeout(()=>{const Y=V+ue.length;ae.setSelectionRange(Y,Y)},0),te(!1)}},re=()=>{var he;const G=((he=Q.current)==null?void 0:he.value)||f;if(G.trim()==="")R(r);else{const ue=r.filter(ae=>ae.toLowerCase().includes(G.toLowerCase()));R(ue)}te(!0)},K=G=>{var he;oe.current=!0,h(G),te(!1),(he=Q.current)==null||he.focus()};if(D.useEffect(()=>{const G=he=>{Q.current&&!Q.current.contains(he.target)&&ne.current&&!ne.current.contains(he.target)&&te(!1)};return t&&document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[t]),!t||!n)return null;const Te=G=>{G.preventDefault();const he=parseFloat(_);if(!f.trim()||isNaN(he)||he<=0||!C){J(p.FORM_VALIDATION_ERROR,"error");return}const ue=d.find(V=>V.id===O),ae={...n,description:f.trim(),amount:he,type:v,date:new Date(C).toISOString(),lastModified:new Date().toISOString(),originalDate:n.originalDate||n.date,bankAccountId:O||void 0,bankAccountName:(ue==null?void 0:ue.accountName)||void 0};s(ae),te(!1)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"edit-transaction-modal-title",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[o.jsx("h2",{id:"edit-transaction-modal-title",className:"text-2xl font-semibold text-slate-700 mb-6",children:p.EDIT_TRANSACTION}),o.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex justify-between items-end mb-1",children:[o.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-slate-600",children:p.DESCRIPTION}),o.jsxs("button",{type:"button",onClick:l,className:"text-xs text-teal-600 hover:text-teal-800 hover:underline flex items-center space-x-1",title:p.MANAGE_SUGGESTIONS_BTN_TEXT,children:[o.jsx(P2,{className:"w-3 h-3"}),o.jsx("span",{children:p.MANAGE_SUGGESTIONS_BTN_TEXT})]})]}),o.jsx("input",{ref:Q,type:"text",id:"edit-description",value:f,onChange:xe,onKeyDown:F,onPaste:H,onFocus:re,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"edit-description-suggestions","aria-expanded":U}),U&&o.jsx("ul",{ref:ne,id:"edit-description-suggestions",className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox",children:j.length>0?j.map((G,he)=>o.jsx("li",{onClick:()=>K(G),onMouseDown:ue=>ue.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm",role:"option","aria-selected":f===G,children:G},he)):f.trim()&&o.jsx("li",{className:"px-4 py-2 text-center text-xs text-slate-500",children:p.TRANSACTION_DESCRIPTION_NO_SUGGESTIONS})})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"edit-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,")"]}),o.jsx("input",{type:"number",id:"edit-amount",value:_,onChange:G=>b(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-slate-600 mb-1",children:p.DATE}),o.jsx("input",{type:"datetime-local",id:"edit-date",value:C,onChange:G=>L(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"edit-bank-account",className:"block text-sm font-medium text-slate-600 mb-1",children:p.SELECT_BANK_ACCOUNT_TRANSACTION_LABEL}),o.jsxs("select",{id:"edit-bank-account",value:O||"",onChange:G=>I(G.target.value||void 0),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",children:[o.jsx("option",{value:"",children:p.SELECT_BANK_ACCOUNT_PLACEHOLDER}),d.filter(G=>!G.isDeleted).map(G=>o.jsxs("option",{value:G.id,children:[G.accountName," ",G.bankName&&`(${G.bankName})`]},G.id))]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"block text-sm font-medium text-slate-600 mb-2",children:p.TRANSACTION_TYPE}),o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"edit-type",value:fs.INCOME,checked:v===fs.INCOME,onChange:()=>y(fs.INCOME),className:"form-radio h-5 w-5 text-green-600 focus:ring-green-500"}),o.jsx("span",{className:"text-green-700",children:p.INCOME})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"edit-type",value:fs.EXPENSE,checked:v===fs.EXPENSE,onChange:()=>y(fs.EXPENSE),className:"form-radio h-5 w-5 text-red-600 focus:ring-red-500"}),o.jsx("span",{className:"text-red-700",children:p.EXPENSE})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.SAVE_CHANGES})]})]})]})})},gI=({onAddDebt:t,showTitle:e=!0,persons:n,onOpenSelectPersonModal:s,getCompositePersonBalance:r})=>{const[l,c]=D.useState(""),[d,f]=D.useState(null),[h,_]=D.useState(""),[b,v]=D.useState(""),[y,C]=D.useState(ps.CREATE_RECEIVABLE),[L,O]=D.useState(""),[I,j]=D.useState(""),[R,U]=D.useState([]),[te,Q]=D.useState(!1),ne=D.useRef(null),J=D.useRef(null),[oe,xe]=D.useState(null),[F,H]=D.useState(0),re=D.useRef(null),{addNotification:K}=ur();D.useEffect(()=>{let ce=0,M=null;d&&r&&(ce=r(d),ce>0?M={text:p.PERSON_OWES_YOU_NET_DEBT_LABEL,amount:ce,colorClass:"text-green-600 font-medium"}:ce<0?M={text:p.YOU_OWE_PERSON_NET_DEBT_LABEL,amount:Math.abs(ce),colorClass:"text-red-600 font-medium"}:M={text:p.NET_DEBT_BALANCE_ZERO_LABEL,amount:0,colorClass:"text-slate-600"}),H(ce),xe(M),d!==re.current&&(d?ce>0?C(ps.RECORD_PERSON_PAYMENT):ce<0?C(ps.RECORD_USER_PAYMENT_TO_PERSON):C(ps.CREATE_RECEIVABLE):C(ps.CREATE_RECEIVABLE)),re.current=d},[d,r]),D.useEffect(()=>{const ce=!d||F<=0,M=!d||F>=0;y===ps.RECORD_PERSON_PAYMENT&&ce&&C(ps.CREATE_RECEIVABLE),y===ps.RECORD_USER_PAYMENT_TO_PERSON&&M&&C(ps.CREATE_PAYABLE)},[y,d,F]),D.useEffect(()=>{y===ps.RECORD_PERSON_PAYMENT||y===ps.RECORD_USER_PAYMENT_TO_PERSON?(O(""),I||j(new Date().toISOString().slice(0,16))):j("")},[y,I]);const Te=ce=>{const M=n.find(k=>k.id===ce);M?(c(M.customAlias||M.name),f(M.id)):(c(""),f(null)),Q(!1)},G=ce=>{const M=ce.target.value;if(c(M),f(null),xe(null),M.trim()){const k=M.toLowerCase(),Y=n.filter(Z=>!Z.isDeleted&&(Z.customAlias&&Z.customAlias.toLowerCase().includes(k)||Z.name.toLowerCase().includes(k)||Z.mobileNumber&&Z.mobileNumber.includes(M))).slice(0,5);U(Y),Q(!0)}else U([]),Q(!1)},he=ce=>{c(ce.customAlias||ce.name),f(ce.id),U([]),Q(!1)};D.useEffect(()=>{const ce=M=>{ne.current&&!ne.current.contains(M.target)&&J.current&&!J.current.contains(M.target)&&Q(!1)};return document.addEventListener("mousedown",ce),()=>{document.removeEventListener("mousedown",ce)}},[]);const ue=ce=>{ce.preventDefault();const M=parseFloat(h);if(!l.trim()){K(p.PERSON_NAME_REQUIRED,"error");return}if(!b.trim()||isNaN(M)||M<=0){K(p.FORM_VALIDATION_ERROR,"error");return}const k={personNameValue:l.trim(),explicitSelectedPersonId:d,amount:M,description:b,formPurpose:y};if(y===ps.CREATE_PAYABLE)k.debtType=_a.PAYABLE,k.dueDate=L||void 0;else if(y===ps.CREATE_RECEIVABLE)k.debtType=_a.RECEIVABLE,k.dueDate=L||void 0;else if(y===ps.RECORD_PERSON_PAYMENT||y===ps.RECORD_USER_PAYMENT_TO_PERSON){if(!I){K(p.DEBT_FORM_ALERT_PAYMENT_DATE_REQUIRED,"error");return}k.paymentDate=new Date(I).toISOString()}t(k),c(""),f(null),_(""),v(""),O(""),j(""),Q(!1),xe(null)},ae=!d||F<=0,V=!d||F>=0;return o.jsxs("section",{"aria-labelledby":e?"add-debt-heading":void 0,className:`${e?"my-8 p-6 bg-white rounded-xl shadow-lg":""}`,children:[e&&o.jsx("h2",{id:"add-debt-heading",className:"text-2xl font-semibold text-slate-700 mb-6 text-center",children:p.ADD_NEW_DEBT}),o.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"debt-person-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.PERSON_NAME," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{ref:ne,type:"text",id:"debt-person-name",value:l,onChange:G,onFocus:()=>l.trim()&&Q(!0),placeholder:p.PERSON_NAME_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"person-suggestions"}),o.jsx("button",{type:"button",onClick:()=>{Q(!1),s(Te)},className:"p-2.5 bg-teal-500 hover:bg-teal-600 text-white rounded-lg shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:p.SELECT_PERSON_BTN_TITLE,"aria-label":p.SELECT_PERSON_BTN_TITLE,children:o.jsx(kl,{className:"w-5 h-5"})})]}),te&&o.jsx("div",{ref:J,id:"person-suggestions",className:"absolute z-10 w-full sm:w-[calc(100%-3.5rem)] bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox","aria-label":"  ",children:R.length>0?o.jsx("ul",{className:"list-none p-0",children:R.map(ce=>o.jsxs("li",{onClick:()=>he(ce),onMouseDown:M=>M.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm",role:"option","aria-selected":ce.id===d,children:[o.jsx("p",{className:"font-medium text-slate-700",children:ce.customAlias||ce.name}),ce.mobileNumber&&o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",ce.mobileNumber]}),ce.shopName&&o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",ce.shopName]})]},ce.id))}):l.trim()&&o.jsxs("div",{className:"p-3 text-center text-sm text-slate-500",children:[p.NO_SUGGESTIONS_FOUND," ",o.jsxs("span",{className:"italic",children:['"',l,'"']}),".",o.jsx("br",{}),' , "',o.jsx("span",{className:"font-semibold",children:l}),'"            ']})})]}),oe&&d&&o.jsxs("div",{className:`mt-2 px-3 py-1.5 text-xs rounded-md bg-slate-50 border border-slate-200 ${oe.colorClass}`,children:[oe.text," ",oe.amount!==0||oe.text===p.NET_DEBT_BALANCE_ZERO_LABEL?o.jsx(o.Fragment,{children:oe.text!==p.NET_DEBT_BALANCE_ZERO_LABEL&&o.jsxs("span",{className:"font-semibold",children:[p.BDT_SYMBOL," ",oe.amount.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]})}):null]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"debt-description",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DESCRIPTION," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"debt-description",value:b,onChange:ce=>v(ce.target.value),placeholder:p.DEBT_DESCRIPTION_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"debt-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",id:"debt-amount",value:h,onChange:ce=>_(ce.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),(y===ps.CREATE_PAYABLE||y===ps.CREATE_RECEIVABLE)&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:p.DUE_DATE}),o.jsx("input",{type:"date",id:"dueDate",value:L,onChange:ce=>O(ce.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"})]}),(y===ps.RECORD_PERSON_PAYMENT||y===ps.RECORD_USER_PAYMENT_TO_PERSON)&&o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.PAYMENT_DATE," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"datetime-local",id:"paymentDate",value:I,onChange:ce=>j(ce.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("span",{className:"block text-sm font-medium text-slate-600 mb-2",children:p.ENTRY_NATURE_LABEL}),o.jsxs("div",{className:"space-y-2 sm:space-y-0 sm:flex sm:items-center sm:flex-wrap sm:gap-x-4 sm:gap-y-2",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-red-50 has-[:checked]:border-red-200 border border-transparent",children:[o.jsx("input",{type:"radio",name:"formPurpose",value:ps.CREATE_PAYABLE,checked:y===ps.CREATE_PAYABLE,onChange:()=>C(ps.CREATE_PAYABLE),className:"form-radio h-4 w-4 text-red-600 focus:ring-red-500 border-slate-400"}),o.jsx("span",{className:"text-sm text-red-700 font-medium",children:p.DEBT_PAYABLE_USER_OWES})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-green-50 has-[:checked]:border-green-200 border border-transparent",children:[o.jsx("input",{type:"radio",name:"formPurpose",value:ps.CREATE_RECEIVABLE,checked:y===ps.CREATE_RECEIVABLE,onChange:()=>C(ps.CREATE_RECEIVABLE),className:"form-radio h-4 w-4 text-green-600 focus:ring-green-500 border-slate-400"}),o.jsx("span",{className:"text-sm text-green-700 font-medium",children:p.DEBT_RECEIVABLE_USER_IS_OWED})]}),o.jsxs("label",{className:`flex items-center space-x-2 p-2 rounded-md border border-transparent ${ae?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-slate-50 has-[:checked]:bg-teal-50 has-[:checked]:border-teal-200"}`,children:[o.jsx("input",{type:"radio",name:"formPurpose",value:ps.RECORD_PERSON_PAYMENT,checked:y===ps.RECORD_PERSON_PAYMENT,onChange:()=>C(ps.RECORD_PERSON_PAYMENT),className:"form-radio h-4 w-4 text-teal-600 focus:ring-teal-500 border-slate-400",disabled:ae}),o.jsx("span",{className:`text-sm font-medium ${ae?"text-slate-500":"text-teal-700"}`,children:p.PERSON_PAYMENT_RECEIVED_LEDGER_CREDIT})]}),o.jsxs("label",{className:`flex items-center space-x-2 p-2 rounded-md border border-transparent ${V?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-slate-50 has-[:checked]:bg-orange-50 has-[:checked]:border-orange-200"}`,children:[o.jsx("input",{type:"radio",name:"formPurpose",value:ps.RECORD_USER_PAYMENT_TO_PERSON,checked:y===ps.RECORD_USER_PAYMENT_TO_PERSON,onChange:()=>C(ps.RECORD_USER_PAYMENT_TO_PERSON),className:"form-radio h-4 w-4 text-orange-600 focus:ring-orange-500 border-slate-400",disabled:V}),o.jsx("span",{className:`text-sm font-medium ${V?"text-slate-500":"text-orange-700"}`,children:p.PERSON_PAYMENT_MADE_BY_USER_LEDGER_DEBIT})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:p.ADD_ENTRY_BTN})]})]})},Xu=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),xI=({mode:t,initialEmail:e,onClose:n,onSwitchMode:s})=>{const[r,l]=D.useState(t==="forgotPasswordReset"&&e?e:""),[c,d]=D.useState(""),[f,h]=D.useState(""),[_,b]=D.useState(""),[v,y]=D.useState(""),[C,L]=D.useState(""),[O,I]=D.useState(null),[j,R]=D.useState(null),[U,te]=D.useState(null),[Q,ne]=D.useState(null),{login:J,signup:oe,isAuthLoading:xe,authError:F,clearAuthError:H,requestPasswordReset:re,resetPasswordWithCode:K}=Nc(),{addNotification:Te}=ur(),G=D.useRef(null),he=D.useRef(null);D.useEffect(()=>{t==="forgotPasswordReset"&&e?(r!==e&&l(e),d("")):t!=="login"?(l(""),d("")):(e&&r!==e?l(e):e||l(""),d("")),t!=="signup"&&f!==""&&h(""),t!=="forgotPasswordReset"&&(_!==""&&b(""),v!==""&&y(""),C!==""&&L(""));const ae=t==="forgotPasswordReset"&&G.current==="forgotPasswordRequest",V=t==="login"&&F===p.AUTH_ERROR_INVALID_CREDENTIALS;!ae&&!V&&H(),I(null),R(null),te(null),ne(null),G.current=t},[t,e,H]);const ue=async ae=>{var M;ae.preventDefault(),I(null),R(null),te(null),ne(null);let V=!0,ce=!1;if(t==="login")c.length<6&&(R(p.PASSWORD_PLACEHOLDER),V=!1),V&&(ce=await J(r,c,!1));else if(t==="signup")f.trim()||(I(p.NAME+" "),V=!1),c.length<6&&(R(p.PASSWORD_PLACEHOLDER),V=!1),V&&(ce=await oe(f,r,c));else if(t==="forgotPasswordRequest"){const k=((M=he.current)==null?void 0:M.value)||r;if(!k){I(" ");return}const Y=await re(k);Y.success?(Te(p.RESET_CODE_SENT_SUCCESS,"success",7e3),s("forgotPasswordReset",k)):I(Y.message||p.RESET_CODE_SENT_FAIL)}else if(t==="forgotPasswordReset"){if(r||(I("        "),V=!1),_.trim()||(I(p.RESET_CODE_LABEL+" "),V=!1),v.length<6&&(te(p.NEW_PASSWORD_LABEL),V=!1),C.length<6&&(ne(p.CONFIRM_NEW_PASSWORD_LABEL),V=!1),v!==C&&(ne(p.PASSWORDS_DONT_MATCH),te(p.PASSWORDS_DONT_MATCH),V=!1),!V)return;try{await K(r,_,v),ce=!0,b(""),y(""),L(""),d("")}catch(k){!F&&k.message?I(k.message):F||I(p.AUTH_ERROR_GENERAL)}}(t==="login"||t==="signup"||t==="forgotPasswordReset")&&ce&&(t==="login"&&d(""),n())};return o.jsxs("div",{className:"bg-white rounded-lg w-full",children:[t==="forgotPasswordRequest"&&o.jsx("p",{className:"text-sm text-slate-600 mb-4 text-center",children:p.FORGOT_PASSWORD_INSTRUCTIONS}),o.jsxs("form",{onSubmit:ue,className:"space-y-5",children:[t==="signup"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:p.NAME}),o.jsx("input",{type:"text",id:"name",value:f,onChange:ae=>h(ae.target.value),placeholder:p.NAME_PLACEHOLDER,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0})]}),(t==="login"||t==="signup"||t==="forgotPasswordRequest")&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"emailOrMobile",className:"block text-sm font-medium text-slate-600 mb-1",children:t==="login"?p.EMAIL_OR_MOBILE:p.EMAIL}),o.jsx("input",{ref:he,type:t==="login"?"text":"email",id:"emailOrMobile",value:r,onChange:ae=>l(ae.target.value),placeholder:t==="login"?p.EMAIL_PLACEHOLDER:p.EMAIL_PLACEHOLDER.split("  ")[0],className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0})]}),t==="forgotPasswordReset"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email-display",className:"block text-sm font-medium text-slate-600 mb-1",children:p.EMAIL}),o.jsx("input",{type:"email",id:"email-display",value:r,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm bg-slate-100 cursor-not-allowed",readOnly:!0})]}),(t==="login"||t==="signup")&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-baseline",children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PASSWORD}),t==="login"&&o.jsx("button",{type:"button",onClick:()=>s("forgotPasswordRequest",r),className:"text-xs text-teal-600 hover:text-teal-700 hover:underline focus:outline-none",children:p.FORGOT_PASSWORD_LINK})]}),o.jsx("input",{type:"password",id:"password",value:c,onChange:ae=>{d(ae.target.value),R(null)},placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150 ${j?"border-red-500":"border-slate-300"}`,required:!0,minLength:6,"aria-describedby":"password-error"}),j&&o.jsx("p",{id:"password-error",className:"mt-1 text-xs text-red-600",children:j})]}),t==="forgotPasswordReset"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"resetCode",className:"block text-sm font-medium text-slate-600 mb-1",children:p.RESET_CODE_LABEL}),o.jsx("input",{type:"text",id:"resetCode",value:_,onChange:ae=>b(ae.target.value),placeholder:p.RESET_CODE_PLACEHOLDER,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.NEW_PASSWORD_LABEL}),o.jsx("input",{type:"password",id:"newPasswordModal",value:v,onChange:ae=>{y(ae.target.value),te(null),Q===p.PASSWORDS_DONT_MATCH&&ne(null)},placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150 ${U?"border-red-500":"border-slate-300"}`,required:!0,minLength:6,"aria-describedby":"new-password-error"}),U&&o.jsx("p",{id:"new-password-error",className:"mt-1 text-xs text-red-600",children:U})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmNewPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.CONFIRM_NEW_PASSWORD_LABEL}),o.jsx("input",{type:"password",id:"confirmNewPasswordModal",value:C,onChange:ae=>{L(ae.target.value),ne(null),U===p.PASSWORDS_DONT_MATCH&&te(null)},placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 transition duration-150 ${Q?"border-red-500":"border-slate-300"}`,required:!0,minLength:6,"aria-describedby":"confirm-password-error"}),Q&&o.jsx("p",{id:"confirm-password-error",className:"mt-1 text-xs text-red-600",children:Q})]})]}),o.jsx("button",{type:"submit",disabled:xe,className:`w-full font-semibold py-3 px-4 rounded-lg shadow-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2
              ${xe?"bg-slate-400 cursor-not-allowed":t==="forgotPasswordRequest"||t==="forgotPasswordReset"?"bg-orange-500 hover:bg-orange-600 focus:ring-orange-500 text-white":"bg-teal-600 hover:bg-teal-700 focus:ring-teal-500 text-white"}
            `,children:xe?p.LOADING:t==="login"?p.LOGIN:t==="signup"?p.SIGNUP:t==="forgotPasswordRequest"?p.SEND_RESET_CODE_BTN:p.RESET_PASSWORD_BTN}),F&&o.jsxs("div",{className:"mt-4 p-3 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-md text-sm flex items-start space-x-2",role:"alert",children:[o.jsx(Xu,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),o.jsx("span",{children:F})]}),O&&!F&&o.jsxs("div",{className:`mt-4 p-3 rounded-md text-sm flex items-start space-x-2 ${O===p.RESET_CODE_SENT_SUCCESS?"bg-green-100 border-l-4 border-green-500 text-green-700":"bg-red-100 border-l-4 border-red-500 text-red-700"}`,role:"status",children:[o.jsx(Xu,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-red-600"}),o.jsx("span",{children:O})]})]}),o.jsxs("div",{className:"mt-6 text-center text-sm",children:[t==="login"&&!(F!=null&&F.includes(p.MOCKED_AUTH_WARNING_TITLE))&&o.jsxs("span",{className:"text-slate-600",children:[p.DONT_HAVE_ACCOUNT," ",o.jsx("button",{onClick:()=>s("signup"),className:"font-semibold text-teal-600 hover:text-teal-700 hover:underline",children:p.SIGNUP})]}),t==="signup"&&o.jsxs("span",{className:"text-slate-600",children:[p.ALREADY_HAVE_ACCOUNT," ",o.jsx("button",{onClick:()=>s("login"),className:"font-semibold text-teal-600 hover:text-teal-700 hover:underline",children:p.LOGIN})]}),(t==="forgotPasswordRequest"||t==="forgotPasswordReset")&&o.jsx("button",{onClick:()=>{s("login")},className:"text-teal-600 hover:text-teal-700 hover:underline",children:p.BACK_TO_LOGIN_LINK})]})]})},EI=({isOpen:t,onClose:e,debt:n,onSave:s,persons:r,onOpenSelectPersonModal:l})=>{const[c,d]=D.useState(""),[f,h]=D.useState(null),[_,b]=D.useState(""),[v,y]=D.useState(""),[C,L]=D.useState(_a.PAYABLE),[O,I]=D.useState(""),[j,R]=D.useState([]),[U,te]=D.useState(!1),Q=D.useRef(null),ne=D.useRef(null),{addNotification:J}=ur();if(D.useEffect(()=>{if(n){const re=r.find(K=>K.id===n.personId&&!K.isDeleted);d(re?re.name:p.UNKNOWN_PERSON),h(n.personId),b(n.originalAmount.toString()),y(n.description),L(n.type),I(n.dueDate?new Date(n.dueDate).toISOString().split("T")[0]:""),te(!1)}else d(""),h(null),b(""),y(""),L(_a.PAYABLE),I(""),te(!1)},[n,r]),!t||!n)return null;const oe=re=>{const K=r.find(Te=>Te.id===re&&!Te.isDeleted);if(K)d(K.name),h(K.id);else{const Te=r.find(G=>G.id===n.personId&&!G.isDeleted);d(Te?Te.name:p.UNKNOWN_PERSON),h(n.personId),J("        ","warning")}te(!1)},xe=re=>{const K=re.target.value;if(d(K),h(null),K.trim()){const Te=K.toLowerCase(),G=r.filter(he=>!he.isDeleted&&(he.name.toLowerCase().includes(Te)||he.mobileNumber&&he.mobileNumber.includes(K))).slice(0,5);R(G),te(!0)}else R([]),te(!1)},F=re=>{d(re.name),h(re.id),R([]),te(!1)};D.useEffect(()=>{const re=K=>{Q.current&&!Q.current.contains(K.target)&&ne.current&&!ne.current.contains(K.target)&&te(!1)};return document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[]);const H=re=>{re.preventDefault();const K=parseFloat(_);if(!c.trim()){J(p.PERSON_NAME_REQUIRED,"error");return}if(!f&&r.find(G=>G.name.toLowerCase()===c.trim().toLowerCase()&&!G.isDeleted),!v.trim()||isNaN(K)||K<=0){J(p.FORM_VALIDATION_ERROR,"error");return}const Te=C===_a.PAYABLE?ps.CREATE_PAYABLE:ps.CREATE_RECEIVABLE;s({personNameValue:c.trim(),explicitSelectedPersonId:f,amount:K,description:v,formPurpose:Te,debtType:C,dueDate:O||void 0},n.id),te(!1)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"edit-debt-modal-title",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[o.jsx("h2",{id:"edit-debt-modal-title",className:"text-2xl font-semibold text-slate-700 mb-6",children:p.EDIT_DEBT_MODAL_TITLE}),o.jsxs("form",{onSubmit:H,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("label",{htmlFor:"edit-debt-person-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.PERSON_NAME," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{ref:Q,type:"text",id:"edit-debt-person-name",value:c,onChange:xe,onFocus:()=>c.trim()&&te(!0),placeholder:p.PERSON_NAME_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,autoComplete:"off","aria-autocomplete":"list","aria-controls":"edit-person-suggestions"}),o.jsx("button",{type:"button",onClick:()=>{te(!1),l(oe)},className:"p-2.5 bg-teal-500 hover:bg-teal-600 text-white rounded-lg shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:p.SELECT_PERSON_BTN_TITLE,"aria-label":p.SELECT_PERSON_BTN_TITLE,children:o.jsx(kl,{className:"w-5 h-5"})})]}),U&&o.jsx("div",{ref:ne,id:"edit-person-suggestions",className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",role:"listbox",children:j.length>0?o.jsx("ul",{className:"list-none p-0",children:j.map(re=>o.jsxs("li",{onClick:()=>F(re),onMouseDown:K=>K.preventDefault(),className:"px-4 py-2 hover:bg-teal-50 cursor-pointer text-sm",role:"option","aria-selected":re.id===f,children:[o.jsx("p",{className:"font-medium text-slate-700",children:re.name}),re.mobileNumber&&o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",re.mobileNumber]}),re.shopName&&o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",re.shopName]})]},re.id))}):c.trim()&&o.jsxs("div",{className:"p-3 text-center text-sm text-slate-500",children:[p.NO_SUGGESTIONS_FOUND," ",o.jsxs("span",{className:"italic",children:['"',c,'"']}),".",o.jsx("br",{}),' , "',o.jsx("span",{className:"font-semibold",children:c}),'"            ']})})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"edit-debt-description",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DESCRIPTION," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"edit-debt-description",value:v,onChange:re=>y(re.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"edit-debt-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",o.jsx("span",{className:"text-sm text-slate-500",children:"( )"})," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",id:"edit-debt-amount",value:_,onChange:re=>b(re.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"}),n&&n.remainingAmount<parseFloat(_)&&!n.isSettled&&o.jsxs("p",{className:"mt-1 text-xs text-sky-600",children:[" : ",p.BDT_SYMBOL," ",n.remainingAmount.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),".          "]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"edit-debt-dueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:p.DUE_DATE}),o.jsx("input",{type:"date",id:"edit-debt-dueDate",value:O,onChange:re=>I(re.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"block text-sm font-medium text-slate-600 mb-2",children:p.DEBT_TYPE}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-red-50 has-[:checked]:border-red-200 border border-transparent",children:[o.jsx("input",{type:"radio",name:"edit-debtType",value:_a.PAYABLE,checked:C===_a.PAYABLE,onChange:()=>L(_a.PAYABLE),className:"form-radio h-4 w-4 text-red-600 focus:ring-red-500"}),o.jsx("span",{className:"text-sm text-red-700",children:p.DEBT_PAYABLE_USER_OWES})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md hover:bg-slate-50 has-[:checked]:bg-green-50 has-[:checked]:border-green-200 border border-transparent",children:[o.jsx("input",{type:"radio",name:"edit-debtType",value:_a.RECEIVABLE,checked:C===_a.RECEIVABLE,onChange:()=>L(_a.RECEIVABLE),className:"form-radio h-4 w-4 text-green-600 focus:ring-green-500"}),o.jsx("span",{className:"text-sm text-green-700",children:p.DEBT_RECEIVABLE_USER_IS_OWED})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.SAVE_CHANGES})]})]})]})})},_I=({isOpen:t,onClose:e,transaction:n})=>{if(!t||!n)return null;const s=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return f}},r=f=>({description:p.FIELD_NAME_DESCRIPTION,amount:p.FIELD_NAME_AMOUNT,type:p.FIELD_NAME_TYPE,date:p.FIELD_NAME_DATE,originalDate:" ",linkedLedgerEntryId:"  ",isDeleted:p.FIELD_NAME_IS_DELETED,deletedAt:p.FIELD_NAME_DELETED_AT})[f]||f,l=(f,h)=>{if(h==null)return"";switch(f){case"type":return h===fs.INCOME?p.INCOME:p.EXPENSE;case"date":case"originalDate":case"deletedAt":return s(String(h));case"isDeleted":return h?p.FIELD_VALUE_TRUE:p.FIELD_VALUE_FALSE;case"amount":return`${p.BDT_SYMBOL} ${Number(h).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`;default:return String(h)}},c=(f,h)=>{const _=[],b=f.snapshot;if(f.action==="created"||!h&&f.action!=="updated"&&f.action!=="restored")Object.keys(b).forEach(v=>{b[v]!==void 0&&_.push(o.jsxs("li",{className:"text-sm",children:[o.jsxs("strong",{children:[r(v),":"]})," ",l(v,b[v])]},v))});else if((f.action==="updated"||f.action==="restored")&&h){let v=!1;if(Object.keys(b).forEach(y=>{const C=h[y],L=b[y];let O=!1;y==="isDeleted"?O=!!L!=!!C:O=String(L)!==String(C),O&&(f.action==="restored"?(y==="isDeleted"||y==="deletedAt"||String(L)!==String(C))&&(v=!0,_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(y)).replace("{oldValue}",l(y,C)).replace("{newValue}",l(y,L))},y))):(v=!0,_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(y)).replace("{oldValue}",l(y,C)).replace("{newValue}",l(y,L))},y))))}),!v){if(f.action==="updated")_.push(o.jsx("li",{className:"text-sm italic",children:"     "},"no-changes"));else if(f.action==="restored"){const y=!!b.isDeleted!=!!h.isDeleted,C=String(b.deletedAt)!==String(h.deletedAt);y&&_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("isDeleted")).replace("{oldValue}",l("isDeleted",h.isDeleted)).replace("{newValue}",l("isDeleted",b.isDeleted))},"isDeleted-restore-specific")),C&&_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("deletedAt")).replace("{oldValue}",l("deletedAt",h.deletedAt)).replace("{newValue}",l("deletedAt",b.deletedAt))},"deletedAt-restore-specific")),!y&&!C&&_.push(o.jsx("li",{className:"text-sm italic",children:"       "},"no-substantive-restore-changes"))}}}else f.action==="deleted"&&Object.keys(b).forEach(v=>{(v==="isDeleted"||v==="deletedAt"||b[v]!==void 0&&b[v]!==null)&&_.push(o.jsxs("li",{className:"text-sm",children:[o.jsxs("strong",{children:[r(v),":"]})," ",l(v,b[v])]},v))});return _.length===0?o.jsx("li",{className:"text-sm italic",children:"    "}):o.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:_})},d=f=>{switch(f){case"created":return{text:p.ACTION_CREATED,color:"bg-green-100 text-green-700"};case"updated":return{text:p.ACTION_UPDATED,color:"bg-blue-100 text-blue-700"};case"deleted":return{text:p.ACTION_DELETED,color:"bg-red-100 text-red-700"};case"restored":return{text:p.ACTION_RESTORED,color:"bg-yellow-100 text-yellow-700"};default:return{text:f,color:"bg-slate-100 text-slate-700"}}};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"transaction-history-modal-title",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("div",{children:o.jsxs("h2",{id:"transaction-history-modal-title",className:"text-xl font-semibold text-slate-800",children:[p.TRANSACTION_HISTORY_MODAL_TITLE,": ",o.jsx("span",{className:"font-normal",children:n.description})]})}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto flex-grow pr-1 space-y-4 custom-scrollbar",children:n.editHistory&&n.editHistory.length>0?n.editHistory.slice().sort((f,h)=>new Date(h.timestamp).getTime()-new Date(f.timestamp).getTime()).map((f,h,_)=>{const b=_[h+1],v=b?b.snapshot:void 0,y=d(f.action);return o.jsxs("div",{className:"p-3.5 border border-slate-200 rounded-lg bg-slate-50 shadow-sm hover:shadow-md transition-shadow duration-150",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[o.jsxs("p",{className:"text-xs text-slate-500",children:[o.jsx("span",{className:"font-semibold text-slate-700",children:" : "}),f.userId]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${y.color}`,children:y.text})]}),o.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-1",children:[p.VERSION_AT_TIMESTAMP," ",s(f.timestamp)]}),c(f,v)]},f.timestamp)}):o.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_HISTORY})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1; /* slate-300 */
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8; /* slate-500 */
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},bI=({isOpen:t,onClose:e,debt:n,persons:s})=>{if(!t||!n)return null;const r=s.find(b=>b.id===n.personId),l=r?r.name:p.UNKNOWN_PERSON,c=b=>{if(!b)return"N/A";try{return new Date(b).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return b}},d=b=>({personId:p.FIELD_NAME_PERSON_NAME,originalAmount:p.FIELD_NAME_ORIGINAL_AMOUNT||" ",remainingAmount:p.FIELD_NAME_REMAINING_AMOUNT||" ",description:p.FIELD_NAME_DESCRIPTION,type:p.FIELD_NAME_TYPE,dueDate:p.FIELD_NAME_DUE_DATE,isSettled:p.FIELD_NAME_IS_SETTLED,creationDate:p.FIELD_NAME_CREATION_DATE,settledDate:p.FIELD_NAME_SETTLED_DATE})[b]||b,f=(b,v)=>{if(v==null)return"";switch(b){case"type":return v===_a.PAYABLE?p.PAYABLE:p.RECEIVABLE;case"isSettled":return v?p.FIELD_VALUE_TRUE:p.FIELD_VALUE_FALSE;case"creationDate":case"settledDate":case"dueDate":return c(String(v));case"originalAmount":case"remainingAmount":return`${p.BDT_SYMBOL} ${Number(v).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"personId":const y=s.find(C=>C.id===String(v));return y?y.name:`${p.UNKNOWN_PERSON} (ID: ${v})`;default:return String(v)}},h=(b,v)=>{const y=[],C=b.snapshot;if(b.action==="created"||!v)Object.keys(C).forEach(L=>{C[L]!==void 0&&y.push(o.jsxs("li",{className:"text-sm",children:[o.jsxs("strong",{children:[d(L),":"]})," ",f(L,C[L])]},L))});else{let L=!1;Object.keys(C).forEach(O=>{const I=C[O],j=v?v[O]:void 0;let R=!1;O==="isSettled"?R=!!I!=!!j:typeof I=="number"||typeof j=="number"?R=Number(I)!==Number(j):R=String(I)!==String(j),R&&(L=!0,y.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",d(O)).replace("{oldValue}",f(O,j)).replace("{newValue}",f(O,I))},O)))}),L||y.push(o.jsx("li",{className:"text-sm italic",children:"     "},"no-changes"))}return y.length===0?o.jsx("li",{className:"text-sm italic",children:"    "}):o.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:y})},_=b=>{switch(b){case"created":return{text:p.ACTION_CREATED,color:"bg-green-100 text-green-700"};case"updated":return{text:p.ACTION_UPDATED,color:"bg-blue-100 text-blue-700"};default:return{text:b,color:"bg-slate-100 text-slate-700"}}};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"debt-history-modal-title",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("div",{children:o.jsxs("h2",{id:"debt-history-modal-title",className:"text-xl font-semibold text-slate-800",children:[p.DEBT_HISTORY_MODAL_TITLE,": ",o.jsxs("span",{className:"font-normal",children:[l," - ",n.description]})]})}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto flex-grow pr-1 space-y-4 custom-scrollbar",children:n.editHistory&&n.editHistory.length>0?n.editHistory.slice().sort((b,v)=>new Date(v.timestamp).getTime()-new Date(b.timestamp).getTime()).map((b,v,y)=>{const C=y.find(I=>new Date(I.timestamp).getTime()<new Date(b.timestamp).getTime()),L=C?C.snapshot:void 0,O=_(b.action);return o.jsxs("div",{className:"p-3.5 border border-slate-200 rounded-lg bg-slate-50 shadow-sm hover:shadow-md transition-shadow duration-150",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[o.jsxs("p",{className:"text-xs text-slate-500",children:[o.jsx("span",{className:"font-semibold text-slate-700",children:" : "}),b.userId]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${O.color}`,children:O.text})]}),o.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-1",children:[p.VERSION_AT_TIMESTAMP," ",c(b.timestamp)]}),h(b,L)]},b.timestamp)}):o.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_HISTORY})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1; /* slate-300 */
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8; /* slate-500 */
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},Ya=({isOpen:t,onClose:e,title:n,children:s,size:r="md",headerActions:l})=>{const[c,d]=D.useState(!1);if(D.useEffect(()=>{if(t){const v=setTimeout(()=>{d(!0)},10);document.body.style.overflow="hidden";const y=window.innerWidth-document.documentElement.clientWidth;return r!=="screen"&&(document.body.style.paddingRight=`${y}px`),()=>{clearTimeout(v),document.body.style.overflow="auto",document.body.style.paddingRight="0"}}else d(!1),setTimeout(()=>{document.querySelector(".fixed.inset-0.bg-black.bg-opacity-70")||(document.body.style.overflow="auto",document.body.style.paddingRight="0")},300)},[t,r]),!t&&!c)return null;const f={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl",full:"max-w-full h-full",screen:"w-screen h-screen max-w-none max-h-none rounded-none shadow-none"},h=r==="screen"?"p-0":"p-4",_="bg-white flex flex-col transform transition-all duration-300 ease-out",b=r==="screen"?f.screen:`p-5 sm:p-6 rounded-xl shadow-2xl w-full ${f[r]} max-h-[90vh]`;return o.jsxs("div",{className:`fixed inset-0 bg-black flex items-center justify-center z-[70] transition-opacity duration-300 ease-out ${h} ${t&&c?"bg-opacity-70 opacity-100":"bg-opacity-0 opacity-0 pointer-events-none"}`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:t&&c?e:void 0,children:[o.jsxs("div",{className:`
          ${_} ${b}
          ${t&&c?"opacity-100 scale-100":"opacity-0 scale-95"}
        `,onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{className:`flex justify-between items-center mb-4 pb-3 border-b border-slate-200 ${r==="screen"?"px-4 pt-4 sm:px-6 sm:pt-5":""}`,children:[o.jsx("h2",{id:"modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800 flex-grow truncate mr-2",children:n}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[" ",l,o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),o.jsx("div",{className:`overflow-y-auto flex-grow custom-scrollbar-modal pr-1 ${r==="screen"?"px-4 pb-4 sm:px-6 sm:pb-5":""}`,children:s})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar-modal::-webkit-scrollbar-track {
          background: #f8fafc; /* bg-slate-50 */
          border-radius: 10px;
        }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb {
          background: #e2e8f0; /* slate-200 */
          border-radius: 10px;
        }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover {
          background: #cbd5e1; /* slate-300 */
        }
      `})]})},TI=({isOpen:t,onClose:e,onConfirm:n,title:s,message:r,confirmButtonText:l=p.CONFIRM_BTN_YES_DELETE||" ",cancelButtonText:c=p.CANCEL,confirmButtonColor:d="bg-red-600 hover:bg-red-700 focus:ring-red-500"})=>{const f=D.useRef(null),h=D.useRef(null),_=D.useRef(null);return D.useEffect(()=>{var b;t&&((b=h.current)==null||b.focus())},[t]),D.useEffect(()=>{const b=v=>{var L,O;if(!t||!_.current)return;if(v.key==="Escape"){e();return}const y=[h.current,f.current].filter(Boolean);if(y.length===0)return;const C=y.findIndex(I=>I===document.activeElement);if(v.key==="ArrowRight"||v.key==="Tab"&&!v.shiftKey){v.preventDefault();const I=(C+1)%y.length;(L=y[I])==null||L.focus()}else if(v.key==="ArrowLeft"||v.key==="Tab"&&v.shiftKey){v.preventDefault();const I=(C-1+y.length)%y.length;(O=y[I])==null||O.focus()}};return t&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[t,e]),t?o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[102]",role:"dialog","aria-modal":"true","aria-labelledby":"confirmation-modal-title",onClick:e,children:[o.jsxs("div",{ref:_,className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-md transform transition-all duration-150 ease-out scale-100",onClick:b=>b.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},tabIndex:-1,children:[o.jsx("h2",{id:"confirmation-modal-title",className:"text-xl font-semibold text-slate-800 mb-4",children:s}),o.jsx("div",{className:"text-sm text-slate-600 mb-6 whitespace-pre-wrap",children:r}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{ref:f,type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-1",children:c}),o.jsx("button",{ref:h,type:"button",onClick:()=>{n()},className:`px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 ${d}`,children:l})]})]}),o.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null},Bh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),f_=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),yI=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),NI=()=>{const{notifications:t,removeNotification:e}=ur();if(t.length===0)return null;const n=r=>{switch(r){case"success":return o.jsx(Bh,{className:"w-6 h-6 text-green-500"});case"error":return o.jsx(Xu,{className:"w-6 h-6 text-red-500"});case"info":return o.jsx(f_,{className:"w-6 h-6 text-sky-500"});case"warning":return o.jsx(yI,{className:"w-6 h-6 text-yellow-500"});default:return null}},s=r=>{switch(r){case"success":return"bg-green-50 border-green-400 text-green-700";case"error":return"bg-red-50 border-red-400 text-red-700";case"info":return"bg-sky-50 border-sky-400 text-sky-700";case"warning":return"bg-yellow-50 border-yellow-400 text-yellow-700";default:return"bg-slate-50 border-slate-400 text-slate-700"}};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed top-5 right-5 z-[250] w-full max-w-xs sm:max-w-sm space-y-3",children:t.map(r=>o.jsxs("div",{className:`p-4 rounded-lg shadow-lg border-l-4 flex items-start space-x-3 transition-all duration-300 ease-in-out transform animate-slideInRight ${s(r.type)}`,role:"alert","aria-live":r.type==="error"?"assertive":"polite",children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n(r.type)}),o.jsx("div",{className:"flex-grow text-sm",children:r.message}),o.jsx("button",{onClick:()=>e(r.id),className:`p-1 -mr-1 -mt-1 rounded-full hover:bg-opacity-20 ${r.type==="success"?"hover:bg-green-200":r.type==="error"?"hover:bg-red-200":r.type==="info"?"hover:bg-sky-200":r.type==="warning"?"hover:bg-yellow-200":"hover:bg-slate-200"}`,"aria-label":"Close notification",children:o.jsx(Wc,{className:"w-4 h-4"})})]},r.id))}),o.jsx("style",{children:`
          @keyframes slideInRight {
            from {
              opacity: 0;
              transform: translateX(100%);
            }
            to {
              opacity: 1;
              transform: translateX(0);
            }
          }
          .animate-slideInRight {
            animation: slideInRight 0.3s ease-out forwards;
          }
        `})]})},sf=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),h_=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})}),vI="modulepreload",AI=function(t){return"/daily-spending-tracker/"+t},UE={},ip=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let c=function(h){return Promise.all(h.map(_=>Promise.resolve(_).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=c(n.map(h=>{if(h=AI(h),h in UE)return;UE[h]=!0;const _=h.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const v=document.createElement("link");if(v.rel=_?"stylesheet":vI,_||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),_)return new Promise((y,C)=>{v.addEventListener("load",y),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};function $s(t){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(t)}var oi=Uint8Array,Ki=Uint16Array,Op=Int32Array,Zh=new oi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qh=new oi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),op=new oi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m_=function(t,e){for(var n=new Ki(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var r=new Op(n[30]),s=1;s<30;++s)for(var l=n[s];l<n[s+1];++l)r[l]=l-n[s]<<5|s;return{b:n,r}},p_=m_(Zh,2),g_=p_.b,lp=p_.r;g_[28]=258,lp[258]=28;var x_=m_(Qh,0),SI=x_.b,FE=x_.r,cp=new Ki(32768);for(var ba=0;ba<32768;++ba){var mc=(ba&43690)>>1|(ba&21845)<<1;mc=(mc&52428)>>2|(mc&13107)<<2,mc=(mc&61680)>>4|(mc&3855)<<4,cp[ba]=((mc&65280)>>8|(mc&255)<<8)>>1}var fl=function(t,e,n){for(var s=t.length,r=0,l=new Ki(e);r<s;++r)t[r]&&++l[t[r]-1];var c=new Ki(e);for(r=1;r<e;++r)c[r]=c[r-1]+l[r-1]<<1;var d;if(n){d=new Ki(1<<e);var f=15-e;for(r=0;r<s;++r)if(t[r])for(var h=r<<4|t[r],_=e-t[r],b=c[t[r]-1]++<<_,v=b|(1<<_)-1;b<=v;++b)d[cp[b]>>f]=h}else for(d=new Ki(s),r=0;r<s;++r)t[r]&&(d[r]=cp[c[t[r]-1]++]>>15-t[r]);return d},Tc=new oi(288);for(var ba=0;ba<144;++ba)Tc[ba]=8;for(var ba=144;ba<256;++ba)Tc[ba]=9;for(var ba=256;ba<280;++ba)Tc[ba]=7;for(var ba=280;ba<288;++ba)Tc[ba]=8;var af=new oi(32);for(var ba=0;ba<32;++ba)af[ba]=5;var CI=fl(Tc,9,0),LI=fl(Tc,9,1),wI=fl(af,5,0),II=fl(af,5,1),T0=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ko=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&n},y0=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Pp=function(t){return(t+7)/8|0},E_=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new oi(t.subarray(e,n))},DI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Uo=function(t,e,n){var s=new Error(e||DI[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,Uo),!n)throw s;return s},RI=function(t,e,n,s){var r=t.length,l=0;if(!r||e.f&&!e.l)return n||new oi(0);var c=!n,d=c||e.i!=2,f=e.i;c&&(n=new oi(r*3));var h=function(we){var Ze=n.length;if(we>Ze){var Je=new oi(Math.max(Ze*2,we));Je.set(n),n=Je}},_=e.f||0,b=e.p||0,v=e.b||0,y=e.l,C=e.d,L=e.m,O=e.n,I=r*8;do{if(!y){_=ko(t,b,1);var j=ko(t,b+1,3);if(b+=3,j)if(j==1)y=LI,C=II,L=9,O=5;else if(j==2){var Q=ko(t,b,31)+257,ne=ko(t,b+10,15)+4,J=Q+ko(t,b+5,31)+1;b+=14;for(var oe=new oi(J),xe=new oi(19),F=0;F<ne;++F)xe[op[F]]=ko(t,b+F*3,7);b+=ne*3;for(var H=T0(xe),re=(1<<H)-1,K=fl(xe,H,1),F=0;F<J;){var Te=K[ko(t,b,re)];b+=Te&15;var R=Te>>4;if(R<16)oe[F++]=R;else{var G=0,he=0;for(R==16?(he=3+ko(t,b,3),b+=2,G=oe[F-1]):R==17?(he=3+ko(t,b,7),b+=3):R==18&&(he=11+ko(t,b,127),b+=7);he--;)oe[F++]=G}}var ue=oe.subarray(0,Q),ae=oe.subarray(Q);L=T0(ue),O=T0(ae),y=fl(ue,L,1),C=fl(ae,O,1)}else Uo(1);else{var R=Pp(b)+4,U=t[R-4]|t[R-3]<<8,te=R+U;if(te>r){f&&Uo(0);break}d&&h(v+U),n.set(t.subarray(R,te),v),e.b=v+=U,e.p=b=te*8,e.f=_;continue}if(b>I){f&&Uo(0);break}}d&&h(v+131072);for(var V=(1<<L)-1,ce=(1<<O)-1,M=b;;M=b){var G=y[y0(t,b)&V],k=G>>4;if(b+=G&15,b>I){f&&Uo(0);break}if(G||Uo(2),k<256)n[v++]=k;else if(k==256){M=b,y=null;break}else{var Y=k-254;if(k>264){var F=k-257,Z=Zh[F];Y=ko(t,b,(1<<Z)-1)+g_[F],b+=Z}var fe=C[y0(t,b)&ce],Ne=fe>>4;fe||Uo(3),b+=fe&15;var ae=SI[Ne];if(Ne>3){var Z=Qh[Ne];ae+=y0(t,b)&(1<<Z)-1,b+=Z}if(b>I){f&&Uo(0);break}d&&h(v+131072);var de=v+Y;if(v<ae){var ye=l-ae,Ue=Math.min(ae,de);for(ye+v<0&&Uo(3);v<Ue;++v)n[v]=s[ye+v]}for(;v<de;++v)n[v]=n[v-ae]}}e.l=y,e.p=M,e.b=v,e.f=_,y&&(_=1,e.m=L,e.d=C,e.n=O)}while(!_);return v!=n.length&&c?E_(n,0,v):n.subarray(0,v)},Pl=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8},Fd=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8,t[s+2]|=n>>16},N0=function(t,e){for(var n=[],s=0;s<t.length;++s)t[s]&&n.push({s,f:t[s]});var r=n.length,l=n.slice();if(!r)return{t:b_,l:0};if(r==1){var c=new oi(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(te,Q){return te.f-Q.f}),n.push({s:-1,f:25001});var d=n[0],f=n[1],h=0,_=1,b=2;for(n[0]={s:-1,f:d.f+f.f,l:d,r:f};_!=r-1;)d=n[n[h].f<n[b].f?h++:b++],f=n[h!=_&&n[h].f<n[b].f?h++:b++],n[_++]={s:-1,f:d.f+f.f,l:d,r:f};for(var v=l[0].s,s=1;s<r;++s)l[s].s>v&&(v=l[s].s);var y=new Ki(v+1),C=up(n[_-1],y,0);if(C>e){var s=0,L=0,O=C-e,I=1<<O;for(l.sort(function(Q,ne){return y[ne.s]-y[Q.s]||Q.f-ne.f});s<r;++s){var j=l[s].s;if(y[j]>e)L+=I-(1<<C-y[j]),y[j]=e;else break}for(L>>=O;L>0;){var R=l[s].s;y[R]<e?L-=1<<e-y[R]++-1:++s}for(;s>=0&&L;--s){var U=l[s].s;y[U]==e&&(--y[U],++L)}C=e}return{t:new oi(y),l:C}},up=function(t,e,n){return t.s==-1?Math.max(up(t.l,e,n+1),up(t.r,e,n+1)):e[t.s]=n},VE=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ki(++e),s=0,r=t[0],l=1,c=function(f){n[s++]=f},d=1;d<=e;++d)if(t[d]==r&&d!=e)++l;else{if(!r&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(r),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(r);l=1,r=t[d]}return{c:n.subarray(0,s),n:e}},Vd=function(t,e){for(var n=0,s=0;s<e.length;++s)n+=t[s]*e[s];return n},__=function(t,e,n){var s=n.length,r=Pp(e+2);t[r]=s&255,t[r+1]=s>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var l=0;l<s;++l)t[r+l+4]=n[l];return(r+4+s)*8},GE=function(t,e,n,s,r,l,c,d,f,h,_){Pl(e,_++,n),++r[256];for(var b=N0(r,15),v=b.t,y=b.l,C=N0(l,15),L=C.t,O=C.l,I=VE(v),j=I.c,R=I.n,U=VE(L),te=U.c,Q=U.n,ne=new Ki(19),J=0;J<j.length;++J)++ne[j[J]&31];for(var J=0;J<te.length;++J)++ne[te[J]&31];for(var oe=N0(ne,7),xe=oe.t,F=oe.l,H=19;H>4&&!xe[op[H-1]];--H);var re=h+5<<3,K=Vd(r,Tc)+Vd(l,af)+c,Te=Vd(r,v)+Vd(l,L)+c+14+3*H+Vd(ne,xe)+2*ne[16]+3*ne[17]+7*ne[18];if(f>=0&&re<=K&&re<=Te)return __(e,_,t.subarray(f,f+h));var G,he,ue,ae;if(Pl(e,_,1+(Te<K)),_+=2,Te<K){G=fl(v,y,0),he=v,ue=fl(L,O,0),ae=L;var V=fl(xe,F,0);Pl(e,_,R-257),Pl(e,_+5,Q-1),Pl(e,_+10,H-4),_+=14;for(var J=0;J<H;++J)Pl(e,_+3*J,xe[op[J]]);_+=3*H;for(var ce=[j,te],M=0;M<2;++M)for(var k=ce[M],J=0;J<k.length;++J){var Y=k[J]&31;Pl(e,_,V[Y]),_+=xe[Y],Y>15&&(Pl(e,_,k[J]>>5&127),_+=k[J]>>12)}}else G=CI,he=Tc,ue=wI,ae=af;for(var J=0;J<d;++J){var Z=s[J];if(Z>255){var Y=Z>>18&31;Fd(e,_,G[Y+257]),_+=he[Y+257],Y>7&&(Pl(e,_,Z>>23&31),_+=Zh[Y]);var fe=Z&31;Fd(e,_,ue[fe]),_+=ae[fe],fe>3&&(Fd(e,_,Z>>5&8191),_+=Qh[fe])}else Fd(e,_,G[Z]),_+=he[Z]}return Fd(e,_,G[256]),_+he[256]},OI=new Op([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),b_=new oi(0),PI=function(t,e,n,s,r,l){var c=l.z||t.length,d=new oi(s+c+5*(1+Math.ceil(c/7e3))+r),f=d.subarray(s,d.length-r),h=l.l,_=(l.r||0)&7;if(e){_&&(f[0]=l.r>>3);for(var b=OI[e-1],v=b>>13,y=b&8191,C=(1<<n)-1,L=l.p||new Ki(32768),O=l.h||new Ki(C+1),I=Math.ceil(n/3),j=2*I,R=function(Qe){return(t[Qe]^t[Qe+1]<<I^t[Qe+2]<<j)&C},U=new Op(25e3),te=new Ki(288),Q=new Ki(32),ne=0,J=0,oe=l.i||0,xe=0,F=l.w||0,H=0;oe+2<c;++oe){var re=R(oe),K=oe&32767,Te=O[re];if(L[K]=Te,O[re]=K,F<=oe){var G=c-oe;if((ne>7e3||xe>24576)&&(G>423||!h)){_=GE(t,f,0,U,te,Q,J,xe,H,oe-H,_),xe=ne=J=0,H=oe;for(var he=0;he<286;++he)te[he]=0;for(var he=0;he<30;++he)Q[he]=0}var ue=2,ae=0,V=y,ce=K-Te&32767;if(G>2&&re==R(oe-ce))for(var M=Math.min(v,G)-1,k=Math.min(32767,oe),Y=Math.min(258,G);ce<=k&&--V&&K!=Te;){if(t[oe+ue]==t[oe+ue-ce]){for(var Z=0;Z<Y&&t[oe+Z]==t[oe+Z-ce];++Z);if(Z>ue){if(ue=Z,ae=ce,Z>M)break;for(var fe=Math.min(ce,Z-2),Ne=0,he=0;he<fe;++he){var de=oe-ce+he&32767,ye=L[de],Ue=de-ye&32767;Ue>Ne&&(Ne=Ue,Te=de)}}}K=Te,Te=L[K],ce+=K-Te&32767}if(ae){U[xe++]=268435456|lp[ue]<<18|FE[ae];var we=lp[ue]&31,Ze=FE[ae]&31;J+=Zh[we]+Qh[Ze],++te[257+we],++Q[Ze],F=oe+ue,++ne}else U[xe++]=t[oe],++te[t[oe]]}}for(oe=Math.max(oe,F);oe<c;++oe)U[xe++]=t[oe],++te[t[oe]];_=GE(t,f,h,U,te,Q,J,xe,H,oe-H,_),h||(l.r=_&7|f[_/8|0]<<3,_-=7,l.h=O,l.p=L,l.i=oe,l.w=F)}else{for(var oe=l.w||0;oe<c+h;oe+=65535){var Je=oe+65535;Je>=c&&(f[_/8|0]=h,Je=c),_=__(f,_+1,t.subarray(oe,Je))}l.i=c}return E_(d,0,s+Pp(_)+r)},T_=function(){var t=1,e=0;return{p:function(n){for(var s=t,r=e,l=n.length|0,c=0;c!=l;){for(var d=Math.min(c+2655,l);c<d;++c)r+=s+=n[c];s=(s&65535)+15*(s>>16),r=(r&65535)+15*(r>>16)}t=s,e=r},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},MI=function(t,e,n,s,r){if(!r&&(r={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),c=new oi(l.length+t.length);c.set(l),c.set(t,l.length),t=c,r.w=l.length}return PI(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,s,r)},y_=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},kI=function(t,e){var n=e.level,s=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=s<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=T_();r.p(e.dictionary),y_(t,2,r.d())}},jI=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Uo(6,"invalid zlib data"),(t[1]>>5&1)==1&&Uo(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function dp(t,e){e||(e={});var n=T_();n.p(t);var s=MI(t,e,e.dictionary?6:2,4);return kI(s,e),y_(s,s.length-4,n.d()),s}function BI(t,e){return RI(t.subarray(jI(t),-4),{i:2},e,e)}var UI=typeof TextDecoder<"u"&&new TextDecoder,FI=0;try{UI.decode(b_,{stream:!0}),FI=1}catch{}var Dn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function v0(){Dn.console&&typeof Dn.console.log=="function"&&Dn.console.log.apply(Dn.console,arguments)}var na={log:v0,warn:function(t){Dn.console&&(typeof Dn.console.warn=="function"?Dn.console.warn.apply(Dn.console,arguments):v0.call(null,arguments))},error:function(t){Dn.console&&(typeof Dn.console.error=="function"?Dn.console.error.apply(Dn.console,arguments):v0(t))}};function A0(t,e,n){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){qc(s.response,e,n)},s.onerror=function(){na.error("could not download file")},s.send()}function HE(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function oh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Xd,fp,qc=Dn.saveAs||((typeof window>"u"?"undefined":$s(window))!=="object"||window!==Dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var s=Dn.URL||Dn.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?HE(r.href)?A0(t,e,n):oh(r,r.target="_blank"):oh(r)):(r.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(r.href)},4e4),setTimeout(function(){oh(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(HE(t))A0(t,e,n);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){oh(s)})}else navigator.msSaveOrOpenBlob(function(r,l){return l===void 0?l={autoBom:!1}:$s(l)!=="object"&&(na.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(t,n),e)}:function(t,e,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return A0(t,e,n);var r=t.type==="application/octet-stream",l=/constructor/i.test(Dn.HTMLElement)||Dn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&l)&&(typeof FileReader>"u"?"undefined":$s(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var _=d.result;_=c?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=_:location=_,s=null},d.readAsDataURL(t)}else{var f=Dn.URL||Dn.webkitURL,h=f.createObjectURL(t);s?s.location=h:location.href=h,s=null,setTimeout(function(){f.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function N_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<n.length;s++){var r=n[s].re,l=n[s].process,c=r.exec(t);c&&(e=l(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),f=this.g.toString(16),h=this.b.toString(16);return d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),h.length==1&&(h="0"+h),"#"+d+f+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function S0(t,e){var n=t[0],s=t[1],r=t[2],l=t[3];n=ti(n,s,r,l,e[0],7,-680876936),l=ti(l,n,s,r,e[1],12,-389564586),r=ti(r,l,n,s,e[2],17,606105819),s=ti(s,r,l,n,e[3],22,-1044525330),n=ti(n,s,r,l,e[4],7,-176418897),l=ti(l,n,s,r,e[5],12,1200080426),r=ti(r,l,n,s,e[6],17,-1473231341),s=ti(s,r,l,n,e[7],22,-45705983),n=ti(n,s,r,l,e[8],7,1770035416),l=ti(l,n,s,r,e[9],12,-1958414417),r=ti(r,l,n,s,e[10],17,-42063),s=ti(s,r,l,n,e[11],22,-1990404162),n=ti(n,s,r,l,e[12],7,1804603682),l=ti(l,n,s,r,e[13],12,-40341101),r=ti(r,l,n,s,e[14],17,-1502002290),n=ni(n,s=ti(s,r,l,n,e[15],22,1236535329),r,l,e[1],5,-165796510),l=ni(l,n,s,r,e[6],9,-1069501632),r=ni(r,l,n,s,e[11],14,643717713),s=ni(s,r,l,n,e[0],20,-373897302),n=ni(n,s,r,l,e[5],5,-701558691),l=ni(l,n,s,r,e[10],9,38016083),r=ni(r,l,n,s,e[15],14,-660478335),s=ni(s,r,l,n,e[4],20,-405537848),n=ni(n,s,r,l,e[9],5,568446438),l=ni(l,n,s,r,e[14],9,-1019803690),r=ni(r,l,n,s,e[3],14,-187363961),s=ni(s,r,l,n,e[8],20,1163531501),n=ni(n,s,r,l,e[13],5,-1444681467),l=ni(l,n,s,r,e[2],9,-51403784),r=ni(r,l,n,s,e[7],14,1735328473),n=si(n,s=ni(s,r,l,n,e[12],20,-1926607734),r,l,e[5],4,-378558),l=si(l,n,s,r,e[8],11,-2022574463),r=si(r,l,n,s,e[11],16,1839030562),s=si(s,r,l,n,e[14],23,-35309556),n=si(n,s,r,l,e[1],4,-1530992060),l=si(l,n,s,r,e[4],11,1272893353),r=si(r,l,n,s,e[7],16,-155497632),s=si(s,r,l,n,e[10],23,-1094730640),n=si(n,s,r,l,e[13],4,681279174),l=si(l,n,s,r,e[0],11,-358537222),r=si(r,l,n,s,e[3],16,-722521979),s=si(s,r,l,n,e[6],23,76029189),n=si(n,s,r,l,e[9],4,-640364487),l=si(l,n,s,r,e[12],11,-421815835),r=si(r,l,n,s,e[15],16,530742520),n=ai(n,s=si(s,r,l,n,e[2],23,-995338651),r,l,e[0],6,-198630844),l=ai(l,n,s,r,e[7],10,1126891415),r=ai(r,l,n,s,e[14],15,-1416354905),s=ai(s,r,l,n,e[5],21,-57434055),n=ai(n,s,r,l,e[12],6,1700485571),l=ai(l,n,s,r,e[3],10,-1894986606),r=ai(r,l,n,s,e[10],15,-1051523),s=ai(s,r,l,n,e[1],21,-2054922799),n=ai(n,s,r,l,e[8],6,1873313359),l=ai(l,n,s,r,e[15],10,-30611744),r=ai(r,l,n,s,e[6],15,-1560198380),s=ai(s,r,l,n,e[13],21,1309151649),n=ai(n,s,r,l,e[4],6,-145523070),l=ai(l,n,s,r,e[11],10,-1120210379),r=ai(r,l,n,s,e[2],15,718787259),s=ai(s,r,l,n,e[9],21,-343485551),t[0]=xc(n,t[0]),t[1]=xc(s,t[1]),t[2]=xc(r,t[2]),t[3]=xc(l,t[3])}function em(t,e,n,s,r,l){return e=xc(xc(e,t),xc(s,l)),xc(e<<r|e>>>32-r,n)}function ti(t,e,n,s,r,l,c){return em(e&n|~e&s,t,e,r,l,c)}function ni(t,e,n,s,r,l,c){return em(e&s|n&~s,t,e,r,l,c)}function si(t,e,n,s,r,l,c){return em(e^n^s,t,e,r,l,c)}function ai(t,e,n,s,r,l,c){return em(n^(e|~s),t,e,r,l,c)}function v_(t){var e,n=t.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)S0(s,VI(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(S0(s,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,S0(s,r),s}function VI(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Xd=Dn.atob.bind(Dn),fp=Dn.btoa.bind(Dn);var YE="0123456789abcdef".split("");function GI(t){for(var e="",n=0;n<4;n++)e+=YE[t>>8*n+4&15]+YE[t>>8*n&15];return e}function HI(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function hp(t){return v_(t).map(HI).join("")}var YI=function(t){for(var e=0;e<t.length;e++)t[e]=GI(t[e]);return t.join("")}(v_("hello"))!="5d41402abc4b2a76b9719d911017c592";function xc(t,e){if(YI){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function mp(t,e){var n,s,r,l;if(t!==n){for(var c=(r=t,l=1+(256/t.length>>0),new Array(l+1).join(r)),d=[],f=0;f<256;f++)d[f]=f;var h=0;for(f=0;f<256;f++){var _=d[f];h=(h+_+c.charCodeAt(f))%256,d[f]=d[h],d[h]=_}n=t,s=d}else d=s;var b=e.length,v=0,y=0,C="";for(f=0;f<b;f++)y=(y+(_=d[v=(v+1)%256]))%256,d[v]=d[y],d[y]=_,c=d[(d[v]+d[y])%256],C+=String.fromCharCode(e.charCodeAt(f)^c);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qE={print:4,modify:8,copy:16,"annot-forms":32};function Ou(t,e,n,s){this.v=1,this.r=2;var r=192;t.forEach(function(d){if(qE.perm!==void 0)throw new Error("Invalid permission: "+d);r+=qE[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),c=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^r)),this.encryptionKey=hp(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=mp(this.encryptionKey,this.padding)}function Pu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,s=0;s<n;s++){var r=t.charCodeAt(s);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=t[s]}return e}function zE(t){if($s(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,s,r){if(r=r||!1,typeof n!="string"||typeof s!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var l=Math.random().toString(35);return e[n][l]=[s,!!r],l},this.unsubscribe=function(n){for(var s in e)if(e[s][n])return delete e[s][n],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var s=Array.prototype.slice.call(arguments,1),r=[];for(var l in e[n]){var c=e[n][l];try{c[0].apply(t,s)}catch(d){Dn.console&&na.error("jsPDF PubSub Error",d.message,d)}c[1]&&r.push(l)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Uh(t){if(!(this instanceof Uh))return new Uh(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function A_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function zc(t,e,n,s,r){if(!(this instanceof zc))return new zc(t,e,n,s,r);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,A_.call(this,s,r)}function ku(t,e,n,s,r){if(!(this instanceof ku))return new ku(t,e,n,s,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,A_.call(this,s,r)}function yn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],r=arguments[2],l=arguments[3],c=[],d=1,f=16,h="S",_=null;$s(t=t||{})==="object"&&(n=t.orientation,s=t.unit||s,r=t.format||r,l=t.compress||t.compressPdf||l,(_=t.encryption||null)!==null&&(_.userPassword=_.userPassword||"",_.ownerPassword=_.ownerPassword||"",_.userPermissions=_.userPermissions||[]),d=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(f=t.floatPrecision),h=t.defaultPathOperation||"S"),c=t.filters||(l===!0?["FlateEncode"]:c),s=s||"mm",n=(""+(n||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,v={},y={internal:{},__private__:{}};y.__private__.PubSub=zE;var C="1.3",L=y.__private__.getPdfVersion=function(){return C};y.__private__.setPdfVersion=function(S){C=S};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return O};var I=y.__private__.getPageFormat=function(S){return O[S]};r=r||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},R=j.COMPAT;function U(){this.saveGraphicsState(),ge(new Xt(pe,0,0,-pe,0,Mi()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),h="n",R=j.ADVANCED}function te(){this.restoreGraphicsState(),h="S",R=j.COMPAT}var Q=y.__private__.combineFontStyleAndFontWeight=function(S,q){if(S=="bold"&&q=="normal"||S=="bold"&&q==400||S=="normal"&&q=="italic"||S=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(S=q==400||q==="normal"?S==="italic"?"italic":"normal":q!=700&&q!=="bold"||S!=="normal"?(q==700?"bold":q)+""+S:"bold"),S};y.advancedAPI=function(S){var q=R===j.COMPAT;return q&&U.call(this),typeof S!="function"||(S(this),q&&te.call(this)),this},y.compatAPI=function(S){var q=R===j.ADVANCED;return q&&te.call(this),typeof S!="function"||(S(this),q&&U.call(this)),this},y.isAdvancedAPI=function(){return R===j.ADVANCED};var ne,J=function(S){if(R!==j.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},oe=y.roundToPrecision=y.__private__.roundToPrecision=function(S,q){var Ee=e||q;if(isNaN(S)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(Ee).replace(/0+$/,"")};ne=y.hpf=y.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(S,16)};var xe=y.f2=y.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return oe(S,2)},F=y.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return oe(S,3)},H=y.scale=y.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return R===j.COMPAT?S*pe:R===j.ADVANCED?S:void 0},re=function(S){return R===j.COMPAT?Mi()-S:R===j.ADVANCED?S:void 0},K=function(S){return H(re(S))};y.__private__.setPrecision=y.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var Te,G="00000000000000000000000000000000",he=y.__private__.getFileId=function(){return G},ue=y.__private__.setFileId=function(S){return G=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():G.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),_!==null&&(bt=new Ou(_.userPermissions,_.userPassword,_.ownerPassword,G)),G};y.setFileId=function(S){return ue(S),this},y.getFileId=function(){return he()};var ae=y.__private__.convertDateToPDFDate=function(S){var q=S.getTimezoneOffset(),Ee=q<0?"+":"-",Ae=Math.floor(Math.abs(q/60)),Me=Math.abs(q%60),et=[Ee,Y(Ae),"'",Y(Me),"'"].join("");return["D:",S.getFullYear(),Y(S.getMonth()+1),Y(S.getDate()),Y(S.getHours()),Y(S.getMinutes()),Y(S.getSeconds()),et].join("")},V=y.__private__.convertPDFDateToDate=function(S){var q=parseInt(S.substr(2,4),10),Ee=parseInt(S.substr(6,2),10)-1,Ae=parseInt(S.substr(8,2),10),Me=parseInt(S.substr(10,2),10),et=parseInt(S.substr(12,2),10),Nt=parseInt(S.substr(14,2),10);return new Date(q,Ee,Ae,Me,et,Nt,0)},ce=y.__private__.setCreationDate=function(S){var q;if(S===void 0&&(S=new Date),S instanceof Date)q=ae(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=S}return Te=q},M=y.__private__.getCreationDate=function(S){var q=Te;return S==="jsDate"&&(q=V(Te)),q};y.setCreationDate=function(S){return ce(S),this},y.getCreationDate=function(S){return M(S)};var k,Y=y.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},Z=y.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},fe=0,Ne=[],de=[],ye=0,Ue=[],we=[],Ze=!1,Je=de,Qe=function(){fe=0,ye=0,de=[],Ne=[],Ue=[],Ca=_s(),En=_s()};y.__private__.setCustomOutputDestination=function(S){Ze=!0,Je=S};var je=function(S){Ze||(Je=S)};y.__private__.resetCustomOutputDestination=function(){Ze=!1,Je=de};var ge=y.__private__.out=function(S){return S=S.toString(),ye+=S.length+1,Je.push(S),Je},Fe=y.__private__.write=function(S){return ge(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},ut=y.__private__.getArrayBuffer=function(S){for(var q=S.length,Ee=new ArrayBuffer(q),Ae=new Uint8Array(Ee);q--;)Ae[q]=S.charCodeAt(q);return Ee},Pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Pe};var nt=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(S){return nt=R===j.ADVANCED?S/pe:S,this};var it,st=y.__private__.getFontSize=y.getFontSize=function(){return R===j.COMPAT?nt:nt*pe},yt=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(S){return yt=S,this},y.__private__.getR2L=y.getR2L=function(){return yt};var Pt,Rt=y.__private__.setZoomMode=function(S){var q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))it=S;else if(isNaN(S)){if(q.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');it=S}else it=parseInt(S,10)};y.__private__.getZoomMode=function(){return it};var Ft,Yt=y.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Pt=S};y.__private__.getPageMode=function(){return Pt};var Be=y.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Ft=S};y.__private__.getLayoutMode=function(){return Ft},y.__private__.setDisplayMode=y.setDisplayMode=function(S,q,Ee){return Rt(S),Be(q),Yt(Ee),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(S){if(Object.keys(We).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[S]},y.__private__.getDocumentProperties=function(){return We},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(S){for(var q in We)We.hasOwnProperty(q)&&S[q]&&(We[q]=S[q]);return this},y.__private__.setDocumentProperty=function(S,q){if(Object.keys(We).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[S]=q};var Lt,pe,vt,At,Kt,Gt={},xn={},rs=[],Cn={},Ws={},Un={},js={},ln=null,ls=0,un=[],Mn=new zE(y),qa=t.hotfixes||[],gs={},ca={},Nn=[],Xt=function S(q,Ee,Ae,Me,et,Nt){if(!(this instanceof S))return new S(q,Ee,Ae,Me,et,Nt);isNaN(q)&&(q=1),isNaN(Ee)&&(Ee=0),isNaN(Ae)&&(Ae=0),isNaN(Me)&&(Me=1),isNaN(et)&&(et=0),isNaN(Nt)&&(Nt=0),this._matrix=[q,Ee,Ae,Me,et,Nt]};Object.defineProperty(Xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ne).join(S)},Xt.prototype.multiply=function(S){var q=S.sx*this.sx+S.shy*this.shx,Ee=S.sx*this.shy+S.shy*this.sy,Ae=S.shx*this.sx+S.sy*this.shx,Me=S.shx*this.shy+S.sy*this.sy,et=S.tx*this.sx+S.ty*this.shx+this.tx,Nt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Xt(q,Ee,Ae,Me,et,Nt)},Xt.prototype.decompose=function(){var S=this.sx,q=this.shy,Ee=this.shx,Ae=this.sy,Me=this.tx,et=this.ty,Nt=Math.sqrt(S*S+q*q),Vt=(S/=Nt)*Ee+(q/=Nt)*Ae;Ee-=S*Vt,Ae-=q*Vt;var Zt=Math.sqrt(Ee*Ee+Ae*Ae);return Vt/=Zt,S*(Ae/=Zt)<q*(Ee/=Zt)&&(S=-S,q=-q,Vt=-Vt,Nt=-Nt),{scale:new Xt(Nt,0,0,Zt,0,0),translate:new Xt(1,0,0,1,Me,et),rotate:new Xt(S,q,-q,S,0,0),skew:new Xt(1,0,Vt,1,0,0)}},Xt.prototype.toString=function(S){return this.join(" ")},Xt.prototype.inversed=function(){var S=this.sx,q=this.shy,Ee=this.shx,Ae=this.sy,Me=this.tx,et=this.ty,Nt=1/(S*Ae-q*Ee),Vt=Ae*Nt,Zt=-q*Nt,pn=-Ee*Nt,wn=S*Nt;return new Xt(Vt,Zt,pn,wn,-Vt*Me-pn*et,-Zt*Me-wn*et)},Xt.prototype.applyToPoint=function(S){var q=S.x*this.sx+S.y*this.shx+this.tx,Ee=S.x*this.shy+S.y*this.sy+this.ty;return new ha(q,Ee)},Xt.prototype.applyToRectangle=function(S){var q=this.applyToPoint(S),Ee=this.applyToPoint(new ha(S.x+S.w,S.y+S.h));return new bn(q.x,q.y,Ee.x-q.x,Ee.y-q.y)},Xt.prototype.clone=function(){var S=this.sx,q=this.shy,Ee=this.shx,Ae=this.sy,Me=this.tx,et=this.ty;return new Xt(S,q,Ee,Ae,Me,et)},y.Matrix=Xt;var Ln=y.matrixMult=function(S,q){return q.multiply(S)},kn=new Xt(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=kn;var Fn=function(S,q){if(!Ws[S]){var Ee=(q instanceof zc?"Sh":"P")+(Object.keys(Cn).length+1).toString(10);q.id=Ee,Ws[S]=Ee,Cn[Ee]=q,Mn.publish("addPattern",q)}};y.ShadingPattern=zc,y.TilingPattern=ku,y.addShadingPattern=function(S,q){return J("addShadingPattern()"),Fn(S,q),this},y.beginTilingPattern=function(S){J("beginTilingPattern()"),aa(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},y.endTilingPattern=function(S,q){J("endTilingPattern()"),q.stream=we[k].join(`
`),Fn(S,q),Mn.publish("endTilingPattern",q),Nn.pop().restore()};var Rn=y.__private__.newObject=function(){var S=_s();return hs(S,!0),S},_s=y.__private__.newObjectDeferred=function(){return fe++,Ne[fe]=function(){return ye},fe},hs=function(S,q){return q=typeof q=="boolean"&&q,Ne[S]=ye,q&&ge(S+" 0 obj"),S},er=y.__private__.newAdditionalObject=function(){var S={objId:_s(),content:""};return Ue.push(S),S},Ca=_s(),En=_s(),bs=y.__private__.decodeColorString=function(S){var q=S.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length===5&&(q[4]==="k"||q[4]==="K")&&(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var Ee=parseFloat(q[0]);q=[Ee,Ee,Ee,"r"]}for(var Ae="#",Me=0;Me<3;Me++)Ae+=("0"+Math.floor(255*parseFloat(q[Me])).toString(16)).slice(-2);return Ae},Qt=y.__private__.encodeColorString=function(S){var q;typeof S=="string"&&(S={ch1:S});var Ee=S.ch1,Ae=S.ch2,Me=S.ch3,et=S.ch4,Nt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var Vt=new N_(Ee);if(Vt.ok)Ee=Vt.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Zt=parseInt(Ee.substr(1),16);Ee=Zt>>16&255,Ae=Zt>>8&255,Me=255&Zt}if(Ae===void 0||et===void 0&&Ee===Ae&&Ae===Me)if(typeof Ee=="string")q=Ee+" "+Nt[0];else switch(S.precision){case 2:q=xe(Ee/255)+" "+Nt[0];break;case 3:default:q=F(Ee/255)+" "+Nt[0]}else if(et===void 0||$s(et)==="object"){if(et&&!isNaN(et.a)&&et.a===0)return q=["1.","1.","1.",Nt[1]].join(" ");if(typeof Ee=="string")q=[Ee,Ae,Me,Nt[1]].join(" ");else switch(S.precision){case 2:q=[xe(Ee/255),xe(Ae/255),xe(Me/255),Nt[1]].join(" ");break;default:case 3:q=[F(Ee/255),F(Ae/255),F(Me/255),Nt[1]].join(" ")}}else if(typeof Ee=="string")q=[Ee,Ae,Me,et,Nt[2]].join(" ");else switch(S.precision){case 2:q=[xe(Ee),xe(Ae),xe(Me),xe(et),Nt[2]].join(" ");break;case 3:default:q=[F(Ee),F(Ae),F(Me),F(et),Nt[2]].join(" ")}return q},Ls=y.__private__.getFilters=function(){return c},Ts=y.__private__.putStream=function(S){var q=(S=S||{}).data||"",Ee=S.filters||Ls(),Ae=S.alreadyAppliedFilters||[],Me=S.addLength1||!1,et=q.length,Nt=S.objectId,Vt=function(Hs){return Hs};if(_!==null&&Nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");_!==null&&(Vt=bt.encryptor(Nt,0));var Zt={};Ee===!0&&(Ee=["FlateEncode"]);var pn=S.additionalKeyValues||[],wn=(Zt=yn.API.processDataByFilters!==void 0?yn.API.processDataByFilters(q,Ee):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(Ae)?Ae.join(" "):Ae.toString());if(Zt.data.length!==0&&(pn.push({key:"Length",value:Zt.data.length}),Me===!0&&pn.push({key:"Length1",value:et})),wn.length!=0)if(wn.split("/").length-1==1)pn.push({key:"Filter",value:wn});else{pn.push({key:"Filter",value:"["+wn+"]"});for(var as=0;as<pn.length;as+=1)if(pn[as].key==="DecodeParms"){for(var Ks=[],Xs=0;Xs<Zt.reverseChain.split("/").length-1;Xs+=1)Ks.push("null");Ks.push(pn[as].value),pn[as].value="["+Ks.join(" ")+"]"}}ge("<<");for(var ma=0;ma<pn.length;ma++)ge("/"+pn[ma].key+" "+pn[ma].value);ge(">>"),Zt.data.length!==0&&(ge("stream"),ge(Vt(Zt.data)),ge("endstream"))},$n=y.__private__.putPage=function(S){var q=S.number,Ee=S.data,Ae=S.objId,Me=S.contentsObjId;hs(Ae,!0),ge("<</Type /Page"),ge("/Parent "+S.rootDictionaryObjId+" 0 R"),ge("/Resources "+S.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(ne(S.mediaBox.bottomLeftX))+" "+parseFloat(ne(S.mediaBox.bottomLeftY))+" "+ne(S.mediaBox.topRightX)+" "+ne(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&ge("/CropBox ["+ne(S.cropBox.bottomLeftX)+" "+ne(S.cropBox.bottomLeftY)+" "+ne(S.cropBox.topRightX)+" "+ne(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&ge("/BleedBox ["+ne(S.bleedBox.bottomLeftX)+" "+ne(S.bleedBox.bottomLeftY)+" "+ne(S.bleedBox.topRightX)+" "+ne(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&ge("/TrimBox ["+ne(S.trimBox.bottomLeftX)+" "+ne(S.trimBox.bottomLeftY)+" "+ne(S.trimBox.topRightX)+" "+ne(S.trimBox.topRightY)+"]"),S.artBox!==null&&ge("/ArtBox ["+ne(S.artBox.bottomLeftX)+" "+ne(S.artBox.bottomLeftY)+" "+ne(S.artBox.topRightX)+" "+ne(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&ge("/UserUnit "+S.userUnit),Mn.publish("putPage",{objId:Ae,pageContext:un[q],pageNumber:q,page:Ee}),ge("/Contents "+Me+" 0 R"),ge(">>"),ge("endobj");var et=Ee.join(`
`);return R===j.ADVANCED&&(et+=`
Q`),hs(Me,!0),Ts({data:et,filters:Ls(),objectId:Me}),ge("endobj"),Ae},La=y.__private__.putPages=function(){var S,q,Ee=[];for(S=1;S<=ls;S++)un[S].objId=_s(),un[S].contentsObjId=_s();for(S=1;S<=ls;S++)Ee.push($n({number:S,data:we[S],objId:un[S].objId,contentsObjId:un[S].contentsObjId,mediaBox:un[S].mediaBox,cropBox:un[S].cropBox,bleedBox:un[S].bleedBox,trimBox:un[S].trimBox,artBox:un[S].artBox,userUnit:un[S].userUnit,rootDictionaryObjId:Ca,resourceDictionaryObjId:En}));hs(Ca,!0),ge("<</Type /Pages");var Ae="/Kids [";for(q=0;q<ls;q++)Ae+=Ee[q]+" 0 R ";ge(Ae+"]"),ge("/Count "+ls),ge(">>"),ge("endobj"),Mn.publish("postPutPages")},ua=function(S){Mn.publish("putFont",{font:S,out:ge,newObject:Rn,putStream:Ts}),S.isAlreadyPutted!==!0&&(S.objectNumber=Rn(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+Pu(S.postScriptName)),ge("/Subtype /Type1"),typeof S.encoding=="string"&&ge("/Encoding /"+S.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},Bs=function(){for(var S in Gt)Gt.hasOwnProperty(S)&&(b===!1||b===!0&&v.hasOwnProperty(S))&&ua(Gt[S])},ms=function(S){S.objectNumber=Rn();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[ne(S.x),ne(S.y),ne(S.x+S.width),ne(S.y+S.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var Ee=S.pages[1].join(`
`);Ts({data:Ee,additionalKeyValues:q,objectId:S.objectNumber}),ge("endobj")},wa=function(){for(var S in gs)gs.hasOwnProperty(S)&&ms(gs[S])},Is=function(S,q){var Ee,Ae=[],Me=1/(q-1);for(Ee=0;Ee<1;Ee+=Me)Ae.push(Ee);if(Ae.push(1),S[0].offset!=0){var et={offset:0,color:S[0].color};S.unshift(et)}if(S[S.length-1].offset!=1){var Nt={offset:1,color:S[S.length-1].color};S.push(Nt)}for(var Vt="",Zt=0,pn=0;pn<Ae.length;pn++){for(Ee=Ae[pn];Ee>S[Zt+1].offset;)Zt++;var wn=S[Zt].offset,as=(Ee-wn)/(S[Zt+1].offset-wn),Ks=S[Zt].color,Xs=S[Zt+1].color;Vt+=Z(Math.round((1-as)*Ks[0]+as*Xs[0]).toString(16))+Z(Math.round((1-as)*Ks[1]+as*Xs[1]).toString(16))+Z(Math.round((1-as)*Ks[2]+as*Xs[2]).toString(16))}return Vt.trim()},ka=function(S,q){q||(q=21);var Ee=Rn(),Ae=Is(S.colors,q),Me=[];Me.push({key:"FunctionType",value:"0"}),Me.push({key:"Domain",value:"[0.0 1.0]"}),Me.push({key:"Size",value:"["+q+"]"}),Me.push({key:"BitsPerSample",value:"8"}),Me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ts({data:Ae,additionalKeyValues:Me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),ge("endobj"),S.objectNumber=Rn(),ge("<< /ShadingType "+S.type),ge("/ColorSpace /DeviceRGB");var et="/Coords ["+ne(parseFloat(S.coords[0]))+" "+ne(parseFloat(S.coords[1]))+" ";S.type===2?et+=ne(parseFloat(S.coords[2]))+" "+ne(parseFloat(S.coords[3])):et+=ne(parseFloat(S.coords[2]))+" "+ne(parseFloat(S.coords[3]))+" "+ne(parseFloat(S.coords[4]))+" "+ne(parseFloat(S.coords[5])),ge(et+="]"),S.matrix&&ge("/Matrix ["+S.matrix.toString()+"]"),ge("/Function "+Ee+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},Wn=function(S,q){var Ee=_s(),Ae=Rn();q.push({resourcesOid:Ee,objectOid:Ae}),S.objectNumber=Ae;var Me=[];Me.push({key:"Type",value:"/Pattern"}),Me.push({key:"PatternType",value:"1"}),Me.push({key:"PaintType",value:"1"}),Me.push({key:"TilingType",value:"1"}),Me.push({key:"BBox",value:"["+S.boundingBox.map(ne).join(" ")+"]"}),Me.push({key:"XStep",value:ne(S.xStep)}),Me.push({key:"YStep",value:ne(S.yStep)}),Me.push({key:"Resources",value:Ee+" 0 R"}),S.matrix&&Me.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Ts({data:S.stream,additionalKeyValues:Me,objectId:S.objectNumber}),ge("endobj")},ys=function(S){var q;for(q in Cn)Cn.hasOwnProperty(q)&&(Cn[q]instanceof zc?ka(Cn[q]):Cn[q]instanceof ku&&Wn(Cn[q],S))},da=function(S){for(var q in S.objectNumber=Rn(),ge("<<"),S)switch(q){case"opacity":ge("/ca "+xe(S[q]));break;case"stroke-opacity":ge("/CA "+xe(S[q]))}ge(">>"),ge("endobj")},ws=function(){var S;for(S in Un)Un.hasOwnProperty(S)&&da(Un[S])},tr=function(){for(var S in ge("/XObject <<"),gs)gs.hasOwnProperty(S)&&gs[S].objectNumber>=0&&ge("/"+S+" "+gs[S].objectNumber+" 0 R");Mn.publish("putXobjectDict"),ge(">>")},Ta=function(){bt.oid=Rn(),ge("<<"),ge("/Filter /Standard"),ge("/V "+bt.v),ge("/R "+bt.r),ge("/U <"+bt.toHexString(bt.U)+">"),ge("/O <"+bt.toHexString(bt.O)+">"),ge("/P "+bt.P),ge(">>"),ge("endobj")},sa=function(){for(var S in ge("/Font <<"),Gt)Gt.hasOwnProperty(S)&&(b===!1||b===!0&&v.hasOwnProperty(S))&&ge("/"+S+" "+Gt[S].objectNumber+" 0 R");ge(">>")},Gr=function(){if(Object.keys(Cn).length>0){for(var S in ge("/Shading <<"),Cn)Cn.hasOwnProperty(S)&&Cn[S]instanceof zc&&Cn[S].objectNumber>=0&&ge("/"+S+" "+Cn[S].objectNumber+" 0 R");Mn.publish("putShadingPatternDict"),ge(">>")}},mn=function(S){if(Object.keys(Cn).length>0){for(var q in ge("/Pattern <<"),Cn)Cn.hasOwnProperty(q)&&Cn[q]instanceof y.TilingPattern&&Cn[q].objectNumber>=0&&Cn[q].objectNumber<S&&ge("/"+q+" "+Cn[q].objectNumber+" 0 R");Mn.publish("putTilingPatternDict"),ge(">>")}},Hr=function(){if(Object.keys(Un).length>0){var S;for(S in ge("/ExtGState <<"),Un)Un.hasOwnProperty(S)&&Un[S].objectNumber>=0&&ge("/"+S+" "+Un[S].objectNumber+" 0 R");Mn.publish("putGStateDict"),ge(">>")}},Ds=function(S){hs(S.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),sa(),Gr(),mn(S.objectOid),Hr(),tr(),ge(">>"),ge("endobj")},ea=function(){var S=[];Bs(),ws(),wa(),ys(S),Mn.publish("putResources"),S.forEach(Ds),Ds({resourcesOid:En,objectOid:Number.MAX_SAFE_INTEGER}),Mn.publish("postPutResources")},Yr=function(){Mn.publish("putAdditionalObjects");for(var S=0;S<Ue.length;S++){var q=Ue[S];hs(q.objId,!0),ge(q.content),ge("endobj")}Mn.publish("postPutAdditionalObjects")},wr=function(S){xn[S.fontName]=xn[S.fontName]||{},xn[S.fontName][S.fontStyle]=S.id},dr=function(S,q,Ee,Ae,Me){var et={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:S,fontName:q,fontStyle:Ee,encoding:Ae,isStandardFont:Me||!1,metadata:{}};return Mn.publish("addFont",{font:et,instance:this}),Gt[et.id]=et,wr(et),et.id},Ns=function(S){for(var q=0,Ee=Pe.length;q<Ee;q++){var Ae=dr.call(this,S[q][0],S[q][1],S[q][2],Pe[q][3],!0);b===!1&&(v[Ae]=!0);var Me=S[q][0].split("-");wr({id:Ae,fontName:Me[0],fontStyle:Me[1]||""})}Mn.publish("addFonts",{fonts:Gt,dictionary:xn})},Ia=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(Ae){var q=Ae.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var Ee="Error in function "+q.split(`
`)[0].split("<")[0]+": "+Ae.message;if(!Dn.console)throw new Error(Ee);Dn.console.error(Ee,Ae),Dn.alert&&alert(Ee)}},S.foo.bar=S,S.foo},li=function(S,q){var Ee,Ae,Me,et,Nt,Vt,Zt,pn,wn;if(Me=(q=q||{}).sourceEncoding||"Unicode",Nt=q.outputEncoding,(q.autoencode||Nt)&&Gt[Lt].metadata&&Gt[Lt].metadata[Me]&&Gt[Lt].metadata[Me].encoding&&(et=Gt[Lt].metadata[Me].encoding,!Nt&&Gt[Lt].encoding&&(Nt=Gt[Lt].encoding),!Nt&&et.codePages&&(Nt=et.codePages[0]),typeof Nt=="string"&&(Nt=et[Nt]),Nt)){for(Zt=!1,Vt=[],Ee=0,Ae=S.length;Ee<Ae;Ee++)(pn=Nt[S.charCodeAt(Ee)])?Vt.push(String.fromCharCode(pn)):Vt.push(S[Ee]),Vt[Ee].charCodeAt(0)>>8&&(Zt=!0);S=Vt.join("")}for(Ee=S.length;Zt===void 0&&Ee!==0;)S.charCodeAt(Ee-1)>>8&&(Zt=!0),Ee--;if(!Zt)return S;for(Vt=q.noBOM?[]:[254,255],Ee=0,Ae=S.length;Ee<Ae;Ee++){if((wn=(pn=S.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(wn),Vt.push(pn-(wn<<8))}return String.fromCharCode.apply(void 0,Vt)},cs=y.__private__.pdfEscape=y.pdfEscape=function(S,q){return li(S,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qr=y.__private__.beginPage=function(S){we[++ls]=[],un[ls]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Er(ls),je(we[k])},_i=function(S,q){var Ee,Ae,Me;switch(n=q||n,typeof S=="string"&&(Ee=I(S.toLowerCase()),Array.isArray(Ee)&&(Ae=Ee[0],Me=Ee[1])),Array.isArray(S)&&(Ae=S[0]*pe,Me=S[1]*pe),isNaN(Ae)&&(Ae=r[0],Me=r[1]),(Ae>14400||Me>14400)&&(na.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ae=Math.min(14400,Ae),Me=Math.min(14400,Me)),r=[Ae,Me],n.substr(0,1)){case"l":Me>Ae&&(r=[Me,Ae]);break;case"p":Ae>Me&&(r=[Me,Ae])}qr(r),Pi(_r),ge(mt),Kn!==0&&ge(Kn+" J"),Xn!==0&&ge(Xn+" j"),Mn.publish("addPage",{pageNumber:ls})},bi=function(S){S>0&&S<=ls&&(we.splice(S,1),un.splice(S,1),ls--,k>ls&&(k=ls),this.setPage(k))},Er=function(S){S>0&&S<=ls&&(k=S)},ci=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return we.length-1},Ti=function(S,q,Ee){var Ae,Me=void 0;return Ee=Ee||{},S=S!==void 0?S:Gt[Lt].fontName,q=q!==void 0?q:Gt[Lt].fontStyle,Ae=S.toLowerCase(),xn[Ae]!==void 0&&xn[Ae][q]!==void 0?Me=xn[Ae][q]:xn[S]!==void 0&&xn[S][q]!==void 0?Me=xn[S][q]:Ee.disableWarning===!1&&na.warn("Unable to look up font label for font '"+S+"', '"+q+"'. Refer to getFontList() for available fonts."),Me||Ee.noFallback||(Me=xn.times[q])==null&&(Me=xn.times.normal),Me},za=y.__private__.putInfo=function(){var S=Rn(),q=function(Ae){return Ae};for(var Ee in _!==null&&(q=bt.encryptor(S,0)),ge("<<"),ge("/Producer ("+cs(q("jsPDF "+yn.version))+")"),We)We.hasOwnProperty(Ee)&&We[Ee]&&ge("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+cs(q(We[Ee]))+")");ge("/CreationDate ("+cs(q(Te))+")"),ge(">>"),ge("endobj")},ui=y.__private__.putCatalog=function(S){var q=(S=S||{}).rootDictionaryObjId||Ca;switch(Rn(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+q+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+it;Ee.substr(Ee.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+xe(it)+"]")}switch(Ft||(Ft="continuous"),Ft){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}Pt&&ge("/PageMode /"+Pt),Mn.publish("putCatalog"),ge(">>"),ge("endobj")},Ir=y.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(fe+1)),ge("/Root "+fe+" 0 R"),ge("/Info "+(fe-1)+" 0 R"),_!==null&&ge("/Encrypt "+bt.oid+" 0 R"),ge("/ID [ <"+G+"> <"+G+"> ]"),ge(">>")},Da=y.__private__.putHeader=function(){ge("%PDF-"+C),ge("%")},yi=y.__private__.putXRef=function(){var S="0000000000";ge("xref"),ge("0 "+(fe+1)),ge("0000000000 65535 f ");for(var q=1;q<=fe;q++)typeof Ne[q]=="function"?ge((S+Ne[q]()).slice(-10)+" 00000 n "):Ne[q]!==void 0?ge((S+Ne[q]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},be=y.__private__.buildDocument=function(){Qe(),je(de),Mn.publish("buildDocument"),Da(),La(),Yr(),ea(),_!==null&&Ta(),za(),ui();var S=ye;return yi(),Ir(),ge("startxref"),ge(""+S),ge("%%EOF"),je(we[k]),de.join(`
`)},Re=y.__private__.getBlob=function(S){return new Blob([ut(S)],{type:"application/pdf"})},ze=y.output=y.__private__.output=Ia(function(S,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",S){case void 0:return be();case"save":y.save(q.filename);break;case"arraybuffer":return ut(be());case"blob":return Re(be());case"bloburi":case"bloburl":if(Dn.URL!==void 0&&typeof Dn.URL.createObjectURL=="function")return Dn.URL&&Dn.URL.createObjectURL(Re(be()))||void 0;na.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",Ae=be();try{Ee=fp(Ae)}catch{Ee=fp(unescape(encodeURIComponent(Ae)))}return"data:application/pdf;filename="+q.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dn)==="[object Window]"){var Me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",et=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Me=q.pdfObjectUrl,et="");var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Me+'"'+et+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Vt=Dn.open();return Vt!==null&&Vt.document.write(Nt),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dn)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',pn=Dn.open();if(pn!==null){pn.document.write(Zt);var wn=this;pn.document.documentElement.querySelector("#pdfViewer").onload=function(){pn.document.title=q.filename,pn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wn.output("bloburl"))}}return pn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',Ks=Dn.open();if(Ks!==null&&(Ks.document.write(as),Ks.document.title=q.filename),Ks||typeof safari>"u")return Ks;break;case"datauri":case"dataurl":return Dn.document.location.href=this.output("datauristring",q);default:return null}}),dt=function(S){return Array.isArray(qa)===!0&&qa.indexOf(S)>-1};switch(s){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=dt("px_scaling")==1?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);pe=s}var bt=null;ce(),ue();var Dt=function(S){return _!==null?bt.encryptor(S,0):function(q){return q}},wt=y.__private__.getPageInfo=y.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:un[S].objId,pageNumber:S,pageContext:un[S]}},xt=y.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in un)if(un[q].objId===S)break;return wt(q)},Jt=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:un[k].objId,pageNumber:k,pageContext:un[k]}};y.addPage=function(){return _i.apply(this,arguments),this},y.setPage=function(){return Er.apply(this,arguments),je.call(this,we[k]),this},y.insertPage=function(S){return this.addPage(),this.movePage(k,S),this},y.movePage=function(S,q){var Ee,Ae;if(S>q){Ee=we[S],Ae=un[S];for(var Me=S;Me>q;Me--)we[Me]=we[Me-1],un[Me]=un[Me-1];we[q]=Ee,un[q]=Ae,this.setPage(q)}else if(S<q){Ee=we[S],Ae=un[S];for(var et=S;et<q;et++)we[et]=we[et+1],un[et]=un[et+1];we[q]=Ee,un[q]=Ae,this.setPage(q)}return this},y.deletePage=function(){return bi.apply(this,arguments),this},y.__private__.text=y.text=function(S,q,Ee,Ae,Me){var et,Nt,Vt,Zt,pn,wn,as,Ks,Xs,ma=(Ae=Ae||{}).scope||this;if(typeof S=="number"&&typeof q=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var Hs=Ee;Ee=q,q=S,S=Hs}if(arguments[3]instanceof Xt?(J("The transform parameter of text() with a Matrix value"),Xs=Me):(Vt=arguments[4],Zt=arguments[5],$s(as=arguments[3])==="object"&&as!==null||(typeof Vt=="string"&&(Zt=Vt,Vt=null),typeof as=="string"&&(Zt=as,as=null),typeof as=="number"&&(Vt=as,as=null),Ae={flags:as,angle:Vt,align:Zt})),isNaN(q)||isNaN(Ee)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return ma;var ja="",Rr=!1,hr=typeof Ae.lineHeightFactor=="number"?Ae.lineHeightFactor:sr,Or=ma.internal.scaleFactor;function qo(Jn){return Jn=Jn.split("	").join(Array(Ae.TabLen||9).join(" ")),cs(Jn,as)}function hi(Jn){for(var Zn,Fs=Jn.concat(),pa=[],Jr=Fs.length;Jr--;)typeof(Zn=Fs.shift())=="string"?pa.push(Zn):Array.isArray(Jn)&&(Zn.length===1||Zn[1]===void 0&&Zn[2]===void 0)?pa.push(Zn[0]):pa.push([Zn[0],Zn[1],Zn[2]]);return pa}function mi(Jn,Zn){var Fs;if(typeof Jn=="string")Fs=Zn(Jn)[0];else if(Array.isArray(Jn)){for(var pa,Jr,io=Jn.concat(),oo=[],Ui=io.length;Ui--;)typeof(pa=io.shift())=="string"?oo.push(Zn(pa)[0]):Array.isArray(pa)&&typeof pa[0]=="string"&&(Jr=Zn(pa[0],pa[1],pa[2]),oo.push([Jr[0],Jr[1],Jr[2]]));Fs=oo}return Fs}var Zi=!1,$r=!0;if(typeof S=="string")Zi=!0;else if(Array.isArray(S)){var zo=S.concat();Nt=[];for(var Qi,ya=zo.length;ya--;)(typeof(Qi=zo.shift())!="string"||Array.isArray(Qi)&&typeof Qi[0]!="string")&&($r=!1);Zi=$r}if(Zi===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var ki=nt/ma.internal.scaleFactor,ji=ki*(hr-1);switch(Ae.baseline){case"bottom":Ee-=ji;break;case"top":Ee+=ki-ji;break;case"hanging":Ee+=ki-2*ji;break;case"middle":Ee+=ki/2-ji}if((wn=Ae.maxWidth||0)>0&&(typeof S=="string"?S=ma.splitTextToSize(S,wn):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Jn,Zn){return Jn.concat(ma.splitTextToSize(Zn,wn))},[]))),et={text:S,x:q,y:Ee,options:Ae,mutex:{pdfEscape:cs,activeFontKey:Lt,fonts:Gt,activeFontSize:nt}},Mn.publish("preProcessText",et),S=et.text,Vt=(Ae=et.options).angle,!(Xs instanceof Xt)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,Ae.rotationDirection===0&&(Vt=-Vt),R===j.ADVANCED&&(Vt=-Vt);var bo=Math.cos(Vt),$o=Math.sin(Vt);Xs=new Xt(bo,$o,-$o,bo,0,0)}else Vt&&Vt instanceof Xt&&(Xs=Vt);R!==j.ADVANCED||Xs||(Xs=kn),(pn=Ae.charSpace||$t)!==void 0&&(ja+=ne(H(pn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ks=Ae.horizontalScale)!==void 0&&(ja+=ne(100*Ks)+` Tz
`),Ae.lang;var mr=-1,Ac=Ae.renderingMode!==void 0?Ae.renderingMode:Ae.stroke,gl=ma.internal.getCurrentPageInfo().pageContext;switch(Ac){case 0:case!1:case"fill":mr=0;break;case 1:case!0:case"stroke":mr=1;break;case 2:case"fillThenStroke":mr=2;break;case 3:case"invisible":mr=3;break;case 4:case"fillAndAddForClipping":mr=4;break;case 5:case"strokeAndAddPathForClipping":mr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":mr=6;break;case 7:case"addToPathForClipping":mr=7}var Vl=gl.usedRenderingMode!==void 0?gl.usedRenderingMode:-1;mr!==-1?ja+=mr+` Tr
`:Vl!==-1&&(ja+=`0 Tr
`),mr!==-1&&(gl.usedRenderingMode=mr),Zt=Ae.align||"left";var Wr,Ba=nt*hr,eo=ma.internal.pageSize.getWidth(),xl=Gt[Lt];pn=Ae.charSpace||$t,wn=Ae.maxWidth||0,as=Object.assign({autoencode:!0,noBOM:!0},Ae.flags);var Ni=[],to=function(Jn){return ma.getStringUnitWidth(Jn,{font:xl,charSpace:pn,fontSize:nt,doKerning:!1})*nt/Or};if(Object.prototype.toString.call(S)==="[object Array]"){var pr;Nt=hi(S),Zt!=="left"&&(Wr=Nt.map(to));var Na,Kr=0;if(Zt==="right"){q-=Wr[0],S=[],ya=Nt.length;for(var Ua=0;Ua<ya;Ua++)Ua===0?(Na=tt(q),pr=Xe(Ee)):(Na=H(Kr-Wr[Ua]),pr=-Ba),S.push([Nt[Ua],Na,pr]),Kr=Wr[Ua]}else if(Zt==="center"){q-=Wr[0]/2,S=[],ya=Nt.length;for(var yr=0;yr<ya;yr++)yr===0?(Na=tt(q),pr=Xe(Ee)):(Na=H((Kr-Wr[yr])/2),pr=-Ba),S.push([Nt[yr],Na,pr]),Kr=Wr[yr]}else if(Zt==="left"){S=[],ya=Nt.length;for(var Xr=0;Xr<ya;Xr++)S.push(Nt[Xr])}else if(Zt==="justify"&&xl.encoding==="Identity-H"){S=[],ya=Nt.length,wn=wn!==0?wn:eo;for(var Pr=0,Us=0;Us<ya;Us++)if(pr=Us===0?Xe(Ee):-Ba,Na=Us===0?tt(q):Pr,Us<ya-1){var ar=H((wn-Wr[Us])/(Nt[Us].split(" ").length-1)),va=Nt[Us].split(" ");S.push([va[0]+" ",Na,pr]),Pr=0;for(var Nr=1;Nr<va.length;Nr++){var To=(to(va[Nr-1]+" "+va[Nr])-to(va[Nr]))*Or+ar;Nr==va.length-1?S.push([va[Nr],To,0]):S.push([va[Nr]+" ",To,0]),Pr-=To}}else S.push([Nt[Us],Na,pr]);S.push(["",Pr,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],ya=Nt.length,wn=wn!==0?wn:eo,Us=0;Us<ya;Us++)pr=Us===0?Xe(Ee):-Ba,Na=Us===0?tt(q):0,Us<ya-1?Ni.push(ne(H((wn-Wr[Us])/(Nt[Us].split(" ").length-1)))):Ni.push(0),S.push([Nt[Us],Na,pr])}}var vi=typeof Ae.R2L=="boolean"?Ae.R2L:yt;vi===!0&&(S=mi(S,function(Jn,Zn,Fs){return[Jn.split("").reverse().join(""),Zn,Fs]})),et={text:S,x:q,y:Ee,options:Ae,mutex:{pdfEscape:cs,activeFontKey:Lt,fonts:Gt,activeFontSize:nt}},Mn.publish("postProcessText",et),S=et.text,Rr=et.mutex.isHex||!1;var Wo=Gt[Lt].encoding;Wo!=="WinAnsiEncoding"&&Wo!=="StandardEncoding"||(S=mi(S,function(Jn,Zn,Fs){return[qo(Jn),Zn,Fs]})),Nt=hi(S),S=[];for(var no,so,ao,yo=0,Ko=1,ro=Array.isArray(Nt[0])?Ko:yo,Bi="",No=function(Jn,Zn,Fs){var pa="";return Fs instanceof Xt?(Fs=typeof Ae.angle=="number"?Ln(Fs,new Xt(1,0,0,1,Jn,Zn)):Ln(new Xt(1,0,0,1,Jn,Zn),Fs),R===j.ADVANCED&&(Fs=Ln(new Xt(1,0,0,-1,0,0),Fs)),pa=Fs.join(" ")+` Tm
`):pa=ne(Jn)+" "+ne(Zn)+` Td
`,pa},ra=0;ra<Nt.length;ra++){switch(Bi="",ro){case Ko:ao=(Rr?"<":"(")+Nt[ra][0]+(Rr?">":")"),no=parseFloat(Nt[ra][1]),so=parseFloat(Nt[ra][2]);break;case yo:ao=(Rr?"<":"(")+Nt[ra]+(Rr?">":")"),no=tt(q),so=Xe(Ee)}Ni!==void 0&&Ni[ra]!==void 0&&(Bi=Ni[ra]+` Tw
`),ra===0?S.push(Bi+No(no,so,Xs)+ao):ro===yo?S.push(Bi+ao):ro===Ko&&S.push(Bi+No(no,so,Xs)+ao)}S=ro===yo?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Mr=`BT
/`;return Mr+=Lt+" "+nt+` Tf
`,Mr+=ne(nt*hr)+` TL
`,Mr+=kt+`
`,Mr+=ja,Mr+=S,ge(Mr+="ET"),v[Lt]=!0,ma};var _n=y.__private__.clip=y.clip=function(S){return ge(S==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return _n("evenodd")},y.__private__.discardPath=y.discardPath=function(){return ge("n"),this};var on=y.__private__.isValidStyle=function(S){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(q=!0),q};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(S){return on(S)&&(h=S),this};var ts=y.__private__.getStyle=y.getStyle=function(S){var q=h;switch(S){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=S}return q},Yn=y.close=function(){return ge("h"),this};y.stroke=function(){return ge("S"),this},y.fill=function(S){return jn("f",S),this},y.fillEvenOdd=function(S){return jn("f*",S),this},y.fillStroke=function(S){return jn("B",S),this},y.fillStrokeEvenOdd=function(S){return jn("B*",S),this};var jn=function(S,q){$s(q)==="object"?zr(q,S):ge(S)},vn=function(S){S===null||R===j.ADVANCED&&S===void 0||(S=ts(S),ge(S))};function Dr(S,q,Ee,Ae,Me){var et=new ku(q||this.boundingBox,Ee||this.xStep,Ae||this.yStep,this.gState,Me||this.matrix);et.stream=this.stream;var Nt=S+"$$"+this.cloneIndex+++"$$";return Fn(Nt,et),et}var zr=function(S,q){var Ee=Ws[S.key],Ae=Cn[Ee];if(Ae instanceof zc)ge("q"),ge(fr(q)),Ae.gState&&y.setGState(Ae.gState),ge(S.matrix.toString()+" cm"),ge("/"+Ee+" sh"),ge("Q");else if(Ae instanceof ku){var Me=new Xt(1,0,0,-1,0,Mi());S.matrix&&(Me=Me.multiply(S.matrix||kn),Ee=Dr.call(Ae,S.key,S.boundingBox,S.xStep,S.yStep,Me).id),ge("q"),ge("/Pattern cs"),ge("/"+Ee+" scn"),Ae.gState&&y.setGState(Ae.gState),ge(q),ge("Q")}},fr=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},di=y.moveTo=function(S,q){return ge(ne(H(S))+" "+ne(K(q))+" m"),this},nr=y.lineTo=function(S,q){return ge(ne(H(S))+" "+ne(K(q))+" l"),this},fi=y.curveTo=function(S,q,Ee,Ae,Me,et){return ge([ne(H(S)),ne(K(q)),ne(H(Ee)),ne(K(Ae)),ne(H(Me)),ne(K(et)),"c"].join(" ")),this};y.__private__.line=y.line=function(S,q,Ee,Ae,Me){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||!on(Me))throw new Error("Invalid arguments passed to jsPDF.line");return R===j.COMPAT?this.lines([[Ee-S,Ae-q]],S,q,[1,1],Me||"S"):this.lines([[Ee-S,Ae-q]],S,q,[1,1]).stroke()},y.__private__.lines=y.lines=function(S,q,Ee,Ae,Me,et){var Nt,Vt,Zt,pn,wn,as,Ks,Xs,ma,Hs,ja,Rr;if(typeof S=="number"&&(Rr=Ee,Ee=q,q=S,S=Rr),Ae=Ae||[1,1],et=et||!1,isNaN(q)||isNaN(Ee)||!Array.isArray(S)||!Array.isArray(Ae)||!on(Me)||typeof et!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(di(q,Ee),Nt=Ae[0],Vt=Ae[1],pn=S.length,Hs=q,ja=Ee,Zt=0;Zt<pn;Zt++)(wn=S[Zt]).length===2?(Hs=wn[0]*Nt+Hs,ja=wn[1]*Vt+ja,nr(Hs,ja)):(as=wn[0]*Nt+Hs,Ks=wn[1]*Vt+ja,Xs=wn[2]*Nt+Hs,ma=wn[3]*Vt+ja,Hs=wn[4]*Nt+Hs,ja=wn[5]*Vt+ja,fi(as,Ks,Xs,ma,Hs,ja));return et&&Yn(),vn(Me),this},y.path=function(S){for(var q=0;q<S.length;q++){var Ee=S[q],Ae=Ee.c;switch(Ee.op){case"m":di(Ae[0],Ae[1]);break;case"l":nr(Ae[0],Ae[1]);break;case"c":fi.apply(this,Ae);break;case"h":Yn()}}return this},y.__private__.rect=y.rect=function(S,q,Ee,Ae,Me){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||!on(Me))throw new Error("Invalid arguments passed to jsPDF.rect");return R===j.COMPAT&&(Ae=-Ae),ge([ne(H(S)),ne(K(q)),ne(H(Ee)),ne(H(Ae)),"re"].join(" ")),vn(Me),this},y.__private__.triangle=y.triangle=function(S,q,Ee,Ae,Me,et,Nt){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||isNaN(Me)||isNaN(et)||!on(Nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-S,Ae-q],[Me-Ee,et-Ae],[S-Me,q-et]],S,q,[1,1],Nt,!0),this},y.__private__.roundedRect=y.roundedRect=function(S,q,Ee,Ae,Me,et,Nt){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||isNaN(Me)||isNaN(et)||!on(Nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return Me=Math.min(Me,.5*Ee),et=Math.min(et,.5*Ae),this.lines([[Ee-2*Me,0],[Me*Vt,0,Me,et-et*Vt,Me,et],[0,Ae-2*et],[0,et*Vt,-Me*Vt,et,-Me,et],[2*Me-Ee,0],[-Me*Vt,0,-Me,-et*Vt,-Me,-et],[0,2*et-Ae],[0,-et*Vt,Me*Vt,-et,Me,-et]],S+Me,q,[1,1],Nt,!0),this},y.__private__.ellipse=y.ellipse=function(S,q,Ee,Ae,Me){if(isNaN(S)||isNaN(q)||isNaN(Ee)||isNaN(Ae)||!on(Me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var et=4/3*(Math.SQRT2-1)*Ee,Nt=4/3*(Math.SQRT2-1)*Ae;return di(S+Ee,q),fi(S+Ee,q-Nt,S+et,q-Ae,S,q-Ae),fi(S-et,q-Ae,S-Ee,q-Nt,S-Ee,q),fi(S-Ee,q+Nt,S-et,q+Ae,S,q+Ae),fi(S+et,q+Ae,S+Ee,q+Nt,S+Ee,q),vn(Me),this},y.__private__.circle=y.circle=function(S,q,Ee,Ae){if(isNaN(S)||isNaN(q)||isNaN(Ee)||!on(Ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,q,Ee,Ee,Ae)},y.setFont=function(S,q,Ee){return Ee&&(q=Q(q,Ee)),Lt=Ti(S,q,{disableWarning:!1}),this};var fa=y.__private__.getFont=y.getFont=function(){return Gt[Ti.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var S,q,Ee={};for(S in xn)if(xn.hasOwnProperty(S))for(q in Ee[S]=[],xn[S])xn[S].hasOwnProperty(q)&&Ee[S].push(q);return Ee},y.addFont=function(S,q,Ee,Ae,Me){var et=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&et.indexOf(arguments[3])!==-1?Me=arguments[3]:arguments[3]&&et.indexOf(arguments[3])==-1&&(Ee=Q(Ee,Ae)),Me=Me||"Identity-H",dr.call(this,S,q,Ee,Me)};var sr,_r=t.lineWidth||.200025,br=y.__private__.getLineWidth=y.getLineWidth=function(){return _r},Pi=y.__private__.setLineWidth=y.setLineWidth=function(S){return _r=S,ge(ne(H(S))+" w"),this};y.__private__.setLineDash=yn.API.setLineDash=yn.API.setLineDashPattern=function(S,q){if(S=S||[],q=q||0,isNaN(q)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(Ee){return ne(H(Ee))}).join(" "),q=ne(H(q)),ge("["+S+"] "+q+" d"),this};var Ji=y.__private__.getLineHeight=y.getLineHeight=function(){return nt*sr};y.__private__.getLineHeight=y.getLineHeight=function(){return nt*sr};var le=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(sr=S),this},_e=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return sr};le(t.lineHeight);var tt=y.__private__.getHorizontalCoordinate=function(S){return H(S)},Xe=y.__private__.getVerticalCoordinate=function(S){return R===j.ADVANCED?S:un[k].mediaBox.topRightY-un[k].mediaBox.bottomLeftY-H(S)},rt=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(S){return ne(tt(S))},_t=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(S){return ne(Xe(S))},mt=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return bs(mt)},y.__private__.setStrokeColor=y.setDrawColor=function(S,q,Ee,Ae){return mt=Qt({ch1:S,ch2:q,ch3:Ee,ch4:Ae,pdfColorType:"draw",precision:2}),ge(mt),this};var Bt=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return bs(Bt)},y.__private__.setFillColor=y.setFillColor=function(S,q,Ee,Ae){return Bt=Qt({ch1:S,ch2:q,ch3:Ee,ch4:Ae,pdfColorType:"fill",precision:2}),ge(Bt),this};var kt=t.textColor||"0 g",Ct=y.__private__.getTextColor=y.getTextColor=function(){return bs(kt)};y.__private__.setTextColor=y.setTextColor=function(S,q,Ee,Ae){return kt=Qt({ch1:S,ch2:q,ch3:Ee,ch4:Ae,pdfColorType:"text",precision:3}),this};var $t=t.charSpace,Bn=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat($t||0)};y.__private__.setCharSpace=y.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $t=S,this};var Kn=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(S){var q=y.CapJoinStyles[S];if(q===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kn=q,ge(q+" J"),this};var Xn=0;y.__private__.setLineJoin=y.setLineJoin=function(S){var q=y.CapJoinStyles[S];if(q===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xn=q,ge(q+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(ne(H(S))+" M"),this},y.GState=Uh,y.setGState=function(S){(S=typeof S=="string"?Un[js[S]]:zn(null,S)).equals(ln)||(ge("/"+S.id+" gs"),ln=S)};var zn=function(S,q){if(!S||!js[S]){var Ee=!1;for(var Ae in Un)if(Un.hasOwnProperty(Ae)&&Un[Ae].equals(q)){Ee=!0;break}if(Ee)q=Un[Ae];else{var Me="GS"+(Object.keys(Un).length+1).toString(10);Un[Me]=q,q.id=Me}return S&&(js[S]=q.id),Mn.publish("addGState",q),q}};y.addGState=function(S,q){return zn(S,q),this},y.saveGraphicsState=function(){return ge("q"),rs.push({key:Lt,size:nt,color:kt}),this},y.restoreGraphicsState=function(){ge("Q");var S=rs.pop();return Lt=S.key,nt=S.size,kt=S.color,ln=null,this},y.setCurrentTransformationMatrix=function(S){return ge(S.toString()+" cm"),this},y.comment=function(S){return ge("#"+S),this};var ha=function(S,q){var Ee=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(et){isNaN(et)||(Ee=parseFloat(et))}});var Ae=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ae},set:function(et){isNaN(et)||(Ae=parseFloat(et))}});var Me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Me},set:function(et){Me=et.toString()}}),this},bn=function(S,q,Ee,Ae){ha.call(this,S,q),this.type="rect";var Me=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Me},set:function(Nt){isNaN(Nt)||(Me=parseFloat(Nt))}});var et=Ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return et},set:function(Nt){isNaN(Nt)||(et=parseFloat(Nt))}}),this},Gs=function(){this.page=ls,this.currentPage=k,this.pages=we.slice(0),this.pagesContext=un.slice(0),this.x=vt,this.y=At,this.matrix=Kt,this.width=Tr(k),this.height=Mi(k),this.outputDestination=Je,this.id="",this.objectNumber=-1};Gs.prototype.restore=function(){ls=this.page,k=this.currentPage,un=this.pagesContext,we=this.pages,vt=this.x,At=this.y,Kt=this.matrix,Yo(k,this.width),_o(k,this.height),Je=this.outputDestination};var aa=function(S,q,Ee,Ae,Me){Nn.push(new Gs),ls=k=0,we=[],vt=S,At=q,Kt=Me,qr([Ee,Ae])},dn=function(S){if(ca[S])Nn.pop().restore();else{var q=new Gs,Ee="Xo"+(Object.keys(gs).length+1).toString(10);q.id=Ee,ca[S]=Ee,gs[Ee]=q,Mn.publish("addFormObject",q),Nn.pop().restore()}};for(var vs in y.beginFormObject=function(S,q,Ee,Ae,Me){return aa(S,q,Ee,Ae,Me),this},y.endFormObject=function(S){return dn(S),this},y.doFormObject=function(S,q){var Ee=gs[ca[S]];return ge("q"),ge(q.toString()+" cm"),ge("/"+Ee.id+" Do"),ge("Q"),this},y.getFormObject=function(S){var q=gs[ca[S]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},y.save=function(S,q){return S=S||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(qc(Re(be()),S),typeof qc.unload=="function"&&Dn.setTimeout&&setTimeout(qc.unload,911),this):new Promise(function(Ee,Ae){try{var Me=qc(Re(be()),S);typeof qc.unload=="function"&&Dn.setTimeout&&setTimeout(qc.unload,911),Ee(Me)}catch(et){Ae(et.message)}})},yn.API)yn.API.hasOwnProperty(vs)&&(vs==="events"&&yn.API.events.length?function(S,q){var Ee,Ae,Me;for(Me=q.length-1;Me!==-1;Me--)Ee=q[Me][0],Ae=q[Me][1],S.subscribe.apply(S,[Ee].concat(typeof Ae=="function"?[Ae]:Ae))}(Mn,yn.API.events):y[vs]=yn.API[vs]);var Tr=y.getPageWidth=function(S){return(un[S=S||k].mediaBox.topRightX-un[S].mediaBox.bottomLeftX)/pe},Yo=y.setPageWidth=function(S,q){un[S].mediaBox.topRightX=q*pe+un[S].mediaBox.bottomLeftX},Mi=y.getPageHeight=function(S){return(un[S=S||k].mediaBox.topRightY-un[S].mediaBox.bottomLeftY)/pe},_o=y.setPageHeight=function(S,q){un[S].mediaBox.topRightY=q*pe+un[S].mediaBox.bottomLeftY};return y.internal={pdfEscape:cs,getStyle:ts,getFont:fa,getFontSize:st,getCharSpace:Bn,getTextColor:Ct,getLineHeight:Ji,getLineHeightFactor:_e,getLineWidth:br,write:Fe,getHorizontalCoordinate:tt,getVerticalCoordinate:Xe,getCoordinateString:rt,getVerticalCoordinateString:_t,collections:{},newObject:Rn,newAdditionalObject:er,newObjectDeferred:_s,newObjectDeferredBegin:hs,getFilters:Ls,putStream:Ts,events:Mn,scaleFactor:pe,pageSize:{getWidth:function(){return Tr(k)},setWidth:function(S){Yo(k,S)},getHeight:function(){return Mi(k)},setHeight:function(S){_o(k,S)}},encryptionOptions:_,encryption:bt,getEncryptor:Dt,output:ze,getNumberOfPages:ci,pages:we,out:ge,f2:xe,f3:F,getPageInfo:wt,getPageInfoByObjId:xt,getCurrentPageInfo:Jt,getPDFVersion:L,Point:ha,Rectangle:bn,Matrix:Xt,hasHotfix:dt},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Tr(k)},set:function(S){Yo(k,S)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Mi(k)},set:function(S){_o(k,S)},enumerable:!0,configurable:!0}),Ns.call(y,Pe),Lt="F1",_i(r,n),Mn.publish("initialized"),y}Ou.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ou.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ou.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ou.prototype.processOwnerPassword=function(t,e){return mp(hp(e).substr(0,5),t)},Ou.prototype.encryptor=function(t,e){var n=hp(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return mp(n,s)}},Uh.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||$s(t)!==$s(this))return!1;var s=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;s++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&s--;return s===0},yn.API={events:[]},yn.version="3.0.1";var Ha=yn.API,Mp=1,Qc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qn=function(t){return t.toFixed(2)},pc=function(t){return t.toFixed(5)};Ha.__acroform__={};var Oi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},$E=function(t){return t*Mp},ol=function(t){var e=new C_,n=tn.internal.getHeight(t)||0,s=tn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(qn(s)),Number(qn(n))],e},qI=Ha.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},zI=Ha.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},$I=Ha.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Ja=Ha.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $I(t,e-1)},Za=Ha.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qI(t,e-1)},Qa=Ha.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zI(t,e-1)},WI=Ha.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,r=t[0],l=t[1],c=t[2],d=t[3],f={};return f.lowerLeft_X=n(r)||0,f.lowerLeft_Y=s(l+d)||0,f.upperRight_X=n(r+c)||0,f.upperRight_Y=s(l)||0,[Number(qn(f.lowerLeft_X)),Number(qn(f.lowerLeft_Y)),Number(qn(f.upperRight_X)),Number(qn(f.upperRight_Y))]},KI=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,s=pp(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+qn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=ol(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},pp=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,s={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map(function(F){return F.split(`
`)}):r.map(function(F){return[F]});var l=n,c=tn.internal.getHeight(t)||0;c=c<0?-c:c;var d=tn.internal.getWidth(t)||0;d=d<0?-d:d;var f=function(F,H,re){if(F+1<r.length){var K=H+" "+r[F+1][0];return lh(K,t,re).width<=d-4}return!1};l++;e:for(;l>0;){e="",l--;var h,_,b=lh("3",t,l).height,v=t.multiline?c-l:(c-b)/2,y=v+=2,C=0,L=0,O=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+lh(e,t,l=12).width+", FieldWidth:"+d+`
`;break}for(var I="",j=0,R=0;R<r.length;R++)if(r.hasOwnProperty(R)){var U=!1;if(r[R].length!==1&&O!==r[R].length-1){if((b+2)*(j+2)+2>c)continue e;I+=r[R][O],U=!0,L=R,R--}else{I=(I+=r[R][O]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var te=parseInt(R),Q=f(te,I,l),ne=R>=r.length-1;if(Q&&!ne){I+=" ",O=0;continue}if(Q||ne){if(ne)L=te;else if(t.multiline&&(b+2)*(j+2)+2>c)continue e}else{if(!t.multiline||(b+2)*(j+2)+2>c)continue e;L=te}}for(var J="",oe=C;oe<=L;oe++){var xe=r[oe];if(t.multiline){if(oe===L){J+=xe[O]+" ",O=(O+1)%xe.length;continue}if(oe===C){J+=xe[xe.length-1]+" ";continue}}J+=xe[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,_=lh(J,t,l).width,t.textAlign){case"right":h=d-_-2;break;case"center":h=(d-_)/2;break;case"left":default:h=2}e+=qn(h)+" "+qn(y)+` Td
`,e+="("+Qc(J)+`) Tj
`,e+=-qn(h)+` 0 Td
`,y=-(l+2),_=0,C=U?L:L+1,j++,I=""}break}return s.text=e,s.fontSize=l,s},lh=function(t,e,n){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},XI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},JI=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(s){return s.type===n.type&&s.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},ZI=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var s=n,r=t[n];e.internal.newObjectDeferredBegin(r.objId,!0),$s(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete t[s]}},QI=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Go.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(XI)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Mp=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new L_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in s)if(s.hasOwnProperty(r)){var l=s[r];l.objId=void 0,l.hasAnnotation&&JI(l,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(s,r){var l=!s;for(var c in s||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(c)){var d=s[c],f=[],h=d.Rect;if(d.Rect&&(d.Rect=WI(d.Rect,r)),r.internal.newObjectDeferredBegin(d.objId,!0),d.DA=tn.createDefaultAppearanceStream(d),$s(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(f=d.getKeyValueListForStream()),d.Rect=h,d.hasAppearanceStream&&!d.appearanceStreamContent){var _=KI(d);f.push({key:"AP",value:"<</N "+_+">>"}),r.internal.acroformPlugin.xForms.push(_)}if(d.appearanceStreamContent){var b="";for(var v in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(v)){var y=d.appearanceStreamContent[v];if(b+="/"+v+" ",b+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var c in y)if(y.hasOwnProperty(c)){var C=y[c];typeof C=="function"&&(C=C.call(r,d)),b+="/"+c+" "+C+" ",r.internal.acroformPlugin.xForms.indexOf(C)>=0||r.internal.acroformPlugin.xForms.push(C)}}else typeof(C=y)=="function"&&(C=C.call(r,d)),b+="/"+c+" "+C,r.internal.acroformPlugin.xForms.indexOf(C)>=0||r.internal.acroformPlugin.xForms.push(C);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}r.internal.putStream({additionalKeyValues:f,objectId:d.objId}),r.internal.out("endobj")}l&&ZI(r.internal.acroformPlugin.xForms,r)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},S_=Ha.__acroform__.arrayToPdfArray=function(t,e,n){var s=function(c){return c};if(Array.isArray(t)){for(var r="[",l=0;l<t.length;l++)switch(l!==0&&(r+=" "),$s(t[l])){case"boolean":case"number":case"object":r+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&n&&(s=n.internal.getEncryptor(e)),r+="("+Qc(s(t[l].toString()))+")"):r+=t[l].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},C0=function(t,e,n){var s=function(r){return r};return e!==void 0&&n&&(s=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Qc(s(t))+")"},ul=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ul.prototype.toString=function(){return this.objId+" 0 R"},ul.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ul.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var s=e[n],r=this[s];r&&(Array.isArray(r)?t.push({key:s,value:S_(r,this.objId,this.scope)}):r instanceof ul?(r.scope=this.scope,t.push({key:s,value:r.objId+" 0 R"})):typeof r!="function"&&t.push({key:s,value:r}))}return t};var C_=function(){ul.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Oi(C_,ul);var L_=function(){ul.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(s){return s};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Qc(n(t))+")"}},set:function(n){t=n}})};Oi(L_,ul);var Go=function t(){ul.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ja(e,3)},set:function(I){I?this.F=Za(e,3):this.F=Qa(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');n=I}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(I){s=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(I){s[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(I){s[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(I){s[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(I){s[3]=I}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Fh)return;l="FieldObject"+t.FieldNum++}var I=function(j){return j};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+Qc(I(l))+")"},set:function(I){l=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(I){l=I}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(I){c=I}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(I){d=I}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(I){f=I}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Mp:h},set:function(I){h=I}});var _="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return _},set:function(I){_=I}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Fh||this instanceof $c))return C0(b,this.objId,this.scope)},set:function(I){I=I.toString(),b=I}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Lr?v:C0(v,this.objId,this.scope)},set:function(I){I=I.toString(),v=this instanceof Lr?I:I.substr(0,1)==="("?Lu(I.substr(1,I.length-2)):Lu(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?Lu(v.substr(1,v.length-1)):v},set:function(I){I=I.toString(),v=this instanceof Lr?"/"+I:I}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Lr?y:C0(y,this.objId,this.scope)},set:function(I){I=I.toString(),y=this instanceof Lr?I:I.substr(0,1)==="("?Lu(I.substr(1,I.length-2)):Lu(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?Lu(y.substr(1,y.length-1)):y},set:function(I){I=I.toString(),y=this instanceof Lr?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(I){I=!!I,L=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(I){C=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,1)},set:function(I){I?this.Ff=Za(this.Ff,1):this.Ff=Qa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,2)},set:function(I){I?this.Ff=Za(this.Ff,2):this.Ff=Qa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,3)},set:function(I){I?this.Ff=Za(this.Ff,3):this.Ff=Qa(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');O=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(O){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};Oi(Go,ul);var Uu=function(){Go.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return S_(e,this.objId,this.scope)},set:function(n){var s,r;r=[],typeof(s=n)=="string"&&(r=function(l,c,d){d||(d=1);for(var f,h=[];f=c.exec(l);)h.push(f[d]);return h}(s,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,s){for(s=s||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,18)},set:function(n){n?this.Ff=Za(this.Ff,18):this.Ff=Qa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Za(this.Ff,19):this.Ff=Qa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,20)},set:function(n){n?(this.Ff=Za(this.Ff,20),e.sort()):this.Ff=Qa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,22)},set:function(n){n?this.Ff=Za(this.Ff,22):this.Ff=Qa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,23)},set:function(n){n?this.Ff=Za(this.Ff,23):this.Ff=Qa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,27)},set:function(n){n?this.Ff=Za(this.Ff,27):this.Ff=Qa(this.Ff,27)}}),this.hasAppearanceStream=!1};Oi(Uu,Go);var Fu=function(){Uu.call(this),this.fontName="helvetica",this.combo=!1};Oi(Fu,Uu);var Vu=function(){Fu.call(this),this.combo=!0};Oi(Vu,Fu);var Th=function(){Vu.call(this),this.edit=!0};Oi(Th,Vu);var Lr=function(){Go.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,15)},set:function(n){n?this.Ff=Za(this.Ff,15):this.Ff=Qa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,16)},set:function(n){n?this.Ff=Za(this.Ff,16):this.Ff=Qa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,17)},set:function(n){n?this.Ff=Za(this.Ff,17):this.Ff=Qa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,26)},set:function(n){n?this.Ff=Za(this.Ff,26):this.Ff=Qa(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,r=[];for(s in r.push("<<"),e)r.push("/"+s+" ("+Qc(n(e[s]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){$s(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Oi(Lr,Go);var yh=function(){Lr.call(this),this.pushButton=!0};Oi(yh,Lr);var Gu=function(){Lr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Oi(Gu,Lr);var Fh=function(){var t,e;Go.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var n,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(d){return d};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),s)c.push("/"+l+" ("+Qc(r(s[l]))+")");return c.push(">>"),c.join(`
`)},set:function(r){$s(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oi(Fh,Go),Gu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Gu.prototype.createOption=function(t){var e=new Fh;return e.Parent=this,e.optionName=t,this.Kids.push(e),eD.call(this.scope,e),e};var Nh=function(){Lr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tn.CheckBox.createAppearanceStream()};Oi(Nh,Lr);var $c=function(){Go.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,13)},set:function(e){e?this.Ff=Za(this.Ff,13):this.Ff=Qa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,21)},set:function(e){e?this.Ff=Za(this.Ff,21):this.Ff=Qa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,23)},set:function(e){e?this.Ff=Za(this.Ff,23):this.Ff=Qa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,24)},set:function(e){e?this.Ff=Za(this.Ff,24):this.Ff=Qa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,25)},set:function(e){e?this.Ff=Za(this.Ff,25):this.Ff=Qa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,26)},set:function(e){e?this.Ff=Za(this.Ff,26):this.Ff=Qa(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oi($c,Go);var vh=function(){$c.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ja(this.Ff,14)},set:function(t){t?this.Ff=Za(this.Ff,14):this.Ff=Qa(this.Ff,14)}}),this.password=!0};Oi(vh,$c);var tn={CheckBox:{createAppearanceStream:function(){return{N:{On:tn.CheckBox.YesNormal},D:{On:tn.CheckBox.YesPushDown,Off:tn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ol(t);e.scope=t.scope;var n=[],s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),l=pp(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+qn(tn.internal.getWidth(t))+" "+qn(tn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+s+" "+qn(l.fontSize)+" Tf "+r),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=ol(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),r=[],l=tn.internal.getHeight(t),c=tn.internal.getWidth(t),d=pp(t,t.caption);return r.push("1 g"),r.push("0 0 "+qn(c)+" "+qn(l)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+qn(c-1)+" "+qn(l-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+qn(d.fontSize)+" Tf "+s),r.push(d.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ol(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qn(tn.internal.getWidth(t))+" "+qn(tn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Circle.YesNormal,e.D[t]=tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ol(t);e.scope=t.scope;var n=[],s=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var r=tn.internal.Bezier_C,l=Number((s*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pc(tn.internal.getWidth(t)/2)+" "+pc(tn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),n.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),n.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),n.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ol(t);e.scope=t.scope;var n=[],s=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var r=Number((2*s).toFixed(5)),l=Number((r*tn.internal.Bezier_C).toFixed(5)),c=Number((s*tn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pc(tn.internal.getWidth(t)/2)+" "+pc(tn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pc(tn.internal.getWidth(t)/2)+" "+pc(tn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),n.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),n.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),n.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ol(t);e.scope=t.scope;var n=[],s=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var r=Number((2*s).toFixed(5)),l=Number((r*tn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pc(tn.internal.getWidth(t)/2)+" "+pc(tn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Cross.YesNormal,e.D[t]=tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ol(t);e.scope=t.scope;var n=[],s=tn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+qn(tn.internal.getWidth(t)-2)+" "+qn(tn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(qn(s.x1.x)+" "+qn(s.x1.y)+" m"),n.push(qn(s.x2.x)+" "+qn(s.x2.y)+" l"),n.push(qn(s.x4.x)+" "+qn(s.x4.y)+" m"),n.push(qn(s.x3.x)+" "+qn(s.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ol(t);e.scope=t.scope;var n=tn.internal.calculateCross(t),s=[];return s.push("0.749023 g"),s.push("0 0 "+qn(tn.internal.getWidth(t))+" "+qn(tn.internal.getHeight(t))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+qn(tn.internal.getWidth(t)-2)+" "+qn(tn.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(qn(n.x1.x)+" "+qn(n.x1.y)+" m"),s.push(qn(n.x2.x)+" "+qn(n.x2.y)+" l"),s.push(qn(n.x4.x)+" "+qn(n.x4.y)+" m"),s.push(qn(n.x3.x)+" "+qn(n.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=ol(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qn(tn.internal.getWidth(t))+" "+qn(tn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};tn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tn.internal.getWidth(t),n=tn.internal.getHeight(t),s=Math.min(e,n);return{x1:{x:(e-s)/2,y:(n-s)/2+s},x2:{x:(e-s)/2+s,y:(n-s)/2},x3:{x:(e-s)/2,y:(n-s)/2},x4:{x:(e-s)/2+s,y:(n-s)/2+s}}}},tn.internal.getWidth=function(t){var e=0;return $s(t)==="object"&&(e=$E(t.Rect[2])),e},tn.internal.getHeight=function(t){var e=0;return $s(t)==="object"&&(e=$E(t.Rect[3])),e};var eD=Ha.addField=function(t){if(QI(this,t),!(t instanceof Go))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ha.AcroFormChoiceField=Uu,Ha.AcroFormListBox=Fu,Ha.AcroFormComboBox=Vu,Ha.AcroFormEditBox=Th,Ha.AcroFormButton=Lr,Ha.AcroFormPushButton=yh,Ha.AcroFormRadioButton=Gu,Ha.AcroFormCheckBox=Nh,Ha.AcroFormTextField=$c,Ha.AcroFormPasswordField=vh,Ha.AcroFormAppearance=tn,Ha.AcroForm={ChoiceField:Uu,ListBox:Fu,ComboBox:Vu,EditBox:Th,Button:Lr,PushButton:yh,RadioButton:Gu,CheckBox:Nh,TextField:$c,PasswordField:vh,Appearance:tn},yn.AcroForm={ChoiceField:Uu,ListBox:Fu,ComboBox:Vu,EditBox:Th,Button:Lr,PushButton:yh,RadioButton:Gu,CheckBox:Nh,TextField:$c,PasswordField:vh,Appearance:tn};yn.AcroForm;function w_(t){return t.reduce(function(e,n,s){return e[n]=s,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(F,H){var re,K,Te,G,he,ue=e;if((H=H||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(Q(F))for(he in n)for(Te=n[he],re=0;re<Te.length;re+=1){for(G=!0,K=0;K<Te[re].length;K+=1)if(Te[re][K]!==void 0&&Te[re][K]!==F[K]){G=!1;break}if(G===!0){ue=he;break}}else for(he in n)for(Te=n[he],re=0;re<Te.length;re+=1){for(G=!0,K=0;K<Te[re].length;K+=1)if(Te[re][K]!==void 0&&Te[re][K]!==F.charCodeAt(K)){G=!1;break}if(G===!0){ue=he;break}}return ue===e&&H!==e&&(ue=H),ue},r=function F(H){for(var re=this.internal.write,K=this.internal.putStream,Te=(0,this.internal.getFilters)();Te.indexOf("FlateEncode")!==-1;)Te.splice(Te.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var G=[];if(G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Image"}),G.push({key:"Width",value:H.width}),G.push({key:"Height",value:H.height}),H.colorSpace===O.INDEXED?G.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(G.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===O.DEVICE_CMYK&&G.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),G.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&G.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var he="",ue=0,ae=H.transparency.length;ue<ae;ue++)he+=H.transparency[ue]+" "+H.transparency[ue]+" ";G.push({key:"Mask",value:"["+he+"]"})}H.sMask!==void 0&&G.push({key:"SMask",value:H.objectId+1+" 0 R"});var V=H.filter!==void 0?["/"+H.filter]:void 0;if(K({data:H.data,additionalKeyValues:G,alreadyAppliedFilters:V,objectId:H.objectId}),re("endobj"),"sMask"in H&&H.sMask!==void 0){var ce="/Predictor "+H.predictor+" /Colors 1 /BitsPerComponent "+H.bitsPerComponent+" /Columns "+H.width,M={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:ce,data:H.sMask};"filter"in H&&(M.filter=H.filter),F.call(this,M)}if(H.colorSpace===O.INDEXED){var k=this.internal.newObject();K({data:J(new Uint8Array(H.palette)),objectId:k}),re("endobj")}},l=function(){var F=this.internal.collections.addImage_images;for(var H in F)r.call(this,F[H])},c=function(){var F,H=this.internal.collections.addImage_images,re=this.internal.write;for(var K in H)re("/I"+(F=H[K]).index,F.objectId,"0","R")},d=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var F=this.internal.collections.addImage_images;return d.call(this),F},h=function(){return Object.keys(this.internal.collections.addImage_images).length},_=function(F){return typeof t["process"+F.toUpperCase()]=="function"},b=function(F){return $s(F)==="object"&&F.nodeType===1},v=function(F,H){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var re=""+F.getAttribute("src");if(re.indexOf("data:image/")===0)return Xd(unescape(re).split("base64,").pop());var K=t.loadFile(re,!0);if(K!==void 0)return K}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var Te;switch(H){case"PNG":Te="image/png";break;case"WEBP":Te="image/webp";break;case"JPEG":case"JPG":default:Te="image/jpeg"}return Xd(F.toDataURL(Te,1).split("base64,").pop())}},y=function(F){var H=this.internal.collections.addImage_images;if(H){for(var re in H)if(F===H[re].alias)return H[re]}},C=function(F,H,re){return F||H||(F=-96,H=-96),F<0&&(F=-1*re.width*72/F/this.internal.scaleFactor),H<0&&(H=-1*re.height*72/H/this.internal.scaleFactor),F===0&&(F=H*re.width/re.height),H===0&&(H=F*re.height/re.width),[F,H]},L=function(F,H,re,K,Te,G){var he=C.call(this,re,K,Te),ue=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,V=f.call(this);if(re=he[0],K=he[1],V[Te.index]=Te,G){G*=Math.PI/180;var ce=Math.cos(G),M=Math.sin(G),k=function(Z){return Z.toFixed(4)},Y=[k(ce),k(M),k(-1*M),k(ce),0,0,"cm"]}this.internal.write("q"),G?(this.internal.write([1,"0","0",1,ue(F),ae(H+K),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ue(re),"0","0",ue(K),"0","0","cm"].join(" "))):this.internal.write([ue(re),"0","0",ue(K),ue(F),ae(H+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Te.index+" Do"),this.internal.write("Q")},O=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(F){var H,re,K=0;if(typeof F=="string")for(re=F.length,H=0;H<re;H++)K=(K<<5)-K+F.charCodeAt(H),K|=0;else if(Q(F))for(re=F.byteLength/2,H=0;H<re;H++)K=(K<<5)-K+F[H],K|=0;return K},R=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var H=!0;return F.length===0&&(H=!1),F.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(H=!1),H},U=t.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var H=F.indexOf(",");return H<0?null:F.substring(0,H).trim().endsWith("base64")?F.substring(H+1):null},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(F){return te()&&F instanceof ArrayBuffer};var Q=t.__addimage__.isArrayBufferView=function(F){return te()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},ne=t.__addimage__.binaryStringToUint8Array=function(F){for(var H=F.length,re=new Uint8Array(H),K=0;K<H;K++)re[K]=F.charCodeAt(K);return re},J=t.__addimage__.arrayBufferToBinaryString=function(F){for(var H="",re=Q(F)?F:new Uint8Array(F),K=0;K<re.length;K+=8192)H+=String.fromCharCode.apply(null,re.subarray(K,K+8192));return H};t.addImage=function(){var F,H,re,K,Te,G,he,ue,ae;if(typeof arguments[1]=="number"?(H=e,re=arguments[1],K=arguments[2],Te=arguments[3],G=arguments[4],he=arguments[5],ue=arguments[6],ae=arguments[7]):(H=arguments[1],re=arguments[2],K=arguments[3],Te=arguments[4],G=arguments[5],he=arguments[6],ue=arguments[7],ae=arguments[8]),$s(F=arguments[0])==="object"&&!b(F)&&"imageData"in F){var V=F;F=V.imageData,H=V.format||H||e,re=V.x||re||0,K=V.y||K||0,Te=V.w||V.width||Te,G=V.h||V.height||G,he=V.alias||he,ue=V.compression||ue,ae=V.rotation||V.angle||ae}var ce=this.internal.getFilters();if(ue===void 0&&ce.indexOf("FlateEncode")!==-1&&(ue="SLOW"),isNaN(re)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var M=oe.call(this,F,H,he,ue);return L.call(this,re,K,Te,G,M,ae),this};var oe=function(F,H,re,K){var Te,G,he;if(typeof F=="string"&&s(F)===e){F=unescape(F);var ue=xe(F,!1);(ue!==""||(ue=t.loadFile(F,!0))!==void 0)&&(F=ue)}if(b(F)&&(F=v(F,H)),H=s(F,H),!_(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((he=re)==null||he.length===0)&&(re=function(ae){return typeof ae=="string"||Q(ae)?j(ae):Q(ae.data)?j(ae.data):null}(F)),(Te=y.call(this,re))||(te()&&(F instanceof Uint8Array||H==="RGBA"||(G=F,F=ne(F))),Te=this["process"+H.toUpperCase()](F,h.call(this),re,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:I.NONE}(K),G)),!Te)throw new Error("An unknown error occurred whilst processing the image.");return Te},xe=t.__addimage__.convertBase64ToBinaryString=function(F,H){H=typeof H!="boolean"||H;var re,K="";if(typeof F=="string"){var Te;re=(Te=U(F))!==null&&Te!==void 0?Te:F;try{K=Xd(re)}catch(G){if(H)throw R(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+G.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};t.getImageProperties=function(F){var H,re,K="";if(b(F)&&(F=v(F)),typeof F=="string"&&s(F)===e&&((K=xe(F,!1))===""&&(K=t.loadFile(F)||""),F=K),re=s(F),!_(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(!te()||F instanceof Uint8Array||(F=ne(F)),!(H=this["process"+re.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=re,H}})(yn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};yn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var s,r,l,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,_=!1,b=0;b<h.length&&!_;b++)switch((s=h[b]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(_=!0);break;case"reference":case"text":case"freetext":_=!0}if(_!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){s=h[v];var y=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(L.objId),j=s.title||"Note";l="<</Type /Annot /Subtype /Text "+(r="/Rect ["+c(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+c(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(I(s.contents))+")",l+=" /Popup "+O.objId+" 0 R",l+=" /P "+f.objId+" 0 R",l+=" /T ("+y(I(j))+") >>",L.content=l;var R=L.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+c(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+c(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+R,s.open&&(l+=" /Open true"),l+=" >>",O.content=l,this.internal.write(L.objId,"0 R",O.objId,"0 R");break;case"freetext":r="/Rect ["+c(s.bounds.x)+" "+d(s.bounds.y)+" "+c(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var U=s.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+y(C(s.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(s.options.name){var te=this.annotations._nameMap[s.options.name];s.options.pageNumber=te.page,s.options.top=te.y}else s.options.top||(s.options.top=0);if(r="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",l="",s.options.url)l="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+y(C(s.options.url))+") >>";else if(s.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,l+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Q=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),l+=" /XYZ "+s.options.left+" "+Q+" "+s.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var s=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":s.pageContext.annotations.push(n)}},t.link=function(n,s,r,l,c){var d=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:f(n),y:h(s),w:f(n+r),h:h(s+l)},options:c,type:"link"})},t.textWithLink=function(n,s,r,l){var c,d,f=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){d=l.maxWidth;var _=this.splitTextToSize(n,d).length;c=Math.ceil(h*_)}else d=f,c=h;return this.text(n,s,r,l),r+=.2*h,l.align==="center"&&(s-=f/2),l.align==="right"&&(s-=f),this.link(s,r-h,d,c,l),f},t.getTextWidth=function(n){var s=this.internal.getFontSize();return this.getStringUnitWidth(n)*s/this.internal.scaleFactor}}(yn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(L){return e[L.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},d=t.__arabicParser__.isArabicEndLetter=function(L){return c(L)&&l(L)&&e[L.charCodeAt(0)].length<=2},f=t.__arabicParser__.isArabicAlfLetter=function(L){return c(L)&&r.indexOf(L.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return c(L)&&l(L)&&e[L.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(L){return c(L)&&l(L)&&e[L.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(L){return c(L)&&l(L)&&e[L.charCodeAt(0)].length>=3};var _=t.__arabicParser__.arabicLetterHasMedialForm=function(L){return c(L)&&l(L)&&e[L.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(L){var O=0,I=n,j="",R=0;for(O=0;O<L.length;O+=1)I[L.charCodeAt(O)]!==void 0?(R++,typeof(I=I[L.charCodeAt(O)])=="number"&&(j+=String.fromCharCode(I),I=n,R=0),O===L.length-1&&(I=n,j+=L.charAt(O-(R-1)),O-=R-1,R=0)):(I=n,j+=L.charAt(O-R),O-=R,R=0);return j};t.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&s[L.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(L,O,I){return c(L)?l(L)===!1?-1:!h(L)||!c(O)&&!c(I)||!c(I)&&d(O)||d(L)&&!c(O)||d(L)&&f(O)||d(L)&&d(O)?0:_(L)&&c(O)&&!d(O)&&c(I)&&h(I)?3:d(L)||!c(I)?1:2:-1},y=function(L){var O=0,I=0,j=0,R="",U="",te="",Q=(L=L||"").split("\\s+"),ne=[];for(O=0;O<Q.length;O+=1){for(ne.push(""),I=0;I<Q[O].length;I+=1)R=Q[O][I],U=Q[O][I-1],te=Q[O][I+1],c(R)?(j=v(R,U,te),ne[O]+=j!==-1?String.fromCharCode(e[R.charCodeAt(0)][j]):R):ne[O]+=R;ne[O]=b(ne[O])}return ne.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var L,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(O)){var j=0;for(I=[],j=0;j<O.length;j+=1)Array.isArray(O[j])?I.push([y(O[j][0]),O[j][1],O[j][2]]):I.push([y(O[j])]);L=I}else L=y(O);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};t.events.push(["preProcessText",C])}(yn.API),yn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(d){l=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,s){var r;if((n=n||"2d")!=="2d")return null;for(r in s)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=s[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(yn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(L){f=L}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(L){h=L}});var _=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return _},set:function(L){_=L}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(L){b=L}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(L){v=L}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(L){y=L}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(L){C=L}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},t.getTextDimensions=function(f,h){s.call(this);var _=(h=h||{}).fontSize||this.getFontSize(),b=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,y=0,C=0,L=0,O=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var I=h.maxWidth;I>0?typeof f=="string"?f=this.splitTextToSize(f,I):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(R,U){return R.concat(O.splitTextToSize(U,I))},[])):f=Array.isArray(f)?f:[f];for(var j=0;j<f.length;j++)y<(L=this.getStringUnitWidth(f[j],{font:b})*_)&&(y=L);return y!==0&&(C=f.length),{w:y/=v,h:Math.max((C*_*this.getLineHeightFactor()-_*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var f;f=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var h=this.internal.__cell__.lastCell,_=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===f.lineNumber?(f.x=(h.x||0)+(h.width||0),f.y=h.y||0):h.y+h.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,y&&v&&(this.printHeaderRow(f.lineNumber,!0),f.y+=v[0].height)):f.y=h.y+h.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,n===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-_,f.y+_,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+_,{align:"center",baseline:"top",maxWidth:f.width-_-_}):this.text(f.text,f.x+_,f.y+_,{align:"left",baseline:"top",maxWidth:f.width-_-_})),this.internal.__cell__.lastCell=f,this};t.table=function(f,h,_,b,v){if(s.call(this),!_)throw new Error("No data for PDF table.");var y,C,L,O,I=[],j=[],R=[],U={},te={},Q=[],ne=[],J=(v=v||{}).autoSize||!1,oe=v.printHeaders!==!1,xe=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,F=v.margins||Object.assign({width:this.getPageWidth()},e),H=typeof v.padding=="number"?v.padding:3,re=v.headerBackgroundColor||"#c8c8c8",K=v.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=oe,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=xe,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=K,this.setFontSize(xe),b==null)j=I=Object.keys(_[0]),R=I.map(function(){return"left"});else if(Array.isArray(b)&&$s(b[0])==="object")for(I=b.map(function(V){return V.name}),j=b.map(function(V){return V.prompt||V.name||""}),R=b.map(function(V){return V.align||"left"}),y=0;y<b.length;y+=1)te[b[y].name]=b[y].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(j=I=b,R=I.map(function(){return"left"}));if(J||Array.isArray(b)&&typeof b[0]=="string")for(y=0;y<I.length;y+=1){for(U[O=I[y]]=_.map(function(V){return V[O]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(j[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=U[O],this.setFont(void 0,"normal"),L=0;L<C.length;L+=1)Q.push(this.getTextDimensions(C[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[O]=Math.max.apply(null,Q)+H+H,Q=[]}if(oe){var Te={};for(y=0;y<I.length;y+=1)Te[I[y]]={},Te[I[y]].text=j[y],Te[I[y]].align=R[y];var G=d.call(this,Te,te);ne=I.map(function(V){return new l(f,h,te[V],G,Te[V].text,void 0,Te[V].align)}),this.setTableHeaderRow(ne),this.printHeaderRow(1,!1)}var he=b.reduce(function(V,ce){return V[ce.name]=ce.align,V},{});for(y=0;y<_.length;y+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:y,data:_[y]},this);var ue=d.call(this,_[y],te);for(L=0;L<I.length;L+=1){var ae=_[y][I[L]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:y,col:L,data:ae},this),c.call(this,new l(f,h,te[I[L]],ue,ae,y+2,he[I[L]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=h,this};var d=function(f,h){var _=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(f).map(function(y){var C=f[y];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,h[y]-_-_)},this).map(function(y){return this.getLineHeightFactor()*y.length*b/v+_+_},this).reduce(function(y,C){return Math.max(y,C)},0)};t.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},t.printHeaderRow=function(f,h){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var _;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){_=this.internal.__cell__.tableHeaderRow[y].clone(),h&&(_.y=this.internal.__cell__.margins.top||0,v.push(_)),_.lineNumber=f;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,_),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(yn.API);var I_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},D_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gp=w_(D_),R_=[100,200,300,400,500,600,700,800,900],tD=w_(R_);function xp(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return I_[l=l||"normal"]?l:"normal"}(t.style),s=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),r=function(l){return typeof gp[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:n,weight:s,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,s].join(" ")}}}function WE(t,e,n,s){var r;for(r=n;r>=0&&r<e.length;r+=s)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=s)if(t[e[r]])return t[e[r]]}var nD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},KE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function XE(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function sD(t,e,n){for(var s=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},nD,n.genericFontFamilies||{}),l=null,c=null,d=0;d<e.length;++d)if(r[(l=xp(e[d])).family]&&(l.family=r[l.family]),t.hasOwnProperty(l.family)){c=t[l.family];break}if(!(c=c||t[s]))throw new Error("Could not find a font-family for the rule '"+XE(l)+"' and default family '"+s+"'.");if(c=function(f,h){if(h[f])return h[f];var _=gp[f],b=_<=gp.normal?-1:1,v=WE(h,D_,_,b);if(!v)throw new Error("Could not find a matching font-stretch value for "+f);return v}(l.stretch,c),c=function(f,h){if(h[f])return h[f];for(var _=I_[f],b=0;b<_.length;++b)if(h[_[b]])return h[_[b]];throw new Error("Could not find a matching font-style for "+f)}(l.style,c),!(c=function(f,h){if(h[f])return h[f];if(f===400&&h[500])return h[500];if(f===500&&h[400])return h[400];var _=tD[f],b=WE(h,R_,_,f<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+f);return b}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+XE(l)+"'.");return c}function JE(t){return t.trimLeft()}function aD(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function rD(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var ch,ZE,QE,L0=["times"];(function(t){var e,n,s,r,l,c,d,f,h,_=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new f,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new c,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new c,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,n=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,f=this.internal.Matrix,h=new _}]);var b=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var k=M;Object.defineProperty(this,"pdf",{get:function(){return k}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(je){Y=!!je}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(je){Z=!!je}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(je){isNaN(je)||(fe=je)}});var Ne=0;Object.defineProperty(this,"posY",{get:function(){return Ne},set:function(je){isNaN(je)||(Ne=je)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(je){var ge;typeof je=="number"?ge=[je,je,je,je]:((ge=new Array(4))[0]=je[0],ge[1]=je.length>=2?je[1]:ge[0],ge[2]=je.length>=3?je[2]:ge[0],ge[3]=je.length>=4?je[3]:ge[1]),h.margin=ge}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(je){de=je}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(je){ye=je}});var Ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ue},set:function(je){Ue=je}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(je){je instanceof _&&(h=je)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(je){h.path=je}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(je){we=je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(je){var ge;ge=v(je),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(je){var ge=v(je);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(je){["butt","round","square"].indexOf(je)!==-1&&(this.ctx.lineCap=je,this.pdf.setLineCap(je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(je){isNaN(je)||(this.ctx.lineWidth=je,this.pdf.setLineWidth(je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(je){["bevel","round","miter"].indexOf(je)!==-1&&(this.ctx.lineJoin=je,this.pdf.setLineJoin(je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(je){isNaN(je)||(this.ctx.miterLimit=je,this.pdf.setMiterLimit(je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(je){this.ctx.textBaseline=je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(je){["right","end","center","left","start"].indexOf(je)!==-1&&(this.ctx.textAlign=je)}});var Ze=null;function Je(je,ge){if(Ze===null){var Fe=function(ut){var Pe=[];return Object.keys(ut).forEach(function(nt){ut[nt].forEach(function(it){var st=null;switch(it){case"bold":st={family:nt,weight:"bold"};break;case"italic":st={family:nt,style:"italic"};break;case"bolditalic":st={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":st={family:nt}}st!==null&&(st.ref={name:nt,style:it},Pe.push(st))})}),Pe}(je.getFontList());Ze=function(ut){for(var Pe={},nt=0;nt<ut.length;++nt){var it=xp(ut[nt]),st=it.family,yt=it.stretch,Pt=it.style,Rt=it.weight;Pe[st]=Pe[st]||{},Pe[st][yt]=Pe[st][yt]||{},Pe[st][yt][Pt]=Pe[st][yt][Pt]||{},Pe[st][yt][Pt][Rt]=it}return Pe}(Fe.concat(ge))}return Ze}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(je){Ze=null,Qe=je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(je){var ge;if(this.ctx.font=je,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(je))!==null){var Fe=ge[1];ge[2];var ut=ge[3],Pe=ge[4];ge[5];var nt=ge[6],it=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(it==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:it==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var st=function(We){var Lt,pe,vt=[],At=We.trim();if(At==="")return L0;if(At in KE)return[KE[At]];for(;At!=="";){switch(pe=null,Lt=(At=JE(At)).charAt(0)){case'"':case"'":pe=aD(At.substring(1),Lt);break;default:pe=rD(At)}if(pe===null||(vt.push(pe[0]),(At=JE(pe[1]))!==""&&At.charAt(0)!==","))return L0;At=At.replace(/^,/,"")}return vt}(nt);if(this.fontFaces){var yt=sD(Je(this.pdf,this.fontFaces),st.map(function(We){return{family:We,stretch:"normal",weight:ut,style:Fe}}));this.pdf.setFont(yt.ref.name,yt.ref.style)}else{var Pt="";(ut==="bold"||parseInt(ut,10)>=700||Fe==="bold")&&(Pt="bold"),Fe==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var Rt="",Ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Yt=0;Yt<st.length;Yt++){if(this.pdf.internal.getFont(st[Yt],Pt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=st[Yt];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(st[Yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=st[Yt],Pt="bold";else if(this.pdf.internal.getFont(st[Yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=st[Yt],Pt="normal";break}}if(Rt===""){for(var Be=0;Be<st.length;Be++)if(Ft[st[Be]]){Rt=Ft[st[Be]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(je){this.ctx.globalCompositeOperation=je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(je){this.ctx.globalAlpha=je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(je){this.ctx.lineDashOffset=je,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(je){this.ctx.lineDash=je,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(je){this.ctx.ignoreClearRect=!!je}})};b.prototype.setLineDash=function(M){this.lineDash=M},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){U.call(this,"fill",!1)},b.prototype.stroke=function(){U.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new c(M,k));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new c(M,k)},b.prototype.closePath=function(){var M=new c(0,0),k=0;for(k=this.path.length-1;k!==-1;k--)if(this.path[k].type==="begin"&&$s(this.path[k+1])==="object"&&typeof this.path[k+1].x=="number"){M=new c(this.path[k+1].x,this.path[k+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(M.x,M.y)},b.prototype.lineTo=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new c(M,k));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new c(Y.x,Y.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},b.prototype.quadraticCurveTo=function(M,k,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new c(Y,Z)),Ne=this.ctx.transform.applyToPoint(new c(M,k));this.path.push({type:"qct",x1:Ne.x,y1:Ne.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},b.prototype.bezierCurveTo=function(M,k,Y,Z,fe,Ne){if(isNaN(fe)||isNaN(Ne)||isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z))throw na.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new c(fe,Ne)),ye=this.ctx.transform.applyToPoint(new c(M,k)),Ue=this.ctx.transform.applyToPoint(new c(Y,Z));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:Ue.x,y2:Ue.y,x:de.x,y:de.y}),this.ctx.lastPoint=new c(de.x,de.y)},b.prototype.arc=function(M,k,Y,Z,fe,Ne){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z)||isNaN(fe))throw na.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ne=!!Ne,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new c(M,k));M=de.x,k=de.y;var ye=this.ctx.transform.applyToPoint(new c(0,Y)),Ue=this.ctx.transform.applyToPoint(new c(0,0));Y=Math.sqrt(Math.pow(ye.x-Ue.x,2)+Math.pow(ye.y-Ue.y,2))}Math.abs(fe-Z)>=2*Math.PI&&(Z=0,fe=2*Math.PI),this.path.push({type:"arc",x:M,y:k,radius:Y,startAngle:Z,endAngle:fe,counterclockwise:Ne})},b.prototype.arcTo=function(M,k,Y,Z,fe){throw new Error("arcTo not implemented.")},b.prototype.rect=function(M,k,Y,Z){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z))throw na.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,k),this.lineTo(M+Y,k),this.lineTo(M+Y,k+Z),this.lineTo(M,k+Z),this.lineTo(M,k),this.lineTo(M+Y,k),this.lineTo(M,k)},b.prototype.fillRect=function(M,k,Y,Z){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z))throw na.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,k,Y,Z),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},b.prototype.strokeRect=function(M,k,Y,Z){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z))throw na.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(M,k,Y,Z),this.stroke())},b.prototype.clearRect=function(M,k,Y,Z){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z))throw na.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,k,Y,Z))},b.prototype.save=function(M){M=typeof M!="boolean"||M;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(k),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new _(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},b.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(k),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(M){var k,Y,Z,fe;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))k=0,Y=0,Z=0,fe=0;else{var Ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(Ne!==null)k=parseInt(Ne[1]),Y=parseInt(Ne[2]),Z=parseInt(Ne[3]),fe=1;else if((Ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)k=parseInt(Ne[1]),Y=parseInt(Ne[2]),Z=parseInt(Ne[3]),fe=parseFloat(Ne[4]);else{if(fe=1,typeof M=="string"&&M.charAt(0)!=="#"){var de=new N_(M);M=de.ok?de.toHex():"#000000"}M.length===4?(k=M.substring(1,2),k+=k,Y=M.substring(2,3),Y+=Y,Z=M.substring(3,4),Z+=Z):(k=M.substring(1,3),Y=M.substring(3,5),Z=M.substring(5,7)),k=parseInt(k,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:k,g:Y,b:Z,a:fe,style:M}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(M,k,Y,Z){if(isNaN(k)||isNaN(Y)||typeof M!="string")throw na.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!y.call(this)){var fe=ue(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;H.call(this,{text:M,x:k,y:Y,scale:Ne,angle:fe,align:this.textAlign,maxWidth:Z})}},b.prototype.strokeText=function(M,k,Y,Z){if(isNaN(k)||isNaN(Y)||typeof M!="string")throw na.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){Z=isNaN(Z)?void 0:Z;var fe=ue(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;H.call(this,{text:M,x:k,y:Y,scale:Ne,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:Z})}},b.prototype.measureText=function(M){if(typeof M!="string")throw na.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var k=this.pdf,Y=this.pdf.internal.scaleFactor,Z=k.internal.getFontSize(),fe=k.getStringUnitWidth(M)*Z/k.internal.scaleFactor,Ne=function(de){var ye=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this};return new Ne({width:fe*=Math.round(96*Y/72*1e4)/1e4})},b.prototype.scale=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new f(M,0,0,k,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.rotate=function(M){if(isNaN(M))throw na.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var k=new f(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(k)},b.prototype.translate=function(M,k){if(isNaN(M)||isNaN(k))throw na.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new f(1,0,0,1,M,k);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.transform=function(M,k,Y,Z,fe,Ne){if(isNaN(M)||isNaN(k)||isNaN(Y)||isNaN(Z)||isNaN(fe)||isNaN(Ne))throw na.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new f(M,k,Y,Z,fe,Ne);this.ctx.transform=this.ctx.transform.multiply(de)},b.prototype.setTransform=function(M,k,Y,Z,fe,Ne){M=isNaN(M)?1:M,k=isNaN(k)?0:k,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,fe=isNaN(fe)?0:fe,Ne=isNaN(Ne)?0:Ne,this.ctx.transform=new f(M,k,Y,Z,fe,Ne)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(M,k,Y,Z,fe,Ne,de,ye,Ue){var we=this.pdf.getImageProperties(M),Ze=1,Je=1,Qe=1,je=1;Z!==void 0&&ye!==void 0&&(Qe=ye/Z,je=Ue/fe,Ze=we.width/Z*ye/Z,Je=we.height/fe*Ue/fe),Ne===void 0&&(Ne=k,de=Y,k=0,Y=0),Z!==void 0&&ye===void 0&&(ye=Z,Ue=fe),Z===void 0&&ye===void 0&&(ye=we.width,Ue=we.height);for(var ge,Fe=this.ctx.transform.decompose(),ut=ue(Fe.rotate.shx),Pe=new f,nt=(Pe=(Pe=(Pe=Pe.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale)).applyToRectangle(new d(Ne-k*Qe,de-Y*je,Z*Ze,fe*Je)),it=O.call(this,nt),st=[],yt=0;yt<it.length;yt+=1)st.indexOf(it[yt])===-1&&st.push(it[yt]);if(R(st),this.autoPaging)for(var Pt=st[0],Rt=st[st.length-1],Ft=Pt;Ft<Rt+1;Ft++){this.pdf.setPage(Ft);var Yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=Ft===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=Ft===1?0:We+(Ft-2)*Lt;if(this.ctx.clip_path.length!==0){var vt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(ge,this.posX+this.margin[3],-pe+Be+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=vt}var At=JSON.parse(JSON.stringify(nt));At=j([At],this.posX+this.margin[3],-pe+Be+this.ctx.prevPageLastElemOffset)[0];var Kt=(Ft>Pt||Ft<Rt)&&L.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,Lt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",At.x,At.y,At.w,At.h,null,null,ut),Kt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,ut)};var O=function(M,k,Y){var Z=[];k=k||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Z.push(Math.floor((M.y+fe)/Y)+1);break;case"arc":Z.push(Math.floor((M.y+fe-M.radius)/Y)+1),Z.push(Math.floor((M.y+fe+M.radius)/Y)+1);break;case"qct":var Ne=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Z.push(Math.floor((Ne.y+fe)/Y)+1),Z.push(Math.floor((Ne.y+Ne.h+fe)/Y)+1);break;case"bct":var de=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Z.push(Math.floor((de.y+fe)/Y)+1),Z.push(Math.floor((de.y+de.h+fe)/Y)+1);break;case"rect":Z.push(Math.floor((M.y+fe)/Y)+1),Z.push(Math.floor((M.y+M.h+fe)/Y)+1)}for(var ye=0;ye<Z.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ye];)I.call(this);return Z},I=function(){var M=this.fillStyle,k=this.strokeStyle,Y=this.font,Z=this.lineCap,fe=this.lineWidth,Ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=k,this.font=Y,this.lineCap=Z,this.lineWidth=fe,this.lineJoin=Ne},j=function(M,k,Y){for(var Z=0;Z<M.length;Z++)switch(M[Z].type){case"bct":M[Z].x2+=k,M[Z].y2+=Y;case"qct":M[Z].x1+=k,M[Z].y1+=Y;case"mt":case"lt":case"arc":default:M[Z].x+=k,M[Z].y+=Y}return M},R=function(M){return M.sort(function(k,Y){return k-Y})},U=function(M,k){for(var Y,Z,fe=this.fillStyle,Ne=this.strokeStyle,de=this.lineCap,ye=this.lineWidth,Ue=Math.abs(ye*this.ctx.transform.scaleX),we=this.lineJoin,Ze=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),Qe=[],je=0;je<Je.length;je++)if(Je[je].x!==void 0)for(var ge=O.call(this,Je[je]),Fe=0;Fe<ge.length;Fe+=1)Qe.indexOf(ge[Fe])===-1&&Qe.push(ge[Fe]);for(var ut=0;ut<Qe.length;ut++)for(;this.pdf.internal.getNumberOfPages()<Qe[ut];)I.call(this);if(R(Qe),this.autoPaging)for(var Pe=Qe[0],nt=Qe[Qe.length-1],it=Pe;it<nt+1;it++){this.pdf.setPage(it),this.fillStyle=fe,this.strokeStyle=Ne,this.lineCap=de,this.lineWidth=Ue,this.lineJoin=we;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=it===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ft=it===1?0:Pt+(it-2)*Rt;if(this.ctx.clip_path.length!==0){var Yt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Y,this.posX+this.margin[3],-Ft+yt+this.ctx.prevPageLastElemOffset),te.call(this,M,!0),this.path=Yt}if(Z=JSON.parse(JSON.stringify(Ze)),this.path=j(Z,this.posX+this.margin[3],-Ft+yt+this.ctx.prevPageLastElemOffset),k===!1||it===0){var Be=(it>Pe||it<nt)&&L.call(this);Be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Rt,null).clip().discardPath()),te.call(this,M,k),Be&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}else this.lineWidth=Ue,te.call(this,M,k),this.lineWidth=ye;this.path=Ze},te=function(M,k){if((M!=="stroke"||k||!C.call(this))&&(M==="stroke"||k||!y.call(this))){for(var Y,Z,fe=[],Ne=this.path,de=0;de<Ne.length;de++){var ye=Ne[de];switch(ye.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:ye,deltas:[],abs:[]});break;case"lt":var Ue=fe.length;if(Ne[de-1]&&!isNaN(Ne[de-1].x)&&(Y=[ye.x-Ne[de-1].x,ye.y-Ne[de-1].y],Ue>0)){for(;Ue>=0;Ue--)if(fe[Ue-1].close!==!0&&fe[Ue-1].begin!==!0){fe[Ue-1].deltas.push(Y),fe[Ue-1].abs.push(ye);break}}break;case"bct":Y=[ye.x1-Ne[de-1].x,ye.y1-Ne[de-1].y,ye.x2-Ne[de-1].x,ye.y2-Ne[de-1].y,ye.x-Ne[de-1].x,ye.y-Ne[de-1].y],fe[fe.length-1].deltas.push(Y);break;case"qct":var we=Ne[de-1].x+2/3*(ye.x1-Ne[de-1].x),Ze=Ne[de-1].y+2/3*(ye.y1-Ne[de-1].y),Je=ye.x+2/3*(ye.x1-ye.x),Qe=ye.y+2/3*(ye.y1-ye.y),je=ye.x,ge=ye.y;Y=[we-Ne[de-1].x,Ze-Ne[de-1].y,Je-Ne[de-1].x,Qe-Ne[de-1].y,je-Ne[de-1].x,ge-Ne[de-1].y],fe[fe.length-1].deltas.push(Y);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(ye)}}Z=k?null:M==="stroke"?"stroke":"fill";for(var Fe=!1,ut=0;ut<fe.length;ut++)if(fe[ut].arc)for(var Pe=fe[ut].abs,nt=0;nt<Pe.length;nt++){var it=Pe[nt];it.type==="arc"?J.call(this,it.x,it.y,it.radius,it.startAngle,it.endAngle,it.counterclockwise,void 0,k,!Fe):re.call(this,it.x,it.y),Fe=!0}else if(fe[ut].close===!0)this.pdf.internal.out("h"),Fe=!1;else if(fe[ut].begin!==!0){var st=fe[ut].start.x,yt=fe[ut].start.y;K.call(this,fe[ut].deltas,st,yt),Fe=!0}Z&&oe.call(this,Z),k&&xe.call(this)}},Q=function(M){var k=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=k*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Y;case"top":return M+k-Y;case"hanging":return M+k-2*Y;case"middle":return M+k/2-Y;case"ideographic":return M;case"alphabetic":default:return M}},ne=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(k,Y){this.colorStops.push([k,Y])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(M,k,Y,Z,fe,Ne,de,ye,Ue){for(var we=G.call(this,Y,Z,fe,Ne),Ze=0;Ze<we.length;Ze++){var Je=we[Ze];Ze===0&&(Ue?F.call(this,Je.x1+M,Je.y1+k):re.call(this,Je.x1+M,Je.y1+k)),Te.call(this,M,k,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}ye?xe.call(this):oe.call(this,de)},oe=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xe=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(M,k){this.pdf.internal.out(n(M)+" "+s(k)+" m")},H=function(M){var k;switch(M.align){case"right":case"end":k="right";break;case"center":k="center";break;case"left":case"start":default:k="left"}var Y=this.pdf.getTextDimensions(M.text),Z=Q.call(this,M.y),fe=ne.call(this,Z)-Y.h,Ne=this.ctx.transform.applyToPoint(new c(M.x,Z)),de=this.ctx.transform.decompose(),ye=new f;ye=(ye=(ye=ye.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var Ue,we,Ze,Je=this.ctx.transform.applyToRectangle(new d(M.x,Z,Y.w,Y.h)),Qe=ye.applyToRectangle(new d(M.x,fe,Y.w,Y.h)),je=O.call(this,Qe),ge=[],Fe=0;Fe<je.length;Fe+=1)ge.indexOf(je[Fe])===-1&&ge.push(je[Fe]);if(R(ge),this.autoPaging)for(var ut=ge[0],Pe=ge[ge.length-1],nt=ut;nt<Pe+1;nt++){this.pdf.setPage(nt);var it=nt===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[2],Pt=yt-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],Ft=Rt-this.margin[3],Yt=nt===1?0:st+(nt-2)*Pt;if(this.ctx.clip_path.length!==0){var Be=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Ue,this.posX+this.margin[3],-1*Yt+it),te.call(this,"fill",!0),this.path=Be}var We=j([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-Yt+it+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*M.scale),Ze=this.lineWidth,this.lineWidth=Ze*M.scale);var Lt=this.autoPaging!=="text";if(Lt||We.y+We.h<=yt){if(Lt||We.y>=it&&We.x<=Rt){var pe=Lt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Rt-We.x)[0],vt=j([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-Yt+it+this.ctx.prevPageLastElemOffset)[0],At=Lt&&(nt>ut||nt<Pe)&&L.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,Pt,null).clip().discardPath()),this.pdf.text(pe,vt.x,vt.y,{angle:M.angle,align:k,renderingMode:M.renderingMode}),At&&this.pdf.restoreGraphicsState()}}else We.y<yt&&(this.ctx.prevPageLastElemOffset+=yt-We.y);M.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Ze)}else M.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*M.scale),Ze=this.lineWidth,this.lineWidth=Ze*M.scale),this.pdf.text(M.text,Ne.x+this.posX,Ne.y+this.posY,{angle:M.angle,align:k,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Ze)},re=function(M,k,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(n(M+Y)+" "+s(k+Z)+" l")},K=function(M,k,Y){return this.pdf.lines(M,k,Y,null,null)},Te=function(M,k,Y,Z,fe,Ne,de,ye){this.pdf.internal.out([e(r(Y+M)),e(l(Z+k)),e(r(fe+M)),e(l(Ne+k)),e(r(de+M)),e(l(ye+k)),"c"].join(" "))},G=function(M,k,Y,Z){for(var fe=2*Math.PI,Ne=Math.PI/2;k>Y;)k-=fe;var de=Math.abs(Y-k);de<fe&&Z&&(de=fe-de);for(var ye=[],Ue=Z?-1:1,we=k;de>1e-5;){var Ze=we+Ue*Math.min(de,Ne);ye.push(he.call(this,M,we,Ze)),de-=Math.abs(Ze-we),we=Ze}return ye},he=function(M,k,Y){var Z=(Y-k)/2,fe=M*Math.cos(Z),Ne=M*Math.sin(Z),de=fe,ye=-Ne,Ue=de*de+ye*ye,we=Ue+de*fe+ye*Ne,Ze=4/3*(Math.sqrt(2*Ue*we)-we)/(de*Ne-ye*fe),Je=de-Ze*ye,Qe=ye+Ze*de,je=Je,ge=-Qe,Fe=Z+k,ut=Math.cos(Fe),Pe=Math.sin(Fe);return{x1:M*Math.cos(k),y1:M*Math.sin(k),x2:Je*ut-Qe*Pe,y2:Je*Pe+Qe*ut,x3:je*ut-ge*Pe,y3:je*Pe+ge*ut,x4:M*Math.cos(Y),y4:M*Math.sin(Y)}},ue=function(M){return 180*M/Math.PI},ae=function(M,k,Y,Z,fe,Ne){var de=M+.5*(Y-M),ye=k+.5*(Z-k),Ue=fe+.5*(Y-fe),we=Ne+.5*(Z-Ne),Ze=Math.min(M,fe,de,Ue),Je=Math.max(M,fe,de,Ue),Qe=Math.min(k,Ne,ye,we),je=Math.max(k,Ne,ye,we);return new d(Ze,Qe,Je-Ze,je-Qe)},V=function(M,k,Y,Z,fe,Ne,de,ye){var Ue,we,Ze,Je,Qe,je,ge,Fe,ut,Pe,nt,it,st,yt,Pt=Y-M,Rt=Z-k,Ft=fe-Y,Yt=Ne-Z,Be=de-fe,We=ye-Ne;for(we=0;we<41;we++)ut=(ge=(Ze=M+(Ue=we/40)*Pt)+Ue*((Qe=Y+Ue*Ft)-Ze))+Ue*(Qe+Ue*(fe+Ue*Be-Qe)-ge),Pe=(Fe=(Je=k+Ue*Rt)+Ue*((je=Z+Ue*Yt)-Je))+Ue*(je+Ue*(Ne+Ue*We-je)-Fe),we==0?(nt=ut,it=Pe,st=ut,yt=Pe):(nt=Math.min(nt,ut),it=Math.min(it,Pe),st=Math.max(st,ut),yt=Math.max(yt,Pe));return new d(Math.round(nt),Math.round(it),Math.round(st-nt),Math.round(yt-it))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,k,Y=(M=this.ctx.lineDash,k=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:k}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(yn.API),function(t){var e=function(l){var c,d,f,h,_,b,v,y,C,L;for(d=[],f=0,h=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;h>f;f+=4)(_=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(b=(_=((_=((_=((_=(_-(L=_%85))/85)-(C=_%85))/85)-(y=_%85))/85)-(v=_%85))/85)%85,d.push(b+33,v+33,y+33,C+33,L+33)):d.push(122);return function(O,I){for(var j=I;j>0;j--)O.pop()}(d,c.length),String.fromCharCode.apply(String,d)+"~>"},n=function(l){var c,d,f,h,_,b=String,v="length",y=255,C="charCodeAt",L="slice",O="replace";for(l[L](-2),l=l[L](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),f=[],h=0,_=(l+=c="uuuuu"[L](l[v]%5||5))[v];_>h;h+=5)d=52200625*(l[C](h)-33)+614125*(l[C](h+1)-33)+7225*(l[C](h+2)-33)+85*(l[C](h+3)-33)+(l[C](h+4)-33),f.push(y&d>>24,y&d>>16,y&d>>8,y&d);return function(I,j){for(var R=j;R>0;R--)I.pop()}(f,c[v]),b.fromCharCode.apply(b,f)},s=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var d="",f=0;f<l.length;f+=2)d+=String.fromCharCode("0x"+(l[f]+l[f+1]));return d},r=function(l){for(var c=new Uint8Array(l.length),d=l.length;d--;)c[d]=l.charCodeAt(d);return l=(c=dp(c)).reduce(function(f,h){return f+String.fromCharCode(h)},"")};t.processDataByFilters=function(l,c){var d=0,f=l||"",h=[];for(typeof(c=c||[])=="string"&&(c=[c]),d=0;d<c.length;d+=1)switch(c[d]){case"ASCII85Decode":case"/ASCII85Decode":f=n(f),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=s(f),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(_){return("0"+_.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=r(f),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[d]+'" is not implemented')}return{data:f,reverseChain:h.reverse().join(" ")}}}(yn.API),function(t){t.loadFile=function(e,n,s){return function(r,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=function(f,h,_){var b=new XMLHttpRequest,v=0,y=function(C){var L=C.length,O=[],I=String.fromCharCode;for(v=0;v<L;v+=1)O.push(I(255&C.charCodeAt(v)));return O.join("")};if(b.open("GET",f,!h),b.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(b.onload=function(){b.status===200?_(y(this.responseText)):_(void 0)}),b.send(null),h&&b.status===200)return y(b.responseText)}(r,l,c)}catch{}return d}(e,n,s)},t.loadImageFile=t.loadFile}(yn.API),function(t){function e(){return(Dn.html2canvas?Promise.resolve(Dn.html2canvas):ip(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(Dn.DOMPurify?Promise.resolve(Dn.DOMPurify):ip(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var d=$s(c);return d==="undefined"?"undefined":d==="string"||c instanceof String?"string":d==="number"||c instanceof Number?"number":d==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":d==="object"?"object":"unknown"},r=function(c,d){var f=document.createElement(c);for(var h in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[h]=d.style[h];return f},l=function c(d){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),h=c.convert(Promise.resolve(),f);return h=(h=h.setProgress(1,c,1,[c])).set(d)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,d){return c.__proto__=d||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,d){return this.then(function(){switch(d=d||function(f){switch(s(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(n).then(function(f){return this.set({src:r("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=function f(h,_){for(var b=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)_!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||b.appendChild(f(v,_));return h.nodeType===1&&(h.nodeName==="CANVAS"?(b.width=h.width,b.height=h.height,b.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(b.value=h.value),b.addEventListener("load",function(){b.scrollTop=h.scrollTop,b.scrollLeft=h.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(d){var f=this.opt.jsPDF,h=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=h,h)for(var v=0;v<h.length;++v){var y=h[v],C=y.src.find(function(L){return L.format==="truetype"});C&&f.addFont(C.url,y.ref.name,y.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,f.context2d.save(!0),d(this.prop.container,b)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,d):this.outputPdf(c,d)},l.prototype.outputPdf=function(c,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,d)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(s(c)!=="object")return this;var d=Object.keys(c||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(d)})},l.prototype.get=function(c,d){return this.then(function(){var f=c in l.template.prop?this.prop[c]:this.opt[c];return d?d(f):f})},l.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function d(f,h){return Math.floor(f*h/72*96)}return this.then(function(){(c=c||yn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:d(c.inner.width,c.k),height:d(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,d,f,h){return c!=null&&(this.progress.val=c),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,d,f,h){return this.setProgress(c?this.progress.val+c:null,d||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},l.prototype.then=function(c,d){var f=this;return this.thenCore(c,d,function(h,_){return f.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(b){return f.updateProgress(null,h),b}).then(h,_).then(function(b){return f.updateProgress(1),b})})},l.prototype.thenCore=function(c,d,f){f=f||Promise.prototype.then,c&&(c=c.bind(this)),d&&(d=d.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),_=f.call(h,c,d);return l.convert(_,this.__proto__)},l.prototype.thenExternal=function(c,d){return Promise.prototype.then.call(this,c,d)},l.prototype.thenList=function(c){var d=this;return c.forEach(function(f){d=d.thenCore(f)}),d},l.prototype.catch=function(c){c&&(c=c.bind(this));var d=Promise.prototype.catch.call(this,c);return l.convert(d,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,yn.getPageSize=function(c,d,f){if($s(c)==="object"){var h=c;c=h.orientation,d=h.unit||d,f=h.format||f}d=d||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var _,b=(""+f).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+d}var y,C=0,L=0;if(v.hasOwnProperty(b))C=v[b][1]/_,L=v[b][0]/_;else try{C=f[1],L=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",L>C&&(y=L,L=C,C=y);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",C>L&&(y=L,L=C,C=y)}return{width:L,height:C,unit:d,k:_,orientation:c}},t.html=function(c,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(xp):null;var f=new l(d);return d.worker?f:f.from(c).doCallback()}}(yn.API),yn.API.addJS=function(t){return QE=t,this.internal.events.subscribe("postPutResources",function(){ch=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ch+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+QE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ch!==void 0&&ZE!==void 0&&this.internal.out("/Names <</JavaScript "+ch+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),l=0;l<r.length;l++){var c=r[l],d=s.exec(c);if(d!=null){var f=d[1];n.internal.newObjectDeferredBegin(f,!1)}n.internal.write(c)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,_=[];for(l=0;l<h;l++){var b=n.internal.newObject();_.push(b);var v=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var y=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<_.length;l++)n.internal.write("(page_"+(l+1)+")"+_[l]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+y+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(s,r,l){var c={title:r,options:l,children:[]};return s==null&&(s=this.root),s.children.push(c),c},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(s){s.id=n.internal.newObjectDeferred();for(var r=0;r<s.children.length;r++)this.genIds_r(s.children[r])},n.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},n.outline.renderItems=function(s){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<s.children.length;l++){var c=s.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(s)),l>0&&this.line("/Prev "+this.makeRef(s.children[l-1])),l<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var f=n.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var h=0;h<s.children.length;h++)this.renderItems(s.children[h])},n.outline.line=function(s){this.ctx.val+=s+`\r
`},n.outline.makeRef=function(s){return s.id+" 0 R"},n.outline.makeString=function(s){return"("+n.internal.pdfEscape(s)+")"},n.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(s,r){for(var l=0;l<r.children.length;l++)s.count++,this.count_r(s,r.children[l]);return s.count}}])}(yn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,s,r,l,c,d){var f,h=this.decode.DCT_DECODE,_=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=c||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(f=function(b){for(var v,y=256*b.charCodeAt(4)+b.charCodeAt(5),C=b.length,L={width:0,height:0,numcomponents:1},O=4;O<C;O+=2){if(O+=y,e.indexOf(b.charCodeAt(O+1))!==-1){v=256*b.charCodeAt(O+5)+b.charCodeAt(O+6),L={width:256*b.charCodeAt(O+7)+b.charCodeAt(O+8),height:v,numcomponents:b.charCodeAt(O+9)};break}y=256*b.charCodeAt(O+2)+b.charCodeAt(O+3)}return L}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}_={data:n,width:f.width,height:f.height,colorSpace:d,bitsPerComponent:8,filter:h,index:s,alias:r}}return _}}(yn.API);var wu,uh,e2,t2,n2,iD=function(){var t,e,n;function s(l){var c,d,f,h,_,b,v,y,C,L,O,I,j,R;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(c=this.readUInt32(),C=(function(){var U,te;for(te=[],U=0;U<4;++U)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},_=this.readUInt16(),h=this.readUInt16()||100,b.delay=1e3*_/h,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,c-=4),l=(b!=null?b.data:void 0)||this.imgData,I=0;0<=c?I<c:I>c;0<=c?++I:--I)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((L=f-this.transparency.indexed.length)>0)for(j=0;0<=L?j<L:j>L;0<=L?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":v=(O=this.read(c)).indexOf(0),y=String.fromCharCode.apply(String,O.slice(0,v)),this.text[y]=String.fromCharCode.apply(String,O.slice(v+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,d=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*d,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(l){var c,d;for(d=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)d.push(this.data[this.pos++]);return d},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,d=new Uint8Array(this.width*this.height*c),f=0,h=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function _(b,v,y,C){var L,O,I,j,R,U,te,Q,ne,J,oe,xe,F,H,re,K,Te,G,he,ue,ae,V=Math.ceil((h.width-b)/y),ce=Math.ceil((h.height-v)/C),M=h.width==V&&h.height==ce;for(H=c*V,xe=M?d:new Uint8Array(H*ce),U=l.length,F=0,O=0;F<ce&&f<U;){switch(l[f++]){case 0:for(j=Te=0;Te<H;j=Te+=1)xe[O++]=l[f++];break;case 1:for(j=G=0;G<H;j=G+=1)L=l[f++],R=j<c?0:xe[O-c],xe[O++]=(L+R)%256;break;case 2:for(j=he=0;he<H;j=he+=1)L=l[f++],I=(j-j%c)/c,re=F&&xe[(F-1)*H+I*c+j%c],xe[O++]=(re+L)%256;break;case 3:for(j=ue=0;ue<H;j=ue+=1)L=l[f++],I=(j-j%c)/c,R=j<c?0:xe[O-c],re=F&&xe[(F-1)*H+I*c+j%c],xe[O++]=(L+Math.floor((R+re)/2))%256;break;case 4:for(j=ae=0;ae<H;j=ae+=1)L=l[f++],I=(j-j%c)/c,R=j<c?0:xe[O-c],F===0?re=K=0:(re=xe[(F-1)*H+I*c+j%c],K=I&&xe[(F-1)*H+(I-1)*c+j%c]),te=R+re-K,Q=Math.abs(te-R),J=Math.abs(te-re),oe=Math.abs(te-K),ne=Q<=J&&Q<=oe?R:J<=oe?re:K,xe[O++]=(L+ne)%256;break;default:throw new Error("Invalid filter algorithm: "+l[f-1])}if(!M){var k=((v+F*C)*h.width+b)*c,Y=F*H;for(j=0;j<V;j+=1){for(var Z=0;Z<c;Z+=1)d[k++]=xe[Y++];k+=(y-1)*c}}F++}}return l=BI(l),h.interlaceMethod==1?(_(0,0,8,8),_(4,0,8,8),_(0,4,4,8),_(2,0,4,4),_(0,2,2,4),_(1,0,2,2),_(0,1,1,2)):_(0,0,1,1),d},s.prototype.decodePalette=function(){var l,c,d,f,h,_,b,v,y;for(d=this.palette,_=this.transparency.indexed||[],h=new Uint8Array((_.length||0)+d.length),f=0,l=0,c=b=0,v=d.length;b<v;c=b+=3)h[f++]=d[c],h[f++]=d[c+1],h[f++]=d[c+2],h[f++]=(y=_[l++])!=null?y:255;return h},s.prototype.copyToImageData=function(l,c){var d,f,h,_,b,v,y,C,L,O,I;if(f=this.colors,L=null,d=this.hasAlphaChannel,this.palette.length&&(L=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),f=4,d=!0),C=(h=l.data||l).length,b=L||c,_=v=0,f===1)for(;_<C;)y=L?4*c[_/4]:v,O=b[y++],h[_++]=O,h[_++]=O,h[_++]=O,h[_++]=d?b[y++]:255,v=y;else for(;_<C;)y=L?4*c[_/4]:v,h[_++]=b[y++],h[_++]=b[y++],h[_++]=b[y++],h[_++]=d?b[y++]:255,v=y},s.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var r=function(){if(Object.prototype.toString.call(Dn)==="[object Window]"){try{e=Dn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),t=function(l){var c;if(r()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(l){var c,d,f,h,_,b,v,y;if(this.animation){for(y=[],d=_=0,b=(v=this.animation.frames).length;_<b;d=++_)c=v[d],f=l.createImageData(c.width,c.height),h=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(f,h),c.imageData=f,y.push(c.image=t(f));return y}},s.prototype.renderFrame=function(l,c){var d,f,h;return d=(f=this.animation.frames)[c],h=f[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?l.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&l.putImageData(h.imageData,h.xOffset,h.yOffset),d.blendOp===0&&l.clearRect(d.xOffset,d.yOffset,d.width,d.height),l.drawImage(d.image,d.xOffset,d.yOffset)},s.prototype.animate=function(l){var c,d,f,h,_,b,v=this;return d=0,b=this.animation,h=b.numFrames,f=b.frames,_=b.numPlays,(c=function(){var y,C;if(y=d++%h,C=f[y],v.renderFrame(l,y),h>1&&d/h<_)return v.animation._timeout=setTimeout(c,C.delay)})()},s.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},s.prototype.render=function(l){var c,d;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(d=c.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),c.putImageData(d,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function oD(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,s=t[e++]|t[e++]<<8,r=t[e++],l=r>>7,c=1<<(7&r)+1;t[e++],t[e++];var d=null,f=null;l&&(d=e,f=c,e+=3*c);var h=!0,_=[],b=0,v=null,y=0,C=null;for(this.width=n,this.height=s;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var L=t[e++];b=t[e++]|t[e++]<<8,v=t[e++],(1&L)==0&&(v=null),y=L>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var O=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,U=t[e++],te=U>>6&1,Q=1<<(7&U)+1,ne=d,J=f,oe=!1;U>>7&&(oe=!0,ne=e,J=Q,e+=3*Q);var xe=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}_.push({x:O,y:I,width:j,height:R,has_local_palette:oe,palette_offset:ne,palette_size:J,data_offset:xe,data_length:e-xe,transparent_index:v,interlaced:!!te,delay:b,disposal:y});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return C},this.frameInfo=function(H){if(H<0||H>=_.length)throw new Error("Frame index out of range.");return _[H]},this.decodeAndBlitFrameBGRA=function(H,re){var K=this.frameInfo(H),Te=K.width*K.height,G=new Uint8Array(Te);s2(t,K.data_offset,G,Te);var he=K.palette_offset,ue=K.transparent_index;ue===null&&(ue=256);var ae=K.width,V=n-ae,ce=ae,M=4*(K.y*n+K.x),k=4*((K.y+K.height)*n+K.x),Y=M,Z=4*V;K.interlaced===!0&&(Z+=4*n*7);for(var fe=8,Ne=0,de=G.length;Ne<de;++Ne){var ye=G[Ne];if(ce===0&&(ce=ae,(Y+=Z)>=k&&(Z=4*V+4*n*(fe-1),Y=M+(ae+V)*(fe<<1),fe>>=1)),ye===ue)Y+=4;else{var Ue=t[he+3*ye],we=t[he+3*ye+1],Ze=t[he+3*ye+2];re[Y++]=Ze,re[Y++]=we,re[Y++]=Ue,re[Y++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(H,re){var K=this.frameInfo(H),Te=K.width*K.height,G=new Uint8Array(Te);s2(t,K.data_offset,G,Te);var he=K.palette_offset,ue=K.transparent_index;ue===null&&(ue=256);var ae=K.width,V=n-ae,ce=ae,M=4*(K.y*n+K.x),k=4*((K.y+K.height)*n+K.x),Y=M,Z=4*V;K.interlaced===!0&&(Z+=4*n*7);for(var fe=8,Ne=0,de=G.length;Ne<de;++Ne){var ye=G[Ne];if(ce===0&&(ce=ae,(Y+=Z)>=k&&(Z=4*V+4*n*(fe-1),Y=M+(ae+V)*(fe<<1),fe>>=1)),ye===ue)Y+=4;else{var Ue=t[he+3*ye],we=t[he+3*ye+1],Ze=t[he+3*ye+2];re[Y++]=Ue,re[Y++]=we,re[Y++]=Ze,re[Y++]=255}--ce}}}function s2(t,e,n,s){for(var r=t[e++],l=1<<r,c=l+1,d=c+1,f=r+1,h=(1<<f)-1,_=0,b=0,v=0,y=t[e++],C=new Int32Array(4096),L=null;;){for(;_<16&&y!==0;)b|=t[e++]<<_,_+=8,y===1?y=t[e++]:--y;if(_<f)break;var O=b&h;if(b>>=f,_-=f,O!==l){if(O===c)break;for(var I=O<d?O:L,j=0,R=I;R>l;)R=C[R]>>8,++j;var U=R;if(v+j+(I!==O?1:0)>s)return void na.log("Warning, gif stream longer than expected.");n[v++]=U;var te=v+=j;for(I!==O&&(n[v++]=U),R=I;j--;)R=C[R],n[--te]=255&R,R>>=8;L!==null&&d<4096&&(C[d++]=L<<8|U,d>=h+1&&f<12&&(++f,h=h<<1|1)),L=O}else d=c+1,h=(1<<(f=r+1))-1,L=null}return v!==s&&na.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function w0(t){var e,n,s,r,l,c=Math.floor,d=new Array(64),f=new Array(64),h=new Array(64),_=new Array(64),b=new Array(65535),v=new Array(65535),y=new Array(64),C=new Array(64),L=[],O=0,I=7,j=new Array(64),R=new Array(64),U=new Array(64),te=new Array(256),Q=new Array(2048),ne=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function G(M,k){for(var Y=0,Z=0,fe=new Array,Ne=1;Ne<=16;Ne++){for(var de=1;de<=M[Ne];de++)fe[k[Z]]=[],fe[k[Z]][0]=Y,fe[k[Z]][1]=Ne,Z++,Y++;Y*=2}return fe}function he(M){for(var k=M[0],Y=M[1]-1;Y>=0;)k&1<<Y&&(O|=1<<I),Y--,--I<0&&(O==255?(ue(255),ue(0)):ue(O),I=7,O=0)}function ue(M){L.push(M)}function ae(M){ue(M>>8&255),ue(255&M)}function V(M,k,Y,Z,fe){for(var Ne,de=fe[0],ye=fe[240],Ue=function(Pe,nt){var it,st,yt,Pt,Rt,Ft,Yt,Be,We,Lt,pe=0;for(We=0;We<8;++We){it=Pe[pe],st=Pe[pe+1],yt=Pe[pe+2],Pt=Pe[pe+3],Rt=Pe[pe+4],Ft=Pe[pe+5],Yt=Pe[pe+6];var vt=it+(Be=Pe[pe+7]),At=it-Be,Kt=st+Yt,Gt=st-Yt,xn=yt+Ft,rs=yt-Ft,Cn=Pt+Rt,Ws=Pt-Rt,Un=vt+Cn,js=vt-Cn,ln=Kt+xn,ls=Kt-xn;Pe[pe]=Un+ln,Pe[pe+4]=Un-ln;var un=.707106781*(ls+js);Pe[pe+2]=js+un,Pe[pe+6]=js-un;var Mn=.382683433*((Un=Ws+rs)-(ls=Gt+At)),qa=.5411961*Un+Mn,gs=1.306562965*ls+Mn,ca=.707106781*(ln=rs+Gt),Nn=At+ca,Xt=At-ca;Pe[pe+5]=Xt+qa,Pe[pe+3]=Xt-qa,Pe[pe+1]=Nn+gs,Pe[pe+7]=Nn-gs,pe+=8}for(pe=0,We=0;We<8;++We){it=Pe[pe],st=Pe[pe+8],yt=Pe[pe+16],Pt=Pe[pe+24],Rt=Pe[pe+32],Ft=Pe[pe+40],Yt=Pe[pe+48];var Ln=it+(Be=Pe[pe+56]),kn=it-Be,Fn=st+Yt,Rn=st-Yt,_s=yt+Ft,hs=yt-Ft,er=Pt+Rt,Ca=Pt-Rt,En=Ln+er,bs=Ln-er,Qt=Fn+_s,Ls=Fn-_s;Pe[pe]=En+Qt,Pe[pe+32]=En-Qt;var Ts=.707106781*(Ls+bs);Pe[pe+16]=bs+Ts,Pe[pe+48]=bs-Ts;var $n=.382683433*((En=Ca+hs)-(Ls=Rn+kn)),La=.5411961*En+$n,ua=1.306562965*Ls+$n,Bs=.707106781*(Qt=hs+Rn),ms=kn+Bs,wa=kn-Bs;Pe[pe+40]=wa+La,Pe[pe+24]=wa-La,Pe[pe+8]=ms+ua,Pe[pe+56]=ms-ua,pe++}for(We=0;We<64;++We)Lt=Pe[We]*nt[We],y[We]=Lt>0?Lt+.5|0:Lt-.5|0;return y}(M,k),we=0;we<64;++we)C[ne[we]]=Ue[we];var Ze=C[0]-Y;Y=C[0],Ze==0?he(Z[0]):(he(Z[v[Ne=32767+Ze]]),he(b[Ne]));for(var Je=63;Je>0&&C[Je]==0;)Je--;if(Je==0)return he(de),Y;for(var Qe,je=1;je<=Je;){for(var ge=je;C[je]==0&&je<=Je;)++je;var Fe=je-ge;if(Fe>=16){Qe=Fe>>4;for(var ut=1;ut<=Qe;++ut)he(ye);Fe&=15}Ne=32767+C[je],he(fe[(Fe<<4)+v[Ne]]),he(b[Ne]),je++}return Je!=63&&he(de),Y}function ce(M){M=Math.min(Math.max(M,1),100),l!=M&&(function(k){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var fe=c((Y[Z]*k+50)/100);fe=Math.min(Math.max(fe,1),255),d[ne[Z]]=fe}for(var Ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var ye=c((Ne[de]*k+50)/100);ye=Math.min(Math.max(ye,1),255),f[ne[de]]=ye}for(var Ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Ze=0;Ze<8;Ze++)for(var Je=0;Je<8;Je++)h[we]=1/(d[ne[we]]*Ue[Ze]*Ue[Je]*8),_[we]=1/(f[ne[we]]*Ue[Ze]*Ue[Je]*8),we++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),l=M)}this.encode=function(M,k){k&&ce(k),L=new Array,O=0,I=7,ae(65496),ae(65504),ae(16),ue(74),ue(70),ue(73),ue(70),ue(0),ue(1),ue(1),ue(0),ae(1),ae(1),ue(0),ue(0),function(){ae(65499),ae(132),ue(0);for(var st=0;st<64;st++)ue(d[st]);ue(1);for(var yt=0;yt<64;yt++)ue(f[yt])}(),function(st,yt){ae(65472),ae(17),ue(8),ae(yt),ae(st),ue(3),ue(1),ue(17),ue(0),ue(2),ue(17),ue(1),ue(3),ue(17),ue(1)}(M.width,M.height),function(){ae(65476),ae(418),ue(0);for(var st=0;st<16;st++)ue(J[st+1]);for(var yt=0;yt<=11;yt++)ue(oe[yt]);ue(16);for(var Pt=0;Pt<16;Pt++)ue(xe[Pt+1]);for(var Rt=0;Rt<=161;Rt++)ue(F[Rt]);ue(1);for(var Ft=0;Ft<16;Ft++)ue(H[Ft+1]);for(var Yt=0;Yt<=11;Yt++)ue(re[Yt]);ue(17);for(var Be=0;Be<16;Be++)ue(K[Be+1]);for(var We=0;We<=161;We++)ue(Te[We])}(),ae(65498),ae(12),ue(3),ue(1),ue(0),ue(2),ue(17),ue(3),ue(17),ue(0),ue(63),ue(0);var Y=0,Z=0,fe=0;O=0,I=7,this.encode.displayName="_encode_";for(var Ne,de,ye,Ue,we,Ze,Je,Qe,je,ge=M.data,Fe=M.width,ut=M.height,Pe=4*Fe,nt=0;nt<ut;){for(Ne=0;Ne<Pe;){for(we=Pe*nt+Ne,Je=-1,Qe=0,je=0;je<64;je++)Ze=we+(Qe=je>>3)*Pe+(Je=4*(7&je)),nt+Qe>=ut&&(Ze-=Pe*(nt+1+Qe-ut)),Ne+Je>=Pe&&(Ze-=Ne+Je-Pe+4),de=ge[Ze++],ye=ge[Ze++],Ue=ge[Ze++],j[je]=(Q[de]+Q[ye+256>>0]+Q[Ue+512>>0]>>16)-128,R[je]=(Q[de+768>>0]+Q[ye+1024>>0]+Q[Ue+1280>>0]>>16)-128,U[je]=(Q[de+1280>>0]+Q[ye+1536>>0]+Q[Ue+1792>>0]>>16)-128;Y=V(j,h,Y,e,s),Z=V(R,_,Z,n,r),fe=V(U,_,fe,n,r),Ne+=32}nt+=8}if(I>=0){var it=[];it[1]=I+1,it[0]=(1<<I+1)-1,he(it)}return ae(65497),new Uint8Array(L)},t=t||50,function(){for(var M=String.fromCharCode,k=0;k<256;k++)te[k]=M(k)}(),e=G(J,oe),n=G(H,re),s=G(xe,F),r=G(K,Te),function(){for(var M=1,k=2,Y=1;Y<=15;Y++){for(var Z=M;Z<k;Z++)v[32767+Z]=Y,b[32767+Z]=[],b[32767+Z][1]=Y,b[32767+Z][0]=Z;for(var fe=-(k-1);fe<=-M;fe++)v[32767+fe]=Y,b[32767+fe]=[],b[32767+fe][1]=Y,b[32767+fe][0]=k-1+fe;M<<=1,k<<=1}}(),function(){for(var M=0;M<256;M++)Q[M]=19595*M,Q[M+256>>0]=38470*M,Q[M+512>>0]=7471*M+32768,Q[M+768>>0]=-11059*M,Q[M+1024>>0]=-21709*M,Q[M+1280>>0]=32768*M+8421375,Q[M+1536>>0]=-27439*M,Q[M+1792>>0]=-5329*M}(),ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function jo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function a2(t){function e(J){if(!J)throw Error("assert :P")}function n(J,oe,xe){for(var F=0;4>F;F++)if(J[oe+F]!=xe.charCodeAt(F))return!0;return!1}function s(J,oe,xe,F,H){for(var re=0;re<H;re++)J[oe+re]=xe[F+re]}function r(J,oe,xe,F){for(var H=0;H<F;H++)J[oe+H]=xe}function l(J){return new Int32Array(J)}function c(J,oe){for(var xe=[],F=0;F<J;F++)xe.push(new oe);return xe}function d(J,oe){var xe=[];return function F(H,re,K){for(var Te=K[re],G=0;G<Te&&(H.push(K.length>re+1?[]:new oe),!(K.length<re+1));G++)F(H[G],re+1,K)}(xe,0,J),xe}var f=function(){var J=this;function oe(E,N){for(var w=1<<N-1>>>0;E&w;)w>>>=1;return w?(E&w-1)+w:E}function xe(E,N,w,P,z){e(!(P%w));do E[N+(P-=w)]=z;while(0<P)}function F(E,N,w,P,z){if(e(2328>=z),512>=z)var W=l(512);else if((W=l(z))==null)return 0;return function(X,ee,ie,me,Ce,He){var Ve,Oe,pt=ee,Ke=1<<ie,Le=l(16),De=l(16);for(e(Ce!=0),e(me!=null),e(X!=null),e(0<ie),Oe=0;Oe<Ce;++Oe){if(15<me[Oe])return 0;++Le[me[Oe]]}if(Le[0]==Ce)return 0;for(De[1]=0,Ve=1;15>Ve;++Ve){if(Le[Ve]>1<<Ve)return 0;De[Ve+1]=De[Ve]+Le[Ve]}for(Oe=0;Oe<Ce;++Oe)Ve=me[Oe],0<me[Oe]&&(He[De[Ve]++]=Oe);if(De[15]==1)return(me=new H).g=0,me.value=He[0],xe(X,pt,1,Ke,me),Ke;var lt,gt=-1,ft=Ke-1,qt=0,jt=1,fn=1,Ut=1<<ie;for(Oe=0,Ve=1,Ce=2;Ve<=ie;++Ve,Ce<<=1){if(jt+=fn<<=1,0>(fn-=Le[Ve]))return 0;for(;0<Le[Ve];--Le[Ve])(me=new H).g=Ve,me.value=He[Oe++],xe(X,pt+qt,Ce,Ut,me),qt=oe(qt,Ve)}for(Ve=ie+1,Ce=2;15>=Ve;++Ve,Ce<<=1){if(jt+=fn<<=1,0>(fn-=Le[Ve]))return 0;for(;0<Le[Ve];--Le[Ve]){if(me=new H,(qt&ft)!=gt){for(pt+=Ut,lt=1<<(gt=Ve)-ie;15>gt&&!(0>=(lt-=Le[gt]));)++gt,lt<<=1;Ke+=Ut=1<<(lt=gt-ie),X[ee+(gt=qt&ft)].g=lt+ie,X[ee+gt].value=pt-ee-gt}me.g=Ve-ie,me.value=He[Oe++],xe(X,pt+(qt>>ie),Ce,Ut,me),qt=oe(qt,Ve)}}return jt!=2*De[15]-1?0:Ke}(E,N,w,P,z,W)}function H(){this.value=this.g=0}function re(){this.value=this.g=0}function K(){this.G=c(5,H),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(ya,re)}function Te(E,N,w,P){e(E!=null),e(N!=null),e(2147483648>P),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=N,E.pa=w,E.Jd=N,E.Yc=w+P,E.Zc=4<=P?w+P-4+1:w,Ne(E)}function G(E,N){for(var w=0;0<N--;)w|=ye(E,128)<<N;return w}function he(E,N){var w=G(E,N);return de(E)?-w:w}function ue(E,N,w,P){var z,W=0;for(e(E!=null),e(N!=null),e(4294967288>P),E.Sb=P,E.Ra=0,E.u=0,E.h=0,4<P&&(P=4),z=0;z<P;++z)W+=N[w+z]<<8*z;E.Ra=W,E.bb=P,E.oa=N,E.pa=w}function ae(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<bo-8>>>0,++E.bb,E.u-=8;Y(E)&&(E.h=1,E.u=0)}function V(E,N){if(e(0<=N),!E.h&&N<=ji){var w=k(E)&ki[N];return E.u+=N,ae(E),w}return E.h=1,E.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function k(E){return E.Ra>>>(E.u&bo-1)>>>0}function Y(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>bo}function Z(E,N){E.u=N,E.h=Y(E)}function fe(E){E.u>=$o&&(e(E.u>=$o),ae(E))}function Ne(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function de(E){return G(E,1)}function ye(E,N){var w=E.Ca;0>E.b&&Ne(E);var P=E.b,z=w*N>>>8,W=(E.I>>>P>z)+0;for(W?(w-=z,E.I-=z+1<<P>>>0):w=z+1,P=w,z=0;256<=P;)z+=8,P>>=8;return P=7^z+mr[P],E.b-=P,E.Ca=(w<<P)-1,W}function Ue(E,N,w){E[N+0]=w>>24&255,E[N+1]=w>>16&255,E[N+2]=w>>8&255,E[N+3]=w>>0&255}function we(E,N){return E[N+0]<<0|E[N+1]<<8}function Ze(E,N){return we(E,N)|E[N+2]<<16}function Je(E,N){return we(E,N)|we(E,N+2)<<16}function Qe(E,N){var w=1<<N;return e(E!=null),e(0<N),E.X=l(w),E.X==null?0:(E.Mb=32-N,E.Xa=N,1)}function je(E,N){e(E!=null),e(N!=null),e(E.Xa==N.Xa),s(N.X,0,E.X,0,1<<N.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function Fe(E,N,w,P){e(w!=null),e(P!=null);var z=w[0],W=P[0];return z==0&&(z=(E*W+N/2)/N),W==0&&(W=(N*z+E/2)/E),0>=z||0>=W?0:(w[0]=z,P[0]=W,1)}function ut(E,N){return E+(1<<N)-1>>>N}function Pe(E,N){return((4278255360&E)+(4278255360&N)>>>0&4278255360)+((16711935&E)+(16711935&N)>>>0&16711935)>>>0}function nt(E,N){J[N]=function(w,P,z,W,X,ee,ie){var me;for(me=0;me<X;++me){var Ce=J[E](ee[ie+me-1],z,W+me);ee[ie+me]=Pe(w[P+me],Ce)}}}function it(){this.ud=this.hd=this.jd=0}function st(E,N){return((4278124286&(E^N))>>>1)+(E&N)>>>0}function yt(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Pt(E,N){return yt(E+(E-N+.5>>1))}function Rt(E,N,w){return Math.abs(N-w)-Math.abs(E-w)}function Ft(E,N,w,P,z,W,X){for(P=W[X-1],w=0;w<z;++w)W[X+w]=P=Pe(E[N+w],P)}function Yt(E,N,w,P,z){var W;for(W=0;W<w;++W){var X=E[N+W],ee=X>>8&255,ie=16711935&(ie=(ie=16711935&X)+((ee<<16)+ee));P[z+W]=(4278255360&X)+ie>>>0}}function Be(E,N){N.jd=E>>0&255,N.hd=E>>8&255,N.ud=E>>16&255}function We(E,N,w,P,z,W){var X;for(X=0;X<P;++X){var ee=N[w+X],ie=ee>>>8,me=ee,Ce=255&(Ce=(Ce=ee>>>16)+((E.jd<<24>>24)*(ie<<24>>24)>>>5));me=255&(me=(me=me+((E.hd<<24>>24)*(ie<<24>>24)>>>5))+((E.ud<<24>>24)*(Ce<<24>>24)>>>5)),z[W+X]=(4278255360&ee)+(Ce<<16)+me}}function Lt(E,N,w,P,z){J[N]=function(W,X,ee,ie,me,Ce,He,Ve,Oe){for(ie=He;ie<Ve;++ie)for(He=0;He<Oe;++He)me[Ce++]=z(ee[P(W[X++])])},J[E]=function(W,X,ee,ie,me,Ce,He){var Ve=8>>W.b,Oe=W.Ea,pt=W.K[0],Ke=W.w;if(8>Ve)for(W=(1<<W.b)-1,Ke=(1<<Ve)-1;X<ee;++X){var Le,De=0;for(Le=0;Le<Oe;++Le)Le&W||(De=P(ie[me++])),Ce[He++]=z(pt[De&Ke]),De>>=Ve}else J["VP8LMapColor"+w](ie,me,pt,Ke,Ce,He,X,ee,Oe)}}function pe(E,N,w,P,z){for(w=N+w;N<w;){var W=E[N++];P[z++]=W>>16&255,P[z++]=W>>8&255,P[z++]=W>>0&255}}function vt(E,N,w,P,z){for(w=N+w;N<w;){var W=E[N++];P[z++]=W>>16&255,P[z++]=W>>8&255,P[z++]=W>>0&255,P[z++]=W>>24&255}}function At(E,N,w,P,z){for(w=N+w;N<w;){var W=(X=E[N++])>>16&240|X>>12&15,X=X>>0&240|X>>28&15;P[z++]=W,P[z++]=X}}function Kt(E,N,w,P,z){for(w=N+w;N<w;){var W=(X=E[N++])>>16&248|X>>13&7,X=X>>5&224|X>>3&31;P[z++]=W,P[z++]=X}}function Gt(E,N,w,P,z){for(w=N+w;N<w;){var W=E[N++];P[z++]=W>>0&255,P[z++]=W>>8&255,P[z++]=W>>16&255}}function xn(E,N,w,P,z,W){if(W==0)for(w=N+w;N<w;)Ue(P,((W=E[N++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),z+=32;else s(P,z,E,N,w)}function rs(E,N){J[N][0]=J[E+"0"],J[N][1]=J[E+"1"],J[N][2]=J[E+"2"],J[N][3]=J[E+"3"],J[N][4]=J[E+"4"],J[N][5]=J[E+"5"],J[N][6]=J[E+"6"],J[N][7]=J[E+"7"],J[N][8]=J[E+"8"],J[N][9]=J[E+"9"],J[N][10]=J[E+"10"],J[N][11]=J[E+"11"],J[N][12]=J[E+"12"],J[N][13]=J[E+"13"],J[N][14]=J[E+"0"],J[N][15]=J[E+"0"]}function Cn(E){return E==_l||E==Si||E==Ci||E==So}function Ws(){this.eb=[],this.size=this.A=this.fb=0}function Un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function js(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ws,this.f.kb=new Un,this.sd=null}function ln(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ls(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function un(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function Mn(E,N){var w=E.T,P=N.ba.f.RGBA,z=P.eb,W=P.fb+E.ka*P.A,X=ir[N.ba.S],ee=E.y,ie=E.O,me=E.f,Ce=E.N,He=E.ea,Ve=E.W,Oe=N.cc,pt=N.dc,Ke=N.Mc,Le=N.Nc,De=E.ka,lt=E.ka+E.T,gt=E.U,ft=gt+1>>1;for(De==0?X(ee,ie,null,null,me,Ce,He,Ve,me,Ce,He,Ve,z,W,null,null,gt):(X(N.ec,N.fc,ee,ie,Oe,pt,Ke,Le,me,Ce,He,Ve,z,W-P.A,z,W,gt),++w);De+2<lt;De+=2)Oe=me,pt=Ce,Ke=He,Le=Ve,Ce+=E.Rc,Ve+=E.Rc,W+=2*P.A,X(ee,(ie+=2*E.fa)-E.fa,ee,ie,Oe,pt,Ke,Le,me,Ce,He,Ve,z,W-P.A,z,W,gt);return ie+=E.fa,E.j+lt<E.o?(s(N.ec,N.fc,ee,ie,gt),s(N.cc,N.dc,me,Ce,ft),s(N.Mc,N.Nc,He,Ve,ft),w--):1&lt||X(ee,ie,null,null,me,Ce,He,Ve,me,Ce,He,Ve,z,W+P.A,null,null,gt),w}function qa(E,N,w){var P=E.F,z=[E.J];if(P!=null){var W=E.U,X=N.ba.S,ee=X==Ao||X==Ci;N=N.ba.f.RGBA;var ie=[0],me=E.ka;ie[0]=E.T,E.Kb&&(me==0?--ie[0]:(--me,z[0]-=E.width),E.j+E.ka+E.T==E.o&&(ie[0]=E.o-E.j-me));var Ce=N.eb;me=N.fb+me*N.A,E=Zn(P,z[0],E.width,W,ie,Ce,me+(ee?0:3),N.A),e(w==ie),E&&Cn(X)&&Mr(Ce,me,ee,W,ie,N.A)}return 0}function gs(E){var N=E.ma,w=N.ba.S,P=11>w,z=w==Xo||w==lo||w==Ao||w==Fi||w==12||Cn(w);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!$r(N.Oa,E,z?11:12))return 0;if(z&&Cn(w)&&Nt(),E.da)alert("todo:use_scaling");else{if(P){if(N.Ib=un,E.Kb){if(w=E.U+1>>1,N.memory=l(E.U+2*w),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+E.U,N.Mc=N.cc,N.Nc=N.dc+w,N.Ib=Mn,Nt()}}else alert("todo:EmitYUV");z&&(N.Jb=qa,P&&Me())}if(P&&!uf){for(E=0;256>E;++E)am[E]=89858*(E-128)+$a>>fo,Sc[E]=-22014*(E-128)+$a,Qu[E]=-45773*(E-128),Wa[E]=113618*(E-128)+$a>>fo;for(E=Zo;E<su;++E)N=76283*(E-16)+$a>>fo,Cc[E-Zo]=hr(N,255),ed[E-Zo]=hr(N+8>>4,15);uf=1}return 1}function ca(E){var N=E.ma,w=E.U,P=E.T;return e(!(1&E.ka)),0>=w||0>=P?0:(w=N.Ib(E,N),N.Jb!=null&&N.Jb(E,N,w),N.Dc+=w,1)}function Nn(E){E.ma.memory=null}function Xt(E,N,w,P){return V(E,8)!=47?0:(N[0]=V(E,14)+1,w[0]=V(E,14)+1,P[0]=V(E,1),V(E,3)!=0?0:!E.h)}function Ln(E,N){if(4>E)return E+1;var w=E-2>>1;return(2+(1&E)<<w)+V(N,w)+1}function kn(E,N){return 120<N?N-120:1<=(w=((w=at[N-1])>>4)*E+(8-(15&w)))?w:1;var w}function Fn(E,N,w){var P=k(w),z=E[N+=255&P].g-8;return 0<z&&(Z(w,w.u+8),P=k(w),N+=E[N].value,N+=P&(1<<z)-1),Z(w,w.u+E[N].g),E[N].value}function Rn(E,N,w){return w.g+=E.g,w.value+=E.value<<N>>>0,e(8>=w.g),E.g}function _s(E,N,w){var P=E.xc;return e((N=P==0?0:E.vc[E.md*(w>>P)+(N>>P)])<E.Wb),E.Ya[N]}function hs(E,N,w,P){var z=E.ab,W=E.c*N,X=E.C;N=X+N;var ee=w,ie=P;for(P=E.Ta,w=E.Ua;0<z--;){var me=E.gc[z],Ce=X,He=N,Ve=ee,Oe=ie,pt=(ie=P,ee=w,me.Ea);switch(e(Ce<He),e(He<=me.nc),me.hc){case 2:Vl(Ve,Oe,(He-Ce)*pt,ie,ee);break;case 0:var Ke=Ce,Le=He,De=ie,lt=ee,gt=(Ut=me).Ea;Ke==0&&(Ac(Ve,Oe,null,null,1,De,lt),Ft(Ve,Oe+1,0,0,gt-1,De,lt+1),Oe+=gt,lt+=gt,++Ke);for(var ft=1<<Ut.b,qt=ft-1,jt=ut(gt,Ut.b),fn=Ut.K,Ut=Ut.w+(Ke>>Ut.b)*jt;Ke<Le;){var As=fn,Rs=Ut,ns=1;for(gl(Ve,Oe,De,lt-gt,1,De,lt);ns<gt;){var Qn=(ns&~qt)+ft;Qn>gt&&(Qn=gt),(0,Ni[As[Rs++]>>8&15])(Ve,Oe+ +ns,De,lt+ns-gt,Qn-ns,De,lt+ns),ns=Qn}Oe+=gt,lt+=gt,++Ke&qt||(Ut+=jt)}He!=me.nc&&s(ie,ee-pt,ie,ee+(He-Ce-1)*pt,pt);break;case 1:for(pt=Ve,Le=Oe,gt=(Ve=me.Ea)-(lt=Ve&~(De=(Oe=1<<me.b)-1)),Ke=ut(Ve,me.b),ft=me.K,me=me.w+(Ce>>me.b)*Ke;Ce<He;){for(qt=ft,jt=me,fn=new it,Ut=Le+lt,As=Le+Ve;Le<Ut;)Be(qt[jt++],fn),to(fn,pt,Le,Oe,ie,ee),Le+=Oe,ee+=Oe;Le<As&&(Be(qt[jt++],fn),to(fn,pt,Le,gt,ie,ee),Le+=gt,ee+=gt),++Ce&De||(me+=Ke)}break;case 3:if(Ve==ie&&Oe==ee&&0<me.b){for(Le=ie,Ve=pt=ee+(He-Ce)*pt-(lt=(He-Ce)*ut(me.Ea,me.b)),Oe=ie,De=ee,Ke=[],lt=(gt=lt)-1;0<=lt;--lt)Ke[lt]=Oe[De+lt];for(lt=gt-1;0<=lt;--lt)Le[Ve+lt]=Ke[lt];Wr(me,Ce,He,ie,pt,ie,ee)}else Wr(me,Ce,He,Ve,Oe,ie,ee)}ee=P,ie=w}ie!=w&&s(P,w,ee,ie,W)}function er(E,N){var w=E.V,P=E.Ba+E.c*E.C,z=N-E.C;if(e(N<=E.l.o),e(16>=z),0<z){var W=E.l,X=E.Ta,ee=E.Ua,ie=W.width;if(hs(E,z,w,P),z=ee=[ee],e((w=E.C)<(P=N)),e(W.v<W.va),P>W.o&&(P=W.o),w<W.j){var me=W.j-w;w=W.j,z[0]+=me*ie}if(w>=P?w=0:(z[0]+=4*W.v,W.ka=w-W.j,W.U=W.va-W.v,W.T=P-w,w=1),w){if(ee=ee[0],11>(w=E.ca).S){var Ce=w.f.RGBA,He=(P=w.S,z=W.U,W=W.T,me=Ce.eb,Ce.A),Ve=W;for(Ce=Ce.fb+E.Ma*Ce.A;0<Ve--;){var Oe=X,pt=ee,Ke=z,Le=me,De=Ce;switch(P){case rr:pr(Oe,pt,Ke,Le,De);break;case Xo:Na(Oe,pt,Ke,Le,De);break;case _l:Na(Oe,pt,Ke,Le,De),Mr(Le,De,0,Ke,1,0);break;case Ai:yr(Oe,pt,Ke,Le,De);break;case lo:xn(Oe,pt,Ke,Le,De,1);break;case Si:xn(Oe,pt,Ke,Le,De,1),Mr(Le,De,0,Ke,1,0);break;case Ao:xn(Oe,pt,Ke,Le,De,0);break;case Ci:xn(Oe,pt,Ke,Le,De,0),Mr(Le,De,1,Ke,1,0);break;case Fi:Kr(Oe,pt,Ke,Le,De);break;case So:Kr(Oe,pt,Ke,Le,De),Jn(Le,De,Ke,1,0);break;case El:Ua(Oe,pt,Ke,Le,De);break;default:e(0)}ee+=ie,Ce+=He}E.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=w.height)}}E.C=N,e(E.C<=E.i)}function Ca(E){var N;if(0<E.ua)return 0;for(N=0;N<E.Wb;++N){var w=E.Ya[N].G,P=E.Ya[N].H;if(0<w[1][P[1]+0].g||0<w[2][P[2]+0].g||0<w[3][P[3]+0].g)return 0}return 1}function En(E,N,w,P,z,W){if(E.Z!=0){var X=E.qd,ee=E.rd;for(e(co[E.Z]!=null);N<w;++N)co[E.Z](X,ee,P,z,P,z,W),X=P,ee=z,z+=W;E.qd=X,E.rd=ee}}function bs(E,N){var w=E.l.ma,P=w.Z==0||w.Z==1?E.l.j:E.C;if(P=E.C<P?P:E.C,e(N<=E.l.o),N>P){var z=E.l.width,W=w.ca,X=w.tb+z*P,ee=E.V,ie=E.Ba+E.c*P,me=E.gc;e(E.ab==1),e(me[0].hc==3),eo(me[0],P,N,ee,ie,W,X),En(w,P,N,W,X,z)}E.C=E.Ma=N}function Qt(E,N,w,P,z,W,X){var ee=E.$/P,ie=E.$%P,me=E.m,Ce=E.s,He=w+E.$,Ve=He;z=w+P*z;var Oe=w+P*W,pt=280+Ce.ua,Ke=E.Pb?ee:16777216,Le=0<Ce.ua?Ce.Wa:null,De=Ce.wc,lt=He<Oe?_s(Ce,ie,ee):null;e(E.C<W),e(Oe<=z);var gt=!1;e:for(;;){for(;gt||He<Oe;){var ft=0;if(ee>=Ke){var qt=He-w;e((Ke=E).Pb),Ke.wd=Ke.m,Ke.xd=qt,0<Ke.s.ua&&je(Ke.s.Wa,Ke.s.vb),Ke=ee+Mt}if(ie&De||(lt=_s(Ce,ie,ee)),e(lt!=null),lt.Qb&&(N[He]=lt.qb,gt=!0),!gt)if(fe(me),lt.jc){ft=me,qt=N;var jt=He,fn=lt.pd[k(ft)&ya-1];e(lt.jc),256>fn.g?(Z(ft,ft.u+fn.g),qt[jt]=fn.value,ft=0):(Z(ft,ft.u+fn.g-256),e(256<=fn.value),ft=fn.value),ft==0&&(gt=!0)}else ft=Fn(lt.G[0],lt.H[0],me);if(me.h)break;if(gt||256>ft){if(!gt)if(lt.nd)N[He]=(lt.qb|ft<<8)>>>0;else{if(fe(me),gt=Fn(lt.G[1],lt.H[1],me),fe(me),qt=Fn(lt.G[2],lt.H[2],me),jt=Fn(lt.G[3],lt.H[3],me),me.h)break;N[He]=(jt<<24|gt<<16|ft<<8|qt)>>>0}if(gt=!1,++He,++ie>=P&&(ie=0,++ee,X!=null&&ee<=W&&!(ee%16)&&X(E,ee),Le!=null))for(;Ve<He;)ft=N[Ve++],Le.X[(506832829*ft&4294967295)>>>Le.Mb]=ft}else if(280>ft){if(ft=Ln(ft-256,me),qt=Fn(lt.G[4],lt.H[4],me),fe(me),qt=kn(P,qt=Ln(qt,me)),me.h)break;if(He-w<qt||z-He<ft)break e;for(jt=0;jt<ft;++jt)N[He+jt]=N[He+jt-qt];for(He+=ft,ie+=ft;ie>=P;)ie-=P,++ee,X!=null&&ee<=W&&!(ee%16)&&X(E,ee);if(e(He<=z),ie&De&&(lt=_s(Ce,ie,ee)),Le!=null)for(;Ve<He;)ft=N[Ve++],Le.X[(506832829*ft&4294967295)>>>Le.Mb]=ft}else{if(!(ft<pt))break e;for(gt=ft-280,e(Le!=null);Ve<He;)ft=N[Ve++],Le.X[(506832829*ft&4294967295)>>>Le.Mb]=ft;ft=He,e(!(gt>>>(qt=Le).Xa)),N[ft]=qt.X[gt],gt=!0}gt||e(me.h==Y(me))}if(E.Pb&&me.h&&He<z)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&je(E.s.vb,E.s.Wa);else{if(me.h)break e;X!=null&&X(E,ee>W?W:ee),E.a=0,E.$=He-w}return 1}return E.a=3,0}function Ls(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var N=E.Wa;N!=null&&(N.X=null),E.vb=null,e(E!=null)}function Ts(){var E=new dn;return E==null?null:(E.a=0,E.xb=Yl,rs("Predictor","VP8LPredictors"),rs("Predictor","VP8LPredictors_C"),rs("PredictorAdd","VP8LPredictorsAdd"),rs("PredictorAdd","VP8LPredictorsAdd_C"),Vl=Yt,to=We,pr=pe,Na=vt,Kr=At,Ua=Kt,yr=Gt,J.VP8LMapColor32b=Ba,J.VP8LMapColor8b=xl,E)}function $n(E,N,w,P,z){var W=1,X=[E],ee=[N],ie=P.m,me=P.s,Ce=null,He=0;e:for(;;){if(w)for(;W&&V(ie,1);){var Ve=X,Oe=ee,pt=P,Ke=1,Le=pt.m,De=pt.gc[pt.ab],lt=V(Le,2);if(pt.Oc&1<<lt)W=0;else{switch(pt.Oc|=1<<lt,De.hc=lt,De.Ea=Ve[0],De.nc=Oe[0],De.K=[null],++pt.ab,e(4>=pt.ab),lt){case 0:case 1:De.b=V(Le,3)+2,Ke=$n(ut(De.Ea,De.b),ut(De.nc,De.b),0,pt,De.K),De.K=De.K[0];break;case 3:var gt,ft=V(Le,8)+1,qt=16<ft?0:4<ft?1:2<ft?2:3;if(Ve[0]=ut(De.Ea,qt),De.b=qt,gt=Ke=$n(ft,1,0,pt,De.K)){var jt,fn=ft,Ut=De,As=1<<(8>>Ut.b),Rs=l(As);if(Rs==null)gt=0;else{var ns=Ut.K[0],Qn=Ut.w;for(Rs[0]=Ut.K[0][0],jt=1;jt<1*fn;++jt)Rs[jt]=Pe(ns[Qn+jt],Rs[jt-1]);for(;jt<4*As;++jt)Rs[jt]=0;Ut.K[0]=null,Ut.K[0]=Rs,gt=1}}Ke=gt;break;case 2:break;default:e(0)}W=Ke}}if(X=X[0],ee=ee[0],W&&V(ie,1)&&!(W=1<=(He=V(ie,4))&&11>=He)){P.a=3;break e}var Vs;if(Vs=W)t:{var Os,Vn,Ys,gn=P,In=X,xs=ee,Ss=He,or=w,Ka=gn.m,Oa=gn.s,Pa=[null],Fa=1,Li=0,Ps=St[Ss];n:for(;;){if(or&&V(Ka,1)){var Va=V(Ka,3)+2,Vi=ut(In,Va),Qo=ut(xs,Va),Nl=Vi*Qo;if(!$n(Vi,Qo,0,gn,Pa))break n;for(Pa=Pa[0],Oa.xc=Va,Os=0;Os<Nl;++Os){var el=Pa[Os]>>8&65535;Pa[Os]=el,el>=Fa&&(Fa=el+1)}}if(Ka.h)break n;for(Vn=0;5>Vn;++Vn){var ia=$[Vn];!Vn&&0<Ss&&(ia+=1<<Ss),Li<ia&&(Li=ia)}var Lc=c(Fa*Ps,H),au=Fa,Br=c(au,K);if(Br==null)var xa=null;else e(65536>=au),xa=Br;var vl=l(Li);if(xa==null||vl==null||Lc==null){gn.a=1;break n}var tl=Lc;for(Os=Ys=0;Os<Fa;++Os){var Zr=xa[Os],nl=Zr.G,Qr=Zr.H,wc=0,zl=1,ru=0;for(Vn=0;5>Vn;++Vn){ia=$[Vn],nl[Vn]=tl,Qr[Vn]=Ys,!Vn&&0<Ss&&(ia+=1<<Ss);a:{var Ic,iu=ia,Dc=gn,$l=vl,hf=tl,mf=Ys,Rc=0,Io=Dc.m,im=V(Io,1);if(r($l,0,0,iu),im){var pf=V(Io,1)+1,gf=V(Io,1),td=V(Io,gf==0?1:8);$l[td]=1,pf==2&&($l[td=V(Io,8)]=1);var Wl=1}else{var nd=l(19),sd=V(Io,4)+4;if(19<sd){Dc.a=3;var Oc=0;break a}for(Ic=0;Ic<sd;++Ic)nd[ot[Ic]]=V(Io,3);var ou=void 0,Kl=void 0,xf=Dc,Ef=nd,Do=iu,Pc=$l,lu=0,Gi=xf.m,Xl=8,ad=c(128,H);s:for(;F(ad,0,7,Ef,19);){if(V(Gi,1)){var _f=2+2*V(Gi,3);if((ou=2+V(Gi,_f))>Do)break s}else ou=Do;for(Kl=0;Kl<Do&&ou--;){fe(Gi);var rd=ad[0+(127&k(Gi))];Z(Gi,Gi.u+rd.g);var Al=rd.value;if(16>Al)Pc[Kl++]=Al,Al!=0&&(Xl=Al);else{var bf=Al==16,id=Al-16,od=kr[id],ld=V(Gi,bl[id])+od;if(Kl+ld>Do)break s;for(var Tf=bf?Xl:0;0<ld--;)Pc[Kl++]=Tf}}lu=1;break s}lu||(xf.a=3),Wl=lu}(Wl=Wl&&!Io.h)&&(Rc=F(hf,mf,8,$l,iu)),Wl&&Rc!=0?Oc=Rc:(Dc.a=3,Oc=0)}if(Oc==0)break n;if(zl&&Se[Vn]==1&&(zl=tl[Ys].g==0),wc+=tl[Ys].g,Ys+=Oc,3>=Vn){var Sl,cu=vl[0];for(Sl=1;Sl<ia;++Sl)vl[Sl]>cu&&(cu=vl[Sl]);ru+=cu}}if(Zr.nd=zl,Zr.Qb=0,zl&&(Zr.qb=(nl[3][Qr[3]+0].value<<24|nl[1][Qr[1]+0].value<<16|nl[2][Qr[2]+0].value)>>>0,wc==0&&256>nl[0][Qr[0]+0].value&&(Zr.Qb=1,Zr.qb+=nl[0][Qr[0]+0].value<<8)),Zr.jc=!Zr.Qb&&6>ru,Zr.jc){var Mc,Ro=Zr;for(Mc=0;Mc<ya;++Mc){var ho=Mc,Oo=Ro.pd[ho],kc=Ro.G[0][Ro.H[0]+ho];256<=kc.value?(Oo.g=kc.g+256,Oo.value=kc.value):(Oo.g=0,Oo.value=0,ho>>=Rn(kc,8,Oo),ho>>=Rn(Ro.G[1][Ro.H[1]+ho],16,Oo),ho>>=Rn(Ro.G[2][Ro.H[2]+ho],0,Oo),Rn(Ro.G[3][Ro.H[3]+ho],24,Oo))}}}Oa.vc=Pa,Oa.Wb=Fa,Oa.Ya=xa,Oa.yc=Lc,Vs=1;break t}Vs=0}if(!(W=Vs)){P.a=3;break e}if(0<He){if(me.ua=1<<He,!Qe(me.Wa,He)){P.a=1,W=0;break e}}else me.ua=0;var jc=P,cd=X,yf=ee,ud=jc.s,dd=ud.xc;if(jc.c=cd,jc.i=yf,ud.md=ut(cd,dd),ud.wc=dd==0?-1:(1<<dd)-1,w){P.xb=cf;break e}if((Ce=l(X*ee))==null){P.a=1,W=0;break e}W=(W=Qt(P,Ce,0,X,ee,ee,null))&&!ie.h;break e}return W?(z!=null?z[0]=Ce:(e(Ce==null),e(w)),P.$=0,w||Ls(me)):Ls(me),W}function La(E,N){var w=E.c*E.i,P=w+N+16*N;return e(E.c<=N),E.V=l(P),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+w+N,1)}function ua(E,N){var w=E.C,P=N-w,z=E.V,W=E.Ba+E.c*w;for(e(N<=E.l.o);0<P;){var X=16<P?16:P,ee=E.l.ma,ie=E.l.width,me=ie*X,Ce=ee.ca,He=ee.tb+ie*w,Ve=E.Ta,Oe=E.Ua;hs(E,X,z,W),Fs(Ve,Oe,Ce,He,me),En(ee,w,w+X,Ce,He,ie),P-=X,z+=X*E.c,w+=X}e(w==N),E.C=E.Ma=N}function Bs(){this.ub=this.yd=this.td=this.Rb=0}function ms(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function wa(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Is(){this.Yb=function(){var E=[];return function N(w,P,z){for(var W=z[P],X=0;X<W&&(w.push(z.length>P+1?[]:0),!(z.length<P+1));X++)N(w[X],P+1,z)}(E,0,[3,11]),E}()}function ka(){this.jb=l(3),this.Wc=d([4,8],Is),this.Xc=d([4,17],Is)}function Wn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function ys(){this.ld=this.La=this.dd=this.tc=0}function da(){this.Na=this.la=0}function ws(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function tr(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ta(){this.uc=this.M=this.Nb=0,this.wa=Array(new ys),this.Y=0,this.ya=Array(new tr),this.aa=0,this.l=new mn}function sa(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Gr(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new Bs,this.Kc=new ms,this.ed=new Wn,this.Qa=new wa,this.Ic=this.$c=this.Aa=0,this.D=new Ta,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,ce),this.ia=0,this.pb=c(4,ws),this.Pa=new ka,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new sa),this.Hd=0,this.rb=Array(new da),this.sb=0,this.wa=Array(new ys),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new tr),this.L=this.aa=0,this.gd=d([4,2],ys),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function mn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hr(){var E=new Gr;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,Wt||(Wt=wr)),E}function Ds(E,N,w){return E.a==0&&(E.a=N,E.sc=w,E.cb=0),0}function ea(E,N,w){return 3<=w&&E[N+0]==157&&E[N+1]==1&&E[N+2]==42}function Yr(E,N){if(E==null)return 0;if(E.a=0,E.sc="OK",N==null)return Ds(E,2,"null VP8Io passed to VP8GetHeaders()");var w=N.data,P=N.w,z=N.ha;if(4>z)return Ds(E,7,"Truncated header.");var W=w[P+0]|w[P+1]<<8|w[P+2]<<16,X=E.Od;if(X.Rb=!(1&W),X.td=W>>1&7,X.yd=W>>4&1,X.ub=W>>5,3<X.td)return Ds(E,3,"Incorrect keyframe parameters.");if(!X.yd)return Ds(E,4,"Frame not displayable.");P+=3,z-=3;var ee=E.Kc;if(X.Rb){if(7>z)return Ds(E,7,"cannot parse picture header");if(!ea(w,P,z))return Ds(E,3,"Bad code word");ee.c=16383&(w[P+4]<<8|w[P+3]),ee.Td=w[P+4]>>6,ee.i=16383&(w[P+6]<<8|w[P+5]),ee.Ud=w[P+6]>>6,P+=7,z-=7,E.za=ee.c+15>>4,E.Ub=ee.i+15>>4,N.width=ee.c,N.height=ee.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,r((W=E.Pa).jb,0,255,W.jb.length),e((W=E.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,r(W.Zb,0,0,W.Zb.length),r(W.Lb,0,0,W.Lb)}if(X.ub>z)return Ds(E,7,"bad partition length");Te(W=E.m,w,P,X.ub),P+=X.ub,z-=X.ub,X.Rb&&(ee.Ld=de(W),ee.Kd=de(W)),ee=E.Qa;var ie,me=E.Pa;if(e(W!=null),e(ee!=null),ee.Cb=de(W),ee.Cb){if(ee.Bb=de(W),de(W)){for(ee.Fb=de(W),ie=0;4>ie;++ie)ee.Zb[ie]=de(W)?he(W,7):0;for(ie=0;4>ie;++ie)ee.Lb[ie]=de(W)?he(W,6):0}if(ee.Bb)for(ie=0;3>ie;++ie)me.jb[ie]=de(W)?G(W,8):255}else ee.Bb=0;if(W.Ka)return Ds(E,3,"cannot parse segment header");if((ee=E.ed).zd=de(W),ee.Tb=G(W,6),ee.wb=G(W,3),ee.Pc=de(W),ee.Pc&&de(W)){for(me=0;4>me;++me)de(W)&&(ee.vd[me]=he(W,6));for(me=0;4>me;++me)de(W)&&(ee.od[me]=he(W,6))}if(E.L=ee.Tb==0?0:ee.zd?1:2,W.Ka)return Ds(E,3,"cannot parse filter header");var Ce=z;if(z=ie=P,P=ie+Ce,ee=Ce,E.Xb=(1<<G(E.m,2))-1,Ce<3*(me=E.Xb))w=7;else{for(ie+=3*me,ee-=3*me,Ce=0;Ce<me;++Ce){var He=w[z+0]|w[z+1]<<8|w[z+2]<<16;He>ee&&(He=ee),Te(E.Jc[+Ce],w,ie,He),ie+=He,ee-=He,z+=3}Te(E.Jc[+me],w,ie,ee),w=ie<P?0:5}if(w!=0)return Ds(E,w,"cannot parse partitions");for(w=G(ie=E.m,7),z=de(ie)?he(ie,4):0,P=de(ie)?he(ie,4):0,ee=de(ie)?he(ie,4):0,me=de(ie)?he(ie,4):0,ie=de(ie)?he(ie,4):0,Ce=E.Qa,He=0;4>He;++He){if(Ce.Cb){var Ve=Ce.Zb[He];Ce.Fb||(Ve+=w)}else{if(0<He){E.pb[He]=E.pb[0];continue}Ve=w}var Oe=E.pb[He];Oe.Sc[0]=It[hr(Ve+z,127)],Oe.Sc[1]=sn[hr(Ve+0,127)],Oe.Eb[0]=2*It[hr(Ve+P,127)],Oe.Eb[1]=101581*sn[hr(Ve+ee,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=It[hr(Ve+me,117)],Oe.Qc[1]=sn[hr(Ve+ie,127)],Oe.lc=Ve+ie}if(!X.Rb)return Ds(E,4,"Not a key frame.");for(de(W),X=E.Pa,w=0;4>w;++w){for(z=0;8>z;++z)for(P=0;3>P;++P)for(ee=0;11>ee;++ee)me=ye(W,Tl[w][z][P][ee])?G(W,8):ga[w][z][P][ee],X.Wc[w][z].Yb[P][ee]=me;for(z=0;17>z;++z)X.Xc[w][z]=X.Wc[w][lf[z]]}return E.kc=de(W),E.kc&&(E.Bd=G(W,8)),E.cb=1}function wr(E,N,w,P,z,W,X){var ee=N[z].Yb[w];for(w=0;16>z;++z){if(!ye(E,ee[w+0]))return z;for(;!ye(E,ee[w+1]);)if(ee=N[++z].Yb[0],w=0,z==16)return 16;var ie=N[z+1].Yb;if(ye(E,ee[w+2])){var me=E,Ce=0;if(ye(me,(Ve=ee)[(He=w)+3]))if(ye(me,Ve[He+6])){for(ee=0,He=2*(Ce=ye(me,Ve[He+8]))+(Ve=ye(me,Ve[He+9+Ce])),Ce=0,Ve=an[He];Ve[ee];++ee)Ce+=Ce+ye(me,Ve[ee]);Ce+=3+(8<<He)}else ye(me,Ve[He+7])?(Ce=7+2*ye(me,165),Ce+=ye(me,145)):Ce=5+ye(me,159);else Ce=ye(me,Ve[He+4])?3+ye(me,Ve[He+5]):2;ee=ie[2]}else Ce=1,ee=ie[1];ie=X+rn[z],0>(me=E).b&&Ne(me);var He,Ve=me.b,Oe=(He=me.Ca>>1)-(me.I>>Ve)>>31;--me.b,me.Ca+=Oe,me.Ca|=1,me.I-=(He+1&Oe)<<Ve,W[ie]=((Ce^Oe)-Oe)*P[(0<z)+0]}return 16}function dr(E){var N=E.rb[E.sb-1];N.la=0,N.Na=0,r(E.zc,0,0,E.zc.length),E.ja=0}function Ns(E,N){if(E==null)return 0;if(N==null)return Ds(E,2,"NULL VP8Io parameter in VP8Decode().");if(!E.cb&&!Yr(E,N))return 0;if(e(E.cb),N.ac==null||N.ac(N)){N.ob&&(E.L=0);var w=wo[E.L];if(E.L==2?(E.yb=0,E.zb=0):(E.yb=N.v-w>>4,E.zb=N.j-w>>4,0>E.yb&&(E.yb=0),0>E.zb&&(E.zb=0)),E.Va=N.o+15+w>>4,E.Hb=N.va+15+w>>4,E.Hb>E.za&&(E.Hb=E.za),E.Va>E.Ub&&(E.Va=E.Ub),0<E.L){var P=E.ed;for(w=0;4>w;++w){var z;if(E.Qa.Cb){var W=E.Qa.Lb[w];E.Qa.Fb||(W+=P.Tb)}else W=P.Tb;for(z=0;1>=z;++z){var X=E.gd[w][z],ee=W;if(P.Pc&&(ee+=P.vd[0],z&&(ee+=P.od[0])),0<(ee=0>ee?0:63<ee?63:ee)){var ie=ee;0<P.wb&&(ie=4<P.wb?ie>>2:ie>>1)>9-P.wb&&(ie=9-P.wb),1>ie&&(ie=1),X.dd=ie,X.tc=2*ee+ie,X.ld=40<=ee?2:15<=ee?1:0}else X.tc=0;X.La=z}}}w=0}else Ds(E,6,"Frame setup failed"),w=E.a;if(w=w==0){if(w){E.$c=0,0<E.Aa||(E.Ic=df);e:{w=E.Ic,P=4*(ie=E.za);var me=32*ie,Ce=ie+1,He=0<E.L?ie*(0<E.Aa?2:1):0,Ve=(E.Aa==2?2:1)*ie;if((X=P+832+(z=3*(16*w+wo[E.L])/2*me)+(W=E.Fa!=null&&0<E.Fa.length?E.Kc.c*E.Kc.i:0))!=X)w=0;else{if(X>E.Vb){if(E.Vb=0,E.Ec=l(X),E.Fc=0,E.Ec==null){w=Ds(E,1,"no memory during frame initialization.");break e}E.Vb=X}X=E.Ec,ee=E.Fc,E.Ac=X,E.Bc=ee,ee+=P,E.Gd=c(me,sa),E.Hd=0,E.rb=c(Ce+1,da),E.sb=1,E.wa=He?c(He,ys):null,E.Y=0,E.D.Nb=0,E.D.wa=E.wa,E.D.Y=E.Y,0<E.Aa&&(E.D.Y+=ie),e(!0),E.oc=X,E.pc=ee,ee+=832,E.ya=c(Ve,tr),E.aa=0,E.D.ya=E.ya,E.D.aa=E.aa,E.Aa==2&&(E.D.aa+=ie),E.R=16*ie,E.B=8*ie,ie=(me=wo[E.L])*E.R,me=me/2*E.B,E.sa=X,E.ta=ee+ie,E.qa=E.sa,E.ra=E.ta+16*w*E.R+me,E.Ha=E.qa,E.Ia=E.ra+8*w*E.B+me,E.$c=0,ee+=z,E.mb=W?X:null,E.nb=W?ee:null,e(ee+W<=E.Fc+E.Vb),dr(E),r(E.Ac,E.Bc,0,P),w=1}}if(w){if(N.ka=0,N.y=E.sa,N.O=E.ta,N.f=E.qa,N.N=E.ra,N.ea=E.Ha,N.Vd=E.Ia,N.fa=E.R,N.Rc=E.B,N.F=null,N.J=0,!Ui){for(w=-255;255>=w;++w)pa[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)Jr[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)io[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)oo[255+w]=0>w?0:255<w?255:w;Ui=1}Xr=za,Pr=bi,ar=Er,va=ci,Nr=Ti,Us=_i,To=Bt,vi=kt,Wo=Bn,no=Kn,so=Ct,ao=$t,yo=Xn,Ko=zn,ro=_e,Bi=tt,No=Xe,ra=rt,jr[0]=on,jr[1]=Ir,jr[2]=Jt,jr[3]=_n,jr[4]=ts,jr[5]=jn,jr[6]=Yn,jr[7]=vn,jr[8]=zr,jr[9]=Dr,Co[0]=dt,Co[1]=yi,Co[2]=be,Co[3]=Re,Co[4]=bt,Co[5]=Dt,Co[6]=wt,pi[0]=fi,pi[1]=Da,pi[2]=fr,pi[3]=di,pi[4]=sr,pi[5]=fa,pi[6]=_r,w=1}else w=0}w&&(w=function(Oe,pt){for(Oe.M=0;Oe.M<Oe.Va;++Oe.M){var Ke,Le=Oe.Jc[Oe.M&Oe.Xb],De=Oe.m,lt=Oe;for(Ke=0;Ke<lt.za;++Ke){var gt=De,ft=lt,qt=ft.Ac,jt=ft.Bc+4*Ke,fn=ft.zc,Ut=ft.ya[ft.aa+Ke];if(ft.Qa.Bb?Ut.$b=ye(gt,ft.Pa.jb[0])?2+ye(gt,ft.Pa.jb[2]):ye(gt,ft.Pa.jb[1]):Ut.$b=0,ft.kc&&(Ut.Ad=ye(gt,ft.Bd)),Ut.Za=!ye(gt,145)+0,Ut.Za){var As=Ut.Ob,Rs=0;for(ft=0;4>ft;++ft){var ns,Qn=fn[0+ft];for(ns=0;4>ns;++ns){Qn=Hl[qt[jt+ns]][Qn];for(var Vs=is[ye(gt,Qn[0])];0<Vs;)Vs=is[2*Vs+ye(gt,Qn[Vs])];Qn=-Vs,qt[jt+ns]=Qn}s(As,Rs,qt,jt,4),Rs+=4,fn[0+ft]=Qn}}else Qn=ye(gt,156)?ye(gt,128)?1:3:ye(gt,163)?2:0,Ut.Ob[0]=Qn,r(qt,jt,Qn,4),r(fn,0,Qn,4);Ut.Dd=ye(gt,142)?ye(gt,114)?ye(gt,183)?1:3:2:0}if(lt.m.Ka)return Ds(Oe,7,"Premature end-of-partition0 encountered.");for(;Oe.ja<Oe.za;++Oe.ja){if(lt=Le,gt=(De=Oe).rb[De.sb-1],qt=De.rb[De.sb+De.ja],Ke=De.ya[De.aa+De.ja],jt=De.kc?Ke.Ad:0)gt.la=qt.la=0,Ke.Za||(gt.Na=qt.Na=0),Ke.Hc=0,Ke.Gc=0,Ke.ia=0;else{var Os,Vn;if(gt=qt,qt=lt,jt=De.Pa.Xc,fn=De.ya[De.aa+De.ja],Ut=De.pb[fn.$b],ft=fn.ad,As=0,Rs=De.rb[De.sb-1],Qn=ns=0,r(ft,As,0,384),fn.Za)var Ys=0,gn=jt[3];else{Vs=l(16);var In=gt.Na+Rs.Na;if(In=Wt(qt,jt[1],In,Ut.Eb,0,Vs,0),gt.Na=Rs.Na=(0<In)+0,1<In)Xr(Vs,0,ft,As);else{var xs=Vs[0]+3>>3;for(Vs=0;256>Vs;Vs+=16)ft[As+Vs]=xs}Ys=1,gn=jt[0]}var Ss=15&gt.la,or=15&Rs.la;for(Vs=0;4>Vs;++Vs){var Ka=1&or;for(xs=Vn=0;4>xs;++xs)Ss=Ss>>1|(Ka=(In=Wt(qt,gn,In=Ka+(1&Ss),Ut.Sc,Ys,ft,As))>Ys)<<7,Vn=Vn<<2|(3<In?3:1<In?2:ft[As+0]!=0),As+=16;Ss>>=4,or=or>>1|Ka<<7,ns=(ns<<8|Vn)>>>0}for(gn=Ss,Ys=or>>4,Os=0;4>Os;Os+=2){for(Vn=0,Ss=gt.la>>4+Os,or=Rs.la>>4+Os,Vs=0;2>Vs;++Vs){for(Ka=1&or,xs=0;2>xs;++xs)In=Ka+(1&Ss),Ss=Ss>>1|(Ka=0<(In=Wt(qt,jt[2],In,Ut.Qc,0,ft,As)))<<3,Vn=Vn<<2|(3<In?3:1<In?2:ft[As+0]!=0),As+=16;Ss>>=2,or=or>>1|Ka<<5}Qn|=Vn<<4*Os,gn|=Ss<<4<<Os,Ys|=(240&or)<<Os}gt.la=gn,Rs.la=Ys,fn.Hc=ns,fn.Gc=Qn,fn.ia=43690&Qn?0:Ut.ia,jt=!(ns|Qn)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[Ke.$b][Ke.Za],De.wa[De.Y+De.ja].La|=!jt),lt.Ka)return Ds(Oe,7,"Premature end-of-file encountered.")}if(dr(Oe),De=pt,lt=1,Ke=(Le=Oe).D,gt=0<Le.L&&Le.M>=Le.zb&&Le.M<=Le.Va,Le.Aa==0)e:{if(Ke.M=Le.M,Ke.uc=gt,mi(Le,Ke),lt=1,Ke=(Vn=Le.D).Nb,gt=(Qn=wo[Le.L])*Le.R,qt=Qn/2*Le.B,Vs=16*Ke*Le.R,xs=8*Ke*Le.B,jt=Le.sa,fn=Le.ta-gt+Vs,Ut=Le.qa,ft=Le.ra-qt+xs,As=Le.Ha,Rs=Le.Ia-qt+xs,or=(Ss=Vn.M)==0,ns=Ss>=Le.Va-1,Le.Aa==2&&mi(Le,Vn),Vn.uc)for(Ka=(In=Le).D.M,e(In.D.uc),Vn=In.yb;Vn<In.Hb;++Vn){Ys=Vn,gn=Ka;var Oa=(Pa=(ia=In).D).Nb;Os=ia.R;var Pa=Pa.wa[Pa.Y+Ys],Fa=ia.sa,Li=ia.ta+16*Oa*Os+16*Ys,Ps=Pa.dd,Va=Pa.tc;if(Va!=0)if(e(3<=Va),ia.L==1)0<Ys&&Bi(Fa,Li,Os,Va+4),Pa.La&&ra(Fa,Li,Os,Va),0<gn&&ro(Fa,Li,Os,Va+4),Pa.La&&No(Fa,Li,Os,Va);else{var Vi=ia.B,Qo=ia.qa,Nl=ia.ra+8*Oa*Vi+8*Ys,el=ia.Ha,ia=ia.Ia+8*Oa*Vi+8*Ys;Oa=Pa.ld,0<Ys&&(vi(Fa,Li,Os,Va+4,Ps,Oa),no(Qo,Nl,el,ia,Vi,Va+4,Ps,Oa)),Pa.La&&(ao(Fa,Li,Os,Va,Ps,Oa),Ko(Qo,Nl,el,ia,Vi,Va,Ps,Oa)),0<gn&&(To(Fa,Li,Os,Va+4,Ps,Oa),Wo(Qo,Nl,el,ia,Vi,Va+4,Ps,Oa)),Pa.La&&(so(Fa,Li,Os,Va,Ps,Oa),yo(Qo,Nl,el,ia,Vi,Va,Ps,Oa))}}if(Le.ia&&alert("todo:DitherRow"),De.put!=null){if(Vn=16*Ss,Ss=16*(Ss+1),or?(De.y=Le.sa,De.O=Le.ta+Vs,De.f=Le.qa,De.N=Le.ra+xs,De.ea=Le.Ha,De.W=Le.Ia+xs):(Vn-=Qn,De.y=jt,De.O=fn,De.f=Ut,De.N=ft,De.ea=As,De.W=Rs),ns||(Ss-=Qn),Ss>De.o&&(Ss=De.o),De.F=null,De.J=null,Le.Fa!=null&&0<Le.Fa.length&&Vn<Ss&&(De.J=_o(Le,De,Vn,Ss-Vn),De.F=Le.mb,De.F==null&&De.F.length==0)){lt=Ds(Le,3,"Could not decode alpha data.");break e}Vn<De.j&&(Qn=De.j-Vn,Vn=De.j,e(!(1&Qn)),De.O+=Le.R*Qn,De.N+=Le.B*(Qn>>1),De.W+=Le.B*(Qn>>1),De.F!=null&&(De.J+=De.width*Qn)),Vn<Ss&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=Vn-De.j,De.U=De.va-De.v,De.T=Ss-Vn,lt=De.put(De))}Ke+1!=Le.Ic||ns||(s(Le.sa,Le.ta-gt,jt,fn+16*Le.R,gt),s(Le.qa,Le.ra-qt,Ut,ft+8*Le.B,qt),s(Le.Ha,Le.Ia-qt,As,Rs+8*Le.B,qt))}if(!lt)return Ds(Oe,6,"Output aborted.")}return 1}(E,N)),N.bc!=null&&N.bc(N),w&=1}return w?(E.cb=0,w):0}function Ia(E,N,w,P,z){z=E[N+w+32*P]+(z>>3),E[N+w+32*P]=-256&z?0>z?0:255:z}function li(E,N,w,P,z,W){Ia(E,N,0,w,P+z),Ia(E,N,1,w,P+W),Ia(E,N,2,w,P-W),Ia(E,N,3,w,P-z)}function cs(E){return(20091*E>>16)+E}function qr(E,N,w,P){var z,W=0,X=l(16);for(z=0;4>z;++z){var ee=E[N+0]+E[N+8],ie=E[N+0]-E[N+8],me=(35468*E[N+4]>>16)-cs(E[N+12]),Ce=cs(E[N+4])+(35468*E[N+12]>>16);X[W+0]=ee+Ce,X[W+1]=ie+me,X[W+2]=ie-me,X[W+3]=ee-Ce,W+=4,N++}for(z=W=0;4>z;++z)ee=(E=X[W+0]+4)+X[W+8],ie=E-X[W+8],me=(35468*X[W+4]>>16)-cs(X[W+12]),Ia(w,P,0,0,ee+(Ce=cs(X[W+4])+(35468*X[W+12]>>16))),Ia(w,P,1,0,ie+me),Ia(w,P,2,0,ie-me),Ia(w,P,3,0,ee-Ce),W++,P+=32}function _i(E,N,w,P){var z=E[N+0]+4,W=35468*E[N+4]>>16,X=cs(E[N+4]),ee=35468*E[N+1]>>16;li(w,P,0,z+X,E=cs(E[N+1]),ee),li(w,P,1,z+W,E,ee),li(w,P,2,z-W,E,ee),li(w,P,3,z-X,E,ee)}function bi(E,N,w,P,z){qr(E,N,w,P),z&&qr(E,N+16,w,P+4)}function Er(E,N,w,P){Pr(E,N+0,w,P,1),Pr(E,N+32,w,P+128,1)}function ci(E,N,w,P){var z;for(E=E[N+0]+4,z=0;4>z;++z)for(N=0;4>N;++N)Ia(w,P,N,z,E)}function Ti(E,N,w,P){E[N+0]&&va(E,N+0,w,P),E[N+16]&&va(E,N+16,w,P+4),E[N+32]&&va(E,N+32,w,P+128),E[N+48]&&va(E,N+48,w,P+128+4)}function za(E,N,w,P){var z,W=l(16);for(z=0;4>z;++z){var X=E[N+0+z]+E[N+12+z],ee=E[N+4+z]+E[N+8+z],ie=E[N+4+z]-E[N+8+z],me=E[N+0+z]-E[N+12+z];W[0+z]=X+ee,W[8+z]=X-ee,W[4+z]=me+ie,W[12+z]=me-ie}for(z=0;4>z;++z)X=(E=W[0+4*z]+3)+W[3+4*z],ee=W[1+4*z]+W[2+4*z],ie=W[1+4*z]-W[2+4*z],me=E-W[3+4*z],w[P+0]=X+ee>>3,w[P+16]=me+ie>>3,w[P+32]=X-ee>>3,w[P+48]=me-ie>>3,P+=64}function ui(E,N,w){var P,z=N-32,W=Ra,X=255-E[z-1];for(P=0;P<w;++P){var ee,ie=W,me=X+E[N-1];for(ee=0;ee<w;++ee)E[N+ee]=ie[me+E[z+ee]];N+=32}}function Ir(E,N){ui(E,N,4)}function Da(E,N){ui(E,N,8)}function yi(E,N){ui(E,N,16)}function be(E,N){var w;for(w=0;16>w;++w)s(E,N+32*w,E,N-32,16)}function Re(E,N){var w;for(w=16;0<w;--w)r(E,N,E[N-1],16),N+=32}function ze(E,N,w){var P;for(P=0;16>P;++P)r(N,w+32*P,E,16)}function dt(E,N){var w,P=16;for(w=0;16>w;++w)P+=E[N-1+32*w]+E[N+w-32];ze(P>>5,E,N)}function bt(E,N){var w,P=8;for(w=0;16>w;++w)P+=E[N-1+32*w];ze(P>>4,E,N)}function Dt(E,N){var w,P=8;for(w=0;16>w;++w)P+=E[N+w-32];ze(P>>4,E,N)}function wt(E,N){ze(128,E,N)}function xt(E,N,w){return E+2*N+w+2>>2}function Jt(E,N){var w,P=N-32;for(P=new Uint8Array([xt(E[P-1],E[P+0],E[P+1]),xt(E[P+0],E[P+1],E[P+2]),xt(E[P+1],E[P+2],E[P+3]),xt(E[P+2],E[P+3],E[P+4])]),w=0;4>w;++w)s(E,N+32*w,P,0,P.length)}function _n(E,N){var w=E[N-1],P=E[N-1+32],z=E[N-1+64],W=E[N-1+96];Ue(E,N+0,16843009*xt(E[N-1-32],w,P)),Ue(E,N+32,16843009*xt(w,P,z)),Ue(E,N+64,16843009*xt(P,z,W)),Ue(E,N+96,16843009*xt(z,W,W))}function on(E,N){var w,P=4;for(w=0;4>w;++w)P+=E[N+w-32]+E[N-1+32*w];for(P>>=3,w=0;4>w;++w)r(E,N+32*w,P,4)}function ts(E,N){var w=E[N-1+0],P=E[N-1+32],z=E[N-1+64],W=E[N-1-32],X=E[N+0-32],ee=E[N+1-32],ie=E[N+2-32],me=E[N+3-32];E[N+0+96]=xt(P,z,E[N-1+96]),E[N+1+96]=E[N+0+64]=xt(w,P,z),E[N+2+96]=E[N+1+64]=E[N+0+32]=xt(W,w,P),E[N+3+96]=E[N+2+64]=E[N+1+32]=E[N+0+0]=xt(X,W,w),E[N+3+64]=E[N+2+32]=E[N+1+0]=xt(ee,X,W),E[N+3+32]=E[N+2+0]=xt(ie,ee,X),E[N+3+0]=xt(me,ie,ee)}function Yn(E,N){var w=E[N+1-32],P=E[N+2-32],z=E[N+3-32],W=E[N+4-32],X=E[N+5-32],ee=E[N+6-32],ie=E[N+7-32];E[N+0+0]=xt(E[N+0-32],w,P),E[N+1+0]=E[N+0+32]=xt(w,P,z),E[N+2+0]=E[N+1+32]=E[N+0+64]=xt(P,z,W),E[N+3+0]=E[N+2+32]=E[N+1+64]=E[N+0+96]=xt(z,W,X),E[N+3+32]=E[N+2+64]=E[N+1+96]=xt(W,X,ee),E[N+3+64]=E[N+2+96]=xt(X,ee,ie),E[N+3+96]=xt(ee,ie,ie)}function jn(E,N){var w=E[N-1+0],P=E[N-1+32],z=E[N-1+64],W=E[N-1-32],X=E[N+0-32],ee=E[N+1-32],ie=E[N+2-32],me=E[N+3-32];E[N+0+0]=E[N+1+64]=W+X+1>>1,E[N+1+0]=E[N+2+64]=X+ee+1>>1,E[N+2+0]=E[N+3+64]=ee+ie+1>>1,E[N+3+0]=ie+me+1>>1,E[N+0+96]=xt(z,P,w),E[N+0+64]=xt(P,w,W),E[N+0+32]=E[N+1+96]=xt(w,W,X),E[N+1+32]=E[N+2+96]=xt(W,X,ee),E[N+2+32]=E[N+3+96]=xt(X,ee,ie),E[N+3+32]=xt(ee,ie,me)}function vn(E,N){var w=E[N+0-32],P=E[N+1-32],z=E[N+2-32],W=E[N+3-32],X=E[N+4-32],ee=E[N+5-32],ie=E[N+6-32],me=E[N+7-32];E[N+0+0]=w+P+1>>1,E[N+1+0]=E[N+0+64]=P+z+1>>1,E[N+2+0]=E[N+1+64]=z+W+1>>1,E[N+3+0]=E[N+2+64]=W+X+1>>1,E[N+0+32]=xt(w,P,z),E[N+1+32]=E[N+0+96]=xt(P,z,W),E[N+2+32]=E[N+1+96]=xt(z,W,X),E[N+3+32]=E[N+2+96]=xt(W,X,ee),E[N+3+64]=xt(X,ee,ie),E[N+3+96]=xt(ee,ie,me)}function Dr(E,N){var w=E[N-1+0],P=E[N-1+32],z=E[N-1+64],W=E[N-1+96];E[N+0+0]=w+P+1>>1,E[N+2+0]=E[N+0+32]=P+z+1>>1,E[N+2+32]=E[N+0+64]=z+W+1>>1,E[N+1+0]=xt(w,P,z),E[N+3+0]=E[N+1+32]=xt(P,z,W),E[N+3+32]=E[N+1+64]=xt(z,W,W),E[N+3+64]=E[N+2+64]=E[N+0+96]=E[N+1+96]=E[N+2+96]=E[N+3+96]=W}function zr(E,N){var w=E[N-1+0],P=E[N-1+32],z=E[N-1+64],W=E[N-1+96],X=E[N-1-32],ee=E[N+0-32],ie=E[N+1-32],me=E[N+2-32];E[N+0+0]=E[N+2+32]=w+X+1>>1,E[N+0+32]=E[N+2+64]=P+w+1>>1,E[N+0+64]=E[N+2+96]=z+P+1>>1,E[N+0+96]=W+z+1>>1,E[N+3+0]=xt(ee,ie,me),E[N+2+0]=xt(X,ee,ie),E[N+1+0]=E[N+3+32]=xt(w,X,ee),E[N+1+32]=E[N+3+64]=xt(P,w,X),E[N+1+64]=E[N+3+96]=xt(z,P,w),E[N+1+96]=xt(W,z,P)}function fr(E,N){var w;for(w=0;8>w;++w)s(E,N+32*w,E,N-32,8)}function di(E,N){var w;for(w=0;8>w;++w)r(E,N,E[N-1],8),N+=32}function nr(E,N,w){var P;for(P=0;8>P;++P)r(N,w+32*P,E,8)}function fi(E,N){var w,P=8;for(w=0;8>w;++w)P+=E[N+w-32]+E[N-1+32*w];nr(P>>4,E,N)}function fa(E,N){var w,P=4;for(w=0;8>w;++w)P+=E[N+w-32];nr(P>>3,E,N)}function sr(E,N){var w,P=4;for(w=0;8>w;++w)P+=E[N-1+32*w];nr(P>>3,E,N)}function _r(E,N){nr(128,E,N)}function br(E,N,w){var P=E[N-w],z=E[N+0],W=3*(z-P)+Gl[1020+E[N-2*w]-E[N+w]],X=vo[112+(W+4>>3)];E[N-w]=Ra[255+P+vo[112+(W+3>>3)]],E[N+0]=Ra[255+z-X]}function Pi(E,N,w,P){var z=E[N+0],W=E[N+w];return vr[255+E[N-2*w]-E[N-w]]>P||vr[255+W-z]>P}function Ji(E,N,w,P){return 4*vr[255+E[N-w]-E[N+0]]+vr[255+E[N-2*w]-E[N+w]]<=P}function le(E,N,w,P,z){var W=E[N-3*w],X=E[N-2*w],ee=E[N-w],ie=E[N+0],me=E[N+w],Ce=E[N+2*w],He=E[N+3*w];return 4*vr[255+ee-ie]+vr[255+X-me]>P?0:vr[255+E[N-4*w]-W]<=z&&vr[255+W-X]<=z&&vr[255+X-ee]<=z&&vr[255+He-Ce]<=z&&vr[255+Ce-me]<=z&&vr[255+me-ie]<=z}function _e(E,N,w,P){var z=2*P+1;for(P=0;16>P;++P)Ji(E,N+P,w,z)&&br(E,N+P,w)}function tt(E,N,w,P){var z=2*P+1;for(P=0;16>P;++P)Ji(E,N+P*w,1,z)&&br(E,N+P*w,1)}function Xe(E,N,w,P){var z;for(z=3;0<z;--z)_e(E,N+=4*w,w,P)}function rt(E,N,w,P){var z;for(z=3;0<z;--z)tt(E,N+=4,w,P)}function _t(E,N,w,P,z,W,X,ee){for(W=2*W+1;0<z--;){if(le(E,N,w,W,X))if(Pi(E,N,w,ee))br(E,N,w);else{var ie=E,me=N,Ce=w,He=ie[me-2*Ce],Ve=ie[me-Ce],Oe=ie[me+0],pt=ie[me+Ce],Ke=ie[me+2*Ce],Le=27*(lt=Gl[1020+3*(Oe-Ve)+Gl[1020+He-pt]])+63>>7,De=18*lt+63>>7,lt=9*lt+63>>7;ie[me-3*Ce]=Ra[255+ie[me-3*Ce]+lt],ie[me-2*Ce]=Ra[255+He+De],ie[me-Ce]=Ra[255+Ve+Le],ie[me+0]=Ra[255+Oe-Le],ie[me+Ce]=Ra[255+pt-De],ie[me+2*Ce]=Ra[255+Ke-lt]}N+=P}}function mt(E,N,w,P,z,W,X,ee){for(W=2*W+1;0<z--;){if(le(E,N,w,W,X))if(Pi(E,N,w,ee))br(E,N,w);else{var ie=E,me=N,Ce=w,He=ie[me-Ce],Ve=ie[me+0],Oe=ie[me+Ce],pt=vo[112+((Ke=3*(Ve-He))+4>>3)],Ke=vo[112+(Ke+3>>3)],Le=pt+1>>1;ie[me-2*Ce]=Ra[255+ie[me-2*Ce]+Le],ie[me-Ce]=Ra[255+He+Ke],ie[me+0]=Ra[255+Ve-pt],ie[me+Ce]=Ra[255+Oe-Le]}N+=P}}function Bt(E,N,w,P,z,W){_t(E,N,w,1,16,P,z,W)}function kt(E,N,w,P,z,W){_t(E,N,1,w,16,P,z,W)}function Ct(E,N,w,P,z,W){var X;for(X=3;0<X;--X)mt(E,N+=4*w,w,1,16,P,z,W)}function $t(E,N,w,P,z,W){var X;for(X=3;0<X;--X)mt(E,N+=4,1,w,16,P,z,W)}function Bn(E,N,w,P,z,W,X,ee){_t(E,N,z,1,8,W,X,ee),_t(w,P,z,1,8,W,X,ee)}function Kn(E,N,w,P,z,W,X,ee){_t(E,N,1,z,8,W,X,ee),_t(w,P,1,z,8,W,X,ee)}function Xn(E,N,w,P,z,W,X,ee){mt(E,N+4*z,z,1,8,W,X,ee),mt(w,P+4*z,z,1,8,W,X,ee)}function zn(E,N,w,P,z,W,X,ee){mt(E,N+4,1,z,8,W,X,ee),mt(w,P+4,1,z,8,W,X,ee)}function ha(){this.ba=new js,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ls,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function aa(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new H}function dn(){this.xb=this.a=0,this.l=new mn,this.ca=new js,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new aa,this.ab=0,this.gc=c(4,Gs),this.Oc=0}function vs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Tr(E,N,w,P,z,W,X){for(E=E==null?0:E[N+0],N=0;N<X;++N)z[W+N]=E+w[P+N]&255,E=z[W+N]}function Yo(E,N,w,P,z,W,X){var ee;if(E==null)Tr(null,null,w,P,z,W,X);else for(ee=0;ee<X;++ee)z[W+ee]=E[N+ee]+w[P+ee]&255}function Mi(E,N,w,P,z,W,X){if(E==null)Tr(null,null,w,P,z,W,X);else{var ee,ie=E[N+0],me=ie,Ce=ie;for(ee=0;ee<X;++ee)me=Ce+(ie=E[N+ee])-me,Ce=w[P+ee]+(-256&me?0>me?0:255:me)&255,me=ie,z[W+ee]=Ce}}function _o(E,N,w,P){var z=N.width,W=N.o;if(e(E!=null&&N!=null),0>w||0>=P||w+P>W)return null;if(!E.Cc){if(E.ga==null){var X;if(E.ga=new vs,(X=E.ga==null)||(X=N.width*N.o,e(E.Gb.length==0),E.Gb=l(X),E.Uc=0,E.Gb==null?X=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,X=1),X=!X),!X){X=E.ga;var ee=E.Fa,ie=E.P,me=E.qc,Ce=E.mb,He=E.nb,Ve=ie+1,Oe=me-1,pt=X.l;if(e(ee!=null&&Ce!=null&&N!=null),co[0]=null,co[1]=Tr,co[2]=Yo,co[3]=Mi,X.ca=Ce,X.tb=He,X.c=N.width,X.i=N.height,e(0<X.c&&0<X.i),1>=me)N=0;else if(X.$a=ee[ie+0]>>0&3,X.Z=ee[ie+0]>>2&3,X.Lc=ee[ie+0]>>4&3,ie=ee[ie+0]>>6&3,0>X.$a||1<X.$a||4<=X.Z||1<X.Lc||ie)N=0;else if(pt.put=ca,pt.ac=gs,pt.bc=Nn,pt.ma=X,pt.width=N.width,pt.height=N.height,pt.Da=N.Da,pt.v=N.v,pt.va=N.va,pt.j=N.j,pt.o=N.o,X.$a)e:{e(X.$a==1),N=Ts();t:for(;;){if(N==null){N=0;break e}if(e(X!=null),X.mc=N,N.c=X.c,N.i=X.i,N.l=X.l,N.l.ma=X,N.l.width=X.c,N.l.height=X.i,N.a=0,ue(N.m,ee,Ve,Oe),!$n(X.c,X.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&Ca(N.s)?(X.ic=1,ee=N.c*N.i,N.Ta=null,N.Ua=0,N.V=l(ee),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(X.ic=0,N=La(N,X.c)),!N))break t;N=1;break e}X.mc=null,N=0}else N=Oe>=X.c*X.i;X=!N}if(X)return null;E.ga.Lc!=1?E.Ga=0:P=W-w}e(E.ga!=null),e(w+P<=W);e:{if(N=(ee=E.ga).c,W=ee.l.o,ee.$a==0){if(Ve=E.rc,Oe=E.Vc,pt=E.Fa,ie=E.P+1+w*N,me=E.mb,Ce=E.nb+w*N,e(ie<=E.P+E.qc),ee.Z!=0)for(e(co[ee.Z]!=null),X=0;X<P;++X)co[ee.Z](Ve,Oe,pt,ie,me,Ce,N),Ve=me,Oe=Ce,Ce+=N,ie+=N;else for(X=0;X<P;++X)s(me,Ce,pt,ie,N),Ve=me,Oe=Ce,Ce+=N,ie+=N;E.rc=Ve,E.Vc=Oe}else{if(e(ee.mc!=null),N=w+P,e((X=ee.mc)!=null),e(N<=X.i),X.C>=N)N=1;else if(ee.ic||Me(),ee.ic){ee=X.V,Ve=X.Ba,Oe=X.c;var Ke=X.i,Le=(pt=1,ie=X.$/Oe,me=X.$%Oe,Ce=X.m,He=X.s,X.$),De=Oe*Ke,lt=Oe*N,gt=He.wc,ft=Le<lt?_s(He,me,ie):null;e(Le<=De),e(N<=Ke),e(Ca(He));t:for(;;){for(;!Ce.h&&Le<lt;){if(me&gt||(ft=_s(He,me,ie)),e(ft!=null),fe(Ce),256>(Ke=Fn(ft.G[0],ft.H[0],Ce)))ee[Ve+Le]=Ke,++Le,++me>=Oe&&(me=0,++ie<=N&&!(ie%16)&&bs(X,ie));else{if(!(280>Ke)){pt=0;break t}Ke=Ln(Ke-256,Ce);var qt,jt=Fn(ft.G[4],ft.H[4],Ce);if(fe(Ce),!(Le>=(jt=kn(Oe,jt=Ln(jt,Ce)))&&De-Le>=Ke)){pt=0;break t}for(qt=0;qt<Ke;++qt)ee[Ve+Le+qt]=ee[Ve+Le+qt-jt];for(Le+=Ke,me+=Ke;me>=Oe;)me-=Oe,++ie<=N&&!(ie%16)&&bs(X,ie);Le<lt&&me&gt&&(ft=_s(He,me,ie))}e(Ce.h==Y(Ce))}bs(X,ie>N?N:ie);break t}!pt||Ce.h&&Le<De?(pt=0,X.a=Ce.h?5:3):X.$=Le,N=pt}else N=Qt(X,X.V,X.Ba,X.c,X.i,N,ua);if(!N){P=0;break e}}w+P>=W&&(E.Cc=1),P=1}if(!P)return null;if(E.Cc&&((P=E.ga)!=null&&(P.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+w*z}function S(E,N,w,P,z,W){for(;0<z--;){var X,ee=E,ie=N+(w?1:0),me=E,Ce=N+(w?0:3);for(X=0;X<P;++X){var He=me[Ce+4*X];He!=255&&(He*=32897,ee[ie+4*X+0]=ee[ie+4*X+0]*He>>23,ee[ie+4*X+1]=ee[ie+4*X+1]*He>>23,ee[ie+4*X+2]=ee[ie+4*X+2]*He>>23)}N+=W}}function q(E,N,w,P,z){for(;0<P--;){var W;for(W=0;W<w;++W){var X=E[N+2*W+0],ee=15&(me=E[N+2*W+1]),ie=4369*ee,me=(240&me|me>>4)*ie>>16;E[N+2*W+0]=(240&X|X>>4)*ie>>16&240|(15&X|X<<4)*ie>>16>>4&15,E[N+2*W+1]=240&me|ee}N+=z}}function Ee(E,N,w,P,z,W,X,ee){var ie,me,Ce=255;for(me=0;me<z;++me){for(ie=0;ie<P;++ie){var He=E[N+ie];W[X+4*ie]=He,Ce&=He}N+=w,X+=ee}return Ce!=255}function Ae(E,N,w,P,z){var W;for(W=0;W<z;++W)w[P+W]=E[N+W]>>8}function Me(){Mr=S,Jn=q,Zn=Ee,Fs=Ae}function et(E,N,w){J[E]=function(P,z,W,X,ee,ie,me,Ce,He,Ve,Oe,pt,Ke,Le,De,lt,gt){var ft,qt=gt-1>>1,jt=ee[ie+0]|me[Ce+0]<<16,fn=He[Ve+0]|Oe[pt+0]<<16;e(P!=null);var Ut=3*jt+fn+131074>>2;for(N(P[z+0],255&Ut,Ut>>16,Ke,Le),W!=null&&(Ut=3*fn+jt+131074>>2,N(W[X+0],255&Ut,Ut>>16,De,lt)),ft=1;ft<=qt;++ft){var As=ee[ie+ft]|me[Ce+ft]<<16,Rs=He[Ve+ft]|Oe[pt+ft]<<16,ns=jt+As+fn+Rs+524296,Qn=ns+2*(As+fn)>>3;Ut=Qn+jt>>1,jt=(ns=ns+2*(jt+Rs)>>3)+As>>1,N(P[z+2*ft-1],255&Ut,Ut>>16,Ke,Le+(2*ft-1)*w),N(P[z+2*ft-0],255&jt,jt>>16,Ke,Le+(2*ft-0)*w),W!=null&&(Ut=ns+fn>>1,jt=Qn+Rs>>1,N(W[X+2*ft-1],255&Ut,Ut>>16,De,lt+(2*ft-1)*w),N(W[X+2*ft+0],255&jt,jt>>16,De,lt+(2*ft+0)*w)),jt=As,fn=Rs}1&gt||(Ut=3*jt+fn+131074>>2,N(P[z+gt-1],255&Ut,Ut>>16,Ke,Le+(gt-1)*w),W!=null&&(Ut=3*fn+jt+131074>>2,N(W[X+gt-1],255&Ut,Ut>>16,De,lt+(gt-1)*w)))}}function Nt(){ir[rr]=Lo,ir[Xo]=uo,ir[Ai]=Jo,ir[lo]=eu,ir[Ao]=tu,ir[Fi]=ql,ir[El]=nu,ir[_l]=uo,ir[Si]=eu,ir[Ci]=tu,ir[So]=ql}function Vt(E){return E&-16384?0>E?0:255:E>>sm}function Zt(E,N){return Vt((19077*E>>8)+(26149*N>>8)-14234)}function pn(E,N,w){return Vt((19077*E>>8)-(6419*N>>8)-(13320*w>>8)+8708)}function wn(E,N){return Vt((19077*E>>8)+(33050*N>>8)-17685)}function as(E,N,w,P,z){P[z+0]=Zt(E,w),P[z+1]=pn(E,N,w),P[z+2]=wn(E,N)}function Ks(E,N,w,P,z){P[z+0]=wn(E,N),P[z+1]=pn(E,N,w),P[z+2]=Zt(E,w)}function Xs(E,N,w,P,z){var W=pn(E,N,w);N=W<<3&224|wn(E,N)>>3,P[z+0]=248&Zt(E,w)|W>>5,P[z+1]=N}function ma(E,N,w,P,z){var W=240&wn(E,N)|15;P[z+0]=240&Zt(E,w)|pn(E,N,w)>>4,P[z+1]=W}function Hs(E,N,w,P,z){P[z+0]=255,as(E,N,w,P,z+1)}function ja(E,N,w,P,z){Ks(E,N,w,P,z),P[z+3]=255}function Rr(E,N,w,P,z){as(E,N,w,P,z),P[z+3]=255}function hr(E,N){return 0>E?0:E>N?N:E}function Or(E,N,w){J[E]=function(P,z,W,X,ee,ie,me,Ce,He){for(var Ve=Ce+(-2&He)*w;Ce!=Ve;)N(P[z+0],W[X+0],ee[ie+0],me,Ce),N(P[z+1],W[X+0],ee[ie+0],me,Ce+w),z+=2,++X,++ie,Ce+=2*w;1&He&&N(P[z+0],W[X+0],ee[ie+0],me,Ce)}}function qo(E,N,w){return w==0?E==0?N==0?6:5:N==0?4:0:w}function hi(E,N,w,P,z){switch(E>>>30){case 3:Pr(N,w,P,z,0);break;case 2:Us(N,w,P,z);break;case 1:va(N,w,P,z)}}function mi(E,N){var w,P,z=N.M,W=N.Nb,X=E.oc,ee=E.pc+40,ie=E.oc,me=E.pc+584,Ce=E.oc,He=E.pc+600;for(w=0;16>w;++w)X[ee+32*w-1]=129;for(w=0;8>w;++w)ie[me+32*w-1]=129,Ce[He+32*w-1]=129;for(0<z?X[ee-1-32]=ie[me-1-32]=Ce[He-1-32]=129:(r(X,ee-32-1,127,21),r(ie,me-32-1,127,9),r(Ce,He-32-1,127,9)),P=0;P<E.za;++P){var Ve=N.ya[N.aa+P];if(0<P){for(w=-1;16>w;++w)s(X,ee+32*w-4,X,ee+32*w+12,4);for(w=-1;8>w;++w)s(ie,me+32*w-4,ie,me+32*w+4,4),s(Ce,He+32*w-4,Ce,He+32*w+4,4)}var Oe=E.Gd,pt=E.Hd+P,Ke=Ve.ad,Le=Ve.Hc;if(0<z&&(s(X,ee-32,Oe[pt].y,0,16),s(ie,me-32,Oe[pt].f,0,8),s(Ce,He-32,Oe[pt].ea,0,8)),Ve.Za){var De=X,lt=ee-32+16;for(0<z&&(P>=E.za-1?r(De,lt,Oe[pt].y[15],4):s(De,lt,Oe[pt+1].y,0,4)),w=0;4>w;w++)De[lt+128+w]=De[lt+256+w]=De[lt+384+w]=De[lt+0+w];for(w=0;16>w;++w,Le<<=2)De=X,lt=ee+yl[w],jr[Ve.Ob[w]](De,lt),hi(Le,Ke,16*+w,De,lt)}else if(De=qo(P,z,Ve.Ob[0]),Co[De](X,ee),Le!=0)for(w=0;16>w;++w,Le<<=2)hi(Le,Ke,16*+w,X,ee+yl[w]);for(w=Ve.Gc,De=qo(P,z,Ve.Dd),pi[De](ie,me),pi[De](Ce,He),Le=Ke,De=ie,lt=me,255&(Ve=w>>0)&&(170&Ve?ar(Le,256,De,lt):Nr(Le,256,De,lt)),Ve=Ce,Le=He,255&(w>>=8)&&(170&w?ar(Ke,320,Ve,Le):Nr(Ke,320,Ve,Le)),z<E.Ub-1&&(s(Oe[pt].y,0,X,ee+480,16),s(Oe[pt].f,0,ie,me+224,8),s(Oe[pt].ea,0,Ce,He+224,8)),w=8*W*E.B,Oe=E.sa,pt=E.ta+16*P+16*W*E.R,Ke=E.qa,Ve=E.ra+8*P+w,Le=E.Ha,De=E.Ia+8*P+w,w=0;16>w;++w)s(Oe,pt+w*E.R,X,ee+32*w,16);for(w=0;8>w;++w)s(Ke,Ve+w*E.B,ie,me+32*w,8),s(Le,De+w*E.B,Ce,He+32*w,8)}}function Zi(E,N,w,P,z,W,X,ee,ie){var me=[0],Ce=[0],He=0,Ve=ie!=null?ie.kd:0,Oe=ie??new bn;if(E==null||12>w)return 7;Oe.data=E,Oe.w=N,Oe.ha=w,N=[N],w=[w],Oe.gb=[Oe.gb];e:{var pt=N,Ke=w,Le=Oe.gb;if(e(E!=null),e(Ke!=null),e(Le!=null),Le[0]=0,12<=Ke[0]&&!n(E,pt[0],"RIFF")){if(n(E,pt[0]+8,"WEBP")){Le=3;break e}var De=Je(E,pt[0]+4);if(12>De||4294967286<De){Le=3;break e}if(Ve&&De>Ke[0]-8){Le=7;break e}Le[0]=De,pt[0]+=12,Ke[0]-=12}Le=0}if(Le!=0)return Le;for(De=0<Oe.gb[0],w=w[0];;){e:{var lt=E;Ke=N,Le=w;var gt=me,ft=Ce,qt=pt=[0];if((Ut=He=[He])[0]=0,8>Le[0])Le=7;else{if(!n(lt,Ke[0],"VP8X")){if(Je(lt,Ke[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var jt=Je(lt,Ke[0]+8),fn=1+Ze(lt,Ke[0]+12);if(2147483648<=fn*(lt=1+Ze(lt,Ke[0]+15))){Le=3;break e}qt!=null&&(qt[0]=jt),gt!=null&&(gt[0]=fn),ft!=null&&(ft[0]=lt),Ke[0]+=18,Le[0]-=18,Ut[0]=1}Le=0}}if(He=He[0],pt=pt[0],Le!=0)return Le;if(Ke=!!(2&pt),!De&&He)return 3;if(W!=null&&(W[0]=!!(16&pt)),X!=null&&(X[0]=Ke),ee!=null&&(ee[0]=0),X=me[0],pt=Ce[0],He&&Ke&&ie==null){Le=0;break}if(4>w){Le=7;break}if(De&&He||!De&&!He&&!n(E,N[0],"ALPH")){w=[w],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{jt=E,Le=N,De=w;var Ut=Oe.gb;gt=Oe.na,ft=Oe.P,qt=Oe.Sa,fn=22,e(jt!=null),e(De!=null),lt=Le[0];var As=De[0];for(e(gt!=null),e(qt!=null),gt[0]=null,ft[0]=null,qt[0]=0;;){if(Le[0]=lt,De[0]=As,8>As){Le=7;break e}var Rs=Je(jt,lt+4);if(4294967286<Rs){Le=3;break e}var ns=8+Rs+1&-2;if(fn+=ns,0<Ut&&fn>Ut){Le=3;break e}if(!n(jt,lt,"VP8 ")||!n(jt,lt,"VP8L")){Le=0;break e}if(As[0]<ns){Le=7;break e}n(jt,lt,"ALPH")||(gt[0]=jt,ft[0]=lt+8,qt[0]=Rs),lt+=ns,As-=ns}}if(w=w[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],Le!=0)break}w=[w],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(Ut=E,Le=N,De=w,gt=Oe.gb[0],ft=Oe.Ja,qt=Oe.xa,jt=Le[0],lt=!n(Ut,jt,"VP8 "),fn=!n(Ut,jt,"VP8L"),e(Ut!=null),e(De!=null),e(ft!=null),e(qt!=null),8>De[0])Le=7;else{if(lt||fn){if(Ut=Je(Ut,jt+4),12<=gt&&Ut>gt-12){Le=3;break e}if(Ve&&Ut>De[0]-8){Le=7;break e}ft[0]=Ut,Le[0]+=8,De[0]-=8,qt[0]=fn}else qt[0]=5<=De[0]&&Ut[jt+0]==47&&!(Ut[jt+4]>>5),ft[0]=De[0];Le=0}if(w=w[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],N=N[0],Le!=0)break;if(4294967286<Oe.Ja)return 3;if(ee==null||Ke||(ee[0]=Oe.xa?2:1),X=[X],pt=[pt],Oe.xa){if(5>w){Le=7;break}ee=X,Ve=pt,Ke=W,E==null||5>w?E=0:5<=w&&E[N+0]==47&&!(E[N+4]>>5)?(De=[0],Ut=[0],gt=[0],ue(ft=new M,E,N,w),Xt(ft,De,Ut,gt)?(ee!=null&&(ee[0]=De[0]),Ve!=null&&(Ve[0]=Ut[0]),Ke!=null&&(Ke[0]=gt[0]),E=1):E=0):E=0}else{if(10>w){Le=7;break}ee=pt,E==null||10>w||!ea(E,N+3,w-3)?E=0:(Ve=E[N+0]|E[N+1]<<8|E[N+2]<<16,Ke=16383&(E[N+7]<<8|E[N+6]),E=16383&(E[N+9]<<8|E[N+8]),1&Ve||3<(Ve>>1&7)||!(Ve>>4&1)||Ve>>5>=Oe.Ja||!Ke||!E?E=0:(X&&(X[0]=Ke),ee&&(ee[0]=E),E=1))}if(!E||(X=X[0],pt=pt[0],He&&(me[0]!=X||Ce[0]!=pt)))return 3;ie!=null&&(ie[0]=Oe,ie.offset=N-ie.w,e(4294967286>N-ie.w),e(ie.offset==ie.ha-w));break}return Le==0||Le==7&&He&&ie==null?(W!=null&&(W[0]|=Oe.na!=null&&0<Oe.na.length),P!=null&&(P[0]=X),z!=null&&(z[0]=pt),0):Le}function $r(E,N,w){var P=N.width,z=N.height,W=0,X=0,ee=P,ie=z;if(N.Da=E!=null&&0<E.Da,N.Da&&(ee=E.cd,ie=E.bd,W=E.v,X=E.j,11>w||(W&=-2,X&=-2),0>W||0>X||0>=ee||0>=ie||W+ee>P||X+ie>z))return 0;if(N.v=W,N.j=X,N.va=W+ee,N.o=X+ie,N.U=ee,N.T=ie,N.da=E!=null&&0<E.da,N.da){if(!Fe(ee,ie,w=[E.ib],W=[E.hb]))return 0;N.ib=w[0],N.hb=W[0]}return N.ob=E!=null&&E.ob,N.Kb=E==null||!E.Sd,N.da&&(N.ob=N.ib<3*P/4&&N.hb<3*z/4,N.Kb=0),1}function zo(E){if(E==null)return 2;if(11>E.S){var N=E.f.RGBA;N.fb+=(E.height-1)*N.A,N.A=-N.A}else N=E.f.kb,E=E.height,N.O+=(E-1)*N.fa,N.fa=-N.fa,N.N+=(E-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(E-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(E-1)*N.lb,N.lb=-N.lb);return 0}function Qi(E,N,w,P){if(P==null||0>=E||0>=N)return 2;if(w!=null){if(w.Da){var z=w.cd,W=w.bd,X=-2&w.v,ee=-2&w.j;if(0>X||0>ee||0>=z||0>=W||X+z>E||ee+W>N)return 2;E=z,N=W}if(w.da){if(!Fe(E,N,z=[w.ib],W=[w.hb]))return 2;E=z[0],N=W[0]}}P.width=E,P.height=N;e:{var ie=P.width,me=P.height;if(E=P.S,0>=ie||0>=me||!(E>=rr&&13>E))E=2;else{if(0>=P.Rd&&P.sd==null){X=W=z=N=0;var Ce=(ee=ie*ff[E])*me;if(11>E||(W=(me+1)/2*(N=(ie+1)/2),E==12&&(X=(z=ie)*me)),(me=l(Ce+2*W+X))==null){E=1;break e}P.sd=me,11>E?((ie=P.f.RGBA).eb=me,ie.fb=0,ie.A=ee,ie.size=Ce):((ie=P.f.kb).y=me,ie.O=0,ie.fa=ee,ie.Fd=Ce,ie.f=me,ie.N=0+Ce,ie.Ab=N,ie.Cd=W,ie.ea=me,ie.W=0+Ce+W,ie.Db=N,ie.Ed=W,E==12&&(ie.F=me,ie.J=0+Ce+2*W),ie.Tc=X,ie.lb=z)}if(N=1,z=P.S,W=P.width,X=P.height,z>=rr&&13>z)if(11>z)E=P.f.RGBA,N&=(ee=Math.abs(E.A))*(X-1)+W<=E.size,N&=ee>=W*ff[z],N&=E.eb!=null;else{E=P.f.kb,ee=(W+1)/2,Ce=(X+1)/2,ie=Math.abs(E.fa),me=Math.abs(E.Ab);var He=Math.abs(E.Db),Ve=Math.abs(E.lb),Oe=Ve*(X-1)+W;N&=ie*(X-1)+W<=E.Fd,N&=me*(Ce-1)+ee<=E.Cd,N=(N&=He*(Ce-1)+ee<=E.Ed)&ie>=W&me>=ee&He>=ee,N&=E.y!=null,N&=E.f!=null,N&=E.ea!=null,z==12&&(N&=Ve>=W,N&=Oe<=E.Tc,N&=E.F!=null)}else N=0;E=N?0:2}}return E!=0||w!=null&&w.fd&&(E=zo(P)),E}var ya=64,ki=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ji=24,bo=32,$o=8,mr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(E){return E},J.Predictor2=function(E,N,w){return N[w+0]},J.Predictor3=function(E,N,w){return N[w+1]},J.Predictor4=function(E,N,w){return N[w-1]},J.Predictor5=function(E,N,w){return st(st(E,N[w+1]),N[w+0])},J.Predictor6=function(E,N,w){return st(E,N[w-1])},J.Predictor7=function(E,N,w){return st(E,N[w+0])},J.Predictor8=function(E,N,w){return st(N[w-1],N[w+0])},J.Predictor9=function(E,N,w){return st(N[w+0],N[w+1])},J.Predictor10=function(E,N,w){return st(st(E,N[w-1]),st(N[w+0],N[w+1]))},J.Predictor11=function(E,N,w){var P=N[w+0];return 0>=Rt(P>>24&255,E>>24&255,(N=N[w-1])>>24&255)+Rt(P>>16&255,E>>16&255,N>>16&255)+Rt(P>>8&255,E>>8&255,N>>8&255)+Rt(255&P,255&E,255&N)?P:E},J.Predictor12=function(E,N,w){var P=N[w+0];return(yt((E>>24&255)+(P>>24&255)-((N=N[w-1])>>24&255))<<24|yt((E>>16&255)+(P>>16&255)-(N>>16&255))<<16|yt((E>>8&255)+(P>>8&255)-(N>>8&255))<<8|yt((255&E)+(255&P)-(255&N)))>>>0},J.Predictor13=function(E,N,w){var P=N[w-1];return(Pt((E=st(E,N[w+0]))>>24&255,P>>24&255)<<24|Pt(E>>16&255,P>>16&255)<<16|Pt(E>>8&255,P>>8&255)<<8|Pt(E>>0&255,P>>0&255))>>>0};var Ac=J.PredictorAdd0;J.PredictorAdd1=Ft,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var gl=J.PredictorAdd2;Lt("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),Lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Vl,Wr=J.ColorIndexInverseTransform,Ba=J.MapARGB,eo=J.VP8LColorIndexInverseTransformAlpha,xl=J.MapAlpha,Ni=J.VP8LPredictorsAdd=[];Ni.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var to,pr,Na,Kr,Ua,yr,Xr,Pr,Us,ar,va,Nr,To,vi,Wo,no,so,ao,yo,Ko,ro,Bi,No,ra,Mr,Jn,Zn,Fs,pa=l(511),Jr=l(2041),io=l(225),oo=l(767),Ui=0,Gl=Jr,vo=io,Ra=oo,vr=pa,rr=0,Xo=1,Ai=2,lo=3,Ao=4,Fi=5,El=6,_l=7,Si=8,Ci=9,So=10,bl=[2,3,7],kr=[3,3,11],$=[280,256,256,256,40],Se=[0,1,1,1,0],ot=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],at=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],St=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Mt=8,It=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wt=null,an=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],is=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ga=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hl=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Tl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Co=[],jr=[],pi=[],cf=1,Yl=2,co=[],ir=[];et("UpsampleRgbLinePair",as,3),et("UpsampleBgrLinePair",Ks,3),et("UpsampleRgbaLinePair",Rr,4),et("UpsampleBgraLinePair",ja,4),et("UpsampleArgbLinePair",Hs,4),et("UpsampleRgba4444LinePair",ma,2),et("UpsampleRgb565LinePair",Xs,2);var Lo=J.UpsampleRgbLinePair,Jo=J.UpsampleBgrLinePair,uo=J.UpsampleRgbaLinePair,eu=J.UpsampleBgraLinePair,tu=J.UpsampleArgbLinePair,ql=J.UpsampleRgba4444LinePair,nu=J.UpsampleRgb565LinePair,fo=16,$a=1<<fo-1,Zo=-227,su=482,sm=6,uf=0,am=l(256),Wa=l(256),Qu=l(256),Sc=l(256),Cc=l(su-Zo),ed=l(su-Zo);Or("YuvToRgbRow",as,3),Or("YuvToBgrRow",Ks,3),Or("YuvToRgbaRow",Rr,4),Or("YuvToBgraRow",ja,4),Or("YuvToArgbRow",Hs,4),Or("YuvToRgba4444Row",ma,2),Or("YuvToRgb565Row",Xs,2);var yl=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wo=[0,2,8],rm=[8,7,6,4,4,2,2,2,1,1,1,1],df=1;this.WebPDecodeRGBA=function(E,N,w,P,z){var W=Xo,X=new ha,ee=new js;X.ba=ee,ee.S=W,ee.width=[ee.width],ee.height=[ee.height];var ie=ee.width,me=ee.height,Ce=new ln;if(Ce==null||E==null)var He=2;else e(Ce!=null),He=Zi(E,N,w,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if(He!=0?ie=0:(ie!=null&&(ie[0]=Ce.width[0]),me!=null&&(me[0]=Ce.height[0]),ie=1),ie){ee.width=ee.width[0],ee.height=ee.height[0],P!=null&&(P[0]=ee.width),z!=null&&(z[0]=ee.height);e:{if(P=new mn,(z=new bn).data=E,z.w=N,z.ha=w,z.kd=1,N=[0],e(z!=null),((E=Zi(z.data,z.w,z.ha,null,null,null,N,null,z))==0||E==7)&&N[0]&&(E=4),(N=E)==0){if(e(X!=null),P.data=z.data,P.w=z.w+z.offset,P.ha=z.ha-z.offset,P.put=ca,P.ac=gs,P.bc=Nn,P.ma=X,z.xa){if((E=Ts())==null){X=1;break e}if(function(Ve,Oe){var pt=[0],Ke=[0],Le=[0];t:for(;;){if(Ve==null)return 0;if(Oe==null)return Ve.a=2,0;if(Ve.l=Oe,Ve.a=0,ue(Ve.m,Oe.data,Oe.w,Oe.ha),!Xt(Ve.m,pt,Ke,Le)){Ve.a=3;break t}if(Ve.xb=Yl,Oe.width=pt[0],Oe.height=Ke[0],!$n(pt[0],Ke[0],1,Ve,null))break t;return 1}return e(Ve.a!=0),0}(E,P)){if(P=(N=Qi(P.width,P.height,X.Oa,X.ba))==0){t:{P=E;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((w=P.l)!=null),e((z=w.ma)!=null),P.xb!=0){if(P.ca=z.ba,P.tb=z.tb,e(P.ca!=null),!$r(z.Oa,w,lo)){P.a=2;break n}if(!La(P,w.width)||w.da)break n;if((w.da||Cn(P.ca.S))&&Me(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&Me()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!Qe(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Qt(P,P.V,P.Ba,P.c,P.i,w.o,er))break n;z.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(N=E.a)}else N=E.a}else{if((E=new Hr)==null){X=1;break e}if(E.Fa=z.na,E.P=z.P,E.qc=z.Sa,Yr(E,P)){if((N=Qi(P.width,P.height,X.Oa,X.ba))==0){if(E.Aa=0,w=X.Oa,e((z=E)!=null),w!=null){if(0<(ie=0>(ie=w.Md)?0:100<ie?255:255*ie/100)){for(me=Ce=0;4>me;++me)12>(He=z.pb[me]).lc&&(He.ia=ie*rm[0>He.lc?0:He.lc]>>3),Ce|=He.ia;Ce&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=w.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}Ns(E,P)||(N=E.a)}}else N=E.a}N==0&&X.Oa!=null&&X.Oa.fd&&(N=zo(X.ba))}X=N}W=X!=0?null:11>W?ee.f.RGBA.eb:ee.f.kb.y}else W=null;return W};var ff=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(J,oe){for(var xe="",F=0;F<4;F++)xe+=String.fromCharCode(J[oe++]);return xe}function _(J,oe){return(J[oe+0]<<0|J[oe+1]<<8|J[oe+2]<<16)>>>0}function b(J,oe){return(J[oe+0]<<0|J[oe+1]<<8|J[oe+2]<<16|J[oe+3]<<24)>>>0}new f;var v=[0],y=[0],C=[],L=new f,O=t,I=function(J,oe){var xe={},F=0,H=!1,re=0,K=0;if(xe.frames=[],!function(k,Y,Z,fe){for(var Ne=0;Ne<fe;Ne++)if(k[Y+Ne]!=Z.charCodeAt(Ne))return!0;return!1}(J,oe,"RIFF",4)){for(b(J,oe+=4),oe+=8;oe<J.length;){var Te=h(J,oe),G=b(J,oe+=4);oe+=4;var he=G+(1&G);switch(Te){case"VP8 ":case"VP8L":xe.frames[F]===void 0&&(xe.frames[F]={}),(V=xe.frames[F]).src_off=H?K:oe-8,V.src_size=re+G+8,F++,H&&(H=!1,re=0,K=0);break;case"VP8X":(V=xe.header={}).feature_flags=J[oe];var ue=oe+4;V.canvas_width=1+_(J,ue),ue+=3,V.canvas_height=1+_(J,ue),ue+=3;break;case"ALPH":H=!0,re=he+8,K=oe-8;break;case"ANIM":(V=xe.header).bgcolor=b(J,oe),ue=oe+4,V.loop_count=(ce=J)[(M=ue)+0]<<0|ce[M+1]<<8,ue+=2;break;case"ANMF":var ae,V;(V=xe.frames[F]={}).offset_x=2*_(J,oe),oe+=3,V.offset_y=2*_(J,oe),oe+=3,V.width=1+_(J,oe),oe+=3,V.height=1+_(J,oe),oe+=3,V.duration=_(J,oe),oe+=3,ae=J[oe++],V.dispose=1&ae,V.blend=ae>>1&1}Te!="ANMF"&&(oe+=he)}var ce,M;return xe}}(O,0);I.response=O,I.rgbaoutput=!0,I.dataurl=!1;var j=I.header?I.header:null,R=I.frames?I.frames:null;if(j){j.loop_counter=j.loop_count,v=[j.canvas_height],y=[j.canvas_width];for(var U=0;U<R.length&&R[U].blend!=0;U++);}var te=R[0],Q=L.WebPDecodeRGBA(O,te.src_off,te.src_size,y,v);te.rgba=Q,te.imgwidth=y[0],te.imgheight=v[0];for(var ne=0;ne<y[0]*v[0]*4;ne++)C[ne]=Q[ne];return this.width=y,this.height=v,this.data=C,this}(function(t){var e=function(){return typeof dp=="function"},n=function(v,y,C,L){var O=4,I=c;switch(L){case t.image_compression.FAST:O=1,I=l;break;case t.image_compression.MEDIUM:O=6,I=d;break;case t.image_compression.SLOW:O=9,I=f}v=s(v,y,C,I);var j=dp(v,{level:O});return t.__addimage__.arrayBufferToBinaryString(j)},s=function(v,y,C,L){for(var O,I,j,R=v.length/y,U=new Uint8Array(v.length+R),te=_(),Q=0;Q<R;Q+=1){if(j=Q*y,O=v.subarray(j,j+y),L)U.set(L(O,C,I),j+Q);else{for(var ne,J=te.length,oe=[];ne<J;ne+=1)oe[ne]=te[ne](O,C,I);var xe=b(oe.concat());U.set(oe[xe],j+Q)}I=O}return U},r=function(v){var y=Array.apply([],v);return y.unshift(0),y},l=function(v,y){var C,L=[],O=v.length;L[0]=1;for(var I=0;I<O;I+=1)C=v[I-y]||0,L[I+1]=v[I]-C+256&255;return L},c=function(v,y,C){var L,O=[],I=v.length;O[0]=2;for(var j=0;j<I;j+=1)L=C&&C[j]||0,O[j+1]=v[j]-L+256&255;return O},d=function(v,y,C){var L,O,I=[],j=v.length;I[0]=3;for(var R=0;R<j;R+=1)L=v[R-y]||0,O=C&&C[R]||0,I[R+1]=v[R]+256-(L+O>>>1)&255;return I},f=function(v,y,C){var L,O,I,j,R=[],U=v.length;R[0]=4;for(var te=0;te<U;te+=1)L=v[te-y]||0,O=C&&C[te]||0,I=C&&C[te-y]||0,j=h(L,O,I),R[te+1]=v[te]-j+256&255;return R},h=function(v,y,C){if(v===y&&y===C)return v;var L=Math.abs(y-C),O=Math.abs(v-C),I=Math.abs(v+y-C-C);return L<=O&&L<=I?v:O<=I?y:C},_=function(){return[r,l,c,d,f]},b=function(v){var y=v.map(function(C){return C.reduce(function(L,O){return L+Math.abs(O)},0)});return y.indexOf(Math.min.apply(null,y))};t.processPNG=function(v,y,C,L){var O,I,j,R,U,te,Q,ne,J,oe,xe,F,H,re,K,Te=this.decode.FLATE_DECODE,G="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(j=new iD(v)).imgData,I=j.bits,O=j.colorSpace,U=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){J=(ne=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,xe=new Uint8Array(J*j.colors),oe=new Uint8Array(J);var he,ue=j.pixelBitlength-j.bits;for(re=0,K=0;re<J;re++){for(H=ne[re],he=0;he<ue;)xe[K++]=H>>>he&255,he+=j.bits;oe[re]=H>>>he&255}}if(j.bits===16){J=(ne=new Uint32Array(j.decodePixels().buffer)).length,xe=new Uint8Array(J*(32/j.pixelBitlength)*j.colors),oe=new Uint8Array(J*(32/j.pixelBitlength)),F=j.colors>1,re=0,K=0;for(var ae=0;re<J;)H=ne[re++],xe[K++]=H>>>0&255,F&&(xe[K++]=H>>>16&255,H=ne[re++],xe[K++]=H>>>0&255),oe[ae++]=H>>>16&255;I=8}L!==t.image_compression.NONE&&e()?(v=n(xe,j.width*j.colors,j.colors,L),Q=n(oe,j.width,1,L)):(v=xe,Q=oe,Te=void 0)}if(j.colorType===3&&(O=this.color_spaces.INDEXED,te=j.palette,j.transparency.indexed)){var V=j.transparency.indexed,ce=0;for(re=0,J=V.length;re<J;++re)ce+=V[re];if((ce/=255)===J-1&&V.indexOf(0)!==-1)R=[V.indexOf(0)];else if(ce!==J){for(ne=j.decodePixels(),oe=new Uint8Array(ne.length),re=0,J=ne.length;re<J;re++)oe[re]=V[ne[re]];Q=n(oe,j.width,1)}}var M=function(k){var Y;switch(k){case t.image_compression.FAST:Y=11;break;case t.image_compression.MEDIUM:Y=13;break;case t.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(L);return Te===this.decode.FLATE_DECODE&&(G="/Predictor "+M+" "),G+="/Colors "+U+" /BitsPerComponent "+I+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:C,data:v,index:y,filter:Te,decodeParameters:G,transparency:R,palette:te,sMask:Q,predictor:M,width:j.width,height:j.height,bitsPerComponent:I,colorSpace:O}}}})(yn.API),function(t){t.processGIF89A=function(e,n,s,r){var l=new oD(e),c=l.width,d=l.height,f=[];l.decodeAndBlitFrameRGBA(0,f);var h={data:f,width:c,height:d},_=new w0(100).encode(h,100);return t.processJPEG.call(this,_,n,s,r)},t.processGIF87A=t.processGIF89A}(yn.API),jo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:s,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){na.log("bit decode error:"+n)}},jo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var l=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+8*r*4,d=0;d<8&&8*r+d<this.width;d++){var f=this.palette[l>>7-d&1];this.data[c+4*d]=f.blue,this.data[c+4*d+1]=f.green,this.data[c+4*d+2]=f.red,this.data[c+4*d+3]=255}n!==0&&(this.pos+=4-n)}},jo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var l=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+2*r*4,d=l>>4,f=15&l,h=this.palette[d];if(this.data[c]=h.blue,this.data[c+1]=h.green,this.data[c+2]=h.red,this.data[c+3]=255,2*r+1>=this.width)break;h=this.palette[f],this.data[c+4]=h.blue,this.data[c+4+1]=h.green,this.data[c+4+2]=h.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},jo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var r=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*s;if(r<this.palette.length){var c=this.palette[r];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},jo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,d=(l>>5&e)/e*255|0,f=(l>>10&e)/e*255|0,h=l>>15?255:0,_=s*this.width*4+4*r;this.data[_]=f,this.data[_+1]=d,this.data[_+2]=c,this.data[_+3]=h}this.pos+=t}},jo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,f=(c>>5&n)/n*255|0,h=(c>>11)/e*255|0,_=r*this.width*4+4*l;this.data[_]=h,this.data[_+1]=f,this.data[_+2]=d,this.data[_+3]=255}this.pos+=t}},jo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=l,this.data[c+1]=r,this.data[c+2]=s,this.data[c+3]=255}this.pos+=this.width%4}},jo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*n;this.data[d]=l,this.data[d+1]=r,this.data[d+2]=s,this.data[d+3]=c}},jo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,s,r){var l=new jo(e,!1),c=l.width,d=l.height,f={data:l.getData(),width:c,height:d},h=new w0(100).encode(f,100);return t.processJPEG.call(this,h,n,s,r)}}(yn.API),a2.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,s,r){var l=new a2(e),c=l.width,d=l.height,f={data:l.getData(),width:c,height:d},h=new w0(100).encode(f,100);return t.processJPEG.call(this,h,n,s,r)}}(yn.API),yn.API.processRGBA=function(t,e,n){for(var s=t.data,r=s.length,l=new Uint8Array(r/4*3),c=new Uint8Array(r/4),d=0,f=0,h=0;h<r;h+=4){var _=s[h],b=s[h+1],v=s[h+2],y=s[h+3];l[d++]=_,l[d++]=b,l[d++]=v,c[f++]=y}var C=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},yn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},wu=yn.API,uh=wu.getCharWidthsArray=function(t,e){var n,s,r=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:r.metadata.Unicode.widths,f=d.fof?d.fof:1,h=e.kerning?e.kerning:r.metadata.Unicode.kerning,_=h.fof?h.fof:1,b=e.doKerning!==!1,v=0,y=t.length,C=0,L=d[0]||f,O=[];for(n=0;n<y;n++)s=t.charCodeAt(n),typeof r.metadata.widthOfString=="function"?O.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(s))+c*(1e3/l)||0)/1e3):(v=b&&$s(h[s])==="object"&&!isNaN(parseInt(h[s][C],10))?h[s][C]/_:0,O.push((d[s]||L)/f+v)),C=s;return O},e2=wu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return wu.processArabic&&(t=wu.processArabic(t)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(t,n,r)/n:uh.apply(this,arguments).reduce(function(l,c){return l+c},0)},t2=function(t,e,n,s){for(var r=[],l=0,c=t.length,d=0;l!==c&&d+e[l]<n;)d+=e[l],l++;r.push(t.slice(0,l));var f=l;for(d=0;l!==c;)d+e[l]>s&&(r.push(t.slice(f,l)),d=0,f=l),d+=e[l],l++;return f!==l&&r.push(t.slice(f,l)),r},n2=function(t,e,n){n||(n={});var s,r,l,c,d,f,h,_=[],b=[_],v=n.textIndent||0,y=0,C=0,L=t.split(" "),O=uh.apply(this,[" ",n])[0];if(f=n.lineIndent===-1?L[0].length+2:n.lineIndent||0){var I=Array(f).join(" "),j=[];L.map(function(U){(U=U.split(/\s*\n/)).length>1?j=j.concat(U.map(function(te,Q){return(Q&&te.length?`
`:"")+te})):j.push(U[0])}),L=j,f=e2.apply(this,[I,n])}for(l=0,c=L.length;l<c;l++){var R=0;if(s=L[l],f&&s[0]==`
`&&(s=s.substr(1),R=1),v+y+(C=(r=uh.apply(this,[s,n])).reduce(function(U,te){return U+te},0))>e||R){if(C>e){for(d=t2.apply(this,[s,r,e-(v+y),e]),_.push(d.shift()),_=[d.pop()];d.length;)b.push([d.shift()]);C=r.slice(s.length-(_[0]?_[0].length:0)).reduce(function(U,te){return U+te},0)}else _=[s];b.push(_),v=C+f,y=O}else _.push(s),v+=y+C,y=O}return h=f?function(U,te){return(te?I:"")+U.join(" ")}:function(U){return U.join(" ")},b.map(h)},wu.splitTextToSize=function(t,e,n){var s,r=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(_){if(_.widths&&_.kerning)return{widths:_.widths,kerning:_.kerning};var b=this.internal.getFont(_.fontName,_.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);s=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/r;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,l.lineIndent=n.lineIndent;var d,f,h=[];for(d=0,f=s.length;d<f;d++)h=h.concat(n2.apply(this,[s[d],c,l]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},s={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r],s["0123456789abcdef"[r]]=e[r];var l=function(b){return"0x"+parseInt(b,10).toString(16)},c=t.__fontmetrics__.compress=function(b){var v,y,C,L,O=["{"];for(var I in b){if(v=b[I],isNaN(parseInt(I,10))?y="'"+I+"'":(I=parseInt(I,10),y=(y=l(I).slice(2)).slice(0,-1)+s[y.slice(-1)]),typeof v=="number")v<0?(C=l(v).slice(3),L="-"):(C=l(v).slice(2),L=""),C=L+C.slice(0,-1)+s[C.slice(-1)];else{if($s(v)!=="object")throw new Error("Don't know what to do with value type "+$s(v)+".");C=c(v)}O.push(y+C)}return O.push("}"),O.join("")},d=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,y,C,L,O={},I=1,j=O,R=[],U="",te="",Q=b.length-1,ne=1;ne<Q;ne+=1)(L=b[ne])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(L):L=="{"?(R.push([j,C]),j={},C=void 0):L=="}"?((y=R.pop())[0][y[1]]=j,C=void 0,j=y[0]):L=="-"?I=-1:C===void 0?n.hasOwnProperty(L)?(U+=n[L],C=parseInt(U,16)*I,I=1,U=""):U+=L:n.hasOwnProperty(L)?(te+=n[L],j[C]=parseInt(te,16)*I,I=1,C=void 0,te=""):te+=L;return O},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},_={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var v=b.font,y=_.Unicode[v.postScriptName];y&&(v.metadata.Unicode={},v.metadata.Unicode.widths=y.widths,v.metadata.Unicode.kerning=y.kerning);var C=h.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])}(yn.API),function(t){var e=function(n){for(var s=n.length,r=new Uint8Array(s),l=0;l<s;l++)r[l]=n.charCodeAt(l);return r};t.API.events.push(["addFont",function(n){var s=void 0,r=n.font,l=n.instance;if(!r.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(s=l.existsFileInVFS(r.postScriptName)===!1?l.loadFile(r.postScriptName):l.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Xd(d)),c.metadata=t.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(r,s)}}])}(yn),function(t){function e(){return(Dn.canvg?Promise.resolve(Dn.canvg):ip(()=>import("./index.es-Cni-JfwB.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}yn.API.addSvgAsImage=function(n,s,r,l,c,d,f,h){if(isNaN(s)||isNaN(r))throw na.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw na.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var _=document.createElement("canvas");_.width=l,_.height=c;var b=_.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,_.width,_.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return e().then(function(C){return C.fromString(b,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(v)}).then(function(){y.addImage(_.toDataURL("image/jpeg",1),s,r,l,c,f,h)})}}(),yn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var r=0;r<this.internal.pages[s].length;r++)this.internal.pages[s][r]=this.internal.pages[s][r].replace(e,n);return this},yn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var s,r,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),f=[],h=0,_=0,b=0;function v(C,L){var O,I=!1;for(O=0;O<C.length;O+=1)C[O]===L&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var y=d.length;for(b=0;b<y;b+=1)n[d[b]].value=n[d[b]].defaultValue,n[d[b]].explicitSet=!1}if($s(t)==="object"){for(r in t)if(l=t[r],v(d,r)&&l!==void 0){if(n[r].type==="boolean"&&typeof l=="boolean")n[r].value=l;else if(n[r].type==="name"&&v(n[r].valueSet,l))n[r].value=l;else if(n[r].type==="integer"&&Number.isInteger(l))n[r].value=l;else if(n[r].type==="array"){for(h=0;h<l.length;h+=1)if(s=!0,l[h].length===1&&typeof l[h][0]=="number")f.push(String(l[h]-1));else if(l[h].length>1){for(_=0;_<l[h].length;_+=1)typeof l[h][_]!="number"&&(s=!1);s===!0&&f.push([l[h][0]-1,l[h][1]-1].join(" "))}n[r].value="["+f.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,L=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?L.push("/"+C+" /"+n[C].value):L.push("/"+C+" "+n[C].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(s)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),h=l.length+c.length+d.length+r.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(r+l+c+d+f),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(s,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(yn.API),function(t){var e=t.API,n=e.pdfEscape16=function(l,c){for(var d,f=c.metadata.Unicode.widths,h=["","0","00","000","0000"],_=[""],b=0,v=l.length;b<v;++b){if(d=c.metadata.characterToGlyph(l.charCodeAt(b)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=l.charCodeAt(b),f.indexOf(d)==-1&&(f.push(d),f.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return _.join("");d=d.toString(16),_.push(h[4-d.length],d)}return _.join("")},s=function(l){var c,d,f,h,_,b,v;for(_=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,v=(d=Object.keys(l).sort(function(y,C){return y-C})).length;b<v;b++)c=d[b],f.length>=100&&(_+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(h=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+h+">"));return f.length&&(_+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),_+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(c){var d=c.font,f=c.out,h=c.newObject,_=c.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="Identity-H"){for(var b=d.metadata.Unicode.widths,v=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",C=0;C<v.length;C++)y+=String.fromCharCode(v[C]);var L=h();_({data:y,addLength1:!0,objectId:L}),f("endobj");var O=h();_({data:s(d.metadata.toUnicode),addLength1:!0,objectId:O}),f("endobj");var I=h();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Pu(d.fontName)),f("/FontFile2 "+L+" 0 R"),f("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),f("/Flags "+d.metadata.flags),f("/StemV "+d.metadata.stemV),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f(">>"),f("endobj");var j=h();f("<<"),f("/Type /Font"),f("/BaseFont /"+Pu(d.fontName)),f("/FontDescriptor "+I+" 0 R"),f("/W "+t.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+d.encoding+")"),f(">>"),f(">>"),f("endobj"),d.objectNumber=h(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+O+" 0 R"),f("/BaseFont /"+Pu(d.fontName)),f("/Encoding /"+d.encoding),f("/DescendantFonts ["+j+" 0 R]"),f(">>"),f("endobj"),d.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(c){var d=c.font,f=c.out,h=c.newObject,_=c.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var b=d.metadata.rawData,v="",y=0;y<b.length;y++)v+=String.fromCharCode(b[y]);var C=h();_({data:v,addLength1:!0,objectId:C}),f("endobj");var L=h();_({data:s(d.metadata.toUnicode),addLength1:!0,objectId:L}),f("endobj");var O=h();f("<<"),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f("/StemV "+d.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+C+" 0 R"),f("/Flags 96"),f("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),f("/FontName /"+Pu(d.fontName)),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f(">>"),f("endobj"),d.objectNumber=h();for(var I=0;I<d.metadata.hmtx.widths.length;I++)d.metadata.hmtx.widths[I]=parseInt(d.metadata.hmtx.widths[I]*(1e3/d.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+Pu(d.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),f("endobj"),d.isAlreadyPutted=!0}})(l)}]);var r=function(l){var c,d=l.text||"",f=l.x,h=l.y,_=l.options||{},b=l.mutex||{},v=b.pdfEscape,y=b.activeFontKey,C=b.fonts,L=y,O="",I=0,j="",R=C[L].encoding;if(C[L].encoding!=="Identity-H")return{text:d,x:f,y:h,options:_,mutex:b};for(j=d,L=y,Array.isArray(d)&&(j=d[0]),I=0;I<j.length;I+=1)C[L].metadata.hasOwnProperty("cmap")&&(c=C[L].metadata.cmap.unicode.codeMap[j[I].charCodeAt(0)]),c||j[I].charCodeAt(0)<256&&C[L].metadata.hasOwnProperty("Unicode")?O+=j[I]:O+="";var U="";return parseInt(L.slice(1))<14||R==="WinAnsiEncoding"?U=v(O,L).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(U=n(O,C[L])),b.isHex=!0,{text:U,x:f,y:h,options:_,mutex:b}};e.events.push(["postProcessText",function(l){var c=l.text||"",d=[],f={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var h=0;for(h=0;h<c.length;h+=1)Array.isArray(c[h])&&c[h].length===3?d.push([r(Object.assign({},f,{text:c[h][0]})).text,c[h][1],c[h][2]]):d.push(r(Object.assign({},f,{text:c[h]})).text);l.text=d}else l.text=r(Object.assign({},f,{text:c})).text}])}(yn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,s){return e.call(this),this.internal.vFS[n]=s,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(yn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(s){var r,l,c,d,f,h,_,b=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,R=0;this.__bidiEngine__={};var U=function(F){var H=F.charCodeAt(),re=H>>8,K=L[re];return K!==void 0?b[256*K+(255&H)]:re===252||re===253?"AL":I.test(re)?"L":re===8?"R":"N"},te=function(F){for(var H,re=0;re<F.length;re++){if((H=U(F.charAt(re)))==="L")return!1;if(H==="R")return!0}return!1},Q=function(F,H,re,K){var Te,G,he,ue,ae=H[K];switch(ae){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(ae="AN");break;case"AL":j=!0,ae="R";break;case"WS":ae="N";break;case"CS":K<1||K+1>=H.length||(Te=re[K-1])!=="EN"&&Te!=="AN"||(G=H[K+1])!=="EN"&&G!=="AN"?ae="N":j&&(G="AN"),ae=G===Te?G:"N";break;case"ES":ae=(Te=K>0?re[K-1]:"B")==="EN"&&K+1<H.length&&H[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&re[K-1]==="EN"){ae="EN";break}if(j){ae="N";break}for(he=K+1,ue=H.length;he<ue&&H[he]==="ET";)he++;ae=he<ue&&H[he]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(ue=H.length,he=K+1;he<ue&&H[he]==="NSM";)he++;if(he<ue){var V=F[K],ce=V>=1425&&V<=2303||V===64286;if(Te=H[he],ce&&(Te==="R"||Te==="AL")){ae="R";break}}}ae=K<1||(Te=H[K-1])==="B"?"N":re[K-1];break;case"B":j=!1,r=!0,ae=R;break;case"S":l=!0,ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":ae="N"}return ae},ne=function(F,H,re){var K=F.split("");return re&&J(K,re,{hiLevel:R}),K.reverse(),H&&H.reverse(),K.join("")},J=function(F,H,re){var K,Te,G,he,ue,ae=-1,V=F.length,ce=0,M=[],k=R?y:v,Y=[];for(j=!1,r=!1,l=!1,Te=0;Te<V;Te++)Y[Te]=U(F[Te]);for(G=0;G<V;G++){if(ue=ce,M[G]=Q(F,Y,M,G),K=240&(ce=k[ue][C[M[G]]]),ce&=15,H[G]=he=k[ce][5],K>0)if(K===16){for(Te=ae;Te<G;Te++)H[Te]=1;ae=-1}else ae=-1;if(k[ce][6])ae===-1&&(ae=G);else if(ae>-1){for(Te=ae;Te<G;Te++)H[Te]=he;ae=-1}Y[G]==="B"&&(H[G]=0),re.hiLevel|=he}l&&function(Z,fe,Ne){for(var de=0;de<Ne;de++)if(Z[de]==="S"){fe[de]=R;for(var ye=de-1;ye>=0&&Z[ye]==="WS";ye--)fe[ye]=R}}(Y,H,V)},oe=function(F,H,re,K,Te){if(!(Te.hiLevel<F)){if(F===1&&R===1&&!r)return H.reverse(),void(re&&re.reverse());for(var G,he,ue,ae,V=H.length,ce=0;ce<V;){if(K[ce]>=F){for(ue=ce+1;ue<V&&K[ue]>=F;)ue++;for(ae=ce,he=ue-1;ae<he;ae++,he--)G=H[ae],H[ae]=H[he],H[he]=G,re&&(G=re[ae],re[ae]=re[he],re[he]=G);ce=ue}ce++}}},xe=function(F,H,re){var K=F.split(""),Te={hiLevel:R};return re||(re=[]),J(K,re,Te),function(G,he,ue){if(ue.hiLevel!==0&&_)for(var ae,V=0;V<G.length;V++)he[V]===1&&(ae=O.indexOf(G[V]))>=0&&(G[V]=O[ae+1])}(K,re,Te),oe(2,K,H,re,Te),oe(1,K,H,re,Te),K.join("")};return this.__bidiEngine__.doBidiReorder=function(F,H,re){if(function(Te,G){if(G)for(var he=0;he<Te.length;he++)G[he]=he;d===void 0&&(d=te(Te)),h===void 0&&(h=te(Te))}(F,H),c||!f||h)if(c&&f&&d^h)R=d?1:0,F=ne(F,H,re);else if(!c&&f&&h)R=d?1:0,F=xe(F,H,re),F=ne(F,H);else if(!c||d||f||h){if(c&&!f&&d^h)F=ne(F,H),d?(R=0,F=xe(F,H,re)):(R=1,F=xe(F,H,re),F=ne(F,H));else if(c&&d&&!f&&h)R=1,F=xe(F,H,re),F=ne(F,H);else if(!c&&!f&&d^h){var K=_;d?(R=1,F=xe(F,H,re),R=0,_=!1,F=xe(F,H,re),_=K):(R=0,F=xe(F,H,re),F=ne(F,H),R=1,_=!1,F=xe(F,H,re),_=K,F=ne(F,H))}}else R=0,F=xe(F,H,re);else R=d?1:0,F=xe(F,H,re);return F},this.__bidiEngine__.setOptions=function(F){F&&(c=F.isInputVisual,f=F.isOutputVisual,d=F.isInputRtl,h=F.isOutputRtl,_=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(s){var r=s.text;s.x,s.y;var l=s.options||{};s.mutex,l.lang;var c=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(r)==="[object Array]"){var d=0;for(c=[],d=0;d<r.length;d+=1)Object.prototype.toString.call(r[d])==="[object Array]"?c.push([n.doBidiReorder(r[d][0]),r[d][1],r[d][2]]):c.push([n.doBidiReorder(r[d])]);s.text=c}else s.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])}(yn),yn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new yc(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new yD(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new lD(this.contents),this.head=new uD(this),this.name=new pD(this),this.cmap=new O_(this),this.toUnicode={},this.hhea=new dD(this),this.maxp=new gD(this),this.hmtx=new xD(this),this.post=new hD(this),this.os2=new fD(this),this.loca=new TD(this),this.glyf=new ED(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,s,r,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,f,h;for(h=[],c=0,d=(f=this.bbox).length;c<d;c++)e=f[c],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(s=255&(r=this.post.italic_angle),(32768&(n=r>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,s){var r,l,c,d;for(c=0,l=0,d=(e=""+e).length;0<=d?l<d:l>d;l=0<=d?++l:--l)r=e.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(r))+s*(1e3/n)||0;return c*(n/1e3)},t.prototype.lineHeight=function(e,n){var s;return n==null&&(n=!1),s=n?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},t}();var Ho,yc=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,s;for(s=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)s[n]=String.fromCharCode(this.readByte());return s.join("")},t.prototype.writeString=function(e){var n,s,r;for(r=[],n=0,s=e.length;0<=s?n<s:n>s;n=0<=s?++n:--n)r.push(this.writeByte(e.charCodeAt(n)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,s,r,l,c,d,f;return e=this.readByte(),n=this.readByte(),s=this.readByte(),r=this.readByte(),l=this.readByte(),c=this.readByte(),d=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^s)+4294967296*(255^r)+16777216*(255^l)+65536*(255^c)+256*(255^d)+(255^f)+1):72057594037927940*e+281474976710656*n+1099511627776*s+4294967296*r+16777216*l+65536*c+256*d+f},t.prototype.writeLongLong=function(e){var n,s;return n=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,s;for(n=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)n.push(this.readByte());return n},t.prototype.write=function(e){var n,s,r,l;for(l=[],s=0,r=e.length;s<r;s++)n=e[s],l.push(this.writeByte(n));return l},t}(),lD=function(){var t;function e(n){var s,r,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,l=this.tableCount;0<=l?r<l:r>l;r=0<=l?++r:--r)s={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(n){var s,r,l,c,d,f,h,_,b,v,y,C,L;for(L in y=Object.keys(n).length,f=Math.log(2),b=16*Math.floor(Math.log(y)/f),c=Math.floor(b/f),_=16*y-b,(r=new yc).writeInt(this.scalarType),r.writeShort(y),r.writeShort(b),r.writeShort(c),r.writeShort(_),l=16*y,h=r.pos+l,d=null,C=[],n)for(v=n[L],r.writeString(L),r.writeInt(t(v)),r.writeInt(h),r.writeInt(v.length),C=C.concat(v),L==="head"&&(d=h),h+=v.length;h%4;)C.push(0),h++;return r.write(C),s=2981146554-t(r.data),r.pos=d+8,r.writeUInt32(s),r.data},t=function(n){var s,r,l,c;for(n=P_.call(n);n.length%4;)n.push(0);for(l=new yc(n),r=0,s=0,c=n.length;s<c;s=s+=4)r+=l.readUInt32();return 4294967295&r},e}(),cD={}.hasOwnProperty,pl=function(t,e){for(var n in e)cD.call(e,n)&&(t[n]=e[n]);function s(){this.constructor=t}return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};Ho=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var uD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var s;return(s=new yc).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(n),s.writeShort(this.glyphDataFormat),s.data},e}(),r2=function(){function t(e,n){var s,r,l,c,d,f,h,_,b,v,y,C,L,O,I,j,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),v=y/2,e.pos+=6,l=function(){var U,te;for(te=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)te.push(e.readUInt16());return te}(),e.pos+=2,L=function(){var U,te;for(te=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)te.push(e.readUInt16());return te}(),h=function(){var U,te;for(te=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)te.push(e.readUInt16());return te}(),_=function(){var U,te;for(te=[],f=U=0;0<=v?U<v:U>v;f=0<=v?++U:--U)te.push(e.readUInt16());return te}(),r=(this.length-e.pos+this.offset)/2,d=function(){var U,te;for(te=[],f=U=0;0<=r?U<r:U>r;f=0<=r?++U:--U)te.push(e.readUInt16());return te}(),f=I=0,R=l.length;I<R;f=++I)for(O=l[f],s=j=C=L[f];C<=O?j<=O:j>=O;s=C<=O?++j:--j)_[f]===0?c=s+h[f]:(c=d[_[f]/2+(s-C)-(v-f)]||0)!==0&&(c+=h[f]),this.codeMap[s]=65535&c}e.pos=b}return t.encode=function(e,n){var s,r,l,c,d,f,h,_,b,v,y,C,L,O,I,j,R,U,te,Q,ne,J,oe,xe,F,H,re,K,Te,G,he,ue,ae,V,ce,M,k,Y,Z,fe,Ne,de,ye,Ue,we,Ze;switch(K=new yc,c=Object.keys(e).sort(function(Je,Qe){return Je-Qe}),n){case"macroman":for(L=0,O=function(){var Je=[];for(C=0;C<256;++C)Je.push(0);return Je}(),j={0:0},l={},Te=0,ae=c.length;Te<ae;Te++)j[ye=e[r=c[Te]]]==null&&(j[ye]=++L),l[r]={old:e[r],new:j[e[r]]},O[r]=j[e[r]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(O),{charMap:l,subtable:K.data,maxGlyphID:L+1};case"unicode":for(H=[],b=[],R=0,j={},s={},I=h=null,G=0,V=c.length;G<V;G++)j[te=e[r=c[G]]]==null&&(j[te]=++R),s[r]={old:te,new:j[te]},d=j[te]-r,I!=null&&d===h||(I&&b.push(I),H.push(r),h=d),I=r;for(I&&b.push(I),b.push(65535),H.push(65535),xe=2*(oe=H.length),J=2*Math.pow(Math.log(oe)/Math.LN2,2),v=Math.log(J/2)/Math.LN2,ne=2*oe-J,f=[],Q=[],y=[],C=he=0,ce=H.length;he<ce;C=++he){if(F=H[C],_=b[C],F===65535){f.push(0),Q.push(0);break}if(F-(re=s[F].new)>=32768)for(f.push(0),Q.push(2*(y.length+oe-C)),r=ue=F;F<=_?ue<=_:ue>=_;r=F<=_?++ue:--ue)y.push(s[r].new);else f.push(re-F),Q.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*oe+2*y.length),K.writeUInt16(0),K.writeUInt16(xe),K.writeUInt16(J),K.writeUInt16(v),K.writeUInt16(ne),Ne=0,M=b.length;Ne<M;Ne++)r=b[Ne],K.writeUInt16(r);for(K.writeUInt16(0),de=0,k=H.length;de<k;de++)r=H[de],K.writeUInt16(r);for(Ue=0,Y=f.length;Ue<Y;Ue++)d=f[Ue],K.writeUInt16(d);for(we=0,Z=Q.length;we<Z;we++)U=Q[we],K.writeUInt16(U);for(Ze=0,fe=y.length;Ze<fe;Ze++)L=y[Ze],K.writeUInt16(L);return{charMap:s,subtable:K.data,maxGlyphID:R+1}}},t}(),O_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="cmap",e.prototype.parse=function(n){var s,r,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=l?r<l:r>l;r=0<=l?++r:--r)s=new r2(n,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(n,s){var r,l;return s==null&&(s="macroman"),r=r2.encode(n,s),(l=new yc).writeUInt16(0),l.writeUInt16(1),r.table=l.data.concat(r.subtable),r},e}(),dD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),fD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var s,r;for(r=[],s=0;s<10;++s)r.push(n.readByte());return r}(),this.charRange=function(){var s,r;for(r=[],s=0;s<4;++s)r.push(n.readInt());return r}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var s,r;for(r=[],s=0;s<2;s=++s)r.push(n.readInt());return r}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),hD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="post",e.prototype.parse=function(n){var s,r,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var c;for(r=n.readUInt16(),this.glyphNameIndex=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)s=n.readByte(),l.push(this.names.push(n.readString(s)));return l;case 151552:return r=n.readUInt16(),this.offsets=n.read(r);case 196608:break;case 262144:return this.map=(function(){var d,f,h;for(h=[],c=d=0,f=this.file.maxp.numGlyphs;0<=f?d<f:d>f;c=0<=f?++d:--d)h.push(n.readUInt32());return h}).call(this)}},e}(),mD=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="name",e.prototype.parse=function(n){var s,r,l,c,d,f,h,_,b,v,y;for(n.pos=this.offset,n.readShort(),s=n.readShort(),f=n.readShort(),r=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)r.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+f+n.readShort()});for(h={},c=b=0,v=r.length;b<v;c=++b)l=r[c],n.pos=l.offset,_=n.readString(l.length),d=new mD(_,l),h[y=l.nameID]==null&&(h[y]=[]),h[l.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),gD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),xD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="hmtx",e.prototype.parse=function(n){var s,r,l,c,d,f,h;for(n.pos=this.offset,this.metrics=[],s=0,f=this.file.hhea.numberOfMetrics;0<=f?s<f:s>f;s=0<=f?++s:--s)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var _,b;for(b=[],s=_=0;0<=l?_<l:_>l;s=0<=l?++_:--_)b.push(n.readInt16());return b}(),this.widths=(function(){var _,b,v,y;for(y=[],_=0,b=(v=this.metrics).length;_<b;_++)c=v[_],y.push(c.advance);return y}).call(this),r=this.widths[this.widths.length-1],h=[],s=d=0;0<=l?d<l:d>l;s=0<=l?++d:--d)h.push(this.widths.push(r));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),P_=[].slice,ED=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var s,r,l,c,d,f,h,_,b,v;return n in this.cache?this.cache[n]:(c=this.file.loca,s=this.file.contents,r=c.indexOf(n),(l=c.lengthOf(n))===0?this.cache[n]=null:(s.pos=this.offset+r,d=(f=new yc(s.read(l))).readShort(),_=f.readShort(),v=f.readShort(),h=f.readShort(),b=f.readShort(),this.cache[n]=d===-1?new bD(f,_,v,h,b):new _D(f,d,_,v,h,b),this.cache[n]))},e.prototype.encode=function(n,s,r){var l,c,d,f,h;for(d=[],c=[],f=0,h=s.length;f<h;f++)l=n[s[f]],c.push(d.length),l&&(d=d.concat(l.encode(r)));return c.push(d.length),{table:d,offsets:c}},e}(),_D=function(){function t(e,n,s,r,l,c){this.raw=e,this.numberOfContours=n,this.xMin=s,this.yMin=r,this.xMax=l,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),bD=function(){function t(e,n,s,r,l){var c,d;for(this.raw=e,this.xMin=n,this.yMin=s,this.xMax=r,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return t.prototype.encode=function(){var e,n,s;for(n=new yc(P_.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),TD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pl(e,Ho),e.prototype.tag="loca",e.prototype.parse=function(n){var s,r;return n.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var l,c;for(c=[],r=0,l=this.length;r<l;r+=2)c.push(2*n.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],r=0,l=this.length;r<l;r+=4)c.push(n.readUInt32());return c}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,s){for(var r=new Uint32Array(this.offsets.length),l=0,c=0,d=0;d<r.length;++d)if(r[d]=l,c<s.length&&s[c]==d){++c,r[d]=l;var f=this.offsets[d],h=this.offsets[d+1]-f;h>0&&(l+=h)}for(var _=new Array(4*r.length),b=0;b<r.length;++b)_[4*b+3]=255&r[b],_[4*b+2]=(65280&r[b])>>8,_[4*b+1]=(16711680&r[b])>>16,_[4*b]=(4278190080&r[b])>>24;return _},e}(),yD=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,s,r,l;for(n in r=this.font.cmap.tables[0].codeMap,e={},l=this.subset)s=l[n],e[n]=r[s];return e},t.prototype.glyphsFor=function(e){var n,s,r,l,c,d,f;for(r={},c=0,d=e.length;c<d;c++)r[l=e[c]]=this.font.glyf.glyphFor(l);for(l in n=[],r)(s=r[l])!=null&&s.compound&&n.push.apply(n,s.glyphIDs);if(n.length>0)for(l in f=this.glyphsFor(n))s=f[l],r[l]=s;return r},t.prototype.encode=function(e,n){var s,r,l,c,d,f,h,_,b,v,y,C,L,O,I;for(r in s=O_.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),y={0:0},I=s.charMap)y[(f=I[r]).old]=f.new;for(C in v=s.maxGlyphID,c)C in y||(y[C]=v++);return _=function(j){var R,U;for(R in U={},j)U[j[R]]=R;return U}(y),b=Object.keys(_).sort(function(j,R){return j-R}),L=function(){var j,R,U;for(U=[],j=0,R=b.length;j<R;j++)d=b[j],U.push(_[d]);return U}(),l=this.font.glyf.encode(c,L,y),h=this.font.loca.encode(l.offsets,L),O={cmap:this.font.cmap.raw(),glyf:l.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},t}();yn.API.PDFObject=function(){var t;function e(){}return t=function(n,s){return(Array(s+1).join("0")+n).slice(-s)},e.convert=function(n){var s,r,l,c;if(Array.isArray(n))return"["+function(){var d,f,h;for(h=[],d=0,f=n.length;d<f;d++)s=n[d],h.push(e.convert(s));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in l=["<<"],n)c=n[r],l.push("/"+r+" "+e.convert(c));return l.push(">>"),l.join(`
`)}return""+n},e}();function M_(t,e,n,s,r){s=s||{};var l=1.15,c=r.internal.scaleFactor,d=r.internal.getFontSize()/c,f=r.getLineHeightFactor?r.getLineHeightFactor():l,h=d*f,_=/\r\n|\r|\n/g,b="",v=1;if((s.valign==="middle"||s.valign==="bottom"||s.halign==="center"||s.halign==="right")&&(b=typeof t=="string"?t.split(_):t,v=b.length||1),n+=d*(2-l),s.valign==="middle"?n-=v/2*h:s.valign==="bottom"&&(n-=v*h),s.halign==="center"||s.halign==="right"){var y=d;if(s.halign==="center"&&(y*=.5),b&&v>=1){for(var C=0;C<b.length;C++)r.text(b[C],e-r.getStringUnitWidth(b[C])*y,n),n+=h;return r}e-=r.getStringUnitWidth(t)*y}return s.halign==="justify"?r.text(t,e,n,{maxWidth:s.maxWidth||100,align:"justify"}):r.text(t,e,n),r}var i2={},Hu=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:i2=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var s,r,l;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),d=c.fontStyle,f=c.fontName;if(e.font&&(f=e.font),e.fontStyle){d=e.fontStyle;var h=this.getFontList()[f];h&&h.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),d=h[0])}if(this.jsPDFDocument.setFont(f,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var _=t.unifyColor(e.fillColor);_&&(s=this.jsPDFDocument).setFillColor.apply(s,_),_=t.unifyColor(e.textColor),_&&(r=this.jsPDFDocument).setTextColor.apply(r,_),_=t.unifyColor(e.lineColor),_&&(l=this.jsPDFDocument).setDrawColor.apply(l,_),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,s){return this.jsPDFDocument.splitTextToSize(e,n,s)},t.prototype.rect=function(e,n,s,r,l){return this.jsPDFDocument.rect(e,n,s,r,l)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return i2||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Ep=function(t,e){return Ep=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])},Ep(t,e)};function k_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ep(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var j_=function(t){k_(e,t);function e(n){var s=t.call(this)||this;return s._element=n,s}return e}(Array);function ND(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function vD(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Vh(t,e,n){n.applyStyles(e,!0);var s=Array.isArray(t)?t:[t],r=s.map(function(l){return n.getTextWidth(l)}).reduce(function(l,c){return Math.max(l,c)},0);return r}function B_(t,e,n,s){var r=e.settings.tableLineWidth,l=e.settings.tableLineColor;t.applyStyles({lineWidth:r,lineColor:l});var c=U_(r,!1);c&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),s.y-n.y,c)}function U_(t,e){var n=t>0,s=e||e===0;return n&&s?"DF":n?"S":s?"F":null}function tm(t,e){var n,s,r,l;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(s=t.top)!==null&&s!==void 0?s:e,right:(r=t.right)!==null&&r!==void 0?r:e,bottom:(l=t.bottom)!==null&&l!==void 0?l:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function F_(t,e){var n=tm(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function AD(t,e,n,s,r){var l={},c=1.3333333333333333,d=I0(e,function(R){return r.getComputedStyle(R).backgroundColor});d!=null&&(l.fillColor=d);var f=I0(e,function(R){return r.getComputedStyle(R).color});f!=null&&(l.textColor=f);var h=CD(s,n);h&&(l.cellPadding=h);var _="borderTopColor",b=c*n,v=s.borderTopWidth;if(s.borderBottomWidth===v&&s.borderRightWidth===v&&s.borderLeftWidth===v){var y=(parseFloat(v)||0)/b;y&&(l.lineWidth=y)}else l.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/b,right:(parseFloat(s.borderRightWidth)||0)/b,bottom:(parseFloat(s.borderBottomWidth)||0)/b,left:(parseFloat(s.borderLeftWidth)||0)/b},l.lineWidth.top||(l.lineWidth.right?_="borderRightColor":l.lineWidth.bottom?_="borderBottomColor":l.lineWidth.left&&(_="borderLeftColor"));var C=I0(e,function(R){return r.getComputedStyle(R)[_]});C!=null&&(l.lineColor=C);var L=["left","right","center","justify"];L.indexOf(s.textAlign)!==-1&&(l.halign=s.textAlign),L=["middle","bottom","top"],L.indexOf(s.verticalAlign)!==-1&&(l.valign=s.verticalAlign);var O=parseInt(s.fontSize||"");isNaN(O)||(l.fontSize=O/c);var I=SD(s);I&&(l.fontStyle=I);var j=(s.fontFamily||"").toLowerCase();return t.indexOf(j)!==-1&&(l.font=j),l}function SD(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function I0(t,e){var n=V_(t,e);if(!n)return null;var s=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var r=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],l=parseInt(s[4]);return l===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function V_(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:V_(t.parentElement,e):n}function CD(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],s=96/(72/e),r=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,l=n.map(function(d){return parseInt(d||"0")/s}),c=tm(l,0);return r>c.top&&(c.top=r),r>c.bottom&&(c.bottom=r),c}function G_(t,e,n,s,r){var l,c;s===void 0&&(s=!1),r===void 0&&(r=!1);var d;typeof e=="string"?d=n.document.querySelector(e):d=e;var f=Object.keys(t.getFontList()),h=t.scaleFactor(),_=[],b=[],v=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:_,body:b,foot:v};for(var y=0;y<d.rows.length;y++){var C=d.rows[y],L=(c=(l=C==null?void 0:C.parentElement)===null||l===void 0?void 0:l.tagName)===null||c===void 0?void 0:c.toLowerCase(),O=LD(f,h,n,C,s,r);O&&(L==="thead"?_.push(O):L==="tfoot"?v.push(O):b.push(O))}return{head:_,body:b,foot:v}}function LD(t,e,n,s,r,l){for(var c=new j_(s),d=0;d<s.cells.length;d++){var f=s.cells[d],h=n.getComputedStyle(f);if(r||h.display!=="none"){var _=void 0;l&&(_=AD(t,f,e,h,n)),c.push({rowSpan:f.rowSpan,colSpan:f.colSpan,styles:_,_element:f,content:wD(f)})}}var b=n.getComputedStyle(s);if(c.length>0&&(r||b.display!=="none"))return c}function wD(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function ID(t,e,n){for(var s=0,r=[t,e,n];s<r.length;s++){var l=r[s];l&&typeof l!="object"&&console.error("The options parameter should be of type object, is: "+typeof l),l.startY&&typeof l.startY!="number"&&(console.error("Invalid value for startY option",l.startY),delete l.startY)}}function jl(t,e,n,s,r){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(t),c=1;c<arguments.length;c++){var d=arguments[c];if(d!=null)for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(l[f]=d[f])}return l}function H_(t,e){var n=new Hu(t),s=n.getDocumentOptions(),r=n.getGlobalOptions();ID(r,s,e);var l=jl({},r,s,e),c;typeof window<"u"&&(c=window);var d=DD(r,s,e),f=RD(r,s,e),h=OD(n,l),_=MD(n,l,c);return{id:e.tableId,content:_,hooks:f,styles:d,settings:h}}function DD(t,e,n){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(f){if(f==="columnStyles"){var h=t[f],_=e[f],b=n[f];s.columnStyles=jl({},h,_,b)}else{var v=[t,e,n],y=v.map(function(C){return C[f]||{}});s[f]=jl({},y[0],y[1],y[2])}},l=0,c=Object.keys(s);l<c.length;l++){var d=c[l];r(d)}return s}function RD(t,e,n){for(var s=[t,e,n],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},l=0,c=s;l<c.length;l++){var d=c[l];d.didParseCell&&r.didParseCell.push(d.didParseCell),d.willDrawCell&&r.willDrawCell.push(d.willDrawCell),d.didDrawCell&&r.didDrawCell.push(d.didDrawCell),d.willDrawPage&&r.willDrawPage.push(d.willDrawPage),d.didDrawPage&&r.didDrawPage.push(d.didDrawPage)}return r}function OD(t,e){var n,s,r,l,c,d,f,h,_,b,v,y,C=tm(e.margin,40/t.scaleFactor()),L=(n=PD(t,e.startY))!==null&&n!==void 0?n:C.top,O;e.showFoot===!0?O="everyPage":e.showFoot===!1?O="never":O=(s=e.showFoot)!==null&&s!==void 0?s:"everyPage";var I;e.showHead===!0?I="everyPage":e.showHead===!1?I="never":I=(r=e.showHead)!==null&&r!==void 0?r:"everyPage";var j=(l=e.useCss)!==null&&l!==void 0?l:!1,R=e.theme||(j?"plain":"striped"),U=!!e.horizontalPageBreak,te=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:j,theme:R,startY:L,margin:C,pageBreak:(f=e.pageBreak)!==null&&f!==void 0?f:"auto",rowPageBreak:(h=e.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(_=e.tableWidth)!==null&&_!==void 0?_:"auto",showHead:I,showFoot:O,tableLineWidth:(b=e.tableLineWidth)!==null&&b!==void 0?b:0,tableLineColor:(v=e.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:U,horizontalPageBreakRepeat:te,horizontalPageBreakBehaviour:(y=e.horizontalPageBreakBehaviour)!==null&&y!==void 0?y:"afterAllRows"}}function PD(t,e){var n=t.getLastAutoTable(),s=t.scaleFactor(),r=t.pageNumber(),l=!1;if(n&&n.startPageNumber){var c=n.startPageNumber+n.pageNumber-1;l=c===r}return typeof e=="number"?e:(e==null||e===!1)&&l&&(n==null?void 0:n.finalY)!=null?n.finalY+20/s:null}function MD(t,e,n){var s=e.head||[],r=e.body||[],l=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(n){var d=G_(t,e.html,n,c,e.useCss)||{};s=d.head||s,r=d.body||s,l=d.foot||s}else console.error("Cannot parse html in non browser environment")}var f=e.columns||kD(s,r,l);return{columns:f,head:s,body:r,foot:l}}function kD(t,e,n){var s=t[0]||e[0]||n[0]||[],r=[];return Object.keys(s).filter(function(l){return l!=="_element"}).forEach(function(l){var c=1,d;Array.isArray(s)?d=s[parseInt(l)]:d=s[l],typeof d=="object"&&!Array.isArray(d)&&(c=(d==null?void 0:d.colSpan)||1);for(var f=0;f<c;f++){var h=void 0;Array.isArray(s)?h=r.length:h=l+(f>0?"_".concat(f):"");var _={dataKey:h};r.push(_)}}),r}var _p=function(){function t(e,n,s){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=s,this.doc=e.getDocument()}return t}(),jD=function(t){k_(e,t);function e(n,s,r,l,c,d){var f=t.call(this,n,s,d)||this;return f.cell=r,f.row=l,f.column=c,f.section=l.section,f}return e}(_p),BD=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,s){return n+s.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,s){return n+s.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,s,r,l,c){for(var d=0,f=n;d<f.length;d++){var h=f[d],_=new jD(e,this,s,r,l,c),b=h(_)===!1;if(s.text=Array.isArray(s.text)?s.text:[s.text],b)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var s=0,r=this.hooks.didDrawPage;s<r.length;s++){var l=r[s];l(new _p(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var s=0,r=this.hooks.willDrawPage;s<r.length;s++){var l=r[s];l(new _p(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(r,l){return r+l.wrappedWidth},0);return n}else{var s=this.settings.margin;return e-s.left-s.right}},t}(),Y_=function(){function t(e,n,s,r,l){l===void 0&&(l=!1),this.height=0,this.raw=e,e instanceof j_&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=s,this.cells=r,this.spansMultiplePages=l}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(s,r){var l;return Math.max(s,((l=n.cells[r.index])===null||l===void 0?void 0:l.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(s){var r=n.cells[s.index];return r?r.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var s=this;return e.reduce(function(r,l){var c=s.cells[l.index];if(!c)return 0;var d=n.getLineHeight(c.styles.fontSize),f=c.padding("vertical"),h=f+d;return h>r?h:r},0)},t}(),q_=function(){function t(e,n,s){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=s,this.raw=e;var l=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,l=(r=e.content)!==null&&r!==void 0?r:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=l!=null?""+l:"",d=/\r\n|\r|\n/g;this.text=c.split(d)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var s;if(this.styles.halign==="right")s=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");s=this.x+r/2+this.padding("left")}else s=this.x+this.padding("left");return{x:s,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var s=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/e*n,l=s*r+this.padding("vertical");return Math.max(l,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=tm(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),UD=function(){function t(e,n,s){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=s}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,s=0,r=e.allRows();s<r.length;s++){var l=r[s],c=l.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(n=Math.max(n,c.styles.cellWidth))}return n},t}();function FD(t,e){VD(t,e);var n=[],s=0;e.columns.forEach(function(l){var c=l.getMaxCustomCellWidth(e);c?l.width=c:(l.width=l.wrappedWidth,n.push(l)),s+=l.width});var r=e.getWidth(t.pageSize().width)-s;r&&(r=bp(n,r,function(l){return Math.max(l.minReadableWidth,l.minWidth)})),r&&(r=bp(n,r,function(l){return l.minWidth})),r=Math.abs(r),!e.settings.horizontalPageBreak&&r>.1/t.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),HD(e),YD(e,t),GD(e)}function VD(t,e){var n=t.scaleFactor(),s=e.settings.horizontalPageBreak,r=F_(t,e);e.allRows().forEach(function(l){for(var c=0,d=e.columns;c<d.length;c++){var f=d[c],h=l.cells[f.index];if(h){var _=e.hooks.didParseCell;e.callCellHooks(t,_,h,l,f,null);var b=h.padding("horizontal");h.contentWidth=Vh(h.text,h.styles,t)+b;var v=Vh(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,t);if(h.minReadableWidth=v+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||s===!0)h.contentWidth>r?(h.minWidth=r,h.wrappedWidth=r):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var y=10/n;h.minWidth=h.styles.minCellWidth||y,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),e.allRows().forEach(function(l){for(var c=0,d=e.columns;c<d.length;c++){var f=d[c],h=l.cells[f.index];if(h&&h.colSpan===1)f.wrappedWidth=Math.max(f.wrappedWidth,h.wrappedWidth),f.minWidth=Math.max(f.minWidth,h.minWidth),f.minReadableWidth=Math.max(f.minReadableWidth,h.minReadableWidth);else{var _=e.styles.columnStyles[f.dataKey]||e.styles.columnStyles[f.index]||{},b=_.cellWidth||_.minCellWidth;b&&typeof b=="number"&&(f.minWidth=b,f.wrappedWidth=b)}h&&(h.colSpan>1&&!f.minWidth&&(f.minWidth=h.minWidth),h.colSpan>1&&!f.wrappedWidth&&(f.wrappedWidth=h.minWidth))}})}function bp(t,e,n){for(var s=e,r=t.reduce(function(y,C){return y+C.wrappedWidth},0),l=0;l<t.length;l++){var c=t[l],d=c.wrappedWidth/r,f=s*d,h=c.width+f,_=n(c),b=h<_?_:h;e-=b-c.width,c.width=b}if(e=Math.round(e*1e10)/1e10,e){var v=t.filter(function(y){return e<0?y.width>n(y):!0});v.length&&(e=bp(v,e,n))}return e}function GD(t){for(var e={},n=1,s=t.allRows(),r=0;r<s.length;r++)for(var l=s[r],c=0,d=t.columns;c<d.length;c++){var f=d[c],h=e[f.index];if(n>1)n--,delete l.cells[f.index];else if(h)h.cell.height+=l.height,n=h.cell.colSpan,delete l.cells[f.index],h.left--,h.left<=1&&delete e[f.index];else{var _=l.cells[f.index];if(!_)continue;if(_.height=l.height,_.rowSpan>1){var b=s.length-r,v=_.rowSpan>b?b:_.rowSpan;e[f.index]={cell:_,left:v,row:l}}}}}function HD(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var s=e[n],r=null,l=0,c=0,d=0;d<t.columns.length;d++){var f=t.columns[d];if(c-=1,c>1&&t.columns[d+1])l+=f.width,delete s.cells[f.index];else if(r){var h=r;delete s.cells[f.index],r=null,h.width=f.width+l}else{var h=s.cells[f.index];if(!h)continue;if(c=h.colSpan,l=0,h.colSpan>1){r=h,l+=f.width;continue}h.width=f.width+l}}}function YD(t,e){for(var n={count:0,height:0},s=0,r=t.allRows();s<r.length;s++){for(var l=r[s],c=0,d=t.columns;c<d.length;c++){var f=d[c],h=l.cells[f.index];if(h){e.applyStyles(h.styles,!0);var _=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=e.splitTextToSize(h.text,_+1/e.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=o2(h.text,_,h.styles,e,"...");else if(h.styles.overflow==="hidden")h.text=o2(h.text,_,h.styles,e,"");else if(typeof h.styles.overflow=="function"){var b=h.styles.overflow(h.text,_);typeof b=="string"?h.text=[b]:h.text=b}h.contentHeight=h.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var v=h.contentHeight/h.rowSpan;h.rowSpan>1&&n.count*n.height<v*h.rowSpan?n={height:v,count:h.rowSpan}:n&&n.count>0&&n.height>v&&(v=n.height),v>l.height&&(l.height=v)}}n.count--}}function o2(t,e,n,s,r){return t.map(function(l){return qD(l,e,n,s,r)})}function qD(t,e,n,s,r){var l=1e4*s.scaleFactor();if(e=Math.ceil(e*l)/l,e>=Vh(t,n,s))return t;for(;e<Vh(t+r,n,s)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+r}function z_(t,e){var n=new Hu(t),s=zD(e,n.scaleFactor()),r=new BD(e,s);return FD(n,r),n.applyStyles(n.userStyles),r}function zD(t,e){var n=t.content,s=WD(n.columns);if(n.head.length===0){var r=l2(s,"head");r&&n.head.push(r)}if(n.foot.length===0){var r=l2(s,"foot");r&&n.foot.push(r)}var l=t.settings.theme,c=t.styles;return{columns:s,head:D0("head",n.head,s,c,l,e),body:D0("body",n.body,s,c,l,e),foot:D0("foot",n.foot,s,c,l,e)}}function D0(t,e,n,s,r,l){var c={},d=e.map(function(f,h){for(var _=0,b={},v=0,y=0,C=0,L=n;C<L.length;C++){var O=L[C];if(c[O.index]==null||c[O.index].left===0)if(y===0){var I=void 0;Array.isArray(f)?I=f[O.index-v-_]:I=f[O.dataKey];var j={};typeof I=="object"&&!Array.isArray(I)&&(j=(I==null?void 0:I.styles)||{});var R=KD(t,O,h,r,s,l,j),U=new q_(I,R,t);b[O.dataKey]=U,b[O.index]=U,y=U.colSpan-1,c[O.index]={left:U.rowSpan-1,times:y}}else y--,v++;else c[O.index].left--,y=c[O.index].times,_++}return new Y_(f,h,t,b)});return d}function l2(t,e){var n={};return t.forEach(function(s){if(s.raw!=null){var r=$D(e,s.raw);r!=null&&(n[s.dataKey]=r)}}),Object.keys(n).length>0?n:null}function $D(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function WD(t){return t.map(function(e,n){var s,r;return typeof e=="object"?r=(s=e.dataKey)!==null&&s!==void 0?s:n:r=n,new UD(r,e,n)})}function KD(t,e,n,s,r,l,c){var d=vD(s),f;t==="head"?f=r.headStyles:t==="body"?f=r.bodyStyles:t==="foot"&&(f=r.footStyles);var h=jl({},d.table,d[t],r.styles,f),_=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},b=t==="body"?_:{},v=t==="body"&&n%2===0?jl({},d.alternateRow,r.alternateRowStyles):{},y=ND(l),C=jl({},y,h,v,b);return jl(C,c)}function XD(t,e,n){var s;n===void 0&&(n={});var r=F_(t,e),l=new Map,c=[],d=[],f=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?f=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(f=[e.settings.horizontalPageBreakRepeat]),f.forEach(function(v){var y=e.columns.find(function(C){return C.dataKey===v||C.index===v});y&&!l.has(y.index)&&(l.set(y.index,!0),c.push(y.index),d.push(e.columns[y.index]),r-=y.wrappedWidth)});for(var h=!0,_=(s=n==null?void 0:n.start)!==null&&s!==void 0?s:0;_<e.columns.length;){if(l.has(_)){_++;continue}var b=e.columns[_].wrappedWidth;if(h||r>=b)h=!1,c.push(_),d.push(e.columns[_]),r-=b;else break;_++}return{colIndexes:c,columns:d,lastIndex:_-1}}function JD(t,e){for(var n=[],s=0;s<e.columns.length;s++){var r=XD(t,e,{start:s});r.columns.length&&(n.push(r),s=r.lastIndex)}return n}function $_(t,e){var n=e.settings,s=n.startY,r=n.margin,l={x:r.left,y:s},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=s+r.bottom+c;if(n.pageBreak==="avoid"){var f=e.body,h=f.reduce(function(v,y){return v+y.height},0);d+=h}var _=new Hu(t);(n.pageBreak==="always"||n.startY!=null&&d>_.pageSize().height)&&(K_(_),l.y=r.top),e.callWillDrawPageHooks(_,l);var b=jl({},l);e.startPageNumber=_.pageNumber(),n.horizontalPageBreak?ZD(_,e,b,l):(_.applyStyles(_.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(v){return Ul(_,e,v,l,e.columns)}),_.applyStyles(_.userStyles),e.body.forEach(function(v,y){var C=y===e.body.length-1;Gh(_,e,v,C,b,l,e.columns)}),_.applyStyles(_.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(v){return Ul(_,e,v,l,e.columns)})),B_(_,e,b,l),e.callEndPageHooks(_,l),e.finalY=l.y,t.lastAutoTable=e,_.applyStyles(_.userStyles)}function ZD(t,e,n,s){var r=JD(t,e),l=e.settings;if(l.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(h,_){t.applyStyles(t.userStyles),_>0?Jd(t,e,n,s,h.columns,!0):c2(t,e,s,h.columns),QD(t,e,n,s,h.columns),R0(t,e,s,h.columns)});else for(var c=-1,d=r[0],f=function(){var h=c;if(d){t.applyStyles(t.userStyles);var _=d.columns;c>=0?Jd(t,e,n,s,_,!0):c2(t,e,s,_),h=u2(t,e,c+1,s,_),R0(t,e,s,_)}var b=h-c;r.slice(1).forEach(function(v){t.applyStyles(t.userStyles),Jd(t,e,n,s,v.columns,!0),u2(t,e,c+1,s,v.columns,b),R0(t,e,s,v.columns)}),c=h};c<e.body.length-1;)f()}function c2(t,e,n,s){var r=e.settings;t.applyStyles(t.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(l){return Ul(t,e,l,n,s)})}function QD(t,e,n,s,r){t.applyStyles(t.userStyles),e.body.forEach(function(l,c){var d=c===e.body.length-1;Gh(t,e,l,d,n,s,r)})}function u2(t,e,n,s,r,l){t.applyStyles(t.userStyles),l=l??e.body.length;var c=Math.min(n+l,e.body.length),d=-1;return e.body.slice(n,c).forEach(function(f,h){var _=n+h===e.body.length-1,b=W_(t,e,_,s);f.canEntireRowFit(b,r)&&(Ul(t,e,f,s,r),d=n+h)}),d}function R0(t,e,n,s){var r=e.settings;t.applyStyles(t.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(l){return Ul(t,e,l,n,s)})}function e3(t,e,n){var s=n.getLineHeight(t.styles.fontSize),r=t.padding("vertical"),l=Math.floor((e-r)/s);return Math.max(0,l)}function t3(t,e,n,s){var r={};t.spansMultiplePages=!0,t.height=0;for(var l=0,c=0,d=n.columns;c<d.length;c++){var f=d[c],h=t.cells[f.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var _=new q_(h.raw,h.styles,h.section);_=jl(_,h),_.text=[];var b=e3(h,e,s);h.text.length>b&&(_.text=h.text.splice(b,h.text.length));var v=s.scaleFactor(),y=s.getLineHeightFactor();h.contentHeight=h.getContentHeight(v,y),h.contentHeight>=e&&(h.contentHeight=e,_.styles.minCellHeight-=e),h.contentHeight>t.height&&(t.height=h.contentHeight),_.contentHeight=_.getContentHeight(v,y),_.contentHeight>l&&(l=_.contentHeight),r[f.index]=_}}var C=new Y_(t.raw,-1,t.section,r,!0);C.height=l;for(var L=0,O=n.columns;L<O.length;L++){var f=O[L],_=C.cells[f.index];_&&(_.height=C.height);var h=t.cells[f.index];h&&(h.height=t.height)}return C}function n3(t,e,n,s){var r=t.pageSize().height,l=s.settings.margin,c=l.top+l.bottom,d=r-c;e.section==="body"&&(d-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var f=e.getMinimumRowHeight(s.columns,t),h=f<n;if(f>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var _=e.hasRowSpan(s.columns),b=e.getMaxCellHeight(s.columns)>d;return b?(_&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(_||s.settings.rowPageBreak==="avoid")}function Gh(t,e,n,s,r,l,c){var d=W_(t,e,s,l);if(n.canEntireRowFit(d,c))Ul(t,e,n,l,c);else if(n3(t,n,d,e)){var f=t3(n,d,e,t);Ul(t,e,n,l,c),Jd(t,e,r,l,c),Gh(t,e,f,s,r,l,c)}else Jd(t,e,r,l,c),Gh(t,e,n,s,r,l,c)}function Ul(t,e,n,s,r){s.x=e.settings.margin.left;for(var l=0,c=r;l<c.length;l++){var d=c[l],f=n.cells[d.index];if(!f){s.x+=d.width;continue}t.applyStyles(f.styles),f.x=s.x,f.y=s.y;var h=e.callCellHooks(t,e.hooks.willDrawCell,f,n,d,s);if(h===!1){s.x+=d.width;continue}s3(t,f,s);var _=f.getTextPos();M_(f.text,_.x,_.y,{halign:f.styles.halign,valign:f.styles.valign,maxWidth:Math.ceil(f.width-f.padding("left")-f.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,f,n,d,s),s.x+=d.width}s.y+=n.height}function s3(t,e,n){var s=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof s.lineWidth=="number"){var r=U_(s.lineWidth,s.fillColor);r&&t.rect(e.x,n.y,e.width,e.height,r)}else typeof s.lineWidth=="object"&&(s.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),a3(t,e,n,s.lineWidth))}function a3(t,e,n,s){var r,l,c,d;s.top&&(r=n.x,l=n.y,c=n.x+e.width,d=n.y,s.right&&(c+=.5*s.right),s.left&&(r-=.5*s.left),f(s.top,r,l,c,d)),s.bottom&&(r=n.x,l=n.y+e.height,c=n.x+e.width,d=n.y+e.height,s.right&&(c+=.5*s.right),s.left&&(r-=.5*s.left),f(s.bottom,r,l,c,d)),s.left&&(r=n.x,l=n.y,c=n.x,d=n.y+e.height,s.top&&(l-=.5*s.top),s.bottom&&(d+=.5*s.bottom),f(s.left,r,l,c,d)),s.right&&(r=n.x+e.width,l=n.y,c=n.x+e.width,d=n.y+e.height,s.top&&(l-=.5*s.top),s.bottom&&(d+=.5*s.bottom),f(s.right,r,l,c,d));function f(h,_,b,v,y){t.getDocument().setLineWidth(h),t.getDocument().line(_,b,v,y,"S")}}function W_(t,e,n,s){var r=e.settings.margin.bottom,l=e.settings.showFoot;return(l==="everyPage"||l==="lastPage"&&n)&&(r+=e.getFootHeight(e.columns)),t.pageSize().height-s.y-r}function Jd(t,e,n,s,r,l){r===void 0&&(r=[]),l===void 0&&(l=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!l&&e.foot.forEach(function(d){return Ul(t,e,d,s,r)}),e.callEndPageHooks(t,s);var c=e.settings.margin;B_(t,e,n,s),K_(t),e.pageNumber++,s.x=c.left,s.y=c.top,n.y=c.top,e.callWillDrawPageHooks(t,s),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return Ul(t,e,d,s,r)}),t.applyStyles(t.userStyles))}function K_(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function r3(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var s=e[0],r=H_(this,s),l=z_(this,r);return $_(this,l),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,s,r){M_(e,n,s,r,this)},t.API.autoTableSetDefaults=function(e){return Hu.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Hu.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var s;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Hu(this),l=G_(r,e,window,n,!1),c=l.head,d=l.body,f=((s=c[0])===null||s===void 0?void 0:s.map(function(h){return h.content}))||[];return{columns:f,rows:d,data:d}}}var O0;function X_(t,e){var n=H_(t,e),s=z_(t,n);$_(t,s)}try{if(typeof window<"u"&&window){var d2=window,f2=d2.jsPDF||((O0=d2.jspdf)===null||O0===void 0?void 0:O0.jsPDF);f2&&r3(f2)}}catch(t){console.error("Could not apply autoTable plugin",t)}const i3=({isOpen:t,onClose:e,transactions:n,allDescriptions:s,onDeleteTransaction:r,onEditTransaction:l,onViewHistory:c,onRestoreTransaction:d})=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),1),[_,b]=D.useState(h.toISOString().split("T")[0]),[v,y]=D.useState(f.toISOString().split("T")[0]),[C,L]=D.useState(!1),[O,I]=D.useState([]),[j,R]=D.useState(""),[U,te]=D.useState(!1),Q=D.useRef(null),ne=D.useRef(null),[J,oe]=D.useState(null),{addNotification:xe}=ur(),F=D.useMemo(()=>[...new Set(s.map(k=>k.split(" | ")[0]))].sort((k,Y)=>k.localeCompare(Y,"bn-BD")),[s]),H=D.useMemo(()=>j.trim()?F.filter(k=>k.toLowerCase().includes(j.toLowerCase())):F,[F,j]),re=D.useCallback(()=>{if(!_||!v){xe("       ","warning");return}const k=new Date(_);k.setHours(0,0,0,0);const Y=new Date(v);Y.setHours(23,59,59,999);let Z=0,fe=0,Ne=0;const de=n.filter(ye=>{const Ue=new Date(ye.date);return!(Ue>=k&&Ue<=Y)||!(O.length===0||O.some(Je=>ye.description.split(" | ")[0].split(" [")[0].toLowerCase()===Je.toLowerCase()))?!1:ye.isDeleted?(Ne++,C):(ye.type===fs.INCOME?Z+=ye.amount:fe+=ye.amount,!0)});oe({filteredTransactions:de.sort((ye,Ue)=>new Date(Ue.date).getTime()-new Date(ye.date).getTime()),totalIncome:Z,totalExpense:fe,netBalance:Z-fe,deletedCountInPeriod:Ne})},[_,v,n,O,C,xe]);D.useEffect(()=>{t?re():(oe(null),L(!1),I([]),R(""),te(!1))},[t,_,v,C,O,re]),D.useEffect(()=>{const k=Y=>{Q.current&&!Q.current.contains(Y.target)&&ne.current&&!ne.current.contains(Y.target)&&te(!1)};return U&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[U]);const K=k=>{I(Y=>Y.includes(k)?Y.filter(Z=>Z!==k):[...Y,k])},Te=k=>{I(k?Y=>Array.from(new Set([...Y,...H])):Y=>Y.filter(Z=>!H.includes(Z)))},G=()=>{I([]),R("")},he=k=>{try{return new Date(k).toLocaleDateString("bn-BD",{day:"2-digit",month:"long",year:"numeric"})}catch{return k}},ue=k=>{if(!k)return"N/A";try{return new Date(k).toLocaleString("bn-BD",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",","")}catch{return k}},ae=(k,Y,Z)=>{const fe=new Blob([k],{type:Z}),Ne=document.createElement("a");Ne.href=URL.createObjectURL(fe),Ne.download=Y,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(Ne.href)},V=()=>{if(!J||!J.filteredTransactions){xe("   ","error");return}const Y=[[" (Date)"," (Description)"," (Type)",` (${p.BDT_SYMBOL}) (Amount)`," (Status)"].join(",")];J.filteredTransactions.forEach(Ne=>{const de=ue(Ne.date),ye=`"${Ne.description.replace(/"/g,'""')}"`,Ue=Ne.type===fs.INCOME?p.INCOME:p.EXPENSE,we=Ne.amount.toFixed(2),Ze=Ne.isDeleted?" ":"";Y.push([de,ye,Ue,we,Ze].join(","))});const Z="\uFEFF"+Y.join(`
`),fe=`Report_${_}_to_${v}${O.length>0?"_Filtered":""}.csv`;ae(Z,fe,"text/csv;charset=utf-8;"),xe("CSV    ","success")},ce=()=>{if(!J||!J.filteredTransactions){xe("   ","error");return}const k=new yn;let Y="Helvetica";try{k.setFont("Noto Sans Bengali","normal"),Y="Noto Sans Bengali"}catch(Je){console.warn("Noto Sans Bengali could not be set in jsPDF for doc.setFont. Falling back to Helvetica for document text.",Je),k.setFont("Helvetica","normal"),Y="Helvetica"}k.setFontSize(18),k.text(p.REPORT_MODAL_TITLE,14,22),k.setFontSize(11),k.setTextColor(100);const Z=`${p.REPORT_FOR_PERIOD} ${he(_)} ${p.TO_DATE} ${he(v)}`;k.text(Z,14,30);let fe=38;if(O.length>0){const Je=`${p.REPORT_FOR_DESCRIPTIONS} ${O.slice(0,3).join(", ")}${O.length>3?"...":""}`;k.setFontSize(9),k.setTextColor(120),k.text(Je,14,fe),fe+=7,k.setFontSize(11),k.setTextColor(100)}[`${p.SUMMARY_TOTAL_INCOME}: ${p.BDT_SYMBOL} ${J.totalIncome.toLocaleString("bn-BD",{minimumFractionDigits:2})}`,`${p.SUMMARY_TOTAL_EXPENSE}: ${p.BDT_SYMBOL} ${J.totalExpense.toLocaleString("bn-BD",{minimumFractionDigits:2})}`,`${p.NET_BALANCE_FOR_PERIOD}: ${p.BDT_SYMBOL} ${J.netBalance.toLocaleString("bn-BD",{minimumFractionDigits:2})}`].forEach(Je=>{k.text(Je,14,fe),fe+=7});const de={3:{halign:"right"},0:{cellWidth:35},1:{cellWidth:"auto"},2:{cellWidth:25}},ye=[[p.DATE,p.DESCRIPTION,p.TRANSACTION_TYPE,p.AMOUNT+` (${p.BDT_SYMBOL})`]],Ue=J.filteredTransactions.map(Je=>[ue(Je.date),Je.description,Je.type===fs.INCOME?p.INCOME:p.EXPENSE,Je.amount.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]),we=Y==="Noto Sans Bengali"?"Noto Sans Bengali":"Helvetica";X_(k,{startY:fe+5,head:ye,body:Ue,theme:"striped",headStyles:{fillColor:[22,160,133],font:we,fontStyle:"bold"},bodyStyles:{font:we},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:de,didDrawPage:Je=>{let Qe=" "+k.getNumberOfPages();k.setFontSize(10);try{k.setFont(we,"normal")}catch{k.setFont("Helvetica","normal")}k.text(Qe,Je.settings.margin.left,k.internal.pageSize.height-10)}});const Ze=`Report_${_}_to_${v}${O.length>0?"_Filtered":""}.pdf`;k.save(Ze),xe("PDF    ","success")};if(!t)return null;const M=O.length>0?p.DESCRIPTIONS_SELECTED_COUNT_TEXT.replace("{count}",O.length.toString()):p.SELECT_DESCRIPTIONS_BTN_TEXT;return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"report-modal-title",children:[o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"report-modal-title",className:"text-xl font-semibold text-slate-800",children:p.REPORT_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mb-5 p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-4",children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:p.SELECT_DATE_RANGE}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"startDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.START_DATE}),o.jsx("input",{type:"date",id:"startDate",value:_,onChange:k=>b(k.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"endDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.END_DATE}),o.jsx("input",{type:"date",id:"endDate",value:v,onChange:k=>y(k.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:ne,type:"button",onClick:()=>te(k=>!k),className:`w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm text-sm
                ${U?"border-teal-500 ring-1 ring-teal-500":"border-slate-300"}
                ${O.length>0?"bg-teal-50 text-teal-700":"bg-white text-slate-700 hover:border-slate-400"}`,"aria-haspopup":"listbox","aria-expanded":U,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(h_,{className:`w-4 h-4 mr-2 ${O.length>0?"text-teal-600":"text-slate-400"}`}),M]}),o.jsx(zh,{className:`w-4 h-4 transition-transform ${U?"rotate-180":""} ${O.length>0?"text-teal-600":"text-slate-400"}`})]}),U&&o.jsxs("div",{ref:Q,className:"absolute z-20 mt-1 w-full bg-white border border-slate-300 rounded-md shadow-lg max-h-72 flex flex-col",role:"listbox",children:[o.jsx("div",{className:"p-2 border-b border-slate-200",children:o.jsx("input",{type:"search",value:j,onChange:k=>R(k.target.value),placeholder:p.SEARCH_DESCRIPTIONS_PLACEHOLDER,className:"w-full px-2.5 py-1.5 border border-slate-300 rounded-md text-xs focus:ring-teal-500 focus:border-teal-500"})}),o.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1 custom-scrollbar-modal",children:H.length===0?o.jsx("p",{className:"text-xs text-slate-500 text-center py-2",children:p.NO_DESCRIPTIONS_AVAILABLE}):H.map(k=>o.jsxs("label",{className:"flex items-center space-x-2 px-2 py-1.5 hover:bg-slate-50 rounded cursor-pointer text-sm",children:[o.jsx("input",{type:"checkbox",checked:O.includes(k),onChange:()=>K(k),className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),o.jsx("span",{className:"text-slate-700",children:k})]},k))}),o.jsxs("div",{className:"p-2 border-t border-slate-200 flex flex-wrap gap-2 justify-between items-center",children:[o.jsx("button",{onClick:()=>Te(!0),className:"text-xs text-teal-600 hover:underline",children:p.SELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL}),o.jsx("button",{onClick:()=>Te(!1),className:"text-xs text-orange-600 hover:underline",children:p.DESELECT_ALL_VISIBLE_DESCRIPTIONS_LABEL}),o.jsx("button",{onClick:G,className:"text-xs text-red-600 hover:underline",children:p.CLEAR_SELECTION_BTN_TEXT})]})]})]}),o.jsx("div",{className:"flex items-center space-x-3",children:o.jsx("button",{onClick:re,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition duration-150",children:p.GENERATE_REPORT_BTN})})]}),J?o.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:[o.jsxs("div",{className:"mb-4 p-3 bg-sky-50 rounded-md border border-sky-200 text-sm",children:[o.jsx("h3",{className:"font-semibold text-sky-700 mb-1.5",children:p.REPORT_SUMMARY_TITLE}),o.jsxs("p",{children:[p.REPORT_FOR_PERIOD," ",o.jsx("span",{className:"font-medium",children:he(_)})," ",p.TO_DATE," ",o.jsx("span",{className:"font-medium",children:he(v)})]}),O.length>0&&o.jsxs("p",{className:"text-xs text-slate-600 mt-0.5",children:[p.REPORT_FOR_DESCRIPTIONS," ",o.jsx("span",{className:"font-medium",children:O.join(", ")})]}),o.jsxs("p",{children:[p.SUMMARY_TOTAL_INCOME,": ",o.jsxs("span",{className:"font-medium text-green-600",children:[p.BDT_SYMBOL," ",J.totalIncome.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),o.jsxs("p",{children:[p.SUMMARY_TOTAL_EXPENSE,": ",o.jsxs("span",{className:"font-medium text-red-600",children:[p.BDT_SYMBOL," ",J.totalExpense.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),o.jsxs("p",{children:[p.NET_BALANCE_FOR_PERIOD,": ",o.jsxs("span",{className:`font-medium ${J.netBalance>=0?"text-green-600":"text-red-600"}`,children:[p.BDT_SYMBOL," ",J.netBalance.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),J.deletedCountInPeriod>0&&o.jsx("div",{className:"mt-1.5 pt-1.5 border-t border-sky-100",children:o.jsxs("label",{className:"flex items-center space-x-2 text-xs text-orange-700",children:[o.jsx("input",{type:"checkbox",checked:C,onChange:k=>L(k.target.checked),className:"form-checkbox h-3.5 w-3.5 text-orange-600 border-slate-300 rounded focus:ring-orange-500"}),o.jsxs("span",{children:[" ",J.deletedCountInPeriod,"    "]})]})})]}),J.filteredTransactions.length>0?o.jsx(Cp,{transactions:J.filteredTransactions,onDeleteTransaction:r,onEditTransaction:l,onViewHistory:c,onRestoreTransaction:d,showTitle:!1,initialShowDeleted:C}):o.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_TRANSACTIONS_IN_RANGE})]}):o.jsx("div",{className:"flex-grow flex items-center justify-center",children:o.jsxs("p",{className:"text-slate-500",children:[p.LOADING,"        ..."]})}),o.jsxs("div",{className:"mt-6 pt-4 text-right border-t border-slate-200 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[J&&J.filteredTransactions.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:V,className:"flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[o.jsx(sf,{className:"w-4 h-4"})," ",o.jsx("span",{children:"CSV  "})]}),o.jsxs("button",{onClick:ce,className:"flex items-center justify-center space-x-2 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500",children:[o.jsx(sf,{className:"w-4 h-4"})," ",o.jsx("span",{children:"PDF  "})]})]}),o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-500 hover:bg-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CLOSE_BTN})]})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})},o3=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),J_=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9H3.75M10.5 6h3.75a2.25 2.25 0 0 1 2.25 2.25v3.75a2.25 2.25 0 0 1-2.25 2.25h-3.75a2.25 2.25 0 0 1-2.25-2.25V8.25a2.25 2.25 0 0 1 2.25-2.25Z"})}),l3=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-3.861 8.25-8.625 8.25S3.75 16.556 3.75 12 7.611 3.75 12.375 3.75 21 7.444 21 12Zm-2.625 .065c.014-.09.021-.182.021-.275a2.625 2.625 0 0 0-4.645-1.9C13.001 9.53 12.36 9 11.625 9S10.25 9.53 9.506 10.065A2.625 2.625 0 0 0 4.86 11.79c.007.093.014.185.021.275L4.5 14.25l2.622-.751a9.004 9.004 0 0 0 1.378.562A9.004 9.004 0 0 0 11.625 15a8.963 8.963 0 0 0 3.13-.562l2.622.751L18.375 12.065Z"})}),Z_=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9A2.25 2.25 0 0 0 4.5 18.75Z"})}),c3=({person:t,netLedgerBalance:e,onEdit:n,onDelete:s,onViewHistory:r,onViewPersonDebtsHistory:l,onViewPersonLedger:c,onRestore:d,onOpenChat:f,onOpenVideoCall:h})=>{const _=(oe,xe=!0)=>{if(!oe)return"N/A";try{const F={day:"2-digit",month:"long",year:"numeric"};return xe&&(F.hour="2-digit",F.minute="2-digit"),new Date(oe).toLocaleDateString("bn-BD",F)}catch{return oe}},b=oe=>`${p.BDT_SYMBOL} ${Math.abs(oe).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,v=oe=>oe>0?p.LEDGER_BALANCE_STATUS_DEBIT.replace("{amount}",b(oe)):oe<0?p.LEDGER_BALANCE_STATUS_CREDIT.replace("{amount}",b(oe)):p.LEDGER_BALANCE_STATUS_ZERO,y=oe=>oe>0?"text-green-600":oe<0?"text-red-600":"text-slate-700",C=t.isDeleted?"opacity-70 hover:opacity-90":"",L=t.isDeleted?"border-slate-400":"border-sky-500",O=t.isDeleted&&t.deletedAt?_(t.deletedAt,!0):null,I=t.isDeleted?"text-slate-400":"text-slate-600",j=t.isDeleted?"text-slate-400":"text-slate-500",R=t.customAlias||t.name,U=t.isDeleted?"text-slate-500 line-through":"text-sky-700",te=oe=>{if(!oe)return"";const xe=oe.split(" ");return xe.length>1?`${xe[0][0]}${xe[xe.length-1][0]}`.toUpperCase():oe.substring(0,2).toUpperCase()},Q=!!t.systemUserId,ne=Q?p.OPEN_CHAT_TOOLTIP.replace("{personName}",R):p.CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",R),J=Q?p.OPEN_VIDEO_CALL_TOOLTIP.replace("{personName}",R):p.VIDEO_CALL_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",R);return o.jsxs("li",{className:`bg-white p-4 rounded-lg shadow-sm border-l-4 ${L} hover:shadow-md transition-shadow duration-150 ${C}`,children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-grow mb-3 sm:mb-0",children:[o.jsx("div",{className:"flex-shrink-0",children:t.profileImage?o.jsx("img",{src:t.profileImage,alt:R,className:"h-12 w-12 rounded-full object-cover ring-1 ring-slate-200"}):o.jsx("span",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 font-semibold text-lg ring-1 ring-slate-300",children:te(R)})}),o.jsxs("div",{className:"flex-grow",children:[o.jsxs("h3",{className:`text-lg font-semibold ${U}`,children:[R,t.systemUserId&&t.customAlias&&t.name!==t.customAlias&&o.jsxs("span",{className:`text-xs ${j} ml-1`,children:["(",t.name," ",p.SYSTEM_NAME_INDICATOR,")"]}),t.systemUserId&&!t.customAlias&&o.jsx("span",{className:`text-xs ${j} ml-1`,children:p.SYSTEM_NAME_INDICATOR})]}),t.mobileNumber&&o.jsxs("p",{className:`text-sm ${I}`,children:[p.PERSON_MOBILE_NUMBER,": ",t.mobileNumber]}),t.email&&o.jsxs("p",{className:`text-sm ${I}`,children:[p.EMAIL,": ",t.email]}),t.shopName&&o.jsxs("p",{className:`text-sm ${j}`,children:[p.PERSON_SHOP_NAME,": ",t.shopName]}),t.address&&o.jsxs("p",{className:`text-xs ${j} truncate max-w-xs sm:max-w-sm md:max-w-md`,title:t.address,children:[p.PERSON_ADDRESS,": ",t.address]}),typeof e=="number"&&!t.isDeleted&&o.jsxs("p",{className:`text-sm font-medium mt-1.5 ${y(e)}`,children:[o.jsxs("span",{className:"text-slate-600 font-normal",children:[p.CURRENT_NET_LEDGER_BALANCE_LABEL,": "]}),v(e)]}),t.isDeleted&&O&&o.jsxs("p",{className:"text-xs text-orange-600 font-medium mt-1",children:[p.DELETED_ON," ",O," (",p.STATUS_ARCHIVED,")"]})]})]}),o.jsx("div",{className:"flex items-center space-x-0.5 sm:space-x-1 self-end sm:self-center flex-shrink-0",children:t.isDeleted?o.jsx("button",{onClick:()=>d(t.id),className:"text-slate-500 hover:text-green-600 p-2 rounded-full hover:bg-green-50 transition duration-150","aria-label":p.RESTORE_ITEM_TOOLTIP,title:p.RESTORE_ITEM_TOOLTIP,children:o.jsx(M2,{className:"w-4 h-4"})}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>h(t),className:`p-2 rounded-full transition duration-150 ${Q?"text-slate-500 hover:text-green-600 hover:bg-green-50":"text-slate-400 cursor-not-allowed"}`,title:J,"aria-label":J,disabled:!Q,children:o.jsx(Z_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>f(t),className:`p-2 rounded-full transition duration-150 ${Q?"text-slate-500 hover:text-purple-600 hover:bg-purple-50":"text-slate-400 cursor-not-allowed"}`,title:ne,"aria-label":ne,disabled:!Q,children:o.jsx(l3,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>c(t),className:"text-slate-500 hover:text-indigo-600 p-2 rounded-full hover:bg-indigo-50 transition duration-150",title:p.VIEW_PERSON_LEDGER_TOOLTIP,"aria-label":p.VIEW_PERSON_LEDGER_TOOLTIP,children:o.jsx(J_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>l(t),className:"text-slate-500 hover:text-green-600 p-2 rounded-full hover:bg-green-50 transition duration-150",title:p.VIEW_PERSON_DEBTS_HISTORY_TOOLTIP,"aria-label":p.VIEW_PERSON_DEBTS_HISTORY_TOOLTIP,children:o.jsx(o3,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>r(t),className:"text-slate-500 hover:text-sky-600 p-2 rounded-full hover:bg-sky-50 transition duration-150",title:p.VIEW_HISTORY_TOOLTIP,"aria-label":p.VIEW_HISTORY_TOOLTIP,children:o.jsx(tf,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(t),className:"text-slate-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition duration-150",title:p.EDIT_PERSON_BTN_LABEL,"aria-label":p.EDIT_PERSON_BTN_LABEL,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>s(t.id),className:"text-slate-500 hover:text-red-600 p-2 rounded-full hover:bg-red-50 transition duration-150",title:p.DELETE_PERSON_BTN_LABEL,"aria-label":p.DELETE_PERSON_BTN_LABEL,children:o.jsx(xr,{className:"w-4 h-4"})})]})})]}),!t.isDeleted&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 text-xs text-slate-400",children:[o.jsxs("p",{children:[p.CREATED_ON," ",_(t.createdAt)]}),t.lastModified!==t.createdAt&&o.jsxs("p",{children:[p.LAST_MODIFIED_ON," ",_(t.lastModified)]})]})]})},Ri=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Q_=({persons:t,onEditPerson:e,onDeletePerson:n,onViewPersonHistory:s,onAddNewPerson:r,onViewPersonDebtsHistory:l,onViewPersonLedger:c,getPersonNetLedgerBalance:d,onRestorePerson:f,onOpenChat:h,onOpenVideoCall:_})=>{const[b,v]=D.useState(""),[y,C]=D.useState(!1),{activePersons:L,deletedPersons:O}=D.useMemo(()=>{const R=[],U=[],te=b.toLowerCase();return t.forEach(Q=>{const ne=Q.name.toLowerCase().includes(te),J=Q.mobileNumber&&Q.mobileNumber.includes(te),oe=Q.customAlias&&Q.customAlias.toLowerCase().includes(te);(ne||J||oe)&&(Q.isDeleted?U.push(Q):R.push(Q))}),R.sort((Q,ne)=>new Date(ne.lastModified).getTime()-new Date(Q.lastModified).getTime()),U.sort((Q,ne)=>new Date(ne.deletedAt||ne.lastModified).getTime()-new Date(Q.deletedAt||ne.lastModified).getTime()),{activePersons:R,deletedPersons:U}},[t,b]),I=y?[...L,...O]:L,j=O.length;return o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:[o.jsx("input",{type:"text",placeholder:p.SEARCH_PERSON_PLACEHOLDER,value:b,onChange:R=>v(R.target.value),className:"w-full sm:w-auto px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"}),o.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[j>0&&o.jsx("button",{onClick:()=>C(!y),className:"text-xs text-teal-600 hover:text-teal-700 underline focus:outline-none py-2 px-2 whitespace-nowrap",children:y?p.HIDE_DELETED_ITEMS_BTN:`${p.SHOW_DELETED_ITEMS_BTN} (${j})`}),o.jsxs("button",{onClick:r,className:"flex-grow sm:flex-grow-0 flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-md transition duration-150",children:[o.jsx(Ri,{className:"w-5 h-5"}),o.jsx("span",{children:p.ADD_NEW_PERSON_BTN})]})]})]}),I.length===0?o.jsx("p",{className:"text-slate-500 text-center py-6",children:b&&!y?`"${b}"       `:b&&y?`"${b}"    (  )   `:!b&&y&&j===0?p.NO_DELETED_PERSONS:!b&&!y&&L.length===0&&j>0?p.NO_PERSONS_FOUND+" "+p.SHOW_DELETED_ITEMS_BTN+"  ":p.NO_PERSONS_FOUND}):o.jsx("ul",{className:"space-y-4",children:I.map(R=>o.jsx(c3,{person:R,netLedgerBalance:d(R.id),onEdit:e,onDelete:n,onViewHistory:s,onViewPersonDebtsHistory:l,onViewPersonLedger:c,onRestore:f,onOpenChat:h,onOpenVideoCall:_},R.id))})]})},u3=({isOpen:t,onClose:e,allTransactions:n,persons:s,onRestoreTransaction:r,onRestorePerson:l,onViewTransactionHistory:c,onViewPersonHistory:d,onEditPerson:f,onViewPersonDebtsHistory:h,onViewPersonLedger:_,getPersonNetLedgerBalance:b,onDeleteTransaction:v,onEditTransaction:y,onOpenChat:C,onOpenVideoCall:L})=>{const[O,I]=D.useState("transactions"),j=D.useMemo(()=>n.filter(U=>U.isDeleted),[n]),R=D.useMemo(()=>s.filter(U=>U.isDeleted),[s]);return o.jsx(Ya,{isOpen:t,onClose:e,title:p.ARCHIVE_MODAL_TITLE,size:"3xl",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("div",{className:"mb-4 border-b border-slate-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-5","aria-label":"Tabs",children:[o.jsxs("button",{onClick:()=>I("transactions"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${O==="transactions"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":O==="transactions"?"page":void 0,children:[p.DELETED_TRANSACTIONS_TAB," (",j.length,")"]}),o.jsxs("button",{onClick:()=>I("persons"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${O==="persons"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":O==="persons"?"page":void 0,children:[p.DELETED_PERSONS_TAB," (",R.length,")"]})]})}),o.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:[O==="transactions"&&o.jsx(Cp,{transactions:j,onDeleteTransaction:v,onEditTransaction:y,onViewHistory:c,onRestoreTransaction:r,showTitle:!1,initialShowDeleted:!0}),O==="persons"&&o.jsx(Q_,{persons:R,onEditPerson:f,onDeletePerson:()=>{},onViewPersonHistory:d,onAddNewPerson:()=>{},onViewPersonDebtsHistory:h,onViewPersonLedger:_,getPersonNetLedgerBalance:b,onRestorePerson:l,onOpenChat:C,onOpenVideoCall:L})]})]})})},nm=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Hh=({debt:t,persons:e,onDeleteDebt:n,onToggleSettle:s,onEditDebt:r,onViewHistory:l,onViewPersonFinancialOverview:c})=>{const d=t.type===_a.RECEIVABLE,f=t.isSettled?"text-slate-400 line-through":d?"text-green-600":"text-red-600",h=t.isSettled?"border-slate-400":d?"border-green-500":"border-red-500",_=d?"text-green-700":"text-red-700",b=d?"hover:text-green-800":"hover:text-red-800";let v=t.isSettled?"text-slate-500":_;!t.isSettled&&c&&(v=`${_} ${b}`);const y="text-slate-600",C=e.find(oe=>oe.id===t.personId),L=C?C.customAlias||C.name:p.UNKNOWN_PERSON,O=(oe,xe=!1)=>{if(!oe)return"N/A";try{const F=new Date(oe);if(isNaN(F.getTime()))return oe;const H={day:"2-digit",month:"long",year:"numeric"};return xe?(H.hour="2-digit",H.minute="2-digit",F.toLocaleString("bn-BD",H)):F.toLocaleDateString("bn-BD",H)}catch{return oe}},I=O(t.creationDate,!0),j=t.dueDate?O(t.dueDate):" ",R=t.settledDate?O(t.settledDate,!0):"",U=t.lastModified&&t.lastModified!==t.creationDate?O(t.lastModified,!0):null,te=()=>{C&&c&&c(C)},Q=(t.remainingAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),ne=(t.originalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),J=!t.isSettled&&(t.remainingAmount||0)<(t.originalAmount||0)&&(t.remainingAmount||0)>0;return o.jsxs("li",{className:`bg-white p-4 rounded-lg shadow-sm border-l-4 ${h} flex flex-col space-y-3 hover:shadow-md transition-shadow duration-150`,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[C&&c?o.jsx("button",{onClick:te,className:`font-semibold text-lg text-left hover:underline focus:outline-none focus:ring-1 focus:ring-offset-1 rounded-sm ${v} focus:ring-sky-500`,title:p.VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP.replace("{personName}",L),disabled:!c,children:L}):o.jsx("p",{className:`font-semibold text-lg ${v}`,children:L}),o.jsx("p",{className:`text-sm ${y}`,children:t.description}),C&&C.mobileNumber&&o.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",C.mobileNumber]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("span",{className:`font-semibold text-xl ${f}`,children:[p.BDT_SYMBOL," ",Q]}),(J||t.isSettled&&t.originalAmount!==t.remainingAmount)&&o.jsxs("span",{className:"block text-xs text-slate-400",children:["(: ",p.BDT_SYMBOL," ",ne,")"]})]})]}),o.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[o.jsxs("p",{children:[p.CREATED_ON," ",I]}),!t.isSettled&&t.dueDate&&o.jsxs("p",{className:"text-orange-600",children:[p.DUE_ON," ",j]}),t.isSettled&&o.jsxs("p",{className:"text-lime-600 font-medium",children:[p.SETTLED_ON," ",R]}),U&&o.jsxs("p",{className:"italic",children:[p.LAST_MODIFIED_ON," ",U]}),J&&o.jsx("p",{className:"text-blue-600 font-medium",children:" "})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200 mt-2 space-x-2",children:[o.jsx("button",{onClick:()=>s(t.id),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-colors duration-150
            ${t.isSettled?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":d?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:t.isSettled&&(t.remainingAmount||0)>0,children:t.isSettled?p.MARK_AS_UNSETTLED:p.MARK_AS_SETTLED}),o.jsxs("div",{className:"flex items-center space-x-0.5",children:[C&&c&&o.jsx("button",{onClick:te,className:"text-slate-500 hover:text-sky-600 p-1.5 rounded-full hover:bg-sky-50 transition duration-150","aria-label":p.VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP.replace("{personName}",L),title:p.VIEW_PERSON_FINANCIAL_OVERVIEW_TOOLTIP.replace("{personName}",L),children:o.jsx(nm,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>l(t),className:"text-slate-500 hover:text-sky-600 p-1.5 rounded-full hover:bg-sky-50 transition duration-150","aria-label":p.VIEW_HISTORY_TOOLTIP,title:p.VIEW_HISTORY_TOOLTIP,children:o.jsx(tf,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>r(t),className:"text-slate-500 hover:text-blue-600 p-1.5 rounded-full hover:bg-blue-50 transition duration-150","aria-label":p.EDIT_DEBT_TOOLTIP,title:p.EDIT_DEBT_TOOLTIP,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(t.id),className:"text-slate-500 hover:text-red-600 p-1.5 rounded-full hover:bg-red-50 transition duration-150","aria-label":p.DELETE_DEBT_TOOLTIP,title:p.DELETE_DEBT_TOOLTIP,children:o.jsx(xr,{className:"w-4 h-4"})})]})]})]})},d3=({debts:t,persons:e,onDeleteDebt:n,onToggleSettle:s,onEditDebt:r,onViewHistory:l,onViewPersonFinancialOverview:c})=>{const d=t.filter(h=>h.type===_a.RECEIVABLE).sort((h,_)=>new Date(_.creationDate).getTime()-new Date(h.creationDate).getTime()),f=t.filter(h=>h.type===_a.PAYABLE).sort((h,_)=>new Date(_.creationDate).getTime()-new Date(h.creationDate).getTime());return o.jsxs("section",{"aria-labelledby":"debt-list-heading",className:"my-8 p-4 md:p-6 bg-white rounded-xl shadow-lg",children:[o.jsx("h2",{id:"debt-list-heading",className:"text-2xl font-semibold text-slate-700 mb-6 text-center",children:p.DEBT_LIST_TITLE}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-medium text-green-700 mb-4 pb-2 border-b-2 border-green-200",children:p.RECEIVABLES_SUBTITLE}),d.length===0?o.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_DEBTS_RECEIVABLE}):o.jsx("ul",{className:"space-y-4",children:d.map(h=>o.jsx(Hh,{debt:h,persons:e,onDeleteDebt:n,onToggleSettle:s,onEditDebt:r,onViewHistory:l,onViewPersonFinancialOverview:c},h.id))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-medium text-red-700 mb-4 pb-2 border-b-2 border-red-200",children:p.PAYABLES_SUBTITLE}),f.length===0?o.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_DEBTS_PAYABLE}):o.jsx("ul",{className:"space-y-4",children:f.map(h=>o.jsx(Hh,{debt:h,persons:e,onDeleteDebt:n,onToggleSettle:s,onEditDebt:r,onViewHistory:l,onViewPersonFinancialOverview:c},h.id))})]})]})]})},f3=({isOpen:t,onClose:e,message:n,title:s=""})=>t?o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[101]",role:"dialog","aria-modal":"true","aria-labelledby":"simple-error-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-sm transform transition-all duration-150 ease-out scale-100",onClick:r=>r.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"mr-3 flex-shrink-0",children:o.jsx(Xu,{className:"h-6 w-6 text-red-500","aria-hidden":"true"})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h2",{id:"simple-error-modal-title",className:"text-lg font-semibold text-slate-800 mb-2",children:s}),o.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-wrap",children:n})]})]}),o.jsx("div",{className:"mt-6 text-right",children:o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null,h3=({isOpen:t,onClose:e})=>{const[n,s]=D.useState(""),[r,l]=D.useState(""),[c,d]=D.useState(""),[f,h]=D.useState(null),{changePassword:_,isAuthLoading:b,authError:v,clearAuthError:y}=Nc();if(!t)return null;const C=async O=>{if(O.preventDefault(),h(null),y(),r.length<6){h(p.NEW_PASSWORD_LABEL);return}if(r!==c){h(p.PASSWORDS_DONT_MATCH);return}try{await _(n,r),e()}catch(I){!v&&I.message!==p.ERROR_CURRENT_PASSWORD_INCORRECT&&h(I.message||p.AUTH_ERROR_GENERAL)}},L=v||f;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[99]",role:"dialog","aria-modal":"true","aria-labelledby":"change-password-modal-title",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("h2",{id:"change-password-modal-title",className:"text-xl font-semibold text-slate-700",children:p.CHANGE_PASSWORD_MODAL_TITLE}),o.jsx("button",{onClick:()=>{e(),y(),h(null)},className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-slate-600 mb-1",children:p.CURRENT_PASSWORD_LABEL}),o.jsx("input",{type:"password",id:"currentPassword",value:n,onChange:O=>s(O.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.NEW_PASSWORD_LABEL}),o.jsx("input",{type:"password",id:"newPasswordModal",value:r,onChange:O=>l(O.target.value),placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${f&&f.includes("")?"border-red-500":"border-slate-300"}`,required:!0,minLength:6})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmNewPasswordModal",className:"block text-sm font-medium text-slate-600 mb-1",children:p.CONFIRM_NEW_PASSWORD_LABEL}),o.jsx("input",{type:"password",id:"confirmNewPasswordModal",value:c,onChange:O=>d(O.target.value),placeholder:p.PASSWORD_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${f&&f===p.PASSWORDS_DONT_MATCH?"border-red-500":"border-slate-300"}`,required:!0,minLength:6})]}),L&&o.jsxs("div",{className:"mt-3 p-3 bg-red-50 border-l-4 border-red-400 text-red-700 text-sm rounded-md flex items-start space-x-2",role:"alert",children:[o.jsx(Xu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),o.jsx("span",{children:L})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[o.jsx("button",{type:"button",onClick:()=>{e(),y(),h(null)},className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",disabled:b,children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50",disabled:b,children:b?p.LOADING:p.RESET_PASSWORD_BTN})]})]})]})})},m3=({isOpen:t,onClose:e})=>{const{currentUser:n,updateCurrentUserData:s,isAuthLoading:r,authError:l,clearAuthError:c}=Nc(),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[y,C]=D.useState(null);if(D.useEffect(()=>{n&&(f(n.name||""),_(n.mobileNumber||""),v(n.facebookProfileUrl||"")),C(null),l&&c()},[t,n]),!t||!n)return null;const L=R=>R.trim()===""?!0:/^(?:\+88|88)?(01[3-9]\d{8})$/.test(R),O=R=>R.trim()===""?!0:/^(https?:\/\/)?(www\.)?(m\.)?(facebook|fb)\.com\/[a-zA-Z0-9(\.\_\-?/=&\ S)]+$/i.test(R),I=async R=>{if(R.preventDefault(),C(null),c(),!d.trim()){C(p.NAME_PLACEHOLDER+" ");return}if(h.trim()&&!L(h.trim())){C(p.INVALID_MOBILE_NUMBER_FORMAT);return}if(b.trim()&&!O(b.trim())){C(p.INVALID_FACEBOOK_URL);return}const U={};if(d.trim()!==(n.name||"")&&(U.name=d.trim()),h.trim()!==(n.mobileNumber||"")?U.mobileNumber=h.trim()===""?void 0:h.trim():!h.trim()&&n.mobileNumber&&(U.mobileNumber=void 0),b.trim()!==(n.facebookProfileUrl||"")?U.facebookProfileUrl=b.trim()===""?void 0:b.trim():!b.trim()&&n.facebookProfileUrl&&(U.facebookProfileUrl=void 0),Object.keys(U).length===0){e();return}try{await s(U),e()}catch(te){!l&&te.message!==p.MOBILE_NUMBER_ALREADY_IN_USE.replace("{mobileNumber}","")&&C(te.message||p.AUTH_ERROR_GENERAL)}},j=l||y;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[100]",role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-modal-title",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("h2",{id:"edit-profile-modal-title",className:"text-xl font-semibold text-slate-700",children:p.EDIT_PROFILE_MODAL_TITLE}),o.jsx("button",{onClick:()=>{e(),c(),C(null)},className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"profile-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.NAME," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"profile-name",value:d,onChange:R=>f(R.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"profile-mobile",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_MOBILE_NUMBER}),o.jsx("input",{type:"tel",id:"profile-mobile",value:h,onChange:R=>_(R.target.value),placeholder:p.PERSON_MOBILE_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${y&&(y===p.INVALID_MOBILE_NUMBER_FORMAT||y.includes(p.MOBILE_NUMBER_ALREADY_IN_USE.split(" ")[0]))?"border-red-500":"border-slate-300"}`})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"profile-facebook",className:"block text-sm font-medium text-slate-600 mb-1",children:p.FACEBOOK_PROFILE_URL}),o.jsx("input",{type:"url",id:"profile-facebook",value:b,onChange:R=>v(R.target.value),placeholder:p.FACEBOOK_PROFILE_URL_PLACEHOLDER,className:`w-full px-4 py-2.5 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${y===p.INVALID_FACEBOOK_URL?"border-red-500":"border-slate-300"}`})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"profile-email",className:"block text-sm font-medium text-slate-600 mb-1",children:p.EMAIL_NOT_EDITABLE}),o.jsx("input",{type:"email",id:"profile-email",value:n.email,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm bg-slate-100 text-slate-500 cursor-not-allowed",readOnly:!0,disabled:!0})]}),j&&o.jsxs("div",{className:"mt-3 p-3 bg-red-50 border-l-4 border-red-400 text-red-700 text-sm rounded-md flex items-start space-x-2",role:"alert",children:[o.jsx(Xu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),o.jsx("span",{children:j})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[o.jsx("button",{type:"button",onClick:()=>{e(),c(),C(null)},className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",disabled:r,children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50",disabled:r,children:r?p.LOADING:p.SAVE_CHANGES})]})]})]})})},p3=({onOpenInvoiceListModal:t,invoiceCount:e})=>o.jsxs("div",{onClick:t,className:"bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer flex flex-col items-center text-center h-full transform hover:scale-105",role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&t()},"aria-label":`${p.VIEW_INVOICES_NAV_BTN}, ${p.INVOICE_HOME_CARD_SUBTITLE}`,children:[o.jsx(Yd,{className:"w-10 h-10 text-indigo-500 mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:p.VIEW_INVOICES_NAV_BTN}),o.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-grow",children:p.INVOICE_HOME_CARD_SUBTITLE}),typeof e=="number"&&o.jsxs("p",{className:"text-base font-bold text-indigo-600 mt-3 pt-2 border-t border-slate-100 w-full",children:[p.TOTAL_INVOICES_COUNT_LABEL,": ",e.toLocaleString("bn-BD")]})]}),Gd=({title:t,description:e,icon:n})=>o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col items-center text-center h-full transform hover:scale-105",children:[o.jsx("div",{className:"text-teal-500 mb-4",children:n}),o.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:t}),o.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-grow",children:e})]}),g3=({onSwitchAuthMode:t,onOpenInvoiceListModal:e})=>o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-600 via-cyan-600 to-sky-600 text-white flex flex-col items-center justify-center p-4 sm:p-8 selection:bg-yellow-300 selection:text-yellow-900",children:[o.jsxs("header",{className:"text-center mb-10 sm:mb-16",children:[o.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 animate-fadeInUp text-shadow-sm",children:p.WELCOME_TO_APP_MAIN_TITLE}),o.jsx("p",{className:"text-lg sm:text-xl text-teal-50 max-w-3xl mx-auto animate-fadeInUp animation-delay-300 leading-relaxed",children:p.WELCOME_TO_APP_SUBTITLE})]}),o.jsxs("main",{className:"w-full max-w-5xl",children:[o.jsxs("section",{className:"mb-10 sm:mb-12 animate-fadeInUp animation-delay-600",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-center mb-6 sm:mb-8 text-white text-shadow-xs",children:p.KEY_FEATURES_TITLE}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[o.jsx(Gd,{title:p.FEATURE_TRANSACTION_TRACKING_TITLE,description:p.FEATURE_TRANSACTION_TRACKING_DESC,icon:o.jsx(gh,{className:"w-10 h-10"})}),o.jsx(Gd,{title:p.FEATURE_DEBT_MANAGEMENT_TITLE,description:p.FEATURE_DEBT_MANAGEMENT_DESC,icon:o.jsx(kl,{className:"w-10 h-10"})}),o.jsx(Gd,{title:p.FEATURE_BUDGETING_TITLE,description:p.FEATURE_BUDGETING_DESC,icon:o.jsx(F0,{className:"w-10 h-10"})}),o.jsx(p3,{onOpenInvoiceListModal:e}),o.jsx(Gd,{title:p.FEATURE_PERSON_LEDGER_TITLE,description:p.FEATURE_PERSON_LEDGER_DESC,icon:o.jsx(J_,{className:"w-10 h-10"})}),o.jsx(Gd,{title:p.FEATURE_AI_ADVICE_TITLE,description:p.FEATURE_AI_ADVICE_DESC,icon:o.jsx(d_,{className:"w-10 h-10"})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6 animate-fadeInUp animation-delay-900",children:[o.jsxs("button",{onClick:()=>t("login"),className:"w-full sm:w-auto bg-white text-teal-700 font-semibold py-3 px-10 rounded-lg shadow-md hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-300 focus:ring-opacity-75 transition-all duration-150 transform hover:scale-105 text-lg flex items-center justify-center space-x-2","aria-label":p.LOGIN,children:[o.jsx(V0,{className:"w-5 h-5"}),o.jsx("span",{children:p.LOGIN})]}),o.jsxs("button",{onClick:()=>t("signup"),className:"w-full sm:w-auto bg-yellow-400 text-yellow-900 font-semibold py-3 px-10 rounded-lg shadow-md hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-75 transition-all duration-150 transform hover:scale-105 text-lg flex items-center justify-center space-x-2","aria-label":p.SIGNUP,children:[o.jsx(Ch,{className:"w-5 h-5"}),o.jsx("span",{children:p.SIGNUP})]})]})]}),o.jsx("footer",{className:"mt-10 sm:mt-16 text-center text-teal-100 text-sm animate-fadeInUp animation-delay-1200",children:o.jsxs("p",{children:[" ",new Date().getFullYear()," ",p.APP_TITLE,".  "]})}),o.jsx("style",{children:`
        .animation-delay-300 { animation-delay: 0.3s; }
        .animation-delay-600 { animation-delay: 0.6s; }
        .animation-delay-900 { animation-delay: 0.9s; }
        .animation-delay-1200 { animation-delay: 1.2s; }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fadeInUp {
            animation: fadeInUp 0.7s ease-out forwards;
            opacity: 0; /* Start hidden */
        }
        .text-shadow-sm { text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        .text-shadow-xs { text-shadow: 1px 1px 1px rgba(0,0,0,0.05); }
      `})]}),kp=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),x3=1*1024*1024,E3=({onSave:t,initialData:e,onCancel:n,allPersons:s,onUserDetailsImported:r})=>{const[l,c]=D.useState(""),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[y,C]=D.useState(""),[L,O]=D.useState(""),[I,j]=D.useState(void 0),[R,U]=D.useState(void 0),[te,Q]=D.useState(""),[ne,J]=D.useState(""),[oe,xe]=D.useState(null),[F,H]=D.useState(!1),re=D.useRef(null),{addNotification:K}=ur(),Te=D.useRef(null),G=!!(e&&e.systemUserId);D.useEffect(()=>{e?(c(e.name),f(e.customAlias||""),_(e.mobileNumber||""),v(e.email||""),C(e.address||""),O(e.shopName||""),j(e.profileImage),U(e.systemUserId)):(c(""),f(""),_(""),v(""),C(""),O(""),j(void 0),U(void 0)),Q(""),J(""),xe(null),H(!1)},[e]);const he=D.useCallback(async()=>{var Ne;if(G)return;const Y=((Ne=Te.current)==null?void 0:Ne.value.trim())||"";if(H(!0),Q(""),xe(null),!Y){R&&(U(void 0),K(p.SYSTEM_USER_UNLINKED_FORM_EDITABLE,"info",4e3)),H(!1);return}if(!/^(?:\+88|88)?(01[3-9]\d{8})$/.test(Y)){Q(p.INVALID_MOBILE_NUMBER_FORMAT),H(!1);return}const fe=s.find(de=>de.mobileNumber===Y&&(!e||de.id!==e.id));if(fe){const de=fe.name;Q(p.MOBILE_NUMBER_DUPLICATE.replace("{mobileNumber}",Y).replace("{personNamesString}",de)),H(!1);return}try{const de=await oT(Y);de&&de.id?R===de.id&&((e==null?void 0:e.mobileNumber)===Y||h===Y)?xe(null):xe(de):(R&&(U(void 0),K(p.SYSTEM_USER_UNLINKED_FORM_EDITABLE,"info",4e3)),xe(null))}catch(de){console.error("Error fetching system user by mobile:",de),R&&(U(void 0),K(p.SYSTEM_USER_UNLINKED_FORM_EDITABLE,"info",4e3)),xe(null)}finally{H(!1)}},[s,e,R,K,h,G]);D.useEffect(()=>{if(G&&(e!=null&&e.email)){v(e.email),J("");return}if(!b.trim()){J("");return}const Y=b.trim().toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y)){J(p.INVALID_EMAIL_FORMAT);return}const fe=s.filter(Ne=>{var de;return((de=Ne.email)==null?void 0:de.toLowerCase())===Y&&(!e||Ne.id!==e.id)});if(fe.length>0){const Ne=fe.map(de=>de.name).join(", ");J(p.PERSON_EMAIL_DUPLICATE.replace("{email}",b.trim()).replace("{personNamesString}",Ne))}else J("")},[b,s,e,G]);const ue=Y=>{var fe;if(G)return;const Z=(fe=Y.target.files)==null?void 0:fe[0];if(Z){if(Z.size>x3){K(p.IMAGE_SIZE_TOO_LARGE_ERROR,"error"),re.current&&(re.current.value="");return}const Ne=new FileReader;Ne.onloadend=()=>{j(Ne.result)},Ne.readAsDataURL(Z)}},ae=()=>{G||(j(void 0),re.current&&(re.current.value=""))},V=()=>{if(!G&&oe&&oe.mobileNumber&&oe.id){const Y=oe.name||"",Z=oe.email||"";c(Y),v(Z),U(oe.id),f(""),K(p.USER_DETAILS_IMPORTED,"success");const fe={name:Y,email:Z||void 0,mobileNumber:oe.mobileNumber,systemUserId:oe.id};xe(null),!e&&r&&r(fe)}},ce=Y=>{if(Y.preventDefault(),!l.trim()&&!G){K(p.NAME+" ","error");return}if(te&&te!==p.IMPORT_SYSTEM_USER_PROMPT&&!G){K(te,"error");return}if(ne&&!G){K(ne,"error");return}const Z={name:l,customAlias:d.trim()||void 0,mobileNumber:h.trim()||void 0,email:b.trim()||void 0,address:y.trim()||void 0,shopName:L.trim()||void 0,profileImage:I,systemUserId:R};t(Z,e==null?void 0:e.id)},M="bg-slate-100 text-slate-500 cursor-not-allowed",k="border-slate-300";return o.jsxs("form",{onSubmit:ce,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"person-name",className:"block text-sm font-medium text-slate-600 mb-1",children:[G?p.SYSTEM_LINKED_NAME_LABEL:p.NAME,!G&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"person-name",value:l,onChange:Y=>!G&&c(Y.target.value),placeholder:G?"":p.NAME_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${G?M:k}`,required:!G,readOnly:G})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"person-custom-alias",className:"block text-sm font-medium text-slate-600 mb-1",children:p.FIELD_NAME_CUSTOM_ALIAS}),o.jsx("input",{type:"text",id:"person-custom-alias",value:d,onChange:Y=>f(Y.target.value),placeholder:p.CUSTOM_ALIAS_PLACEHOLDER,className:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"}),G&&l!==d&&d&&o.jsxs("p",{className:"mt-1 text-xs text-slate-500 flex items-center",children:[o.jsx(f_,{className:"w-3 h-3 mr-1 text-sky-500"}),' "',o.jsx("span",{className:"font-medium mx-1",children:d}),'"    ']})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_PROFILE_IMAGE}),o.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[o.jsx("span",{className:"inline-block h-20 w-20 rounded-full overflow-hidden bg-slate-100 ring-2 ring-slate-200",children:I?o.jsx("img",{src:I,alt:p.IMAGE_PREVIEW_ALT,className:"h-full w-full object-cover"}):o.jsx("svg",{className:"h-full w-full text-slate-300",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsxs("button",{type:"button",onClick:()=>{var Y;return(Y=re.current)==null?void 0:Y.click()},className:`inline-flex items-center px-3 py-1.5 border shadow-sm text-xs font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${G?"border-slate-200 text-slate-400 bg-slate-100 cursor-not-allowed":"border-slate-300 text-slate-700 bg-white hover:bg-slate-50"}`,disabled:G,children:[o.jsx(kp,{className:`w-4 h-4 mr-1.5 ${G?"text-slate-400":"text-slate-500"}`}),I?p.CHANGE_IMAGE_BTN:p.UPLOAD_IMAGE_BTN]}),o.jsx("input",{type:"file",ref:re,onChange:ue,accept:"image/*",className:"hidden","aria-label":p.UPLOAD_IMAGE_BTN,disabled:G}),I&&o.jsxs("button",{type:"button",onClick:ae,className:`inline-flex items-center px-3 py-1.5 border border-transparent shadow-sm text-xs font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${G?"text-red-400 bg-red-50 cursor-not-allowed":"text-red-700 bg-red-100 hover:bg-red-200"}`,disabled:G,children:[o.jsx(xr,{className:"w-4 h-4 mr-1.5"}),p.REMOVE_IMAGE_BTN]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"person-mobile",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_MOBILE_NUMBER}),o.jsx("input",{ref:Te,type:"tel",id:"person-mobile",value:h,onChange:Y=>!G&&_(Y.target.value),onBlur:he,placeholder:p.PERSON_MOBILE_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${te&&!G?"border-red-500":G?M:k}`,"aria-describedby":"mobile-error-message mobile-import-prompt",readOnly:G}),te&&!G&&o.jsx("p",{id:"mobile-error-message",className:"mt-1 text-xs text-red-600",children:te}),F&&!G&&o.jsx("p",{className:"mt-1 text-xs text-slate-500 animate-pulse",children:p.LOADING}),oe&&!te&&!F&&!G&&o.jsxs("div",{id:"mobile-import-prompt",className:"mt-2 p-2 bg-sky-50 border border-sky-200 rounded-md text-xs",children:[o.jsx("p",{className:"text-sky-700",children:p.IMPORT_SYSTEM_USER_PROMPT}),o.jsxs("p",{className:"text-slate-600",children:[": ",o.jsx("span",{className:"font-medium",children:oe.name}),oe.email?`, : ${oe.email}`:""]}),o.jsxs("button",{type:"button",onClick:V,className:"mt-1.5 text-xs bg-sky-500 hover:bg-sky-600 text-white font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",children:[o.jsx(Ch,{className:"w-3 h-3"}),o.jsx("span",{children:p.IMPORT_USER_DETAILS_BTN})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"person-email",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_EMAIL_LABEL}),o.jsx("input",{type:"email",id:"person-email",value:b,onChange:Y=>!G&&v(Y.target.value),placeholder:p.PERSON_EMAIL_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${ne&&!G?"border-red-500":G?M:k}`,readOnly:G}),ne&&!G&&o.jsx("p",{id:"email-error",className:"mt-1 text-xs text-red-600",children:ne})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"person-address",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_ADDRESS}),o.jsx("textarea",{id:"person-address",value:y,onChange:Y=>!G&&C(Y.target.value),placeholder:p.PERSON_ADDRESS_PLACEHOLDER,rows:2,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${G?M:k}`,readOnly:G})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"person-shopName",className:"block text-sm font-medium text-slate-600 mb-1",children:p.PERSON_SHOP_NAME}),o.jsx("input",{type:"text",id:"person-shopName",value:L,onChange:Y=>!G&&O(Y.target.value),placeholder:p.PERSON_SHOP_NAME_PLACEHOLDER,className:`w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 ${G?M:k}`,readOnly:G})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[o.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-70",disabled:!G&&(!!te&&te!==p.IMPORT_SYSTEM_USER_PROMPT||!!ne||F),children:e?p.SAVE_CHANGES:p.SAVE_PERSON_BTN})]})]})},_3=({isOpen:t,onClose:e,person:n})=>{if(!t||!n)return null;const s=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return f}},r=f=>({name:p.FIELD_NAME_PERSON_NAME,customAlias:p.FIELD_NAME_CUSTOM_ALIAS,mobileNumber:p.FIELD_NAME_PERSON_MOBILE,email:p.FIELD_NAME_PERSON_EMAIL,address:p.FIELD_NAME_PERSON_ADDRESS,shopName:p.FIELD_NAME_PERSON_SHOP_NAME,profileImageAction:p.FIELD_NAME_PERSON_PROFILE_IMAGE,systemUserId:"  ",isDeleted:p.FIELD_NAME_IS_DELETED,deletedAt:p.FIELD_NAME_DELETED_AT})[f]||f,l=(f,h)=>{if(h==null||h==="")return["mobileNumber","email","address","shopName","deletedAt","customAlias","systemUserId"].includes(f)&&(h===null||h==="")?"":"";if(f==="profileImageAction")switch(h){case"added":return p.PROFILE_IMAGE_ADDED;case"updated":return p.PROFILE_IMAGE_UPDATED;case"removed":return p.PROFILE_IMAGE_REMOVED;case"none":return" ";default:return String(h)}return f==="isDeleted"?h?p.FIELD_VALUE_TRUE:p.FIELD_VALUE_FALSE:f==="deletedAt"?s(String(h)):String(h)},c=(f,h)=>{const _=[],b=f.snapshot;if(f.action==="created"||!h&&f.action!=="updated"&&f.action!=="restored")Object.keys(b).forEach(v=>{b[v]!==void 0&&(v!=="profileImageAction"||b[v]!=="none")&&_.push(o.jsxs("li",{className:"text-sm",children:[o.jsxs("strong",{children:[r(v),":"]})," ",l(v,b[v])]},v))}),_.length===0&&_.push(o.jsx("li",{className:"text-sm italic",children:"      "},"initial-empty"));else if((f.action==="updated"||f.action==="restored")&&h){let v=!1;if(Object.keys(b).forEach(y=>{const C=h[y],L=b[y];let O=!1;if(y==="isDeleted")O=!!L!=!!C;else if(y==="profileImageAction")O=L!=="none"&&L!==C;else{const I=C==null||C==="",j=L==null||L==="";I&&j?O=!1:O=String(L)!==String(C)}O&&(f.action==="restored"?(y==="isDeleted"||y==="deletedAt"||y==="profileImageAction"||String(L)!==String(C))&&(v=!0,_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(y)).replace("{oldValue}",l(y,C)).replace("{newValue}",l(y,L))},y))):(v=!0,y==="profileImageAction"&&L!=="none"?_.push(o.jsxs("li",{className:"text-sm",children:[o.jsxs("strong",{children:[r(y),":"]})," ",l(y,L)]},y)):y!=="profileImageAction"&&_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r(y)).replace("{oldValue}",l(y,C)).replace("{newValue}",l(y,L))},y))))}),!v){if(f.action==="updated")_.push(o.jsx("li",{className:"text-sm italic",children:"     "},"no-changes"));else if(f.action==="restored"){const y=!!b.isDeleted!=!!h.isDeleted,C=String(b.deletedAt)!==String(h.deletedAt),L=b.profileImageAction!=="none"&&b.profileImageAction!==h.profileImageAction;y&&_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("isDeleted")).replace("{oldValue}",l("isDeleted",h.isDeleted)).replace("{newValue}",l("isDeleted",b.isDeleted))},"isDeleted-restore-specific")),C&&_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("deletedAt")).replace("{oldValue}",l("deletedAt",h.deletedAt)).replace("{newValue}",l("deletedAt",b.deletedAt))},"deletedAt-restore-specific")),L&&_.push(o.jsx("li",{className:"text-sm",children:p.FIELD_CHANGES_FROM_TO.replace("{field}",r("profileImageAction")).replace("{oldValue}",l("profileImageAction",h.profileImageAction)).replace("{newValue}",l("profileImageAction",b.profileImageAction))},"profileImageAction-restore-specific")),!y&&!C&&!L&&_.push(o.jsx("li",{className:"text-sm italic",children:"  "},"no-substantive-restore-changes"))}}}else f.action==="deleted"&&Object.keys(b).forEach(v=>{(v==="isDeleted"||v==="deletedAt"||b[v]!==void 0&&b[v]!==null&&(v!=="profileImageAction"||b[v]!=="none"))&&_.push(o.jsxs("li",{className:"text-sm",children:[o.jsxs("strong",{children:[r(v),":"]})," ",l(v,b[v])]},v))});return _.length===0?o.jsx("li",{className:"text-sm italic",children:"    "}):o.jsx("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:_})},d=f=>{switch(f){case"created":return{text:p.ACTION_CREATED,color:"bg-green-100 text-green-700"};case"updated":return{text:p.ACTION_UPDATED,color:"bg-blue-100 text-blue-700"};case"deleted":return{text:p.ACTION_DELETED,color:"bg-red-100 text-red-700"};case"restored":return{text:p.ACTION_RESTORED,color:"bg-yellow-100 text-yellow-700"};default:return{text:f,color:"bg-slate-100 text-slate-700"}}};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"person-history-modal-title",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("div",{children:o.jsxs("h2",{id:"person-history-modal-title",className:"text-xl font-semibold text-slate-800",children:[p.PERSON_HISTORY_MODAL_TITLE,": ",o.jsx("span",{className:"font-normal",children:n.customAlias||n.name})]})}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto flex-grow pr-1 space-y-4 custom-scrollbar",children:n.editHistory&&n.editHistory.length>0?n.editHistory.slice().sort((f,h)=>new Date(h.timestamp).getTime()-new Date(f.timestamp).getTime()).map((f,h,_)=>{const b=_[h+1],v=b?b.snapshot:void 0,y=d(f.action);return o.jsxs("div",{className:"p-3.5 border border-slate-200 rounded-lg bg-slate-50 shadow-sm hover:shadow-md transition-shadow duration-150",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[o.jsxs("p",{className:"text-xs text-slate-500",children:[o.jsx("span",{className:"font-semibold text-slate-700",children:" : "}),f.userId]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${y.color}`,children:y.text})]}),o.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-1",children:[p.VERSION_AT_TIMESTAMP," ",s(f.timestamp)]}),c(f,v)]},f.timestamp)}):o.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_HISTORY})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1; /* slate-300 */
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8; /* slate-500 */
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},b3=({isOpen:t,onClose:e,persons:n,onSelectPerson:s,onAddNewPerson:r})=>{const[l,c]=D.useState(""),d=D.useMemo(()=>{const f=l.toLowerCase();return n.filter(h=>h.name.toLowerCase().includes(f)||h.mobileNumber&&h.mobileNumber.includes(f)).sort((h,_)=>h.name.localeCompare(_.name,"bn-BD"))},[n,l]);return t?o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[97]",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"select-person-modal-title",children:[o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col",onClick:f=>f.stopPropagation(),style:{animation:"fadeIn 0.2s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"select-person-modal-title",className:"text-xl font-semibold text-slate-800",children:p.SELECT_PERSON_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3",children:[o.jsx("input",{type:"text",placeholder:p.SEARCH_PERSON_PLACEHOLDER,value:l,onChange:f=>c(f.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",autoFocus:!0,"aria-label":" "}),o.jsxs("button",{onClick:()=>{r()},className:"flex items-center justify-center space-x-2 bg-green-500 hover:bg-green-600 text-white font-medium py-2.5 px-4 rounded-lg shadow-sm transition duration-150 text-sm sm:text-base flex-shrink-0",children:[o.jsx(Ri,{className:"w-5 h-5"}),o.jsx("span",{children:p.ADD_NEW_PERSON_BTN})]})]}),o.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:d.length===0?o.jsx("p",{className:"text-slate-500 text-center py-5",children:l?`"${l}"       `:p.NO_PERSONS_FOUND}):o.jsx("ul",{className:"space-y-2",role:"listbox","aria-label":" ",children:d.map(f=>o.jsx("li",{role:"option","aria-selected":"false",children:o.jsxs("button",{onClick:()=>{s(f.id)},className:"w-full text-left p-3 rounded-md hover:bg-teal-50 focus:bg-teal-100 focus:outline-none focus:ring-1 focus:ring-teal-500 transition duration-150",children:[o.jsx("span",{className:"font-medium text-slate-700",children:f.name}),f.mobileNumber&&o.jsxs("span",{className:"text-xs text-slate-500 block",children:[": ",f.mobileNumber]}),f.shopName&&o.jsxs("span",{className:"text-xs text-slate-500 block",children:[": ",f.shopName]})]})},f.id))})}),o.jsx("div",{className:"mt-5 pt-4 border-t border-slate-200 text-right",children:o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL})})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; /* bg-slate-50 */ border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; /* slate-200 */ border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; /* slate-300 */ }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      `})]}):null},T3=({isOpen:t,onClose:e,person:n,personDebts:s,allPersons:r,onDeleteDebt:l,onToggleSettle:c,onEditDebt:d,onViewDebtHistory:f})=>{if(!t||!n)return null;const h=[...s].sort((b,v)=>new Date(v.creationDate).getTime()-new Date(b.creationDate).getTime()),_=p.PERSON_DEBTS_HISTORY_MODAL_TITLE.replace("{personName}",n.name);return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"person-debts-history-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:b=>b.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"person-debts-history-modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800 truncate pr-2",children:_}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full flex-shrink-0","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),n.mobileNumber&&o.jsxs("p",{className:"text-sm text-slate-600 mb-0.5",children:[p.PERSON_MOBILE_NUMBER,": ",n.mobileNumber]}),n.shopName&&o.jsxs("p",{className:"text-sm text-slate-500 mb-0.5",children:[p.PERSON_SHOP_NAME,": ",n.shopName]}),n.address&&o.jsxs("p",{className:"text-xs text-slate-500 mb-3 truncate",title:n.address,children:[p.PERSON_ADDRESS,": ",n.address]}),o.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1 space-y-4",children:h.length===0?o.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_DEBTS_FOR_PERSON}):o.jsx("ul",{className:"space-y-4",children:h.map(b=>o.jsx(Hh,{debt:b,persons:r,onDeleteDebt:l,onToggleSettle:c,onEditDebt:d,onViewHistory:f},b.id))})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},y3=({isOpen:t,onClose:e,person:n,onAddEntry:s})=>{const[r,l]=D.useState(xo.DEBIT),[c,d]=D.useState(""),[f,h]=D.useState(""),[_,b]=D.useState(""),{addNotification:v}=ur();if(D.useEffect(()=>{t&&(l(xo.DEBIT),d(""),h(""),b(new Date().toISOString().slice(0,16)))},[t]),!t||!n)return null;const y=C=>{C.preventDefault();const L=parseFloat(c);if(isNaN(L)||L<=0){v(p.FORM_VALIDATION_ERROR.replace("  ",""),"error");return}if(!f.trim()){v(p.FORM_VALIDATION_ERROR.replace("   ",""),"error");return}if(!_){v("     ","error");return}s({personId:n.id,type:r,amount:L,description:f.trim(),date:new Date(_).toISOString()}),e()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[99]",role:"dialog","aria-modal":"true","aria-labelledby":"add-ledger-entry-modal-title",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{id:"add-ledger-entry-modal-title",className:"text-xl font-semibold text-slate-700",children:p.ADD_LEDGER_ENTRY_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("p",{className:"text-md text-slate-600 mb-5",children:[p.PERSON_NAME,": ",o.jsx("span",{className:"font-semibold",children:n.name})]}),o.jsxs("form",{onSubmit:y,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"entry-date",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DATE," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"datetime-local",id:"entry-date",value:_,onChange:C=>b(C.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-600 mb-1.5",children:[p.LEDGER_ENTRY_TYPE_LABEL," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md border border-slate-200 hover:bg-slate-50 has-[:checked]:bg-orange-50 has-[:checked]:border-orange-400",children:[o.jsx("input",{type:"radio",name:"ledgerEntryType",value:xo.DEBIT,checked:r===xo.DEBIT,onChange:()=>l(xo.DEBIT),className:"form-radio h-4 w-4 text-orange-600 focus:ring-orange-500"}),o.jsx("span",{className:"text-sm text-orange-700",children:p.LEDGER_TYPE_DEBIT_PERSON})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded-md border border-slate-200 hover:bg-slate-50 has-[:checked]:bg-teal-50 has-[:checked]:border-teal-400",children:[o.jsx("input",{type:"radio",name:"ledgerEntryType",value:xo.CREDIT,checked:r===xo.CREDIT,onChange:()=>l(xo.CREDIT),className:"form-radio h-4 w-4 text-teal-600 focus:ring-teal-500"}),o.jsx("span",{className:"text-sm text-teal-700",children:p.LEDGER_TYPE_CREDIT_PERSON})]})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"ledger-amount",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.AMOUNT," (",p.BDT_SYMBOL,") ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",id:"ledger-amount",value:c,onChange:C=>d(C.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"ledger-description",className:"block text-sm font-medium text-slate-600 mb-1",children:[p.DESCRIPTION," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{id:"ledger-description",value:f,onChange:C=>h(C.target.value),placeholder:p.LEDGER_ENTRY_DESCRIPTION_PLACEHOLDER,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:p.ADD_LEDGER_ENTRY_BTN})]})]})]})})},N3=({isOpen:t,onClose:e,person:n,ledgerEntries:s,currentNetBalance:r,onAddEntryClick:l,onDeleteEntry:c})=>{if(!t||!n)return null;const d=[...s].sort((y,C)=>new Date(C.date).getTime()-new Date(y.date).getTime()),f=y=>{try{return new Date(y).toLocaleString("bn-BD",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return y}},h=y=>`${p.BDT_SYMBOL} ${Math.abs(y).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,_=y=>y>0?p.LEDGER_BALANCE_STATUS_DEBIT.replace("{amount}",h(y)):y<0?p.LEDGER_BALANCE_STATUS_CREDIT.replace("{amount}",h(y)):p.LEDGER_BALANCE_STATUS_ZERO,b=y=>y>0?"text-green-600":y<0?"text-red-600":"text-slate-700",v=y=>{window.confirm(p.CONFIRM_DELETE_LEDGER_ENTRY_MSG)&&c(y,n.id)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"person-ledger-history-modal-title",onClick:e,children:o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-2xl md:max-w-3xl max-h-[90vh] flex flex-col",onClick:y=>y.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsxs("div",{children:[o.jsx("h2",{id:"person-ledger-history-modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800 truncate pr-2",children:p.PERSON_LEDGER_HISTORY_MODAL_TITLE.replace("{personName}",n.name)}),o.jsxs("p",{className:`text-md font-medium ${b(r)}`,children:[p.CURRENT_NET_LEDGER_BALANCE_LABEL,": ",_(r)]})]}),o.jsxs("div",{className:"mt-2 sm:mt-0 flex space-x-2",children:[o.jsxs("button",{onClick:()=>l(n),className:"flex items-center space-x-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-xs sm:text-sm font-medium py-2 px-3 rounded-md transition duration-150",children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsxs("span",{children:[p.ADD_LEDGER_ENTRY_BTN.split(" ")[0]," ",p.ADD_LEDGER_ENTRY_BTN.split(" ")[1]]})]}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1.5 rounded-full flex-shrink-0","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),o.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:d.length===0?o.jsx("p",{className:"text-slate-500 text-center py-10",children:p.NO_LEDGER_ENTRIES_FOUND}):o.jsx("div",{className:"divide-y divide-slate-100",children:d.map(y=>{const C=y.type===xo.DEBIT,L=C?"text-green-600":"text-red-600";return o.jsx("div",{className:"py-3 px-1.5 hover:bg-slate-50 rounded-md group",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[o.jsxs("div",{className:"flex-grow mb-1 sm:mb-0",children:[o.jsx("p",{className:"text-xs text-slate-500",children:f(y.date)}),o.jsx("p",{className:"text-sm font-medium text-slate-700",children:y.description})]}),o.jsxs("div",{className:"flex sm:flex-col items-end sm:text-right space-x-2 sm:space-x-0 sm:space-y-0.5 w-full sm:w-auto",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:`font-semibold text-sm ${L}`,children:C?`: ${h(y.amount)}`:`: ${h(y.amount)}`}),o.jsx("button",{onClick:()=>v(y.id),className:"ml-2 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-1",title:p.DELETE_DEBT_TOOLTIP,children:o.jsx(xr,{className:"w-3.5 h-3.5"})})]}),o.jsxs("p",{className:`text-xs font-medium ${b(y.balanceAfterEntry)}`,children:[p.LEDGER_BALANCE_AFTER_ENTRY,": ",_(y.balanceAfterEntry)]})]})]})},y.id)})})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md",children:p.CLOSE_BTN})})]})})},v3=({isOpen:t,onClose:e,person:n,personDebts:s,personLedgerEntries:r,currentNetLedgerBalance:l,allPersons:c,onDeleteDebt:d,onToggleSettle:f,onEditDebt:h,onViewDebtHistory:_,onAddLedgerEntryClick:b,onDeleteLedgerEntry:v})=>{if(!t)return null;const y=p.PERSON_FINANCIAL_OVERVIEW_MODAL_TITLE.replace("{personName}",n.name),C=D.useMemo(()=>{const U=r.map(Q=>({id:Q.id,date:Q.date,itemType:"ledger",description:Q.description,amount:Q.amount,ledgerEntryType:Q.type,balanceAfterEntry:Q.balanceAfterEntry,originalEntry:Q})),te=s.map(Q=>({id:Q.id,date:Q.creationDate,itemType:"debt",description:Q.description,amount:Q.originalAmount,debtType:Q.type,isSettled:Q.isSettled,dueDate:Q.dueDate,settledDate:Q.settledDate,creationDate:Q.creationDate,personId:Q.personId,originalDebt:Q}));return[...U,...te].sort((Q,ne)=>new Date(ne.date).getTime()-new Date(Q.date).getTime())},[r,s]),L=U=>{if(!U)return"N/A";try{const te={day:"2-digit",month:"long",year:"numeric"};return new Date(U).toLocaleDateString("bn-BD",te)}catch{return U}},O=U=>`${p.BDT_SYMBOL} ${Math.abs(U).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,I=U=>U>0?p.LEDGER_BALANCE_STATUS_DEBIT.replace("{amount}",O(U)):U<0?p.LEDGER_BALANCE_STATUS_CREDIT.replace("{amount}",O(U)):p.LEDGER_BALANCE_STATUS_ZERO,j=U=>U>0?"text-green-600":U<0?"text-red-600":"text-slate-700",R=U=>{window.confirm(p.CONFIRM_DELETE_LEDGER_ENTRY_MSG)&&v(U,n.id)};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-2 sm:p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"person-financial-overview-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-slate-50 p-4 sm:p-6 rounded-xl shadow-2xl w-full max-w-3xl xl:max-w-4xl max-h-[95vh] flex flex-col",onClick:U=>U.stopPropagation(),children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-4 pb-3 border-b border-slate-300",children:[o.jsx("div",{className:"flex-grow",children:o.jsx("h2",{id:"person-financial-overview-modal-title",className:"text-lg sm:text-xl md:text-2xl font-semibold text-slate-800",children:y})}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1.5 rounded-full sm:ml-4 absolute top-3 right-3 mt-1 mr-1 sm:static sm:mt-0 sm:mr-0","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg shadow-sm border border-slate-200",children:[o.jsxs("p",{className:"text-sm text-slate-600",children:[p.PERSON_NAME,": ",o.jsx("span",{className:"font-semibold text-slate-700",children:n.name})]}),n.mobileNumber&&o.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",n.mobileNumber]}),n.shopName&&o.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_SHOP_NAME,": ",n.shopName]}),n.address&&o.jsxs("p",{className:"text-xs text-slate-500 truncate max-w-xs sm:max-w-sm md:max-w-md",title:n.address,children:[p.PERSON_ADDRESS,": ",n.address]}),o.jsxs("p",{className:`text-md font-semibold mt-2 pt-2 border-t border-slate-100 ${j(l)}`,children:[p.CURRENT_NET_LEDGER_BALANCE_LABEL,": ",I(l)]})]}),o.jsxs("section",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1 bg-white p-4 rounded-lg shadow",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-indigo-700",children:p.UNIFIED_FINANCIAL_HISTORY_TITLE}),o.jsxs("button",{onClick:()=>b(n),className:"flex items-center space-x-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-xs font-medium py-1.5 px-3 rounded-md",title:p.ADD_LEDGER_ENTRY_MODAL_TITLE,children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:"  "})]})]}),C.length===0?o.jsx("p",{className:"text-slate-500 text-center py-6",children:p.NO_FINANCIAL_ACTIVITY}):o.jsx("ul",{className:"space-y-4",children:C.map(U=>{const te=L(U.date);if(U.itemType==="ledger"){const Q=U,ne=Q.ledgerEntryType===xo.DEBIT,J=ne?"border-green-500":"border-red-500",oe=ne?"text-green-600":"text-red-600",xe="text-slate-700",F=Q.ledgerEntryType===xo.DEBIT?p.LEDGER_TYPE_DEBIT_PERSON.split(" ")[0]:p.LEDGER_TYPE_CREDIT_PERSON.split(" ")[0];return o.jsx("li",{className:`bg-white p-3 rounded-md shadow-sm border-l-4 ${J} group`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[o.jsxs("div",{className:"flex-grow mb-1.5 sm:mb-0",children:[o.jsx("p",{className:"text-xs text-slate-500",children:te}),o.jsx("p",{className:`text-sm font-medium ${xe}`,children:Q.description})]}),o.jsxs("div",{className:"flex sm:flex-col items-end sm:text-right space-x-2 sm:space-x-0 sm:space-y-0.5 w-full sm:w-auto self-end sm:self-auto",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:`font-semibold text-sm ${oe}`,children:[F,": ",O(Q.amount)]}),o.jsx("button",{onClick:()=>R(Q.id),className:"ml-1.5 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity p-0.5",title:p.DELETE_TRANSACTION_TOOLTIP,children:o.jsx(xr,{className:"w-3.5 h-3.5"})})]}),o.jsxs("p",{className:`text-xs font-medium ${j(Q.balanceAfterEntry)}`,children:[" (): ",I(Q.balanceAfterEntry)]})]})]})},Q.id)}else if(U.itemType==="debt"){const Q=U;return o.jsx("li",{className:"relative",children:o.jsx(Hh,{debt:Q.originalDebt,persons:c,onDeleteDebt:d,onToggleSettle:f,onEditDebt:h,onViewHistory:_})},Q.id)}return null})})]}),o.jsx("div",{className:"mt-5 pt-4 text-right border-t border-slate-300 bg-slate-50 -mx-4 sm:-mx-6 -mb-4 sm:-mb-6 px-4 sm:px-6 pb-4 sm:pb-6 rounded-b-xl",children:o.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 text-sm font-semibold text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})},A3=({isOpen:t,onClose:e,receivablePersons:n,onViewPersonDetails:s,persons:r})=>{if(!t)return null;const l=d=>`${p.BDT_SYMBOL} ${d.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,c=d=>{const f=r.find(h=>h.id===d);f&&(s(f),e())};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"receivable-persons-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col",onClick:d=>d.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"receivable-persons-modal-title",className:"text-xl font-semibold text-slate-800",children:p.RECEIVABLE_PERSONS_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:n.length===0?o.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_PERSONS_WITH_RECEIVABLES}):o.jsx("ul",{className:"space-y-3",children:n.map(d=>o.jsx("li",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow duration-150",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-green-700",children:d.personName}),d.personMobile&&o.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",d.personMobile]}),o.jsxs("p",{className:"text-sm text-slate-600 mt-0.5",children:[p.TOTAL_RECEIVABLE_FROM_PERSON_LABEL," ",o.jsx("span",{className:"font-bold text-green-600",children:l(d.totalReceivableAmount)})]})]}),o.jsx("button",{onClick:()=>c(d.personId),className:"text-sky-600 hover:text-sky-700 p-2 rounded-full hover:bg-sky-100 transition-colors",title:p.VIEW_DETAILS_FOR_PERSON_RECEIVABLE_TOOLTIP.replace("{personName}",d.personName),"aria-label":p.VIEW_DETAILS_FOR_PERSON_RECEIVABLE_TOOLTIP.replace("{personName}",d.personName),children:o.jsx(nm,{className:"w-5 h-5"})})]})},d.personId))})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},S3=({isOpen:t,onClose:e,payablePersons:n,onViewPersonDetails:s,persons:r})=>{if(!t)return null;const l=d=>`${p.BDT_SYMBOL} ${d.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,c=d=>{const f=r.find(h=>h.id===d);f&&(s(f),e())};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[98]",role:"dialog","aria-modal":"true","aria-labelledby":"payable-persons-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col",onClick:d=>d.stopPropagation(),style:{animation:"fadeIn 0.3s ease-out"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"payable-persons-modal-title",className:"text-xl font-semibold text-slate-800",children:p.PAYABLE_PERSONS_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:n.length===0?o.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_PERSONS_WITH_PAYABLES}):o.jsx("ul",{className:"space-y-3",children:n.map(d=>o.jsx("li",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow duration-150",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-red-700",children:d.personName}),d.personMobile&&o.jsxs("p",{className:"text-xs text-slate-500",children:[p.PERSON_MOBILE_NUMBER,": ",d.personMobile]}),o.jsxs("p",{className:"text-sm text-slate-600 mt-0.5",children:[p.TOTAL_PAYABLE_TO_PERSON_LABEL," ",o.jsx("span",{className:"font-bold text-red-600",children:l(d.totalPayableAmount)})]})]}),o.jsx("button",{onClick:()=>c(d.personId),className:"text-sky-600 hover:text-sky-700 p-2 rounded-full hover:bg-sky-100 transition-colors",title:p.VIEW_DETAILS_FOR_PERSON_PAYABLE_TOOLTIP.replace("{personName}",d.personName),"aria-label":p.VIEW_DETAILS_FOR_PERSON_PAYABLE_TOOLTIP.replace("{personName}",d.personName),children:o.jsx(nm,{className:"w-5 h-5"})})]})},d.personId))})}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition-colors",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},C3=({isOpen:t,onClose:e,userSuggestions:n,predefinedIncomeSuggestions:s,predefinedExpenseSuggestions:r,onAddSuggestion:l,onEditSuggestion:c,onDeleteSuggestion:d})=>{const[f,h]=D.useState("expense"),[_,b]=D.useState(""),[v,y]=D.useState(null),[C,L]=D.useState(null),{addNotification:O}=ur();if(D.useEffect(()=>{t&&(h("expense"),b(""),y(null),L(null))},[t]),!t)return null;const I=ne=>{ne.preventDefault(),L(null);const J=_.trim();if(!J){L(p.SUGGESTION_CANNOT_BE_EMPTY);return}if([...n.filter(xe=>xe.type===f).map(xe=>xe.text.toLowerCase()),...(f==="income"?s:r).map(xe=>xe.toLowerCase())].includes(J.toLowerCase())){L(p.SUGGESTION_ALREADY_EXISTS);return}l(J,f),b("")},j=ne=>{var F;if(ne.preventDefault(),L(null),!v||!v.currentText.trim()){L(p.SUGGESTION_CANNOT_BE_EMPTY);return}const J=v.currentText.trim(),oe=((F=n.find(H=>H.id===v.id))==null?void 0:F.text)||"",xe=[...n.filter(H=>H.type===v.type&&H.id!==v.id).map(H=>H.text.toLowerCase()),...(v.type==="income"?s:r).map(H=>H.toLowerCase())];if(J.toLowerCase()!==oe.toLowerCase()&&xe.includes(J.toLowerCase())){L(p.SUGGESTION_ALREADY_EXISTS);return}c(v.id,J),y(null)},R=ne=>{y({id:ne.id,currentText:ne.text,type:ne.type}),L(null),h(ne.type)},U=f==="income"?s:r,te=n.filter(ne=>ne.type===f),Q=(ne,J,oe)=>o.jsxs("section",{className:"mb-4",children:[o.jsx("h3",{className:"text-md font-semibold text-slate-700 mb-2",children:oe}),ne.length===0?o.jsx("p",{className:"text-sm text-slate-500 italic",children:J?p.NO_USER_SUGGESTIONS_FOR_TYPE:"   "}):o.jsx("ul",{className:`space-y-1.5 ${J?"":"max-h-40 overflow-y-auto custom-scrollbar-modal pr-1 border-t border-slate-200 pt-2"}`,children:ne.map((xe,F)=>{const H=J?xe.text:xe,re=J?xe.id:`predefined-${F}`;return o.jsxs("li",{className:`flex justify-between items-center p-2 rounded-md group ${J?"bg-indigo-50 border-indigo-100":"bg-slate-100"}`,children:[o.jsx("span",{className:`text-sm ${J?"text-slate-700":"text-slate-600"}`,children:H}),J&&o.jsxs("div",{className:"space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>R(xe),className:"p-1 text-blue-600 hover:text-blue-800",title:p.EDIT_SUGGESTION_TOOLTIP,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>d(xe.id),className:"p-1 text-red-500 hover:text-red-700",title:p.DELETE_SUGGESTION_TOOLTIP,children:o.jsx(xr,{className:"w-4 h-4"})})]})]},re)})})]});return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[100]",role:"dialog","aria-modal":"true","aria-labelledby":"manage-suggestions-modal-title",onClick:e,children:o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-lg md:max-w-xl max-h-[90vh] flex flex-col",onClick:ne=>ne.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"manage-suggestions-modal-title",className:"text-xl font-semibold text-slate-800",children:p.MANAGE_SUGGESTIONS_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"mb-4 border-b border-slate-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>h("income"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none ${f==="income"?"border-green-500 text-green-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":f==="income"?"page":void 0,children:p.SUGGESTIONS_INCOME_TAB}),o.jsx("button",{onClick:()=>h("expense"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none ${f==="expense"?"border-red-500 text-red-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":f==="expense"?"page":void 0,children:p.SUGGESTIONS_EXPENSE_TAB})]})}),o.jsxs("div",{className:"mb-5 p-3.5 border border-teal-200 bg-teal-50 rounded-lg",children:[o.jsx("h3",{className:"text-md font-medium text-teal-700 mb-2",children:v?p.EDIT_SUGGESTION_MODAL_TITLE:`${f==="income"?p.INCOME:p.EXPENSE} ${p.ADD_NEW_SUGGESTION_LABEL.toLowerCase()}`}),o.jsxs("form",{onSubmit:v?j:I,className:"space-y-2.5",children:[o.jsx("input",{type:"text",value:v?v.currentText:_,onChange:ne=>v?y({...v,currentText:ne.target.value}):b(ne.target.value),placeholder:p.SUGGESTION_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",autoFocus:!!v}),C&&o.jsx("p",{className:"text-xs text-red-600",children:C}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-3.5 rounded-md text-sm flex items-center space-x-1.5",children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:v?p.SAVE_CHANGES:p.ADD_SUGGESTION_BTN})]}),v&&o.jsx("button",{type:"button",onClick:()=>{y(null),L(null)},className:"bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-2 px-3.5 rounded-md text-sm",children:p.CANCEL})]})]})]}),o.jsxs("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1 space-y-5",children:[Q(te,!0,f==="income"?p.USER_SUGGESTIONS_TITLE_INCOME:p.USER_SUGGESTIONS_TITLE_EXPENSE),Q(U,!1,f==="income"?p.PREDEFINED_SUGGESTIONS_TITLE_INCOME:p.PREDEFINED_SUGGESTIONS_TITLE_EXPENSE)]}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 rounded-lg shadow-md",children:p.CLOSE_BTN})})]})})},L3=({isOpen:t,onClose:e,categories:n,budgets:s,transactions:r,allTransactionSuggestions:l,userCustomSuggestions:c,onAddCategory:d,onUpdateCategory:f,onDeleteCategory:h,onAddBudget:_,onUpdateBudget:b,onDeleteBudget:v,calculateBudgetUsage:y})=>{const[C,L]=D.useState("budgets"),[O,I]=D.useState(""),[j,R]=D.useState(null),[U,te]=D.useState([]),[Q,ne]=D.useState(""),[J,oe]=D.useState(""),[xe,F]=D.useState(!1),[H,re]=D.useState(""),[K,Te]=D.useState(Qs.MONTHLY),[G,he]=D.useState(""),[ue,ae]=D.useState(new Date().getFullYear().toString()),[V,ce]=D.useState(""),[M,k]=D.useState(new Date().getFullYear().toString()),[Y,Z]=D.useState("1"),[fe,Ne]=D.useState(new Date().getFullYear().toString()),[de,ye]=D.useState(""),[Ue,we]=D.useState(""),[Ze,Je]=D.useState(null),Qe=D.useMemo(()=>l.filter(pe=>!c.includes(pe)).sort((pe,vt)=>pe.localeCompare(vt,"bn-BD")),[l,c]),je=D.useMemo(()=>[...c].sort((pe,vt)=>pe.localeCompare(vt,"bn-BD")),[c]);D.useEffect(()=>{if(t){I(""),R(null),te([]),oe(""),ne(""),re(""),Te(Qs.MONTHLY);const pe=new Date;he(`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`),ae(pe.getFullYear().toString()),ce(ge(pe).toString()),k(pe.getFullYear().toString()),Z((Math.floor(pe.getMonth()/3)+1).toString()),Ne(pe.getFullYear().toString()),ye(pe.toISOString().split("T")[0]),we(new Date(pe.getFullYear(),pe.getMonth()+1,0).toISOString().split("T")[0]),Je(null),L("budgets")}},[t]);function ge(pe){pe=new Date(Date.UTC(pe.getFullYear(),pe.getMonth(),pe.getDate())),pe.setUTCDate(pe.getUTCDate()+4-(pe.getUTCDay()||7));const vt=new Date(Date.UTC(pe.getUTCFullYear(),0,1));return Math.ceil(((pe.valueOf()-vt.valueOf())/864e5+1)/7)}const Fe=(pe,vt)=>{const At=pe==="user"?je:Qe;te(vt?Kt=>Array.from(new Set([...Kt,...At])):Kt=>Kt.filter(Gt=>!At.includes(Gt)))},ut=pe=>{te(vt=>vt.includes(pe)?vt.filter(At=>At!==pe):[...vt,pe])},Pe=async pe=>{pe.preventDefault(),j?(await f(j.id,O,U),R(null)):await d(O,U),I(""),te([])},nt=pe=>{R(pe),I(pe.name),te(pe.associatedSuggestions||[]),L("categories")},it=()=>{R(null),I(""),te([])},st=async pe=>{pe.preventDefault();const vt=parseFloat(H);let At="",Kt;switch(K){case Qs.MONTHLY:At=`${G}-01`;break;case Qs.WEEKLY:const Gt=new Date(parseInt(ue),0,1+(parseInt(V)-1)*7),xn=Gt.getDay(),rs=xn===0?-6:1-xn;Gt.setDate(Gt.getDate()+rs),At=Gt.toISOString().split("T")[0];break;case Qs.QUARTERLY:const Cn=(parseInt(Y)-1)*3;At=new Date(parseInt(M),Cn,1).toISOString().split("T")[0];break;case Qs.YEARLY:At=new Date(parseInt(fe),0,1).toISOString().split("T")[0];break;case Qs.CUSTOM:if(!de||!Ue){alert(p.BUDGET_INVALID_CUSTOM_DATE_RANGE);return}if(new Date(Ue)<new Date(de)){alert(p.BUDGET_INVALID_CUSTOM_DATE_RANGE);return}At=de,Kt=Ue;break;default:alert("  ");return}Ze?(await b(Ze.id,vt),Je(null)):await _(J,vt,K,At,Kt),re(""),Ze||(oe(""),ne(""))},yt=pe=>{Je(pe),oe(pe.categoryId);const vt=n.find(Gt=>Gt.id===pe.categoryId);ne(vt?vt.name:""),re(pe.amount.toString()),Te(pe.period);const At=new Date(pe.startDate),Kt=new Date(pe.endDate);switch(pe.period){case Qs.MONTHLY:he(`${At.getFullYear()}-${String(At.getMonth()+1).padStart(2,"0")}`);break;case Qs.WEEKLY:ae(At.getFullYear().toString()),ce(ge(At).toString());break;case Qs.QUARTERLY:k(At.getFullYear().toString()),Z((Math.floor(At.getMonth()/3)+1).toString());break;case Qs.YEARLY:Ne(At.getFullYear().toString());break;case Qs.CUSTOM:ye(At.toISOString().split("T")[0]),we(Kt.toISOString().split("T")[0]);break}L("budgets")},Pt=pe=>{var vt;return((vt=n.find(At=>At.id===pe))==null?void 0:vt.name)||p.UNKNOWN_PERSON},Rt=pe=>{const vt=new Date(pe.startDate),At=new Date(pe.endDate),Kt={day:"numeric",month:"long",year:"numeric"};switch(pe.period){case Qs.MONTHLY:return vt.toLocaleDateString("bn-BD",{month:"long",year:"numeric"});case Qs.WEEKLY:return`${vt.toLocaleDateString("bn-BD",Kt)} - ${At.toLocaleDateString("bn-BD",Kt)} ( ${ge(vt)})`;case Qs.QUARTERLY:const Gt=Math.floor(vt.getMonth()/3)+1,xn={1:p.QUARTER_1,2:p.QUARTER_2,3:p.QUARTER_3,4:p.QUARTER_4};return`${vt.getFullYear()} ${xn[Gt]||` ${Gt}`}`;case Qs.YEARLY:return vt.getFullYear().toString()+" ";case Qs.CUSTOM:return`${vt.toLocaleDateString("bn-BD",Kt)} - ${At.toLocaleDateString("bn-BD",Kt)}`;default:return Ft(pe.startDate)}},Ft=pe=>new Date(pe).toLocaleDateString("bn-BD",{month:"long",year:"numeric"}),Yt=({percentage:pe,isOverspent:vt})=>{const At=vt?100:Math.max(0,Math.min(100,pe));let Kt="bg-green-500";return vt?Kt="bg-red-600":pe>90?Kt="bg-red-500":pe>75&&(Kt="bg-yellow-500"),o.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 dark:bg-slate-700 my-1",children:o.jsx("div",{className:`${Kt} h-2.5 rounded-full transition-all duration-300 ease-out`,style:{width:`${At}%`},"aria-valuenow":vt?100:pe,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":`${p.BUDGET_PERCENTAGE_USED_LABEL.replace("{percentage}",pe.toFixed(0))}`})})},Be=[...n].sort((pe,vt)=>pe.name.localeCompare(vt.name,"bn-BD")),We=[...s].sort((pe,vt)=>new Date(vt.startDate).getTime()-new Date(pe.startDate).getTime()||Pt(pe.categoryId).localeCompare(Pt(vt.categoryId))),Lt=D.useMemo(()=>Q?Be.filter(pe=>pe.name.toLowerCase().includes(Q.toLowerCase())):Be,[Q,Be]);return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[95]",role:"dialog","aria-modal":"true","aria-labelledby":"budget-setup-modal-title",children:[o.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-xl shadow-2xl w-full max-w-2xl md:max-w-3xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-200",children:[o.jsx("h2",{id:"budget-setup-modal-title",className:"text-xl sm:text-2xl font-semibold text-slate-800",children:p.BUDGET_SETUP_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"mb-4 border-b border-slate-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>L("budgets"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${C==="budgets"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":C==="budgets"?"page":void 0,children:p.BUDGETS_SECTION_TITLE}),o.jsx("button",{onClick:()=>L("categories"),className:`whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm focus:outline-none
                ${C==="categories"?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,"aria-current":C==="categories"?"page":void 0,children:p.BUDGET_CATEGORIES_SECTION_TITLE})]})}),o.jsxs("div",{className:"overflow-y-auto flex-grow custom-scrollbar-modal pr-1",children:[C==="categories"&&o.jsxs("section",{"aria-labelledby":"categories-section-title",children:[o.jsx("h3",{id:"categories-section-title",className:"text-lg font-semibold text-slate-700 mb-3",children:j?p.EDIT_BUDGET_CATEGORY_BTN:p.ADD_NEW_BUDGET_CATEGORY_BTN}),o.jsxs("form",{onSubmit:Pe,className:"mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"categoryName",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_CATEGORY_NAME_LABEL}),o.jsx("input",{type:"text",id:"categoryName",value:O,onChange:pe=>I(pe.target.value),placeholder:p.BUDGET_CATEGORY_NAME_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"      :"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3 max-h-60 overflow-y-auto custom-scrollbar-modal p-2 border rounded-md bg-white",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white py-1",children:[o.jsx("p",{className:"text-xs font-semibold text-indigo-600",children:p.USER_SUGGESTIONS_TITLE_EXPENSE}),je.length>0&&o.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-indigo-500 rounded-sm border-slate-400 focus:ring-indigo-400",title:U.filter(pe=>je.includes(pe)).length===je.length?p.DESELECT_ALL_SUGGESTIONS_LABEL:p.SELECT_ALL_SUGGESTIONS_LABEL,checked:je.length>0&&U.filter(pe=>je.includes(pe)).length===je.length,onChange:pe=>Fe("user",pe.target.checked)})]}),je.length>0?je.map(pe=>o.jsxs("label",{className:"flex items-center space-x-2 text-xs text-slate-700 mb-1 p-1 hover:bg-indigo-50 rounded",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500",checked:U.includes(pe),onChange:()=>ut(pe)}),o.jsx("span",{children:pe})]},`user-${pe}`)):o.jsx("p",{className:"text-xs text-slate-400 italic",children:p.NO_USER_SUGGESTIONS_FOR_TYPE})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white py-1",children:[o.jsx("p",{className:"text-xs font-semibold text-sky-600",children:p.PREDEFINED_SUGGESTIONS_TITLE_EXPENSE}),Qe.length>0&&o.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-sky-500 rounded-sm border-slate-400 focus:ring-sky-400",title:U.filter(pe=>Qe.includes(pe)).length===Qe.length?p.DESELECT_ALL_SUGGESTIONS_LABEL:p.SELECT_ALL_SUGGESTIONS_LABEL,checked:Qe.length>0&&U.filter(pe=>Qe.includes(pe)).length===Qe.length,onChange:pe=>Fe("predefined",pe.target.checked)})]}),Qe.map(pe=>o.jsxs("label",{className:"flex items-center space-x-2 text-xs text-slate-700 mb-1 p-1 hover:bg-sky-50 rounded",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 text-sky-600 border-slate-300 rounded focus:ring-sky-500",checked:U.includes(pe),onChange:()=>ut(pe)}),o.jsx("span",{children:pe})]},`predefined-${pe}`))]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 pt-1",children:[o.jsxs("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-md text-sm flex items-center space-x-1.5",children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:j?p.SAVE_CHANGES:p.SAVE_BUDGET_CATEGORY_BTN})]}),j&&o.jsx("button",{type:"button",onClick:it,className:"bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-2 px-4 rounded-md text-sm",children:p.CANCEL})]})]}),Be.length===0&&!j?o.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_BUDGET_CATEGORIES_FOUND}):o.jsx("ul",{className:"space-y-2",children:Be.map(pe=>o.jsxs("li",{className:"p-2.5 bg-white rounded-md border border-slate-200 hover:shadow-sm group",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-slate-700 text-sm font-medium",children:pe.name}),o.jsxs("div",{className:"space-x-1 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>nt(pe),className:"p-1.5 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50",title:p.EDIT_BUDGET_CATEGORY_BTN,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>h(pe.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:p.DELETE_BUDGET_CATEGORY_BTN,children:o.jsx(xr,{className:"w-4 h-4"})})]})]}),pe.associatedSuggestions&&pe.associatedSuggestions.length>0&&o.jsxs("div",{className:"mt-1.5 pt-1.5 border-t border-slate-100",children:[o.jsxs("p",{className:"text-xs text-slate-500 mb-0.5",children:["  (",pe.associatedSuggestions.length,"):"]}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[pe.associatedSuggestions.slice(0,5).map(vt=>o.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded-full",children:vt},vt)),pe.associatedSuggestions.length>5&&o.jsx("span",{className:"text-xs text-slate-400 px-1.5 py-0.5",children:"..."})]})]})]},pe.id))})]}),C==="budgets"&&o.jsxs("section",{"aria-labelledby":"budgets-section-title",children:[o.jsx("h3",{id:"budgets-section-title",className:"text-lg font-semibold text-slate-700 mb-3",children:Ze?p.EDIT_BUDGET_BTN:p.ADD_NEW_BUDGET_BTN}),o.jsxs("form",{onSubmit:st,className:"mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{htmlFor:"budgetCategorySearch",className:"block text-sm font-medium text-slate-600 mb-1",children:p.SELECT_BUDGET_CATEGORY_LABEL}),o.jsx("input",{type:"text",id:"budgetCategorySearch",value:Q,onChange:pe=>{ne(pe.target.value),F(!0),oe("")},onFocus:()=>F(!0),placeholder:p.BUDGET_SELECT_CATEGORY_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",required:!J,disabled:!!Ze,autoComplete:"off"}),xe&&!Ze&&o.jsx("ul",{className:"absolute z-10 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto",children:Lt.length>0?Lt.map(pe=>o.jsx("li",{onClick:()=>{oe(pe.id),ne(pe.name),F(!1)},className:"px-3 py-2 hover:bg-teal-50 cursor-pointer text-sm",children:pe.name},pe.id)):o.jsx("li",{className:"px-3 py-2 text-xs text-slate-500",children:"  "})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetAmount",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_AMOUNT_LABEL}),o.jsx("input",{type:"number",id:"budgetAmount",value:H,onChange:pe=>re(pe.target.value),placeholder:p.AMOUNT_PLACEHOLDER,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,min:"0.01",step:"0.01"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetPeriod",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_PERIOD_LABEL}),o.jsxs("select",{id:"budgetPeriod",value:K,onChange:pe=>Te(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",required:!0,disabled:!!Ze,children:[o.jsx("option",{value:Qs.MONTHLY,children:p.BUDGET_MONTHLY_PERIOD}),o.jsx("option",{value:Qs.WEEKLY,children:p.BUDGET_WEEKLY_PERIOD}),o.jsx("option",{value:Qs.QUARTERLY,children:p.BUDGET_QUARTERLY_PERIOD}),o.jsx("option",{value:Qs.YEARLY,children:p.BUDGET_YEARLY_PERIOD}),o.jsx("option",{value:Qs.CUSTOM,children:p.BUDGET_CUSTOM_PERIOD_LABEL})]})]}),K===Qs.MONTHLY&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetMonthYear",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_START_MONTH_LABEL}),o.jsx("input",{type:"month",id:"budgetMonthYear",value:G,onChange:pe=>he(pe.target.value),disabled:!!Ze,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",required:!0})]}),K===Qs.WEEKLY&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetYearForWeekly",className:"block text-xs font-medium text-slate-600 mb-1",children:""}),o.jsx("input",{type:"number",id:"budgetYearForWeekly",value:ue,onChange:pe=>ae(pe.target.value),disabled:!!Ze,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",placeholder:"",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetWeek",className:"block text-xs font-medium text-slate-600 mb-1",children:" "}),o.jsx("input",{type:"number",id:"budgetWeek",value:V,onChange:pe=>ce(pe.target.value),min:"1",max:"53",disabled:!!Ze,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",placeholder:"",required:!0})]})]}),K===Qs.QUARTERLY&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetYearForQuarterly",className:"block text-xs font-medium text-slate-600 mb-1",children:""}),o.jsx("input",{type:"number",id:"budgetYearForQuarterly",value:M,onChange:pe=>k(pe.target.value),disabled:!!Ze,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",placeholder:"",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetQuarter",className:"block text-xs font-medium text-slate-600 mb-1",children:""}),o.jsxs("select",{id:"budgetQuarter",value:Y,onChange:pe=>Z(pe.target.value),disabled:!!Ze,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",required:!0,children:[o.jsx("option",{value:"1",children:p.QUARTER_1}),o.jsx("option",{value:"2",children:p.QUARTER_2}),o.jsx("option",{value:"3",children:p.QUARTER_3}),o.jsx("option",{value:"4",children:p.QUARTER_4})]})]})]}),K===Qs.YEARLY&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"budgetYearForYearly",className:"block text-sm font-medium text-slate-600 mb-1",children:p.BUDGET_START_YEAR_LABEL}),o.jsx("input",{type:"number",id:"budgetYearForYearly",value:fe,onChange:pe=>Ne(pe.target.value),disabled:!!Ze,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",placeholder:",  ",required:!0})]}),K===Qs.CUSTOM&&o.jsxs("div",{className:"sm:col-span-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"customStartDate",className:"block text-xs font-medium text-slate-600 mb-1",children:p.BUDGET_CUSTOM_START_DATE_LABEL}),o.jsx("input",{type:"date",id:"customStartDate",value:de,onChange:pe=>ye(pe.target.value),disabled:!!Ze,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"customEndDate",className:"block text-xs font-medium text-slate-600 mb-1",children:p.BUDGET_CUSTOM_END_DATE_LABEL}),o.jsx("input",{type:"date",id:"customEndDate",value:Ue,onChange:pe=>we(pe.target.value),disabled:!!Ze,className:"w-full px-2 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white text-sm",required:!0})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[o.jsxs("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-md text-sm flex items-center space-x-1.5",children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:Ze?p.SAVE_CHANGES:p.SAVE_BUDGET_BTN})]}),Ze&&o.jsx("button",{type:"button",onClick:()=>{Je(null),oe(""),ne(""),re("")},className:"bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-2 px-4 rounded-md text-sm",children:p.CANCEL})]})]}),We.length===0&&!Ze?o.jsx("p",{className:"text-slate-500 text-center py-4",children:p.NO_BUDGETS_FOUND}):o.jsx("ul",{className:"space-y-3",children:We.map(pe=>{const vt=y(pe,r),At=vt.spent>pe.amount;return o.jsxs("li",{className:"p-3 bg-white rounded-lg border border-slate-200 shadow-sm hover:shadow-md group",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start",children:[o.jsxs("div",{className:"mb-2 sm:mb-0",children:[o.jsx("h4",{className:"font-semibold text-md text-indigo-700",children:Pt(pe.categoryId)}),o.jsx("p",{className:"text-xs text-slate-500",children:p.BUDGET_FOR_PERIOD_LABEL.replace("{periodDisplay}",Rt(pe))})]}),o.jsxs("div",{className:"flex space-x-1 self-start sm:self-center opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>yt(pe),className:"p-1.5 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50",title:p.EDIT_BUDGET_BTN,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>v(pe.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:p.DELETE_BUDGET_BTN,children:o.jsx(xr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"mt-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mb-0.5",children:[o.jsxs("span",{children:[p.BUDGET_SPENT_LABEL,": ",p.BDT_SYMBOL,vt.spent.toLocaleString("bn-BD")]}),o.jsxs("span",{children:[p.BUDGET_TARGET_LABEL,": ",p.BDT_SYMBOL,pe.amount.toLocaleString("bn-BD")]})]}),o.jsx(Yt,{percentage:vt.percentageUsed,isOverspent:At}),o.jsxs("div",{className:"flex justify-between text-xs mt-0.5",children:[At?o.jsxs("span",{className:"text-red-600 font-medium",children:[p.BUDGET_OVERSPENT_LABEL,": ",p.BDT_SYMBOL,(vt.spent-pe.amount).toLocaleString("bn-BD")]}):o.jsxs("span",{className:"text-green-600",children:[p.BUDGET_REMAINING_LABEL,": ",p.BDT_SYMBOL,vt.remaining.toLocaleString("bn-BD")]}),o.jsx("span",{className:"text-slate-500",children:p.BUDGET_PERCENTAGE_USED_LABEL.replace("{percentage}",vt.percentageUsed.toFixed(0))})]})]})]},pe.id)})})]})]}),o.jsx("div",{className:"mt-6 pt-4 text-right border-t border-slate-200",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 rounded-lg shadow-md focus:outline-none",children:p.CLOSE_BTN})})]}),o.jsx("style",{children:`
        .custom-scrollbar-modal::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-modal::-webkit-scrollbar-track { background: #f8fafc; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .custom-scrollbar-modal::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
      `})]})},e5=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),w3=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.122 2.122l7.81-7.81"})}),h2=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9 9.75h.008v.008H9V9.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.008-4.5h.008v.008h-.008V9.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),t5=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})}),I3=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.254 9.254 9 9.563 9h4.874c.309 0 .563.254.563.563v4.874c0 .309-.254.563-.563.563H9.563A.562.562 0 0 1 9 14.437V9.564Z"})]}),n5=({isOpen:t,onClose:e,imageUrl:n,imageName:s="chat-image"})=>{if(!t||!n)return null;const r=()=>{if(!n)return;const l=document.createElement("a");l.href=n,l.download=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(l.href)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-[110]",role:"dialog","aria-modal":"true","aria-labelledby":"image-viewer-modal-title",onClick:e,children:o.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl w-full h-full max-w-4xl max-h-[90vh] flex flex-col relative overflow-hidden",onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"absolute top-0 left-0 right-0 p-3 sm:p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/50 via-black/30 to-transparent",children:[o.jsx("h2",{id:"image-viewer-modal-title",className:"text-lg font-semibold text-white truncate pr-2",children:s!=="chat-image"?s:p.IMAGE_PREVIEW_CHAT_ALT}),o.jsx("button",{onClick:e,className:"text-white hover:text-slate-300 p-1.5 bg-black/30 hover:bg-black/50 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx(Wc,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-grow flex items-center justify-center overflow-hidden p-2",children:o.jsx("img",{src:n,alt:s,className:"max-w-full max-h-full object-contain"})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 flex justify-center items-center z-10 bg-gradient-to-t from-black/50 via-black/30 to-transparent",children:o.jsxs("button",{onClick:r,className:"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md flex items-center space-x-2 transition-colors duration-150","aria-label":"Download image",children:[o.jsx(sf,{className:"w-5 h-5"}),o.jsx("span",{children:""})]})})]})})},D3=["\\u{1F600}-\\u{1F64F}","\\u{1F300}-\\u{1F5FF}","\\u{1F680}-\\u{1F6FF}","\\u{1F700}-\\u{1F77F}","\\u{1F780}-\\u{1F7FF}","\\u{1F800}-\\u{1F8FF}","\\u{1F900}-\\u{1F9FF}","\\u{1FA00}-\\u{1FA6F}","\\u{1FA70}-\\u{1FAFF}","\\u{2600}-\\u{26FF}","\\u{2700}-\\u{27BF}","\\u{FE00}-\\u{FE0F}","\\u{1F1E6}-\\u{1F1FF}","\\u{E0020}-\\u{E007F}"].join(""),R3=new RegExp(`^[\\s${D3}]+$`,"u");function O3(t){return!t||!t.trim()||!/\S/.test(t)?!1:R3.test(t)}const P3=({isOpen:t,onClose:e,person:n,currentUser:s,messages:r,onSendMessage:l,onReactToMessage:c,onDeleteMessage:d})=>{const[f,h]=D.useState(""),[_,b]=D.useState([]),[v,y]=D.useState([]),[C,L]=D.useState(!1),[O,I]=D.useState(null),[j,R]=D.useState(null),[U,te]=D.useState(null),[Q,ne]=D.useState(!1),[J,oe]=D.useState(null),xe=D.useRef([]),[F,H]=D.useState(null),re=D.useRef(null),[K,Te]=D.useState(0),G=D.useRef(null),[he,ue]=D.useState(!1),[ae,V]=D.useState(null),ce=D.useRef(null),M=D.useRef(null),k=D.useRef(null),Y=D.useRef(null),Z=D.useRef(null),{addNotification:fe}=ur(),Ne=D.useRef(null),de=D.useRef(0),ye=D.useRef(0),Ue=D.useRef(!1),we=D.useRef(!1),Ze=Be=>{const We=Math.floor(Be/1e3),Lt=Math.floor(We/60),pe=We%60;return`${Lt}:${pe.toString().padStart(2,"0")}`},Je=(Be="smooth")=>{var We;(We=ce.current)==null||We.scrollIntoView({behavior:Be})};D.useEffect(()=>{t?(setTimeout(()=>Je("auto"),50),setTimeout(()=>{var Be;return(Be=M.current)==null?void 0:Be.focus()},100),de.current=r.filter(Be=>!Be.isDeleted).length,ye.current=v.length,Ue.current=!!F,we.current=Q):(h(""),b([]),y([]),L(!1),I(null),R(null),te(null),ue(!1),V(null),J&&J.state!=="inactive"&&J.stop(),oe(null),ne(!1),H(null),xe.current=[],G.current&&clearInterval(G.current),Te(0))},[t]),D.useEffect(()=>{if(t){const Be=r.filter(xn=>!xn.isDeleted).length,We=v.length,Lt=!!F,pe=Q,vt=Be>de.current,At=We!==ye.current,Kt=Lt!==Ue.current,Gt=pe!==we.current;(vt||At||Kt||Gt||de.current===0&&Be>0)&&Je("smooth"),de.current=Be,ye.current=We,Ue.current=Lt,we.current=pe}},[t,r,v.length,F,Q]),D.useEffect(()=>{if(M.current){M.current.style.height="auto";const Be=M.current.scrollHeight,We=112;M.current.style.height=`${Math.min(Be,We)}px`}},[f]),D.useEffect(()=>{const Be=We=>{if(Y.current&&!Y.current.contains(We.target)){const Lt=document.getElementById("emoji-picker-button");if(Lt&&Lt.contains(We.target))return;L(!1)}if(Z.current&&!Z.current.contains(We.target)){const Lt=document.querySelectorAll(".add-reaction-trigger");let pe=!1;Lt.forEach(vt=>{vt.contains(We.target)&&(pe=!0)}),pe||I(null)}};return(C||O)&&document.addEventListener("mousedown",Be),()=>{document.removeEventListener("mousedown",Be)}},[C,O]);const Qe=async()=>{if(F&&ut(),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){fe(p.ERROR_AUDIO_RECORDING+" (Media API not supported)","error");return}try{const Be=await navigator.mediaDevices.getUserMedia({audio:!0}),We={mimeType:m0};let Lt;try{Lt=new MediaRecorder(Be,We)}catch{console.warn(`Failed to create MediaRecorder with ${m0}, trying default.`),Lt=new MediaRecorder(Be)}oe(Lt),xe.current=[],Lt.ondataavailable=pe=>{xe.current.push(pe.data)},Lt.onstop=()=>{const pe=new Blob(xe.current,{type:(Lt==null?void 0:Lt.mimeType)||m0}),vt=URL.createObjectURL(pe),At=re.current?Date.now()-re.current:0;H({blob:pe,url:vt,duration:At}),Be.getTracks().forEach(Kt=>Kt.stop()),G.current&&clearInterval(G.current),G.current=null,re.current=null},Lt.onerror=pe=>{console.error("MediaRecorder error:",pe),fe(p.ERROR_AUDIO_RECORDING,"error"),ge()},Lt.start(),ne(!0),Te(0),re.current=Date.now(),G.current=window.setInterval(()=>{if(re.current){const pe=Date.now()-re.current;Te(pe),pe>=jb&&(je(),fe(p.MAX_RECORDING_DURATION_REACHED,"info"))}},1e3)}catch(Be){console.error("Error starting recording:",Be);let We=p.ERROR_AUDIO_RECORDING;Be.name==="NotAllowedError"||Be.name==="PermissionDeniedError"?We="   ":(Be.name==="NotFoundError"||Be.name==="DevicesNotFoundError")&&(We="    "),fe(We,"error"),ge()}},je=()=>{J&&J.state!=="inactive"&&J.stop(),ne(!1)},ge=()=>{ne(!1),J&&(J.stream.getTracks().forEach(Be=>Be.stop()),oe(null)),G.current&&clearInterval(G.current),G.current=null,re.current=null,xe.current=[]},Fe=()=>{Q?je():Qe()},ut=()=>{F&&URL.revokeObjectURL(F.url),H(null),Te(0)},Pe=async Be=>{const We=Be.target.files;if(!We||We.length===0)return;const Lt=[];Array.from(We).forEach(pe=>{if(!Yx.includes(pe.type)){fe(p.INVALID_IMAGE_FILE+` (${pe.name})`,"error"),Lt.push(Promise.resolve(null));return}if(pe.size>kb){fe(p.IMAGE_TOO_LARGE_CHAT+` (${pe.name})`,"error"),Lt.push(Promise.resolve(null));return}const vt=new Promise(At=>{const Kt=new FileReader;Kt.onloadend=()=>{At({imageContent:{type:"image",base64Data:Kt.result,mimeType:pe.type,fileName:pe.name},previewUrl:Kt.result})},Kt.onerror=()=>{fe(`"${pe.name}"    `,"error"),At(null)},Kt.readAsDataURL(pe)});Lt.push(vt)});try{const vt=(await Promise.all(Lt)).filter(At=>At!==null);vt.length>0&&(b(At=>[...At,...vt.map(Kt=>Kt.imageContent)]),y(At=>[...At,...vt.map(Kt=>Kt.previewUrl)]))}catch(pe){console.error("Error processing images:",pe),fe("    ","error")}k.current&&(k.current.value="")},nt=Be=>{b(We=>We.filter((Lt,pe)=>pe!==Be)),y(We=>We.filter((pe,vt)=>vt!==Be)),_.length===1&&k.current&&(k.current.value="")},it=()=>{y([]),b([]),k.current&&(k.current.value="")},st=Be=>{var We;h(Lt=>Lt+Be),(We=M.current)==null||We.focus()},yt=(Be,We)=>{c(Be,We),I(null)},Pt=async()=>{let We=f.trim(),Lt=!1;if(F){let pe;const vt=new FileReader;vt.readAsDataURL(F.blob);try{await new Promise((At,Kt)=>{vt.onloadend=()=>{pe={type:"audio",base64Data:vt.result,mimeType:F.blob.type,duration:Math.round(F.duration/1e3)},At()},vt.onerror=Gt=>{console.error("Error converting audio blob to base64:",Gt),fe(p.AUDIO_SEND_ERROR,"error"),Kt(Gt)}}),pe&&(l(We,n,void 0,pe),Lt=!0,We="")}catch{ut();return}ut()}if(_.length>0){l(Lt?"":We,n,_[0]),Lt=!0,We="";for(let vt=1;vt<_.length;vt++)l("",n,_[vt]);it()}We&&!Lt&&(l(We,n),Lt=!0),(Lt||_.length>0||F)&&h(""),L(!1)},Rt=Be=>{Be!=null&&Be.base64Data&&(V({url:Be.base64Data,name:Be.fileName}),ue(!0))},Ft=Be=>{if(!Be)return"";try{return new Date(Be).toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return" "}},Yt=p.CHAT_WITH_PERSON_TITLE.replace("{personName}",n.customAlias||n.name);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-2 sm:p-4 z-[101]",role:"dialog","aria-modal":"true","aria-labelledby":"chat-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-2xl w-full max-w-md md:max-w-lg h-[85vh] sm:h-[90vh] flex flex-col",onClick:Be=>Be.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 bg-white rounded-t-xl sticky top-0 z-10",children:[o.jsx("h2",{id:"chat-modal-title",className:"text-lg font-semibold text-slate-700 truncate",children:Yt}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx(Wc,{className:"w-6 h-6"})})]}),o.jsxs("div",{ref:Ne,className:"flex-grow overflow-y-auto p-4 space-y-1 custom-scrollbar-chat",children:[r.length===0&&_.length===0&&!F?o.jsx("p",{className:"text-center text-slate-500 py-10",children:p.NO_MESSAGES_YET.replace("{personName}",n.customAlias||n.name)}):r.map(Be=>{const We=Be.actualSenderId===s.id,Lt=Be.content?O3(Be.content):!1;let pe="rounded-lg mb-0.5",vt="whitespace-pre-wrap break-words",At="";Lt?(pe+=" bg-transparent p-0 w-auto inline-block",vt+=" text-5xl"):(pe+=` shadow-sm max-w-[75%] ${We?"bg-teal-500 text-white rounded-br-none p-2.5":"bg-white text-slate-700 border border-slate-200 rounded-bl-none p-2.5"}`,vt+=" text-lg",At=We?"text-white":"text-slate-700"),Be.audioContent&&(pe=pe.replace(/max-w-\[75%\]|w-auto inline-block/g,"w-full"),Lt&&(pe=pe.replace("p-0","p-2.5")));const Kt=We&&!Be.isDeleted;return Be.isDeleted?o.jsx("div",{className:`flex flex-col ${We?"items-end":"items-start"} group relative py-1`,children:o.jsxs("div",{className:`max-w-[75%] p-2.5 rounded-lg shadow-sm mb-0.5 bg-slate-200 text-slate-500 italic ${We?"rounded-br-none":"rounded-bl-none"}`,children:[o.jsx("p",{className:"text-base whitespace-pre-wrap break-words",children:We?p.YOU_DELETED_A_MESSAGE:p.MESSAGE_WAS_DELETED}),o.jsx("p",{className:`text-xs mt-1 text-slate-400 ${We?"text-right":"text-left"}`,children:Ft(Be.deletedAt||Be.timestamp)})]})},Be.id):o.jsxs("div",{className:"group relative py-1",onMouseEnter:()=>{Kt&&!Be.isDeleted&&te(Be.id),!We&&!Be.isDeleted&&R(Be.id)},onMouseLeave:()=>{te(null),We||R(null)},children:[o.jsxs("div",{className:`flex flex-col ${We?"items-end":"items-start"}`,children:[o.jsxs("div",{className:pe,children:[Be.imageContent&&o.jsx("img",{src:Be.imageContent.base64Data,alt:Be.imageContent.fileName||"Chat image",className:"max-w-full h-auto rounded-md my-1 max-h-60 object-contain cursor-pointer",onClick:()=>Rt(Be.imageContent),onKeyDown:Gt=>Gt.key==="Enter"&&Rt(Be.imageContent),tabIndex:0,role:"button","aria-label":"   "}),Be.audioContent&&o.jsx("div",{className:"my-1",children:o.jsx("audio",{controls:!0,src:Be.audioContent.base64Data,className:"w-full",children:"     "})}),Be.content&&o.jsx("p",{className:`${vt} ${At}`,children:Be.content}),o.jsx("p",{className:`text-xs mt-1 ${Lt?We?"text-slate-700":"text-slate-400":We?"text-teal-100":"text-slate-400"} ${We?"text-right":"text-left"}`,children:Ft(Be.timestamp)})]}),Be.reactions&&Object.keys(Be.reactions).length>0&&o.jsx("div",{className:`flex flex-wrap gap-1 mt-0.5 px-1 ${We?"justify-end":"justify-start"}`,children:Object.entries(Be.reactions).map(([Gt,xn])=>{if(!xn||!Array.isArray(xn)||xn.length===0)return null;const rs=xn.includes(s.id??"");return o.jsxs("button",{onClick:()=>!We&&yt(Be.id,Gt),className:`px-1.5 py-0.5 text-xs rounded-full border flex items-center space-x-1 transition-colors
                              ${rs?"bg-teal-100 border-teal-400 text-teal-700 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-600 hover:bg-slate-200"}
                              ${We?"cursor-default":"cursor-pointer"}`,"aria-label":`React with ${Gt}, currently ${xn.length} ${rs?", you reacted":""}`,disabled:We,children:[o.jsx("span",{className:"text-lg",children:Gt}),o.jsx("span",{children:xn.length})]},Gt)})})]}),!We&&!Be.isDeleted&&(j===Be.id||O===Be.id)&&o.jsxs("div",{className:"absolute left-0 z-20 flex flex-col items-start",style:{bottom:"-8px"},children:[O===Be.id&&o.jsx("div",{ref:Z,className:"mb-1 p-1.5 bg-white border border-slate-300 rounded-lg shadow-xl flex gap-1",style:{animation:"fadeInScaleUp 0.1s ease-out forwards"},children:Ub.map(Gt=>o.jsx("button",{onClick:()=>yt(Be.id,Gt),className:"p-1.5 text-2xl rounded-md hover:bg-slate-100 focus:bg-slate-200 focus:outline-none","aria-label":`React with ${Gt}`,children:Gt},Gt))}),o.jsx("button",{className:"add-reaction-trigger p-1 bg-white border border-slate-300 rounded-full shadow-md focus:outline-none focus:ring-1 focus:ring-teal-500",onClick:()=>{const Gt=O===Be.id?null:Be.id;I(Gt)},title:p.ADD_REACTION_TOOLTIP,"aria-label":p.ADD_REACTION_TOOLTIP,children:o.jsx(h2,{className:"w-4 h-4 text-slate-600"})})]}),Kt&&!Be.isDeleted&&U===Be.id&&o.jsx("button",{onClick:()=>d(Be.id),className:"absolute z-20 p-1 bg-white border border-red-300 rounded-full shadow-md focus:outline-none focus:ring-1 focus:ring-red-500 hover:bg-red-50 text-red-500 hover:text-red-600",style:{bottom:"-8px",right:We?"0":void 0},title:p.DELETE_MESSAGE_TOOLTIP,"aria-label":p.DELETE_MESSAGE_TOOLTIP,children:o.jsx(xr,{className:"w-4 h-4"})})]},Be.id)}),o.jsx("div",{ref:ce})]}),v.length>0&&o.jsx("div",{className:"p-3 border-t border-slate-200 bg-white overflow-x-auto custom-scrollbar-chat-horizontal z-15",children:o.jsx("div",{className:"flex space-x-2",children:v.map((Be,We)=>o.jsxs("div",{className:"relative flex-shrink-0",children:[o.jsx("img",{src:Be,alt:`${p.IMAGE_PREVIEW_CHAT_ALT} ${We+1}`,className:"h-24 w-24 object-cover rounded-md border border-slate-300"}),o.jsx("button",{onClick:()=>nt(We),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 leading-none hover:bg-red-600 focus:outline-none focus:ring-1 focus:ring-red-300","aria-label":`  ${We+1} `,children:o.jsx(Wc,{className:"w-3.5 h-3.5"})})]},We))})}),F&&o.jsxs("div",{className:"p-3 border-t border-slate-200 bg-white flex items-center space-x-2 z-15",children:[o.jsx("audio",{controls:!0,src:F.url,className:"flex-grow",children:p.AUDIO_PREVIEW_LABEL}),o.jsx("span",{className:"text-xs text-slate-500",children:Ze(F.duration)}),o.jsx("button",{onClick:ut,className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-100 transition-colors",title:p.REMOVE_AUDIO_PREVIEW_TOOLTIP,"aria-label":p.REMOVE_AUDIO_PREVIEW_TOOLTIP,children:o.jsx(xr,{className:"w-4 h-4"})})]}),Q&&o.jsxs("div",{className:"p-2 text-center text-sm text-red-600 bg-red-50 border-t border-red-200 z-15",children:[p.RECORDING_LABEL," ",Ze(K)]}),o.jsx("div",{className:"p-3 border-t border-slate-200 bg-white rounded-b-xl sticky bottom-0 z-10",children:o.jsxs("div",{className:"relative",children:[" ",C&&o.jsx("div",{ref:Y,className:"absolute bottom-[calc(100%+0.5rem)] right-0 z-30 bg-white border border-slate-300 rounded-lg shadow-xl p-2 grid grid-cols-8 sm:grid-cols-10 gap-1 max-h-48 overflow-y-auto custom-scrollbar-chat w-80 sm:w-96",style:{animation:"fadeInScaleUp 0.1s ease-out forwards"},children:Bb.map(Be=>o.jsx("button",{onClick:()=>st(Be),className:"p-1.5 text-3xl rounded-md hover:bg-slate-100 focus:bg-slate-200 focus:outline-none",title:Be,"aria-label":` ${Be}`,children:Be},Be))}),o.jsxs("div",{className:"flex items-end space-x-2",children:[o.jsx("button",{type:"button",onClick:()=>{var Be;return(Be=k.current)==null?void 0:Be.click()},className:"p-2.5 text-slate-500 hover:text-teal-600 rounded-full hover:bg-teal-50 transition-colors",title:p.ATTACH_IMAGE_TOOLTIP,"aria-label":p.ATTACH_IMAGE_TOOLTIP,disabled:Q,children:o.jsx(w3,{className:"w-5 h-5"})}),o.jsx("input",{type:"file",ref:k,onChange:Pe,accept:Yx.join(","),className:"hidden",multiple:!0,disabled:Q}),o.jsx("button",{id:"emoji-picker-button",type:"button",onClick:()=>L(Be=>!Be),className:`p-2.5 rounded-full transition-colors ${C?"bg-yellow-100 text-yellow-700":"text-slate-500 hover:text-yellow-600 hover:bg-yellow-50"}`,title:p.EMOJI_PICKER_TOOLTIP,"aria-label":p.EMOJI_PICKER_TOOLTIP,"aria-expanded":C,disabled:Q,children:o.jsx(h2,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",onClick:Fe,className:`p-2.5 rounded-full transition-colors ${Q?"bg-red-100 text-red-600 animate-pulse":"text-slate-500 hover:text-red-600 hover:bg-red-50"}`,title:Q?p.STOP_RECORDING_TOOLTIP:p.RECORD_VOICE_TOOLTIP,"aria-label":Q?p.STOP_RECORDING_TOOLTIP:p.RECORD_VOICE_TOOLTIP,children:Q?o.jsx(I3,{className:"w-5 h-5"}):o.jsx(t5,{className:"w-5 h-5"})}),o.jsx("textarea",{ref:M,value:f,onChange:Be=>h(Be.target.value),onKeyDown:Be=>{Be.key==="Enter"&&!Be.shiftKey&&(Be.preventDefault(),Pt())},placeholder:p.TYPE_YOUR_MESSAGE,className:"flex-grow p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none text-sm min-h-[44px] max-h-28 custom-scrollbar-chat",rows:1,"aria-label":p.TYPE_YOUR_MESSAGE,disabled:Q}),o.jsx("button",{type:"button",onClick:Pt,className:"p-2.5 bg-teal-600 hover:bg-teal-700 text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 disabled:opacity-50",title:p.SEND_MESSAGE_BTN,"aria-label":p.SEND_MESSAGE_BTN,disabled:!f.trim()&&_.length===0&&!F||Q,children:o.jsx(e5,{className:"w-5 h-5"})})]})]})})]}),o.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .custom-scrollbar-chat::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar-chat::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar { height: 6px; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar-track { background: #f1f5f9; border-radius:3px; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar-thumb { background: #94a3b8; border-radius:3px; }
        .custom-scrollbar-chat-horizontal::-webkit-scrollbar-thumb:hover { background: #64748b; }
      `})]}),he&&ae&&o.jsx(n5,{isOpen:he,onClose:()=>{ue(!1),V(null)},imageUrl:ae.url,imageName:ae.name})]})},M3=({isOpen:t,onClose:e,currentUser:n,persons:s,messages:r,onOpenChat:l,onOpenImageViewer:c,onDeleteChatHistory:d})=>{if(!t)return null;const f=D.useMemo(()=>{if(!n.id)return[];const v=new Map;return r.filter(C=>C.userId===n.id&&!C.isDeleted).forEach(C=>{let L;if(C.actualSenderId===n.id)L=C.actualReceiverId;else if(C.actualReceiverId===n.id)L=C.actualSenderId;else return;if(!L)return;const O=s.find(I=>I.systemUserId===L&&!I.isDeleted);if(O){const I=v.get(O.id);(!I||new Date(C.timestamp)>new Date(I.lastMessage.timestamp))&&v.set(O.id,{person:O,lastMessage:C,unreadCount:0})}}),v.forEach(C=>{const L=C.person.systemUserId;if(!L||!n.id)return;const O=[n.id,L].sort().join("_");C.unreadCount=r.filter(I=>I.userId===n.id&&I.threadId===O&&I.actualReceiverId===n.id&&I.actualSenderId===L&&!I.isRead&&!I.isDeleted).length}),Array.from(v.values()).sort((C,L)=>new Date(L.lastMessage.timestamp).getTime()-new Date(C.lastMessage.timestamp).getTime())},[r,s,n]),h=v=>{const y=new Date(v),C=new Date,L=new Date(C);return L.setDate(C.getDate()-1),y.toDateString()===C.toDateString()?y.toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0}):y.toDateString()===L.toDateString()?"":y.toLocaleDateString("bn-BD",{day:"numeric",month:"short"})},_=v=>{if(!v)return"";const y=v.split(" ");return y.length>1&&y[0]&&y[y.length-1]?`${y[0][0]}${y[y.length-1][0]}`.toUpperCase():v.substring(0,2).toUpperCase()},b=v=>{const C=v.actualSenderId===n.id?`${p.MESSAGE_FROM_YOU}: `:"";return o.jsxs("div",{className:"text-xs flex items-baseline",children:[C&&o.jsx("span",{className:"mr-1 flex-shrink-0",children:C}),o.jsxs("div",{className:"truncate flex-grow min-w-0 flex items-baseline",children:[" ",v.audioContent&&o.jsx("span",{className:"italic text-slate-500 mr-1 flex-shrink-0",children:p.AUDIO_MESSAGE_LABEL}),v.imageContent&&o.jsx("span",{className:"italic text-slate-500 mr-1 flex-shrink-0",children:"[]"}),v.content?o.jsx("span",{className:"truncate",children:v.content}):!v.audioContent&&!v.imageContent?o.jsx("span",{className:"italic text-slate-400",children:"[ ]"}):null]})]})};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-2 sm:p-4 z-[100]",role:"dialog","aria-modal":"true","aria-labelledby":"inbox-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-2xl w-full max-w-md md:max-w-lg h-[85vh] sm:h-[90vh] flex flex-col",onClick:v=>v.stopPropagation(),style:{animation:"fadeInScaleUp 0.2s ease-out forwards"},children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 bg-white rounded-t-xl sticky top-0",children:[o.jsx("h2",{id:"inbox-modal-title",className:"text-lg font-semibold text-slate-700",children:p.INBOX_MODAL_TITLE}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full","aria-label":p.CLOSE_BTN,children:o.jsx(Wc,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-chat",children:f.length===0?o.jsx("p",{className:"text-center text-slate-500 py-10",children:p.NO_INCOMING_MESSAGES}):o.jsx("ul",{className:"divide-y divide-slate-100",children:f.map(v=>o.jsxs("li",{className:"p-3 hover:bg-teal-50 cursor-pointer flex items-start space-x-3 transition-colors duration-150 group","aria-label":`${p.VIEW_CHAT_HISTORY_WITH_PERSON.replace("{personName}",v.person.customAlias||v.person.name)}${v.unreadCount>0?`. ${v.unreadCount}   `:""}`,children:[o.jsx("div",{className:"flex-shrink-0 pt-1",onClick:()=>{if(!v.person.systemUserId){alert(p.CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",v.person.customAlias||v.person.name));return}l(v.person),e()},children:v.person.profileImage?o.jsx("img",{src:v.person.profileImage,alt:v.person.customAlias||v.person.name,className:"h-10 w-10 rounded-full object-cover"}):o.jsx("span",{className:"h-10 w-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 font-medium text-sm",children:_(v.person.customAlias||v.person.name)})}),o.jsxs("div",{className:"flex-grow min-w-0",onClick:()=>{if(!v.person.systemUserId){alert(p.CHAT_NOT_AVAILABLE_FOR_NON_REGISTERED_PERSON.replace("{personName}",v.person.customAlias||v.person.name));return}l(v.person),e()},children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h3",{className:`text-sm font-semibold truncate ${v.unreadCount>0?"text-teal-600":"text-slate-700"}`,children:[v.person.customAlias||v.person.name,v.person.systemUserId?"":o.jsx("span",{className:"text-xs text-orange-500 ml-1",children:"()"})]}),o.jsx("span",{className:`text-xs ${v.unreadCount>0?"text-teal-500 font-medium":"text-slate-400"}`,children:h(v.lastMessage.timestamp)})]}),o.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[o.jsx("div",{className:`min-w-0 ${v.unreadCount>0?"text-slate-600 font-medium":"text-slate-500"}`,children:b(v.lastMessage)}),v.unreadCount>0&&o.jsx("span",{className:"ml-2 bg-red-500 text-white text-[10px] font-bold rounded-full h-4 w-4 min-w-[16px] flex items-center justify-center p-0.5",children:v.unreadCount>9?"9+":v.unreadCount})]}),v.lastMessage.imageContent&&!v.lastMessage.audioContent&&o.jsx("button",{onClick:y=>{y.stopPropagation(),c(v.lastMessage.imageContent)},className:"mt-1 p-0 focus:outline-none focus:ring-1 focus:ring-sky-400 rounded","aria-label":"   ",children:o.jsx("img",{src:v.lastMessage.imageContent.base64Data,alt:" ",className:"max-h-16 max-w-[64px] rounded border border-slate-300 object-cover"})})]}),o.jsx("div",{className:"flex-shrink-0 self-center",children:o.jsx("button",{onClick:y=>{y.stopPropagation(),d(v.person)},className:"p-2 text-slate-400 hover:text-red-600 rounded-full opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-150 hover:bg-red-50",title:p.DELETE_CHAT_HISTORY_TOOLTIP,"aria-label":p.DELETE_CHAT_HISTORY_TOOLTIP,children:o.jsx(xr,{className:"w-4 h-4"})})})]},v.person.id))})})]}),o.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
         .custom-scrollbar-chat::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar-chat::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar-chat::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})},k3=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3zM2.25 2.25l19.5 19.5"})}),j3=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M12 18.75H4.5A2.25 2.25 0 012.25 16.5V7.5A2.25 2.25 0 014.5 5.25H12m3 13.5V12M12 12V5.25M12 12h3.75m0 0A2.25 2.25 0 0118 14.25v2.25M12 12h3.75m-3.75 0A2.25 2.25 0 009.75 14.25v2.25m0 0A2.25 2.25 0 017.5 18.75M12 5.25A2.25 2.25 0 009.75 7.5M12 5.25A2.25 2.25 0 0114.25 7.5"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3l18 18"})]}),B3=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3l18 18"})]}),U3=({isOpen:t,onClose:e,targetPerson:n,currentUser:s})=>{const[r,l]=D.useState(null),[c,d]=D.useState(!1),[f,h]=D.useState(!1),[_,b]=D.useState(null),[v,y]=D.useState(!0),C=D.useRef(null),L=D.useRef(null);D.useEffect(()=>{if(!t){r&&(r.getTracks().forEach(U=>U.stop()),l(null)),b(null),y(!0),d(!1),h(!1);return}return(async()=>{y(!0),b(null);try{const U=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});l(U),C.current&&(C.current.srcObject=U),y(!1)}catch(U){U.name==="NotFoundError"||U.name==="DevicesNotFoundError"?b(p.VIDEO_CALL_DEVICE_ERROR):U.name==="NotAllowedError"||U.name==="PermissionDeniedError"?b(p.VIDEO_CALL_PERMISSION_ERROR):b(`${p.VIDEO_CALL_DEVICE_ERROR} (${U.message})`),y(!1)}})(),()=>{r&&r.getTracks().forEach(U=>U.stop())}},[t]),D.useEffect(()=>{r&&C.current&&(C.current.srcObject=r)},[r]);const O=()=>{r&&(r.getAudioTracks().forEach(R=>{R.enabled=!R.enabled}),d(!c))},I=()=>{r&&(r.getVideoTracks().forEach(R=>{R.enabled=!R.enabled}),h(!f))},j=()=>{e()};return p.VIDEO_CALL_WITH_PERSON_TITLE.replace("{personName}",n.customAlias||n.name),o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-2 z-[105]",role:"dialog","aria-modal":"true","aria-labelledby":"video-call-modal-title",onClick:e,children:[o.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl h-[90vh] flex flex-col relative overflow-hidden",onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"flex-grow bg-black flex items-center justify-center relative rounded-t-xl",children:[o.jsx("video",{ref:L,playsInline:!0,autoPlay:!0,className:"w-full h-full object-cover hidden","aria-label":p.REMOTE_VIDEO_ARIA}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 p-4",children:[v&&!_&&o.jsx("p",{className:"text-lg animate-pulse",children:p.CONNECTING_VIDEO_CALL}),!v&&!_&&!r&&o.jsx("p",{className:"text-lg",children:p.VIDEO_CALL_DEVICE_ERROR}),!v&&!_&&r&&o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xl font-semibold text-slate-300",children:n.customAlias||n.name}),o.jsx("p",{className:"text-sm text-slate-500",children:p.WAITING_FOR_PERSON_VIDEO.replace("{personName}",n.customAlias||n.name)})]})]}),_&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6 bg-slate-900 bg-opacity-80",children:o.jsx("p",{className:"text-center text-red-400 text-md",children:_})})]}),r&&!f&&o.jsx("div",{className:"absolute bottom-20 right-4 sm:bottom-24 sm:right-6 w-32 h-44 sm:w-40 sm:h-56 bg-black rounded-lg shadow-lg overflow-hidden border-2 border-slate-600",children:o.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]","aria-label":p.LOCAL_VIDEO_PREVIEW_ARIA})}),r&&f&&o.jsx("div",{className:"absolute bottom-20 right-4 sm:bottom-24 sm:right-6 w-32 h-44 sm:w-40 sm:h-56 bg-slate-700 rounded-lg shadow-lg border-2 border-slate-600 flex items-center justify-center text-slate-400 text-xs p-2",children:" "}),o.jsxs("div",{className:"bg-slate-900 p-3 sm:p-4 flex justify-center items-center space-x-3 sm:space-x-4 rounded-b-xl",children:[o.jsx("button",{onClick:O,className:`p-2 sm:p-3 rounded-full transition-colors ${c?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,title:c?p.UNMUTE_MIC_BTN:p.MUTE_MIC_BTN,disabled:!r||!!_,children:c?o.jsx(k3,{className:"w-5 h-5 sm:w-6 sm:h-6"}):o.jsx(t5,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),o.jsx("button",{onClick:I,className:`p-2 sm:p-3 rounded-full transition-colors ${f?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,title:f?p.START_VIDEO_BTN:p.STOP_VIDEO_BTN,disabled:!r||!!_,children:f?o.jsx(j3,{className:"w-5 h-5 sm:w-6 sm:h-6"}):o.jsx(Z_,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),o.jsx("button",{onClick:j,className:"p-2 sm:p-3 bg-red-600 hover:bg-red-700 text-white rounded-full transition-colors",title:p.END_CALL_BTN,children:o.jsx(B3,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]}),o.jsx("style",{children:`
        @keyframes fadeInScaleUp {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})},Di=({className:t,isFilled:e})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:1.5,className:`w-4 h-4 ${t}`,children:e?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.374H8.958a1.313 1.313 0 01-1.242-1.528l.763-4.578a3.06 3.06 0 00-.716-2.539l-.008-.008a3.06 3.06 0 00-2.54-1.066H3.75V9.75a2.25 2.25 0 012.25-2.25h12a2.25 2.25 0 012.25 2.25v1.906a3.06 3.06 0 00-2.54 1.066l-.008.008a3.06 3.06 0 00-.716 2.539l.763 4.578a1.313 1.313 0 01-1.242 1.528zM12 3.375v6"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.374H8.958a1.313 1.313 0 01-1.242-1.528l.763-4.578a3.06 3.06 0 00-.716-2.539l-.008-.008a3.06 3.06 0 00-2.54-1.066H3.75V9.75a2.25 2.25 0 012.25-2.25h12a2.25 2.25 0 012.25 2.25v1.906a3.06 3.06 0 00-2.54 1.066l-.008.008a3.06 3.06 0 00-.716 2.539l.763 4.578a1.313 1.313 0 01-1.242 1.528zM12 3.375v6"})}),s5=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})}),a5=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"})}),Ec=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Yh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),qh=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),Yc={productName:"",description:"",quantity:1,unitPrice:0,total:0,selectedPriceType:"custom",unit:""},m2={productName:!0,description:!0,quantity:!0,unitPrice:!0,totalPrice:!0,unit:!0},P0=[{key:"productName",label:p.PRODUCT_SERVICE_NAME_LABEL,defaultGridSpan:"minmax(0, 2.5fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"},{key:"description",label:p.ITEM_DESCRIPTION_LABEL,defaultGridSpan:"minmax(0, 1.5fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"},{key:"quantity",label:p.QUANTITY_INVOICE_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unitPrice",label:p.UNIT_PRICE_LABEL,defaultGridSpan:"minmax(0, 1.2fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"totalPrice",label:p.ITEM_TOTAL_LABEL,defaultGridSpan:"minmax(0, 1fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unit",label:p.PRODUCT_UNIT_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"}],F3=({isOpen:t,onClose:e,onSaveInvoice:n,persons:s,products:r,companyProfiles:l,onOpenSelectPersonModal:c,onPersonAdded:d,isGlobalPhoneticModeActive:f,onOpenManageProductsModal:h,editingInvoiceData:_,aiPreRenderData:b,onAIInvoiceDataProcessed:v,onOpenConfirmationModal:y})=>{const{addNotification:C}=ur(),{currentUser:L,updateCurrentUserData:O}=Nc(),I=!!_,j=D.useRef(!1),[R,U]=D.useState(!1),[te,Q]=D.useState(""),[ne,J]=D.useState(new Date().toISOString().split("T")[0]),[oe,xe]=D.useState(""),[F,H]=D.useState(null),[re,K]=D.useState(""),[Te,G]=D.useState([]),[he,ue]=D.useState(!1),[ae,V]=D.useState(null),[ce,M]=D.useState(void 0),[k,Y]=D.useState([{...Yc,id:Date.now().toString(),quantity:1,unitPrice:0}]),[Z,fe]=D.useState(()=>localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp"),[Ne,de]=D.useState(null),[ye,Ue]=D.useState(0),[we,Ze]=D.useState(null),[Je,Qe]=D.useState(0),[je,ge]=D.useState(""),[Fe,ut]=D.useState(Ht.PENDING),[Pe,nt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_INVOICE_PAYMENT_STATUS)==="true"),[it,st]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_INVOICE_DATE)==="true"),[yt,Pt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_DUE_DATE)==="true"),[Rt,Ft]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_COMPANY_PROFILE)==="true"),[Yt,Be]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_DISCOUNT_TYPE)==="true"),[We,Lt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_TAX_TYPE)==="true"),[pe,vt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_PAYMENT_METHOD)==="true"),[At,Kt]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_PAYMENT_NOTES)==="true"),[Gt,xn]=D.useState(()=>localStorage.getItem(Tt.PIN_SALES_INVOICE_NOTES)==="true"),[rs,Cn]=D.useState(""),[Ws,Un]=D.useState("Cash"),[js,ln]=D.useState(""),[ls,un]=D.useState(0),[Mn,qa]=D.useState(0),[gs,ca]=D.useState(0),[Nn,Xt]=D.useState(0),Ln=D.useRef(null),kn=D.useRef(null),Fn=D.useRef(null),Rn=D.useRef(null),_s=D.useRef(null),hs=D.useRef(null),er=D.useRef(null),Ca=D.useRef(null),En=D.useRef([]),bs=D.useRef([]),Qt=D.useRef([]),Ls=D.useRef([]),Ts=D.useRef([]),$n=D.useRef([]),La=D.useRef([]),[ua,Bs]=D.useState(()=>k.map(()=>[])),[ms,wa]=D.useState(()=>k.map(()=>!1)),[Is,ka]=D.useState(null),Wn=D.useRef({}),[ys,da]=D.useState(()=>{const le=localStorage.getItem(Tt.INVOICE_COLUMN_VISIBILITY_SALES_V1);try{return le?JSON.parse(le):m2}catch(_e){return console.error("Failed to parse sales column visibility from localStorage",_e),m2}}),[ws,tr]=D.useState(()=>localStorage.getItem(Tt.INVOICE_ITEM_FONT_SIZE_SALES_V1)||"sm");D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_COLUMN_VISIBILITY_SALES_V1,JSON.stringify(ys))},[ys]),D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_ITEM_FONT_SIZE_SALES_V1,ws)},[ws]);const Ta=le=>{da(_e=>({..._e,[le]:!_e[le]}))},sa=le=>{tr(le)},Gr=le=>{const _e=["xs","sm","base","lg","xl","2xl"],tt=_e.indexOf(ws);le==="increase"?tt<_e.length-1&&tr(_e[tt+1]):tt>0&&tr(_e[tt-1])},mn=le=>({xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"})[ws]||"text-sm",[Hr,Ds]=D.useState(!1),ea=D.useRef(null),Yr=D.useRef(null),wr=D.useMemo(()=>{const le=P0.filter(_e=>ys[_e.key]).map(_e=>_e.defaultGridSpan);return le.push("auto"),{gridTemplateColumns:le.join(" ")}},[ys]);D.useEffect(()=>{const le=_e=>{Yr.current&&!Yr.current.contains(_e.target)&&ea.current&&!ea.current.contains(_e.target)&&Ds(!1)};return Hr&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[Hr]);const dr=()=>U(le=>!le),Ns=D.useCallback((le,_e,tt,Xe,rt,_t,mt)=>async()=>{le(Bt=>{const kt=!Bt;if(localStorage.setItem(_e,String(kt)),L){const Ct={};kt?(Ct[tt]=Xe,rt&&_t!=null&&(Ct[rt]=_t),mt&&C(`${mt} ${p.DEFAULT_VALUE_PINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"success",2e3)):(Ct[tt]=null,rt&&(Ct[rt]=null),mt&&C(`${mt} ${p.DEFAULT_VALUE_UNPINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"info",2e3)),Object.keys(Ct).length>0&&O(Ct)}return kt})},[L,O,C]),Ia=D.useCallback(()=>Ns(nt,Tt.PIN_SALES_INVOICE_PAYMENT_STATUS,"defaultSalesPaymentStatus",Fe,void 0,void 0,p.PAYMENT_STATUS_LABEL)(),[Ns,Fe]),li=D.useCallback(()=>{const le=new Date;le.setHours(0,0,0,0);const _e=new Date(ne);_e.setHours(0,0,0,0);const tt=Math.round((_e.getTime()-le.getTime())/(1e3*60*60*24));Ns(st,Tt.PIN_SALES_INVOICE_DATE,"defaultSalesInvoiceDateOffset",tt,void 0,void 0,p.INVOICE_DATE_LABEL)()},[Ns,ne]),cs=D.useCallback(()=>{if(ne&&oe){const le=new Date(ne);le.setHours(0,0,0,0);const _e=new Date(oe);_e.setHours(0,0,0,0);const tt=Math.round((_e.getTime()-le.getTime())/(1e3*60*60*24));Ns(Pt,Tt.PIN_SALES_DUE_DATE,"defaultSalesDueDateOffset",tt,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()}else Ns(Pt,Tt.PIN_SALES_DUE_DATE,"defaultSalesDueDateOffset",30,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()},[Ns,ne,oe]),qr=D.useCallback(()=>Ns(Ft,Tt.PIN_SALES_COMPANY_PROFILE,"defaultSalesCompanyProfileId",ce,void 0,void 0," ")(),[Ns,ce]),_i=D.useCallback(()=>Ns(Be,Tt.PIN_SALES_DISCOUNT_TYPE,"defaultSalesDiscountType",Ne,"defaultSalesDiscountValue",ye,p.DISCOUNT_TYPE_LABEL)(),[Ns,Ne,ye]),bi=D.useCallback(()=>Ns(Lt,Tt.PIN_SALES_TAX_TYPE,"defaultSalesTaxType",we,"defaultSalesTaxValue",Je,p.TAX_TYPE_LABEL)(),[Ns,we,Je]),Er=D.useCallback(()=>Ns(vt,Tt.PIN_SALES_PAYMENT_METHOD,"defaultSalesPaymentMethod",Ws,void 0,void 0,p.PAYMENT_METHOD_LABEL)(),[Ns,Ws]),ci=D.useCallback(()=>Ns(Kt,Tt.PIN_SALES_PAYMENT_NOTES,"defaultSalesPaymentNotes",js.trim()||null,void 0,void 0,p.PAYMENT_NOTES_LABEL)(),[Ns,js]),Ti=D.useCallback(()=>Ns(xn,Tt.PIN_SALES_INVOICE_NOTES,"defaultSalesInvoiceNotes",je.trim()||null,void 0,void 0,p.NOTES_TERMS_LABEL)(),[Ns,je]);D.useEffect(()=>{Fe===Ht.PAID?(Cn(Nn.toString()),I||((!pe||!(L!=null&&L.defaultSalesPaymentMethod))&&Un("Cash"),(!At||!(L!=null&&L.defaultSalesPaymentNotes))&&ln(p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE))):Fe!==Ht.PARTIALLY_PAID&&((!pe||!(L!=null&&L.defaultSalesPaymentMethod))&&Un("Cash"),(!At||!(L!=null&&L.defaultSalesPaymentNotes))&&ln(""),Cn(""))},[Fe,Nn,I,pe,At,L]),D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_GLOBAL_PRICE_TYPE,Z)},[Z]);const za=le=>{const _e=le.getFullYear(),tt=(le.getMonth()+1).toString().padStart(2,"0"),Xe=le.getDate().toString().padStart(2,"0");return`${_e}-${tt}-${Xe}`},ui=D.useCallback(()=>{const le=l.find(Ct=>Ct.isDefault)||(l.length>0?l[0]:null),_e=(le==null?void 0:le.companyName.substring(0,3).toUpperCase().replace(/\s/g,""))||"CMP",tt="INV",Xe="CUST",rt=new Date,_t=rt.getFullYear().toString().slice(-2),mt=(rt.getMonth()+1).toString().padStart(2,"0"),Bt=rt.getDate().toString().padStart(2,"0"),kt=Math.random().toString(36).substring(2,6).toUpperCase();return`${tt}-${_e}-${Xe}${_t}${mt}${Bt}-${kt}`},[l]),Ir=D.useCallback(()=>{var Bn,Kn;const le=localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp";fe(le);const _e=localStorage.getItem(Tt.PIN_SALES_INVOICE_PAYMENT_STATUS)==="true",tt=localStorage.getItem(Tt.PIN_SALES_INVOICE_DATE)==="true",Xe=localStorage.getItem(Tt.PIN_SALES_DUE_DATE)==="true",rt=localStorage.getItem(Tt.PIN_SALES_COMPANY_PROFILE)==="true",_t=localStorage.getItem(Tt.PIN_SALES_DISCOUNT_TYPE)==="true",mt=localStorage.getItem(Tt.PIN_SALES_TAX_TYPE)==="true",Bt=localStorage.getItem(Tt.PIN_SALES_PAYMENT_METHOD)==="true",kt=localStorage.getItem(Tt.PIN_SALES_PAYMENT_NOTES)==="true",Ct=localStorage.getItem(Tt.PIN_SALES_INVOICE_NOTES)==="true";if(nt(_e),st(tt),Pt(Xe),Ft(rt),Be(_t),Lt(mt),vt(Bt),Kt(kt),xn(Ct),I&&_){Q(_.invoiceNumber);const Xn=new Date(_.invoiceDate);if(J(za(new Date(Xn.getUTCFullYear(),Xn.getUTCMonth(),Xn.getUTCDate()))),_.dueDate){const bn=new Date(_.dueDate);xe(za(new Date(bn.getUTCFullYear(),bn.getUTCMonth(),bn.getUTCDate())))}else xe("");const zn=s.find(bn=>bn.id===_.personId);H((zn==null?void 0:zn.id)||null),K(zn?zn.customAlias||zn.name:""),M(_.companyProfileId),de(_.discountType||null),Ue(_.discountValue||0),Ze(_.taxType||null),Qe(_.taxValue||0),ge(_.notes||""),ut(_.paymentStatus);const ha=_.items.map(bn=>{const Gs=r.find(dn=>dn.name===bn.productName||dn.id&&bn.originalProductId===dn.id);let aa="custom";return Gs&&(bn.unitPrice===Gs.mrp?aa="mrp":bn.unitPrice===Gs.wholesalePrice?aa="wholesale":bn.unitPrice===Gs.unitPrice&&(aa="sales")),{...bn,unit:bn.unit||"",quantity:bn.quantity||1,unitPrice:bn.unitPrice||0,selectedPriceType:aa,originalProductId:Gs==null?void 0:Gs.id,availablePrices:Gs?{sales:Gs.unitPrice,mrp:Gs.mrp,wholesale:Gs.wholesalePrice}:void 0}});if(Y(ha.length>0?ha:[{...Yc,id:Date.now().toString(),quantity:1,unitPrice:0,selectedPriceType:le}]),_.paymentStatus===Ht.PAID){Cn(_.totalAmount.toString());const bn=(Bn=_.paymentsReceived)==null?void 0:Bn[0];bn&&bn.amount===_.totalAmount&&bn.notes===p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE?(Un(bn.paymentMethod||"Cash"),ln(bn.notes||p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE)):bn?(Un(bn.paymentMethod||"Cash"),ln(bn.notes||"")):(Un("Cash"),ln(p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE))}else if(_.paymentStatus===Ht.PARTIALLY_PAID&&_.paymentsReceived&&_.paymentsReceived.length>0){const bn=_.paymentsReceived[0];Cn(bn.amount.toString()),Un(bn.paymentMethod||"Cash"),ln(bn.notes||"")}else Cn(""),Un("Cash"),ln("")}else{Q(ui());let Xn=new Date;tt&&(L==null?void 0:L.defaultSalesInvoiceDateOffset)!==null&&(L==null?void 0:L.defaultSalesInvoiceDateOffset)!==void 0&&Xn.setDate(Xn.getDate()+L.defaultSalesInvoiceDateOffset);const zn=za(Xn);J(zn);const[ha,bn,Gs]=zn.split("-").map(Number);let aa=new Date(ha,bn-1,Gs);Xe&&(L==null?void 0:L.defaultSalesDueDateOffset)!==null&&(L==null?void 0:L.defaultSalesDueDateOffset)!==void 0?aa.setDate(aa.getDate()+L.defaultSalesDueDateOffset):aa.setDate(aa.getDate()+30),xe(za(aa)),H(null),K(""),rt&&(L!=null&&L.defaultSalesCompanyProfileId)&&l.find(vs=>vs.id===L.defaultSalesCompanyProfileId)?M(L.defaultSalesCompanyProfileId):M(((Kn=l.find(vs=>vs.isDefault))==null?void 0:Kn.id)||(l.length>0?l[0].id:void 0));const dn={...Yc,id:Date.now().toString(),quantity:1,unitPrice:0};dn.selectedPriceType=le,Y([dn]),_t&&(L!=null&&L.defaultSalesDiscountType)?(de(L.defaultSalesDiscountType),Ue(L.defaultSalesDiscountValue??0)):(de(null),Ue(0)),mt&&(L!=null&&L.defaultSalesTaxType)?(Ze(L.defaultSalesTaxType),Qe(L.defaultSalesTaxValue??0)):(Ze(null),Qe(0)),Ct&&(L!=null&&L.defaultSalesInvoiceNotes)?ge(L.defaultSalesInvoiceNotes):ge(""),_e&&(L!=null&&L.defaultSalesPaymentStatus)?ut(L.defaultSalesPaymentStatus):ut(Ht.PENDING),Cn(""),Bt&&(L!=null&&L.defaultSalesPaymentMethod)?Un(L.defaultSalesPaymentMethod):Un("Cash"),kt&&(L!=null&&L.defaultSalesPaymentNotes)?ln(L.defaultSalesPaymentNotes):ln("")}const $t=I&&_?_.items:[{...Yc,id:Date.now().toString(),selectedPriceType:le}];Bs($t.map(()=>[])),wa($t.map(()=>!1)),ka(null),V(null),Wn.current={}},[I,_,L,s,r,l,ui]);D.useEffect(()=>{if(t)if(b&&!I&&!j.current){if(Ir(),b.customerName){Wn.current.customerSearch=!0,K(b.customerName);const _e=s.find(tt=>(tt.customAlias||tt.name).toLowerCase()===b.customerName.toLowerCase());_e&&H(_e.id)}if(b.items&&b.items.length>0){const _e=localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp",tt=b.items.map((Xe,rt)=>{const _t=r.find(kt=>kt.name.toLowerCase()===Xe.productName.toLowerCase());let mt=Xe.unitPrice||0,Bt="custom";return _t&&(_e==="mrp"&&_t.mrp!==void 0?(mt=_t.mrp,Bt="mrp"):_e==="wholesale"&&_t.wholesalePrice!==void 0?(mt=_t.wholesalePrice,Bt="wholesale"):_e==="sales"&&_t.unitPrice!==void 0?(mt=_t.unitPrice,Bt="sales"):_t.mrp!==void 0?(mt=_t.mrp,Bt="mrp"):_t.unitPrice!==void 0&&(mt=_t.unitPrice,Bt="sales")),{id:`ai_item_${Date.now()}_${rt}`,productName:Xe.productName,description:"",quantity:Xe.quantity||1,unitPrice:mt,total:(Xe.quantity||1)*mt,unit:Xe.unit||(_t==null?void 0:_t.unit)||"",selectedPriceType:Bt,originalProductId:_t==null?void 0:_t.id,availablePrices:_t?{sales:_t.unitPrice,mrp:_t.mrp,wholesale:_t.wholesalePrice}:void 0}});Y(tt.length>0?tt:[{...Yc,id:Date.now().toString()}])}else Y([{...Yc,id:Date.now().toString()}]);b.notes&&(Wn.current.notes=!0,ge(b.notes)),j.current=!0,v()}else j.current||(Ir(),j.current=!0);else j.current=!1},[t,b,I,_,v,Ir,s,r]),D.useEffect(()=>{if(!I&&yt&&(L==null?void 0:L.defaultSalesDueDateOffset)!==null&&(L==null?void 0:L.defaultSalesDueDateOffset)!==void 0&&ne){const[le,_e,tt]=ne.split("-").map(Number);let Xe=new Date(le,_e-1,tt);Xe.setDate(Xe.getDate()+L.defaultSalesDueDateOffset),xe(za(Xe))}},[ne,yt,L==null?void 0:L.defaultSalesDueDateOffset,I]),D.useEffect(()=>{const le=k.reduce((rt,_t)=>rt+(Number(_t.total)||0),0);un(le);let _e=0;Ne==="percentage"&&ye>0?_e=le*ye/100:Ne==="fixed"&&ye>0&&(_e=ye),_e=Math.max(0,Math.min(_e,le)),qa(_e);const tt=le-_e;let Xe=0;we==="percentage"&&Je>0?Xe=tt*Je/100:we==="fixed"&&Je>0&&(Xe=Je),ca(Xe),Xt(tt+Xe)},[k,Ne,ye,we,Je]);const Da=(le,_e,tt,Xe)=>{const rt=`${_e}-${le}`;Xe&&(Wn.current[rt]=!0);const _t=[...k],mt=_t[le];if(_e==="productName"||_e==="description"||_e==="unit")mt[_e]=tt;else if(_e==="quantity"||_e==="unitPrice"||_e==="total"){const Bt=parseFloat(tt);mt[_e]=isNaN(Bt)||Bt<0?0:Bt,_e==="unitPrice"&&mt.selectedPriceType!=="custom"&&(mt.selectedPriceType="custom"),_e==="total"&&mt.selectedPriceType!=="custom"&&(mt.selectedPriceType="custom")}(Z!=="custom"||mt.selectedPriceType!=="custom")&&(_e==="quantity"||_e==="unitPrice")&&(mt.total=(Number(mt.quantity)||0)*(Number(mt.unitPrice)||0)),Y(_t)},yi=(le,_e)=>{const tt=[...k],Xe=tt[le];if(Xe.selectedPriceType=_e,_e!=="custom"){if(Xe.availablePrices){let rt;_e==="sales"?rt=Xe.availablePrices.sales:_e==="mrp"?rt=Xe.availablePrices.mrp:_e==="wholesale"&&(rt=Xe.availablePrices.wholesale),Xe.unitPrice=rt!==void 0?rt:Xe.unitPrice||0}}(Z!=="custom"||_e!=="custom")&&(Xe.total=Xe.quantity*Xe.unitPrice),Y(tt)},be=(le,_e)=>{const tt=`productName-${le}`;if(Wn.current[tt]?(Da(le,"productName",_e),Wn.current[tt]=!1):Da(le,"productName",_e),_e.trim()){const Xe=r.filter(rt=>!rt.isDeleted&&rt.name.toLowerCase().includes(_e.toLowerCase())).slice(0,5);Bs(rt=>{const _t=[...rt];return _t[le]=Xe,_t}),wa(rt=>{const _t=[...rt];return _t[le]=!0,_t}),ka({itemIndex:le,suggestionIndex:-1})}else{const Xe=[...k],rt=Xe[le];rt.description="",rt.unitPrice=0,rt.total=0,rt.unit="",rt.selectedPriceType=Z==="custom"?"custom":localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp",rt.originalProductId=void 0,rt.availablePrices=void 0,Y(Xe),Bs(_t=>{const mt=[..._t];return mt[le]=[],mt}),wa(_t=>{const mt=[..._t];return mt[le]=!1,mt}),ka(null)}},Re=(le,_e)=>{var Xn,zn;const tt=[...k],Xe=tt[le],rt=`productName-${le}`,_t=`description-${le}`,mt=`unit-${le}`;Wn.current[rt]=!0;const Bt=_e.description||"";Bt&&(Wn.current[_t]=!0),Xe.description=Bt,Xe.productName=_e.name,_e.unit&&(Wn.current[mt]=!0),Xe.unit=_e.unit||"",Xe.originalProductId=_e.id,Xe.availablePrices={sales:_e.unitPrice,mrp:_e.mrp,wholesale:_e.wholesalePrice};let kt=0,Ct="custom";const $t=_e.mrp!==void 0&&_e.mrp!==null,Bn=_e.wholesalePrice!==void 0&&_e.wholesalePrice!==null,Kn=_e.unitPrice!==void 0&&_e.unitPrice!==null;Z==="mrp"&&$t?(kt=_e.mrp,Ct="mrp"):Z==="wholesale"&&Bn?(kt=_e.wholesalePrice,Ct="wholesale"):Z==="sales"&&Kn?(kt=_e.unitPrice,Ct="sales"):Z==="custom"?($t?kt=_e.mrp:Bn?kt=_e.wholesalePrice:Kn&&(kt=_e.unitPrice),Ct="custom"):$t?(kt=_e.mrp,Ct="mrp"):Bn?(kt=_e.wholesalePrice,Ct="wholesale"):Kn?(kt=_e.unitPrice,Ct="sales"):(kt=0,Ct="custom"),Xe.unitPrice=kt,Xe.selectedPriceType=Ct,Xe.total=Xe.quantity*Xe.unitPrice,Y(tt),Bs(ha=>{const bn=[...ha];return bn[le]=[],bn}),wa(ha=>{const bn=[...ha];return bn[le]=!1,bn}),ka(null),(Xn=bs.current[le])==null||Xn.focus(),(zn=bs.current[le])==null||zn.select()};D.useEffect(()=>{const le=_e=>{La.current.forEach((tt,Xe)=>{var rt;tt&&!tt.contains(_e.target)&&En.current[Xe]&&!((rt=En.current[Xe])!=null&&rt.contains(_e.target))&&wa(_t=>{const mt=[..._t];return mt[Xe]&&(mt[Xe]=!1),mt})})};return ms.some(_e=>_e)&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[ms]);const ze=le=>{var _e,tt;te.trim()&&ne.trim()&&le&&Nn>0?(_e=Ca.current)==null||_e.focus():k.length>0&&En.current[0]&&((tt=En.current[0])==null||tt.focus())},dt=le=>{const _e=le.target.value;if(Wn.current.customerSearch?(K(_e),Wn.current.customerSearch=!1):K(_e),H(null),_e.trim()){const tt=_e.toLowerCase(),Xe=s.filter(rt=>!rt.isDeleted&&(rt.customAlias&&rt.customAlias.toLowerCase().includes(tt)||rt.name.toLowerCase().includes(tt)||rt.mobileNumber&&rt.mobileNumber.includes(_e))).slice(0,5);G(Xe),ue(!0),V(-1)}else G([]),ue(!1),V(null)},bt=le=>{var _e,tt,Xe;if(he&&Te.length>0)if(le.key==="ArrowDown")le.preventDefault(),V(rt=>{var mt,Bt;const _t=rt===null||rt>=Te.length-1?0:rt+1;return(Bt=(mt=Fn.current)==null?void 0:mt.children[_t])==null||Bt.scrollIntoView({block:"nearest"}),_t});else if(le.key==="ArrowUp")le.preventDefault(),V(rt=>{var mt,Bt;const _t=rt===null||rt<=0?Te.length-1:rt-1;return(Bt=(mt=Fn.current)==null?void 0:mt.children[_t])==null||Bt.scrollIntoView({block:"nearest"}),_t});else if(le.key==="Enter")if(ae!==null&&ae>=0&&ae<Te.length)le.preventDefault(),wt(Te[ae]);else{le.preventDefault(),ue(!1),V(null);const rt=re.trim();if(rt){const _t=s.find(mt=>!mt.isDeleted&&(mt.customAlias&&mt.customAlias.toLowerCase()===rt.toLowerCase()||mt.name.toLowerCase()===rt.toLowerCase()||mt.mobileNumber&&mt.mobileNumber===rt));_t?(H(_t.id),ze(_t.id)):k.length>0&&En.current[0]&&((_e=En.current[0])==null||_e.focus())}else k.length>0&&En.current[0]&&((tt=En.current[0])==null||tt.focus())}else le.key==="Escape"&&(ue(!1),V(null));else if(le.key==="Enter"){le.preventDefault(),ue(!1),V(null);const rt=re.trim();let _t=!1;if(rt){const mt=s.find(Bt=>!Bt.isDeleted&&(Bt.customAlias&&Bt.customAlias.toLowerCase()===rt.toLowerCase()||Bt.name.toLowerCase()===rt.toLowerCase()||Bt.mobileNumber&&Bt.mobileNumber===rt));mt&&(H(mt.id),ze(mt.id),_t=!0)}_t||k.length>0&&En.current[0]&&((Xe=En.current[0])==null||Xe.focus())}else{if(Wn.current.customerSearch)return;if(f&&le.key===" "){le.preventDefault();const rt=kn.current||le.target,_t=rt.value,mt=rt.selectionStart||0;let Bt=mt-1;for(;Bt>=0&&_t[Bt]!==" ";)Bt--;Bt++;const kt=_t.substring(Bt,mt);if(kt.trim()){const Ct=cr(kt),$t=_t.substring(0,Bt)+Ct+" "+_t.substring(mt);K($t),setTimeout(()=>{const Bn=Bt+Ct.length+1;rt.setSelectionRange(Bn,Bn)},0)}else{const Ct=_t.substring(0,mt)+" "+_t.substring(mt);K(Ct),setTimeout(()=>{rt.setSelectionRange(mt+1,mt+1)},0)}ue(!1),V(null)}}},Dt=le=>{if(Wn.current.customerSearch){Wn.current.customerSearch=!1;return}if(f){le.preventDefault();const _e=le.clipboardData.getData("text"),tt=cr(_e),Xe=kn.current||le.target,rt=Xe.selectionStart||0,_t=Xe.selectionEnd||0,mt=Xe.value,Bt=mt.substring(0,rt)+tt+mt.substring(_t);K(Bt),setTimeout(()=>{const kt=rt+tt.length;Xe.setSelectionRange(kt,kt)},0),ue(!1),V(null)}},wt=le=>{Wn.current.customerSearch=!0,K(le.customAlias||le.name),H(le.id),G([]),ue(!1),V(null),ze(le.id)},xt=le=>{const _e=s.find(tt=>tt.id===le);_e&&(Wn.current.customerSearch=!0,K(_e.customAlias||_e.name),H(_e.id),G([]),ue(!1),V(null),ze(_e.id))};D.useEffect(()=>{const le=_e=>{Fn.current&&!Fn.current.contains(_e.target)&&kn.current&&!kn.current.contains(_e.target)&&(ue(!1),V(null))};return he&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[he]);const Jt=(le,_e,tt)=>Xe=>{var Bt,kt;const rt=`${_e}-${le}`,_t=k[le],mt=!_t.productName.trim()&&_t.total===0;if(ms[le]&&ua[le]&&ua[le].length>0){if(Xe.key==="ArrowDown"){Xe.preventDefault(),ka(Ct=>{var Bn,Kn;const $t=(Ct==null?void 0:Ct.itemIndex)!==le||Ct.suggestionIndex===null||Ct.suggestionIndex>=ua[le].length-1?0:Ct.suggestionIndex+1;return(Kn=(Bn=La.current[le])==null?void 0:Bn.children[$t])==null||Kn.scrollIntoView({block:"nearest"}),{itemIndex:le,suggestionIndex:$t}});return}else if(Xe.key==="ArrowUp"){Xe.preventDefault(),ka(Ct=>{var Bn,Kn;const $t=(Ct==null?void 0:Ct.itemIndex)!==le||Ct.suggestionIndex===null||Ct.suggestionIndex<=0?ua[le].length-1:Ct.suggestionIndex-1;return(Kn=(Bn=La.current[le])==null?void 0:Bn.children[$t])==null||Kn.scrollIntoView({block:"nearest"}),{itemIndex:le,suggestionIndex:$t}});return}else if(Xe.key==="Enter"){if((Is==null?void 0:Is.itemIndex)===le&&Is.suggestionIndex>=0&&Is.suggestionIndex<ua[le].length)Xe.preventDefault(),Re(le,ua[le][Is.suggestionIndex]);else{if(Xe.preventDefault(),mt&&le===k.length-1){fr();return}le===k.length-1?Dr():(Bt=En.current[le+1])==null||Bt.focus()}return}else if(Xe.key==="Escape"){wa(Ct=>{const $t=[...Ct];return $t[le]=!1,$t}),ka(null);return}}if(Xe.key==="Enter"){if(Xe.preventDefault(),mt&&le===k.length-1){fr();return}const $t=["productName","description","quantity","unitPrice","totalPrice","unit"].filter(Xn=>ys[Xn]||Xn==="productName");let Kn=$t.indexOf(_e)+1;for(;Kn<$t.length&&!ys[$t[Kn]];)Kn++;if(Kn<$t.length){const Xn=$t[Kn];let zn=null;Xn==="quantity"?zn=bs.current[le]:Xn==="totalPrice"?zn=$n.current[le]:Xn==="unitPrice"?zn=Qt.current[le]:Xn==="unit"?zn=Ls.current[le]:Xn==="description"&&(zn=Ts.current[le]),zn&&(zn.focus(),(zn instanceof HTMLInputElement||zn instanceof HTMLTextAreaElement)&&((kt=zn.select)==null||kt.call(zn)))}else if(le===k.length-1)Dr();else{const Xn=En.current[le+1];Xn&&(Xn.focus(),Xn.select())}return}if(!Wn.current[rt]&&f&&Xe.key===" "){if(_e==="productName"&&ms[le])return;Xe.preventDefault();const Ct=tt.current[le]||Xe.target,$t=Ct.value,Bn=Ct.selectionStart||0;let Kn=Bn-1;for(;Kn>=0&&$t[Kn]!==" ";)Kn--;Kn++;const Xn=$t.substring(Kn,Bn);if(Xn.trim()){const zn=cr(Xn),ha=$t.substring(0,Kn)+zn+" "+$t.substring(Bn);Da(le,_e,ha,!0),setTimeout(()=>{const bn=Kn+zn.length+1;Ct.setSelectionRange(bn,bn)},0)}else{const zn=$t.substring(0,Bn)+" "+$t.substring(Bn);Da(le,_e,zn,!0),setTimeout(()=>{Ct.setSelectionRange(Bn+1,Bn+1)},0)}}},_n=(le,_e)=>tt=>{if(tt.key==="Enter"){tt.preventDefault();const Xe=k[le];if(!Xe.productName.trim()&&Xe.total===0&&le===k.length-1){fr();return}const mt=["quantity","totalPrice","unitPrice","unit","description"].filter(Ct=>ys[Ct]);let Bt=mt.indexOf(_e);Bt===-1&&_e==="quantity"&&ys.quantity&&(Bt=0);let kt=Bt+1;if(kt<mt.length){const Ct=mt[kt];let $t=null;Ct==="quantity"?$t=bs.current[le]:Ct==="totalPrice"?$t=$n.current[le]:Ct==="unitPrice"?$t=Qt.current[le]:Ct==="unit"?$t=Ls.current[le]:Ct==="description"&&($t=Ts.current[le]),$t&&($t.focus(),($t instanceof HTMLInputElement||$t instanceof HTMLTextAreaElement)&&$t.type!=="button"&&$t.type!=="submit"&&$t.type!=="reset"&&$t.type!=="hidden"&&$t.select())}else if(le===k.length-1)Dr();else{const Ct=En.current[le+1];Ct&&(Ct.focus(),Ct.select())}}},on=(le,_e,tt)=>Xe=>{const rt=`${_e}-${le}`;if(Wn.current[rt]){Wn.current[rt]=!1;return}if(f){Xe.preventDefault();const _t=Xe.clipboardData.getData("text"),mt=cr(_t),Bt=tt.current[le]||Xe.target,kt=Bt.selectionStart||0,Ct=Bt.selectionEnd||0,$t=Bt.value,Bn=$t.substring(0,kt)+mt+$t.substring(Ct);Da(le,_e,Bn,!0),setTimeout(()=>{const Kn=kt+mt.length;Bt.setSelectionRange(Kn,Kn)},0)}},ts=le=>{if(!Wn.current.notes&&f&&le.key===" "){le.preventDefault();const _e=Ln.current||le.target,tt=_e.value,Xe=_e.selectionStart||0;let rt=Xe-1;for(;rt>=0&&tt[rt]!==" ";)rt--;rt++;const _t=tt.substring(rt,Xe);if(_t.trim()){const mt=cr(_t),Bt=tt.substring(0,rt)+mt+" "+tt.substring(Xe);ge(Bt),setTimeout(()=>{const kt=rt+mt.length+1;_e.setSelectionRange(kt,kt)},0)}else{const mt=tt.substring(0,Xe)+" "+tt.substring(Xe);ge(mt),setTimeout(()=>{_e.setSelectionRange(Xe+1,Xe+1)},0)}}},Yn=le=>{if(Wn.current.notes){Wn.current.notes=!1;return}if(f){le.preventDefault();const _e=le.clipboardData.getData("text"),tt=cr(_e),Xe=Ln.current||le.target,rt=Xe.selectionStart||0,_t=Xe.selectionEnd||0,mt=Xe.value,Bt=mt.substring(0,rt)+tt+mt.substring(_t);ge(Bt),setTimeout(()=>{const kt=rt+tt.length;Xe.setSelectionRange(kt,kt)},0)}},jn=le=>{if(!Wn.current.paymentNotes&&f&&le.key===" "){le.preventDefault();const _e=Rn.current||le.target,tt=_e.value,Xe=_e.selectionStart||0;let rt=Xe-1;for(;rt>=0&&tt[rt]!==" ";)rt--;rt++;const _t=tt.substring(rt,Xe);if(_t.trim()){const mt=cr(_t),Bt=tt.substring(0,rt)+mt+" "+tt.substring(Xe);ln(Bt),setTimeout(()=>{const kt=rt+mt.length+1;_e.setSelectionRange(kt,kt)},0)}else{const mt=tt.substring(0,Xe)+" "+tt.substring(Xe);ln(mt),setTimeout(()=>{_e.setSelectionRange(Xe+1,Xe+1)},0)}}},vn=le=>{if(Wn.current.paymentNotes){Wn.current.paymentNotes=!1;return}if(f){le.preventDefault();const _e=le.clipboardData.getData("text"),tt=cr(_e),Xe=Rn.current||le.target,rt=Xe.selectionStart||0,_t=Xe.selectionEnd||0,mt=Xe.value,Bt=mt.substring(0,rt)+tt+mt.substring(_t);ln(Bt),setTimeout(()=>{const kt=rt+tt.length;Xe.setSelectionRange(kt,kt)},0)}},Dr=()=>{const le={...Yc,quantity:1,unitPrice:0,selectedPriceType:Z==="custom"?"custom":localStorage.getItem(Tt.INVOICE_GLOBAL_PRICE_TYPE)||"mrp"},_e=Date.now().toString();Y(tt=>[...tt,{...le,id:_e}]),Bs(tt=>[...tt,[]]),wa(tt=>[...tt,!1]),requestAnimationFrame(()=>{var Xe;const tt=k.length;En.current[tt]&&((Xe=En.current[tt])==null||Xe.focus())})},zr=le=>{const _e=k.filter((tt,Xe)=>Xe!==le);Y(_e),Bs(tt=>tt.filter((Xe,rt)=>rt!==le)),wa(tt=>tt.filter((Xe,rt)=>rt!==le))},fr=async()=>{var mt,Bt;let le=null;te.trim()||(C(p.INVOICE_NUMBER_LABEL+" "+p.FIELD_IS_REQUIRED.toLowerCase(),"error"),!le&&_s.current&&(le=_s.current)),ne||(C(p.INVOICE_DATE_REQUIRED_ERROR,"error"),!le&&hs.current&&(le=hs.current)),!F&&!re.trim()&&(C(p.INVOICE_CUSTOMER_REQUIRED_ERROR,"error"),!le&&kn.current&&(le=kn.current)),Nn<=0&&(C(p.INVOICE_TOTAL_MUST_BE_POSITIVE_ERROR,"error"),!le&&k.length>0&&bs.current[0]&&(le=bs.current[0]));const _e=k.filter(kt=>kt.productName.trim()!==""||(kt.description||"").trim()!==""||(kt.quantity||0)>0||(kt.unitPrice||0)>0);_e.length===0&&(C(p.INVOICE_NO_ITEMS_ERROR,"error"),!le&&En.current[0]&&(le=En.current[0]));const tt=_e.findIndex(kt=>kt.productName.trim()!==""&&((kt.quantity||0)<=0||(kt.unitPrice||0)<0));if(tt!==-1&&(C(p.INVOICE_ITEM_VALIDATION_ERROR,"error"),le||(bs.current[tt]&&(_e[tt].quantity||0)<=0?le=bs.current[tt]:Qt.current[tt]&&(_e[tt].unitPrice||0)<0?le=Qt.current[tt]:En.current[tt]&&(le=En.current[tt]))),(le===_s.current&&kn.current||le===hs.current&&kn.current)&&(le=kn.current),le){le.focus(),typeof le.select=="function"&&le.select();return}const Xe=_e;let rt=F;if(!rt&&re.trim()){const kt=s.find(Ct=>(Ct.customAlias||Ct.name).toLowerCase()===re.trim().toLowerCase());if(kt)rt=kt.id;else try{const Ct=await d({name:re.trim()});if(Ct)rt=Ct.id,C(p.PERSON_ADDED_IMPLICITLY_INVOICE.replace("{personName}",re.trim()).replace("{personType}",p.PERSON_TYPE_CUSTOMER),"success");else throw new Error("New person creation returned null")}catch(Ct){console.error("Error adding person implicitly:",Ct),C(p.INVOICE_CUSTOMER_CREATION_ERROR,"error"),(mt=kn.current)==null||mt.focus();return}}if(!rt){C(p.INVOICE_CUSTOMER_REQUIRED_ERROR,"error"),(Bt=kn.current)==null||Bt.focus();return}const _t={invoiceNumber:te,invoiceType:Sa.SALES,invoiceDate:ne,dueDate:oe||void 0,personId:rt,companyProfileId:ce,items:Xe.map(({selectedPriceType:kt,originalProductId:Ct,availablePrices:$t,...Bn})=>({...Bn,originalProductId:Ct||void 0})),subtotal:ls,discountType:Ne||void 0,discountValue:ye||void 0,discountAmount:Mn||void 0,taxType:we||void 0,taxValue:Je||void 0,taxAmount:gs||void 0,totalAmount:Nn,notes:je.trim()||void 0,paymentStatus:Fe};if(!I){if(Fe===Ht.PAID)_t.initialPayment={paymentDate:new Date().toISOString(),amount:Nn,paymentMethod:Ws,notes:js.trim()||p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE};else if(Fe===Ht.PARTIALLY_PAID){const kt=parseFloat(rs);if(isNaN(kt)||kt<=0){C(p.PAYMENT_AMOUNT_INVALID_FOR_PARTIAL,"error");return}kt>=Nn&&C(p.PARTIAL_PAYMENT_CANT_BE_FULL,"warning"),_t.initialPayment={paymentDate:new Date().toISOString(),amount:kt,paymentMethod:Ws,notes:js.trim()||void 0}}}y(p.CONFIRM_CREATE_INVOICE_TITLE,p.CONFIRM_CREATE_INVOICE_MSG,async()=>{if(await n(_t,_==null?void 0:_.id))if(C(I?p.INVOICE_UPDATED_SUCCESS:p.INVOICE_CREATED_SUCCESS,"success"),I)e();else{if(L){const Ct={};if(Pe&&(Ct.defaultSalesPaymentStatus=Fe),it){const $t=new Date;$t.setHours(0,0,0,0);const Bn=new Date(ne);Bn.setHours(0,0,0,0),Ct.defaultSalesInvoiceDateOffset=Math.round((Bn.getTime()-$t.getTime())/(1e3*60*60*24))}if(yt&&oe){const $t=new Date(ne);$t.setHours(0,0,0,0);const Bn=new Date(oe);Bn.setHours(0,0,0,0),Ct.defaultSalesDueDateOffset=Math.round((Bn.getTime()-$t.getTime())/(1e3*60*60*24))}Rt&&(Ct.defaultSalesCompanyProfileId=ce),Yt&&(Ct.defaultSalesDiscountType=Ne,Ct.defaultSalesDiscountValue=ye),We&&(Ct.defaultSalesTaxType=we,Ct.defaultSalesTaxValue=Je),pe&&(Ct.defaultSalesPaymentMethod=Ws),At&&(Ct.defaultSalesPaymentNotes=js.trim()||null),Gt&&(Ct.defaultSalesInvoiceNotes=je.trim()||null),Object.keys(Ct).length>0&&await O(Ct)}Ir(),j.current=!1,requestAnimationFrame(()=>{var Ct;En.current[0]&&((Ct=En.current[0])==null||Ct.focus())})}},p.CONFIRM_BTN_YES_CREATE,p.CONFIRM_BTN_COLOR_CREATE)},di=I?p.EDIT_INVOICE_MODAL_TITLE:p.CREATE_SALES_INVOICE_MODAL_TITLE,nr=p.BILLED_TO_LABEL,fi=p.CUSTOMER_SEARCH_PLACEHOLDER,fa=p.SELECT_CUSTOMER_BTN_LABEL,sr=I?p.SAVE_INVOICE_BTN_LABEL:p.CREATE_INVOICE_BTN_LABEL,_r=!I&&(Fe===Ht.PARTIALLY_PAID||Fe===Ht.PAID),br=!I&&Fe===Ht.PAID,Pi=Fe===Ht.PENDING||Fe===Ht.PARTIALLY_PAID||Fe===Ht.OVERDUE,Ji=o.jsx("button",{onClick:dr,className:"text-slate-500 hover:text-teal-600 p-1.5 rounded-full hover:bg-teal-50 transition-colors",title:R?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,"aria-label":R?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,children:R?o.jsx(a5,{className:"w-5 h-5"}):o.jsx(s5,{className:"w-5 h-5"})});return o.jsx(Ya,{isOpen:t,onClose:e,title:di,size:R?"screen":"3xl",headerActions:Ji,children:o.jsxs("div",{className:`flex flex-col ${R?"h-full":""}`,children:[o.jsxs("div",{className:`p-1 ${R?"flex-grow overflow-y-auto custom-scrollbar-modal pr-2 pb-20":"space-y-4 pb-20"}`,children:[o.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"companyProfile",className:"block text-xs font-medium text-slate-600 mb-0.5",children:"  ()"}),o.jsxs("div",{className:"flex items-end",children:[o.jsxs("select",{id:"companyProfile",value:ce||"",onChange:le=>M(le.target.value||void 0),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",children:[o.jsx("option",{value:"",children:"--   --"}),l.filter(le=>!le.isDeleted).map(le=>o.jsx("option",{value:le.id,children:le.companyName},le.id))]}),!I&&o.jsx("button",{type:"button",onClick:qr,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Rt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Rt?p.UNPIN_COMPANY_PROFILE_DEFAULT:p.PIN_COMPANY_PROFILE_DEFAULT,children:o.jsx(Di,{isFilled:Rt})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"invoiceNumber",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_NUMBER_LABEL}),o.jsx("input",{ref:_s,type:"text",id:"invoiceNumber",value:te,onChange:le=>Q(le.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",onKeyDown:le=>{var _e;le.key==="Enter"&&(le.preventDefault(),(_e=hs.current)==null||_e.focus())}})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"invoiceDate",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_DATE_LABEL}),o.jsxs("div",{className:"flex items-end",children:[o.jsx("input",{ref:hs,type:"date",id:"invoiceDate",value:ne,onChange:le=>J(le.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",required:!0,onKeyDown:le=>{var _e;le.key==="Enter"&&(le.preventDefault(),Pi&&er.current?er.current.focus():k.length>0&&En.current[0]&&((_e=En.current[0])==null||_e.focus()))}}),!I&&o.jsx("button",{type:"button",onClick:li,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${it?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:it?p.UNPIN_INVOICE_DATE_DEFAULT:p.PIN_INVOICE_DATE_DEFAULT,children:o.jsx(Di,{isFilled:it})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("label",{htmlFor:"customerSearch",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[nr," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{ref:kn,type:"text",id:"customerSearch",value:re,onChange:dt,onKeyDown:bt,onPaste:Dt,onFocus:()=>re.trim()&&ue(!0),placeholder:fi,className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",autoComplete:"off"}),o.jsx("button",{type:"button",onClick:()=>c(xt),className:"p-2 bg-teal-500 hover:bg-teal-600 text-white rounded-md shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:fa,children:o.jsx(kl,{className:"w-4 h-4"})})]}),he&&o.jsx("ul",{ref:Fn,className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto custom-scrollbar-modal",children:Te.length>0?Te.map((le,_e)=>o.jsxs("li",{onClick:()=>wt(le),className:`px-3 py-2 hover:bg-teal-50 cursor-pointer text-xs ${ae===_e?"bg-teal-100":""}`,onMouseEnter:()=>V(_e),role:"option","aria-selected":ae===_e,children:[le.customAlias||le.name," ",le.mobileNumber&&`(${le.mobileNumber})`]},le.id)):re.trim()&&o.jsx("li",{className:"px-3 py-2 text-xs text-slate-500",children:p.NO_CUSTOMER_SUGGESTIONS})})]})]}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("section",{className:`${R?"":"border-t pt-3 mt-3"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:`text-md font-semibold text-slate-700 ${mn()}`,children:p.INVOICE_ITEMS_LABEL}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("button",{type:"button",onClick:()=>Gr("decrease"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:ws==="xs",children:o.jsx(Yh,{className:"w-4 h-4"})}),o.jsx("button",{type:"button",onClick:()=>sa("sm"),title:" ",className:"p-1 rounded hover:bg-slate-200 text-slate-600",children:o.jsx(qh,{className:"w-4 h-4"})}),o.jsx("button",{type:"button",onClick:()=>Gr("increase"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:ws==="2xl",children:o.jsx(Ec,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:ea,type:"button",onClick:()=>Ds(le=>!le),className:"text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:" ","aria-haspopup":"true","aria-expanded":Hr,children:[o.jsx(Sp,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:""})]}),Hr&&o.jsxs("div",{ref:Yr,className:"absolute right-0 mt-1 w-60 bg-white border border-slate-300 rounded-md shadow-lg z-30 py-1",role:"menu",children:[o.jsx("div",{className:"px-3 pt-2 pb-1 border-b",children:o.jsx("p",{className:"text-xs font-medium text-slate-500",children:" /"})}),P0.map(({key:le,label:_e})=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-1.5 hover:bg-slate-50 cursor-pointer text-xs",children:[o.jsx("input",{type:"checkbox",checked:ys[le],onChange:()=>Ta(le),className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-400 rounded focus:ring-teal-500"}),o.jsx("span",{className:"text-slate-700",children:_e})]},le)),o.jsx("div",{className:"px-3 pt-2 pb-1 border-t mt-1",children:o.jsx("p",{className:"text-xs font-medium text-slate-500",children:" "})}),o.jsxs("div",{className:"flex justify-around items-center px-3 py-1.5",children:[o.jsx("button",{onClick:()=>sa("xs"),title:"",className:`p-1 rounded hover:bg-slate-100 ${ws==="xs"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Yh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>sa("sm"),title:"",className:`p-1 rounded hover:bg-slate-100 ${ws==="sm"?"text-teal-600":"text-slate-500"}`,children:o.jsx(qh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>sa("base"),title:"",className:`p-1 rounded hover:bg-slate-100 ${ws==="base"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Ec,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>sa("lg"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${ws==="lg"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Ec,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>sa("xl"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${ws==="xl"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Ec,{className:"w-6 h-6"})})]})]})]}),o.jsxs("button",{type:"button",onClick:()=>{e(),h()},className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,children:[o.jsx(Wd,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:p.MANAGE_PRODUCTS_STOCK_NAV_BTN})]})]})]}),o.jsxs("div",{className:"p-3 bg-slate-100 rounded-md mb-3",children:[o.jsxs("label",{className:`block text-xs font-medium text-slate-600 mb-1.5 ${mn()}`,children:[p.PRICE_TYPE_LABEL," ()"]}),o.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1.5 text-xs",children:["mrp","wholesale","sales","custom"].map(le=>o.jsxs("label",{className:"flex items-center space-x-1 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"globalPriceType",value:le,checked:Z===le,onChange:()=>fe(le),className:"form-radio h-3.5 w-3.5 text-teal-600 focus:ring-teal-500 border-slate-400"}),o.jsx("span",{className:`${Z===le?"text-teal-700 font-medium":"text-slate-600"} ${mn()}`,children:le==="mrp"?p.PRICE_TYPE_MRP:le==="wholesale"?p.PRICE_TYPE_WHOLESALE:le==="sales"?p.PRICE_TYPE_SALES:p.PRICE_TYPE_CUSTOM})]},le))})]})]}),o.jsxs("div",{className:`grid gap-x-2 items-end mb-1.5 print:hidden font-medium text-slate-600 ${mn()}`,style:wr,children:[P0.map(le=>o.jsx("div",{className:`${ys[le.key]?"":"hidden"} ${le.headerTextAlign||"text-left"}`,children:o.jsx("label",{children:le.label})},le.key)),o.jsx("div",{className:"text-center",children:o.jsx("label",{children:""})})]}),o.jsx("div",{className:`space-y-3 mb-3 ${R?"pr-1":"max-h-[65vh] overflow-y-auto custom-scrollbar-modal pr-1"}`,children:k.map((le,_e)=>{var rt,_t,mt,Bt,kt,Ct,$t,Bn,Kn,Xn,zn,ha,bn,Gs,aa;const tt=Z==="custom"&&le.selectedPriceType==="custom";let Xe=!1;return Xe=!tt&&le.selectedPriceType!=="custom"&&!!le.originalProductId&&(le.selectedPriceType==="mrp"&&((rt=le.availablePrices)==null?void 0:rt.mrp)!==void 0||le.selectedPriceType==="wholesale"&&((_t=le.availablePrices)==null?void 0:_t.wholesale)!==void 0||le.selectedPriceType==="sales"&&((mt=le.availablePrices)==null?void 0:mt.sales)!==void 0),o.jsxs("div",{className:"grid gap-x-2 gap-y-1 items-start py-2 border-b border-slate-100 group",style:wr,children:[o.jsxs("div",{className:`relative ${ys.productName?"":"hidden"}`,children:[o.jsx("input",{ref:dn=>{En.current[_e]=dn},type:"text",id:`item-name-${_e}`,value:le.productName,onChange:dn=>be(_e,dn.target.value),onKeyDown:Jt(_e,"productName",En),onPaste:on(_e,"productName",En),onFocus:()=>{if(le.productName.trim()){const dn=r.filter(vs=>!vs.isDeleted&&vs.name.toLowerCase().includes(le.productName.toLowerCase())).slice(0,5);Bs(vs=>{const Tr=[...vs];return Tr[_e]=dn,Tr})}else Bs(dn=>{const vs=[...dn];return vs[_e]=r.filter(Tr=>!Tr.isDeleted).slice(0,5),vs});wa(dn=>{const vs=[...dn];return vs[_e]=!0,vs}),ka({itemIndex:_e,suggestionIndex:-1})},className:`w-full px-3 py-1.5 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()} ${ms[_e]?"border-teal-500":"border-slate-300"}`,placeholder:p.PRODUCT_NAME_PLACEHOLDER,autoComplete:"off","aria-activedescendant":(Is==null?void 0:Is.itemIndex)===_e&&Is.suggestionIndex!==-1?`product-suggestion-${_e}-${Is.suggestionIndex}`:void 0}),ms[_e]&&ua[_e]&&ua[_e].length>0&&o.jsx("ul",{ref:dn=>{La.current[_e]=dn},className:"absolute z-30 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto custom-scrollbar-modal",role:"listbox",children:ua[_e].map((dn,vs)=>o.jsx("li",{id:`product-suggestion-${_e}-${vs}`,onClick:()=>Re(_e,dn),onMouseDown:Tr=>Tr.preventDefault(),className:`px-3 py-2 hover:bg-teal-50 cursor-pointer ${mn()} ${(Is==null?void 0:Is.itemIndex)===_e&&Is.suggestionIndex===vs?"bg-teal-100":""}`,onMouseEnter:()=>ka({itemIndex:_e,suggestionIndex:vs}),role:"option","aria-selected":(Is==null?void 0:Is.itemIndex)===_e&&Is.suggestionIndex===vs,children:dn.name},dn.id))})]}),o.jsx("div",{className:`${ys.description?"":"hidden"}`,children:o.jsx("textarea",{ref:dn=>{Ts.current[_e]=dn},id:`item-short-desc-${_e}`,value:le.description,onChange:dn=>Da(_e,"description",dn.target.value,Wn.current[`description-${_e}`]),onKeyDown:Jt(_e,"description",Ts),onPaste:on(_e,"description",Ts),placeholder:p.ITEM_DESCRIPTION_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${mn()}`,rows:1})}),o.jsx("div",{className:`${ys.quantity?"":"hidden"}`,children:o.jsx("input",{ref:dn=>{bs.current[_e]=dn},type:"number",id:`item-quantity-${_e}`,value:le.quantity,onChange:dn=>Da(_e,"quantity",dn.target.value),onKeyDown:_n(_e,"quantity"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-20 text-right ${mn()}`,min:"0",step:"any"})}),o.jsxs("div",{className:`relative ${ys.unitPrice?"":"hidden"}`,children:[o.jsx("input",{ref:dn=>{Qt.current[_e]=dn},type:"number",id:`item-unitprice-${_e}`,value:le.unitPrice,onChange:dn=>Da(_e,"unitPrice",dn.target.value),onKeyDown:_n(_e,"unitPrice"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-24 text-right ${mn()}`,min:"0",step:"any",readOnly:Xe}),le.originalProductId&&o.jsxs("select",{value:le.selectedPriceType,onChange:dn=>yi(_e,dn.target.value),className:`absolute right-1 bottom-1 text-[9px] bg-slate-100 text-slate-600 px-1 py-0.5 rounded-sm border border-slate-300 focus:outline-none focus:ring-1 focus:ring-teal-400 ${mn()==="text-xs"?"text-[8px]":mn()==="text-base"?"text-[10px]":"text-[9px]"}`,children:[o.jsxs("option",{value:"mrp",disabled:((Bt=le.availablePrices)==null?void 0:Bt.mrp)===void 0||((kt=le.availablePrices)==null?void 0:kt.mrp)===null,children:[p.PRICE_TYPE_MRP," ",((Ct=le.availablePrices)==null?void 0:Ct.mrp)===void 0||(($t=le.availablePrices)==null?void 0:$t.mrp)===null?` (${p.PRICE_NOT_AVAILABLE})`:""]}),o.jsxs("option",{value:"wholesale",disabled:((Bn=le.availablePrices)==null?void 0:Bn.wholesale)===void 0||((Kn=le.availablePrices)==null?void 0:Kn.wholesale)===null,children:[p.PRICE_TYPE_WHOLESALE," ",((Xn=le.availablePrices)==null?void 0:Xn.wholesale)===void 0||((zn=le.availablePrices)==null?void 0:zn.wholesale)===null?` (${p.PRICE_NOT_AVAILABLE})`:""]}),o.jsxs("option",{value:"sales",disabled:((ha=le.availablePrices)==null?void 0:ha.sales)===void 0||((bn=le.availablePrices)==null?void 0:bn.sales)===null,children:[p.PRICE_TYPE_SALES," ",((Gs=le.availablePrices)==null?void 0:Gs.sales)===void 0||((aa=le.availablePrices)==null?void 0:aa.sales)===null?` (${p.PRICE_NOT_AVAILABLE})`:""]}),o.jsx("option",{value:"custom",children:p.PRICE_TYPE_CUSTOM})]})]}),o.jsx("div",{className:`${ys.totalPrice?"":"hidden"}`,children:tt?o.jsx("input",{ref:dn=>{$n.current[_e]=dn},type:"number",value:le.total,onChange:dn=>Da(_e,"total",dn.target.value),onKeyDown:_n(_e,"totalPrice"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md text-slate-700 font-medium text-right focus:ring-teal-500 focus:border-teal-500 ${mn()}`,min:"0",step:"any"}):o.jsx("input",{ref:dn=>{$n.current[_e]=dn},type:"text",value:(le.total||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),onKeyDown:_n(_e,"totalPrice"),className:`w-full px-3 py-1.5 border-0 bg-slate-50 rounded-md text-slate-700 font-medium text-right ${mn()}`,readOnly:!0})}),o.jsxs("div",{className:`${ys.unit?"":"hidden"}`,children:[o.jsx("input",{ref:dn=>{Ls.current[_e]=dn},type:"text",id:`item-unit-${_e}`,value:le.unit||"",onChange:dn=>Da(_e,"unit",dn.target.value,Wn.current[`unit-${_e}`]),onKeyDown:Jt(_e,"unit",Ls),onPaste:on(_e,"unit",Ls),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`,placeholder:": ",list:`common-units-datalist-item-${_e}`}),o.jsx("datalist",{id:`common-units-datalist-item-${_e}`,children:Wi.map(dn=>o.jsx("option",{value:dn},dn))})]}),o.jsx("div",{className:"flex items-center justify-center h-full",children:k.length>1&&o.jsx("button",{type:"button",onClick:()=>zr(_e),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50",title:p.REMOVE_ITEM_BTN_LABEL,children:o.jsx(xr,{className:"w-4 h-4"})})})]},le.id)})}),o.jsxs("button",{type:"button",onClick:Dr,className:`w-full text-teal-600 hover:text-teal-700 font-medium py-2 px-3 border-2 border-dashed border-teal-300 hover:border-teal-400 rounded-md flex items-center justify-center space-x-1.5 transition-colors ${mn()}`,children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:p.ADD_ITEM_BTN_LABEL})]})]}),o.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${mn()} ${R?"":"mt-4 pt-3 border-t"}`,children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"discountType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.DISCOUNT_TYPE_LABEL}),o.jsxs("select",{id:"discountType",value:Ne||"",onChange:le=>de(le.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:[o.jsxs("option",{value:"",children:["-- ",p.DISCOUNT_LABEL,"  --"]}),o.jsx("option",{value:"percentage",children:p.DISCOUNT_PERCENTAGE_LABEL}),o.jsx("option",{value:"fixed",children:p.DISCOUNT_FIXED_AMOUNT_LABEL})]})]}),!I&&o.jsx("button",{type:"button",onClick:_i,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Yt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Yt?p.UNPIN_DISCOUNT_TYPE_DEFAULT:p.PIN_DISCOUNT_TYPE_DEFAULT,children:o.jsx(Di,{isFilled:Yt})})]}),Ne&&o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"discountValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:[p.DISCOUNT_LABEL," ",Ne==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),o.jsx("input",{type:"number",id:"discountValue",value:ye,onChange:le=>Ue(parseFloat(le.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`,min:"0",step:"any"})]}),o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"taxType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.TAX_TYPE_LABEL}),o.jsxs("select",{id:"taxType",value:we||"",onChange:le=>Ze(le.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:[o.jsxs("option",{value:"",children:["-- ",p.TAX_LABEL,"  --"]}),o.jsx("option",{value:"percentage",children:p.TAX_PERCENTAGE_LABEL}),o.jsx("option",{value:"fixed",children:p.TAX_FIXED_AMOUNT_LABEL})]})]}),!I&&o.jsx("button",{type:"button",onClick:bi,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${We?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:We?p.UNPIN_TAX_TYPE_DEFAULT:p.PIN_TAX_TYPE_DEFAULT,children:o.jsx(Di,{isFilled:We})})]}),we&&o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"taxValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:[p.TAX_LABEL," ",we==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),o.jsx("input",{type:"number",id:"taxValue",value:Je,onChange:le=>Qe(parseFloat(le.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`,min:"0",step:"any"})]})]}),o.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border border-slate-200 space-y-1 text-right",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-slate-600",children:[p.SUBTOTAL_LABEL,":"]})," ",o.jsxs("span",{className:"font-medium",children:[p.BDT_SYMBOL," ",ls.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),Mn>0&&o.jsxs("div",{className:"flex justify-between text-red-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.DISCOUNT_LABEL," (",Ne==="percentage"?`${ye}%`:p.BDT_SYMBOL+ye,"):"]})," ",o.jsxs("span",{className:"font-medium",children:["- ",p.BDT_SYMBOL," ",Mn.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),gs>0&&o.jsxs("div",{className:"flex justify-between text-green-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.TAX_LABEL," (",we==="percentage"?`${Je}%`:p.BDT_SYMBOL+Je,"):"]})," ",o.jsxs("span",{className:"font-medium",children:["+ ",p.BDT_SYMBOL," ",gs.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),o.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-1 mt-1",children:[o.jsxs("span",{className:"text-slate-700",children:[p.GRAND_TOTAL_LABEL,":"]})," ",o.jsxs("span",{children:[p.BDT_SYMBOL," ",Nn.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]})]})]}),o.jsxs("section",{className:"mt-4",children:[o.jsx("label",{htmlFor:"invoiceNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.NOTES_TERMS_LABEL}),o.jsxs("div",{className:"flex items-end",children:[o.jsx("textarea",{ref:Ln,id:"invoiceNotes",value:je,onChange:le=>{Wn.current.notes?(ge(le.target.value),Wn.current.notes=!1):ge(le.target.value)},onKeyDown:ts,onPaste:Yn,rows:R?3:2,placeholder:p.NOTES_TERMS_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${mn()}`}),!I&&o.jsx("button",{type:"button",onClick:Ti,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Gt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Gt?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:o.jsx(Di,{isFilled:Gt})})]})]}),o.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 items-end mt-4 pt-3 border-t ${mn()}`,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentStatus",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.PAYMENT_STATUS_LABEL}),o.jsxs("div",{className:"flex items-end",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("select",{id:"paymentStatus",value:Fe,onChange:le=>ut(le.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:[o.jsx("option",{value:Ht.PENDING,children:p.PAYMENT_STATUS_PENDING}),o.jsx("option",{value:Ht.PARTIALLY_PAID,children:p.PAYMENT_STATUS_PARTIALLY_PAID}),o.jsx("option",{value:Ht.PAID,children:p.PAYMENT_STATUS_PAID}),o.jsx("option",{value:Ht.OVERDUE,children:p.PAYMENT_STATUS_OVERDUE}),o.jsx("option",{value:Ht.CANCELLED,children:p.PAYMENT_STATUS_CANCELLED})]})}),!I&&o.jsx("button",{type:"button",onClick:Ia,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400
                        ${Pe?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Pe?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:o.jsx(Di,{isFilled:Pe})})]})]}),Pi&&o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"dueDate",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.DUE_DATE_INVOICE_LABEL}),o.jsx("input",{ref:er,type:"date",id:"dueDate",value:oe,onChange:le=>xe(le.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,onKeyDown:le=>{var _e;le.key==="Enter"&&(le.preventDefault(),k.length>0&&En.current[0]&&((_e=En.current[0])==null||_e.focus()))}})]}),!I&&o.jsx("button",{type:"button",onClick:cs,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${yt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:yt?p.UNPIN_DUE_DATE_DEFAULT:p.PIN_DUE_DATE_DEFAULT,children:o.jsx(Di,{isFilled:yt})})]})]}),_r&&o.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 border-t pt-3 mt-2 ${mn()}`,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"initialPaidAmount",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.INITIAL_PAID_AMOUNT_LABEL}),o.jsx("input",{type:"number",id:"initialPaidAmount",value:rs,onChange:le=>Cn(le.target.value),className:`w-full px-3 py-1.5 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()} ${br?"border-slate-200 bg-slate-100 text-slate-500 cursor-not-allowed":"border-slate-300 bg-white"}`,min:"0.01",step:"0.01",max:Fe===Ht.PARTIALLY_PAID&&Nn>0?Nn-.01:void 0,readOnly:br})]}),o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"initialPaymentMethod",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.PAYMENT_METHOD_LABEL}),o.jsx("select",{id:"initialPaymentMethod",value:Ws,onChange:le=>Un(le.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${mn()}`,children:["Cash","Bank Transfer","bKash","Nagad","Rocket","Card","Cheque","Other"].map(le=>o.jsx("option",{value:le,children:p[`PAYMENT_METHOD_${le.toUpperCase().replace(" ","_")}`]||le},le))})]}),!I&&o.jsx("button",{type:"button",onClick:Er,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${pe?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:pe?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:o.jsx(Di,{isFilled:pe})})]}),o.jsxs("div",{className:"md:col-span-2 flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"initialPaymentNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${mn()}`,children:p.PAYMENT_NOTES_LABEL}),o.jsx("input",{ref:Rn,type:"text",id:"initialPaymentNotes",value:js,onChange:le=>{Wn.current.paymentNotes?(ln(le.target.value),Wn.current.paymentNotes=!1):ln(le.target.value)},onKeyDown:jn,onPaste:vn,placeholder:p.PAYMENT_NOTES_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${mn()}`})]}),!I&&o.jsx("button",{type:"button",onClick:ci,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${At?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:At?p.UNPIN_DEFAULT:p.PIN_TO_REMEMBER_AS_DEFAULT,children:o.jsx(Di,{isFilled:At})})]})]})]}),o.jsxs("div",{className:`pt-3 border-t bg-white rounded-b-xl
                         ${R?"sticky bottom-0 left-0 right-0 z-10 px-4 pb-4 sm:px-6 sm:pb-5":"px-1"}
                         flex justify-end space-x-3`,children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),o.jsx("button",{ref:Ca,type:"button",onClick:fr,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:sr})]})]})})},Hd={productName:"",description:"",quantity:1,unitPrice:0,total:0,selectedPriceType:"custom",unit:""},p2={productName:!0,quantity:!0,total:!0,unitPrice:!0,unit:!0},M0=[{key:"productName",label:p.PRODUCT_SERVICE_NAME_LABEL,defaultGridSpan:"minmax(0, 2.5fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"},{key:"quantity",label:p.QUANTITY_INVOICE_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"total",label:p.ITEM_TOTAL_LABEL,defaultGridSpan:"minmax(0, 1fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unitPrice",label:"  ()",defaultGridSpan:"minmax(0, 1.2fr)",headerTextAlign:"text-right",cellTextAlign:"text-right"},{key:"unit",label:p.PRODUCT_UNIT_LABEL,defaultGridSpan:"minmax(0, 0.8fr)",headerTextAlign:"text-left",cellTextAlign:"text-left"}],V3=({isOpen:t,onClose:e,onSaveInvoice:n,persons:s,products:r,companyProfiles:l,onOpenSelectPersonModal:c,onPersonAdded:d,isGlobalPhoneticModeActive:f,onOpenManageProductsModal:h,editingInvoiceData:_})=>{const{addNotification:b}=ur(),{currentUser:v,updateCurrentUserData:y}=Nc(),C=!!_,L=D.useRef(!1),[O,I]=D.useState(!1),[j,R]=D.useState(""),[U,te]=D.useState(new Date().toISOString().split("T")[0]),[Q,ne]=D.useState(""),[J,oe]=D.useState(null),[xe,F]=D.useState(""),[H,re]=D.useState([]),[K,Te]=D.useState(!1),[G,he]=D.useState(void 0),[ue,ae]=D.useState([{...Hd,id:Date.now().toString()}]),[V,ce]=D.useState(null),[M,k]=D.useState(0),[Y,Z]=D.useState(null),[fe,Ne]=D.useState(0),[de,ye]=D.useState(""),[Ue,we]=D.useState(Ht.PENDING),[Ze,Je]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_BILL_DATE)==="true"),[Qe,je]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_DUE_DATE)==="true"),[ge,Fe]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_COMPANY_PROFILE)==="true"),[ut,Pe]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_DISCOUNT_TYPE)==="true"),[nt,it]=D.useState(()=>localStorage.getItem(Tt.PIN_PURCHASE_TAX_TYPE)==="true"),[st,yt]=D.useState(""),[Pt,Rt]=D.useState("Cash"),[Ft,Yt]=D.useState(""),[Be,We]=D.useState(0),[Lt,pe]=D.useState(0),[vt,At]=D.useState(0),[Kt,Gt]=D.useState(0),xn=D.useRef(null),rs=D.useRef(null),Cn=D.useRef(null),Ws=D.useRef(null),Un=D.useRef(null),js=D.useRef(null),ln=D.useRef([]),ls=D.useRef([]),un=D.useRef([]),Mn=D.useRef([]),qa=D.useRef([]),gs=D.useRef([]),ca=D.useRef([]),Nn=D.useRef({}),[Xt,Ln]=D.useState(()=>ue.map(()=>[])),[kn,Fn]=D.useState(()=>ue.map(()=>!1)),[Rn,_s]=D.useState(()=>{const be=localStorage.getItem(Tt.INVOICE_COLUMN_VISIBILITY_PURCHASE_V1);try{return be?JSON.parse(be):p2}catch(Re){return console.error("Failed to parse purchase column visibility from localStorage",Re),p2}}),[hs,er]=D.useState(()=>localStorage.getItem(Tt.INVOICE_ITEM_FONT_SIZE_PURCHASE_V1)||"sm");D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_COLUMN_VISIBILITY_PURCHASE_V1,JSON.stringify(Rn))},[Rn]),D.useEffect(()=>{localStorage.setItem(Tt.INVOICE_ITEM_FONT_SIZE_PURCHASE_V1,hs)},[hs]);const Ca=be=>{_s(Re=>({...Re,[be]:!Re[be]}))},En=be=>{er(be)},bs=be=>{const Re=["xs","sm","base","lg","xl","2xl"],ze=Re.indexOf(hs);be==="increase"?ze<Re.length-1&&er(Re[ze+1]):ze>0&&er(Re[ze-1])},Qt=be=>({xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"})[hs]||"text-sm",[Ls,Ts]=D.useState(!1),$n=D.useRef(null),La=D.useRef(null),ua=D.useMemo(()=>({gridTemplateColumns:[...M0.filter(ze=>Rn[ze.key]).map(ze=>ze.defaultGridSpan),"minmax(0, 1.5fr)","auto"].join(" ")}),[Rn]);D.useEffect(()=>{const be=Re=>{La.current&&!La.current.contains(Re.target)&&$n.current&&!$n.current.contains(Re.target)&&Ts(!1)};return Ls&&document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[Ls]);const Bs=()=>I(be=>!be),ms=D.useCallback((be,Re,ze,dt,bt,Dt,wt)=>async()=>{be(xt=>{const Jt=!xt;if(localStorage.setItem(Re,String(Jt)),v){const _n={};Jt?(_n[ze]=dt,bt&&Dt!=null&&(_n[bt]=Dt),wt&&b(`${wt} ${p.DEFAULT_VALUE_PINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"success",2e3)):(_n[ze]=null,bt&&(_n[bt]=null),wt&&b(`${wt} ${p.DEFAULT_VALUE_UNPINNED_SUCCESS.split(" ").slice(2).join(" ")}`,"info",2e3)),Object.keys(_n).length>0&&y(_n)}return Jt})},[v,y,b]),wa=D.useCallback(()=>{const be=new Date;be.setHours(0,0,0,0);const Re=new Date(U);Re.setHours(0,0,0,0);const ze=Math.round((Re.getTime()-be.getTime())/(1e3*60*60*24));ms(Je,Tt.PIN_PURCHASE_BILL_DATE,"defaultPurchaseBillDateOffset",ze,void 0,void 0,p.INVOICE_DATE_LABEL.replace("/",""))()},[ms,U]),Is=D.useCallback(()=>{if(U&&Q){const be=new Date(U);be.setHours(0,0,0,0);const Re=new Date(Q);Re.setHours(0,0,0,0);const ze=Math.round((Re.getTime()-be.getTime())/(1e3*60*60*24));ms(je,Tt.PIN_PURCHASE_DUE_DATE,"defaultPurchaseDueDateOffset",ze,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()}else ms(je,Tt.PIN_PURCHASE_DUE_DATE,"defaultPurchaseDueDateOffset",0,void 0,void 0,p.DUE_DATE_INVOICE_LABEL)()},[ms,U,Q]),ka=D.useCallback(()=>ms(Fe,Tt.PIN_PURCHASE_COMPANY_PROFILE,"defaultPurchaseCompanyProfileId",G,void 0,void 0," ()")(),[ms,G]),Wn=D.useCallback(()=>ms(Pe,Tt.PIN_PURCHASE_DISCOUNT_TYPE,"defaultPurchaseDiscountType",V,"defaultPurchaseDiscountValue",M,p.DISCOUNT_TYPE_LABEL)(),[ms,V,M]),ys=D.useCallback(()=>ms(it,Tt.PIN_PURCHASE_TAX_TYPE,"defaultPurchaseTaxType",Y,"defaultPurchaseTaxValue",fe,p.TAX_TYPE_LABEL)(),[ms,Y,fe]);D.useEffect(()=>{Ue!==Ht.PARTIALLY_PAID&&Ue!==Ht.PAID&&(yt(""),Rt("Cash"),Yt(""))},[Ue]);const da=be=>{const Re=be.getFullYear(),ze=(be.getMonth()+1).toString().padStart(2,"0"),dt=be.getDate().toString().padStart(2,"0");return`${Re}-${ze}-${dt}`},ws=D.useCallback(()=>{const be=l.find(_n=>_n.isDefault)||(l.length>0?l[0]:null),Re=(be==null?void 0:be.companyName.substring(0,3).toUpperCase().replace(/\s/g,""))||"CMP",ze="BILL",dt="SUPP",bt=new Date,Dt=bt.getFullYear().toString().slice(-2),wt=(bt.getMonth()+1).toString().padStart(2,"0"),xt=bt.getDate().toString().padStart(2,"0"),Jt=Math.random().toString(36).substring(2,6).toUpperCase();return`${ze}-${Re}-${dt}${Dt}${wt}${xt}-${Jt}`},[l]),tr=D.useCallback(()=>{const be=localStorage.getItem(Tt.PIN_PURCHASE_BILL_DATE)==="true",Re=localStorage.getItem(Tt.PIN_PURCHASE_DUE_DATE)==="true",ze=localStorage.getItem(Tt.PIN_PURCHASE_COMPANY_PROFILE)==="true",dt=localStorage.getItem(Tt.PIN_PURCHASE_DISCOUNT_TYPE)==="true",bt=localStorage.getItem(Tt.PIN_PURCHASE_TAX_TYPE)==="true";if(Je(be),je(Re),Fe(ze),Pe(dt),it(bt),C&&_){R(_.invoiceNumber),L.current=!0;const wt=new Date(_.invoiceDate);if(te(da(new Date(wt.getUTCFullYear(),wt.getUTCMonth(),wt.getUTCDate()))),_.dueDate){const _n=new Date(_.dueDate);ne(da(new Date(_n.getUTCFullYear(),_n.getUTCMonth(),_n.getUTCDate())))}else ne("");const xt=s.find(_n=>_n.id===_.personId);xt?(oe(xt.id),F(xt.customAlias||xt.name)):(oe(null),F("")),he(_.companyProfileId);const Jt=_.items.map(_n=>{var on;return{..._n,unit:_n.unit||"",quantity:_n.quantity||1,unitPrice:_n.unitPrice||0,selectedPriceType:"custom",originalProductId:(on=r.find(ts=>ts.name===_n.productName||ts.id&&_n.originalProductId===ts.id))==null?void 0:on.id}});ae(Jt.length>0?Jt:[{...Hd,id:Date.now().toString()}]),ce(_.discountType||null),k(_.discountValue||0),Z(_.taxType||null),Ne(_.taxValue||0),ye(_.notes||""),we(_.paymentStatus),yt(""),Rt("Cash"),Yt("")}else{let wt=new Date;be&&(v==null?void 0:v.defaultPurchaseBillDateOffset)!==null&&(v==null?void 0:v.defaultPurchaseBillDateOffset)!==void 0&&wt.setDate(wt.getDate()+v.defaultPurchaseBillDateOffset);const xt=da(wt);te(xt);const[Jt,_n,on]=xt.split("-").map(Number);let ts=new Date(Jt,_n-1,on);if(Re&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==null&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==void 0&&ts.setDate(ts.getDate()+v.defaultPurchaseDueDateOffset),ne(da(ts)),ze&&(v!=null&&v.defaultPurchaseCompanyProfileId)&&l.find(Yn=>Yn.id===v.defaultPurchaseCompanyProfileId))he(v.defaultPurchaseCompanyProfileId);else{const Yn=l.find(jn=>jn.isDefault)||(l.length>0?l[0]:null);he(Yn==null?void 0:Yn.id)}L.current||(R(ws()),L.current=!0),oe(null),F(""),ae([{...Hd,id:Date.now().toString(),selectedPriceType:"custom",unit:""}]),dt&&(v!=null&&v.defaultPurchaseDiscountType)?(ce(v.defaultPurchaseDiscountType),k(v.defaultPurchaseDiscountValue??0)):(ce(null),k(0)),bt&&(v!=null&&v.defaultPurchaseTaxType)?(Z(v.defaultPurchaseTaxType),Ne(v.defaultPurchaseTaxValue??0)):(Z(null),Ne(0)),ye(""),we(Ht.PENDING),yt(""),Rt("Cash"),Yt("")}const Dt=C&&_?_.items:[{...Hd,id:Date.now().toString()}];Ln(Dt.map(()=>[])),Fn(Dt.map(()=>!1)),Nn.current={}},[C,_,v,s,r,l,ws]);D.useEffect(()=>{t?tr():(L.current=!1,R(""))},[t,tr]),D.useEffect(()=>{if(!C&&Qe&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==null&&(v==null?void 0:v.defaultPurchaseDueDateOffset)!==void 0&&U){const[be,Re,ze]=U.split("-").map(Number);let dt=new Date(be,Re-1,ze);dt.setDate(dt.getDate()+v.defaultPurchaseDueDateOffset),ne(da(dt))}},[U,Qe,v==null?void 0:v.defaultPurchaseDueDateOffset,C]),D.useEffect(()=>{const be=ue.reduce((bt,Dt)=>bt+(Number(Dt.total)||0),0);We(be);let Re=0;V==="percentage"&&M>0?Re=be*M/100:V==="fixed"&&M>0&&(Re=M),Re=Math.max(0,Math.min(Re,be)),pe(Re);const ze=be-Re;let dt=0;Y==="percentage"&&fe>0?dt=ze*fe/100:Y==="fixed"&&fe>0&&(dt=fe),At(dt),Gt(ze+dt)},[ue,V,M,Y,fe]);const Ta=(be,Re,ze,dt)=>{const bt=`${Re}-${be}`;dt&&(Nn.current[bt]=!0);const Dt=[...ue],wt=Dt[be];if(Re==="productName"||Re==="description"||Re==="unit")wt[Re]=ze;else if(Re==="quantity"||Re==="unitPrice"||Re==="total"){const xt=parseFloat(ze);wt[Re]=isNaN(xt)||xt<0?0:xt}(Re==="quantity"||Re==="unitPrice")&&(wt.total=(Number(wt.quantity)||0)*(Number(wt.unitPrice)||0)),ae(Dt)},sa=(be,Re)=>{const ze=`productName-${be}`;if(Nn.current[ze]?(Ta(be,"productName",Re),Nn.current[ze]=!1):Ta(be,"productName",Re),Re.trim()){const dt=r.filter(bt=>!bt.isDeleted&&bt.name.toLowerCase().includes(Re.toLowerCase())).slice(0,5);Ln(bt=>{const Dt=[...bt];return Dt[be]=dt,Dt}),Fn(bt=>{const Dt=[...bt];return Dt[be]=!0,Dt})}else{const dt=[...ue],bt=dt[be];bt.description="",bt.unitPrice=0,bt.total=0,bt.unit="",bt.selectedPriceType="custom",bt.originalProductId=void 0,bt.availablePrices=void 0,ae(dt),Ln(Dt=>{const wt=[...Dt];return wt[be]=[],wt}),Fn(Dt=>{const wt=[...Dt];return wt[be]=!1,wt})}},Gr=(be,Re)=>{var xt,Jt;const ze=[...ue],dt=ze[be],bt=`productName-${be}`,Dt=`description-${be}`,wt=`unit-${be}`;Nn.current[bt]=!0,Re.description&&(Nn.current[Dt]=!0),Re.unit&&(Nn.current[wt]=!0),dt.productName=Re.name,dt.description=Re.description||"",dt.unit=Re.unit||"",dt.originalProductId=Re.id,dt.availablePrices={sales:Re.unitPrice,mrp:Re.mrp,wholesale:Re.wholesalePrice},dt.unitPrice=Re.wholesalePrice??0,dt.selectedPriceType="custom",dt.total=dt.quantity*dt.unitPrice,ae(ze),Ln(_n=>{const on=[..._n];return on[be]=[],on}),Fn(_n=>{const on=[..._n];return on[be]=!1,on}),(xt=un.current[be])==null||xt.focus(),(Jt=un.current[be])==null||Jt.select()};D.useEffect(()=>{const be=Re=>{ls.current.forEach((ze,dt)=>{var bt;ze&&!ze.contains(Re.target)&&ln.current[dt]&&!((bt=ln.current[dt])!=null&&bt.contains(Re.target))&&Fn(Dt=>{const wt=[...Dt];return wt[dt]&&(wt[dt]=!1),wt})})};return kn.some(Re=>Re)&&document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[kn]);const mn=be=>{const Re=be.target.value;if(Nn.current.supplierSearch?(F(Re),Nn.current.supplierSearch=!1):F(Re),oe(null),Re.trim()){const ze=Re.toLowerCase(),dt=s.filter(bt=>!bt.isDeleted&&(bt.customAlias&&bt.customAlias.toLowerCase().includes(ze)||bt.name.toLowerCase().includes(ze)||bt.mobileNumber&&bt.mobileNumber.includes(Re))).slice(0,5);re(dt),Te(!0)}else re([]),Te(!1)},Hr=be=>{var Re,ze;if(K&&H.length>0)be.key==="ArrowDown"||be.key==="ArrowUp"||(be.key==="Enter"?(be.preventDefault(),Te(!1),ue.length>0&&ln.current[0]&&((Re=ln.current[0])==null||Re.focus())):be.key==="Escape"&&Te(!1));else if(be.key==="Enter")be.preventDefault(),Te(!1),ue.length>0&&ln.current[0]&&((ze=ln.current[0])==null||ze.focus());else{if(Nn.current.supplierSearch)return;if(f&&be.key===" "){be.preventDefault();const dt=rs.current||be.target,bt=dt.value,Dt=dt.selectionStart||0;let wt=Dt-1;for(;wt>=0&&bt[wt]!==" ";)wt--;wt++;const xt=bt.substring(wt,Dt);if(xt.trim()){const Jt=cr(xt),_n=bt.substring(0,wt)+Jt+" "+bt.substring(Dt);F(_n),setTimeout(()=>{const on=wt+Jt.length+1;dt.setSelectionRange(on,on)},0)}else{const Jt=bt.substring(0,Dt)+" "+bt.substring(Dt);F(Jt),setTimeout(()=>{dt.setSelectionRange(Dt+1,Dt+1)},0)}Te(!1)}}},Ds=be=>{if(Nn.current.supplierSearch){Nn.current.supplierSearch=!1;return}if(f){be.preventDefault();const Re=be.clipboardData.getData("text"),ze=cr(Re),dt=rs.current||be.target,bt=dt.selectionStart||0,Dt=dt.selectionEnd||0,wt=dt.value,xt=wt.substring(0,bt)+ze+wt.substring(Dt);F(xt),setTimeout(()=>{const Jt=bt+ze.length;dt.setSelectionRange(Jt,Jt)},0),Te(!1)}},ea=be=>{var Re,ze;Nn.current.supplierSearch=!0,F(be.customAlias||be.name),oe(be.id),re([]),Te(!1),ue.length>0&&ln.current[0]?(Re=ln.current[0])==null||Re.focus():(ze=Un.current)==null||ze.focus()},Yr=be=>{var ze;const Re=s.find(dt=>dt.id===be);Re&&(Nn.current.supplierSearch=!0,F(Re.customAlias||Re.name),oe(Re.id),re([]),Te(!1),ue.length>0&&ln.current[0]&&((ze=ln.current[0])==null||ze.focus()))};D.useEffect(()=>{const be=Re=>{Cn.current&&!Cn.current.contains(Re.target)&&rs.current&&!rs.current.contains(Re.target)&&Te(!1)};return K&&document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[K]);const wr=(be,Re,ze)=>dt=>{var Dt,wt,xt,Jt;const bt=`${Re}-${be}`;if(Nn.current[bt]){if(dt.key==="Enter"){dt.preventDefault();const on=["productName","quantity","total","unitPrice","unit","description"].filter(jn=>jn==="description"||Rn[jn]||jn==="productName");let Yn=on.indexOf(Re)+1;for(;Yn<on.length&&on[Yn]!=="description"&&!Rn[on[Yn]];)Yn++;if(Yn<on.length){const jn=on[Yn];let vn=null;jn==="quantity"?vn=un.current[be]:jn==="total"?vn=qa.current[be]:jn==="unitPrice"?vn=Mn.current[be]:jn==="unit"?vn=gs.current[be]:jn==="description"&&(vn=ca.current[be]),vn&&(vn.focus(),(vn instanceof HTMLInputElement||vn instanceof HTMLTextAreaElement)&&((Dt=vn.select)==null||Dt.call(vn)))}else be===ue.length-1?cs():(wt=ln.current[be+1])==null||wt.focus()}return}if(f&&dt.key===" "){if(Re==="productName"&&kn[be])return;dt.preventDefault();const _n=ze.current[be]||dt.target,on=_n.value,ts=_n.selectionStart||0;let Yn=ts-1;for(;Yn>=0&&on[Yn]!==" ";)Yn--;Yn++;const jn=on.substring(Yn,ts);if(jn.trim()){const vn=cr(jn),Dr=on.substring(0,Yn)+vn+" "+on.substring(ts);Ta(be,Re,Dr,!0),setTimeout(()=>{const zr=Yn+vn.length+1;_n.setSelectionRange(zr,zr)},0)}else{const vn=on.substring(0,ts)+" "+on.substring(ts);Ta(be,Re,vn,!0),setTimeout(()=>{_n.setSelectionRange(ts+1,ts+1)},0)}}else if(dt.key==="Enter"){dt.preventDefault();const on=["productName","quantity","total","unitPrice","unit","description"].filter(jn=>jn==="description"||Rn[jn]||jn==="productName");let Yn=on.indexOf(Re)+1;for(;Yn<on.length&&on[Yn]!=="description"&&!Rn[on[Yn]];)Yn++;if(Yn<on.length){const jn=on[Yn];let vn=null;jn==="quantity"?vn=un.current[be]:jn==="total"?vn=qa.current[be]:jn==="unitPrice"?vn=Mn.current[be]:jn==="unit"?vn=gs.current[be]:jn==="description"&&(vn=ca.current[be]),vn&&(vn.focus(),(vn instanceof HTMLInputElement||vn instanceof HTMLTextAreaElement)&&((xt=vn.select)==null||xt.call(vn)))}else be===ue.length-1?cs():(Jt=ln.current[be+1])==null||Jt.focus()}},dr=(be,Re)=>ze=>{if(ze.key==="Enter"){ze.preventDefault();const bt=["quantity","total","unitPrice","unit","description"].filter(xt=>xt==="description"||Rn[xt]);let Dt=bt.indexOf(Re);Dt===-1&&Re==="quantity"&&Rn.quantity&&(Dt=0);let wt=Dt+1;if(wt<bt.length){const xt=bt[wt];let Jt=null;xt==="quantity"?Jt=un.current[be]:xt==="total"?Jt=qa.current[be]:xt==="unitPrice"?Jt=Mn.current[be]:xt==="unit"?Jt=gs.current[be]:xt==="description"&&(Jt=ca.current[be]),Jt&&(Jt.focus(),(Jt instanceof HTMLInputElement||Jt instanceof HTMLTextAreaElement)&&Jt.type!=="button"&&Jt.type!=="submit"&&Jt.type!=="reset"&&Jt.type!=="hidden"&&Jt.select())}else if(be===ue.length-1)cs();else{const xt=ln.current[be+1];xt&&(xt.focus(),xt.select())}}},Ns=(be,Re,ze)=>dt=>{const bt=`${Re}-${be}`;if(Nn.current[bt]){Nn.current[bt]=!1;return}if(f){dt.preventDefault();const Dt=dt.clipboardData.getData("text"),wt=cr(Dt),xt=ze.current[be]||dt.target,Jt=xt.selectionStart||0,_n=xt.selectionEnd||0,on=xt.value,ts=on.substring(0,Jt)+wt+on.substring(_n);Ta(be,Re,ts,!0),setTimeout(()=>{const Yn=Jt+wt.length;xt.setSelectionRange(Yn,Yn)},0)}},Ia=be=>{if(!Nn.current.notes&&f&&be.key===" "){be.preventDefault();const Re=xn.current||be.target,ze=Re.value,dt=Re.selectionStart||0;let bt=dt-1;for(;bt>=0&&ze[bt]!==" ";)bt--;bt++;const Dt=ze.substring(bt,dt);if(Dt.trim()){const wt=cr(Dt),xt=ze.substring(0,bt)+wt+" "+ze.substring(dt);ye(xt),setTimeout(()=>{const Jt=bt+wt.length+1;Re.setSelectionRange(Jt,Jt)},0)}else{const wt=ze.substring(0,dt)+" "+ze.substring(dt);ye(wt),setTimeout(()=>{Re.setSelectionRange(dt+1,dt+1)},0)}}},li=be=>{if(Nn.current.notes){Nn.current.notes=!1;return}if(f){be.preventDefault();const Re=be.clipboardData.getData("text"),ze=cr(Re),dt=xn.current||be.target,bt=dt.selectionStart||0,Dt=dt.selectionEnd||0,wt=dt.value,xt=wt.substring(0,bt)+ze+wt.substring(Dt);ye(xt),setTimeout(()=>{const Jt=bt+ze.length;dt.setSelectionRange(Jt,Jt)},0)}},cs=()=>{const be={...Hd,selectedPriceType:"custom",unit:""},Re=Date.now().toString();ae(ze=>[...ze,{...be,id:Re}]),Ln(ze=>[...ze,[]]),Fn(ze=>[...ze,!1]),requestAnimationFrame(()=>{var dt;const ze=ue.length;ln.current[ze]&&((dt=ln.current[ze])==null||dt.focus())})},qr=be=>{const Re=ue.filter((ze,dt)=>dt!==be);ae(Re),Ln(ze=>ze.filter((dt,bt)=>bt!==be)),Fn(ze=>ze.filter((dt,bt)=>bt!==be))},_i=async()=>{let be=null;j.trim()||(b(p.INVOICE_NUMBER_LABEL.replace("","")+" "+p.FIELD_IS_REQUIRED.toLowerCase(),"error"),!be&&Ws.current&&(be=Ws.current)),!J&&!xe.trim()&&(b(p.INVOICE_CUSTOMER_REQUIRED_ERROR.replace("",""),"error"),!be&&rs.current&&(be=rs.current)),U||(b(p.INVOICE_DATE_REQUIRED_ERROR.replace("",""),"error"),!be&&Un.current&&(be=Un.current));const Re=ue.filter(Dt=>{const wt=Dt.productName.trim()!=="",xt=(Dt.quantity||0)>0,Jt=(Dt.unitPrice||0)>=0;return wt&&xt&&Jt});if(Re.length===0&&(b(p.INVOICE_NO_ITEMS_ERROR.replace("",""),"error"),!be&&ln.current[0]&&(be=ln.current[0])),(be===Ws.current&&rs.current||be===Un.current&&rs.current)&&(be=rs.current),be){be.focus(),typeof be.select=="function"&&be.select();return}let ze=J;if(!ze&&xe.trim()){const Dt=s.find(wt=>(wt.customAlias||wt.name).toLowerCase()===xe.trim().toLowerCase());if(Dt)ze=Dt.id;else try{const wt=await d({name:xe.trim()});if(wt)ze=wt.id,b(p.PERSON_ADDED_IMPLICITLY_INVOICE.replace("{personName}",xe.trim()).replace("{personType}",p.PERSON_TYPE_SUPPLIER),"success");else throw new Error("New person creation returned null")}catch(wt){console.error("Error adding person implicitly:",wt),b(p.INVOICE_CUSTOMER_CREATION_ERROR.replace("",""),"error");return}}if(!ze){b(p.INVOICE_CUSTOMER_REQUIRED_ERROR.replace("",""),"error");return}const dt={invoiceNumber:j,invoiceType:Sa.PURCHASE,invoiceDate:U,dueDate:Q||void 0,personId:ze,companyProfileId:G,items:Re.map(({selectedPriceType:Dt,originalProductId:wt,availablePrices:xt,...Jt})=>({...Jt,originalProductId:wt||void 0})),subtotal:Be,discountType:V||void 0,discountValue:M||void 0,discountAmount:Lt||void 0,taxType:Y||void 0,taxValue:fe||void 0,taxAmount:vt||void 0,totalAmount:Kt,notes:de.trim()||void 0,paymentStatus:Ue};if((Ue===Ht.PAID||Ue===Ht.PARTIALLY_PAID)&&!C){const Dt=parseFloat(st);if(isNaN(Dt)||Dt<=0){if(Ue===Ht.PAID&&Kt>0)dt.initialPayment={paymentDate:new Date().toISOString(),amount:Kt,paymentMethod:Pt,notes:Ft.trim()||p.AUTO_PAYMENT_NOTE_FOR_PAID_INVOICE.replace("","")};else if(Ue===Ht.PARTIALLY_PAID){b(p.PAYMENT_AMOUNT_INVALID_FOR_PARTIAL,"error");return}}else Dt>=Kt&&Ue===Ht.PARTIALLY_PAID&&b(p.PARTIAL_PAYMENT_CANT_BE_FULL,"warning"),dt.initialPayment={paymentDate:new Date().toISOString(),amount:Dt,paymentMethod:Pt,notes:Ft.trim()||void 0}}if(await n(dt,_==null?void 0:_.id))if(b(C?p.INVOICE_UPDATED_SUCCESS.replace("",""):p.INVOICE_CREATED_SUCCESS.replace("",""),"success"),C)e();else{if(v){const Dt={};if(Ze){const wt=new Date;wt.setHours(0,0,0,0);const xt=new Date(U);xt.setHours(0,0,0,0),Dt.defaultPurchaseBillDateOffset=Math.round((xt.getTime()-wt.getTime())/(1e3*60*60*24))}if(Qe&&Q){const wt=new Date(U);wt.setHours(0,0,0,0);const xt=new Date(Q);xt.setHours(0,0,0,0),Dt.defaultPurchaseDueDateOffset=Math.round((xt.getTime()-wt.getTime())/(1e3*60*60*24))}ge&&(Dt.defaultPurchaseCompanyProfileId=G),ut&&(Dt.defaultPurchaseDiscountType=V,Dt.defaultPurchaseDiscountValue=M),nt&&(Dt.defaultPurchaseTaxType=Y,Dt.defaultPurchaseTaxValue=fe),Object.keys(Dt).length>0&&await y(Dt)}tr(),requestAnimationFrame(()=>{var Dt;ln.current[0]&&((Dt=ln.current[0])==null||Dt.focus())})}},bi=C?p.EDIT_INVOICE_MODAL_TITLE.replace("",""):p.CREATE_PURCHASE_BILL_MODAL_TITLE,Er=p.SUPPLIER_LABEL,ci=p.SUPPLIER_SEARCH_PLACEHOLDER,Ti=p.SELECT_SUPPLIER_BTN_LABEL,za=C?p.SAVE_INVOICE_BTN_LABEL.replace("",""):p.CREATE_INVOICE_BTN_LABEL.replace("",""),ui=!C&&(Ue===Ht.PARTIALLY_PAID||Ue===Ht.PAID),Ir=!C&&Ue===Ht.PAID,Da=Ue===Ht.PENDING||Ue===Ht.PARTIALLY_PAID||Ue===Ht.OVERDUE,yi=o.jsx("button",{onClick:Bs,className:"text-slate-500 hover:text-teal-600 p-1.5 rounded-full hover:bg-teal-50 transition-colors",title:O?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,"aria-label":O?p.RESTORE_MODAL_DEFAULT_SIZE:p.EXPAND_MODAL_FULL_SCREEN,children:O?o.jsx(a5,{className:"w-5 h-5"}):o.jsx(s5,{className:"w-5 h-5"})});return o.jsx(Ya,{isOpen:t,onClose:e,title:bi,size:O?"screen":"3xl",headerActions:yi,children:o.jsxs("div",{className:`flex flex-col ${O?"h-full":""}`,children:[o.jsxs("div",{className:`p-1 ${O?"flex-grow overflow-y-auto custom-scrollbar-modal pr-2 pb-20":"space-y-4 pb-20"}`,children:[o.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseCompanyProfile",className:"block text-xs font-medium text-slate-600 mb-0.5",children:" ( )"}),o.jsxs("div",{className:"flex items-end",children:[o.jsxs("select",{id:"purchaseCompanyProfile",value:G||"",onChange:be=>he(be.target.value||void 0),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",children:[o.jsx("option",{value:"",children:"--     --"}),l.filter(be=>!be.isDeleted).map(be=>o.jsx("option",{value:be.id,children:be.companyName},be.id))]}),!C&&o.jsx("button",{type:"button",onClick:ka,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${ge?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:ge?p.UNPIN_COMPANY_PROFILE_DEFAULT:p.PIN_COMPANY_PROFILE_DEFAULT,children:o.jsx(Di,{isFilled:ge})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"billNumber",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_NUMBER_LABEL.replace("","")}),o.jsx("input",{ref:Ws,type:"text",id:"billNumber",value:j,onChange:be=>R(be.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",onKeyDown:be=>{var Re;be.key==="Enter"&&(be.preventDefault(),(Re=Un.current)==null||Re.focus())}})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"billDate",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INVOICE_DATE_LABEL.replace("/","")}),o.jsxs("div",{className:"flex items-end",children:[o.jsx("input",{ref:Un,type:"date",id:"billDate",value:U,onChange:be=>te(be.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",required:!0,onKeyDown:be=>{var Re;be.key==="Enter"&&(be.preventDefault(),Da&&js.current?js.current.focus():ue.length>0&&ln.current[0]&&((Re=ln.current[0])==null||Re.focus()))}}),!C&&o.jsx("button",{type:"button",onClick:wa,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Ze?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Ze?p.UNPIN_INVOICE_DATE_DEFAULT:p.PIN_INVOICE_DATE_DEFAULT,children:o.jsx(Di,{isFilled:Ze})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("label",{htmlFor:"supplierSearch",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[Er," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{ref:rs,type:"text",id:"supplierSearch",value:xe,onChange:mn,onKeyDown:Hr,onPaste:Ds,onFocus:()=>xe.trim()&&Te(!0),placeholder:ci,className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm",autoComplete:"off"}),o.jsx("button",{type:"button",onClick:()=>c(Yr),className:"p-2 bg-teal-500 hover:bg-teal-600 text-white rounded-md shadow-sm transition duration-150 focus:outline-none focus:ring-2 focus:ring-teal-400",title:Ti,children:o.jsx(kl,{className:"w-4 h-4"})})]}),K&&o.jsx("ul",{ref:Cn,className:"absolute z-20 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto custom-scrollbar-modal",children:H.length>0?H.map(be=>o.jsxs("li",{onClick:()=>ea(be),className:"px-3 py-2 hover:bg-teal-50 cursor-pointer text-xs",children:[be.customAlias||be.name," ",be.mobileNumber&&`(${be.mobileNumber})`]},be.id)):xe.trim()&&o.jsx("li",{className:"px-3 py-2 text-xs text-slate-500",children:p.NO_SUPPLIER_SUGGESTIONS})})]})]}),o.jsxs("div",{className:"relative z-10",children:[" ",o.jsx("section",{className:`${O?"":"border-t pt-3 mt-3"}`,children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:`text-md font-semibold text-slate-700 ${Qt()}`,children:p.INVOICE_ITEMS_LABEL}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("button",{type:"button",onClick:()=>bs("decrease"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:hs==="xs",children:o.jsx(Yh,{className:"w-4 h-4"})}),o.jsx("button",{type:"button",onClick:()=>En("sm"),title:" ",className:"p-1 rounded hover:bg-slate-200 text-slate-600",children:o.jsx(qh,{className:"w-4 h-4"})}),o.jsx("button",{type:"button",onClick:()=>bs("increase"),title:"  ",className:"p-1 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-50",disabled:hs==="2xl",children:o.jsx(Ec,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:$n,type:"button",onClick:()=>Ts(be=>!be),className:"text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:" ","aria-haspopup":"true","aria-expanded":Ls,children:[o.jsx(Sp,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:""})]}),Ls&&o.jsxs("div",{ref:La,className:"absolute right-0 mt-1 w-60 bg-white border border-slate-300 rounded-md shadow-lg z-30 py-1",role:"menu",children:[o.jsx("div",{className:"px-3 pt-2 pb-1 border-b",children:o.jsx("p",{className:"text-xs font-medium text-slate-500",children:" /"})}),M0.map(({key:be,label:Re})=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-1.5 hover:bg-slate-50 cursor-pointer text-xs",children:[o.jsx("input",{type:"checkbox",checked:Rn[be],onChange:()=>Ca(be),className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-400 rounded focus:ring-teal-500"}),o.jsx("span",{className:"text-slate-700",children:Re})]},be)),o.jsx("div",{className:"px-3 pt-2 pb-1 border-t mt-1",children:o.jsx("p",{className:"text-xs font-medium text-slate-500",children:" "})}),o.jsxs("div",{className:"flex justify-around items-center px-3 py-1.5",children:[o.jsx("button",{onClick:()=>En("xs"),title:"",className:`p-1 rounded hover:bg-slate-100 ${hs==="xs"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Yh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>En("sm"),title:"",className:`p-1 rounded hover:bg-slate-100 ${hs==="sm"?"text-teal-600":"text-slate-500"}`,children:o.jsx(qh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>En("base"),title:"",className:`p-1 rounded hover:bg-slate-100 ${hs==="base"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Ec,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>En("lg"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${hs==="lg"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Ec,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>En("xl"),title:" ",className:`p-1 rounded hover:bg-slate-100 ${hs==="xl"?"text-teal-600":"text-slate-500"}`,children:o.jsx(Ec,{className:"w-6 h-6"})})]})]})]}),o.jsxs("button",{type:"button",onClick:()=>{e(),h()},className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-1 px-2.5 rounded-md flex items-center space-x-1",title:p.MANAGE_PRODUCTS_STOCK_NAV_BTN,children:[o.jsx(Wd,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:p.MANAGE_PRODUCTS_STOCK_NAV_BTN})]})]})]})}),o.jsxs("div",{className:`grid gap-x-2 items-end mb-1.5 print:hidden font-medium text-slate-600 ${Qt()}`,style:ua,children:[M0.map(be=>o.jsx("div",{className:`${Rn[be.key]?"":"hidden"} ${be.headerTextAlign||"text-left"}`,children:o.jsx("label",{children:be.label})},be.key)),o.jsx("div",{className:"text-left",children:o.jsx("label",{children:p.ITEM_DESCRIPTION_LABEL})}),o.jsx("div",{className:"text-center",children:o.jsx("label",{children:""})})]}),o.jsx("div",{className:`space-y-3 mb-3 ${O?"pr-1":"max-h-[65vh] overflow-y-auto custom-scrollbar-modal pr-1"}`,children:ue.map((be,Re)=>o.jsxs("div",{className:"grid gap-x-2 gap-y-1 items-start py-2 border-b border-slate-100 group",style:ua,children:[o.jsxs("div",{className:`relative ${Rn.productName?"":"hidden"}`,children:[o.jsx("input",{ref:ze=>{ln.current[Re]=ze},type:"text",id:`purchase-item-name-${Re}`,value:be.productName,onChange:ze=>sa(Re,ze.target.value),onKeyDown:wr(Re,"productName",ln),onPaste:Ns(Re,"productName",ln),onFocus:()=>{if(be.productName.trim()){const ze=r.filter(dt=>!dt.isDeleted&&dt.name.toLowerCase().includes(be.productName.toLowerCase())).slice(0,5);Ln(dt=>{const bt=[...dt];return bt[Re]=ze,bt})}else Ln(ze=>{const dt=[...ze];return dt[Re]=r.filter(bt=>!bt.isDeleted).slice(0,5),dt});Fn(ze=>{const dt=[...ze];return dt[Re]=!0,dt})},className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,placeholder:p.PRODUCT_NAME_PLACEHOLDER,autoComplete:"off"}),kn[Re]&&Xt[Re]&&Xt[Re].length>0&&o.jsx("ul",{ref:ze=>{ls.current[Re]=ze},className:"absolute z-30 w-full bg-white border border-slate-300 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto custom-scrollbar-modal",children:Xt[Re].map(ze=>o.jsx("li",{onClick:()=>Gr(Re,ze),onMouseDown:dt=>dt.preventDefault(),className:`px-3 py-2 hover:bg-teal-50 cursor-pointer ${Qt()}`,children:ze.name},ze.id))})]}),o.jsx("div",{className:`${Rn.quantity?"":"hidden"}`,children:o.jsx("input",{ref:ze=>{un.current[Re]=ze},type:"number",id:`purchase-item-quantity-${Re}`,value:be.quantity,onChange:ze=>Ta(Re,"quantity",ze.target.value),onKeyDown:dr(Re,"quantity"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-20 text-right ${Qt()}`,min:"0",step:"any"})}),o.jsx("div",{className:`${Rn.total?"":"hidden"}`,children:o.jsx("input",{ref:ze=>{qa.current[Re]=ze},type:"number",value:be.total,onChange:ze=>Ta(Re,"total",ze.target.value),onKeyDown:dr(Re,"total"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md text-slate-700 font-medium text-right focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,min:"0",step:"any"})}),o.jsx("div",{className:`${Rn.unitPrice?"":"hidden"}`,children:o.jsx("input",{ref:ze=>{Mn.current[Re]=ze},type:"number",id:`purchase-item-unitprice-${Re}`,value:be.unitPrice,onChange:ze=>Ta(Re,"unitPrice",ze.target.value),onKeyDown:dr(Re,"unitPrice"),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 min-w-24 text-right ${Qt()}`,min:"0",step:"any"})}),o.jsxs("div",{className:`${Rn.unit?"":"hidden"}`,children:[o.jsx("input",{ref:ze=>{gs.current[Re]=ze},type:"text",id:`purchase-item-unit-${Re}`,value:be.unit||"",onChange:ze=>Ta(Re,"unit",ze.target.value,Nn.current[`unit-${Re}`]),onKeyDown:wr(Re,"unit",gs),onPaste:Ns(Re,"unit",gs),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,placeholder:": ",list:`purchase-common-units-datalist-item-${Re}`}),o.jsx("datalist",{id:`purchase-common-units-datalist-item-${Re}`,children:Wi.map(ze=>o.jsx("option",{value:ze},ze))})]}),o.jsxs("div",{className:"col-span-1",children:[" ",o.jsx("textarea",{ref:ze=>{ca.current[Re]=ze},id:`purchase-item-desc-${Re}`,value:be.description,onChange:ze=>Ta(Re,"description",ze.target.value,Nn.current[`description-${Re}`]),onKeyDown:wr(Re,"description",ca),onPaste:Ns(Re,"description",ca),placeholder:p.ITEM_DESCRIPTION_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${Qt()}`,rows:1})]}),o.jsx("div",{className:"flex items-center justify-center h-full",children:ue.length>1&&o.jsx("button",{type:"button",onClick:()=>qr(Re),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50",title:p.REMOVE_ITEM_BTN_LABEL,children:o.jsx(xr,{className:"w-4 h-4"})})})]},be.id))}),o.jsxs("button",{type:"button",onClick:cs,className:`w-full text-teal-600 hover:text-teal-700 font-medium py-2 px-3 border-2 border-dashed border-teal-300 hover:border-teal-400 rounded-md flex items-center justify-center space-x-1.5 transition-colors ${Qt()}`,children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:p.ADD_ITEM_BTN_LABEL})]})]})," ",o.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${Qt()} ${O?"":"mt-4 pt-3 border-t"}`,children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"purchaseDiscountType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.DISCOUNT_TYPE_LABEL}),o.jsxs("select",{id:"purchaseDiscountType",value:V||"",onChange:be=>ce(be.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:[o.jsxs("option",{value:"",children:["-- ",p.DISCOUNT_LABEL,"  --"]}),o.jsx("option",{value:"percentage",children:p.DISCOUNT_PERCENTAGE_LABEL}),o.jsx("option",{value:"fixed",children:p.DISCOUNT_FIXED_AMOUNT_LABEL})]})]}),!C&&o.jsx("button",{type:"button",onClick:Wn,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${ut?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:ut?p.UNPIN_DISCOUNT_TYPE_DEFAULT:p.PIN_DISCOUNT_TYPE_DEFAULT,children:o.jsx(Di,{isFilled:ut})})]}),V&&o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"purchaseDiscountValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:[p.DISCOUNT_LABEL," ",V==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),o.jsx("input",{type:"number",id:"purchaseDiscountValue",value:M,onChange:be=>k(parseFloat(be.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,min:"0",step:"any"})]}),o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"purchaseTaxType",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.TAX_TYPE_LABEL}),o.jsxs("select",{id:"purchaseTaxType",value:Y||"",onChange:be=>Z(be.target.value||null),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:[o.jsxs("option",{value:"",children:["-- ",p.TAX_LABEL,"  --"]}),o.jsx("option",{value:"percentage",children:p.TAX_PERCENTAGE_LABEL}),o.jsx("option",{value:"fixed",children:p.TAX_FIXED_AMOUNT_LABEL})]})]}),!C&&o.jsx("button",{type:"button",onClick:ys,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${nt?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:nt?p.UNPIN_TAX_TYPE_DEFAULT:p.PIN_TAX_TYPE_DEFAULT,children:o.jsx(Di,{isFilled:nt})})]}),Y&&o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"purchaseTaxValue",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:[p.TAX_LABEL," ",Y==="percentage"?"(%)":`(${p.BDT_SYMBOL})`]}),o.jsx("input",{type:"number",id:"purchaseTaxValue",value:fe,onChange:be=>Ne(parseFloat(be.target.value)||0),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`,min:"0",step:"any"})]})]}),o.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border border-slate-200 space-y-1 text-right",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-slate-600",children:[p.SUBTOTAL_LABEL,":"]})," ",o.jsxs("span",{className:"font-medium",children:[p.BDT_SYMBOL," ",Be.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),Lt>0&&o.jsxs("div",{className:"flex justify-between text-red-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.DISCOUNT_LABEL," (",V==="percentage"?`${M}%`:p.BDT_SYMBOL+M,"):"]})," ",o.jsxs("span",{className:"font-medium",children:["- ",p.BDT_SYMBOL," ",Lt.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),vt>0&&o.jsxs("div",{className:"flex justify-between text-green-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.TAX_LABEL," (",Y==="percentage"?`${fe}%`:p.BDT_SYMBOL+fe,"):"]})," ",o.jsxs("span",{className:"font-medium",children:["+ ",p.BDT_SYMBOL," ",vt.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),o.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-1 mt-1",children:[o.jsxs("span",{className:"text-slate-700",children:[p.GRAND_TOTAL_LABEL,":"]})," ",o.jsxs("span",{children:[p.BDT_SYMBOL," ",Kt.toLocaleString("bn-BD",{minimumFractionDigits:2})]})]})]})]}),o.jsxs("section",{className:"mt-4",children:[o.jsx("label",{htmlFor:"purchaseBillNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.NOTES_TERMS_LABEL}),o.jsx("textarea",{ref:xn,id:"purchaseBillNotes",value:de,onChange:be=>{Nn.current.notes?(ye(be.target.value),Nn.current.notes=!1):ye(be.target.value)},onKeyDown:Ia,onPaste:li,rows:O?3:2,placeholder:p.NOTES_TERMS_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 resize-y ${Qt()}`})]}),o.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 items-end mt-4 pt-3 border-t ${Qt()}`,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchasePaymentStatus",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.PAYMENT_STATUS_LABEL}),o.jsx("div",{className:"flex items-end",children:o.jsxs("select",{id:"purchasePaymentStatus",value:Ue,onChange:be=>we(be.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:[o.jsx("option",{value:Ht.PENDING,children:p.PAYMENT_STATUS_PENDING}),o.jsx("option",{value:Ht.PARTIALLY_PAID,children:p.PAYMENT_STATUS_PARTIALLY_PAID}),o.jsx("option",{value:Ht.PAID,children:p.PAYMENT_STATUS_PAID}),o.jsx("option",{value:Ht.OVERDUE,children:p.PAYMENT_STATUS_OVERDUE}),o.jsx("option",{value:Ht.CANCELLED,children:p.PAYMENT_STATUS_CANCELLED})]})})]}),Da&&o.jsxs("div",{className:"flex items-end",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{htmlFor:"purchaseDueDate",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.DUE_DATE_INVOICE_LABEL}),o.jsx("input",{ref:js,type:"date",id:"purchaseDueDate",value:Q,onChange:be=>ne(be.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,onKeyDown:be=>{var Re;be.key==="Enter"&&(be.preventDefault(),ue.length>0&&ln.current[0]&&((Re=ln.current[0])==null||Re.focus()))}})]}),!C&&o.jsx("button",{type:"button",onClick:Is,className:`ml-1.5 p-1.5 rounded-md border transition-colors focus:outline-none focus:ring-2 focus:ring-teal-400 ${Qe?"bg-teal-100 border-teal-300 text-teal-600 hover:bg-teal-200":"bg-slate-100 border-slate-300 text-slate-500 hover:bg-slate-200"}`,title:Qe?p.UNPIN_DUE_DATE_DEFAULT:p.PIN_DUE_DATE_DEFAULT,children:o.jsx(Di,{isFilled:Qe})})]})]}),ui&&o.jsxs("section",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 border-t pt-3 mt-2 ${Qt()}`,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseInitialPaidAmount",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.INITIAL_PAID_AMOUNT_LABEL}),o.jsx("input",{type:"number",id:"purchaseInitialPaidAmount",value:st,onChange:be=>yt(be.target.value),className:`w-full px-3 py-1.5 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()} ${Ir?"border-slate-200 bg-slate-100 text-slate-500 cursor-not-allowed":"border-slate-300 bg-white"}`,min:"0.01",step:"0.01",max:Ue===Ht.PARTIALLY_PAID&&Kt>0?Kt-.01:void 0,readOnly:Ir})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseInitialPaymentMethod",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.PAYMENT_METHOD_LABEL}),o.jsx("select",{id:"purchaseInitialPaymentMethod",value:Pt,onChange:be=>Rt(be.target.value),className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white ${Qt()}`,children:["Cash","Bank Transfer","bKash","Nagad","Rocket","Card","Cheque","Other"].map(be=>o.jsx("option",{value:be,children:p[`PAYMENT_METHOD_${be.toUpperCase().replace(" ","_")}`]||be},be))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"purchaseInitialPaymentNotes",className:`block text-xs font-medium text-slate-600 mb-0.5 ${Qt()}`,children:p.PAYMENT_NOTES_LABEL}),o.jsx("input",{type:"text",id:"purchaseInitialPaymentNotes",value:Ft,onChange:be=>Yt(be.target.value),placeholder:p.PAYMENT_NOTES_PLACEHOLDER,className:`w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 ${Qt()}`})]})]})]}),o.jsxs("div",{className:`pt-3 border-t bg-white rounded-b-xl
                         ${O?"sticky bottom-0 left-0 right-0 z-10 px-4 pb-4 sm:px-6 sm:pb-5":"px-1"}
                         flex justify-end space-x-3`,children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),o.jsx("button",{type:"button",onClick:_i,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:za})]})]})})},G3=({invoice:t,customerName:e,onViewInvoice:n,onEditInvoice:s,onDeleteInvoice:r})=>{var v;const l=y=>{try{return new Date(y).toLocaleDateString("bn-BD",{day:"2-digit",month:"long",year:"numeric"})}catch{return y}},c=y=>{let C="bg-slate-200",L="text-slate-700",O;switch(y){case Ht.PENDING:C="bg-yellow-100",L="text-yellow-700",O=p.PAYMENT_STATUS_PENDING;break;case Ht.PARTIALLY_PAID:C="bg-blue-100",L="text-blue-700",O=p.PAYMENT_STATUS_PARTIALLY_PAID;break;case Ht.PAID:C="bg-green-100",L="text-green-700",O=p.PAYMENT_STATUS_PAID;break;case Ht.OVERDUE:C="bg-red-100",L="text-red-700",O=p.PAYMENT_STATUS_OVERDUE;break;case Ht.CANCELLED:C="bg-slate-200",L="text-slate-600 line-through",O=p.PAYMENT_STATUS_CANCELLED;break;default:O=y}return o.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C} ${L}`,children:O})},d=t.totalAmount||0,f=((v=t.paymentsReceived)==null?void 0:v.reduce((y,C)=>y+(C.amount||0),0))||0,h=d-f,_=t.invoiceType===Sa.SALES?p.INVOICE_TYPE_SALES_SHORT:p.INVOICE_TYPE_PURCHASE_SHORT,b=t.invoiceType===Sa.SALES?"text-purple-600 bg-purple-50":"text-indigo-600 bg-indigo-50";return o.jsxs("li",{className:`bg-white p-3 sm:p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-150 border-l-4 ${t.isDeleted?"border-slate-400 opacity-70":t.invoiceType===Sa.SALES?"border-purple-500":"border-indigo-500"}`,children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[o.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h3",{className:`text-sm sm:text-base font-semibold ${t.isDeleted?"text-slate-500 line-through":t.invoiceType===Sa.SALES?"text-purple-700":"text-indigo-700"}`,children:t.invoiceNumber}),o.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded-full ${b}`,children:_})]}),o.jsxs("span",{className:`text-xs ${t.isDeleted?"text-slate-400":"text-slate-500"} sm:border-l sm:pl-2 ${t.isDeleted,"sm:border-slate-300"}`,children:[t.invoiceType===Sa.SALES?p.BILLED_TO_LABEL:p.SUPPLIER_LABEL,": ",e]})]}),o.jsxs("p",{className:`text-xs ${t.isDeleted?"text-slate-400":"text-slate-500"} mt-0.5`,children:[p.INVOICE_DATE_LABEL,": ",l(t.invoiceDate),t.dueDate&&o.jsxs("span",{className:"ml-2",children:["| ",p.DUE_DATE_INVOICE_LABEL,": ",l(t.dueDate)]})]})]}),o.jsxs("div",{className:"flex flex-col items-start sm:items-end space-y-1 sm:space-y-0 sm:min-w-[160px]",children:[o.jsxs("p",{className:`text-sm sm:text-base font-semibold ${t.isDeleted?"text-slate-400 line-through":"text-slate-800"}`,children:[p.BDT_SYMBOL," ",(t.totalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]}),c(t.paymentStatus)]})]}),(t.paymentStatus===Ht.PENDING||t.paymentStatus===Ht.PARTIALLY_PAID||t.paymentStatus===Ht.OVERDUE)&&h>.009&&!t.isDeleted&&o.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[p.REMAINING_AMOUNT_LABEL,": ",p.BDT_SYMBOL," ",(h||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.isDeleted&&t.deletedAt&&o.jsxs("p",{className:"text-xs text-orange-600 font-medium mt-1",children:[p.DELETED_ON," ",l(t.deletedAt)," (",p.STATUS_ARCHIVED,")"]}),o.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100 flex justify-end space-x-1.5",children:!t.isDeleted&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>n(t),className:"p-1.5 text-xs text-sky-600 hover:text-sky-700 bg-sky-50 hover:bg-sky-100 rounded-md flex items-center space-x-1",title:p.INVOICE_VIEW_DETAILS,children:[o.jsx(nm,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:""})]}),s&&t.invoiceType===Sa.SALES&&o.jsxs("button",{onClick:()=>s(t),className:"p-1.5 text-xs text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-md flex items-center space-x-1",title:p.EDIT_INVOICE_MODAL_TITLE,children:[o.jsx(hl,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:""})]})]})})]})},dh=10,H3=({isOpen:t,onClose:e,invoices:n,persons:s,onViewInvoice:r,onEditInvoice:l,onDeleteInvoice:c,onCreateNewInvoice:d,onOpenEditInvoiceModal:f})=>{const[h,_]=D.useState(""),[b,v]=D.useState("all"),[y,C]=D.useState("all"),[L,O]=D.useState(1),I=H=>{const re=s.find(K=>K.id===H);return re?re.customAlias||re.name:p.UNKNOWN_PERSON},j=D.useMemo(()=>{const H=h.toLowerCase();return n.filter(re=>{if(re.isDeleted||!(b==="all"||re.invoiceType===b)||!(y==="all"||re.paymentStatus===y))return!1;const G=I(re.personId).toLowerCase(),he=re.invoiceNumber.toLowerCase().includes(H),ue=G.includes(H);return he||ue}).sort((re,K)=>new Date(K.createdAt).getTime()-new Date(re.createdAt).getTime())},[n,s,h,b,y]);D.useEffect(()=>{O(1)},[h,b,y]);const R=j.length,U=Math.max(1,Math.ceil(R/dh));D.useEffect(()=>{L>U&&O(U)},[L,U]);const te=D.useMemo(()=>{const H=(L-1)*dh,re=H+dh;return j.slice(H,re)},[j,L]),Q=()=>{O(H=>Math.max(1,H-1))},ne=()=>{O(H=>Math.min(U,H+1))},J=H=>{v(H)},oe=H=>{C(H)},xe=H=>`px-3 py-1.5 text-xs sm:text-sm rounded-md transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-opacity-50 whitespace-nowrap ${H?"bg-teal-600 text-white focus:ring-teal-400":"bg-slate-200 text-slate-700 hover:bg-slate-300 focus:ring-slate-400"}`,F={[Ht.PENDING]:p.PAYMENT_STATUS_PENDING,[Ht.PARTIALLY_PAID]:p.PAYMENT_STATUS_PARTIALLY_PAID,[Ht.PAID]:p.PAYMENT_STATUS_PAID,[Ht.OVERDUE]:p.PAYMENT_STATUS_OVERDUE,[Ht.CANCELLED]:p.PAYMENT_STATUS_CANCELLED};return t?o.jsx(Ya,{isOpen:t,onClose:e,title:p.INVOICE_LIST_MODAL_TITLE,size:"3xl",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"mb-4 space-y-3",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[o.jsx("input",{type:"text",placeholder:p.SEARCH_INVOICE_PLACEHOLDER,value:h,onChange:H=>_(H.target.value),className:"w-full sm:flex-grow px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500","aria-label":" "}),o.jsxs("button",{onClick:d,className:"flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-md transition duration-150 w-full sm:w-auto flex-shrink-0",children:[o.jsx(Ri,{className:"w-5 h-5"}),o.jsx("span",{children:p.CREATE_SALES_INVOICE_NAV_BTN})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[o.jsx("button",{onClick:()=>J("all"),className:xe(b==="all"),children:p.FILTER_ALL_INVOICES}),o.jsx("button",{onClick:()=>J(Sa.SALES),className:xe(b===Sa.SALES),children:p.FILTER_SALES_INVOICES}),o.jsx("button",{onClick:()=>J(Sa.PURCHASE),className:xe(b===Sa.PURCHASE),children:p.FILTER_PURCHASE_BILLS})]}),o.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[o.jsxs("span",{className:"text-xs text-slate-500 font-medium mr-1 whitespace-nowrap",children:[p.PAYMENT_STATUS_LABEL,":"]}),o.jsx("button",{onClick:()=>oe("all"),className:xe(y==="all"),children:p.FILTER_ALL_STATUSES}),Object.values(Ht).map(H=>o.jsx("button",{onClick:()=>oe(H),className:xe(y===H),children:F[H]},H))]})]}),o.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:te.length===0?o.jsx("p",{className:"text-slate-500 text-center py-10",children:h||b!=="all"||y!=="all"?p.NO_ITEMS_FOR_FILTER:p.NO_INVOICES_FOUND}):o.jsx("ul",{className:"space-y-3",children:te.map(H=>o.jsx(G3,{invoice:H,customerName:I(H.personId),onViewInvoice:r,onEditInvoice:f,onDeleteInvoice:c},H.id))})}),R>dh&&o.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 flex flex-col sm:flex-row justify-between items-center text-sm text-slate-600",children:[o.jsxs("p",{className:"mb-2 sm:mb-0",children:[p.PAGE_LABEL," ",L.toLocaleString("bn-BD")," ",p.OF_LABEL," ",U.toLocaleString("bn-BD")," | ",p.TOTAL_ITEMS_LABEL,": ",R.toLocaleString("bn-BD")]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:Q,disabled:L===1,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":p.PREVIOUS_PAGE_BTN,children:[o.jsx(k2,{className:"w-4 h-4 mr-1"}),p.PREVIOUS_PAGE_BTN]}),o.jsxs("button",{onClick:ne,disabled:L===U,className:"px-3 py-1.5 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":p.NEXT_PAGE_BTN,children:[p.NEXT_PAGE_BTN,o.jsx(j2,{className:"w-4 h-4 ml-1"})]})]})]})]})}):null},Y3=({className:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0c1.281.21 2.072 1.13 2.072 2.182V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5v-.14c0-1.052.79-1.972 2.072-2.182m11.318 0-1.895-1.895c-.342-.342-.342-.895 0-1.238l.444-.443c.34-.34.896-.34 1.237 0l1.896 1.896a.608.608 0 0 1 0 .858l-.443.443c-.343.343-.896.343-1.238 0Z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})]}),q3=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),z3=({isOpen:t,onClose:e,invoice:n,persons:s,companyProfiles:r,onRecordPayment:l,currentUserName:c})=>{const[d,f]=D.useState(!1),[h,_]=D.useState(""),[b,v]=D.useState(new Date().toISOString().split("T")[0]),[y,C]=D.useState("Cash"),[L,O]=D.useState(""),[I,j]=D.useState(!1);D.useEffect(()=>{t&&n&&(f(!1),_(""),v(new Date().toISOString().split("T")[0]),C("Cash"),O(""),j(!1))},[t,n]);const R=D.useMemo(()=>n?s.find(we=>we.id===n.personId):null,[n,s]),U=D.useMemo(()=>{if(!n||!n.companyProfileId){const we=r.find(Ze=>Ze.isDefault);return we||(r.length>0?r[0]:null)}return r.find(we=>we.id===n.companyProfileId)},[n,r]),te=D.useMemo(()=>!n||!n.paymentsReceived?0:n.paymentsReceived.reduce((we,Ze)=>we+(Ze.amount||0),0),[n]),Q=n?(n.totalAmount||0)-te:0,ne=n&&(n.paymentStatus===Ht.PENDING||n.paymentStatus===Ht.PARTIALLY_PAID||n.paymentStatus===Ht.OVERDUE)&&Q>.009;if(!t||!n)return null;const J=we=>we?new Date(we).toLocaleDateString("bn-BD",{day:"2-digit",month:"long",year:"numeric"}):"N/A",oe=we=>we?new Date(we).toLocaleString("bn-BD",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",xe=["Cash","Bank Transfer","bKash","Nagad","Rocket","Card","Cheque","Other"],F={Cash:p.PAYMENT_METHOD_CASH,"Bank Transfer":p.PAYMENT_METHOD_BANK_TRANSFER,bKash:p.PAYMENT_METHOD_BKASH,Nagad:p.PAYMENT_METHOD_NAGAD,Rocket:p.PAYMENT_METHOD_ROCKET,Card:p.PAYMENT_METHOD_CARD,Cheque:p.PAYMENT_METHOD_CHEQUE,Other:p.PAYMENT_METHOD_OTHER},re=(we=>{switch(we){case Ht.PENDING:return{text:p.PAYMENT_STATUS_PENDING,color:"text-yellow-600",bgColor:"bg-yellow-100",printClass:"status-pending",tooltip:p.INVOICE_STATUS_PENDING_TOOLTIP};case Ht.PARTIALLY_PAID:return{text:p.PAYMENT_STATUS_PARTIALLY_PAID,color:"text-blue-600",bgColor:"bg-blue-100",printClass:"status-partially-paid",tooltip:p.INVOICE_STATUS_PARTIALLY_PAID_TOOLTIP};case Ht.PAID:return{text:p.PAYMENT_STATUS_PAID,color:"text-green-600",bgColor:"bg-green-100",printClass:"status-paid",tooltip:p.INVOICE_STATUS_PAID_TOOLTIP};case Ht.OVERDUE:return{text:p.PAYMENT_STATUS_OVERDUE,color:"text-red-600",bgColor:"bg-red-100",printClass:"status-overdue",tooltip:p.INVOICE_STATUS_OVERDUE_TOOLTIP};case Ht.CANCELLED:return{text:p.PAYMENT_STATUS_CANCELLED,color:"text-slate-600 line-through",bgColor:"bg-slate-100",printClass:"status-cancelled",tooltip:p.INVOICE_STATUS_CANCELLED_TOOLTIP};default:return{text:we,color:"text-slate-700",bgColor:"bg-slate-100",printClass:"status-default",tooltip:""}}})(n.paymentStatus),K=n.invoiceType===Sa.PURCHASE,Te=K?(R==null?void 0:R.customAlias)||(R==null?void 0:R.name)||p.UNKNOWN_PERSON:(U==null?void 0:U.companyName)||c||p.APP_TITLE,G=K?R==null?void 0:R.address:U==null?void 0:U.address,he=K?R==null?void 0:R.mobileNumber:U==null?void 0:U.phone,ue=K?R==null?void 0:R.email:U==null?void 0:U.email,ae=K?"":U==null?void 0:U.taxId,V=K?p.SUPPLIER_MOBILE_LABEL:U!=null&&U.phone?"":p.PERSON_MOBILE_NUMBER,ce=K?(U==null?void 0:U.companyName)||c||p.APP_TITLE:(R==null?void 0:R.customAlias)||(R==null?void 0:R.name)||p.UNKNOWN_PERSON,M=K?U==null?void 0:U.address:R==null?void 0:R.address,k=K?U==null?void 0:U.phone:R==null?void 0:R.mobileNumber,Y=K?U==null?void 0:U.email:R==null?void 0:R.email,Z=K?U==null?void 0:U.taxId:"",fe=K?U!=null&&U.phone?"":p.PERSON_MOBILE_NUMBER:p.CUSTOMER_MOBILE_LABEL,Ne=(U==null?void 0:U.companyName)||c||p.APP_TITLE,de=U==null?void 0:U.logoBase64,ye=()=>{const we=window.open("","_blank");if(we){const Ze=K?p.BILL_TITLE_FOR_PRINT:`${p.INVOICE_TITLE_FOR_PRINT} - ${n.invoiceNumber}`,Je=K?p.BILL_TITLE_FOR_PRINT:p.INVOICE_TITLE_FOR_PRINT;let Qe=`
        <html>
          <head>
            <meta charset="UTF-8">
            <title>${Ze}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap" rel="stylesheet">
            <style>
              body { font-family: "Noto Sans Bengali", sans-serif; margin: 20px; color: #333; line-height: 1.4; font-size: 10pt; }
              .print-container { max-width: 800px; margin: auto; padding:10px; border: 1px solid #eee; }
              .print-header { text-align: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee;}
              .company-logo-print { display: block; margin: 0 auto 10px auto; max-width: 160px; max-height: 70px; object-fit: contain; }
              .print-header h1 { font-size: 1.6em; margin: 0; color: #111; }
              .print-header h2.invoice-title { font-size: 1.3em; margin: 5px 0 0 0; color: #444; font-weight: normal; }
              
              .addresses { display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 0.9em; }
              .address-block { width: 48%; }
              .address-block h4 { margin-top: 0; font-size: 0.95em; color: #555; border-bottom: 1px solid #eee; padding-bottom: 4px; margin-bottom: 6px; font-weight: 600; }
              .address-block p { margin: 2px 0; }
              .address-block .label { font-weight: 500; color: #444; padding-right: 5px;}

              .invoice-meta { background-color: #f9f9f9; padding: 10px; border-radius: 4px; margin-bottom: 20px; font-size: 0.9em; }
              .invoice-meta table { width: 100%; }
              .invoice-meta td { padding: 3px 0; }
              .invoice-meta .label { font-weight: 500; color: #444; padding-right: 10px; }
              
              .status-chip { display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 0.8em; font-weight: 500; border: 1px solid transparent; }
              .status-pending { background-color: #fffbeb; color: #b45309; border-color: #fde68a; }
              .status-partially-paid { background-color: #eff6ff; color: #2563eb; border-color: #bfdbfe; }
              .status-paid { background-color: #f0fdf4; color: #16a34a; border-color: #bbf7d0; }
              .status-overdue { background-color: #fef2f2; color: #dc2626; border-color: #fecaca; }
              .status-cancelled { background-color: #f1f5f9; color: #475569; text-decoration: line-through; border-color: #e2e8f0;}
              .status-default { background-color: #f8fafc; color: #334155; border-color: #e2e8f0;}

              .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              .items-table th, .items-table td { border: 1px solid #ccc; padding: 7px; font-size: 0.85rem; vertical-align: top; }
              .items-table th { background-color: #f0f0f0; font-weight: 600; }
              .items-table .text-right { text-align: right; }
              .items-table .item-description { font-size: 0.75em; color: #555; padding-left: 8px; margin-top: 2px; white-space: pre-wrap; }
              
              .totals-section { margin-left: auto; width: 55%; max-width: 300px; margin-top: 10px; font-size: 0.9em; }
              .totals-section table { width: 100%; }
              .totals-section td { padding: 3px 0; }
              .totals-section .label { text-align: right; padding-right: 15px; color: #444; }
              .totals-section .value { text-align: right; font-weight: 500; }
              .totals-section .grand-total td { font-weight: bold; font-size: 1.05em; color: #000; border-top: 2px solid #555; padding-top: 5px; }
              
              .notes-section, .payment-history-section { margin-top: 20px; padding-top:10px; border-top: 1px dashed #ccc; font-size: 0.85em; }
              .notes-section h4, .payment-history-section h4 { font-size: 1em; color: #555; margin-bottom: 5px; font-weight: 600; }
              .notes-section p { white-space: pre-wrap; }
              .payment-history-section ul { list-style: none; padding: 0; }
              .payment-history-section li { background-color: #f9f9f9; padding: 5px 8px; border-radius: 3px; margin-bottom: 4px; border: 1px solid #eee;}
              .payment-history-section li div { display: flex; justify-content: space-between; }
              .payment-history-section li .payment-notes { font-size: 0.9em; color: #666; margin-top: 2px; }

              .footer-print { text-align: center; font-size: 0.8em; color: #777; margin-top: 30px; padding-top: 10px; border-top: 1px solid #eee; }
              .no-print { display: none !important; }
              @media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }
            </style>
          </head>
          <body>
            <div class="print-container">
      `;Qe+='<div class="print-header">',de&&(Qe+=`<img src="${de}" alt="${Ne} ${p.LOGO_TEXT}" class="company-logo-print" />`),Qe+=`<h1>${Ne}</h1>`,Qe+=`<h2 class="invoice-title">${Je}</h2>`,Qe+="</div>",Qe+='<div class="addresses">',Qe+=`<div class="address-block"><h4>${K?p.SUPPLIER_LABEL:p.INVOICE_FROM_LABEL}:</h4>`,Qe+=`<p class="font-semibold">${Te}</p>`,G&&(Qe+=`<p>${G}</p>`),he&&(Qe+=`<p><span class="label">${V}:</span> ${he}</p>`),ue&&(Qe+=`<p><span class="label">${p.EMAIL}:</span> ${ue}</p>`),ae&&!K&&(Qe+=`<p><span class="label">${p.TAX_LABEL} ${p.ID_LABEL}:</span> ${ae}</p>`),Qe+="</div>",Qe+=`<div class="address-block" style="text-align: right;"><h4>${K?" ( )":p.BILLED_TO_LABEL}:</h4>`,Qe+=`<p class="font-semibold">${ce}</p>`,M&&(Qe+=`<p>${M}</p>`),k&&(Qe+=`<p><span class="label">${fe}:</span> ${k}</p>`),Y&&(Qe+=`<p><span class="label">${p.EMAIL}:</span> ${Y}</p>`),Z&&K&&(Qe+=`<p><span class="label">${p.TAX_LABEL} ${p.ID_LABEL}:</span> ${Z}</p>`),Qe+="</div></div>",Qe+='<div class="invoice-meta"><table><tr>',Qe+=`<td><span class="label">${p.INVOICE_NUMBER_LABEL}:</span> ${n.invoiceNumber}</td>`,Qe+=`<td><span class="label">${p.INVOICE_DATE_LABEL}:</span> ${J(n.invoiceDate)}</td></tr><tr>`,n.dueDate&&(Qe+=`<td><span class="label">${p.DUE_DATE_INVOICE_LABEL}:</span> ${J(n.dueDate)}</td>`),Qe+=`<td ${n.dueDate?"":'colspan="2"'}><span class="label">${p.PAYMENT_STATUS_LABEL}:</span> <span class="status-chip ${re.printClass}">${re.text}</span></td>`,Qe+="</tr></table></div>",Qe+=`<table class="items-table"><thead><tr>
        <th>${p.INVOICE_ITEMS_TABLE_HEADER_PRODUCT}</th>
        <th class="text-right">${p.INVOICE_ITEMS_TABLE_HEADER_QTY}</th>
        <th class="text-right">${p.INVOICE_ITEMS_TABLE_HEADER_UNIT_PRICE}</th>
        <th class="text-right">${p.INVOICE_ITEMS_TABLE_HEADER_TOTAL}</th>
      </tr></thead><tbody>`,n.items.forEach(je=>{Qe+=`<tr>
          <td>${je.productName}${je.description?`<p class="item-description">${je.description}</p>`:""}</td>
          <td class="text-right">${(je.quantity||0).toLocaleString("bn-BD")}${je.unit?` ${je.unit}`:""}</td>
          <td class="text-right">${(je.unitPrice||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
          <td class="text-right font-semibold">${(je.total||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
        </tr>`}),Qe+="</tbody></table>",Qe+='<div class="totals-section"><table>',Qe+=`<tr><td class="label">${p.SUBTOTAL_LABEL}:</td><td class="value">${p.BDT_SYMBOL} ${(n.subtotal||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`,(n.discountAmount||0)>0&&(Qe+=`<tr><td class="label">${p.DISCOUNT_LABEL} (${n.discountType==="percentage"?`${n.discountValue}%`:p.BDT_SYMBOL+n.discountValue}):</td><td class="value" style="color: red;">- ${p.BDT_SYMBOL} ${(n.discountAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`),(n.taxAmount||0)>0&&(Qe+=`<tr><td class="label">${p.TAX_LABEL} (${n.taxType==="percentage"?`${n.taxValue}%`:p.BDT_SYMBOL+n.taxValue}):</td><td class="value" style="color: green;">+ ${p.BDT_SYMBOL} ${(n.taxAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`),Qe+=`<tr class="grand-total"><td class="label">${p.GRAND_TOTAL_LABEL}:</td><td class="value">${p.BDT_SYMBOL} ${(n.totalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`,n.paymentsReceived&&n.paymentsReceived.length>0&&(Qe+=`<tr><td class="label">${p.PAID_AMOUNT_LABEL}:</td><td class="value" style="color: green;">${p.BDT_SYMBOL} ${(te||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`,Qe+=`<tr><td class="label">${p.REMAINING_AMOUNT_LABEL}:</td><td class="value" style="${Q>.009?"color: red;":"color: green;"}">${p.BDT_SYMBOL} ${(Q||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</td></tr>`),Qe+='</table></div><div style="clear:both;"></div>',n.paymentsReceived&&n.paymentsReceived.length>0&&(Qe+=`<div class="payment-history-section"><h4>${p.PAYMENT_HISTORY_LABEL}</h4><ul>`,n.paymentsReceived.forEach(je=>{Qe+=`<li><div><span>${oe(je.paymentDate)} - ${p.BDT_SYMBOL} ${(je.amount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})}</span><span class="payment-method">${je.paymentMethod?F[je.paymentMethod]:""}</span></div>`,je.notes&&(Qe+=`<p class="payment-notes">${p.NOTES_LABEL}: ${je.notes}</p>`),Qe+="</li>"}),Qe+="</ul></div>"),n.notes&&(Qe+=`<div class="notes-section"><h4>${p.NOTES_TERMS_LABEL}:</h4><p>${n.notes}</p></div>`),Qe+=`<div class="footer-print">${p.APP_TITLE}  </div>`,Qe+="</div></body></html>",we.document.write(Qe),we.document.close(),we.focus(),setTimeout(()=>{we.print(),we.close()},500)}else alert("     -   ")},Ue=async we=>{if(we.preventDefault(),I)return;const Ze=parseFloat(h);if(isNaN(Ze)||Ze<=0){alert(p.FORM_VALIDATION_ERROR);return}if(Ze>Q+.001){alert(p.PAYMENT_AMOUNT_EXCEEDS_REMAINING_ERROR);return}if(!b){alert(p.PAYMENT_DATE_REQUIRED_ERROR);return}j(!0);try{await l(n.id,{paymentDate:b,amount:Ze,paymentMethod:y||void 0,notes:L.trim()||void 0}),f(!1),_(""),v(new Date().toISOString().split("T")[0]),C("Cash"),O("")}catch(Je){console.error("Payment recording failed:",Je)}finally{j(!1)}};return o.jsxs(Ya,{isOpen:t,onClose:e,title:`${K?p.BILL_TITLE_FOR_PRINT:p.VIEW_INVOICE_MODAL_TITLE} - ${n.invoiceNumber}`,size:"2xl",children:[o.jsxs("div",{id:"invoice-display-area",className:"p-1",children:[o.jsxs("header",{className:"mb-6 text-center",children:[de?o.jsx("img",{src:de,alt:`${Ne} ${p.LOGO_TEXT}`,className:"mx-auto mb-2 max-w-[180px] max-h-[80px] object-contain"}):o.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:Ne}),o.jsx("p",{className:"text-sm text-slate-500",children:K?p.BILL_TITLE_FOR_PRINT:p.INVOICE_TITLE_FOR_PRINT})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-sm",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-1",children:K?p.SUPPLIER_LABEL:p.INVOICE_FROM_LABEL}),o.jsx("p",{className:"font-semibold",children:Te}),G&&o.jsx("p",{className:"text-xs",children:G}),he&&o.jsxs("p",{className:"text-xs",children:[V,": ",he]}),ue&&o.jsxs("p",{className:"text-xs",children:[p.EMAIL,": ",ue]}),ae&&!K&&o.jsxs("p",{className:"text-xs",children:[p.TAX_LABEL," ",p.ID_LABEL,": ",ae]})]}),o.jsxs("div",{className:"sm:text-right",children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-1",children:K?" ( )":p.BILLED_TO_LABEL}),o.jsx("p",{className:"font-semibold",children:ce}),M&&o.jsx("p",{className:"text-xs",children:M}),k&&o.jsxs("p",{className:"text-xs",children:[fe,": ",k]}),Y&&o.jsxs("p",{className:"text-xs",children:[p.EMAIL,": ",Y]}),Z&&K&&o.jsxs("p",{className:"text-xs",children:[p.TAX_LABEL," ",p.ID_LABEL,": ",Z]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 mb-6 text-sm border-b pb-3",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"font-semibold",children:[p.INVOICE_NUMBER_LABEL,":"]})," ",n.invoiceNumber]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-semibold",children:[p.INVOICE_DATE_LABEL,":"]})," ",J(n.invoiceDate)]}),n.dueDate&&o.jsxs("div",{children:[o.jsxs("span",{className:"font-semibold",children:[p.DUE_DATE_INVOICE_LABEL,":"]})," ",J(n.dueDate)]}),o.jsxs("div",{className:"col-span-2 sm:col-span-1 mt-1",children:[o.jsxs("span",{className:"font-semibold",children:[p.PAYMENT_STATUS_LABEL,":"]}),o.jsx("span",{title:re.tooltip,className:`ml-1 px-2 py-0.5 text-xs font-medium rounded-full ${re.bgColor} ${re.color}`,children:re.text})]})]}),o.jsx("h4",{className:"text-md font-semibold text-slate-700 mb-2",children:p.INVOICE_ITEMS_LABEL}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm mb-6 min-w-[500px]",children:[o.jsx("thead",{className:"bg-slate-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 text-left font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_PRODUCT}),o.jsx("th",{className:"p-2 text-right font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_QTY}),o.jsx("th",{className:"p-2 text-right font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_UNIT_PRICE}),o.jsx("th",{className:"p-2 text-right font-medium",children:p.INVOICE_ITEMS_TABLE_HEADER_TOTAL})]})}),o.jsx("tbody",{children:n.items.map(we=>o.jsxs("tr",{className:"border-b border-slate-100",children:[o.jsxs("td",{className:"p-2",children:[we.productName,we.description&&o.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:we.description})]}),o.jsxs("td",{className:"p-2 text-right",children:[(we.quantity||0).toLocaleString("bn-BD"),we.unit?` ${we.unit}`:""]}),o.jsx("td",{className:"p-2 text-right",children:(we.unitPrice||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}),o.jsx("td",{className:"p-2 text-right font-medium",children:(we.total||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})})]},we.id))})]})}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs("div",{className:"w-full sm:w-1/2 md:w-2/5 space-y-1 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-slate-600",children:[p.SUBTOTAL_LABEL,":"]})," ",o.jsxs("span",{children:[p.BDT_SYMBOL," ",(n.subtotal||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),(n.discountAmount||0)>0&&o.jsxs("div",{className:"flex justify-between text-red-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.DISCOUNT_LABEL," (",n.discountType==="percentage"?`${n.discountValue}%`:p.BDT_SYMBOL+n.discountValue,"):"]})," ",o.jsxs("span",{children:["- ",p.BDT_SYMBOL," ",(n.discountAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),(n.taxAmount||0)>0&&o.jsxs("div",{className:"flex justify-between text-green-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.TAX_LABEL," (",n.taxType==="percentage"?`${n.taxValue}%`:p.BDT_SYMBOL+n.taxValue,"):"]})," ",o.jsxs("span",{children:["+ ",p.BDT_SYMBOL," ",(n.taxAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),o.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-800 border-t pt-1 mt-1",children:[o.jsxs("span",{className:"text-slate-700",children:[p.GRAND_TOTAL_LABEL,":"]})," ",o.jsxs("span",{children:[p.BDT_SYMBOL," ",(n.totalAmount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),n.paymentsReceived&&n.paymentsReceived.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between text-green-600",children:[o.jsxs("span",{className:"text-slate-600",children:[p.PAID_AMOUNT_LABEL,":"]})," ",o.jsxs("span",{children:[p.BDT_SYMBOL," ",(te||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]}),o.jsxs("div",{className:`flex justify-between font-semibold ${Q>.009?"text-red-600":"text-green-600"}`,children:[o.jsxs("span",{className:"text-slate-600",children:[p.REMAINING_AMOUNT_LABEL,":"]})," ",o.jsxs("span",{children:[p.BDT_SYMBOL," ",(Q||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]})]})]})]})}),n.notes&&o.jsxs("div",{className:"mb-6 text-sm",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 mb-1",children:[p.NOTES_TERMS_LABEL,":"]}),o.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:n.notes})]}),n.paymentsReceived&&n.paymentsReceived.length>0&&o.jsxs("div",{className:"mb-6 text-sm",children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:p.PAYMENT_HISTORY_LABEL}),o.jsx("ul",{className:"space-y-1.5",children:n.paymentsReceived.map(we=>o.jsxs("li",{className:"p-2 bg-slate-50 rounded border border-slate-200 text-xs",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{children:[oe(we.paymentDate)," - ",p.BDT_SYMBOL," ",(we.amount||0).toLocaleString("bn-BD",{minimumFractionDigits:2})]}),o.jsx("span",{className:"text-slate-500",children:we.paymentMethod?F[we.paymentMethod]:""})]}),we.notes&&o.jsxs("p",{className:"text-slate-500 mt-0.5 text-[11px]",children:[p.NOTES_LABEL,": ",we.notes]})]},we.id))})]})]}),!d&&ne&&o.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 text-center no-print",children:o.jsxs("button",{onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow-sm flex items-center justify-center space-x-2 mx-auto",disabled:I,children:[o.jsx(q3,{className:"w-4 h-4"}),o.jsx("span",{children:p.RECORD_PAYMENT_BTN_LABEL})]})}),n.paymentStatus===Ht.PAID&&o.jsx("p",{className:"text-center text-green-600 text-sm mt-4 no-print",children:p.INVOICE_ALREADY_PAID_INFO}),n.paymentStatus===Ht.CANCELLED&&o.jsx("p",{className:"text-center text-slate-500 text-sm mt-4 no-print",children:p.INVOICE_CANCELLED_NO_PAYMENT}),d&&ne&&o.jsxs("form",{onSubmit:Ue,className:"mt-4 pt-4 border-t border-slate-200 space-y-3 text-sm no-print",children:[o.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:p.PAYMENT_RECORD_FOR_INVOICE_TITLE.replace("{invoiceNumber}",n.invoiceNumber)}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"paymentAmount",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[p.PAYMENT_AMOUNT_LABEL," (",p.REMAINING_AMOUNT_LABEL,": ",Q.toLocaleString("bn-BD"),")"]}),o.jsx("input",{type:"number",id:"paymentAmount",value:h,onChange:we=>_(we.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",min:"0.01",step:"0.01",max:Q,required:!0,disabled:I})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentDateModal",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PAYMENT_DATE_LABEL}),o.jsx("input",{type:"date",id:"paymentDateModal",value:b,onChange:we=>v(we.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",required:!0,disabled:I})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentMethod",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PAYMENT_METHOD_LABEL}),o.jsx("select",{id:"paymentMethod",value:y,onChange:we=>C(we.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 bg-white",disabled:I,children:xe.map(we=>o.jsx("option",{value:we,children:F[we]},we))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentNotes",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PAYMENT_NOTES_LABEL}),o.jsx("textarea",{id:"paymentNotes",value:L,onChange:we=>O(we.target.value),placeholder:p.PAYMENT_NOTES_PLACEHOLDER,rows:2,className:"w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",disabled:I})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-3 py-1.5 text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",disabled:I,children:p.CANCEL}),o.jsxs("button",{type:"submit",className:"px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-md shadow-sm flex items-center space-x-1 disabled:opacity-70",disabled:I,children:[o.jsx(Ri,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:I?p.LOADING:p.ADD_PAYMENT_BTN_LABEL})]})]})]}),o.jsxs("div",{className:"mt-6 pt-4 text-right border-t border-slate-200 flex justify-end space-x-3 no-print",children:[o.jsxs("button",{type:"button",onClick:ye,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md flex items-center space-x-2",children:[o.jsx(Y3,{className:"w-4 h-4"}),o.jsx("span",{children:p.PRINT_INVOICE_BTN})]}),o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-200 hover:bg-slate-300 rounded-lg",children:p.CLOSE_BTN})]})]})},g2=512*1024,$3=({initialData:t,onSave:e,onCancel:n})=>{const[s,r]=D.useState(""),[l,c]=D.useState(""),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[y,C]=D.useState(void 0),[L,O]=D.useState(!1),I=D.useRef(null);D.useEffect(()=>{t?(r(t.companyName),c(t.address||""),f(t.phone||""),_(t.email||""),v(t.taxId||""),C(t.logoBase64),O(t.isDefault||!1)):(r(""),c(""),f(""),_(""),v(""),C(void 0),O(!1))},[t]);const j=Q=>{var J;const ne=(J=Q.target.files)==null?void 0:J[0];if(ne){if(ne.size>g2){alert(`   ${g2/1024}KB     `),I.current&&(I.current.value="");return}const oe=new FileReader;oe.onloadend=()=>{C(oe.result)},oe.readAsDataURL(ne)}},R=()=>{C(void 0),I.current&&(I.current.value="")},U=async Q=>{if(Q.preventDefault(),!s.trim()){alert("  ");return}await e({companyName:s,address:l||void 0,phone:d||void 0,email:h||void 0,taxId:b||void 0,logoBase64:y,isDefault:L},t==null?void 0:t.id)},te="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm";return o.jsxs("form",{onSubmit:U,className:"space-y-4 p-1",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"companyName",className:"block text-xs font-medium text-slate-600 mb-0.5",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"companyName",value:s,onChange:Q=>r(Q.target.value),className:te,required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"companyPhone",className:"block text-xs font-medium text-slate-600 mb-0.5",children:" "}),o.jsx("input",{type:"tel",id:"companyPhone",value:d,onChange:Q=>f(Q.target.value),className:te})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"companyEmail",className:"block text-xs font-medium text-slate-600 mb-0.5",children:""}),o.jsx("input",{type:"email",id:"companyEmail",value:h,onChange:Q=>_(Q.target.value),className:te})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"companyAddress",className:"block text-xs font-medium text-slate-600 mb-0.5",children:""}),o.jsx("textarea",{id:"companyAddress",value:l,onChange:Q=>c(Q.target.value),rows:2,className:te})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"companyTaxId",className:"block text-xs font-medium text-slate-600 mb-0.5",children:"  / BIN"}),o.jsx("input",{type:"text",id:"companyTaxId",value:b,onChange:Q=>v(Q.target.value),className:te})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"  ()"}),o.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[o.jsx("span",{className:"inline-block h-16 w-16 rounded-md overflow-hidden bg-slate-100 ring-1 ring-slate-200",children:y?o.jsx("img",{src:y,alt:" ",className:"h-full w-full object-contain"}):o.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-300",children:o.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M19.5 6h-15A2.5 2.5 0 002 8.5v7A2.5 2.5 0 004.5 18h15a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0019.5 6zM4 8.5H20v7H4v-7zm6 5.5l-2-2.5h8l-2.5 3-1.5-1.5z"})})})}),o.jsxs("div",{className:"flex flex-col space-y-1.5",children:[o.jsxs("button",{type:"button",onClick:()=>{var Q;return(Q=I.current)==null?void 0:Q.click()},className:"inline-flex items-center px-2.5 py-1 border border-slate-300 text-xs font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50",children:[o.jsx(kp,{className:"w-4 h-4 mr-1.5 text-slate-500"}),y?"  ":"  "]}),o.jsx("input",{type:"file",ref:I,onChange:j,accept:"image/png, image/jpeg, image/svg+xml",className:"hidden"}),y&&o.jsxs("button",{type:"button",onClick:R,className:"inline-flex items-center px-2.5 py-1 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200",children:[o.jsx(xr,{className:"w-4 h-4 mr-1.5"})," "]})]})]})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("label",{htmlFor:"isDefaultCompany",className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",id:"isDefaultCompany",checked:L,onChange:Q=>O(Q.target.checked),className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),o.jsx("span",{className:"text-sm text-slate-700",children:"     "})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:t?p.SAVE_CHANGES:"  "})]})]})},W3=({isOpen:t,onClose:e,companyProfiles:n,onAddProfile:s,onUpdateProfile:r,onDeleteProfile:l})=>{const[c,d]=D.useState(!1),[f,h]=D.useState(null),_=y=>{h(y||null),d(!0)},b=async(y,C)=>{C?await r(C,y):await s(y),d(!1),h(null)},v=async y=>{console.log("Set default profile:",y);const C=n.find(L=>L.isDefault);C&&C.id!==y&&await r(C.id,{isDefault:!1}),await r(y,{isDefault:!0})};return t?o.jsx(Ya,{isOpen:t,onClose:e,title:p.MANAGE_COMPANY_PROFILES_MODAL_TITLE,size:"xl",children:o.jsx("div",{className:"p-1",children:c?o.jsx($3,{initialData:f,onSave:b,onCancel:()=>{d(!1),h(null)}}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 flex justify-end",children:o.jsxs("button",{onClick:()=>_(),className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-lg shadow-sm flex items-center space-x-2 text-sm",children:[o.jsx(Ri,{className:"w-5 h-5"}),o.jsx("span",{children:"    "})]})}),n.length===0?o.jsx("p",{className:"text-slate-500 text-center py-6",children:"      "}):o.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar-modal pr-2",children:n.map(y=>o.jsx("li",{className:"p-3 bg-white rounded-md border border-slate-200 shadow-sm hover:shadow-md group",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[o.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[o.jsxs("h3",{className:"text-md font-semibold text-slate-700 flex items-center",children:[y.companyName,y.isDefault&&o.jsxs("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full flex items-center",children:[o.jsx(Bh,{className:"w-3 h-3 mr-1"}),""]})]}),y.address&&o.jsx("p",{className:"text-xs text-slate-500",children:y.address}),y.phone&&o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",y.phone]}),y.email&&o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",y.email]})]}),o.jsxs("div",{className:"flex space-x-1.5 self-start sm:self-center opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[!y.isDefault&&o.jsxs("button",{onClick:()=>v(y.id),className:"p-1.5 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 text-xs flex items-center",title:"   ",children:[o.jsx(Bh,{className:"w-4 h-4 mr-1"}),"  "]}),o.jsx("button",{onClick:()=>_(y),className:"p-1.5 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50",title:" ",children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>l(y.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:" ",children:o.jsx(xr,{className:"w-4 h-4"})})]})]})},y.id))})]})})}):null},K3=({isOpen:t,onClose:e,products:n,currentUser:s,onAddNewProductClick:r,onEditProductClick:l,onAddProduct:c,onUpdateProduct:d,onDeleteProduct:f,onRestoreProduct:h,onAdjustStock:_,onViewStockHistory:b})=>{const[v,y]=D.useState("");if(!t)return null;const C=n.filter(L=>!L.isDeleted&&(L.name.toLowerCase().includes(v.toLowerCase())||L.description&&L.description.toLowerCase().includes(v.toLowerCase()))).sort((L,O)=>L.name.localeCompare(O.name,"bn-BD"));return o.jsx(Ya,{isOpen:t,onClose:e,title:p.MANAGE_PRODUCTS_MODAL_TITLE,size:"3xl",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[o.jsx("input",{type:"text",placeholder:p.SEARCH_PRODUCT_PLACEHOLDER,value:v,onChange:L=>y(L.target.value),className:"w-full sm:w-auto flex-grow px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500","aria-label":" "}),o.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-md transition duration-150 w-full sm:w-auto",children:[o.jsx(Ri,{className:"w-5 h-5"}),o.jsx("span",{children:p.ADD_NEW_PRODUCT_BTN})]})]}),o.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:C.length===0?o.jsx("p",{className:"text-slate-500 text-center py-10",children:v?`"${v}"      `:p.NO_PRODUCTS_FOUND}):o.jsx("ul",{className:"space-y-3",children:C.map(L=>o.jsxs("li",{className:"p-3 bg-white rounded-md border border-slate-200 flex items-start space-x-3 group",children:[L.productImage?o.jsx("img",{src:L.productImage,alt:L.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0 border border-slate-100"}):o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-md flex items-center justify-center text-slate-400 text-xs flex-shrink-0 border border-slate-200",children:" "}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("button",{onClick:()=>l(L),className:"font-medium text-slate-700 hover:text-teal-600 hover:underline text-left",title:`${p.EDIT_PRODUCT_BTN}: ${L.name}`,children:L.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:[": ",L.currentStock.toLocaleString("bn-BD")," ",L.stockUnit||p.DEFAULT_UNIT_PIECE,L.unitPrice!==void 0&&` | ${p.SALES_PRICE_LABEL.split(" ")[0]}: ${L.unitPrice.toLocaleString("bn-BD")}`,L.mrp!==void 0&&` | MRP: ${L.mrp.toLocaleString("bn-BD")}`,L.wholesalePrice!==void 0&&` | : ${L.wholesalePrice.toLocaleString("bn-BD")}`]}),L.description&&o.jsx("p",{className:"text-xs text-slate-400 truncate max-w-md",children:L.description})]}),o.jsx("div",{className:"flex-shrink-0 flex items-center space-x-1 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:o.jsx("button",{onClick:()=>l(L),className:"p-1.5 text-blue-600 hover:text-blue-700 rounded-full hover:bg-blue-50",title:p.EDIT_PRODUCT_BTN,"aria-label":p.EDIT_PRODUCT_BTN,children:o.jsx(hl,{className:"w-4 h-4"})})})]},L.id))})})]})})},X3=({isOpen:t,onClose:e,onSave:n,initialData:s,isGlobalPhoneticModeActive:r})=>{const[l,c]=D.useState(""),[d,f]=D.useState(""),[h,_]=D.useState(""),[b,v]=D.useState(""),[y,C]=D.useState(""),[L,O]=D.useState(void 0),[I,j]=D.useState(""),[R,U]=D.useState(0),[te,Q]=D.useState(Wi.find(Pe=>Pe==="")||Wi[0]||""),[ne,J]=D.useState(5),{addNotification:oe}=ur(),xe=D.useRef(null),F=D.useRef(null),H=D.useRef(null),re=D.useRef(null),K=D.useRef(null),Te=D.useRef({}),G=!!s;D.useEffect(()=>{t&&(s?(c(s.name),f(s.description||""),_(s.unitPrice!==void 0?s.unitPrice:""),v(s.mrp!==void 0?s.mrp:""),C(s.wholesalePrice!==void 0?s.wholesalePrice:""),O(s.productImage),j(s.unit||""),Q(s.stockUnit||Wi.find(Pe=>Pe==="")||Wi[0]||""),J(s.lowStockThreshold!==void 0?s.lowStockThreshold:5),U(0)):(c(""),f(""),_(""),v(""),C(""),O(void 0),j(""),U(0),Q(Wi.find(Pe=>Pe==="")||Wi[0]||""),J(5)),Te.current={},setTimeout(()=>{var Pe;return(Pe=xe.current)==null?void 0:Pe.focus()},50))},[t,s]);const he=Pe=>{var it;const nt=(it=Pe.target.files)==null?void 0:it[0];if(nt){if(nt.size>Fb){oe(p.PRODUCT_IMAGE_SIZE_TOO_LARGE,"error"),K.current&&(K.current.value="");return}const st=new FileReader;st.onloadend=()=>{O(st.result)},st.readAsDataURL(nt)}},ue=()=>{O(void 0),K.current&&(K.current.value="")},ae=(Pe,nt)=>it=>{const st=it.target.value;Te.current[nt]?(Pe(st),Te.current[nt]=!1):Pe(st)},V=(Pe,nt,it)=>st=>{if(!Te.current[nt]&&r&&st.key===" "){st.preventDefault();const yt=(it==null?void 0:it.current)||st.target,Pt=yt.value,Rt=yt.selectionStart||0;let Ft=Rt-1;for(;Ft>=0&&Pt[Ft]!==" ";)Ft--;Ft++;const Yt=Pt.substring(Ft,Rt);if(Yt.trim()){const Be=cr(Yt),We=Pt.substring(0,Ft)+Be+" "+Pt.substring(Rt);Pe(We),setTimeout(()=>{const Lt=Ft+Be.length+1;yt.setSelectionRange(Lt,Lt)},0)}else{const Be=Pt.substring(0,Rt)+" "+Pt.substring(Rt);Pe(Be),setTimeout(()=>{yt.setSelectionRange(Rt+1,Rt+1)},0)}}},ce=(Pe,nt,it)=>st=>{if(Te.current[nt]){Te.current[nt]=!1;return}if(r){st.preventDefault();const yt=st.clipboardData.getData("text"),Pt=cr(yt),Rt=(it==null?void 0:it.current)||st.target,Ft=Rt.selectionStart||0,Yt=Rt.selectionEnd||0,Be=Rt.value,We=Be.substring(0,Ft)+Pt+Be.substring(Yt);Pe(We),setTimeout(()=>{const Lt=Ft+Pt.length;Rt.setSelectionRange(Lt,Lt)},0)}},M=ae(c,"name"),k=V(c,"name",xe),Y=ce(c,"name",xe),Z=ae(f,"description"),fe=V(f,"description",F),Ne=ce(f,"description",F),de=ae(j,"unit"),ye=V(j,"unit",H),Ue=ce(j,"unit",H),we=ae(Q,"stockUnit"),Ze=V(Q,"stockUnit",re),Je=ce(Q,"stockUnit",re),Qe=Pe=>{if(Pe.preventDefault(),!l.trim()){oe(p.PRODUCT_NAME_REQUIRED,"error");return}const nt=h===""?void 0:parseFloat(String(h)),it=b===""?void 0:parseFloat(String(b)),st=y===""?void 0:parseFloat(String(y)),yt=R===""?0:parseFloat(String(R)),Pt=ne===""?5:parseFloat(String(ne));if(nt!==void 0&&(isNaN(nt)||nt<0)){oe(p.INVALID_UNIT_PRICE_ERROR,"error");return}if(it!==void 0&&(isNaN(it)||it<0)){oe(p.INVALID_MRP_ERROR,"error");return}if(st!==void 0&&(isNaN(st)||st<0)){oe(p.INVALID_WHOLESALE_PRICE_ERROR,"error");return}if(!G&&(isNaN(yt)||yt<0)){oe(p.INVALID_INITIAL_STOCK_ERROR,"error");return}if(isNaN(Pt)||Pt<0){oe(p.INVALID_LOW_STOCK_THRESHOLD_ERROR,"error");return}n({name:l.trim(),description:d.trim()||void 0,unitPrice:nt,mrp:it,wholesalePrice:st,productImage:L,unit:I.trim()||void 0},{initialStock:yt,stockUnit:te.trim()||Wi.find(Rt=>Rt==="")||Wi[0]||"",lowStockThreshold:Pt},s==null?void 0:s.id)},je=G?p.PRODUCT_FORM_MODAL_TITLE_EDIT:p.PRODUCT_FORM_MODAL_TITLE_ADD,ge=G?p.SAVE_CHANGES:p.SAVE_PRODUCT_BTN,Fe="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white";return o.jsx(Ya,{isOpen:t,onClose:e,title:je,size:"lg",children:o.jsxs("form",{onSubmit:Qe,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"product-name",className:"block text-xs font-medium text-slate-600 mb-0.5",children:[p.PRODUCT_NAME_LABEL," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{ref:xe,type:"text",id:"product-name",value:l,onChange:M,onKeyDown:k,onPaste:Y,className:Fe,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:p.PRODUCT_IMAGE_LABEL}),o.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[o.jsx("span",{className:"inline-block h-20 w-20 rounded-md overflow-hidden bg-slate-100 ring-1 ring-slate-200",children:L?o.jsx("img",{src:L,alt:p.PRODUCT_IMAGE_PREVIEW_ALT,className:"h-full w-full object-cover"}):o.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-300",children:o.jsx("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M19.5 6h-15A2.5 2.5 0 002 8.5v7A2.5 2.5 0 004.5 18h15a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0019.5 6zM4 8.5H20v7H4v-7zm6 5.5l-2-2.5h8l-2.5 3-1.5-1.5z"})})})}),o.jsxs("div",{className:"flex flex-col space-y-1.5",children:[o.jsxs("button",{type:"button",onClick:()=>{var Pe;return(Pe=K.current)==null?void 0:Pe.click()},className:"inline-flex items-center px-2.5 py-1 border border-slate-300 text-xs font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50",children:[o.jsx(kp,{className:"w-4 h-4 mr-1.5 text-slate-500"}),L?p.CHANGE_PRODUCT_IMAGE_BTN:p.UPLOAD_PRODUCT_IMAGE_BTN]}),o.jsx("input",{type:"file",ref:K,onChange:he,accept:"image/*",className:"hidden"}),L&&o.jsxs("button",{type:"button",onClick:ue,className:"inline-flex items-center px-2.5 py-1 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200",children:[o.jsx(xr,{className:"w-4 h-4 mr-1.5"}),p.REMOVE_PRODUCT_IMAGE_BTN]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"product-description",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PRODUCT_DESCRIPTION_LABEL}),o.jsx("textarea",{ref:F,id:"product-description",value:d,onChange:Z,onKeyDown:fe,onPaste:Ne,rows:2,className:Fe})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"product-sales-price",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.SALES_PRICE_LABEL}),o.jsx("input",{type:"number",id:"product-sales-price",value:h,onChange:Pe=>_(Pe.target.value),min:"0",step:"any",className:Fe})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"product-mrp",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.MRP_LABEL}),o.jsx("input",{type:"number",id:"product-mrp",value:b,onChange:Pe=>v(Pe.target.value),min:"0",step:"any",className:Fe})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"product-wholesale-price",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.WHOLESALE_PRICE_LABEL}),o.jsx("input",{type:"number",id:"product-wholesale-price",value:y,onChange:Pe=>C(Pe.target.value),min:"0",step:"any",className:Fe})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"product-unit",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.PRODUCT_UNIT_LABEL}),o.jsx("input",{ref:H,type:"text",id:"product-unit",value:I,onChange:de,onKeyDown:ye,onPaste:Ue,placeholder:p.PRODUCT_UNIT_PLACEHOLDER,className:Fe,list:"product-common-units"}),o.jsx("datalist",{id:"product-common-units",children:Wi.map(Pe=>o.jsx("option",{value:Pe},`prod-unit-${Pe}`))})]}),!G&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"initial-stock",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.INITIAL_STOCK_LABEL}),o.jsx("input",{type:"number",id:"initial-stock",value:R,onChange:Pe=>U(Pe.target.value),min:"0",step:"any",className:Fe,disabled:G})]}),G&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"current-stock-display",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.CURRENT_STOCK_LABEL}),o.jsx("input",{type:"text",id:"current-stock-display",value:`${(s==null?void 0:s.currentStock.toLocaleString("bn-BD"))||"0"} ${(s==null?void 0:s.stockUnit)||p.DEFAULT_UNIT_PIECE}`,className:"w-full px-3 py-1.5 border border-slate-200 bg-slate-100 text-slate-500 rounded-md text-sm cursor-not-allowed",disabled:!0}),o.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"   ' '   "})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"stock-unit",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.STOCK_UNIT_LABEL}),o.jsx("input",{ref:re,type:"text",id:"stock-unit",value:te,onChange:we,onKeyDown:Ze,onPaste:Je,placeholder:p.PRODUCT_UNIT_PLACEHOLDER,className:Fe,list:"stock-common-units"}),o.jsx("datalist",{id:"stock-common-units",children:Wi.map(Pe=>o.jsx("option",{value:Pe},`stock-unit-${Pe}`))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"low-stock-threshold",className:"block text-xs font-medium text-slate-600 mb-0.5",children:p.LOW_STOCK_THRESHOLD_LABEL}),o.jsx("input",{type:"number",id:"low-stock-threshold",value:ne,onChange:Pe=>J(Pe.target.value),min:"0",step:"any",className:Fe})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:ge})]})]})})},J3=({isOpen:t,onClose:e,products:n,invoices:s})=>{const[r,l]=D.useState(""),[c,d]=D.useState("all"),[f,h]=D.useState(!1),_=D.useRef(null),b=D.useRef(null),{addNotification:v}=ur();D.useEffect(()=>{t||(l(""),d("all"),h(!1))},[t]);const y=(R,U)=>R<=0?{text:p.STOCK_STATUS_OUT_OF_STOCK,colorClass:"text-red-600",chipColorClass:"bg-red-100 text-red-700"}:U!==void 0&&R<=U?{text:p.STOCK_STATUS_LOW_STOCK,colorClass:"text-orange-600",chipColorClass:"bg-orange-100 text-orange-700"}:{text:p.STOCK_STATUS_IN_STOCK,colorClass:"text-green-600",chipColorClass:"bg-green-100 text-green-700"},C=D.useMemo(()=>{const R={};return n.forEach(U=>R[U.id]=0),s.forEach(U=>{U.invoiceType===Sa.SALES&&!U.isDeleted&&U.paymentStatus!==Ht.PAID&&U.paymentStatus!==Ht.CANCELLED&&U.items.forEach(te=>{const Q=n.find(ne=>ne.id===te.originalProductId||ne.name===te.productName);Q&&(R[Q.id]=(R[Q.id]||0)+te.quantity)})}),R},[s,n]),L=D.useMemo(()=>n.filter(R=>!R.isDeleted).map(R=>{const U=C[R.id]||0,te=R.currentStock-U,Q=y(R.currentStock,R.lowStockThreshold),ne=y(te,R.lowStockThreshold);return{...R,committedStockForSales:U,availableForSale:te,currentStockStatusInfo:Q,availableForSaleStatusInfo:ne}}).filter(R=>{const U=r.toLowerCase(),te=R.name.toLowerCase().includes(U),Q=R.description&&R.description.toLowerCase().includes(U);let ne=!0;return c!=="all"&&(c==="in_stock"?ne=R.currentStockStatusInfo.text===p.STOCK_STATUS_IN_STOCK&&R.availableForSaleStatusInfo.text===p.STOCK_STATUS_IN_STOCK:c==="low_stock"?ne=R.currentStockStatusInfo.text===p.STOCK_STATUS_LOW_STOCK||R.availableForSaleStatusInfo.text===p.STOCK_STATUS_LOW_STOCK:c==="out_of_stock"&&(ne=R.currentStockStatusInfo.text===p.STOCK_STATUS_OUT_OF_STOCK||R.availableForSaleStatusInfo.text===p.STOCK_STATUS_OUT_OF_STOCK)),(te||Q)&&ne}).sort((R,U)=>R.name.localeCompare(U.name,"bn-BD")),[n,r,c,C]);D.useEffect(()=>{const R=U=>{_.current&&!_.current.contains(U.target)&&b.current&&!b.current.contains(U.target)&&h(!1)};return f&&document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[f]);const O=(R,U,te)=>{const Q=new Blob([R],{type:te}),ne=document.createElement("a");ne.href=URL.createObjectURL(Q),ne.download=U,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(ne.href)},I=()=>{if(L.length===0){v(p.NO_PRODUCTS_FOR_REPORT,"warning");return}const U=[[p.SERIAL_NO_COLUMN,p.COLUMN_PRODUCT_NAME,p.COLUMN_CURRENT_STOCK,p.COLUMN_COMMITTED_FOR_SALES,p.COLUMN_AVAILABLE_FOR_SALE,p.COLUMN_STOCK_UNIT,p.COLUMN_LOW_STOCK_THRESHOLD,`${p.COLUMN_CURRENT_STOCK} (${p.COLUMN_STOCK_STATUS})`,`${p.COLUMN_AVAILABLE_FOR_SALE} (${p.COLUMN_STOCK_STATUS})`].join(",")];L.forEach((Q,ne)=>{U.push([(ne+1).toLocaleString("bn-BD"),`"${Q.name.replace(/"/g,'""')}"`,Q.currentStock.toLocaleString("bn-BD"),Q.committedStockForSales.toLocaleString("bn-BD"),Q.availableForSale.toLocaleString("bn-BD"),Q.stockUnit||p.DEFAULT_UNIT_PIECE,(Q.lowStockThreshold||0).toLocaleString("bn-BD"),Q.currentStockStatusInfo.text,Q.availableForSaleStatusInfo.text].join(","))});const te="\uFEFF"+U.join(`
`);O(te,"Stock_Report.csv","text/csv;charset=utf-8;"),v("CSV    ","success")},j=()=>{if(L.length===0){v(p.NO_PRODUCTS_FOR_REPORT,"warning");return}const R=new yn({orientation:"landscape"});R.addFont("https://fonts.gstatic.com/s/notosansbengali/v21/Cn-SJs6VTz3I6DdhgmkAaqAPU79fP_7D80y2z3g.ttf","Noto Sans Bengali","normal"),R.setFont("Noto Sans Bengali"),R.setFontSize(16),R.text(p.STOCK_REPORT_MODAL_TITLE,14,18),R.setFontSize(10),R.setTextColor(100),R.text(`${p.REPORT_FOR_PERIOD} ${new Date().toLocaleDateString("bn-BD")}`,14,25);const U=[[p.SERIAL_NO_COLUMN,p.COLUMN_PRODUCT_NAME,p.COLUMN_CURRENT_STOCK,p.COLUMN_COMMITTED_FOR_SALES,p.COLUMN_AVAILABLE_FOR_SALE,p.COLUMN_STOCK_UNIT,p.COLUMN_LOW_STOCK_THRESHOLD,`${p.COLUMN_CURRENT_STOCK.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`,`${p.COLUMN_AVAILABLE_FOR_SALE.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`]],te=L.map((Q,ne)=>[(ne+1).toLocaleString("bn-BD"),Q.name,Q.currentStock.toLocaleString("bn-BD"),Q.committedStockForSales.toLocaleString("bn-BD"),Q.availableForSale.toLocaleString("bn-BD"),Q.stockUnit||p.DEFAULT_UNIT_PIECE,(Q.lowStockThreshold||0).toLocaleString("bn-BD"),Q.currentStockStatusInfo.text,Q.availableForSaleStatusInfo.text]);X_(R,{startY:30,head:U,body:te,theme:"striped",headStyles:{fillColor:[22,160,133],font:"Noto Sans Bengali",fontStyle:"bold",fontSize:7},bodyStyles:{font:"Noto Sans Bengali",fontSize:7},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{halign:"center",cellWidth:8},1:{cellWidth:"auto"},2:{halign:"right",cellWidth:18},3:{halign:"right",cellWidth:18},4:{halign:"right",cellWidth:18},5:{cellWidth:12},6:{halign:"right",cellWidth:18},7:{halign:"center",cellWidth:22},8:{halign:"center",cellWidth:22}},didDrawPage:Q=>{let ne=" "+R.getNumberOfPages();R.setFontSize(10),R.setFont("Noto Sans Bengali","normal"),R.text(ne,Q.settings.margin.left,R.internal.pageSize.height-10)}}),R.save("Stock_Report.pdf"),v("PDF    ","success")};return o.jsx(Ya,{isOpen:t,onClose:e,title:p.STOCK_REPORT_MODAL_TITLE,size:"3xl",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200 flex flex-col sm:flex-row justify-between items-center gap-3",children:[o.jsx("input",{type:"text",placeholder:p.SEARCH_PRODUCTS_PLACEHOLDER,value:r,onChange:R=>l(R.target.value),className:"w-full sm:flex-grow px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm"}),o.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[180px]",children:[o.jsxs("button",{ref:b,type:"button",onClick:()=>h(R=>!R),className:"w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm text-sm bg-white text-slate-700 hover:border-slate-400 focus:border-teal-500 focus:ring-1 focus:ring-teal-500","aria-haspopup":"listbox","aria-expanded":f,children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(h_,{className:"w-4 h-4 mr-2 text-slate-400"}),c==="all"?p.FILTER_BY_STOCK_STATUS:y(c==="in_stock"?10:c==="low_stock"?1:0,c==="low_stock"?2:void 0).text]}),o.jsx(zh,{className:`w-4 h-4 transition-transform ${f?"rotate-180":""} text-slate-400`})]}),f&&o.jsx("div",{ref:_,className:"absolute z-20 mt-1 w-full bg-white border border-slate-300 rounded-md shadow-lg max-h-60 overflow-y-auto custom-scrollbar-modal",role:"listbox",children:["all","in_stock","low_stock","out_of_stock"].map(R=>o.jsx("button",{onClick:()=>{d(R),h(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",role:"option","aria-selected":c===R,children:R==="all"?p.ALL_PRODUCTS_FILTER:y(R==="in_stock"?10:R==="low_stock"?1:0,R==="low_stock"?2:void 0).text},R))})]})]}),o.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:L.length===0?o.jsx("p",{className:"text-slate-500 text-center py-10",children:p.NO_PRODUCTS_FOR_REPORT}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[o.jsx("thead",{className:"bg-slate-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.SERIAL_NO_COLUMN}),o.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.COLUMN_PRODUCT_NAME}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_CURRENT_STOCK}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_COMMITTED_FOR_SALES}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_AVAILABLE_FOR_SALE}),o.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.COLUMN_STOCK_UNIT}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.COLUMN_LOW_STOCK_THRESHOLD}),o.jsx("th",{className:"px-2 py-2 text-center font-medium text-slate-600",children:`${p.COLUMN_CURRENT_STOCK.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`}),o.jsx("th",{className:"px-2 py-2 text-center font-medium text-slate-600",children:`${p.COLUMN_AVAILABLE_FOR_SALE.split(" ")[0]} ${p.COLUMN_STOCK_STATUS}`})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:L.map((R,U)=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-500",children:(U+1).toLocaleString("bn-BD")}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-medium text-slate-700",children:R.name}),o.jsx("td",{className:`px-2 py-2 whitespace-nowrap text-right font-semibold ${R.currentStockStatusInfo.colorClass}`,children:R.currentStock.toLocaleString("bn-BD")}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-slate-500",children:R.committedStockForSales.toLocaleString("bn-BD")}),o.jsx("td",{className:`px-2 py-2 whitespace-nowrap text-right font-semibold ${R.availableForSaleStatusInfo.colorClass}`,children:R.availableForSale.toLocaleString("bn-BD")}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-500",children:R.stockUnit||p.DEFAULT_UNIT_PIECE}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-slate-500",children:(R.lowStockThreshold||0).toLocaleString("bn-BD")}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:o.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded-full ${R.currentStockStatusInfo.chipColorClass}`,children:R.currentStockStatusInfo.text})}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:o.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded-full ${R.availableForSaleStatusInfo.chipColorClass}`,children:R.availableForSaleStatusInfo.text})})]},R.id))})]})})}),o.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[L.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:I,className:"flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[o.jsx(sf,{className:"w-4 h-4"})," ",o.jsx("span",{children:"CSV"})]}),o.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500",children:[o.jsx(sf,{className:"w-4 h-4"})," ",o.jsx("span",{children:"PDF"})]})]}),o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-500 hover:bg-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CLOSE_BTN})]})]})})},Z3=({isOpen:t,onClose:e,currentSettings:n,onSaveSettings:s})=>{const[r,l]=D.useState(n.model),[c,d]=D.useState(n.temperature??Bo.temperature),[f,h]=D.useState(n.topK??Bo.topK),[_,b]=D.useState(n.topP??Bo.topP),{addNotification:v}=ur();D.useEffect(()=>{t&&(l(n.model),d(n.temperature??Bo.temperature),h(n.topK??Bo.topK),b(n.topP??Bo.topP))},[t,n]);const y=()=>{s({model:r,temperature:Number(c),topK:Number(f),topP:Number(_)}),v(p.GEMINI_SETTINGS_SAVED_SUCCESS,"success"),e()},C=()=>{l(Bo.model),d(Bo.temperature),h(Bo.topK),b(Bo.topP),v(p.GEMINI_SETTINGS_RESET_SUCCESS,"info")},L="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",O="appearance-none w-full h-1.5 bg-slate-200 rounded-full outline-none slider-thumb",I="cursor-pointer";return o.jsxs(Ya,{isOpen:t,onClose:e,title:p.GEMINI_AI_SETTINGS_MODAL_TITLE,size:"lg",children:[o.jsxs("div",{className:"space-y-6 p-1",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gemini-model",className:"block text-sm font-medium text-slate-700 mb-1",children:p.GEMINI_MODEL_LABEL}),o.jsx("select",{id:"gemini-model",value:r,onChange:j=>l(j.target.value),className:L,children:o.jsx("option",{value:"gemini-2.5-flash-preview-04-17",children:"gemini-2.5-flash-preview-04-17"})})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"gemini-temperature",className:"block text-sm font-medium text-slate-700 mb-1",children:[p.GEMINI_TEMPERATURE_LABEL,": ",o.jsx("span",{className:"font-mono text-teal-600",children:c.toFixed(2)})]}),o.jsx("input",{type:"range",id:"gemini-temperature",min:"0",max:"1",step:"0.01",value:c,onChange:j=>d(parseFloat(j.target.value)),className:`${O} ${I}`})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"gemini-topk",className:"block text-sm font-medium text-slate-700 mb-1",children:[p.GEMINI_TOP_K_LABEL,": ",o.jsx("span",{className:"font-mono text-teal-600",children:f})]}),o.jsx("input",{type:"number",id:"gemini-topk",min:"1",max:"100",step:"1",value:f,onChange:j=>h(parseInt(j.target.value,10)),className:L})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"gemini-topp",className:"block text-sm font-medium text-slate-700 mb-1",children:[p.GEMINI_TOP_P_LABEL,": ",o.jsx("span",{className:"font-mono text-teal-600",children:_.toFixed(2)})]}),o.jsx("input",{type:"range",id:"gemini-topp",min:"0",max:"1",step:"0.01",value:_,onChange:j=>b(parseFloat(j.target.value)),className:`${O} ${I}`})]}),o.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-200",children:[o.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-orange-700 bg-orange-100 hover:bg-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",children:p.RESET_GEMINI_SETTINGS_BTN}),o.jsxs("div",{className:"space-x-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",children:p.CANCEL}),o.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:p.SAVE_GEMINI_SETTINGS_BTN})]})]})]}),o.jsx("style",{children:`
        /* Custom styles for slider thumbs - WebKit */
        input[type=range].slider-thumb::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 16px;
          height: 16px;
          background: #14b8a6; /* teal-500 */
          cursor: pointer;
          border-radius: 50%;
          margin-top: -6px; /* Adjust to center thumb on track */
        }

        /* Custom styles for slider thumbs - Mozilla */
        input[type=range].slider-thumb::-moz-range-thumb {
          width: 16px;
          height: 16px;
          background: #14b8a6; /* teal-500 */
          cursor: pointer;
          border-radius: 50%;
          border: none;
        }
      `})]})},Q3=({isOpen:t,onClose:e})=>{const{currentUser:n,updateCurrentUserData:s,isAuthLoading:r}=Nc(),{addNotification:l}=ur(),[c,d]=D.useState(!0),[f,h]=D.useState(!0);D.useEffect(()=>{t&&n&&(d(n.enableSchemaCheckOnStartup??!0),h(n.enableDataFetchOnStartup??!0))},[t,n]);const _=async()=>{if(!n)return;const C={};if(c!==(n.enableSchemaCheckOnStartup??!0)&&(C.enableSchemaCheckOnStartup=c),f!==(n.enableDataFetchOnStartup??!0)&&(C.enableDataFetchOnStartup=f),Object.keys(C).length>0)try{await s(C),l(p.ADMIN_SETTINGS_SAVED_SUCCESS,"success")}catch(L){l(L.message||p.AUTH_ERROR_GENERAL,"error")}e()},b="flex items-center space-x-3 cursor-pointer",v="form-checkbox h-5 w-5 text-teal-600 border-slate-300 rounded focus:ring-teal-500 cursor-pointer",y="text-xs text-slate-500 ml-8 mt-1";return o.jsx(Ya,{isOpen:t,onClose:e,title:p.APP_ADMIN_SETTINGS_MODAL_TITLE,size:"lg",children:o.jsxs("div",{className:"space-y-6 p-1",children:[o.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[o.jsxs("label",{className:b,children:[o.jsx("input",{type:"checkbox",checked:c,onChange:C=>d(C.target.checked),className:v}),o.jsx("span",{className:"text-sm font-medium text-slate-700",children:p.ENABLE_SCHEMA_CHECK_LABEL})]}),o.jsx("p",{className:y,children:p.ENABLE_SCHEMA_CHECK_DESCRIPTION})]}),o.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[o.jsxs("label",{className:b,children:[o.jsx("input",{type:"checkbox",checked:f,onChange:C=>h(C.target.checked),className:v}),o.jsx("span",{className:"text-sm font-medium text-slate-700",children:p.ENABLE_DATA_FETCH_LABEL})]}),o.jsx("p",{className:y,children:p.ENABLE_DATA_FETCH_DESCRIPTION})]}),o.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-slate-200 space-x-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400",disabled:r,children:p.CANCEL}),o.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",disabled:r,children:r?p.LOADING:p.SAVE_CHANGES})]})]})})},eR=({isOpen:t,onClose:e,logs:n,onClearLogs:s,isAIAssistantListening:r,isAICommandProcessing:l,onToggleAIAssistantListening:c,currentAILanguage:d,onSetAILanguage:f,currentAIScope:h,onSetAIScope:_,onSendCommand:b,aiVoiceReplayEnabled:v,onSetAiVoiceReplayEnabled:y,isAdminUser:C})=>{var ue;const L=D.useRef(null),[O,I]=D.useState(!1),j=D.useRef(null),R=D.useRef(null),[U,te]=D.useState(""),Q=D.useRef(null),ne=yp.useMemo(()=>[...n].sort((ae,V)=>new Date(V.timestamp).getTime()-new Date(ae.timestamp).getTime()),[n]);D.useEffect(()=>{var ae;t&&L.current&&(L.current.scrollTop=0),t&&((ae=Q.current)==null||ae.focus())},[ne,t]),D.useEffect(()=>{const ae=V=>{j.current&&!j.current.contains(V.target)&&R.current&&!R.current.contains(V.target)&&I(!1)};return O&&document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[O]);const J=ae=>{try{return new Date(ae).toLocaleString("bn-BD",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return ae}},oe=ae=>{switch(ae){case"command":return"bg-sky-50 border-sky-200";case"response":return"bg-teal-50 border-teal-200";case"error":return"bg-red-50 border-red-200";default:return"bg-slate-50 border-slate-200"}},xe=ae=>{switch(ae){case"command":return p.AI_LOG_TYPE_COMMAND;case"response":return p.AI_LOG_TYPE_RESPONSE;case"error":return p.AI_LOG_TYPE_ERROR;default:return ae}};let F=p.AI_ASSISTANT_BUTTON_LABEL,H=o.jsx(Lh,{className:"w-4 h-4"}),re="bg-cyan-500 hover:bg-cyan-600",K="";l?(F=p.AI_ASSISTANT_PROCESSING,H=o.jsx(xh,{className:"w-4 h-4 animate-spin"}),re="bg-purple-500 hover:bg-purple-600",K="animate-pulse"):r&&(F=p.AI_ASSISTANT_LISTENING,H=o.jsx(Lh,{className:"w-4 h-4"}),re="bg-red-500 hover:bg-red-600",K="animate-pulse");const Te="text-white hover:bg-opacity-80 font-medium py-2 px-3 rounded-md transition duration-150 flex items-center space-x-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-opacity-75",G=()=>{const ae=U.trim();ae&&(b(ae,d),te(""))},he=C?o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:R,onClick:()=>I(ae=>!ae),className:"text-xs text-slate-500 hover:text-slate-700 bg-slate-100 hover:bg-slate-200 px-2.5 py-1 rounded-md flex items-center space-x-1","aria-haspopup":"true","aria-expanded":O,title:"  ",children:[o.jsx("span",{children:((ue=j0.find(ae=>ae.code===d))==null?void 0:ue.label)||d}),o.jsx(zh,{className:"w-3 h-3"})]}),O&&o.jsx("div",{ref:j,className:"absolute right-0 mt-1 w-32 bg-white border border-slate-300 rounded-md shadow-lg z-10 py-1",children:j0.map(ae=>o.jsx("button",{onClick:()=>{f(ae.code),I(!1)},className:`block w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 ${d===ae.code?"bg-teal-50 text-teal-700 font-medium":"text-slate-700"}`,children:ae.label},ae.code))})]}):null;return o.jsx(Ya,{isOpen:t,onClose:e,title:p.AI_LOG_MODAL_TITLE,size:"2xl",headerActions:he,children:o.jsxs("div",{className:"flex flex-col h-[70vh]",children:[C&&o.jsxs("div",{className:"mb-3 p-3 border border-slate-200 rounded-md bg-slate-50",children:[o.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1.5",children:p.AI_ASSISTANT_SCOPE_LABEL}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[o.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"ai-scope",value:"app",checked:h==="app",onChange:()=>_("app"),className:"form-radio h-3.5 w-3.5 text-teal-600 focus:ring-teal-500 border-slate-400"}),o.jsx("span",{className:"text-xs text-slate-700",children:p.AI_ASSISTANT_SCOPE_APP_SPECIFIC})]}),o.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"ai-scope",value:"global",checked:h==="global",onChange:()=>_("global"),className:"form-radio h-3.5 w-3.5 text-teal-600 focus:ring-teal-500 border-slate-400"}),o.jsx("span",{className:"text-xs text-slate-700",children:p.AI_ASSISTANT_SCOPE_GLOBAL})]})]})]}),o.jsx("div",{ref:L,className:"flex-grow overflow-y-auto space-y-3 p-2 bg-slate-100 rounded-md custom-scrollbar-modal mb-4 min-h-20",children:ne.length===0?o.jsx("p",{className:"text-center text-slate-500 py-10",children:p.AI_LOG_NO_LOGS}):ne.map(ae=>o.jsxs("div",{className:`p-3 rounded-md border ${oe(ae.type)} shadow-sm text-sm`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-semibold text-slate-600",children:xe(ae.type)}),o.jsx("span",{className:"text-xs text-slate-400",children:J(ae.timestamp)})]}),ae.commandText&&o.jsxs("p",{className:"text-slate-700",children:[o.jsxs("strong",{className:"text-slate-500",children:[p.AI_LOG_USER_COMMAND_LABEL,":"]})," ",ae.commandText]}),ae.type==="response"&&ae.responseText&&o.jsxs("p",{className:"mt-1 text-slate-800",children:[o.jsxs("strong",{className:"text-slate-500",children:[p.AI_LOG_AI_RESPONSE_LABEL,":"]})," ",ae.responseText]}),ae.type==="response"&&ae.parsedIntent&&o.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[o.jsxs("strong",{className:"text-slate-500",children:[p.AI_LOG_INTENT_LABEL,":"]})," ",ae.parsedIntent]}),ae.type==="response"&&ae.actionDetails&&Object.keys(ae.actionDetails).length>0&&o.jsxs("details",{className:"mt-1 text-xs",children:[o.jsx("summary",{className:"cursor-pointer text-slate-500 hover:text-slate-700",children:p.AI_LOG_ACTION_DETAILS_LABEL}),o.jsx("pre",{className:"bg-slate-200 p-1.5 rounded text-slate-600 text-[11px] overflow-x-auto custom-scrollbar-modal",children:JSON.stringify(ae.actionDetails,null,2)})]}),ae.type==="error"&&ae.errorMessage&&o.jsxs("p",{className:"mt-1 text-red-700",children:[o.jsxs("strong",{className:"text-red-500",children:[p.AI_LOG_TYPE_ERROR,":"]})," ",ae.errorMessage]}),ae.rawAIResponse&&o.jsxs("details",{className:"mt-1 text-xs",children:[o.jsx("summary",{className:"cursor-pointer text-slate-500 hover:text-slate-700",children:p.AI_LOG_RAW_RESPONSE_LABEL}),o.jsx("pre",{className:"bg-slate-200 p-1.5 rounded text-slate-600 text-[11px] overflow-x-auto custom-scrollbar-modal",children:ae.rawAIResponse})]})]},ae.id))}),o.jsx("div",{className:"mb-2",children:o.jsx("textarea",{ref:Q,value:U,onChange:ae=>te(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),G())},placeholder:"AI      ...",className:"w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none text-sm min-h-[40px]",rows:1,"aria-label":"  ",disabled:l})}),o.jsxs("div",{className:"pt-3 border-t border-slate-200 flex flex-wrap justify-between items-center gap-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{onClick:c,className:`${Te} ${re} ${K} focus:ring-current`,title:p.AI_ASSISTANT_BUTTON_LABEL,"aria-label":p.AI_ASSISTANT_BUTTON_LABEL,disabled:!("SpeechRecognition"in window||"webkitSpeechRecognition"in window)||l&&!r,children:[H,o.jsx("span",{children:F})]}),o.jsxs("button",{onClick:G,className:`${Te} bg-teal-600 hover:bg-teal-700 focus:ring-teal-400`,disabled:!U.trim()||l,title:" ","aria-label":" ",children:[o.jsx(e5,{className:"w-4 h-4"}),o.jsx("span",{children:""})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[C&&o.jsxs("div",{className:"flex items-center space-x-1.5",children:[o.jsx("input",{type:"checkbox",id:"ai-voice-replay-toggle-modal",className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-400 rounded focus:ring-teal-500 cursor-pointer",checked:v,onChange:ae=>y(ae.target.checked)}),o.jsx("label",{htmlFor:"ai-voice-replay-toggle-modal",className:"text-xs text-slate-600 cursor-pointer",children:p.AI_VOICE_REPLAY_ENABLE_LABEL})]}),o.jsxs("button",{onClick:s,disabled:n.length===0,className:"flex items-center space-x-1.5 bg-red-500 hover:bg-red-600 text-white text-xs font-medium py-2 px-3 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-400 disabled:opacity-50",children:[o.jsx(xr,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:p.AI_LOG_CLEAR_BTN})]})]})]})]})})},tR=({className:t})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 ${t}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})}),nR=({isOpen:t,onClose:e,bankAccounts:n,onOpenBankAccountForm:s,onDeleteBankAccount:r,onSetDefaultBankAccount:l})=>{const[c,d]=D.useState(""),[f,h]=D.useState(!1),{activeAccounts:_,deletedAccounts:b}=D.useMemo(()=>{const O=[],I=[],j=c.toLowerCase();return n.forEach(R=>{const U=R.accountName.toLowerCase().includes(j),te=R.accountNumber&&R.accountNumber.toLowerCase().includes(j),Q=R.bankName&&R.bankName.toLowerCase().includes(j);(U||te||Q)&&(R.isDeleted?I.push(R):O.push(R))}),O.sort((R,U)=>R.accountName.localeCompare(U.accountName,"bn-BD")),I.sort((R,U)=>new Date(U.deletedAt||U.lastModified).getTime()-new Date(R.deletedAt||R.lastModified).getTime()),{activeAccounts:O,deletedAccounts:I}},[n,c]),v=f?[..._,...b]:_,y=b.length,C=(O,I="BDT")=>`${p.BDT_SYMBOL} ${O.toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}`,L=O=>T2[O]||O;return o.jsx(Ya,{isOpen:t,onClose:e,title:p.MANAGE_BANK_ACCOUNTS_MODAL_TITLE,size:"xl",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[o.jsx("input",{type:"text",placeholder:" ,     ...",value:c,onChange:O=>d(O.target.value),className:"w-full sm:w-auto flex-grow px-4 py-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm"}),o.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[y>0&&o.jsx("button",{onClick:()=>h(!f),className:"text-xs text-teal-600 hover:text-teal-700 underline focus:outline-none py-2 px-2 whitespace-nowrap",children:f?p.HIDE_DELETED_ITEMS_BTN:`${p.SHOW_DELETED_ITEMS_BTN} (${y})`}),o.jsxs("button",{onClick:()=>s(),className:"flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2.5 px-4 rounded-lg shadow-md transition duration-150 w-full sm:w-auto",children:[o.jsx(Ri,{className:"w-5 h-5"}),o.jsx("span",{children:p.ADD_NEW_BANK_ACCOUNT_BTN})]})]})]}),o.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:v.length===0?o.jsx("p",{className:"text-slate-500 text-center py-10",children:c?`"${c}"     `:f&&y===0?"   ":p.NO_BANK_ACCOUNTS_FOUND}):o.jsx("ul",{className:"space-y-3",children:v.map(O=>o.jsx("li",{className:`p-3 bg-white rounded-md border border-slate-200 group hover:shadow-sm transition-shadow ${O.isDeleted?"opacity-70":""}`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start",children:[o.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[o.jsxs("h3",{className:`text-md font-semibold flex items-center ${O.isDeleted?"text-slate-500 line-through":"text-slate-700"}`,children:[O.accountName,O.isDefault&&!O.isDeleted&&o.jsxs("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full flex items-center",children:[o.jsx(Bh,{className:"w-3 h-3 mr-1"}),""]})]}),o.jsxs("p",{className:"text-xs text-slate-500",children:[L(O.accountType),O.bankName&&` - ${O.bankName}`,O.accountNumber&&` (***${O.accountNumber.slice(-4)})`]}),o.jsxs("p",{className:`text-sm font-medium ${O.initialBalance>=0?"text-green-600":"text-red-600"}`,children:[" : ",C(O.initialBalance,O.currency)]}),O.isDeleted&&O.deletedAt&&o.jsxs("p",{className:"text-xs text-orange-500 mt-1",children:[" : ",new Date(O.deletedAt).toLocaleDateString("bn-BD")]})]}),o.jsxs("div",{className:"flex space-x-1 self-start sm:self-center opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:[!O.isDefault&&!O.isDeleted&&o.jsxs("button",{onClick:()=>l(O.id),className:"p-1.5 text-green-600 hover:text-green-700 rounded-full hover:bg-green-50 text-xs flex items-center",title:"   ",children:[o.jsx(tR,{className:"w-3.5 h-3.5 mr-0.5"}),"  "]}),!O.isDeleted&&o.jsx("button",{onClick:()=>s(O),className:"p-1.5 text-blue-600 hover:text-blue-700 rounded-full hover:bg-blue-50",title:p.EDIT_BANK_ACCOUNT_BTN,children:o.jsx(hl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>r(O.id),className:"p-1.5 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50",title:O.isDeleted?"  ( )":p.DELETE_BANK_ACCOUNT_BTN,disabled:O.isDeleted,children:o.jsx(xr,{className:"w-4 h-4"})})]})]})},O.id))})})]})})},sR=({isOpen:t,onClose:e,onSave:n,initialData:s})=>{const[r,l]=D.useState(""),[c,d]=D.useState(""),[f,h]=D.useState(""),[_,b]=D.useState(""),[v,y]=D.useState(""),[C,L]=D.useState(""),[O,I]=D.useState(""),[j,R]=D.useState("BDT"),[U,te]=D.useState(""),[Q,ne]=D.useState(!1),{addNotification:J}=ur(),oe=D.useRef(null),xe=!!s;D.useEffect(()=>{t&&(s?(l(s.accountName),d(s.accountNumber||""),h(s.bankName||""),b(s.branchName||""),y(s.accountType),L(s.initialBalance),I(new Date(s.balanceEffectiveDate).toISOString().split("T")[0]),R(s.currency),te(s.notes||""),ne(s.isDefault||!1)):(l(""),d(""),h(""),b(""),y(""),L(""),I(new Date().toISOString().split("T")[0]),R("BDT"),te(""),ne(!1)),setTimeout(()=>{var K;return(K=oe.current)==null?void 0:K.focus()},50))},[t,s]);const F=async K=>{if(K.preventDefault(),!r.trim()){J(p.BANK_ACCOUNT_NAME_REQUIRED,"error");return}if(v===""){J(p.SELECT_ACCOUNT_TYPE_PLACEHOLDER,"error");return}const Te=parseFloat(String(C));if(isNaN(Te)){J(p.INITIAL_BALANCE_REQUIRED,"error");return}if(!O){J(p.BALANCE_EFFECTIVE_DATE_REQUIRED,"error");return}await n({accountName:r.trim(),accountNumber:c.trim()||void 0,bankName:f.trim()||void 0,branchName:_.trim()||void 0,accountType:v,initialBalance:Te,balanceEffectiveDate:new Date(O).toISOString(),currency:j,notes:U.trim()||void 0,isDefault:Q},s==null?void 0:s.id)},H="w-full px-3 py-1.5 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",re="block text-xs font-medium text-slate-600 mb-0.5";return o.jsx(Ya,{isOpen:t,onClose:e,title:xe?p.BANK_ACCOUNT_FORM_MODAL_TITLE_EDIT:p.BANK_ACCOUNT_FORM_MODAL_TITLE_ADD,size:"lg",children:o.jsxs("form",{onSubmit:F,className:"space-y-4 p-1",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"accountName",className:re,children:[p.ACCOUNT_NAME_LABEL," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{ref:oe,type:"text",id:"accountName",value:r,onChange:K=>l(K.target.value),className:H,required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"accountNumber",className:re,children:p.ACCOUNT_NUMBER_LABEL}),o.jsx("input",{type:"text",id:"accountNumber",value:c,onChange:K=>d(K.target.value),className:H,placeholder:p.ACCOUNT_NUMBER_PLACEHOLDER})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"accountType",className:re,children:[p.ACCOUNT_TYPE_LABEL," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{id:"accountType",value:v,onChange:K=>y(K.target.value),className:H,required:!0,children:[o.jsx("option",{value:"",disabled:!0,children:p.SELECT_ACCOUNT_TYPE_PLACEHOLDER}),Object.entries(T2).map(([K,Te])=>o.jsx("option",{value:K,children:Te},K))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bankName",className:re,children:p.BANK_NAME_LABEL}),o.jsx("input",{type:"text",id:"bankName",value:f,onChange:K=>h(K.target.value),className:H,placeholder:p.BANK_NAME_PLACEHOLDER})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"branchName",className:re,children:p.BRANCH_NAME_LABEL}),o.jsx("input",{type:"text",id:"branchName",value:_,onChange:K=>b(K.target.value),className:H,placeholder:p.BRANCH_NAME_PLACEHOLDER})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"initialBalance",className:re,children:[p.INITIAL_BALANCE_LABEL," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",id:"initialBalance",value:C,onChange:K=>L(K.target.value),className:H,step:"any",required:!0,placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"balanceEffectiveDate",className:re,children:[p.BALANCE_EFFECTIVE_DATE_LABEL," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",id:"balanceEffectiveDate",value:O,onChange:K=>I(K.target.value),className:H,required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"currency",className:re,children:p.CURRENCY_LABEL}),o.jsx("select",{id:"currency",value:j,onChange:K=>R(K.target.value),className:H,children:Object.entries(Vb).map(([K,Te])=>o.jsx("option",{value:K,children:Te},K))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"accountNotes",className:re,children:p.ACCOUNT_NOTES_LABEL}),o.jsx("textarea",{id:"accountNotes",value:U,onChange:K=>te(K.target.value),rows:2,className:H,placeholder:p.ACCOUNT_NOTES_PLACEHOLDER})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Q,onChange:K=>ne(K.target.checked),className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),o.jsx("span",{className:"text-sm text-slate-700",children:p.SET_AS_DEFAULT_ACCOUNT_LABEL})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg",children:p.CANCEL}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg shadow-sm",children:xe?p.SAVE_CHANGES:p.SAVE_BANK_ACCOUNT_BTN})]})]})})},aR=({isOpen:t,onClose:e,transactions:n,invoices:s,persons:r,bankAccounts:l,debts:c})=>{const d=new Date,f=new Date(d.getFullYear(),d.getMonth(),1),[h,_]=D.useState("all"),[b,v]=D.useState(f.toISOString().split("T")[0]),[y,C]=D.useState(d.toISOString().split("T")[0]),[L,O]=D.useState(!0),[I,j]=D.useState(!0),[R,U]=D.useState(!0),[te,Q]=D.useState(!0),[ne,J]=D.useState([]),[oe,xe]=D.useState(0),[F,H]=D.useState(0),[re,K]=D.useState(0),[Te,G]=D.useState(0),he=ae=>{var V;return((V=r.find(ce=>ce.id===ae))==null?void 0:V.name)||p.UNKNOWN_PERSON},ue=()=>{if(!b||!y){alert(p.SELECT_DATE_RANGE);return}const ae=new Date(b);ae.setHours(0,0,0,0);const V=new Date(y);V.setHours(23,59,59,999);let ce=0;const M=[],k=l.find(de=>de.id===h);k?(ce=k.initialBalance,n.forEach(de=>{de.bankAccountId===k.id&&new Date(de.date)<ae&&(ce+=de.type===fs.INCOME?de.amount:-de.amount)}),s.forEach(de=>{var ye;(ye=de.paymentsReceived)==null||ye.forEach(Ue=>{Ue.bankAccountId===k.id&&new Date(Ue.paymentDate)<ae&&(ce+=de.invoiceType===Sa.SALES?Ue.amount:-Ue.amount)})})):h==="all"&&l.filter(de=>!de.isDeleted).forEach(de=>{ce+=de.initialBalance,n.forEach(ye=>{ye.bankAccountId===de.id&&new Date(ye.date)<ae&&(ce+=ye.type===fs.INCOME?ye.amount:-ye.amount)}),s.forEach(ye=>{var Ue;(Ue=ye.paymentsReceived)==null||Ue.forEach(we=>{we.bankAccountId===de.id&&new Date(we.paymentDate)<ae&&(ce+=ye.invoiceType===Sa.SALES?we.amount:-we.amount)})})}),L&&n.filter(de=>(h==="all"?!!de.bankAccountId:de.bankAccountId===h)&&new Date(de.date)>=ae&&new Date(de.date)<=V&&!de.isDeleted).forEach(de=>{M.push({id:`tx-${de.id}`,date:de.date,description:de.description,typeLabel:de.type===fs.INCOME?p.ENTRY_TYPE_INCOME:p.ENTRY_TYPE_EXPENSE,credit:de.type===fs.INCOME?de.amount:0,debit:de.type===fs.EXPENSE?de.amount:0,runningBalance:0,originalItemType:"transaction",originalItemId:de.id})}),I&&s.filter(de=>de.invoiceType===Sa.SALES&&!de.isDeleted).forEach(de=>{var ye;(ye=de.paymentsReceived)==null||ye.forEach(Ue=>{(h==="all"?Ue.bankAccountId:Ue.bankAccountId===h)&&new Date(Ue.paymentDate)>=ae&&new Date(Ue.paymentDate)<=V&&M.push({id:`invp-${de.id}-${Ue.id}`,date:Ue.paymentDate,description:`${p.ENTRY_TYPE_SALES_PAYMENT} (${de.invoiceNumber} - ${he(de.personId)})`,typeLabel:p.ENTRY_TYPE_SALES_PAYMENT,credit:Ue.amount,debit:0,runningBalance:0,originalItemType:"invoice_payment",originalItemId:de.id})})}),R&&s.filter(de=>de.invoiceType===Sa.PURCHASE&&!de.isDeleted).forEach(de=>{var ye;(ye=de.paymentsReceived)==null||ye.forEach(Ue=>{(h==="all"?Ue.bankAccountId:Ue.bankAccountId===h)&&new Date(Ue.paymentDate)>=ae&&new Date(Ue.paymentDate)<=V&&M.push({id:`invp-${de.id}-${Ue.id}`,date:Ue.paymentDate,description:`${p.ENTRY_TYPE_PURCHASE_PAYMENT} (${de.invoiceNumber} - ${he(de.personId)})`,typeLabel:p.ENTRY_TYPE_PURCHASE_PAYMENT,credit:0,debit:Ue.amount,runningBalance:0,originalItemType:"invoice_payment",originalItemId:de.id})})}),te&&n.filter(de=>{var ye;return((ye=de.linkedLedgerEntryId)==null?void 0:ye.startsWith("debt_settle_"))&&(h==="all"?!!de.bankAccountId:de.bankAccountId===h)&&new Date(de.date)>=ae&&new Date(de.date)<=V&&!de.isDeleted}).forEach(de=>{const ye=de.type===fs.INCOME?p.ENTRY_TYPE_DEBT_RECEIVED_TO_BANK:p.ENTRY_TYPE_DEBT_PAID_FROM_BANK;M.push({id:`debt-tx-${de.id}`,date:de.date,description:de.description,typeLabel:ye,credit:de.type===fs.INCOME?de.amount:0,debit:de.type===fs.EXPENSE?de.amount:0,runningBalance:0,originalItemType:"debt_settlement",originalItemId:de.linkedLedgerEntryId||de.id})}),M.sort((de,ye)=>new Date(de.date).getTime()-new Date(ye.date).getTime());let Y=ce,Z=0,fe=0;const Ne=M.map(de=>(Y=Y+de.credit-de.debit,Z+=de.credit,fe+=de.debit,{...de,runningBalance:Y}));xe(ce),J(Ne),G(Z),K(fe),H(Y)};return D.useEffect(()=>{t&&ue()},[t,h,b,y,L,I,R,te]),o.jsx(Ya,{isOpen:t,onClose:e,title:p.BANK_REPORT_MODAL_TITLE,size:"3xl",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200 mb-4 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bankAccountFilter",className:"block text-xs font-medium text-slate-500 mb-1",children:p.SELECT_BANK_ACCOUNT_LABEL}),o.jsxs("select",{id:"bankAccountFilter",value:h,onChange:ae=>_(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white",children:[o.jsx("option",{value:"all",children:p.ALL_BANK_ACCOUNTS_OPTION}),l.filter(ae=>!ae.isDeleted).map(ae=>o.jsx("option",{value:ae.id,children:ae.accountName},ae.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"reportStartDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.START_DATE}),o.jsx("input",{type:"date",id:"reportStartDate",value:b,onChange:ae=>v(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"reportEndDate",className:"block text-xs font-medium text-slate-500 mb-1",children:p.END_DATE}),o.jsx("input",{type:"date",id:"reportEndDate",value:y,onChange:ae=>C(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm bg-white"})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1.5",children:p.FILTER_BY_ENTRY_TYPE_LABEL}),o.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1.5 text-xs",children:[{label:p.INCLUDE_DIRECT_TRANSACTIONS_LABEL,state:L,setter:O},{label:p.INCLUDE_SALES_INVOICE_PAYMENTS_LABEL,state:I,setter:j},{label:p.INCLUDE_PURCHASE_BILL_PAYMENTS_LABEL,state:R,setter:U},{label:p.INCLUDE_DEBT_SETTLEMENTS_LABEL,state:te,setter:Q}].map(ae=>o.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ae.state,onChange:V=>ae.setter(V.target.checked),className:"form-checkbox h-3.5 w-3.5 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),o.jsx("span",{className:"text-slate-700",children:ae.label})]},ae.label))})]})]}),o.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar-modal pr-1",children:[o.jsxs("div",{className:"mb-3 p-2.5 bg-sky-50 rounded-md border border-sky-200 text-xs",children:[o.jsx("h3",{className:"font-semibold text-sky-700 mb-1",children:p.REPORT_SUMMARY_TITLE}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-2 gap-y-0.5",children:[o.jsxs("span",{children:[p.OPENING_BALANCE_LABEL,":"]})," ",o.jsxs("span",{className:"text-right font-medium",children:[oe.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]}),o.jsxs("span",{children:[p.TOTAL_CREDITS_LABEL,":"]})," ",o.jsxs("span",{className:"text-right font-medium text-green-600",children:["+",Te.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]}),o.jsxs("span",{children:[p.TOTAL_DEBITS_LABEL,":"]})," ",o.jsxs("span",{className:"text-right font-medium text-red-600",children:["-",re.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]}),o.jsxs("span",{className:"font-semibold",children:[p.CLOSING_BALANCE_LABEL,":"]})," ",o.jsxs("span",{className:`text-right font-semibold ${F>=0?"text-sky-700":"text-red-700"}`,children:[F.toLocaleString("bn-BD",{minimumFractionDigits:2}),""]})]})]}),ne.length===0?o.jsx("p",{className:"text-slate-500 text-center py-8",children:p.NO_BANK_ACTIVITIES_FOR_PERIOD}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs",children:[o.jsx("thead",{className:"bg-slate-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.REPORT_TABLE_DATE_HEADER}),o.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.REPORT_TABLE_DESCRIPTION_HEADER}),o.jsx("th",{className:"px-2 py-2 text-left font-medium text-slate-600",children:p.REPORT_TABLE_TYPE_HEADER}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.REPORT_TABLE_CREDIT_HEADER}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.REPORT_TABLE_DEBIT_HEADER}),o.jsx("th",{className:"px-2 py-2 text-right font-medium text-slate-600",children:p.REPORT_TABLE_BALANCE_HEADER})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:ne.map(ae=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-500",children:new Date(ae.date).toLocaleDateString("bn-BD")}),o.jsx("td",{className:"px-2 py-2 whitespace-normal break-words max-w-xs text-slate-700",children:ae.description}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-slate-600",children:ae.typeLabel}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-green-600",children:ae.credit>0?ae.credit.toLocaleString("bn-BD",{minimumFractionDigits:2}):"-"}),o.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-red-600",children:ae.debit>0?ae.debit.toLocaleString("bn-BD",{minimumFractionDigits:2}):"-"}),o.jsx("td",{className:`px-2 py-2 whitespace-nowrap text-right font-medium ${ae.runningBalance>=0?"text-slate-800":"text-red-700"}`,children:ae.runningBalance.toLocaleString("bn-BD",{minimumFractionDigits:2})})]},ae.id))})]})})]}),o.jsx("div",{className:"mt-5 pt-4 border-t border-slate-200 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:o.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-500 hover:bg-slate-600 rounded-lg shadow-sm",children:p.CLOSE_BTN})})]})})};let k0=0,x2=0;const E2=()=>{const t=Date.now();return t===x2?k0++:(k0=0,x2=t),`pay_${t}_${k0}_${Math.random().toString(36).substring(2,9)}`},rR=()=>{const t=Nc(),e=!1,n="previewUserSSR";let s,r;s=t.currentUser,r=t.isAuthLoading;const{authError:l,clearAuthError:c,login:d,signup:f,logout:h,requestPasswordReset:_,resetPasswordWithCode:b,changePassword:v,updateCurrentUserData:y}=t,{addNotification:C}=ur(),[L,O]=D.useState([]),[I,j]=D.useState([]),[R,U]=D.useState([]),[te,Q]=D.useState([]),[ne,J]=D.useState([]),[oe,xe]=D.useState([]),[F,H]=D.useState([]),[re,K]=D.useState([]),[Te,G]=D.useState([]),[he,ue]=D.useState([]),[ae,V]=D.useState([]),[ce,M]=D.useState([]),[k,Y]=D.useState(()=>{const $=localStorage.getItem(Tt.GEMINI_SETTINGS);if($)try{return JSON.parse($)}catch(Se){console.error("Failed to parse Gemini settings from localStorage",Se)}return Bo}),[Z,fe]=D.useState(!0),[Ne,de]=D.useState(null),[ye,Ue]=D.useState("bn-BD"),[we,Ze]=D.useState(()=>{const $=localStorage.getItem(Tt.AI_VOICE_REPLAY_ENABLED);return $?JSON.parse($):!1}),[Je,Qe]=D.useState(()=>localStorage.getItem(Tt.AI_ASSISTANT_SCOPE)||"app"),[je,ge]=D.useState(!1),Fe=D.useRef(null),[ut,Pe]=D.useState(!1),[nt,it]=D.useState(null),[st,yt]=D.useState(()=>{const $=localStorage.getItem(Tt.AI_ASSISTANT_LOGS);try{return $?JSON.parse($):[]}catch(Se){return console.error("Failed to parse AI logs from localStorage",Se),[]}}),[Pt,Rt]=D.useState(!1),[Ft,Yt]=D.useState(()=>{const $=localStorage.getItem(Tt.EXPENSE_FIELD_REQUIREMENTS);if($)try{return JSON.parse($)}catch(Se){console.error("Failed to parse expense field requirements from localStorage",Se)}return{quantityRequired:!1,unitRequired:!1,notesRequired:!1}}),[Be,We]=D.useState(()=>{const $=localStorage.getItem(Tt.GLOBAL_PHONETIC_MODE);if($)try{return JSON.parse($)}catch(Se){return console.error("Failed to parse global phonetic mode from localStorage",Se),!1}return!1}),[Lt,pe]=D.useState(!1),[vt,At]=D.useState(null),[Kt,Gt]=D.useState(!1),[xn,rs]=D.useState(null),[Cn,Ws]=D.useState(!1),[Un,js]=D.useState(!1),[ln,ls]=D.useState(!1),[un,Mn]=D.useState(null),[qa,gs]=D.useState(!1),[ca,Nn]=D.useState(null),[Xt,Ln]=D.useState(!1),[kn,Fn]=D.useState(!1),[Rn,_s]=D.useState(null),[hs,er]=D.useState(!1),[Ca,En]=D.useState(null),[bs,Qt]=D.useState(!1),[Ls,Ts]=D.useState(null),[$n,La]=D.useState(!1),[ua,Bs]=D.useState(!1),[ms,wa]=D.useState(null),[Is,ka]=D.useState(!1),[Wn,ys]=D.useState(!1),[da,ws]=D.useState(null),[tr,Ta]=D.useState(!1),[sa,Gr]=D.useState(null),[mn,Hr]=D.useState(!1),[Ds,ea]=D.useState(!1),[Yr,wr]=D.useState(!1),[dr,Ns]=D.useState(!1),[Ia,li]=D.useState(!1),[cs,qr]=D.useState(!1),[_i,bi]=D.useState(!1),[Er,ci]=D.useState(!1),[Ti,za]=D.useState(!1),[ui,Ir]=D.useState(!1),[Da,yi]=D.useState(!1),[be,Re]=D.useState(!1),[ze,dt]=D.useState(!1),[bt,Dt]=D.useState(!1),[wt,xt]=D.useState(!1),[Jt,_n]=D.useState(!1),[on,ts]=D.useState(null),[Yn,jn]=D.useState(null),[vn,Dr]=D.useState(!1),[zr,fr]=D.useState(!1),[di,nr]=D.useState(!1),[fi,fa]=D.useState(null),[sr,_r]=D.useState(!1),[br,Pi]=D.useState(!1),[Ji,le]=D.useState(null),[_e,tt]=D.useState(null),[Xe,rt]=D.useState(!1),[_t,mt]=D.useState(null),[Bt,kt]=D.useState(!1),[Ct,$t]=D.useState(!1),[Bn,Kn]=D.useState(null),[Xn,zn]=D.useState(!1),[ha,bn]=D.useState(null),[Gs,aa]=D.useState("login"),[dn,vs]=D.useState(!1),[Tr,Yo]=D.useState(),[Mi,_o]=D.useState(!1),[S,q]=D.useState(!1),[Ee,Ae]=D.useState(!1),[Me,et]=D.useState({title:"",message:"",onConfirmAction:()=>Promise.resolve(),confirmButtonText:void 0,confirmButtonColor:void 0}),[Nt,Vt]=D.useState(!1),Zt=D.useMemo(()=>(s==null?void 0:s.email)===Mb,[s]),pn=D.useCallback($=>{const Se={id:Date.now().toString()+Math.random().toString(16).substring(2),timestamp:new Date().toISOString(),...$};yt(ot=>{const at=[...ot,Se];try{localStorage.setItem(Tt.AI_ASSISTANT_LOGS,JSON.stringify(at))}catch(St){console.error("Failed to save AI logs to localStorage:",St)}return at})},[]),wn=D.useCallback(()=>{yt([]),localStorage.removeItem(Tt.AI_ASSISTANT_LOGS),C(p.AI_LOG_CLEARED_SUCCESS,"success")},[C]),as=$=>{Ze($)};D.useEffect(()=>{localStorage.setItem(Tt.AI_VOICE_REPLAY_ENABLED,JSON.stringify(we))},[we]);const Ks=$=>{Qe($)};D.useEffect(()=>{localStorage.setItem(Tt.AI_ASSISTANT_SCOPE,Je)},[Je]);const Xs=D.useCallback(async()=>{if(!(!s||!s.id||e)){if(s.enableDataFetchOnStartup===!1){console.log("Data fetch on startup is disabled by admin setting. Skipping data load."),fe(!1),C("     ","info",5e3);return}fe(!0);try{const[$,Se,ot,at,St,Mt,It,sn,Wt,an,rn,is]=await Promise.all([ri("transactions",s.id),ri("debts",s.id),ri("persons",s.id),ri("person_ledger_entries",s.id),rT(s.id),ri("budgetCategories",s.id),ri("budgets",s.id),ri("messages",s.id),ri("invoices",s.id),ri("products",s.id),ri("company_profiles",s.id),ri("bank_accounts",s.id)]);O($),j(Se),U(ot),Q(at),J(St),xe(Mt),H(It),K(sn),G(Wt),ue(an),V(rn),M(is);const ga=localStorage.getItem(Tt.DEFAULT_BANK_ACCOUNT_ID);s.defaultBankAccountId?tt(s.defaultBankAccountId):ga&&tt(ga)}catch($){console.error("Error loading data:",$),de(`    : ${$.message}`),C(`    : ${$.message}`,"error")}finally{fe(!1)}}},[s,C,e]);D.useEffect(()=>{s&&s.id?Xs():(O([]),j([]),U([]),Q([]),J([]),xe([]),H([]),K([]),G([]),ue([]),V([]),M([]),r||fe(!1))},[s,Xs,e,r]),D.useEffect(()=>{localStorage.setItem(Tt.EXPENSE_FIELD_REQUIREMENTS,JSON.stringify(Ft))},[Ft]),D.useEffect(()=>{localStorage.setItem(Tt.GLOBAL_PHONETIC_MODE,JSON.stringify(Be))},[Be]),D.useEffect(()=>{localStorage.setItem(Tt.GEMINI_SETTINGS,JSON.stringify(k))},[k]),D.useEffect(()=>{_e?localStorage.setItem(Tt.DEFAULT_BANK_ACCOUNT_ID,_e):localStorage.removeItem(Tt.DEFAULT_BANK_ACCOUNT_ID)},[_e]);const ma=()=>{We($=>{const Se=!$;return C(Se?p.PHONETIC_BANGLA_ACTIVE:p.PHONETIC_ENGLISH_ACTIVE,"info",3e3),Se})},Hs=async $=>{if(!s||!s.id||s.id===n)return C((s==null?void 0:s.id)===n?"       ":p.AUTH_ERROR_GENERAL,"info"),!1;const Se=`tx_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,ot=new Date().toISOString(),at={...$,id:Se,userId:s.id,originalDate:$.date,lastModified:ot,editHistory:[{timestamp:ot,action:"created",userId:s.id,snapshot:{date:$.date,description:$.description,amount:$.amount,type:$.type,originalDate:$.date,linkedLedgerEntryId:$.linkedLedgerEntryId,bankAccountId:$.bankAccountId,bankAccountName:$.bankAccountName,isDeleted:!1,deletedAt:void 0}}]},St={...at};try{const Mt=await Du("transactions",s.id,at);return Mt.success?(O(It=>[St,...It.filter(sn=>sn.id!==St.id)]),C(p.TRANSACTION_ADDED_SUCCESS||"   !","success"),!0):(console.error("Error adding transaction (backend success:false):",Mt.error,Mt.sql),C(`    : ${Mt.error||" "}`,"error"),!1)}catch(Mt){return console.error("Error adding transaction (exception):",Mt),C(`    : ${Mt.message}`,"error"),!1}},ja=async $=>{if(!s||!s.id||s.id===n){C((s==null?void 0:s.id)===n?"      ":p.AUTH_ERROR_GENERAL,"info"),pe(!1),At(null);return}const Se=new Date().toISOString(),ot={...$,lastModified:Se,editHistory:[...$.editHistory||[],{timestamp:Se,action:"updated",userId:s.id,snapshot:{date:$.date,description:$.description,amount:$.amount,type:$.type,originalDate:$.originalDate,linkedLedgerEntryId:$.linkedLedgerEntryId,bankAccountId:$.bankAccountId,bankAccountName:$.bankAccountName,isDeleted:$.isDeleted,deletedAt:$.deletedAt}}]};try{O(at=>at.map(St=>St.id===ot.id?ot:St)),await gi("transactions",s.id,ot,`id = '${ot.id}'`),C(p.TRANSACTION_UPDATED,"success"),pe(!1),At(null)}catch(at){console.error("Error saving transaction:",at),C(`    : ${at.message}`,"error"),O(St=>St.map(Mt=>Mt.id===$.id?$:Mt))}},Rr=async $=>{if(!s||!s.id||s.id===n){C((s==null?void 0:s.id)===n?"     ":p.AUTH_ERROR_GENERAL,"info");return}const Se=L.find(ot=>ot.id===$);if(Se){const ot=new Date().toISOString(),at={date:Se.date,description:Se.description,amount:Se.amount,type:Se.type,originalDate:Se.originalDate,linkedLedgerEntryId:Se.linkedLedgerEntryId,bankAccountId:Se.bankAccountId,bankAccountName:Se.bankAccountName,isDeleted:!0,deletedAt:ot},St={...Se,isDeleted:!0,deletedAt:ot,lastModified:new Date().toISOString(),editHistory:[...Se.editHistory||[],{timestamp:new Date().toISOString(),action:"deleted",userId:s.id,snapshot:at}]};O(Mt=>Mt.map(It=>It.id===$?St:It)),await gi("transactions",s.id,{isDeleted:1,deletedAt:St.deletedAt,lastModified:St.lastModified,editHistory:JSON.stringify(St.editHistory)},`id = '${$}'`),C(p.ITEM_DELETED,"success")}},hr=async $=>{console.log("Restore transaction",$)},Or=$=>{rs($),Gt(!0)},qo=async($,Se)=>{if(!s||!s.id||s.id===n){C((s==null?void 0:s.id)===n?"  /    ":p.AUTH_ERROR_GENERAL,"info"),Se?ls(!1):js(!1);return}let ot=$.explicitSelectedPersonId;if(!ot&&$.personNameValue.trim()){const Mt=R.find(It=>!It.isDeleted&&(It.customAlias&&It.customAlias.toLowerCase()===$.personNameValue.trim().toLowerCase()||It.name.toLowerCase()===$.personNameValue.trim().toLowerCase()));if(Mt)ot=Mt.id;else{C("                   ","warning");const It=await $r({name:$.personNameValue.trim()});if(It&&It.id)ot=It.id,C(p.PERSON_ADDED_IMPLICITLY_DEBT.replace("{personName}",$.personNameValue.trim()),"success");else{C("         ","error");return}}}if(!ot){C(p.PERSON_NAME_REQUIRED,"error");return}const at=new Date().toISOString(),St=$.formPurpose===ps.CREATE_PAYABLE?_a.PAYABLE:$.formPurpose===ps.CREATE_RECEIVABLE?_a.RECEIVABLE:null;if(!St&&!Se){C("/    ","error");return}if(Se){const Mt=I.find(an=>an.id===Se);if(!Mt){C("  /   ","error");return}const It={personId:ot,originalAmount:$.amount,remainingAmount:$.amount-(Mt.originalAmount-Mt.remainingAmount),description:$.description,type:$.debtType||Mt.type,dueDate:$.dueDate||void 0,lastModified:at};It.remainingAmount<0&&(C("        ","warning"),It.remainingAmount=0),It.remainingAmount===0&&Mt.isSettled;const sn={timestamp:at,action:"updated",userId:s.id,snapshot:{personId:It.personId,originalAmount:It.originalAmount,remainingAmount:It.remainingAmount,description:It.description,type:It.type,dueDate:It.dueDate,isSettled:Mt.isSettled,creationDate:Mt.creationDate,settledDate:Mt.settledDate}},Wt={...Mt,...It,editHistory:[...Mt.editHistory||[],sn]};try{j(an=>an.map(rn=>rn.id===Se?Wt:rn)),await gi("debts",s.id,Wt,`id = '${Se}'`),C(p.DEBT_UPDATED,"success"),ls(!1),Mn(null)}catch(an){console.error("Error updating debt:",an),C(`/   : ${an.message}`,"error"),j(rn=>rn.map(is=>is.id===Se?Mt:is))}}else{if(!St){C(" /   ","error");return}const Mt=`debt_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,It={id:Mt,userId:s.id,personId:ot,originalAmount:$.amount,remainingAmount:$.amount,description:$.description,type:St,dueDate:$.dueDate||void 0,isSettled:!1,creationDate:at,lastModified:at,editHistory:[{timestamp:at,action:"created",userId:s.id,snapshot:{personId:ot,originalAmount:$.amount,remainingAmount:$.amount,description:$.description,type:St,dueDate:$.dueDate||void 0,isSettled:!1,creationDate:at}}]};try{j(sn=>[It,...sn]),await Du("debts",s.id,It),C(p.DEBT_ADDED,"success"),js(!1)}catch(sn){console.error("Error adding debt:",sn),C(`/   : ${sn.message}`,"error"),j(Wt=>Wt.filter(an=>an.id!==Mt))}}},hi=async $=>{console.log("Delete debt",$)},mi=async $=>{var sn;if(!s||!s.id||s.id===n){C("           ","info");return}const Se=I.findIndex(Wt=>Wt.id===$);if(Se===-1)return;const ot=I[Se],at=new Date().toISOString(),Mt=!ot.isSettled,It={...ot,isSettled:Mt,settledDate:Mt?at:void 0,remainingAmount:Mt?0:ot.originalAmount,lastModified:at,editHistory:[...ot.editHistory||[],{timestamp:at,action:"updated",userId:s.id,snapshot:{...ot,isSettled:Mt,settledDate:Mt?at:void 0,remainingAmount:Mt?0:ot.originalAmount}}]};j(Wt=>Wt.map(an=>an.id===$?It:an));try{if(await gi("debts",s.id,It,`id = '${$}'`),C(Mt?"/     ":"/     ","success"),Mt&&ot.remainingAmount>0){const Wt=R.find(is=>is.id===ot.personId),an=Wt?Wt.customAlias||Wt.name:p.UNKNOWN_PERSON,rn={date:ot.settledDate||at,amount:ot.remainingAmount,type:ot.type===_a.PAYABLE?fs.EXPENSE:fs.INCOME,description:ot.type===_a.PAYABLE?` : ${an} (${ot.description})`:` : ${an} (${ot.description})`,linkedLedgerEntryId:`debt_settle_${ot.id}`,bankAccountId:_e||void 0,bankAccountName:_e?(sn=ce.find(is=>is.id===_e))==null?void 0:sn.accountName:void 0};await Hs(rn)}}catch(Wt){console.error("Error updating debt settlement status:",Wt),C(`/   : ${Wt.message}`,"error"),j(an=>an.map(rn=>rn.id===$?ot:rn))}},Zi=$=>{Nn($),gs(!0)},$r=async($,Se)=>(console.log("Save person",$,Se),null),zo=async $=>{console.log("Delete person",$)},Qi=async $=>{console.log("Restore person",$)},ya=$=>{En($),er(!0)},ki=async($,Se,ot,at)=>{var rn;if(!s||!s.id||s.id===n)return;const St=he.find(is=>is.id===$);if(!St){console.error(`Product with ID ${$} not found for stock adjustment.`);return}const Mt=new Date().toISOString(),It=at||Mt,sn=(St.currentStock||0)+Se,Wt={id:`sh_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,date:It,type:"purchase_received",quantityChange:Se,newStockLevel:sn,notes:`  #${ot}  `,relatedInvoiceId:(rn=Te.find(is=>is.invoiceNumber===ot))==null?void 0:rn.id,userId:s.id},an={...St,currentStock:sn,stockHistory:[...St.stockHistory||[],Wt],lastModified:Mt};ue(is=>is.map(ga=>ga.id===$?an:ga));try{await gi("products",s.id,{currentStock:an.currentStock,stockHistory:JSON.stringify(an.stockHistory),lastModified:an.lastModified},`id = '${$}'`),C(`'${St.name}'   ${Se.toLocaleString("bn-BD")} ${St.stockUnit||""}   `,"success")}catch(is){C(`'${St.name}'     : ${is.message}`,"error"),ue(ga=>ga.map(Hl=>Hl.id===$?St:Hl))}},ji=async($,Se,ot)=>{if(!s||!s.id||s.id===n)return C((s==null?void 0:s.id)===n?"   /   ":"   ","error"),null;const at=new Date().toISOString();if(ot){const St=he.find(It=>It.id===ot);if(!St)return C("   ","error"),null;const Mt={...St,...$,stockUnit:(Se==null?void 0:Se.stockUnit)||St.stockUnit||p.DEFAULT_UNIT_PIECE,lowStockThreshold:(Se==null?void 0:Se.lowStockThreshold)??St.lowStockThreshold??5,lastModified:at};return ue(It=>It.map(sn=>sn.id===ot?Mt:sn)),await gi("products",s.id,Mt,`id = '${ot}'`),C(p.PRODUCT_UPDATED_SUCCESS,"success"),nr(!1),fa(null),fr(!0),Mt}else{const St={id:`prod_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,userId:s.id,...$,createdAt:at,lastModified:at,currentStock:(Se==null?void 0:Se.initialStock)??0,stockUnit:(Se==null?void 0:Se.stockUnit)||p.DEFAULT_UNIT_PIECE,lowStockThreshold:(Se==null?void 0:Se.lowStockThreshold)??5,stockHistory:Se!=null&&Se.initialStock&&Se.initialStock>0?[{id:`sh_${Date.now()}`,date:at,type:"initial",quantityChange:Se.initialStock,newStockLevel:Se.initialStock,userId:s.id}]:[]};return ue(Mt=>[St,...Mt]),await Du("products",s.id,St),C(p.PRODUCT_ADDED_SUCCESS,"success"),nr(!1),fr(!0),St}},bo=async $=>{console.log("Delete product",$)},$o=async $=>{console.log("Restore product",$)},mr=async($,Se)=>{if(!s||!s.id||s.id===n)return C((s==null?void 0:s.id)===n?"   /   ":"   ","error"),null;const ot=new Date().toISOString();if(Se){const at=Te.find(It=>It.id===Se);if(!at)return C(p.INVOICE_NOT_FOUND_ERROR||"   ","error"),null;const St=at.invoiceType,Mt={...at,...$,invoiceType:St,lastModified:ot,editHistory:[...at.editHistory||[],{timestamp:ot,action:"updated",userId:s.id,snapshot:{invoiceNumber:$.invoiceNumber,invoiceType:St,invoiceDate:$.invoiceDate,dueDate:$.dueDate,personId:$.personId,companyProfileId:$.companyProfileId,items:$.items,subtotal:$.subtotal,totalAmount:$.totalAmount,paymentStatus:$.paymentStatus}}]};delete Mt.initialPayment,G(It=>It.map(sn=>sn.id===Se?Mt:sn)),jn(null);try{return await gi("invoices",s.id,Mt,`id = '${Se}'`),C(p.INVOICE_UPDATED_SUCCESS,"success"),Mt}catch(It){return C(p.INVOICE_CREATION_ERROR.replace("{error}",It.message).replace("",""),"error"),G(sn=>sn.map(Wt=>Wt.id===Se?at:Wt)),null}}else{if(!$.invoiceType)return C("  (/)   ","error"),null;const at=`inv_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`;let St=[],Mt=$.paymentStatus;if($.initialPayment){const sn={...$.initialPayment,id:E2(),recordedAt:ot};St.push(sn),sn.amount>=$.totalAmount?Mt=Ht.PAID:sn.amount>0&&(Mt=Ht.PARTIALLY_PAID)}const It={...$,id:at,userId:s.id,createdAt:ot,lastModified:ot,paymentsReceived:St,paymentStatus:Mt,editHistory:[],isDeleted:!1};G(sn=>[It,...sn]);try{if(await Du("invoices",s.id,It),C(p.INVOICE_CREATED_SUCCESS,"success"),(It.paymentStatus===Ht.PAID||It.paymentStatus===Ht.PARTIALLY_PAID)&&It.initialPayment&&It.initialPayment.amount>0){const sn=It.initialPayment.amount;let Wt="",an;It.invoiceType===Sa.SALES?(Wt=p.INVOICE_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",It.invoiceNumber).replace("{amount}",sn.toLocaleString("bn-BD")),an=fs.INCOME):(Wt=p.BILL_INITIAL_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",It.invoiceNumber).replace("{amount}",sn.toLocaleString("bn-BD")),an=fs.EXPENSE);const rn={date:It.initialPayment.paymentDate||ot,description:Wt,amount:sn,type:an,linkedLedgerEntryId:`invoice_${It.id}_payment_initial`,bankAccountId:It.initialPayment.bankAccountId,bankAccountName:It.initialPayment.bankAccountName};await Hs(rn)}if(It.invoiceType===Sa.PURCHASE)for(const sn of It.items)if(sn.originalProductId)await ki(sn.originalProductId,sn.quantity,It.invoiceNumber,It.invoiceDate);else{const Wt=he.find(an=>an.name===sn.productName);Wt?await ki(Wt.id,sn.quantity,It.invoiceNumber,It.invoiceDate):console.warn(`Could not adjust stock for item '${sn.productName}' in purchase bill ${It.invoiceNumber} as product ID was missing or product not found by name.`)}return It}catch(sn){return C(p.INVOICE_CREATION_ERROR.replace("{error}",sn.message),"error"),G(Wt=>Wt.filter(an=>an.id!==at)),null}}},Ac=async($,Se)=>{if(!s||!s.id||s.id===n){C((s==null?void 0:s.id)===n?"      ":"   ","error");return}const ot=Te.findIndex(rn=>rn.id===$);if(ot===-1){C(p.INVOICE_NOT_FOUND_ERROR||"   ","error");return}const at=Te[ot],St=new Date().toISOString(),Mt={...Se,id:E2(),recordedAt:St},It=[...at.paymentsReceived||[],Mt],sn=It.reduce((rn,is)=>rn+is.amount,0);let Wt=at.paymentStatus;Math.abs(sn-at.totalAmount)<.001?Wt=Ht.PAID:sn>0?Wt=Ht.PARTIALLY_PAID:Wt=Ht.PENDING;const an={...at,paymentsReceived:It,paymentStatus:Wt,lastModified:St,editHistory:[...at.editHistory||[],{timestamp:St,action:"payment_recorded",userId:s.id,snapshot:{...at,items:at.items,paymentsReceived:It,paymentStatus:Wt,invoiceType:at.invoiceType}}]};G(rn=>rn.map(is=>is.id===$?an:is));try{await gi("invoices",s.id,an,`id = '${$}'`),C(p.PAYMENT_RECORDED_SUCCESS,"success");let rn="",is;an.invoiceType===Sa.SALES?(rn=p.INVOICE_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",an.invoiceNumber).replace("{amount}",Se.amount.toLocaleString("bn-BD")),is=fs.INCOME):(rn=p.BILL_PAYMENT_TRANSACTION_CREATED_DESC.replace("{invoiceNumber}",an.invoiceNumber).replace("{amount}",Se.amount.toLocaleString("bn-BD")),is=fs.EXPENSE);const ga={date:Se.paymentDate,description:rn,amount:Se.amount,type:is,linkedLedgerEntryId:`invoice_${$}_payment_${Mt.id}`,bankAccountId:Se.bankAccountId,bankAccountName:Se.bankAccountName};await Hs(ga)}catch(rn){C(p.PAYMENT_RECORDING_ERROR.replace("{error}",rn.message),"error"),G(is=>is.map(ga=>ga.id===$?at:ga))}},gl=async($,Se)=>(console.log("Save company profile",$,Se),null),Vl=async($,Se)=>{console.log("Update company profile",$,Se)},Wr=async $=>{console.log("Delete company profile",$)},Ba=()=>_r(!0),eo=()=>{_r(!1),le(null),Pi(!0)},xl=$=>{_r(!1),le($),Pi(!0)},Ni=()=>{Pi(!1),le(null),_r(!0)},to=async($,Se)=>{var at;if(!s||!s.id||s.id===n){C((s==null?void 0:s.id)===n?"       ":"   ","error");return}const ot=new Date().toISOString();if(Se){const St=ce.find(It=>It.id===Se);if(!St){C("    ","error");return}const Mt={...St,...$,lastModified:ot,editHistory:[...St.editHistory||[],{timestamp:ot,action:"updated",userId:s.id,snapshot:{...$,isDeleted:St.isDeleted,deletedAt:St.deletedAt}}]};M(It=>It.map(sn=>sn.id===Se?Mt:sn)),await gi("bank_accounts",s.id,Mt,`id = '${Se}'`),C(p.BANK_ACCOUNT_UPDATED_SUCCESS,"success")}else{const Mt={id:`bank_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,userId:s.id,...$,createdAt:ot,lastModified:ot,editHistory:[{timestamp:ot,action:"created",userId:s.id,snapshot:{...$,isDeleted:!1}}]};M(It=>[Mt,...It]),await Du("bank_accounts",s.id,Mt),C(p.BANK_ACCOUNT_ADDED_SUCCESS,"success")}$.isDefault?await Na(Se||((at=ce.find(St=>St.accountName===$.accountName))==null?void 0:at.id)||""):Se&&_e===Se&&!$.isDefault&&await Na(""),Ni()},pr=async $=>{!s||!s.id||s.id===n||kr(p.CONFIRM_DELETE_BANK_ACCOUNT_MSG.split("?")[0]+"?",p.CONFIRM_DELETE_BANK_ACCOUNT_MSG.split("?")[1],async()=>{const Se=ce.find(St=>St.id===$);if(!Se)return;const ot=new Date().toISOString(),at={...Se,isDeleted:!0,deletedAt:ot,lastModified:ot,editHistory:[...Se.editHistory||[],{timestamp:ot,action:"deleted",userId:s.id,snapshot:{...Se,isDeleted:!0,deletedAt:ot}}]};M(St=>St.map(Mt=>Mt.id===$?at:Mt)),await gi("bank_accounts",s.id,{isDeleted:1,deletedAt:ot,lastModified:ot,editHistory:JSON.stringify(at.editHistory)},`id = '${$}'`),C(p.BANK_ACCOUNT_DELETED_SUCCESS,"success"),_e===$&&await Na("")},p.CONFIRM_BTN_YES_DELETE,"bg-red-600 hover:bg-red-700 focus:ring-red-500")},Na=async $=>{if(!s)return;const Se=ce.find(at=>at.isDefault),ot=ce.find(at=>at.id===$);M(at=>at.map(St=>({...St,isDefault:St.id===$}))),tt($||null);try{await y({defaultBankAccountId:$||null}),Se&&Se.id!==$&&await gi("bank_accounts",s.id,{isDefault:0},`id = '${Se.id}'`),ot&&ot.id!==(Se==null?void 0:Se.id)&&await gi("bank_accounts",s.id,{isDefault:1},`id = '${ot.id}'`),ot?C(p.BANK_ACCOUNT_SET_AS_DEFAULT_SUCCESS.replace("{accountName}",ot.accountName),"success"):Se&&C(p.BANK_ACCOUNT_REMOVED_AS_DEFAULT_SUCCESS.replace("{accountName}",Se.accountName),"info")}catch(at){C(`     : ${at.message}`,"error"),M(St=>St.map(Mt=>({...Mt,isDefault:Mt.id===(Se==null?void 0:Se.id)}))),tt((Se==null?void 0:Se.id)||null)}},Kr=D.useMemo(()=>L.filter($=>$.type===fs.INCOME&&!$.isDeleted).reduce(($,Se)=>$+Se.amount,0),[L]),Ua=D.useMemo(()=>L.filter($=>$.type===fs.EXPENSE&&!$.isDeleted).reduce(($,Se)=>$+Se.amount,0),[L]),yr=D.useMemo(()=>Kr-Ua,[Kr,Ua]),Xr=D.useMemo(()=>I.filter($=>$.type===_a.PAYABLE&&!$.isSettled).reduce(($,Se)=>$+Se.remainingAmount,0),[I]),Pr=D.useMemo(()=>I.filter($=>$.type===_a.RECEIVABLE&&!$.isSettled).reduce(($,Se)=>$+Se.remainingAmount,0),[I]),Us=D.useMemo(()=>{const $=[...fh,...hh,...ne.map(Se=>Se.text)];return[...new Set($)].sort((Se,ot)=>Se.localeCompare(ot,"bn-BD"))},[ne]),ar=D.useCallback($=>{const Se=te.filter(at=>at.personId===$);if(Se.length===0)return 0;const ot=Se.sort((at,St)=>new Date(St.date).getTime()-new Date(at.date).getTime())[0];return(ot==null?void 0:ot.balanceAfterEntry)||0},[te]),va=()=>{fr(!1),fa(null),nr(!0)},Nr=$=>{fr(!1),fa($),nr(!0)},To=()=>{nr(!1),fa(null),fr(!0)},vi=D.useMemo(()=>!s||!s.id?0:re.filter($=>$.actualReceiverId===s.id&&!$.isRead&&!$.isDeleted).length,[re,s]),Wo=D.useCallback($=>{const Se=ar($),ot=I.filter(St=>St.personId===$&&!St.isSettled);let at=0;return ot.forEach(St=>{St.type===_a.RECEIVABLE?at+=St.remainingAmount:at-=St.remainingAmount}),Se+at},[ar,I]),no=$=>{Gr($),Ta(!0)},so=()=>_o(!0),ao=()=>q(!0),yo=()=>wr(!0),Ko=()=>Ln(!0),ro=()=>js(!0),Bi=()=>Ns(!0),No=()=>li(!0),ra=()=>qr(!0),Mr=()=>bi(!0),Jn=()=>ci(!0),Zn=()=>Ir(!0),Fs=()=>za(!0),pa=()=>kt(!0),Jr=()=>Ws(!0),io=()=>yi(!0),oo=()=>Re(!0),Ui=()=>Rt(!0),Gl=()=>{jn(null),it(null),dt(!0)},vo=()=>{jn(null),it(null),Dt(!0)},Ra=()=>xt(!0),vr=()=>fr(!0),rr=()=>Dr(!0),Xo=$=>{jn($),$.invoiceType===Sa.SALES?dt(!0):$.invoiceType===Sa.PURCHASE&&Dt(!0),xt(!1)},Ai=()=>{et({title:p.RESET_APP_DATA_BTN,message:p.CONFIRM_RESET_APP_DATA_MSG,onConfirmAction:async()=>{Object.values(Tt).forEach($=>localStorage.removeItem($)),C(p.APP_DATA_RESET_SUCCESS,"success"),setTimeout(()=>window.location.reload(),2e3)},confirmButtonText:p.CONFIRM_BTN_YES_DELETE,confirmButtonColor:"bg-red-600 hover:bg-red-700 focus:ring-red-500"}),Ae(!0)},lo=$=>{Ts(()=>$),Qt(!0)},Ao=()=>{Qt(!1),La(!0),_s(null),Fn(!0)},Fi=async($,Se)=>{const ot=await $r($,Se);ot&&Ls&&Ls(ot.id),Fn(!1),La(!1),Ts(null)},El=()=>{Fn(!1),La(!1),Ls&&Qt(!0),Ts(null)},_l=($,Se)=>{Kn({url:$,name:Se}),$t(!0)},Si=$=>{mt($),rt(!0)},Ci=$=>{bn($),zn(!0)},So=D.useCallback(async($,Se=ye)=>{if(console.log("[AI Assistant Debug - App.tsx] ENTERING handleProcessAICommand. Transcript:",`"${$}"`,"CurrentUser ID:",s?s.id:"NULL","Language:",Se,"Scope:",Je),!$||!s){pn({type:"error",commandText:$,errorMessage:"Transcript or currentUser was null for processing."}),Pe(!1);return}pn({type:"command",commandText:$,rawAIResponse:"Processing command..."}),u_(),Pe(!0),C(p.AI_ASSISTANT_PROCESSING,"info",3e3);const ot={totalIncome:Kr,totalExpense:Ua,balance:yr,totalPayable:Xr,totalReceivable:Pr,activeTransactionsCount:L.filter(at=>!at.isDeleted).length,personsCount:R.filter(at=>!at.isDeleted).length,featureList:[p.APP_FEATURE_TRANSACTION_TRACKING,p.APP_FEATURE_DEBT_MANAGEMENT,p.APP_FEATURE_PERSON_MANAGEMENT,p.APP_FEATURE_BUDGETING,p.APP_FEATURE_INVOICING,p.APP_FEATURE_PRODUCT_MANAGEMENT,p.APP_FEATURE_AI_FINANCIAL_TIPS,p.APP_FEATURE_CHAT_WITH_CONTACTS,p.APP_FEATURE_DATA_REPORTS,p.APP_FEATURE_USER_PROFILE_SETTINGS,p.APP_FEATURE_DATA_QUERY_AI]};try{const at=await dI($,ot,k,Se,Je),St=at==null?void 0:at.intent;let Mt=(at==null?void 0:at.responseText)||(Se==="bn-BD"?p.AI_REPLY_CANNOT_UNDERSTAND:"Sorry, I couldn't understand your request.");const It=at==null?void 0:at.actionDetails,sn=(at==null?void 0:at.rawResponse)||JSON.stringify(at);let Wt=Mt;St==="perform_action"&&(It!=null&&It.actionType)?Wt=Se==="bn-BD"?p.AI_ACTION_PERFORMED:"Okay, initiating that action for you.":St==="query_app_data"&&It||(St==="explain_feature"?Wt=at.responseText||(Se==="bn-BD"?"     ":"I'm unable to explain that feature."):St==="general_query"?Wt=at.responseText||(Se==="bn-BD"?",      ":"Sorry, I don't have an answer for that question."):Wt=at.responseText||(Se==="bn-BD"?p.AI_FALLBACK_RESPONSE:"Sorry, I can only assist with matters related to this application.")),we&&rp(Wt,Se),pn({type:at!=null&&at.error?"error":"response",commandText:$,responseText:Wt,parsedIntent:St,actionDetails:It,rawAIResponse:sn,errorMessage:at!=null&&at.error?`AI Service Error: ${at.error}`:void 0})}catch(at){console.error("[AI Assistant Debug - App.tsx] CATCH BLOCK in handleProcessAICommand. Error:",at);const St=at.message||p.AI_ASSISTANT_ERROR_UNKNOWN;C(St,"error");const Mt=Se==="bn-BD"?p.AI_REPLY_GENERAL_ERROR:"Sorry, an error occurred.";we&&rp(Mt,Se),pn({type:"error",commandText:$,errorMessage:`Error in handleProcessAICommand: ${St}`,rawAIResponse:at.toString()}),it(null)}finally{console.log("[AI Assistant Debug - App.tsx] FINALLY block in handleProcessAICommand. Setting processingAICommand to false."),Pe(!1)}},[s,pn,C,k,Kr,Ua,yr,Xr,Pr,L,R,I,ye,we,Je]),bl=D.useCallback(()=>{var Se;if(ut){console.log("[AI Assistant Debug - App.tsx] AI is currently processing a command, ignoring toggle."),pn({type:"error",errorMessage:"AI command processing in progress. Cannot start new listening session now."});return}if(je&&Fe.current){console.log("[AI Assistant Debug - App.tsx] User explicitly stopped listening."),Fe.current.stop(),ge(!1);return}const $=window.SpeechRecognition||window.webkitSpeechRecognition;if(!$){const ot=p.AI_ASSISTANT_ERROR_SERVICE_UNAVAILABLE;C(ot,"error"),pn({type:"error",errorMessage:`SpeechRecognitionAPI not available: ${ot}`});return}Fe.current||(console.log("[AI Assistant Debug - App.tsx] Initializing SpeechRecognition."),Fe.current=new $,Fe.current.continuous=!0,Fe.current.interimResults=!1,Fe.current.onstart=()=>{console.log("[AI Assistant Debug - App.tsx] Speech recognition started."),ge(!0),C(p.AI_ASSISTANT_LISTENING,"info",3e3)},Fe.current.onresult=ot=>{},Fe.current.onerror=ot=>{},Fe.current.onend=()=>{}),Fe.current&&(Fe.current.lang=ye);try{console.log("[AI Assistant Debug - App.tsx] Attempting to start speech recognition with language:",ye),(Se=Fe.current)==null||Se.start()}catch{}},[je,ut,pn,C,So,ye]);D.useEffect(()=>()=>{Fe.current&&(console.log("[AI Assistant Debug - App.tsx] Cleaning up speech recognition service on unmount/logout."),Fe.current.stop(),Fe.current.onstart=null,Fe.current.onresult=null,Fe.current.onerror=null,Fe.current.onend=null,Fe.current=null),ge(!1)},[s]);const kr=D.useCallback(($,Se,ot,at,St)=>{et({title:$,message:Se,onConfirmAction:ot,confirmButtonText:at,confirmButtonColor:St}),Ae(!0)},[]);return o.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-800 flex flex-col",children:[o.jsx(NI,{}),o.jsx(_T,{isAdminUser:Zt,onAddIncomeClick:so,onAddExpenseClick:ao,onViewTransactionsClick:yo,onManagePersonsClick:Ko,onAddDebtClick:ro,onViewReportClick:Bi,onOpenBankReportModal:No,onOpenStockReportModal:ra,onBudgetClick:Mr,onArchiveClick:Jn,onEditProfileClick:Zn,onChangePasswordClick:Fs,onOpenInboxModal:pa,onManageSuggestionsClick:Jr,onCreateSalesInvoiceClick:Gl,onCreatePurchaseBillClick:vo,onOpenInvoiceListModal:Ra,onManageProductsClick:vr,onManageBankAccountsClick:Ba,onSwitchAuthMode:$=>{aa($),vs(!0)},unreadMessagesCount:vi,onResetAppDataClick:Ai,isGlobalPhoneticModeActive:Be,onToggleGlobalPhoneticMode:ma,onManageCompanyProfilesClick:rr,onOpenGeminiSettingsModal:io,onOpenAdminAppSettingsModal:oo,onOpenAILogModal:Ui,isProcessingAICommand:ut,isAIAssistantListening:je,onToggleAIAssistantListening:bl}),o.jsxs("main",{className:"container mx-auto p-4 flex-grow pt-20 sm:pt-24",children:[r&&o.jsx("div",{className:"text-center py-20 text-slate-600 text-lg",children:p.LOADING}),!s&&!r&&o.jsx(g3,{onSwitchAuthMode:$=>{aa($),vs(!0)},onOpenInvoiceListModal:Ra}),s&&!r&&o.jsxs(o.Fragment,{children:[Z&&o.jsx("div",{className:"text-center py-10 text-slate-500",children:p.LOADING}),!Z&&o.jsxs(o.Fragment,{children:[o.jsx(bT,{totalIncome:Kr,totalExpense:Ua,balance:yr,totalPayable:Xr,totalReceivable:Pr,onOpenReceivablePersonsModal:()=>Hr(!0),onOpenPayablePersonsModal:()=>ea(!0)}),Zt&&o.jsx(mI,{balance:yr,geminiSettings:k}),o.jsx(d3,{debts:I,persons:R,onDeleteDebt:hi,onToggleSettle:mi,onEditDebt:$=>{Mn($),ls(!0)},onViewHistory:Zi,onViewPersonFinancialOverview:no})]})]})]}),dn&&o.jsxs(Ya,{isOpen:dn,onClose:()=>vs(!1),title:Gs==="login"?p.LOGIN:Gs==="signup"?p.SIGNUP:p.FORGOT_PASSWORD_TITLE,children:[" ",o.jsx(xI,{mode:Gs,initialEmail:Tr,onClose:()=>vs(!1),onSwitchMode:($,Se)=>{aa($),Se&&Yo(Se)}})," "]}),Mi&&o.jsxs(Ya,{isOpen:Mi,onClose:()=>_o(!1),title:p.MODAL_TITLE_ADD_INCOME,children:[" ",o.jsx(u1,{transactionType:fs.INCOME,onAddTransaction:Hs,suggestionsList:Us.filter($=>fh.includes($)||ne.find(Se=>Se.text===$&&Se.type==="income")),onOpenManageSuggestions:()=>{_o(!1),Ws(!0)},formTitle:p.MODAL_TITLE_ADD_INCOME,expenseFieldRequirements:Ft,onUpdateExpenseFieldRequirements:()=>{},isGlobalPhoneticModeActive:Be,bankAccounts:ce,defaultBankAccountId:_e})," "]}),S&&o.jsxs(Ya,{isOpen:S,onClose:()=>q(!1),title:p.MODAL_TITLE_ADD_EXPENSE,children:[" ",o.jsx(u1,{transactionType:fs.EXPENSE,onAddTransaction:Hs,suggestionsList:Us.filter($=>hh.includes($)||ne.find(Se=>Se.text===$&&Se.type==="expense")),onOpenManageSuggestions:()=>{q(!1),Ws(!0)},formTitle:p.MODAL_TITLE_ADD_EXPENSE,expenseFieldRequirements:Ft,onUpdateExpenseFieldRequirements:$=>Yt(Se=>({...Se,...$})),isGlobalPhoneticModeActive:Be,bankAccounts:ce,defaultBankAccountId:_e})," "]}),Lt&&vt&&o.jsx(pI,{isOpen:Lt,onClose:()=>{pe(!1),At(null)},transaction:vt,onSave:ja,allSuggestions:Us,onOpenManageSuggestions:()=>{pe(!1),Ws(!0)},isGlobalPhoneticModeActive:Be,bankAccounts:ce}),Kt&&xn&&o.jsx(_I,{isOpen:Kt,onClose:()=>Gt(!1),transaction:xn}),Cn&&o.jsx(C3,{isOpen:Cn,onClose:()=>Ws(!1),userSuggestions:ne,predefinedIncomeSuggestions:fh,predefinedExpenseSuggestions:hh,onAddSuggestion:async($,Se)=>{},onEditSuggestion:async($,Se)=>{},onDeleteSuggestion:async $=>{}}),Un&&o.jsxs(Ya,{isOpen:Un,onClose:()=>js(!1),title:p.MODAL_TITLE_ADD_DEBT,children:[" ",o.jsx(gI,{onAddDebt:qo,persons:R.filter($=>!$.isDeleted),debts:I,onOpenSelectPersonModal:lo,getCompositePersonBalance:Wo})," "]}),ln&&un&&o.jsx(EI,{isOpen:ln,onClose:()=>ls(!1),debt:un,onSave:qo,persons:R.filter($=>!$.isDeleted),onOpenSelectPersonModal:lo}),qa&&ca&&o.jsx(bI,{isOpen:qa,onClose:()=>gs(!1),debt:ca,persons:R}),Xt&&o.jsxs(Ya,{isOpen:Xt,onClose:()=>Ln(!1),title:p.MANAGE_PERSONS_MODAL_TITLE,size:"xl",children:[" ",o.jsx(Q_,{persons:R,onEditPerson:$=>{_s($),Fn(!0),Ln(!1)},onDeletePerson:zo,onViewPersonHistory:ya,onAddNewPerson:()=>{_s(null),Fn(!0),Ln(!1)},onViewPersonDebtsHistory:$=>{wa($),Bs(!0)},onViewPersonLedger:$=>{ws($),ys(!0)},getPersonNetLedgerBalance:ar,onRestorePerson:Qi,onOpenChat:Si,onOpenVideoCall:Ci})," "]}),kn&&o.jsxs(Ya,{isOpen:kn,onClose:()=>{Fn(!1),$n?El():Ln(!0)},title:Rn?p.EDIT_PERSON_MODAL_TITLE:p.ADD_PERSON_MODAL_TITLE,children:[" ",o.jsx(E3,{initialData:Rn,onSave:$n?Fi:async($,Se)=>{await $r($,Se),Fn(!1),Ln(!0)},onCancel:()=>{Fn(!1),$n?El():Ln(!0)},allPersons:R,onUserDetailsImported:$=>{}})," "]}),hs&&Ca&&o.jsx(_3,{isOpen:hs,onClose:()=>er(!1),person:Ca}),bs&&Ls&&o.jsx(b3,{isOpen:bs,onClose:()=>{Qt(!1),Ts(null)},persons:R.filter($=>!$.isDeleted),onSelectPerson:$=>{Ls($),Qt(!1),Ts(null)},onAddNewPerson:Ao}),ua&&ms&&o.jsx(T3,{isOpen:ua,onClose:()=>Bs(!1),person:ms,personDebts:I.filter($=>$.personId===ms.id),allPersons:R,onDeleteDebt:hi,onToggleSettle:mi,onEditDebt:$=>{ls(!0),Mn($),Bs(!1)},onViewDebtHistory:Zi}),Is&&da&&o.jsx(y3,{isOpen:Is,onClose:()=>ka(!1),person:da,onAddEntry:async $=>{console.log($)}}),Wn&&da&&o.jsx(N3,{isOpen:Wn,onClose:()=>ys(!1),person:da,ledgerEntries:te.filter($=>$.personId===da.id),currentNetBalance:ar(da.id),onAddEntryClick:$=>{ka(!0),ws($)},onDeleteEntry:async($,Se)=>{}}),tr&&sa&&o.jsx(v3,{isOpen:tr,onClose:()=>Ta(!1),person:sa,personDebts:I.filter($=>$.personId===sa.id),personLedgerEntries:te.filter($=>$.personId===sa.id),currentNetLedgerBalance:ar(sa.id),allPersons:R,onDeleteDebt:hi,onToggleSettle:mi,onEditDebt:$=>{ls(!0),Mn($)},onViewDebtHistory:Zi,onAddLedgerEntryClick:$=>{ka(!0),ws($)},onDeleteLedgerEntry:async($,Se)=>{}}),mn&&o.jsx(A3,{isOpen:mn,onClose:()=>Hr(!1),receivablePersons:R.map($=>({personId:$.id,personName:$.customAlias||$.name,personMobile:$.mobileNumber,totalReceivableAmount:I.filter(Se=>Se.personId===$.id&&Se.type===_a.RECEIVABLE&&!Se.isSettled).reduce((Se,ot)=>Se+ot.remainingAmount,0)})).filter($=>$.totalReceivableAmount>0),onViewPersonDetails:$=>{Gr(R.find(Se=>Se.id===$.id)),Ta(!0),Hr(!1)},persons:R}),Ds&&o.jsx(S3,{isOpen:Ds,onClose:()=>ea(!1),payablePersons:R.map($=>({personId:$.id,personName:$.customAlias||$.name,personMobile:$.mobileNumber,totalPayableAmount:I.filter(Se=>Se.personId===$.id&&Se.type===_a.PAYABLE&&!Se.isSettled).reduce((Se,ot)=>Se+ot.remainingAmount,0)})).filter($=>$.totalPayableAmount>0),onViewPersonDetails:$=>{Gr(R.find(Se=>Se.id===$.id)),Ta(!0),ea(!1)},persons:R}),Yr&&o.jsxs(Ya,{isOpen:Yr,onClose:()=>wr(!1),title:p.MODAL_TITLE_TRANSACTION_HISTORY,size:"3xl",children:[" ",o.jsx(Cp,{transactions:L,onDeleteTransaction:Rr,onEditTransaction:$=>{At($),pe(!0),wr(!1)},onViewHistory:Or,onRestoreTransaction:hr,initialShowDeleted:!1})," "]}),dr&&o.jsx(i3,{isOpen:dr,onClose:()=>Ns(!1),transactions:L,allDescriptions:Us,onDeleteTransaction:Rr,onEditTransaction:$=>{At($),pe(!0),Ns(!1)},onViewHistory:Or,onRestoreTransaction:hr}),Ia&&s&&o.jsx(aR,{isOpen:Ia,onClose:()=>li(!1),transactions:L,invoices:Te,persons:R,bankAccounts:ce,debts:I}),cs&&s&&o.jsx(J3,{isOpen:cs,onClose:()=>qr(!1),products:he,invoices:Te}),_i&&s&&o.jsx(L3,{isOpen:_i,onClose:()=>bi(!1),categories:oe,budgets:F,transactions:L,allTransactionSuggestions:Us,userCustomSuggestions:ne.map($=>$.text),onAddCategory:async($,Se)=>{},onUpdateCategory:async($,Se,ot)=>{},onDeleteCategory:async $=>{},onAddBudget:async($,Se,ot,at,St)=>{},onUpdateBudget:async($,Se)=>{},onDeleteBudget:async $=>{},calculateBudgetUsage:($,Se)=>({spent:0,remaining:0,percentageUsed:0})}),Er&&o.jsx(u3,{isOpen:Er,onClose:()=>ci(!1),allTransactions:L,persons:R,onRestoreTransaction:hr,onRestorePerson:Qi,onViewTransactionHistory:Or,onViewPersonHistory:ya,onEditPerson:$=>{_s($),Fn(!0),ci(!1)},onViewPersonDebtsHistory:$=>{wa($),Bs(!0)},onViewPersonLedger:$=>{ws($),ys(!0)},getPersonNetLedgerBalance:ar,onDeleteTransaction:Rr,onEditTransaction:$=>{At($),pe(!0),ci(!1)},onOpenChat:Si,onOpenVideoCall:Ci}),Ti&&o.jsx(h3,{isOpen:Ti,onClose:()=>za(!1)}),ui&&o.jsx(m3,{isOpen:ui,onClose:()=>Ir(!1)}),Da&&Zt&&o.jsx(Z3,{isOpen:Da,onClose:()=>yi(!1),currentSettings:k,onSaveSettings:Y}),be&&Zt&&o.jsx(Q3,{isOpen:be,onClose:()=>Re(!1)}),Pt&&s&&o.jsx(eR,{isAdminUser:Zt,isOpen:Pt,onClose:()=>Rt(!1),logs:st,onClearLogs:wn,isAIAssistantListening:je,isAICommandProcessing:ut,onToggleAIAssistantListening:bl,currentAILanguage:ye,onSetAILanguage:Ue,currentAIScope:Je,onSetAIScope:Ks,onSendCommand:So,aiVoiceReplayEnabled:we,onSetAiVoiceReplayEnabled:as}),ze&&s&&o.jsx(F3,{isOpen:ze,onClose:()=>{dt(!1),jn(null),it(null)},onSaveInvoice:mr,persons:R.filter($=>!$.isDeleted),products:he.filter($=>!$.isDeleted),companyProfiles:ae.filter($=>!$.isDeleted),onOpenSelectPersonModal:lo,onPersonAdded:async $=>await $r($),isGlobalPhoneticModeActive:Be,onOpenManageProductsModal:vr,editingInvoiceData:Yn,aiPreRenderData:Nt?nt:void 0,onAIInvoiceDataProcessed:()=>{it(null),Vt(!1)},onOpenConfirmationModal:kr}),bt&&s&&o.jsx(V3,{isOpen:bt,onClose:()=>{Dt(!1),jn(null),it(null)},onSaveInvoice:mr,persons:R.filter($=>!$.isDeleted),products:he.filter($=>!$.isDeleted),companyProfiles:ae.filter($=>!$.isDeleted),onOpenSelectPersonModal:lo,onPersonAdded:async $=>await $r($),isGlobalPhoneticModeActive:Be,onOpenManageProductsModal:vr,editingInvoiceData:Yn}),wt&&o.jsx(H3,{isOpen:wt,onClose:()=>xt(!1),invoices:Te,persons:R,onViewInvoice:$=>{ts($),_n(!0),xt(!1)},onCreateNewInvoice:()=>{jn(null),dt(!0),xt(!1)},onOpenEditInvoiceModal:Xo}),Jt&&on&&o.jsx(z3,{isOpen:Jt,onClose:()=>{_n(!1),ts(null)},invoice:on,persons:R,companyProfiles:ae.filter($=>!$.isDeleted),onRecordPayment:Ac,currentUserName:s==null?void 0:s.name}),vn&&s&&o.jsx(W3,{isOpen:vn,onClose:()=>Dr(!1),companyProfiles:ae,onAddProfile:gl,onUpdateProfile:Vl,onDeleteProfile:Wr}),zr&&s&&o.jsx(K3,{isOpen:zr,onClose:()=>fr(!1),products:he,currentUser:s,onAddNewProductClick:va,onEditProductClick:Nr,onAddProduct:async $=>{const{initialStock:Se,stockUnit:ot,lowStockThreshold:at,...St}=$;return ji(St,{initialStock:Se,stockUnit:ot,lowStockThreshold:at})},onUpdateProduct:async($,Se)=>{await ji(Se,void 0,$)},onDeleteProduct:bo,onRestoreProduct:$o,onAdjustStock:async($,Se)=>{if(!s||!s.id||s.id===n)return;const ot=he.find(sn=>sn.id===$);if(!ot)return;const at=new Date().toISOString(),St=(ot.currentStock||0)+Se.quantityChange,Mt={id:`sh_${Date.now().toString()}_${Math.random().toString(36).substring(2,7)}`,date:at,type:Se.type,quantityChange:Se.quantityChange,newStockLevel:St,notes:Se.notes,userId:s.id},It={...ot,currentStock:St,stockHistory:[...ot.stockHistory||[],Mt],lastModified:at};ue(sn=>sn.map(Wt=>Wt.id===$?It:Wt)),await gi("products",s.id,{currentStock:It.currentStock,stockHistory:JSON.stringify(It.stockHistory),lastModified:It.lastModified},`id = '${$}'`)},onViewStockHistory:async $=>{}}),di&&o.jsx(X3,{isOpen:di,onClose:To,onSave:ji,initialData:fi,isGlobalPhoneticModeActive:Be}),sr&&s&&o.jsx(nR,{isOpen:sr,onClose:()=>_r(!1),bankAccounts:ce,onOpenBankAccountForm:$=>$?xl($):eo(),onDeleteBankAccount:pr,onSetDefaultBankAccount:Na}),br&&s&&o.jsx(sR,{isOpen:br,onClose:Ni,onSave:to,initialData:Ji}),Xe&&_t&&s&&o.jsx(P3,{isOpen:Xe,onClose:()=>rt(!1),person:_t,currentUser:s,messages:re.filter($=>$.threadId===[s.id,_t.systemUserId].sort().join("_")),onSendMessage:async($,Se,ot,at)=>{},onReactToMessage:async($,Se)=>{},onDeleteMessage:async $=>{}}),Bt&&s&&o.jsx(M3,{isOpen:Bt,onClose:()=>kt(!1),currentUser:s,persons:R,messages:re,onOpenChat:Si,onOpenImageViewer:$=>$&&_l($.base64Data,$.fileName),onDeleteChatHistory:async $=>{}}),Ct&&Bn&&o.jsx(n5,{isOpen:Ct,onClose:()=>$t(!1),imageUrl:Bn.url,imageName:Bn.name}),Xn&&ha&&s&&o.jsx(U3,{isOpen:Xn,onClose:()=>zn(!1),targetPerson:ha,currentUser:s}),Ne&&o.jsx(f3,{isOpen:!!Ne,onClose:()=>de(null),message:Ne}),Ee&&o.jsx(TI,{isOpen:Ee,onClose:()=>Ae(!1),onConfirm:async()=>{await Me.onConfirmAction(),Ae(!1)},title:String(Me.title),message:Me.message,confirmButtonText:Me.confirmButtonText,confirmButtonColor:Me.confirmButtonColor})]})},r5=document.getElementById("root");if(!r5)throw new Error("Could not find root element to mount to");const iR=Eb.createRoot(r5);iR.render(o.jsx(yp.StrictMode,{children:o.jsxs(gT,{children:[" ",o.jsx(xT,{children:o.jsx(rR,{})})]})}));export{$s as _,oR as c,_2 as g};
